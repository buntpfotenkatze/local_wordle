<!-- Saved from local source at 2022-08-01T20:22:50Z using monolith v2.6.1 -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta name="theme-color" content="#000000" />
    <title>wordle - the kitty game</title>
    <link
      rel="shortcut icon"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG2SURBVHgB7VdRS8JQFD5KOlAHQ1PIl274VC8t8AfYcy/9h35B74EFvfcL+g350rP+gxZE0dMuBEmMwZhpbBbrnE0hKK83cjNhH5ydq373nE+38+HNQAQdoz3JScDAOMbgGbwwjBsNoeuz+xuGAY7jQKvVAmFlCV6v16PkYOzT4gojME0zEAELBoyxYB5keNQLv2+AfTtZvOikFjdBUqBejUaDfoHdLCwJqqpqlJcmYIpUQCqAjMiEcDKYkEjmQvEXXi6X49O1ZVkMeXyNXqApzC1MDkdYL9lCnm2NwuwXvW+f+eCx6frNj3ihALLgbrcrLNxsNp3+0512eb4t5B2dPMDjSwCH7QMhr3N6Dc/3fflnwHVdp17Lw6KRTkEsApSiIs2NRUC+KP+srM4tGI/HDGKAtBNyzsNcr4nv72D4gfEOalUV8vyhB97Ij5xQKSg/OtdXKIU8bQColsWFXyOnVGslIc82o36hgMpWWcq5BtZgobxfOWFcSAWkAv6FAMPmNrg4OkmBxpRGEHFLTkgnUvo7pNV3NmZuIpHkm5XNirC4DI84aGp0NNvLTN5jGBeQ7PH8jPInf/8II4/hHBcAAAAASUVORK5CYII="
    />
    <meta name="apple-mobile-web-app-title" content="Wordle" />
    <meta name="application-name" content="Wordle" />
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="theme-color" content="#FFFFFF" />
    <meta name="sourceApp" content="games-crosswords" />
    <meta
      property="description"
      content="Guess the hidden word in 6 tries. A new puzzle is available each day."
    />
    <meta property="og:title" content="Wordle - A daily word game" />
    <meta
      property="og:description"
      content="Guess the hidden word in 6 tries. A new puzzle is available each day."
    />
    <meta property="og:image" content="assets/wordle_og_1200x630.png" />
    <meta property="theme-color" content="#6aaa64" />
    <link
      rel="stylesheet"
      type="text/css"
      href="data:text/css;base64,QC13ZWJraXQta2V5ZnJhbWVzIHNsaWRlRG93biB7CiAgMCUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDAlKTsKICB9CiAgOTAlIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7CiAgfQogIDEwMCUgewogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwMCUpOwogIH0KfQoKQGtleWZyYW1lcyBzbGlkZURvd24gewogIDAlIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7CiAgfQogIDkwJSB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCUpOwogIH0KICAxMDAlIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMDAlKTsKICB9Cn0KCkAtd2Via2l0LWtleWZyYW1lcyBmbHlJbiB7CiAgMCUgewogICAgb3BhY2l0eTogMDsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KfQoKQGtleWZyYW1lcyBmbHlJbiB7CiAgMCUgewogICAgb3BhY2l0eTogMDsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KfQoKQC13ZWJraXQta2V5ZnJhbWVzIGZseU91dCB7CiAgMCUgewogICAgb3BhY2l0eTogMTsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAwOwogIH0KfQoKQGtleWZyYW1lcyBmbHlPdXQgewogIDAlIHsKICAgIG9wYWNpdHk6IDE7CiAgfQogIDEwMCUgewogICAgb3BhY2l0eTogMDsKICB9Cn0KCkAtd2Via2l0LWtleWZyYW1lcyBmYWRlSW4gewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDE1LjAwMDAwMSUgewogICAgb3BhY2l0eTogMDsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KfQoKQGtleWZyYW1lcyBmYWRlSW4gewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDE1LjAwMDAwMSUgewogICAgb3BhY2l0eTogMDsKICB9CiAgMTAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KfQoKLmZsZXhDb250YWluZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGZsZXgtd3JhcDogbm93cmFwOwogIHdpZHRoOiAxMDAlOwp9CgouZXhwYW5kVG9Sb3cgewogIGNvbXBvc2VzOiBmbGV4Q29udGFpbmVyOwp9CgpAbWVkaWEgKG1pbi13aWR0aDogNDQ0cHgpIHsKICAuZXhwYW5kVG9Sb3cgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7CiAgICBmbGV4LXdyYXA6IG5vd3JhcDsKICB9Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA5OTEuOThweCkgewogIC5tb2JpbGVDb2x1bW4gewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBmbGV4LXdyYXA6IG5vd3JhcDsKICB9Cn0KCi52aXN1YWxseS1oaWRkZW4gewogIGNsaXA6IHJlY3QoMCAwIDAgMCk7CiAgLXdlYmtpdC1jbGlwLXBhdGg6IGluc2V0KDUwJSk7CiAgY2xpcC1wYXRoOiBpbnNldCg1MCUpOwogIGhlaWdodDogMXB4OwogIG92ZXJmbG93OiBoaWRkZW47CiAgcG9zaXRpb246IGFic29sdXRlOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgd2lkdGg6IDFweDsKfQoKLnB6LWZvb3Rlci5kaW1tZWQsCi5wei1oZWFkZXIuZGltbWVkLAoucHotY29udGVudC5kaW1tZWQsCi53b3JkbGUtYXBwLWhlYWRlci5kaW1tZWQsCiN3b3JkbGUtYXBwLWdhbWUuZGltbWVkIHsKICBvcGFjaXR5OiAwLjY7Cn0KCi5jY3BhLXNuYWNrYmFyIHsKICBmb250LXNpemU6IDE2cHg7CiAgbGluZS1oZWlnaHQ6IDIycHg7CiAgcG9zaXRpb246IGZpeGVkOwogIHotaW5kZXg6IDExMDAwOwogIGJvdHRvbTogMTk0cHg7CiAgcmlnaHQ6IDA7CiAgbGVmdDogMDsKICBtYXgtd2lkdGg6IDc0MHB4OwogIG1heC1oZWlnaHQ6IDg1dmg7CiAgbWFyZ2luOiAwIGF1dG87CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGJhY2tncm91bmQ6ICNmZmY7CiAgcGFkZGluZzogMTVweCAzMHB4OwogIG9wYWNpdHk6IDA7CiAgYm94LXNoYWRvdzogLTRweCAzcHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMDUpLCAycHggMnB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMSk7CiAgdHJhbnNpdGlvbjogYWxsIDU3MG1zIGVhc2U7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDIwMHB4KTsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGJvcmRlci1yYWRpdXM6IDRweDsKfQoKLmNjcGEtc25hY2tiYXIuZW50ZXIgewogIG9wYWNpdHk6IDE7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDBweCk7Cn0KCi5jY3BhLXNuYWNrYmFyLmRpc21pc3NlZCB7CiAgb3BhY2l0eTogMDsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMjAwcHgpOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgouY2NwYS1zbmFja2Jhci5lcnJvciB7CiAgZmxleC1kaXJlY3Rpb246IGluaXRpYWw7CiAgYm90dG9tOiAyMHB4OwogIG1heC13aWR0aDogLXdlYmtpdC1tYXgtY29udGVudDsKICBtYXgtd2lkdGg6IC1tb3otbWF4LWNvbnRlbnQ7CiAgbWF4LXdpZHRoOiBtYXgtY29udGVudDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzOwogIGNvbG9yOiB3aGl0ZTsKICBib3JkZXItcmFkaXVzOiAycHg7Cn0KCi5jY3BhLXNuYWNrYmFyX19tc2ctY29udGFpbmVyIHsKICBvdmVyZmxvdzogYXV0bzsKfQoKLmNjcGEtc25hY2tiYXJfX21zZywKLmNjcGEtc25hY2tiYXJfX3Rlcm1zLAouY2NwYS1zbmFja2Jhcl9faGVhZGVyIHsKICBwYWRkaW5nOiA1cHggMjBweDsKICBkaXNwbGF5OiBibG9jazsKfQoKLmNjcGEtc25hY2tiYXJfX21zZyB7CiAgZmxleC1ncm93OiAxOwogIGNvbG9yOiAjMTExOwogIHBhZGRpbmctYm90dG9tOiAyNXB4Owp9CgouY2NwYS1zbmFja2Jhcl9faGVhZGVyIHsKICBjb2xvcjogIzAwMDsKICBmbGV4LWdyb3c6IDE7CiAgZm9udC13ZWlnaHQ6IDcwMDsKICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0Owp9CgouY2NwYS1zbmFja2Jhcl9fZGlzbWlzcyB7CiAgZmxleC1ncm93OiAwOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgY29sb3I6IHdoaXRlOwogIGN1cnNvcjogcG9pbnRlcjsKICBmb250LXNpemU6IDEzcHg7CiAgYmFja2dyb3VuZDogYmxhY2s7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIHBhZGRpbmc6IDdweCAzMHB4OwogIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7Cn0KCi5jY3BhLXNuYWNrYmFyX190ZXJtcyB7CiAgaGVpZ2h0OiAxODBweDsKICBmbGV4LWdyb3c6IDE7CiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsKICBjb2xvcjogIzMzMzsKICBvdmVyZmxvdy15OiBzY3JvbGw7CiAgb3ZlcmZsb3cteDogaGlkZGVuOwogIHBhZGRpbmc6IDE0cHggMjBweDsKICBtYXJnaW46IDAgMTRweCAxNHB4Owp9CgouY2NwYS1zbmFja2Jhcl9fdGVybXMgcCB7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQoKLmNjcGEtc25hY2tiYXJfX3Rlcm1zIGEgewogIGNvbG9yOiAjMjg2MGQ4Owp9CgouY2NwYS1zbmFja2Jhcl9fdGVybXMgYTpob3ZlciB7CiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KCi5jY3BhLWJvdHRvbSB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsKICB3aWR0aDogMTAwJTsKICBtYXJnaW4tdG9wOiA1cHg7CiAgbWFyZ2luLWJvdHRvbTogMTVweDsKICBtYXJnaW4tbGVmdDogMjZweDsKfQoKLmNjcGEtcHJpdmFjeS1saW5rIHsKICBtYXJnaW4tbGVmdDogMjVweDsKICBjb2xvcjogIzI4NjBkODsKfQoKLmNjcGEtcHJpdmFjeS1saW5rOmhvdmVyIHsKICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKfQoKLmNjcGEtc25hY2tiYXJfX2Rpc21pc3MtaWNvbiB7CiAgZGlzcGxheTogYmxvY2s7CiAgY3Vyc29yOiBwb2ludGVyOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICByaWdodDogMDsKICB0b3A6IDZweDsKICBoZWlnaHQ6IDQ0cHg7CiAgd2lkdGg6IDQ0cHg7Cn0KCi5jY3BhLXNuYWNrYmFyX19kaXNtaXNzLWljb246OmFmdGVyLAouY2NwYS1zbmFja2Jhcl9fZGlzbWlzcy1pY29uOjpiZWZvcmUgewogIGNvbnRlbnQ6ICIiOwogIHdpZHRoOiAxN3B4OwogIGhlaWdodDogMnB4OwogIGJvcmRlci1yYWRpdXM6IDFweDsKICBiYWNrZ3JvdW5kOiAjMTExOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiAxMy41cHg7CiAgdG9wOiAyMnB4OwogIHRyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7CiAgdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpOwp9CgouY2NwYS1zbmFja2Jhcl9fZGlzbWlzcy1pY29uOjpiZWZvcmUgewogIHRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7Cn0KCi5kYXJrIC5jY3BhLXNuYWNrYmFyIHsKICBiYWNrZ3JvdW5kOiAjMTIxMjEyOwp9CgouZGFyayAuY2NwYS1zbmFja2JhciAuY2NwYS1zbmFja2Jhcl9fbXNnIHsKICBjb2xvcjogI2RmZGZkZjsKfQoKLmRhcmsgLmNjcGEtc25hY2tiYXIgLmNjcGEtc25hY2tiYXJfX2hlYWRlciB7CiAgY29sb3I6ICNmZmY7Cn0KCi5kYXJrIC5jY3BhLXNuYWNrYmFyIC5jY3BhLXNuYWNrYmFyX190ZXJtcyB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzM2MzYzNjsKICBjb2xvcjogI2RmZGZkZjsKfQoKLmRhcmsgLmNjcGEtc25hY2tiYXIuZXJyb3IgewogIGJhY2tncm91bmQtY29sb3I6ICMzMzM7CiAgY29sb3I6ICNmZmY7Cn0KCi5kYXJrIC5jY3BhLXNuYWNrYmFyX19kaXNtaXNzIHsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIGNvbG9yOiAjMDAwOwp9CgouZGFyayAuY2NwYS1zbmFja2Jhcl9fZGlzbWlzcy1pY29uOjphZnRlciwKLmRhcmsgLmNjcGEtc25hY2tiYXJfX2Rpc21pc3MtaWNvbjo6YmVmb3JlIHsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9CgouZGFyayAuY2NwYS1wcml2YWN5LWxpbmsgewogIGNvbG9yOiAjZGZkZmRmOwp9CgpAbWVkaWEgKG1heC13aWR0aDogODAwcHgpIHsKICAuY2NwYS1zbmFja2JhciB7CiAgICBib3R0b206IDIwcHg7CiAgfQoKICAuY2NwYS1zbmFja2Jhcl9fbXNnLAogIC5jY3BhLXNuYWNrYmFyX190ZXJtcyB7CiAgICBmb250LXNpemU6IDE0cHg7CiAgfQp9CgpAbWVkaWEgKG1heC13aWR0aDogNTc2cHgpIHsKICAuY2NwYS1zbmFja2JhciB7CiAgICBwYWRkaW5nOiAyMHB4OwogICAgbWF4LXdpZHRoOiA5MCU7CiAgfQoKICAuY2NwYS1zbmFja2Jhcl9fbXNnLAogIC5jY3BhLXNuYWNrYmFyX19oZWFkZXIgewogICAgcGFkZGluZzogMTBweCAwOwogIH0KCiAgLmNjcGEtc25hY2tiYXJfX2hlYWRlciB7CiAgICBtYXJnaW4tcmlnaHQ6IDUwcHg7CiAgICBtYXJnaW4tbGVmdDogMTVweDsKICB9CgogIC5jY3BhLXNuYWNrYmFyX19tc2cgewogICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIG1hcmdpbi1yaWdodDogMjVweDsKICAgIG1hcmdpbi1sZWZ0OiAxNXB4OwogICAgcGFkZGluZy10b3A6IDVweDsKICB9CgogIC5jY3BhLXNuYWNrYmFyX190ZXJtcyB7CiAgICBtYXJnaW46IDAgMCAxNXB4IDA7CiAgICBwYWRkaW5nOiAxNXB4OwogIH0KCiAgLmNjcGEtc25hY2tiYXJfX2Rpc21pc3MgewogICAgZGlzcGxheTogbm9uZTsKICB9CgogIC5jY3BhLXNuYWNrYmFyX19kaXNtaXNzLWljb24gewogICAgdG9wOiAxN3B4OwogIH0KCiAgLmNjcGEtYm90dG9tIHsKICAgIG1hcmdpbi1sZWZ0OiAwOwogIH0KCiAgLmNjcGEtcHJpdmFjeS1saW5rIHsKICAgIG1hcmdpbi1sZWZ0OiAxNXB4OwogIH0KfQoKQGtleWZyYW1lcyBzbGlkZURvd24gewogIDAlIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7CiAgfQogIDkwJSB7CiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCUpOwogIH0KICAxMDAlIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMDAlKTsKICB9Cn0KCkBrZXlmcmFtZXMgZmx5SW4gewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDEwMCUgewogICAgb3BhY2l0eTogMTsKICB9Cn0KCkBrZXlmcmFtZXMgZmx5T3V0IHsKICAwJSB7CiAgICBvcGFjaXR5OiAxOwogIH0KICAxMDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQp9CgpAa2V5ZnJhbWVzIGZhZGVJbiB7CiAgMCUgewogICAgb3BhY2l0eTogMDsKICB9CiAgMTUuMDAwMDAxJSB7CiAgICBvcGFjaXR5OiAwOwogIH0KICAxMDAlIHsKICAgIG9wYWNpdHk6IDE7CiAgfQp9CgouZmxleENvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZmxleC13cmFwOiBub3dyYXA7CiAgd2lkdGg6IDEwMCU7Cn0KCi5leHBhbmRUb1JvdyB7CiAgY29tcG9zZXM6IGZsZXhDb250YWluZXI7Cn0KCkBtZWRpYSAobWluLXdpZHRoOiA0NDRweCkgewogIC5leHBhbmRUb1JvdyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IHJvdzsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsKICAgIGZsZXgtd3JhcDogbm93cmFwOwogIH0KfQoKQG1lZGlhIChtYXgtd2lkdGg6IDk5MS45OHB4KSB7CiAgLm1vYmlsZUNvbHVtbiB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGZsZXgtd3JhcDogbm93cmFwOwogIH0KfQoKLnZpc3VhbGx5LWhpZGRlbiB7CiAgY2xpcDogcmVjdCgwIDAgMCAwKTsKICAtd2Via2l0LWNsaXAtcGF0aDogaW5zZXQoNTAlKTsKICBjbGlwLXBhdGg6IGluc2V0KDUwJSk7CiAgaGVpZ2h0OiAxcHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICB3aWR0aDogMXB4Owp9CgoucHotb2ZmbGluZS10aWNrZXIgewogIGJhY2tncm91bmQtY29sb3I6ICM5NTk1OTU7CiAgY29sb3I6IHdoaXRlOwogIGZvbnQtc2l6ZTogMC44NzVlbTsKICBoZWlnaHQ6IDA7CiAgb3BhY2l0eTogMDsKICBvdmVyZmxvdzogaGlkZGVuOwogIHBhZGRpbmc6IDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2UtaW4tb3V0Owp9CgoucHotb2ZmbGluZS10aWNrZXIuaXMtb2ZmbGluZSB7CiAgaGVpZ2h0OiBhdXRvOwogIG9wYWNpdHk6IDE7CiAgcGFkZGluZzogMTJweCAwOwp9CgoucHotb2ZmbGluZS10aWNrZXIgLm9mZmxpbmUtdGlja2VyLWRpc21pc3MgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICByaWdodDogOHB4OwogIHRvcDogOHB4OwogIGN1cnNvcjogcG9pbnRlcjsKfQoKOnJvb3QgewogIC0tZ3JlZW46ICM2YWFhNjQ7CiAgLS1kYXJrZW5kR3JlZW46ICM1MzhkNGU7CiAgLS15ZWxsb3c6ICNjOWI0NTg7CiAgLS1kYXJrZW5kWWVsbG93OiAjYjU5ZjNiOwogIC0tbGlnaHRHcmF5OiAjZDNkNmRhOwogIC0tZ3JheTogIzg2ODg4YTsKICAtLWdyYXktMjogI2RjZGNkYzsKICAtLWdyYXktMzogI2RmZGZkZjsKICAtLWRhcmtHcmF5OiAjOTM5NTk4OwogIC0td2hpdGU6ICNmZmY7CiAgLS1ibGFjazogIzIxMjEyMTsKICAtLWJsYWNrLTI6ICMxMjEyMTI7CiAgLS1ibGFjay0zOiAjMzYzNjM2OwogIC0tb3JhbmdlOiAjZjU3OTNhOwogIC0tYmx1ZTogIzg1YzBmOTsKICBmb250LWZhbWlseTogIkNsZWFyIFNhbnMiLCAiSGVsdmV0aWNhIE5ldWUiLCBBcmlhbCwgc2Fucy1zZXJpZjsKICBmb250LXNpemU6IDE2cHg7CiAgLS1oZWFkZXItaGVpZ2h0OiA0MHB4OwogIC0taGVhZGVyLXBhZGRpbmcteDogMTZweDsKICAtLWtleWJvYXJkLWhlaWdodDogMjAwcHg7CiAgLS1nYW1lLW1heC13aWR0aDogNTAwcHg7CiAgLS1lcnJvci16LWluZGV4OiA1MDA7CiAgLS10b2FzdC16LWluZGV4OiAxMDAwOwogIC0tbW9kYWwtei1pbmRleDogMjAwMDsKICAtLXBhZ2Utei1pbmRleDogMzAwMDsKICAtLXN5c3RlbS10b2FzdC16LWluZGV4OiA0MDAwOwogIC0taHlicmlkLWJhY2s6IHVybCgiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRBaUlHaGxhV2RvZEQwaU1UWWlJSFpwWlhkQ2IzZzlJakFnTUNBeE1DQXhOaUlnWm1sc2JEMGlibTl1WlNJZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWo0TkNqeHdZWFJvSUdROUlrMDVJREZNTWk0d01EQXhNU0EzTGprNU9UZzVURGtnTVRRdU9UazVPQ0lnYzNSeWIydGxQU0ppYkdGamF5SWdjM1J5YjJ0bExYZHBaSFJvUFNJeUlpQnpkSEp2YTJVdGJHbHVaV05oY0QwaWNtOTFibVFpTHo0TkNqd3ZjM1puUGcwSyIpOwogIC0taHlicmlkLWJhY2stZGFyay1tb2RlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1UQWlJR2hsYVdkb2REMGlNVFlpSUhacFpYZENiM2c5SWpBZ01DQXhNQ0F4TmlJZ1ptbHNiRDBpYm05dVpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNE5Danh3WVhSb0lHUTlJazA1SURGTU1pNHdNREF4TVNBM0xqazVPVGc1VERrZ01UUXVPVGs1T0NJZ2MzUnliMnRsUFNJalJETkVOa1JCSWlCemRISnZhMlV0ZDJsa2RHZzlJaklpSUhOMGNtOXJaUzFzYVc1bFkyRndQU0p5YjNWdVpDSXZQZzBLUEM5emRtYytEUW89Iik7CiAgLS1zdmctYXJyb3ctZmlsbDogd2hpdGU7CiAgLS1zdmctYXJyb3ctc3Ryb2tlOiBibGFjazsKICAtLXN2Zy1hcnJvdy1maWxsLWhvdmVyOiBibGFjazsKICAtLXN2Zy1hcnJvdy1zdHJva2UtaG92ZXI6IHdoaXRlOwp9Cgo6cm9vdCB7CiAgLS1jb2xvci10b25lLTE6ICMwMDAwMDA7CiAgLS1jb2xvci10b25lLTI6ICM3ODdjN2U7CiAgLS1jb2xvci10b25lLTM6ICM4NzhhOGM7CiAgLS1jb2xvci10b25lLTQ6ICNkM2Q2ZGE7CiAgLS1jb2xvci10b25lLTU6ICNlZGVmZjE7CiAgLS1jb2xvci10b25lLTY6ICNmNmY3Zjg7CiAgLS1jb2xvci10b25lLTc6ICNmZmZmZmY7CiAgLS1jb2xvci10b25lLTg6ICMxMjEyMTI7CiAgLS1jb2xvci10b25lLTk6ICNkZmRmZGY7CiAgLS1jb2xvci10b25lLTEwOiAjMDAwMDAwOwogIC0tY29sb3ItdG9uZS0xMTogIzc4N2M3ZTsKICAtLWNvbG9yLXRvbmUtMTI6ICMzNjM2MzY7CiAgLS1jb2xvci1uYXYtaG92ZXI6ICNmNGY0ZjQ7CiAgLS1vcGFjaXR5LTUwOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSk7CiAgLS1lcnJvci1iYWNrZ3JvdW5kOiAjZTNlM2UxOwogIC0taWNvbi1kaXNhYmxlZDogI2E2YTZhNjsKfQoKLmRhcmsgewogIC0tY29sb3ItdG9uZS0xOiAjZmZmZmZmOwogIC0tY29sb3ItdG9uZS0yOiAjODE4Mzg0OwogIC0tY29sb3ItdG9uZS0zOiAjNTY1NzU4OwogIC0tY29sb3ItdG9uZS00OiAjM2EzYTNjOwogIC0tY29sb3ItdG9uZS01OiAjMjcyNzI5OwogIC0tY29sb3ItdG9uZS02OiAjMWExYTFiOwogIC0tY29sb3ItdG9uZS03OiAjMTIxMjEzOwogIC0tY29sb3ItdG9uZS04OiAjZmZmZmZmOwogIC0tY29sb3ItdG9uZS05OiAjNDI0MjQyOwogIC0tY29sb3ItdG9uZS0xMDogI2RmZGZkZjsKICAtLWNvbG9yLXRvbmUtMTE6ICNkZmRmZGY7CiAgLS1jb2xvci10b25lLTEyOiAjZGZkZmRmOwogIC0tY29sb3ItbmF2LWhvdmVyOiAjMmYyZjMxOwogIC0tb3BhY2l0eS01MDogcmdiYSgwLCAwLCAwLCAwLjUpOwogIC0tZXJyb3ItYmFja2dyb3VuZDogdmFyKC0tY29sb3ItdG9uZS03KTsKICAtLWljb24tZGlzYWJsZWQ6ICM1OTU5NWE7CiAgLS1zdmctYXJyb3ctZmlsbDogdmFyKC0tY29sb3ItdG9uZS03KTsKICAtLXN2Zy1hcnJvdy1zdHJva2U6IHdoaXRlOwogIC0tc3ZnLWFycm93LWZpbGwtaG92ZXI6IHdoaXRlOwogIC0tc3ZnLWFycm93LXN0cm9rZS1ob3ZlcjogYmxhY2s7Cn0KCjpyb290LAouZGFyayB7CiAgLS1jb2xvci1iYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci10b25lLTcpOwp9Cgo6cm9vdCB7CiAgLS1jb2xvci1wcmVzZW50OiB2YXIoLS15ZWxsb3cpOwogIC0tY29sb3ItY29ycmVjdDogdmFyKC0tZ3JlZW4pOwogIC0tY29sb3ItYWJzZW50OiB2YXIoLS1jb2xvci10b25lLTIpOwogIC0tdGlsZS10ZXh0LWNvbG9yOiB2YXIoLS1jb2xvci10b25lLTcpOwogIC0ta2V5LXRleHQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7CiAgLS1rZXktZXZhbHVhdGVkLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtNyk7CiAgLS1rZXktYmc6IHZhcigtLWNvbG9yLXRvbmUtNCk7CiAgLS1rZXktYmctcHJlc2VudDogdmFyKC0tY29sb3ItcHJlc2VudCk7CiAgLS1rZXktYmctY29ycmVjdDogdmFyKC0tY29sb3ItY29ycmVjdCk7CiAgLS1rZXktYmctYWJzZW50OiB2YXIoLS1jb2xvci1hYnNlbnQpOwogIC0tbW9kYWwtY29udGVudC1iZzogdmFyKC0tY29sb3ItdG9uZS03KTsKfQoKLmRhcmsgewogIC0tY29sb3ItcHJlc2VudDogdmFyKC0tZGFya2VuZFllbGxvdyk7CiAgLS1jb2xvci1jb3JyZWN0OiB2YXIoLS1kYXJrZW5kR3JlZW4pOwogIC0tY29sb3ItYWJzZW50OiB2YXIoLS1jb2xvci10b25lLTQpOwogIC0tdGlsZS10ZXh0LWNvbG9yOiB2YXIoLS1jb2xvci10b25lLTEpOwogIC0ta2V5LXRleHQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7CiAgLS1rZXktZXZhbHVhdGVkLXRleHQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7CiAgLS1rZXktYmc6IHZhcigtLWNvbG9yLXRvbmUtMik7CiAgLS1rZXktYmctcHJlc2VudDogdmFyKC0tY29sb3ItcHJlc2VudCk7CiAgLS1rZXktYmctY29ycmVjdDogdmFyKC0tY29sb3ItY29ycmVjdCk7CiAgLS1rZXktYmctYWJzZW50OiB2YXIoLS1jb2xvci1hYnNlbnQpOwogIC0tbW9kYWwtY29udGVudC1iZzogdmFyKC0tY29sb3ItdG9uZS03KTsKfQoKLmNvbG9yYmxpbmQgewogIC0tY29sb3ItY29ycmVjdDogdmFyKC0tb3JhbmdlKTsKICAtLWNvbG9yLXByZXNlbnQ6IHZhcigtLWJsdWUpOwogIC0tdGlsZS10ZXh0LWNvbG9yOiB2YXIoLS13aGl0ZSk7CiAgLS1rZXktYmctcHJlc2VudDogdmFyKC0tY29sb3ItcHJlc2VudCk7CiAgLS1rZXktYmctY29ycmVjdDogdmFyKC0tY29sb3ItY29ycmVjdCk7CiAgLS1rZXktYmctYWJzZW50OiB2YXIoLS1jb2xvci1hYnNlbnQpOwp9CgpodG1sIHsKICBoZWlnaHQ6IDEwMCU7Cn0KCmJvZHkgewogIGhlaWdodDogMTAwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kKTsKICBtYXJnaW46IDA7CiAgcGFkZGluZzogMDsKICBvdmVyZmxvdy15OiBoaWRkZW47Cn0KCkBtZWRpYSAobWluLXdpZHRoOiA0MTVweCkgewogIDpyb290IHsKICAgIC0taGVhZGVyLWhlaWdodDogNjVweDsKICB9Cn0KCkBtZWRpYSAobWluLXdpZHRoOiAxMDI0cHgpIHsKICA6cm9vdCB7CiAgICAtLWhlYWRlci1wYWRkaW5nLXg6IDI0cHg7CiAgfQp9CgpAbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHsKICA6cm9vdCB7CiAgICAtLWhlYWRlci1wYWRkaW5nLXg6IDIwcHg7CiAgfQp9Cg=="
    />
  </head>
  <body>
    <script type="text/javascript">
      (function () {
        var e;
        try {
          e = JSON.parse(localStorage.getItem("nyt-wordle-darkmode"));
        } catch (e) {}
        e && document.body.classList.add("dark");
      })();
    </script>
    <script type="text/javascript">
      window.pageName = "wordle";
    </script>
    <script type="text/javascript">
      window.env = {
        version: "v2207281137",
        api: "",
        tagx: "",
        gtm: "",
        hostname: "",
        edge: "",
        name: "prod",
      };
    </script>
    <script type="text/javascript">
      window.abra = {
        config: {},
        tests: {},
      };
    </script>
    <script type="text/javascript">
      window.adUnitPath = "world";
    </script>
    <script type="text/javascript">
      window.navigationLinks = {};
    </script>
    <script type="text/javascript">
      window.featureFlags = { testFeatureFlag: false };
    </script>
    <script type="text/javascript">
      window.sentryConfig = {
        dsn: "",
        release: "",
        sampleRate: "0",
        environment: "prod",
      };
    </script>
    <script type="text/javascript">
      window.purrDirectiveFormat = {
        PURR_DataSaleOptOutUI_v2: {
          index: 7,
          values: { h: "hide", s: "show", o: "show-opted-out" },
          default: "hide",
          queryParam: "opt-out",
        },
        PURR_CaliforniaNoticesUI: {
          index: 8,
          values: { h: "hide", s: "show" },
          default: "hide",
          queryParam: "california-notices",
        },
        PURR_AdConfiguration_v3: {
          index: 11,
          values: {
            f: "full",
            r: "rdp",
            n: "npa",
            s: "adluce-socrates",
            l: "ltd",
          },
          default: "full",
          queryParam: "ad-config",
        },
      };
    </script>
    <div id="ratio-hook"></div>
    <div id="width-hook"></div>
    <script
      defer=""
      type="text/javascript"
      src="data:text/javascript;base64,IShmdW5jdGlvbiAoTykgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gbyh0KSB7CiAgICBpZiAoZVt0XSkgcmV0dXJuIGVbdF0uZXhwb3J0czsKICAgIHZhciBuID0gKGVbdF0gPSB7IGk6IHQsIGw6ICExLCBleHBvcnRzOiB7fSB9KTsKICAgIHJldHVybiByW3RdLmNhbGwobi5leHBvcnRzLCBuLCBuLmV4cG9ydHMsIG8pLCAobi5sID0gITApLCBuLmV4cG9ydHM7CiAgfQoKICB2YXIgciwgZTsKICAociA9IFsKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHIoMSksICh0LmV4cG9ydHMgPSByKDU4KSk7CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDIpLAogICAgICAgIG8gPSByKDI1KSwKICAgICAgICBpID0gcig1MyksCiAgICAgICAgdSA9IHIoNiksCiAgICAgICAgYyA9IHIoMTcpLAogICAgICAgIGYgPSByKDU0KSwKICAgICAgICBhID0gcig1NiksCiAgICAgICAgciA9IHIoMzYpOwogICAgICBlKAogICAgICAgIHsKICAgICAgICAgIHRhcmdldDogIlByb21pc2UiLAogICAgICAgICAgcHJvdG86ICEwLAogICAgICAgICAgcmVhbDogITAsCiAgICAgICAgICBmb3JjZWQ6CiAgICAgICAgICAgICEhaSAmJgogICAgICAgICAgICB1KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpLnByb3RvdHlwZS5maW5hbGx5LmNhbGwoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSksCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBmaW5hbGx5OiBmdW5jdGlvbiAobikgewogICAgICAgICAgICB2YXIgciA9IGYodGhpcywgYygiUHJvbWlzZSIpKSwKICAgICAgICAgICAgICB0ID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgbjsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbigKICAgICAgICAgICAgICB0CiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEociwgbigpKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA6IG4sCiAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgPyBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhKHIsIG4oKSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB0OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA6IG4KICAgICAgICAgICAgKTsKICAgICAgICAgIH0sCiAgICAgICAgfQogICAgICApLAogICAgICAgIG8gfHwKICAgICAgICAgICJmdW5jdGlvbiIgIT0gdHlwZW9mIGkgfHwKICAgICAgICAgICgobyA9IGMoIlByb21pc2UiKS5wcm90b3R5cGUuZmluYWxseSksCiAgICAgICAgICBpLnByb3RvdHlwZS5maW5hbGx5ICE9PSBvICYmCiAgICAgICAgICAgIHIoaS5wcm90b3R5cGUsICJmaW5hbGx5IiwgbywgeyB1bnNhZmU6ICEwIH0pKTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgYSA9IHIoMyksCiAgICAgICAgcyA9IHIoNCkuZiwKICAgICAgICBwID0gcigzMyksCiAgICAgICAgbCA9IHIoMzYpLAogICAgICAgIHkgPSByKDI3KSwKICAgICAgICB2ID0gcig0MiksCiAgICAgICAgaCA9IHIoNTIpOwogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgIHZhciByLAogICAgICAgICAgZSwKICAgICAgICAgIG8sCiAgICAgICAgICBpID0gdC50YXJnZXQsCiAgICAgICAgICB1ID0gdC5nbG9iYWwsCiAgICAgICAgICBjID0gdC5zdGF0LAogICAgICAgICAgZiA9IHUgPyBhIDogYyA/IGFbaV0gfHwgeShpLCB7fSkgOiAoYVtpXSB8fCB7fSkucHJvdG90eXBlOwogICAgICAgIGlmIChmKQogICAgICAgICAgZm9yIChyIGluIG4pIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgoZSA9IG5bcl0pLAogICAgICAgICAgICAgIChvID0gdC5ub1RhcmdldEdldCA/IChvID0gcyhmLCByKSkgJiYgby52YWx1ZSA6IGZbcl0pLAogICAgICAgICAgICAgICFoKHUgPyByIDogaSArIChjID8gIi4iIDogIiMiKSArIHIsIHQuZm9yY2VkKSAmJiBvICE9PSBPKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBpZiAodHlwZW9mIGUgPT0gdHlwZW9mIG8pIGNvbnRpbnVlOwogICAgICAgICAgICAgIHYoZSwgbyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKHQuc2hhbSB8fCAobyAmJiBvLnNoYW0pKSAmJiBwKGUsICJzaGFtIiwgITApLCBsKGYsIHIsIGUsIHQpOwogICAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgIGZ1bmN0aW9uIHIodCkgewogICAgICAgIHJldHVybiB0ICYmIHQuTWF0aCA9PSBNYXRoICYmIHQ7CiAgICAgIH0KCiAgICAgIHQuZXhwb3J0cyA9CiAgICAgICAgcigib2JqZWN0IiA9PSB0eXBlb2YgZ2xvYmFsVGhpcyAmJiBnbG9iYWxUaGlzKSB8fAogICAgICAgIHIoIm9iamVjdCIgPT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cpIHx8CiAgICAgICAgcigib2JqZWN0IiA9PSB0eXBlb2Ygc2VsZiAmJiBzZWxmKSB8fAogICAgICAgIHIoIm9iamVjdCIgPT0gdHlwZW9mIGdsb2JhbCAmJiBnbG9iYWwpIHx8CiAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0pKCkgfHwKICAgICAgICBGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcig1KSwKICAgICAgICBvID0gcig3KSwKICAgICAgICBpID0gcig4KSwKICAgICAgICB1ID0gcig5KSwKICAgICAgICBjID0gcigxMyksCiAgICAgICAgZiA9IHIoMjgpLAogICAgICAgIGEgPSByKDMxKSwKICAgICAgICBzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsKICAgICAgbi5mID0gZQogICAgICAgID8gcwogICAgICAgIDogZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgaWYgKCgodCA9IHUodCkpLCAobiA9IGMobikpLCBhKSkKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHModCwgbik7CiAgICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgaWYgKGYodCwgbikpIHJldHVybiBpKCFvLmYuY2FsbCh0LCBuKSwgdFtuXSk7CiAgICAgICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHIgPSByKDYpOwogICAgICB0LmV4cG9ydHMgPSAhcihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIDcgIT0KICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgMSwgewogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gNzsKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pWzFdCiAgICAgICAgKTsKICAgICAgfSk7CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuICEhdCgpOwogICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSwKICAgICAgICBvID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciwKICAgICAgICBpID0gbyAmJiAhZS5jYWxsKHsgMTogMiB9LCAxKTsKICAgICAgbi5mID0gaQogICAgICAgID8gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdCA9IG8odGhpcywgdCk7CiAgICAgICAgICAgIHJldHVybiAhIXQgJiYgdC5lbnVtZXJhYmxlOwogICAgICAgICAgfQogICAgICAgIDogZTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbikgewogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhKDEgJiB0KSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogISgyICYgdCksCiAgICAgICAgICB3cml0YWJsZTogISg0ICYgdCksCiAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICB9OwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcigxMCksCiAgICAgICAgbyA9IHIoMTIpOwogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBlKG8odCkpOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcig2KSwKICAgICAgICBvID0gcigxMSksCiAgICAgICAgaSA9ICIiLnNwbGl0OwogICAgICB0LmV4cG9ydHMgPSBlKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gIU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApOwogICAgICB9KQogICAgICAgID8gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuICJTdHJpbmciID09IG8odCkgPyBpLmNhbGwodCwgIiIpIDogT2JqZWN0KHQpOwogICAgICAgICAgfQogICAgICAgIDogT2JqZWN0OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgIHZhciByID0ge30udG9TdHJpbmc7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHIuY2FsbCh0KS5zbGljZSg4LCAtMSk7CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAodCA9PSBPKSB0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNhbGwgbWV0aG9kIG9uICIgKyB0KTsKICAgICAgICByZXR1cm4gdDsKICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMTQpLAogICAgICAgIG8gPSByKDE2KTsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0ID0gZSh0LCAic3RyaW5nIik7CiAgICAgICAgcmV0dXJuIG8odCkgPyB0IDogU3RyaW5nKHQpOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcigxNSksCiAgICAgICAgbyA9IHIoMTYpLAogICAgICAgIGkgPSByKDIyKSwKICAgICAgICB1ID0gcigyMykoInRvUHJpbWl0aXZlIik7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgaWYgKCFlKHQpIHx8IG8odCkpIHJldHVybiB0OwogICAgICAgIHZhciByID0gdFt1XTsKICAgICAgICBpZiAociA9PT0gTykgcmV0dXJuIGkodCwgKG4gPSBuID09PSBPID8gIm51bWJlciIgOiBuKSk7CiAgICAgICAgaWYgKCgobiA9IHIuY2FsbCh0LCAobiA9IG4gPT09IE8gPyAiZGVmYXVsdCIgOiBuKSkpLCAhZShuKSB8fCBvKG4pKSkKICAgICAgICAgIHJldHVybiBuOwogICAgICAgIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT0gdHlwZW9mIHQgPyBudWxsICE9PSB0IDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgdDsKICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMTcpLAogICAgICAgIHIgPSByKDE4KTsKICAgICAgdC5leHBvcnRzID0gcgogICAgICAgID8gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuICJzeW1ib2wiID09IHR5cGVvZiB0OwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIG4gPSBlKCJTeW1ib2wiKTsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gJiYgT2JqZWN0KHQpIGluc3RhbmNlb2YgbjsKICAgICAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDMpOwogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoIDwgMgogICAgICAgICAgPyAiZnVuY3Rpb24iID09IHR5cGVvZiAociA9IGVbdF0pCiAgICAgICAgICAgID8gcgogICAgICAgICAgICA6IE8KICAgICAgICAgIDogZVt0XSAmJiBlW3RdW25dOwogICAgICAgIHZhciByOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHIgPSByKDE5KTsKICAgICAgdC5leHBvcnRzID0gciAmJiAhU3ltYm9sLnNoYW0gJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcjsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMjApLAogICAgICAgIHIgPSByKDYpOwogICAgICB0LmV4cG9ydHMgPQogICAgICAgICEhT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICFyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB0ID0gU3ltYm9sKCk7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAhU3RyaW5nKHQpIHx8CiAgICAgICAgICAgICEoT2JqZWN0KHQpIGluc3RhbmNlb2YgU3ltYm9sKSB8fAogICAgICAgICAgICAoIVN5bWJvbC5zaGFtICYmIGUgJiYgZSA8IDQxKQogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSwKICAgICAgICBvLAogICAgICAgIGkgPSByKDMpLAogICAgICAgIHUgPSByKDIxKSwKICAgICAgICByID0gaS5wcm9jZXNzLAogICAgICAgIGkgPSBpLkRlbm8sCiAgICAgICAgaSA9IChyICYmIHIudmVyc2lvbnMpIHx8IChpICYmIGkudmVyc2lvbiksCiAgICAgICAgaSA9IGkgJiYgaS52ODsKICAgICAgaQogICAgICAgID8gKG8gPSAoZSA9IGkuc3BsaXQoIi4iKSlbMF0gPCA0ID8gMSA6IGVbMF0gKyBlWzFdKQogICAgICAgIDogdSAmJgogICAgICAgICAgKCEoZSA9IHUubWF0Y2goL0VkZ2VcLyhcZCspLykpIHx8IDc0IDw9IGVbMV0pICYmCiAgICAgICAgICAoZSA9IHUubWF0Y2goL0Nocm9tZVwvKFxkKykvKSkgJiYKICAgICAgICAgIChvID0gZVsxXSksCiAgICAgICAgKHQuZXhwb3J0cyA9IG8gJiYgK28pOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHIgPSByKDE3KTsKICAgICAgdC5leHBvcnRzID0gcigibmF2aWdhdG9yIiwgInVzZXJBZ2VudCIpIHx8ICIiOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBvID0gcigxNSk7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgdmFyIHIsIGU7CiAgICAgICAgaWYgKAogICAgICAgICAgInN0cmluZyIgPT09IG4gJiYKICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIChyID0gdC50b1N0cmluZykgJiYKICAgICAgICAgICFvKChlID0gci5jYWxsKHQpKSkKICAgICAgICApCiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgKHIgPSB0LnZhbHVlT2YpICYmICFvKChlID0gci5jYWxsKHQpKSkpCiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICBpZiAoCiAgICAgICAgICAic3RyaW5nIiAhPT0gbiAmJgogICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgKHIgPSB0LnRvU3RyaW5nKSAmJgogICAgICAgICAgIW8oKGUgPSByLmNhbGwodCkpKQogICAgICAgICkKICAgICAgICAgIHJldHVybiBlOwogICAgICAgIHRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIik7CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDMpLAogICAgICAgIG8gPSByKDI0KSwKICAgICAgICBpID0gcigyOCksCiAgICAgICAgdSA9IHIoMzApLAogICAgICAgIGMgPSByKDE5KSwKICAgICAgICByID0gcigxOCksCiAgICAgICAgZiA9IG8oIndrcyIpLAogICAgICAgIGEgPSBlLlN5bWJvbCwKICAgICAgICBzID0gciA/IGEgOiAoYSAmJiBhLndpdGhvdXRTZXR0ZXIpIHx8IHU7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIChpKGYsIHQpICYmIChjIHx8ICJzdHJpbmciID09IHR5cGVvZiBmW3RdKSkgfHwKICAgICAgICAgICAgKGMgJiYgaShhLCB0KSA/IChmW3RdID0gYVt0XSkgOiAoZlt0XSA9IHMoIlN5bWJvbC4iICsgdCkpKSwKICAgICAgICAgIGZbdF0KICAgICAgICApOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcigyNSksCiAgICAgICAgbyA9IHIoMjYpOwogICAgICAodC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICByZXR1cm4gb1t0XSB8fCAob1t0XSA9IG4gIT09IE8gPyBuIDoge30pOwogICAgICB9KSgidmVyc2lvbnMiLCBbXSkucHVzaCh7CiAgICAgICAgdmVyc2lvbjogIjMuMTYuMiIsCiAgICAgICAgbW9kZTogZSA/ICJwdXJlIiA6ICJnbG9iYWwiLAogICAgICAgIGNvcHlyaWdodDogIsKpIDIwMjEgRGVuaXMgUHVzaGthcmV2ICh6bG9pcm9jay5ydSkiLAogICAgICB9KTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbikgewogICAgICB0LmV4cG9ydHMgPSAhMTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMyksCiAgICAgICAgbyA9IHIoMjcpLAogICAgICAgIHIgPSAiX19jb3JlLWpzX3NoYXJlZF9fIiwKICAgICAgICByID0gZVtyXSB8fCBvKHIsIHt9KTsKICAgICAgdC5leHBvcnRzID0gcjsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMyk7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uIChuLCByKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBuLCB7CiAgICAgICAgICAgIHZhbHVlOiByLAogICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICB3cml0YWJsZTogITAsCiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICBlW25dID0gcjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHI7CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDI5KSwKICAgICAgICBvID0ge30uaGFzT3duUHJvcGVydHk7CiAgICAgIHQuZXhwb3J0cyA9CiAgICAgICAgT2JqZWN0Lmhhc093biB8fAogICAgICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICByZXR1cm4gby5jYWxsKGUodCksIG4pOwogICAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDEyKTsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gT2JqZWN0KGUodCkpOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgIHZhciByID0gMCwKICAgICAgICBlID0gTWF0aC5yYW5kb20oKTsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgIlN5bWJvbCgiICsgU3RyaW5nKHQgPT09IE8gPyAiIiA6IHQpICsgIilfIiArICgrK3IgKyBlKS50b1N0cmluZygzNikKICAgICAgICApOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcig1KSwKICAgICAgICBvID0gcig2KSwKICAgICAgICBpID0gcigzMik7CiAgICAgIHQuZXhwb3J0cyA9CiAgICAgICAgIWUgJiYKICAgICAgICAhbyhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICA3ICE9CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpKCJkaXYiKSwgImEiLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gNzsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KS5hCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcigzKSwKICAgICAgICByID0gcigxNSksCiAgICAgICAgbyA9IGUuZG9jdW1lbnQsCiAgICAgICAgaSA9IHIobykgJiYgcihvLmNyZWF0ZUVsZW1lbnQpOwogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBpID8gby5jcmVhdGVFbGVtZW50KHQpIDoge307CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDUpLAogICAgICAgIG8gPSByKDM0KSwKICAgICAgICBpID0gcig4KTsKICAgICAgdC5leHBvcnRzID0gZQogICAgICAgID8gZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgICAgICAgcmV0dXJuIG8uZih0LCBuLCBpKDEsIHIpKTsKICAgICAgICAgIH0KICAgICAgICA6IGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgICAgICAgIHJldHVybiAodFtuXSA9IHIpLCB0OwogICAgICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoNSksCiAgICAgICAgbyA9IHIoMzEpLAogICAgICAgIGkgPSByKDM1KSwKICAgICAgICB1ID0gcigxMyksCiAgICAgICAgYyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTsKICAgICAgbi5mID0gZQogICAgICAgID8gYwogICAgICAgIDogZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgICAgICAgaWYgKChpKHQpLCAobiA9IHUobikpLCBpKHIpLCBvKSkKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIGModCwgbiwgcik7CiAgICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgaWYgKCJnZXQiIGluIHIgfHwgInNldCIgaW4gcikKICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIik7CiAgICAgICAgICAgIHJldHVybiAidmFsdWUiIGluIHIgJiYgKHRbbl0gPSByLnZhbHVlKSwgdDsKICAgICAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDE1KTsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAoIWUodCkpIHRocm93IFR5cGVFcnJvcihTdHJpbmcodCkgKyAiIGlzIG5vdCBhbiBvYmplY3QiKTsKICAgICAgICByZXR1cm4gdDsKICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgYyA9IHIoMyksCiAgICAgICAgZiA9IHIoMzMpLAogICAgICAgIGEgPSByKDI4KSwKICAgICAgICBzID0gcigyNyksCiAgICAgICAgZSA9IHIoMzcpLAogICAgICAgIHIgPSByKDM4KSwKICAgICAgICBvID0gci5nZXQsCiAgICAgICAgcCA9IHIuZW5mb3JjZSwKICAgICAgICBsID0gU3RyaW5nKFN0cmluZykuc3BsaXQoIlN0cmluZyIpOwogICAgICAodC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIG4sIHIsIGUpIHsKICAgICAgICB2YXIgbyA9ICEhZSAmJiAhIWUudW5zYWZlLAogICAgICAgICAgaSA9ICEhZSAmJiAhIWUuZW51bWVyYWJsZSwKICAgICAgICAgIHUgPSAhIWUgJiYgISFlLm5vVGFyZ2V0R2V0OwogICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIgJiYKICAgICAgICAgICgic3RyaW5nIiAhPSB0eXBlb2YgbiB8fCBhKHIsICJuYW1lIikgfHwgZihyLCAibmFtZSIsIG4pLAogICAgICAgICAgKGUgPSBwKHIpKS5zb3VyY2UgfHwKICAgICAgICAgICAgKGUuc291cmNlID0gbC5qb2luKCJzdHJpbmciID09IHR5cGVvZiBuID8gbiA6ICIiKSkpLAogICAgICAgICAgdCAhPT0gYwogICAgICAgICAgICA/IChvID8gIXUgJiYgdFtuXSAmJiAoaSA9ICEwKSA6IGRlbGV0ZSB0W25dLAogICAgICAgICAgICAgIGkgPyAodFtuXSA9IHIpIDogZih0LCBuLCByKSkKICAgICAgICAgICAgOiBpCiAgICAgICAgICAgID8gKHRbbl0gPSByKQogICAgICAgICAgICA6IHMobiwgcik7CiAgICAgIH0pKEZ1bmN0aW9uLnByb3RvdHlwZSwgInRvU3RyaW5nIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgdGhpcyAmJiBvKHRoaXMpLnNvdXJjZSkgfHwgZSh0aGlzKTsKICAgICAgfSk7CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIHIgPSByKDI2KSwKICAgICAgICBlID0gRnVuY3Rpb24udG9TdHJpbmc7CiAgICAgICJmdW5jdGlvbiIgIT0gdHlwZW9mIHIuaW5zcGVjdFNvdXJjZSAmJgogICAgICAgIChyLmluc3BlY3RTb3VyY2UgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIGUuY2FsbCh0KTsKICAgICAgICB9KSwKICAgICAgICAodC5leHBvcnRzID0gci5pbnNwZWN0U291cmNlKTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSwKICAgICAgICBvLAogICAgICAgIGksCiAgICAgICAgdSwKICAgICAgICBjLAogICAgICAgIGYsCiAgICAgICAgYSwKICAgICAgICBzLAogICAgICAgIHAgPSByKDM5KSwKICAgICAgICBsID0gcigzKSwKICAgICAgICB5ID0gcigxNSksCiAgICAgICAgdiA9IHIoMzMpLAogICAgICAgIGggPSByKDI4KSwKICAgICAgICBtID0gcigyNiksCiAgICAgICAgYiA9IHIoNDApLAogICAgICAgIHIgPSByKDQxKSwKICAgICAgICBnID0gIk9iamVjdCBhbHJlYWR5IGluaXRpYWxpemVkIiwKICAgICAgICBsID0gbC5XZWFrTWFwOwogICAgICAoYSA9CiAgICAgICAgcCB8fCBtLnN0YXRlCiAgICAgICAgICA/ICgoZSA9IG0uc3RhdGUgfHwgKG0uc3RhdGUgPSBuZXcgbCgpKSksCiAgICAgICAgICAgIChvID0gZS5nZXQpLAogICAgICAgICAgICAoaSA9IGUuaGFzKSwKICAgICAgICAgICAgKHUgPSBlLnNldCksCiAgICAgICAgICAgIChjID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgICBpZiAoaS5jYWxsKGUsIHQpKSB0aHJvdyBuZXcgVHlwZUVycm9yKGcpOwogICAgICAgICAgICAgIHJldHVybiAobi5mYWNhZGUgPSB0KSwgdS5jYWxsKGUsIHQsIG4pLCBuOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKGYgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBvLmNhbGwoZSwgdCkgfHwge307CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBpLmNhbGwoZSwgdCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICA6ICgoclsocyA9IGIoInN0YXRlIikpXSA9ICEwKSwKICAgICAgICAgICAgKGMgPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICAgIGlmIChoKHQsIHMpKSB0aHJvdyBuZXcgVHlwZUVycm9yKGcpOwogICAgICAgICAgICAgIHJldHVybiAobi5mYWNhZGUgPSB0KSwgdih0LCBzLCBuKSwgbjsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChmID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gaCh0LCBzKSA/IHRbc10gOiB7fTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGgodCwgcyk7CiAgICAgICAgICAgIH0pKSwKICAgICAgICAodC5leHBvcnRzID0gewogICAgICAgICAgc2V0OiBjLAogICAgICAgICAgZ2V0OiBmLAogICAgICAgICAgaGFzOiBhLAogICAgICAgICAgZW5mb3JjZTogZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIGEodCkgPyBmKHQpIDogYyh0LCB7fSk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0dGVyRm9yOiBmdW5jdGlvbiAocikgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgICBpZiAoIXkodCkgfHwgKG4gPSBmKHQpKS50eXBlICE9PSByKQogICAgICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsICIgKyByICsgIiByZXF1aXJlZCIpOwogICAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgICB9OwogICAgICAgICAgfSwKICAgICAgICB9KTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMyksCiAgICAgICAgciA9IHIoMzcpLAogICAgICAgIGUgPSBlLldlYWtNYXA7CiAgICAgIHQuZXhwb3J0cyA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgL25hdGl2ZSBjb2RlLy50ZXN0KHIoZSkpOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcigyNCksCiAgICAgICAgbyA9IHIoMzApLAogICAgICAgIGkgPSBlKCJrZXlzIik7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIGlbdF0gfHwgKGlbdF0gPSBvKHQpKTsKICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbikgewogICAgICB0LmV4cG9ydHMgPSB7fTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgYyA9IHIoMjgpLAogICAgICAgIGYgPSByKDQzKSwKICAgICAgICBhID0gcig0KSwKICAgICAgICBzID0gcigzNCk7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgZm9yICh2YXIgciA9IGYobiksIGUgPSBzLmYsIG8gPSBhLmYsIGkgPSAwOyBpIDwgci5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHUgPSByW2ldOwogICAgICAgICAgYyh0LCB1KSB8fCBlKHQsIHUsIG8obiwgdSkpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMTcpLAogICAgICAgIG8gPSByKDQ0KSwKICAgICAgICBpID0gcig1MSksCiAgICAgICAgdSA9IHIoMzUpOwogICAgICB0LmV4cG9ydHMgPQogICAgICAgIGUoIlJlZmxlY3QiLCAib3duS2V5cyIpIHx8CiAgICAgICAgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHZhciBuID0gby5mKHUodCkpLAogICAgICAgICAgICByID0gaS5mOwogICAgICAgICAgcmV0dXJuIHIgPyBuLmNvbmNhdChyKHQpKSA6IG47CiAgICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoNDUpLAogICAgICAgIG8gPSByKDUwKS5jb25jYXQoImxlbmd0aCIsICJwcm90b3R5cGUiKTsKICAgICAgbi5mID0KICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fAogICAgICAgIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICByZXR1cm4gZSh0LCBvKTsKICAgICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciB1ID0gcigyOCksCiAgICAgICAgYyA9IHIoOSksCiAgICAgICAgZiA9IHIoNDYpLmluZGV4T2YsCiAgICAgICAgYSA9IHIoNDEpOwogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgIHZhciByLAogICAgICAgICAgZSA9IGModCksCiAgICAgICAgICBvID0gMCwKICAgICAgICAgIGkgPSBbXTsKICAgICAgICBmb3IgKHIgaW4gZSkgIXUoYSwgcikgJiYgdShlLCByKSAmJiBpLnB1c2gocik7CiAgICAgICAgZm9yICg7IG4ubGVuZ3RoID4gbzsgKSB1KGUsIChyID0gbltvKytdKSkgJiYgKH5mKGksIHIpIHx8IGkucHVzaChyKSk7CiAgICAgICAgcmV0dXJuIGk7CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGYgPSByKDkpLAogICAgICAgIGEgPSByKDQ3KSwKICAgICAgICBzID0gcig0OSksCiAgICAgICAgciA9IGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgbyA9IGYodCksCiAgICAgICAgICAgICAgaSA9IGEoby5sZW5ndGgpLAogICAgICAgICAgICAgIHUgPSBzKHIsIGkpOwogICAgICAgICAgICBpZiAoYyAmJiBuICE9IG4pIHsKICAgICAgICAgICAgICBmb3IgKDsgdSA8IGk7ICkgaWYgKChlID0gb1t1KytdKSAhPSBlKSByZXR1cm4gITA7CiAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgIGZvciAoOyB1IDwgaTsgdSsrKQogICAgICAgICAgICAgICAgaWYgKChjIHx8IHUgaW4gbykgJiYgb1t1XSA9PT0gbikgcmV0dXJuIGMgfHwgdSB8fCAwOwogICAgICAgICAgICByZXR1cm4gIWMgJiYgLTE7CiAgICAgICAgICB9OwogICAgICAgIH07CiAgICAgIHQuZXhwb3J0cyA9IHsgaW5jbHVkZXM6IHIoITApLCBpbmRleE9mOiByKCExKSB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcig0OCksCiAgICAgICAgbyA9IE1hdGgubWluOwogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiAwIDwgdCA/IG8oZSh0KSwgOTAwNzE5OTI1NDc0MDk5MSkgOiAwOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgIHZhciByID0gTWF0aC5jZWlsLAogICAgICAgIGUgPSBNYXRoLmZsb29yOwogICAgICB0LmV4cG9ydHMgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBpc05hTigodCA9ICt0KSkgPyAwIDogKDAgPCB0ID8gZSA6IHIpKHQpOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcig0OCksCiAgICAgICAgbyA9IE1hdGgubWF4LAogICAgICAgIGkgPSBNYXRoLm1pbjsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICB0ID0gZSh0KTsKICAgICAgICByZXR1cm4gdCA8IDAgPyBvKHQgKyBuLCAwKSA6IGkodCwgbik7CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgdC5leHBvcnRzID0gWwogICAgICAgICJjb25zdHJ1Y3RvciIsCiAgICAgICAgImhhc093blByb3BlcnR5IiwKICAgICAgICAiaXNQcm90b3R5cGVPZiIsCiAgICAgICAgInByb3BlcnR5SXNFbnVtZXJhYmxlIiwKICAgICAgICAidG9Mb2NhbGVTdHJpbmciLAogICAgICAgICJ0b1N0cmluZyIsCiAgICAgICAgInZhbHVlT2YiLAogICAgICBdOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgIG4uZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDYpLAogICAgICAgIG8gPSAvI3xcLnByb3RvdHlwZVwuLywKICAgICAgICByID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgIHQgPSB1W2kodCldOwogICAgICAgICAgcmV0dXJuIHQgPT0gZiB8fCAodCAhPSBjICYmICgiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gZShuKSA6ICEhbikpOwogICAgICAgIH0sCiAgICAgICAgaSA9IChyLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpLnJlcGxhY2UobywgIi4iKS50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0pLAogICAgICAgIHUgPSAoci5kYXRhID0ge30pLAogICAgICAgIGMgPSAoci5OQVRJVkUgPSAiTiIpLAogICAgICAgIGYgPSAoci5QT0xZRklMTCA9ICJQIik7CiAgICAgIHQuZXhwb3J0cyA9IHI7CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgciA9IHIoMyk7CiAgICAgIHQuZXhwb3J0cyA9IHIuUHJvbWlzZTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICB2YXIgZSA9IHIoMzUpLAogICAgICAgIG8gPSByKDU1KSwKICAgICAgICBpID0gcigyMykoInNwZWNpZXMiKTsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICB2YXIgciwKICAgICAgICAgIHQgPSBlKHQpLmNvbnN0cnVjdG9yOwogICAgICAgIHJldHVybiB0ID09PSBPIHx8IChyID0gZSh0KVtpXSkgPT0gTyA/IG4gOiBvKHIpOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpCiAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKHQpICsgIiBpcyBub3QgYSBmdW5jdGlvbiIpOwogICAgICAgIHJldHVybiB0OwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcigzNSksCiAgICAgICAgbyA9IHIoMTUpLAogICAgICAgIGkgPSByKDU3KTsKICAgICAgdC5leHBvcnRzID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICBpZiAoKGUodCksIG8obikgJiYgbi5jb25zdHJ1Y3RvciA9PT0gdCkpIHJldHVybiBuOwogICAgICAgIHQgPSBpLmYodCk7CiAgICAgICAgcmV0dXJuICgwLCB0LnJlc29sdmUpKG4pLCB0LnByb21pc2U7CiAgICAgIH07CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgZnVuY3Rpb24gZSh0KSB7CiAgICAgICAgdmFyIHIsIGU7CiAgICAgICAgKHRoaXMucHJvbWlzZSA9IG5ldyB0KGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICBpZiAociAhPT0gTyB8fCBlICE9PSBPKSB0aHJvdyBUeXBlRXJyb3IoIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yIik7CiAgICAgICAgICAociA9IHQpLCAoZSA9IG4pOwogICAgICAgIH0pKSwKICAgICAgICAgICh0aGlzLnJlc29sdmUgPSBvKHIpKSwKICAgICAgICAgICh0aGlzLnJlamVjdCA9IG8oZSkpOwogICAgICB9CgogICAgICB2YXIgbyA9IHIoNTUpOwogICAgICB0LmV4cG9ydHMuZiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIG5ldyBlKHQpOwogICAgICB9OwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBlID0gcigyKSwKICAgICAgICBvID0gcigzKSwKICAgICAgICByID0gcig1OSk7CiAgICAgIGUoCiAgICAgICAgewogICAgICAgICAgZ2xvYmFsOiAhMCwKICAgICAgICAgIGJpbmQ6ICEwLAogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBmb3JjZWQ6ICFvLnNldEltbWVkaWF0ZSB8fCAhby5jbGVhckltbWVkaWF0ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHNldEltbWVkaWF0ZTogci5zZXQsCiAgICAgICAgICBjbGVhckltbWVkaWF0ZTogci5jbGVhciwKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUsCiAgICAgICAgbywKICAgICAgICBpID0gcigzKSwKICAgICAgICB1ID0gcig2KSwKICAgICAgICBjID0gcig2MCksCiAgICAgICAgZiA9IHIoNjEpLAogICAgICAgIGEgPSByKDMyKSwKICAgICAgICBzID0gcig2MiksCiAgICAgICAgcCA9IHIoNjMpLAogICAgICAgIGwgPSBpLnNldEltbWVkaWF0ZSwKICAgICAgICB5ID0gaS5jbGVhckltbWVkaWF0ZSwKICAgICAgICB2ID0gaS5wcm9jZXNzLAogICAgICAgIGggPSBpLk1lc3NhZ2VDaGFubmVsLAogICAgICAgIG0gPSBpLkRpc3BhdGNoLAogICAgICAgIGIgPSAwLAogICAgICAgIGcgPSB7fSwKICAgICAgICBkID0gIm9ucmVhZHlzdGF0ZWNoYW5nZSI7CiAgICAgIHRyeSB7CiAgICAgICAgZSA9IGkubG9jYXRpb247CiAgICAgIH0gY2F0Y2ggKHQpIHt9CgogICAgICBmdW5jdGlvbiB4KHQpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgUyh0KTsKICAgICAgICB9OwogICAgICB9CgogICAgICBmdW5jdGlvbiB3KHQpIHsKICAgICAgICBTKHQuZGF0YSk7CiAgICAgIH0KCiAgICAgIHZhciBTID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHZhciBuOwogICAgICAgICAgZy5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAoKG4gPSBnW3RdKSwgZGVsZXRlIGdbdF0sIG4oKSk7CiAgICAgICAgfSwKICAgICAgICByID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIGkucG9zdE1lc3NhZ2UoU3RyaW5nKHQpLCBlLnByb3RvY29sICsgIi8vIiArIGUuaG9zdCk7CiAgICAgICAgfTsKICAgICAgKGwgJiYgeSkgfHwKICAgICAgICAoKGwgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgZm9yICh2YXIgbiA9IFtdLCByID0gYXJndW1lbnRzLmxlbmd0aCwgZSA9IDE7IGUgPCByOyApCiAgICAgICAgICAgIG4ucHVzaChhcmd1bWVudHNbZSsrXSk7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoZ1srK2JdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICgiZnVuY3Rpb24iID09IHR5cGVvZiB0ID8gdCA6IEZ1bmN0aW9uKHQpKS5hcHBseShPLCBuKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG8oYiksCiAgICAgICAgICAgIGIKICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgKHkgPSBmdW5jdGlvbiAodCkgewogICAgICAgICAgZGVsZXRlIGdbdF07CiAgICAgICAgfSksCiAgICAgICAgcAogICAgICAgICAgPyAobyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgdi5uZXh0VGljayh4KHQpKTsKICAgICAgICAgICAgfSkKICAgICAgICAgIDogbSAmJiBtLm5vdwogICAgICAgICAgPyAobyA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgbS5ub3coeCh0KSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICA6IGggJiYgIXMKICAgICAgICAgID8gKChoID0gKHMgPSBuZXcgaCgpKS5wb3J0MiksCiAgICAgICAgICAgIChzLnBvcnQxLm9ubWVzc2FnZSA9IHcpLAogICAgICAgICAgICAobyA9IGMoaC5wb3N0TWVzc2FnZSwgaCwgMSkpKQogICAgICAgICAgOiBpLmFkZEV2ZW50TGlzdGVuZXIgJiYKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgcG9zdE1lc3NhZ2UgJiYKICAgICAgICAgICAgIWkuaW1wb3J0U2NyaXB0cyAmJgogICAgICAgICAgICBlICYmCiAgICAgICAgICAgICJmaWxlOiIgIT09IGUucHJvdG9jb2wgJiYKICAgICAgICAgICAgIXUocikKICAgICAgICAgID8gKChvID0gciksIGkuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIHcsICExKSkKICAgICAgICAgIDogKG8gPQogICAgICAgICAgICAgIGQgaW4gYSgic2NyaXB0IikKICAgICAgICAgICAgICAgID8gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICBmLmFwcGVuZENoaWxkKGEoInNjcmlwdCIpKVtkXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIGYucmVtb3ZlQ2hpbGQodGhpcyksIFModCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoeCh0KSwgMCk7CiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAodC5leHBvcnRzID0geyBzZXQ6IGwsIGNsZWFyOiB5IH0pOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHZhciBpID0gcig1NSk7CiAgICAgIHQuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCBvLCB0KSB7CiAgICAgICAgaWYgKChpKGUpLCBvID09PSBPKSkgcmV0dXJuIGU7CiAgICAgICAgc3dpdGNoICh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGUuY2FsbChvKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGUuY2FsbChvLCB0KTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGUuY2FsbChvLCB0LCBuKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGUuY2FsbChvLCB0LCBuLCByKTsKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBlLmFwcGx5KG8sIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICByID0gcigxNyk7CiAgICAgIHQuZXhwb3J0cyA9IHIoImRvY3VtZW50IiwgImRvY3VtZW50RWxlbWVudCIpOwogICAgfSwKICAgIGZ1bmN0aW9uICh0LCBuLCByKSB7CiAgICAgIHIgPSByKDIxKTsKICAgICAgdC5leHBvcnRzID0gLyg/OmlwYWR8aXBob25lfGlwb2QpLiphcHBsZXdlYmtpdC9pLnRlc3Qocik7CiAgICB9LAogICAgZnVuY3Rpb24gKHQsIG4sIHIpIHsKICAgICAgdmFyIGUgPSByKDExKSwKICAgICAgICByID0gcigzKTsKICAgICAgdC5leHBvcnRzID0gInByb2Nlc3MiID09IGUoci5wcm9jZXNzKTsKICAgIH0sCiAgXSksCiAgICAoZSA9IHt9KSwKICAgIChvLm0gPSByKSwKICAgIChvLmMgPSBlKSwKICAgIChvLmQgPSBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICBvLm8odCwgbikgfHwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsgZW51bWVyYWJsZTogITAsIGdldDogciB9KTsKICAgIH0pLAogICAgKG8uciA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICBTeW1ib2wudG9TdHJpbmdUYWcgJiYKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAiTW9kdWxlIiB9KSwKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiAhMCB9KTsKICAgIH0pLAogICAgKG8udCA9IGZ1bmN0aW9uIChuLCB0KSB7CiAgICAgIGlmICgoMSAmIHQgJiYgKG4gPSBvKG4pKSwgOCAmIHQpKSByZXR1cm4gbjsKICAgICAgaWYgKDQgJiB0ICYmICJvYmplY3QiID09IHR5cGVvZiBuICYmIG4gJiYgbi5fX2VzTW9kdWxlKSByZXR1cm4gbjsKICAgICAgdmFyIHIgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICBpZiAoCiAgICAgICAgKG8ucihyKSwKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgImRlZmF1bHQiLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgIH0pLAogICAgICAgIDIgJiB0ICYmICJzdHJpbmciICE9IHR5cGVvZiBuKQogICAgICApCiAgICAgICAgZm9yICh2YXIgZSBpbiBuKQogICAgICAgICAgby5kKAogICAgICAgICAgICByLAogICAgICAgICAgICBlLAogICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBuW3RdOwogICAgICAgICAgICB9LmJpbmQobnVsbCwgZSkKICAgICAgICAgICk7CiAgICAgIHJldHVybiByOwogICAgfSksCiAgICAoby5uID0gZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIG4gPQogICAgICAgIHQgJiYgdC5fX2VzTW9kdWxlCiAgICAgICAgICA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gdC5kZWZhdWx0OwogICAgICAgICAgICB9CiAgICAgICAgICA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgfTsKICAgICAgcmV0dXJuIG8uZChuLCAiYSIsIG4pLCBuOwogICAgfSksCiAgICAoby5vID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKTsKICAgIH0pLAogICAgKG8ucCA9ICIiKSwKICAgIG8oKG8ucyA9IDApKTsKfSkoKTsKIShmdW5jdGlvbiAoZSkgewogIHZhciBsLAogICAgciA9IChlLmJhYmVsSGVscGVycyA9IHt9KTsKICAoci50eXBlb2YgPQogICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IKICAgICAgPyBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgIH0KICAgICAgOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICAgIGUuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJgogICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgID8gInN5bWJvbCIKICAgICAgICAgICAgOiB0eXBlb2YgZTsKICAgICAgICB9KSwKICAgIChyLmpzeCA9CiAgICAgICgobCA9CiAgICAgICAgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJgogICAgICAgICAgU3ltYm9sLmZvciAmJgogICAgICAgICAgU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpKSB8fAogICAgICAgIDYwMTAzKSwKICAgICAgZnVuY3Rpb24gKGUsIHIsIHQsIG4pIHsKICAgICAgICB2YXIgbyA9IGUgJiYgZS5kZWZhdWx0UHJvcHMsCiAgICAgICAgICBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDM7CiAgICAgICAgaWYgKChyIHx8IDAgPT09IGkgfHwgKHIgPSB7fSksIHIgJiYgbykpCiAgICAgICAgICBmb3IgKHZhciB1IGluIG8pIHZvaWQgMCA9PT0gclt1XSAmJiAoclt1XSA9IG9bdV0pOwogICAgICAgIGVsc2UgciB8fCAociA9IG8gfHwge30pOwogICAgICAgIGlmICgxID09PSBpKSByLmNoaWxkcmVuID0gbjsKICAgICAgICBlbHNlIGlmICgxIDwgaSkgewogICAgICAgICAgZm9yICh2YXIgYSA9IEFycmF5KGkpLCBmID0gMDsgZiA8IGk7IGYrKykgYVtmXSA9IGFyZ3VtZW50c1tmICsgM107CiAgICAgICAgICByLmNoaWxkcmVuID0gYTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICQkdHlwZW9mOiBsLAogICAgICAgICAgdHlwZTogZSwKICAgICAgICAgIGtleTogdm9pZCAwID09PSB0ID8gbnVsbCA6ICIiICsgdCwKICAgICAgICAgIHJlZjogbnVsbCwKICAgICAgICAgIHByb3BzOiByLAogICAgICAgICAgX293bmVyOiBudWxsLAogICAgICAgIH07CiAgICAgIH0pKSwKICAgIChyLmFzeW5jSXRlcmF0b3IgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sKSB7CiAgICAgICAgaWYgKFN5bWJvbC5hc3luY0l0ZXJhdG9yKSB7CiAgICAgICAgICB2YXIgciA9IGVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdOwogICAgICAgICAgaWYgKG51bGwgIT0gcikgcmV0dXJuIHIuY2FsbChlKTsKICAgICAgICB9CiAgICAgICAgaWYgKFN5bWJvbC5pdGVyYXRvcikgcmV0dXJuIGVbU3ltYm9sLml0ZXJhdG9yXSgpOwogICAgICB9CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdCBpcyBub3QgYXN5bmMgaXRlcmFibGUiKTsKICAgIH0pLAogICAgKHIuYXN5bmNHZW5lcmF0b3IgPSAoZnVuY3Rpb24gKCkgewogICAgICBmdW5jdGlvbiBsKGUpIHsKICAgICAgICB0aGlzLnZhbHVlID0gZTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcihvKSB7CiAgICAgICAgdmFyIGksIHU7CgogICAgICAgIGZ1bmN0aW9uIGEoZSwgcikgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIHQgPSBvW2VdKHIpLAogICAgICAgICAgICAgIG4gPSB0LnZhbHVlOwogICAgICAgICAgICBuIGluc3RhbmNlb2YgbAogICAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKG4udmFsdWUpLnRoZW4oCiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgYSgibmV4dCIsIGUpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGEoInRocm93IiwgZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICA6IGYodC5kb25lID8gInJldHVybiIgOiAibm9ybWFsIiwgdC52YWx1ZSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGYoInRocm93IiwgZSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmKGUsIHIpIHsKICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICBjYXNlICJyZXR1cm4iOgogICAgICAgICAgICAgIGkucmVzb2x2ZSh7IHZhbHVlOiByLCBkb25lOiAhMCB9KTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAidGhyb3ciOgogICAgICAgICAgICAgIGkucmVqZWN0KHIpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIGkucmVzb2x2ZSh7IHZhbHVlOiByLCBkb25lOiAhMSB9KTsKICAgICAgICAgIH0KICAgICAgICAgIChpID0gaS5uZXh0KSA/IGEoaS5rZXksIGkuYXJnKSA6ICh1ID0gbnVsbCk7CiAgICAgICAgfQoKICAgICAgICAodGhpcy5faW52b2tlID0gZnVuY3Rpb24gKG4sIG8pIHsKICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICB2YXIgdCA9IHsga2V5OiBuLCBhcmc6IG8sIHJlc29sdmU6IGUsIHJlamVjdDogciwgbmV4dDogbnVsbCB9OwogICAgICAgICAgICB1ID8gKHUgPSB1Lm5leHQgPSB0KSA6ICgoaSA9IHUgPSB0KSwgYShuLCBvKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAgICJmdW5jdGlvbiIgIT0gdHlwZW9mIG8ucmV0dXJuICYmICh0aGlzLnJldHVybiA9IHZvaWQgMCk7CiAgICAgIH0KCiAgICAgIHJldHVybiAoCiAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICBTeW1ib2wuYXN5bmNJdGVyYXRvciAmJgogICAgICAgICAgKHIucHJvdG90eXBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICB9KSwKICAgICAgICAoci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKCJuZXh0IiwgZSk7CiAgICAgICAgfSksCiAgICAgICAgKHIucHJvdG90eXBlLnRocm93ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoInRocm93IiwgZSk7CiAgICAgICAgfSksCiAgICAgICAgKHIucHJvdG90eXBlLnJldHVybiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKCJyZXR1cm4iLCBlKTsKICAgICAgICB9KSwKICAgICAgICB7CiAgICAgICAgICB3cmFwOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBuZXcgcihlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSwKICAgICAgICAgIGF3YWl0OiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IGwoZSk7CiAgICAgICAgICB9LAogICAgICAgIH0KICAgICAgKTsKICAgIH0pKCkpLAogICAgKHIuYXN5bmNHZW5lcmF0b3JEZWxlZ2F0ZSA9IGZ1bmN0aW9uIChuLCBlKSB7CiAgICAgIHZhciByID0ge30sCiAgICAgICAgbyA9ICExOwoKICAgICAgZnVuY3Rpb24gdChyLCB0KSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIChvID0gITApLAogICAgICAgICAgKHQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlKG5bcl0odCkpOwogICAgICAgICAgfSkpLAogICAgICAgICAgeyBkb25lOiAhMSwgdmFsdWU6IGUodCkgfQogICAgICAgICk7CiAgICAgIH0KCiAgICAgIHJldHVybiAoCiAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICBTeW1ib2wuaXRlcmF0b3IgJiYKICAgICAgICAgIChyW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgfSksCiAgICAgICAgKHIubmV4dCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gbyA/ICgobyA9ICExKSwgZSkgOiB0KCJuZXh0IiwgZSk7CiAgICAgICAgfSksCiAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2Ygbi50aHJvdyAmJgogICAgICAgICAgKHIudGhyb3cgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAobykgdGhyb3cgKChvID0gITEpLCBlKTsKICAgICAgICAgICAgcmV0dXJuIHQoInRocm93IiwgZSk7CiAgICAgICAgICB9KSwKICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBuLnJldHVybiAmJgogICAgICAgICAgKHIucmV0dXJuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHQoInJldHVybiIsIGUpOwogICAgICAgICAgfSksCiAgICAgICAgcgogICAgICApOwogICAgfSksCiAgICAoci5hc3luY1RvR2VuZXJhdG9yID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYSA9IGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGksIHUpIHsKICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gcihlLCB0KSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIG4gPSBhW2VdKHQpLAogICAgICAgICAgICAgICAgbyA9IG4udmFsdWU7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdm9pZCB1KGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghbi5kb25lKQogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobykudGhlbigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHIoIm5leHQiLCBlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByKCJ0aHJvdyIsIGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGkobyk7CiAgICAgICAgICB9KSgibmV4dCIpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfSksCiAgICAoci5jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChlLCByKSB7CiAgICAgIGlmICghKGUgaW5zdGFuY2VvZiByKSkKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgIH0pLAogICAgKHIuY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgewogICAgICBmdW5jdGlvbiBuKGUsIHIpIHsKICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0KyspIHsKICAgICAgICAgIHZhciBuID0gclt0XTsKICAgICAgICAgIChuLmVudW1lcmFibGUgPSBuLmVudW1lcmFibGUgfHwgITEpLAogICAgICAgICAgICAobi5jb25maWd1cmFibGUgPSAhMCksCiAgICAgICAgICAgICJ2YWx1ZSIgaW4gbiAmJiAobi53cml0YWJsZSA9ICEwKSwKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIG4ua2V5LCBuKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgciwgdCkgewogICAgICAgIHJldHVybiByICYmIG4oZS5wcm90b3R5cGUsIHIpLCB0ICYmIG4oZSwgdCksIGU7CiAgICAgIH07CiAgICB9KSgpKSwKICAgIChyLmRlZmluZUVudW1lcmFibGVQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgZm9yICh2YXIgdCBpbiByKSB7CiAgICAgICAgdmFyIG4gPSByW3RdOwogICAgICAgIChuLmNvbmZpZ3VyYWJsZSA9IG4uZW51bWVyYWJsZSA9ICEwKSwKICAgICAgICAgICJ2YWx1ZSIgaW4gbiAmJiAobi53cml0YWJsZSA9ICEwKSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCBuKTsKICAgICAgfQogICAgICByZXR1cm4gZTsKICAgIH0pLAogICAgKHIuZGVmYXVsdHMgPSBmdW5jdGlvbiAoZSwgcikgewogICAgICBmb3IgKHZhciB0ID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMociksIG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgewogICAgICAgIHZhciBvID0gdFtuXSwKICAgICAgICAgIGkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHIsIG8pOwogICAgICAgIGkgJiYKICAgICAgICAgIGkuY29uZmlndXJhYmxlICYmCiAgICAgICAgICB2b2lkIDAgPT09IGVbb10gJiYKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBvLCBpKTsKICAgICAgfQogICAgICByZXR1cm4gZTsKICAgIH0pLAogICAgKHIuZGVmaW5lUHJvcGVydHkgPSBmdW5jdGlvbiAoZSwgciwgdCkgewogICAgICByZXR1cm4gKAogICAgICAgIHIgaW4gZQogICAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgewogICAgICAgICAgICAgIHZhbHVlOiB0LAogICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICB9KQogICAgICAgICAgOiAoZVtyXSA9IHQpLAogICAgICAgIGUKICAgICAgKTsKICAgIH0pLAogICAgKHIuZXh0ZW5kcyA9CiAgICAgIE9iamVjdC5hc3NpZ24gfHwKICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgewogICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHNbcl07CiAgICAgICAgICBmb3IgKHZhciBuIGluIHQpCiAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiAoZVtuXSA9IHRbbl0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZTsKICAgICAgfSksCiAgICAoci5nZXQgPSBmdW5jdGlvbiBlKHIsIHQsIG4pIHsKICAgICAgbnVsbCA9PT0gciAmJiAociA9IEZ1bmN0aW9uLnByb3RvdHlwZSk7CiAgICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLCB0KTsKICAgICAgaWYgKHZvaWQgMCA9PT0gbykgewogICAgICAgIHZhciBpID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHIpOwogICAgICAgIHJldHVybiBudWxsID09PSBpID8gdm9pZCAwIDogZShpLCB0LCBuKTsKICAgICAgfQogICAgICBpZiAoInZhbHVlIiBpbiBvKSByZXR1cm4gby52YWx1ZTsKICAgICAgdmFyIHUgPSBvLmdldDsKICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdSA/IHUuY2FsbChuKSA6IHZvaWQgMDsKICAgIH0pLAogICAgKHIuaW5oZXJpdHMgPSBmdW5jdGlvbiAoZSwgcikgewogICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgciAmJiBudWxsICE9PSByKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCAiICsgdHlwZW9mIHIKICAgICAgICApOwogICAgICAoZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHIgJiYgci5wcm90b3R5cGUsIHsKICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgdmFsdWU6IGUsCiAgICAgICAgICBlbnVtZXJhYmxlOiAhMSwKICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgfSwKICAgICAgfSkpLAogICAgICAgIHIgJiYKICAgICAgICAgIChPYmplY3Quc2V0UHJvdG90eXBlT2YKICAgICAgICAgICAgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YoZSwgcikKICAgICAgICAgICAgOiAoZS5fX3Byb3RvX18gPSByKSk7CiAgICB9KSwKICAgIChyLmluc3RhbmNlb2YgPSBmdW5jdGlvbiAoZSwgcikgewogICAgICByZXR1cm4gbnVsbCAhPSByICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgcltTeW1ib2wuaGFzSW5zdGFuY2VdCiAgICAgICAgPyByW1N5bWJvbC5oYXNJbnN0YW5jZV0oZSkKICAgICAgICA6IGUgaW5zdGFuY2VvZiByOwogICAgfSksCiAgICAoci5pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07CiAgICB9KSwKICAgIChyLmludGVyb3BSZXF1aXJlV2lsZGNhcmQgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZSAmJiBlLl9fZXNNb2R1bGUpIHJldHVybiBlOwogICAgICB2YXIgciA9IHt9OwogICAgICBpZiAobnVsbCAhPSBlKQogICAgICAgIGZvciAodmFyIHQgaW4gZSkKICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KSAmJiAoclt0XSA9IGVbdF0pOwogICAgICByZXR1cm4gKHIuZGVmYXVsdCA9IGUpLCByOwogICAgfSksCiAgICAoci5uZXdBcnJvd0NoZWNrID0gZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgaWYgKGUgIT09IHIpIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBpbnN0YW50aWF0ZSBhbiBhcnJvdyBmdW5jdGlvbiIpOwogICAgfSksCiAgICAoci5vYmplY3REZXN0cnVjdHVyaW5nRW1wdHkgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAobnVsbCA9PSBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgZGVzdHJ1Y3R1cmUgdW5kZWZpbmVkIik7CiAgICB9KSwKICAgIChyLm9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgdmFyIHQgPSB7fTsKICAgICAgZm9yICh2YXIgbiBpbiBlKQogICAgICAgIDAgPD0gci5pbmRleE9mKG4pIHx8CiAgICAgICAgICAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG4pICYmICh0W25dID0gZVtuXSkpOwogICAgICByZXR1cm4gdDsKICAgIH0pLAogICAgKHIucG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIChlLCByKSB7CiAgICAgIGlmICghZSkKICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoCiAgICAgICAgICAidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIgogICAgICAgICk7CiAgICAgIHJldHVybiAhciB8fCAoIm9iamVjdCIgIT0gdHlwZW9mIHIgJiYgImZ1bmN0aW9uIiAhPSB0eXBlb2YgcikgPyBlIDogcjsKICAgIH0pLAogICAgKHIuc2VsZkdsb2JhbCA9IHZvaWQgMCA9PT0gZSA/IHNlbGYgOiBlKSwKICAgIChyLnNldCA9IGZ1bmN0aW9uIGUociwgdCwgbiwgbykgewogICAgICB2YXIgaSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IociwgdCk7CiAgICAgIGlmICh2b2lkIDAgPT09IGkpIHsKICAgICAgICB2YXIgdSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihyKTsKICAgICAgICBudWxsICE9PSB1ICYmIGUodSwgdCwgbiwgbyk7CiAgICAgIH0gZWxzZSBpZiAoInZhbHVlIiBpbiBpICYmIGkud3JpdGFibGUpIGkudmFsdWUgPSBuOwogICAgICBlbHNlIHsKICAgICAgICB2YXIgYSA9IGkuc2V0OwogICAgICAgIHZvaWQgMCAhPT0gYSAmJiBhLmNhbGwobywgbik7CiAgICAgIH0KICAgICAgcmV0dXJuIG47CiAgICB9KSwKICAgIChyLnNsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoZSwgcikgewogICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpKQogICAgICAgIHJldHVybiAoZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgICAgIHZhciB0ID0gW10sCiAgICAgICAgICAgIG4gPSAhMCwKICAgICAgICAgICAgbyA9ICExLAogICAgICAgICAgICBpID0gdm9pZCAwOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICB2YXIgdSwgYSA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpOwogICAgICAgICAgICAgICEobiA9ICh1ID0gYS5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKHQucHVzaCh1LnZhbHVlKSwgIXIgfHwgdC5sZW5ndGggIT09IHIpOwogICAgICAgICAgICAgIG4gPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAobyA9ICEwKSwgKGkgPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgIW4gJiYgYS5yZXR1cm4gJiYgYS5yZXR1cm4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAobykgdGhyb3cgaTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfSkoZSwgcik7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiCiAgICAgICk7CiAgICB9KSwKICAgIChyLnNsaWNlZFRvQXJyYXlMb29zZSA9IGZ1bmN0aW9uIChlLCByKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsKICAgICAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoZSkpIHsKICAgICAgICBmb3IgKAogICAgICAgICAgdmFyIHQsIG4gPSBbXSwgbyA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpOwogICAgICAgICAgISh0ID0gby5uZXh0KCkpLmRvbmUgJiYgKG4ucHVzaCh0LnZhbHVlKSwgIXIgfHwgbi5sZW5ndGggIT09IHIpOwoKICAgICAgICApOwogICAgICAgIHJldHVybiBuOwogICAgICB9CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiCiAgICAgICk7CiAgICB9KSwKICAgIChyLnRhZ2dlZFRlbXBsYXRlTGl0ZXJhbCA9IGZ1bmN0aW9uIChlLCByKSB7CiAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKAogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIHsgcmF3OiB7IHZhbHVlOiBPYmplY3QuZnJlZXplKHIpIH0gfSkKICAgICAgKTsKICAgIH0pLAogICAgKHIudGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UgPSBmdW5jdGlvbiAoZSwgcikgewogICAgICByZXR1cm4gKGUucmF3ID0gciksIGU7CiAgICB9KSwKICAgIChyLnRlbXBvcmFsUmVmID0gZnVuY3Rpb24gKGUsIHIsIHQpIHsKICAgICAgaWYgKGUgPT09IHQpCiAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKHIgKyAiIGlzIG5vdCBkZWZpbmVkIC0gdGVtcG9yYWwgZGVhZCB6b25lIik7CiAgICAgIHJldHVybiBlOwogICAgfSksCiAgICAoci50ZW1wb3JhbFVuZGVmaW5lZCA9IHt9KSwKICAgIChyLnRvQXJyYXkgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKSA/IGUgOiBBcnJheS5mcm9tKGUpOwogICAgfSksCiAgICAoci50b0NvbnN1bWFibGVBcnJheSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSB7CiAgICAgICAgZm9yICh2YXIgciA9IDAsIHQgPSBBcnJheShlLmxlbmd0aCk7IHIgPCBlLmxlbmd0aDsgcisrKSB0W3JdID0gZVtyXTsKICAgICAgICByZXR1cm4gdDsKICAgICAgfQogICAgICByZXR1cm4gQXJyYXkuZnJvbShlKTsKICAgIH0pOwp9KSgidW5kZWZpbmVkIiA9PSB0eXBlb2YgZ2xvYmFsID8gc2VsZiA6IGdsb2JhbCk7Cg=="
    ></script>
    <script id="responsive.js" defer="" type="text/javascript">
      !(function (n, e) {
        "object" == typeof exports && "undefined" != typeof module
          ? e(exports)
          : "function" == typeof define && define.amd
          ? define(["exports"], e)
          : e(((n = n || self).Responsive = {}));
      })(this, function (n) {
        "use strict";
        var e = [
          "transitionend",
          "webkitTransitionEnd",
          "oTransitionEnd",
          "msTransitionEnd",
        ].find(function (n) {
          return "on".concat(n.toLowerCase()) in window;
        });

        function t(n) {
          var t = [],
            i = document.getElementById(n),
            o = {
              value: null == i ? void 0 : i.offsetWidth,
              subscribe: function (n) {
                return (
                  t.push(n),
                  function () {
                    t.splice(t.indexOf(n), 1);
                  }
                );
              },
            };
          return (
            null != i &&
              i.addEventListener(
                e,
                function () {
                  var n = null == i ? void 0 : i.offsetWidth;
                  if (((o.value = n), t.length))
                    for (var e = t.length; 0 < e; ) t[--e](n);
                },
                !1
              ),
            o
          );
        }

        var i = document.body.classList.contains("pz-mobile"),
          o = t("ratio-hook"),
          d = t("width-hook");
        (n.isMobile = i),
          (n.ratio = o),
          (n.width = d),
          Object.defineProperty(n, "__esModule", { value: !0 });
      });
      //# sourceMappingURL=responsive.0c8b63b7de3d1efc639cd2f399740b6200a7860f.js.map
    </script>
    <script id="native-bridge.js" defer="" type="text/javascript">
      /**
       * Write properties to the window necessary before rendering. This is injected before most scripts.
       */
      const setHybridWindowProperties = () => {
        const qs = document.location.search.toLowerCase() || "";

        /**
         * Returns URLSearchParams for for window.location.search
         */
        const getParams = () => new URLSearchParams(window.location.search);

        /**
         * Determine if the user agent indicates we're in the Android Newsreader WebView.
         * Special case: for hybrid spelling-bee, the user agent will include 'Reader/'
         *
         * Example UAs:
         * "nyt_android/9.13"
         * "Reader/9.13"
         */
        const isAndroidNewsreaderWebView = (userAgent = "") => {
          const androidRegex = /nyt[-_]?android/i;
          const sbUserAgent = "Reader/";
          return (
            userAgent.includes(sbUserAgent) || androidRegex.test(userAgent)
          );
        };

        /**
         * Determine if the user agent indicates we're in the iOS Newsreader WebView.
         *
         * Example UAs:
         * "Mozilla/5.0 (iPhone; CPU iPhone OS 13_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) nytios/9.33.0"
         * "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) nytios/9.33.0"
         */
        const isIOSNewsreaderWebView = (userAgent = "") => {
          const iOSRegex = /nyt[-_]?ios/i;
          return iOSRegex.test(userAgent);
        };

        /**
         * Determine if we are in a WebView. We'll look at a few different things here
         * and short-circuit evaluate to avoid doing more progressively expensive or
         * sketchy things.
         *
         * We look at rid query param cause iOS app appends that to any Games WebView.
         * And then we can look at user agent, cause that'll never go wrong.
         *
         * Some helpful reading from hybrid folks:
         * https://docs.google.com/document/d/10PNzQxXIHImtuh2c-VLRuH7yUGDgCh7zxqMrYMxg1eQ
         */
        const determineNewsreaderAppPlatform = () => {
          const params = getParams();
          const iosQueryParams = ["ios", "ipad", "iphone"];
          const androidQueryParams = ["android", "androidtab", "androidphone"];

          const embed = params.get("embed") || "";
          const rid = params.get("rid") || "";
          const { userAgent } = navigator;

          if (
            iosQueryParams.includes(embed) ||
            rid ||
            isIOSNewsreaderWebView(userAgent)
          ) {
            return "ios";
          }

          if (
            androidQueryParams.includes(embed) ||
            isAndroidNewsreaderWebView(userAgent)
          ) {
            return "android";
          }

          return "";
        };

        /**
         * Determine if the user agent indicates we're in the Android Crossword WebView.
         * Example UA: "Crosswords/4.12.0 (Android; Android 8.1.0; Build 0/debug)"
         */
        const isAndroidCrosswordWebView = (userAgent = "") => {
          return userAgent.includes("Crosswords/");
        };

        /**
         * Determine if the user agent indicates we're in the iOS Crossword WebView.
         * Example UA: "nyt_xwords_ios/4.10"
         */
        const isIOSCrosswordWebView = (userAgent = "") => {
          return userAgent.includes("nyt_xwords_ios/");
        };

        /**
         * Determine if we are in a Crossword WebView based on the user agent.
         */
        const determineGamesAppPlatform = () => {
          const params = getParams();
          const { userAgent } = navigator;

          if (
            isIOSCrosswordWebView(userAgent) ||
            params.get("hybrid") === "games" ||
            params.get("embed") === "games-ios"
          ) {
            return "ios";
          }

          if (
            isAndroidCrosswordWebView(userAgent) ||
            params.get("embed") === "games-android"
          ) {
            return "android";
          }

          return "";
        };

        /**
         * Determines if a request originated from the iOS Newsreader Play tab.
         */
        function determinePlayTab() {
          const params = getParams();
          const playTabParam = "playTab";

          if (
            params.get("entry") === playTabParam &&
            determineNewsreaderAppPlatform() === "ios"
          ) {
            return true;
          }

          return false;
        }

        /**
         * Determine if the user is in a webview from the Newsreader app
         */
        if (typeof window.newsreaderAppPlatform === "undefined") {
          window.newsreaderAppPlatform = determineNewsreaderAppPlatform();
        }

        /**
         * Determine if the user is in a webview from the Crossword app
         */
        if (typeof window.gamesAppPlatform === "undefined") {
          window.gamesAppPlatform = determineGamesAppPlatform();
        }

        /**
         * Determine if the user is in a webview from the Crossword app
         */
        if (typeof window.isPlayTab === "undefined") {
          window.isPlayTab = determinePlayTab();
        }

        /**
         * For Games that are cached in Fastly, determine here whether or not to enable
         * them to use Hybrid Webviews.
         *
         * For Games, not cached in Fastly yet, see server/util/createPageProps.js
         */
        const isHybridEnabledPage = (pageName) => {
          const HYBRID_ENABLED_PAGES = ["wordle"];

          return !!HYBRID_ENABLED_PAGES.find((enabledPage) =>
            pageName.includes(enabledPage)
          );
        };

        /**
         * Rather than determine we're in a hybrid webview by sniffing the user agent, we
         * will check for the existence of the NYTG property, which is present when a
         * browser is a webview that has hybrid capabilities. Additionally, let's allow
         * this to be mocked when running in a unit test or local browser environment.
         *
         * Before setting this value we check to see if the server wrote it out. This ensures
         * backwards compatibility for games still server rendering this value.
         */
        if (typeof window.isHybridWebView === "undefined") {
          /**
           * Rules for determining whether or not to enable
           * a hybrid game in Phoenix
           */
          window.isHybridWebView =
            // There needs to be an NYTG property
            typeof window.NYTG !== "undefined" &&
            // This must be a page we enabled
            isHybridEnabledPage(window.pageName) &&
            // Until we launch, turn off hybrid for Wordle not in Games apps
            determineGamesAppPlatform();
        }

        // If we are mocking for local dev or testing, force to true
        if (qs.indexOf("bridge=mock") !== -1) {
          window.isHybridWebView = true;
        }
      };

      setHybridWindowProperties();

      var InitNativeBridge = (function (e) {
        var n = {};

        function t(r) {
          if (n[r]) return n[r].exports;
          var i = (n[r] = { i: r, l: !1, exports: {} });
          return e[r].call(i.exports, i, i.exports, t), (i.l = !0), i.exports;
        }

        return (
          (t.m = e),
          (t.c = n),
          (t.d = function (e, n, r) {
            t.o(e, n) ||
              Object.defineProperty(e, n, { enumerable: !0, get: r });
          }),
          (t.r = function (e) {
            "undefined" != typeof Symbol &&
              Symbol.toStringTag &&
              Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
              Object.defineProperty(e, "__esModule", { value: !0 });
          }),
          (t.t = function (e, n) {
            if ((1 & n && (e = t(e)), 8 & n)) return e;
            if (4 & n && "object" == typeof e && e && e.__esModule) return e;
            var r = Object.create(null);
            if (
              (t.r(r),
              Object.defineProperty(r, "default", {
                enumerable: !0,
                value: e,
              }),
              2 & n && "string" != typeof e)
            )
              for (var i in e)
                t.d(
                  r,
                  i,
                  function (n) {
                    return e[n];
                  }.bind(null, i)
                );
            return r;
          }),
          (t.n = function (e) {
            var n =
              e && e.__esModule
                ? function () {
                    return e.default;
                  }
                : function () {
                    return e;
                  };
            return t.d(n, "a", n), n;
          }),
          (t.o = function (e, n) {
            return Object.prototype.hasOwnProperty.call(e, n);
          }),
          (t.p = ""),
          t((t.s = 0))
        );
      })([
        function (e, n, t) {
          "use strict";
          t.r(n),
            t.d(n, "initNativeBridge", function () {
              return a;
            });
          const r =
            "undefined" != typeof CustomEvent
              ? CustomEvent
              : class {
                  constructor() {
                    throw new Error(
                      "This class is only intended for use on the client"
                    );
                  }
                };

          class i extends r {
            constructor(e, n) {
              super(e, n),
                (this.respondWithPromise = null),
                (this.alreadyResolved = !1);
            }

            respondWith(e) {
              if (null !== this.respondWithPromise)
                throw new Error(
                  "respondWith has already been called on this event."
                );
              if (!0 === this.alreadyResolved)
                throw new Error(
                  "You must respond to this event synchronously (you can respond with a Promise)"
                );
              const n = Promise.resolve(e);
              this.respondWithPromise = n;
            }
          }

          const o = (e, n, t) => (r, o, s) => {
              const a = new i(n + o, { detail: s });
              t.dispatchEvent(a);
              const c = (async function (e) {
                return (
                  (e.alreadyResolved = !0),
                  e.respondWithPromise
                    ? e.respondWithPromise
                    : Promise.resolve(null)
                );
              })(a);
              if (!("onWebCommandResult" in e.NYTG)) return c;
              c.then((n) => {
                e.NYTG.onWebCommandResult(
                  JSON.stringify({ id: r, success: !0, values: n })
                );
              }).catch((n) => {
                e.NYTG.onWebCommandResult(
                  JSON.stringify({
                    id: r,
                    success: !1,
                    error: n.name,
                    errorDetails: n.message,
                  })
                );
              });
            },
            s = (e, n, t) => {
              var r, i;
              const s =
                  null == e ||
                  null === (r = e.navigator) ||
                  void 0 === r ||
                  null === (i = r.native) ||
                  void 0 === i
                    ? void 0
                    : i.bridgeCommands,
                a = ((e, n, t, r) => (i, o) => {
                  const s = e.NYTG.currentAsyncID;
                  return (
                    (e.NYTG.currentAsyncID += 1),
                    new Promise((a, c) => {
                      if (t && !n.isBridgeCommandAvailable(i, r))
                        throw new Error(
                          "[NativeBridge] command ".concat(i, " not supported")
                        );
                      try {
                        if (e.NYTG.storedCallbacks[s])
                          throw new Error(
                            "Callback already stored in position ".concat(s)
                          );
                        e.NYTG.storedCallbacks[s] = (e) => {
                          if (!e.success) {
                            const n = new Error(e.error);
                            return (n.details = e.error.details), c(n);
                          }
                          return a(e);
                        };
                      } catch (e) {
                        const n = new Error(
                          "Something went wrong creating the callback with ID "
                            .concat(s, ". Error: ")
                            .concat(JSON.stringify(e))
                        );
                        c(n);
                      }
                      try {
                        var d;
                        e.NYTG.enqueue(
                          JSON.stringify({
                            id: s,
                            type: i,
                            options: o,
                            senderURI:
                              (null === (d = e.asset) || void 0 === d
                                ? void 0
                                : d.uri) || "",
                          })
                        );
                      } catch (e) {
                        console.log(
                          "[NativeBridge]: Caught error while enqueing: ".concat(
                            e
                          )
                        );
                      }
                    })
                  );
                })(e, n, t, s),
                c = (
                  (e) => (n) =>
                    new Promise((t, r) => {
                      try {
                        var i, o;
                        const s =
                          null == e ||
                          null === (i = e.navigator) ||
                          void 0 === i ||
                          null === (o = i.native) ||
                          void 0 === o
                            ? void 0
                            : o.activeABTestVariants;
                        return void 0 === s
                          ? r(
                              new Error(
                                "root.navigator.native.activeABTestVariants is undefined"
                              )
                            )
                          : Array.isArray(s)
                          ? t(s.indexOf(n) > -1)
                          : r(new Error("Variant Array is not an array"));
                      } catch (e) {
                        return r(
                          new Error(
                            "Something went wrong checking if user is in variant. Error: ".concat(
                              JSON.stringify(e)
                            )
                          )
                        );
                      }
                    })
                )(e);
              ((e) => {
                e.NYTG.onCommandResult ||
                  (e.NYTG.onCommandResult = (n) => {
                    const t = e.NYTG.storedCallbacks[n.id];
                    t
                      ? (t(n), delete e.NYTG.storedCallbacks[n.id])
                      : console.log(
                          "Callback with ID ".concat(n.id, " not found.")
                        );
                  });
              })(e),
                (n.isBridgeCommandAvailable = (e) =>
                  ((e, n) => {
                    try {
                      if ("__initialize" === e) return !0;
                      const t = n[e];
                      return !1 != !!t && !!t.enabled;
                    } catch (e) {
                      return !1;
                    }
                  })(e, s)),
                ((e, n, t) => {
                  let r,
                    i = "";
                  try {
                    r = new e.EventTarget();
                  } catch (n) {
                    (r = e), (i = "__nyt_native_bridge:");
                  }
                  (e.initializeCommandComplete = !1),
                    (n.addEventListener = (n, t, o) => {
                      e.initializeCommandComplete &&
                        console.warn(
                          "You should set NativeBridge listeners immediately on page load to avoid missing events the native side dispatches immediately"
                        ),
                        r.addEventListener(i + n, t, o);
                    }),
                    (n.removeEventListener = (e, n, t) =>
                      r.removeEventListener(i + e, n, t));
                  const s = o(e, i, r);
                  (e.NYTG.enqueueWebCommand = ({
                    id: e,
                    type: n,
                    options: t,
                  }) => s(e, n, t)),
                    t("__initialize")
                      .then(() => {
                        e.initializeCommandComplete = !0;
                      })
                      .catch(() => {
                        console.warn(
                          "This environment does not support native->web events"
                        );
                      });
                })(e, n, a);
              const d = (
                (e) => () =>
                  new Promise((n, t) => {
                    document.addEventListener("DOMContentLoaded", () => {
                      if (void 0 !== e.config) n(e.config);
                      else {
                        const e = new Error("No root config found.");
                        t(e);
                      }
                    });
                  })
              )(e);
              return (
                (n.hybridConfig = () => d()),
                {
                  NativeBridge: n,
                  dispatchNativeBridgeCommandAsync: a,
                  checkIsInVariantAsync: c,
                }
              );
            },
            a = (e, n = !0) => {
              if (e && e.NativeBridge) return e.NativeBridge;
              let t = (e && e.NativeBridge) || {};
              if (void 0 === e) return t;
              (e.NYTG = e.NYTG || {}),
                (e.NYTG.currentAsyncID = 0),
                (e.NYTG.storedCallbacks = {});
              const r = s(e, t, n),
                {
                  dispatchNativeBridgeCommandAsync: i,
                  checkIsInVariantAsync: o,
                } = r;
              return (
                (t = r.NativeBridge),
                (t.callNativeBridgeCommand = i),
                (t.checkIsInVariant = o),
                (e.NativeBridge = t),
                t
              );
            };
        },
      ]);
    </script>
    <script
      defer=""
      type="text/javascript"
      src="data:text/javascript;base64,IShmdW5jdGlvbiAoZSwgdCkgewogICJvYmplY3QiID09IHR5cGVvZiBleHBvcnRzICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBtb2R1bGUKICAgID8gdCgKICAgICAgICBleHBvcnRzLAogICAgICAgIHJlcXVpcmUoInJlc3BvbnNpdmUiKSwKICAgICAgICByZXF1aXJlKCJyZWFjdCIpLAogICAgICAgIHJlcXVpcmUoIkBueXQvbmF0aXZlLWJyaWRnZSIpCiAgICAgICkKICAgIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQKICAgID8gZGVmaW5lKFsiZXhwb3J0cyIsICJyZXNwb25zaXZlIiwgInJlYWN0IiwgIkBueXQvbmF0aXZlLWJyaWRnZSJdLCB0KQogICAgOiB0KAogICAgICAgICgoZSA9IGUgfHwgc2VsZikuRm91bmRhdGlvbiA9IHt9KSwKICAgICAgICBlLlJlc3BvbnNpdmUsCiAgICAgICAgZS5SZWFjdCwKICAgICAgICBlLkluaXROYXRpdmVCcmlkZ2UKICAgICAgKTsKfSkodGhpcywgZnVuY3Rpb24gKGUsIGksIHQsIGEpIHsKICAidXNlIHN0cmljdCI7CiAgdmFyIHAgPSB3aW5kb3csCiAgICBkID0gZG9jdW1lbnQsCiAgICByID0gZW5jb2RlVVJJQ29tcG9uZW50LAogICAgbiA9IGxvY2FsU3RvcmFnZSwKICAgIG8gPSBzZXNzaW9uU3RvcmFnZTsKCiAgZnVuY3Rpb24geShlLCB0KSB7CiAgICBudWxsICE9PSBlICYmIGUuY2xhc3NMaXN0LmFkZCh0KTsKICB9CgogIGZ1bmN0aW9uIGcoZSwgdCkgewogICAgbnVsbCAhPT0gZSAmJiBlLmNsYXNzTGlzdC5yZW1vdmUodCk7CiAgfQoKICBmdW5jdGlvbiBzKGUsIHQpIHsKICAgIGUuY2xhc3NMaXN0LnRvZ2dsZSh0KTsKICB9CgogIGZ1bmN0aW9uIF8oZSwgdCwgbikgewogICAgZS5zZXRBdHRyaWJ1dGUodCwgbik7CiAgfQoKICBmdW5jdGlvbiBiKGUsIHQsIG4sIHIpIHsKICAgIGUuYWRkRXZlbnRMaXN0ZW5lcih0LCBuLCByKTsKICB9CgogIGZ1bmN0aW9uIHcoZSkgewogICAgcmV0dXJuIGQuZ2V0RWxlbWVudEJ5SWQoZSk7CiAgfQoKICBmdW5jdGlvbiBjKGUsIHQpIHsKICAgIGUuYXBwZW5kQ2hpbGQodCk7CiAgfQoKICBmdW5jdGlvbiB1KHQsIGUpIHsKICAgICEoZnVuY3Rpb24gKGUpIHsKICAgICAgZm9yICg7IGUuY2hpbGRyZW4ubGVuZ3RoOyApIGUucmVtb3ZlQ2hpbGQoZS5jaGlsZHJlblswXSk7CiAgICB9KSh0KSwKICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgYyh0LCBlKTsKICAgICAgfSk7CiAgfQoKICBmdW5jdGlvbiBsKGUpIHsKICAgIHZhciB0OwogICAgcmV0dXJuIG51bGwgPT09ICh0ID0gZS5jdXJyZW50VGFyZ2V0KSB8fCB2b2lkIDAgPT09IHQKICAgICAgPyB2b2lkIDAKICAgICAgOiB0LmV2ZW50c1tlLnR5cGVdKGUpOwogIH0KCiAgZnVuY3Rpb24gZihlLCByLCB0KSB7CiAgICB2YXIgaSA9IGQuY3JlYXRlRWxlbWVudChlKTsKICAgIHJldHVybiAoCiAgICAgIHQgJiYgYyhpLCBkLmNyZWF0ZVRleHROb2RlKHQpKSwKICAgICAgT2JqZWN0LmtleXMocikuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0LAogICAgICAgICAgbiA9IHJbZV07CiAgICAgICAgIm8iID09PSBlWzBdICYmICJuIiA9PT0gZVsxXQogICAgICAgICAgPyAoKHQgPSBlLnNsaWNlKDIpLnRvTG93ZXJDYXNlKCkpLAogICAgICAgICAgICBpLmV2ZW50cyB8fCAoaS5ldmVudHMgPSB7fSksCiAgICAgICAgICAgIChpLmV2ZW50c1t0XSA9IG4pLAogICAgICAgICAgICBiKGksIHQsIGwpKQogICAgICAgICAgOiBudWxsICE9IG4gJiYgITEgIT09IG4gJiYgaS5zZXRBdHRyaWJ1dGUoZSwgbik7CiAgICAgIH0pLAogICAgICBpCiAgICApOwogIH0KCiAgdmFyIFMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlLCB0OwogICAgICByZXR1cm4gKAogICAgICAgICgKICAgICAgICAgIChudWxsID09PSAoZSA9IHdpbmRvdykgfHwKICAgICAgICAgIHZvaWQgMCA9PT0gZSB8fAogICAgICAgICAgbnVsbCA9PT0gKHQgPSBlLmxvY2F0aW9uKSB8fAogICAgICAgICAgdm9pZCAwID09PSB0CiAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgIDogdC5wYXRobmFtZSkgfHwgIiIKICAgICAgICApLnN0YXJ0c1dpdGgoIi9jcm9zc3dvcmRzL2dhbWUvbWluaSIpICYmIChwLnBhZ2VOYW1lID0gIm1pbmktcGFnZSIpLAogICAgICAgIHAucGFnZU5hbWUgfHwgIiIKICAgICAgKTsKICAgIH0sCiAgICBoID0gcC5lbnYsCiAgICBtID0gcC5mZWF0dXJlRmxhZ3MsCiAgICB2ID0gdm9pZCAwID09PSBtID8ge30gOiBtLAogICAgRSA9IGgudmVyc2lvbiwKICAgIHggPSAicHotdmVyc2lvbiIsCiAgICBrID0gRSAhPT0gbi5nZXRJdGVtKHgpOwogIHRyeSB7CiAgICBuLnNldEl0ZW0oeCwgRSk7CiAgfSBjYXRjaCAoYWUpIHsKICAgIGNvbnNvbGUuZXJyb3IoYWUuZXJyb3IpOwogIH0KCiAgZnVuY3Rpb24gTyh0KSB7CiAgICB2YXIgbiA9IFtdOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIG4ucHVzaCgiIi5jb25jYXQocihlKSwgIj0iKS5jb25jYXQocih0W2VdKSkpOwogICAgICB9KSwKICAgICAgIj8iLmNvbmNhdChuLmpvaW4oIiYiKSkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBUKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgICh0ID0gdCB8fCBwLmxvY2F0aW9uLmhyZWYpLAogICAgICAoZSA9IGUucmVwbGFjZSgvW1tcXV0vZywgIlxcJCYiKSksCiAgICAgICh0ID0gbmV3IFJlZ0V4cCgiWz8mXSIuY29uY2F0KGUsICIoPShbXiYjXSopfCZ8I3wkKSIpKS5leGVjKHQpKQogICAgICAgID8gdFsyXQogICAgICAgICAgPyBkZWNvZGVVUklDb21wb25lbnQodFsyXS5yZXBsYWNlKC9cKy9nLCAiIikpCiAgICAgICAgICA6ICIiCiAgICAgICAgOiBudWxsCiAgICApOwogIH0KCiAgdmFyIEksCiAgICBDID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICJqcy0iLmNvbmNhdChlKTsKICAgIH0sCiAgICBqID0gWyJueXRpbWVzOi8vbG9naW4iLCAibnl0aW1lczovL2NyZWF0ZUFjY291bnQiXSwKICAgIEEgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBEYXRlLm5vdygpOwogICAgfSwKICAgIFIgPSBmdW5jdGlvbiAoZSwgdCwgbiwgcikgewogICAgICB2YXIgaSwKICAgICAgICBvLAogICAgICAgIGEsCiAgICAgICAgcyA9IFtdLAogICAgICAgIGMgPSAiZ2V0SXRlbSIsCiAgICAgICAgdSA9ICJzZXRJdGVtIiwKICAgICAgICBsID0gInJlbW92ZUl0ZW0iLAogICAgICAgIHAgPSAiIi5jb25jYXQobiwgIi1jaGVjayIpOwogICAgICB0ICYmIG4gJiYgayAmJiAodFtsXShwKSwgdFtsXShuKSk7CgogICAgICBmdW5jdGlvbiBkKGUpIHsKICAgICAgICBmb3IgKDsgcy5sZW5ndGg7ICkgewogICAgICAgICAgdmFyIHQ7CiAgICAgICAgICBudWxsICE9PSAodCA9IHMuc2hpZnQoKSkgJiYgdm9pZCAwICE9PSB0ICYmIHRbZSA/IDEgOiAwXShlIHx8IGkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKGkpCiAgICAgICAgICAgIDogbmV3IFByb21pc2UoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzLnB1c2goW2UsIHRdKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHQgJiYgbiAmJiB0W2NdKHApID09PSByICYmIChhID0gdFtjXShuKSksCiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgoYSAmJiBKU09OLnBhcnNlKGEpKSB8fCBlKCkpCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGlmICgoKG8gPSAhMCksIChpID0gZSksIHQgJiYgciAmJiBuICYmICFhKSkKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0W3VdKHAsIHIpLCB0W3VdKG4sIEpTT04uc3RyaW5naWZ5KGkpKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZS5lcnJvcik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGQoKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChkKQogICAgICAgICAgKTsKICAgICAgICB9LAogICAgICB9OwogICAgfSwKICAgIEQgPSAoL05ZVC1TPShbXjtdKykvLmV4ZWMoZC5jb29raWUgfHwgIiIpIHx8IFtdKVsxXSwKICAgIFAgPSAoL255dC1hPShbXjtdKykvLmV4ZWMoZC5jb29raWUgfHwgIiIpIHx8IFtdKVsxXSwKICAgIE4gPSAoL05ZVC1OTy1BRFM9KFteO10rKS8uZXhlYyhkLmNvb2tpZSB8fCAiIikgfHwgW10pWzFdLAogICAgTCA9ICgoSSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogTWF0aC5mbG9vcig0KSkpLCAiIi5jb25jYXQoSSkpLAogICAgcSA9ICJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgiLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSAoMTYgKiBNYXRoLnJhbmRvbSgpKSB8IDA7CiAgICAgIHJldHVybiAoIngiID09PSBlID8gdCA6ICgzICYgdCkgfCA4KS50b1N0cmluZygxNik7CiAgICB9KSwKICAgIE0gPSB7CiAgICAgIGdldCBjdXJyZW50KCkgewogICAgICAgIHJldHVybiB3aW5kb3cubnl0X2V0ICYmIHdpbmRvdy5ueXRfZXQuZ2V0X3BhZ2V2aWV3X2lkCiAgICAgICAgICA/IHdpbmRvdy5ueXRfZXQuZ2V0X3BhZ2V2aWV3X2lkKCkKICAgICAgICAgIDogcTsKICAgICAgfSwKICAgIH07CgogIGZ1bmN0aW9uIFUodCwgZSkgewogICAgdmFyIG4sCiAgICAgIHIgPSBPYmplY3Qua2V5cyh0KTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYKICAgICAgICAoKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSwKICAgICAgICBlICYmCiAgICAgICAgICAobiA9IG4uZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIGUpLmVudW1lcmFibGU7CiAgICAgICAgICB9KSksCiAgICAgICAgci5wdXNoLmFwcGx5KHIsIG4pKSwKICAgICAgcgogICAgKTsKICB9CgogIGZ1bmN0aW9uIEYocikgewogICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHsKICAgICAgdmFyIGkgPSBudWxsICE9IGFyZ3VtZW50c1tlXSA/IGFyZ3VtZW50c1tlXSA6IHt9OwogICAgICBlICUgMgogICAgICAgID8gVShPYmplY3QoaSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0LCBuOwogICAgICAgICAgICAodCA9IHIpLAogICAgICAgICAgICAgIChlID0gaVsobiA9IGUpXSksCiAgICAgICAgICAgICAgbiBpbiB0CiAgICAgICAgICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBuLCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUsCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogITAsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6ICh0W25dID0gZSk7CiAgICAgICAgICB9KQogICAgICAgIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMKICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKGkpKQogICAgICAgIDogVShPYmplY3QoaSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSwgZSkpOwogICAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIGZ1bmN0aW9uIEIobywgYSkgewogICAgdmFyIGUgPSAyIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IHt9LAogICAgICBzID0gRihGKHt9LCB6KSwgZSksCiAgICAgIGMgPSB2b2lkIDAgIT09IChlID0gcy5pc1N5bmMpICYmIGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKG4sIHIpIHsKICAgICAgdmFyIGU7CiAgICAgIGlmICgKICAgICAgICAhKAogICAgICAgICAgKG51bGwgIT09IChlID0gd2luZG93KSAmJiB2b2lkIDAgIT09IGUgJiYgZS5pc0h5YnJpZFdlYlZpZXcpIHx8CiAgICAgICAgICBuYXZpZ2F0b3Iub25MaW5lCiAgICAgICAgKQogICAgICApCiAgICAgICAgcmV0dXJuIHIobmV3IEVycm9yKCJObyBpbnRlcm5ldCIpKTsKICAgICAgdmFyIHQsCiAgICAgICAgaSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICBpLm9wZW4obywgYSwgIWMpLAogICAgICAgIChpLndpdGhDcmVkZW50aWFscyA9ICEhcy53aXRoQ3JlZGVudGlhbHMpLAogICAgICAgIGMgfHwgKGkudGltZW91dCA9IDVlMyksCiAgICAgICAgcy53aXRoQ29va2llICYmCiAgICAgICAgICAocy5jb29raWUKICAgICAgICAgICAgPyBpLnNldFJlcXVlc3RIZWFkZXIoIm55dC1zIiwgcy5jb29raWUpCiAgICAgICAgICAgIDogaS5zZXRSZXF1ZXN0SGVhZGVyKCJueXQtcyIsIEQpKSwKICAgICAgICAoaS5vbnRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByKG5ldyBFcnJvcigiIi5jb25jYXQobywgIiByZXF1ZXN0IHRvICIpLmNvbmNhdChhLCAiIHRpbWVkIG91dCIpKSk7CiAgICAgICAgfSksCiAgICAgICAgaS5zZXRSZXF1ZXN0SGVhZGVyKAogICAgICAgICAgIkNvbnRlbnQtdHlwZSIsCiAgICAgICAgICBzLmRhdGEgPyAiYXBwbGljYXRpb24vanNvbiIgOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgogICAgICAgICksCiAgICAgICAgcy5oZWFkZXJzICYmCiAgICAgICAgICAoKHQgPSBzLmhlYWRlcnMpLAogICAgICAgICAgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpLnNldFJlcXVlc3RIZWFkZXIoZSwgdFtlXSk7CiAgICAgICAgICB9KSksCiAgICAgICAgKGkub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgdCA9IGkucmVzcG9uc2VUZXh0OwogICAgICAgICAgICB0ICYmIHMucmVzcG9uc2VUeXBlID09PSBICiAgICAgICAgICAgICAgPyAoKGUgPSBKU09OLnBhcnNlKHQpKSwKICAgICAgICAgICAgICAgIHMud2l0aFN0YXR1cyAmJiAoZS5zdGF0dXMgPSBpLnN0YXR1cyksCiAgICAgICAgICAgICAgICBuKGUpKQogICAgICAgICAgICAgIDogbih0KTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcihuZXcgRXJyb3IoIlNvbWV0aGluZyB3ZW50IHdyb25nIikpOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgIGkuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHIoCiAgICAgICAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmICghKGUuc3RhdHVzIDwgNDAwKSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgRXJyb3IoImJhZCByZXEiKTsKICAgICAgICAgICAgICAgIHJldHVybiAodC5zdGF0dXMgPSBlLnN0YXR1cyksIHQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KShlKQogICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICBpLnNlbmQocy5kYXRhICYmIEpTT04uc3RyaW5naWZ5KHMuZGF0YSkpOwogICAgfSk7CiAgfQoKICB2YXIgSCA9ICJqc29uIiwKICAgIHogPSB7IHdpdGhDb29raWU6ICEwLCB3aXRoQ3JlZGVudGlhbHM6ICEwLCByZXNwb25zZVR5cGU6IEggfSwKICAgIFcgPSB7CiAgICAgIGdldDogZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICByZXR1cm4gQigiR0VUIiwgZSwgdCk7CiAgICAgIH0sCiAgICAgIHBvc3Q6IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIEIoIlBPU1QiLCBlLCBGKEYoe30sIG4pLCB7fSwgeyBkYXRhOiB0IH0pKTsKICAgICAgfSwKICAgICAgcHV0OiBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgIHJldHVybiBCKCJQVVQiLCBlLCBGKEYoe30sIG4pLCB7fSwgeyBkYXRhOiB0IH0pKTsKICAgICAgfSwKICAgICAgZGVsZXRlOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHJldHVybiBCKCJERUxFVEUiLCBlLCB0KTsKICAgICAgfSwKICAgICAgcmVxdWVzdDogQiwKICAgIH0sCiAgICBZID0gUigKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBXLmdldCgiL3B1enpsZXMvdXNlcj9idXN0PSIuY29uY2F0KEEoKSkpOwogICAgICB9LAogICAgICBvLAogICAgICAicHotdXNlciIsCiAgICAgIEQKICAgICksCiAgICBWID0gcC51c2VyVHlwZTsKCiAgZnVuY3Rpb24gRyhlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0KICAgICAgICAgIG51bGwgPT0gZQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICAgICAgZVsiQEBpdGVyYXRvciJdOwogICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgIHZhciByLAogICAgICAgICAgICBpLAogICAgICAgICAgICBvID0gW10sCiAgICAgICAgICAgIGEgPSAhMCwKICAgICAgICAgICAgcyA9ICExOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBuID0gbi5jYWxsKGUpOwogICAgICAgICAgICAgICEoYSA9IChyID0gbi5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKG8ucHVzaChyLnZhbHVlKSwgIXQgfHwgby5sZW5ndGggIT09IHQpOwogICAgICAgICAgICAgIGEgPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAocyA9ICEwKSwgKGkgPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYSB8fCBudWxsID09IG4ucmV0dXJuIHx8IG4ucmV0dXJuKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKHMpIHRocm93IGk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBvOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIEooZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBKKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBKKGUsIHQpIHsKICAgIChudWxsID09IHQgfHwgdCA+IGUubGVuZ3RoKSAmJiAodCA9IGUubGVuZ3RoKTsKICAgIGZvciAodmFyIG4gPSAwLCByID0gbmV3IEFycmF5KHQpOyBuIDwgdDsgbisrKSByW25dID0gZVtuXTsKICAgIHJldHVybiByOwogIH0KCiAgZnVuY3Rpb24gWCh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgciA9IE9iamVjdC5rZXlzKHQpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICgobiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpLAogICAgICAgIGUgJiYKICAgICAgICAgIChuID0gbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgZSkuZW51bWVyYWJsZTsKICAgICAgICAgIH0pKSwKICAgICAgICByLnB1c2guYXBwbHkociwgbikpLAogICAgICByCiAgICApOwogIH0KCiAgZnVuY3Rpb24gSyhyKSB7CiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgewogICAgICB2YXIgaSA9IG51bGwgIT0gYXJndW1lbnRzW2VdID8gYXJndW1lbnRzW2VdIDoge307CiAgICAgIGUgJSAyCiAgICAgICAgPyBYKE9iamVjdChpKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICh0ID0gciksCiAgICAgICAgICAgICAgKGUgPSBpWyhuID0gZSldKSwKICAgICAgICAgICAgICBuIGluIHQKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKHRbbl0gPSBlKTsKICAgICAgICAgIH0pCiAgICAgICAgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycwogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMociwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoaSkpCiAgICAgICAgOiBYKE9iamVjdChpKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihpLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiByOwogIH0KCiAgdmFyICQgPSAiZmx1aWQiLAogICAgUSA9IFsKICAgICAgWzk5MCwgWyQsIFs3MjgsIDkwXSwgWzk3MCwgOTBdLCBbOTcwLCAyNTBdLCBbMTYwNSwgMzAwXV1dLAogICAgICBbNzUwLCBbJCwgWzcyOCwgOTBdLCBbMTYwNSwgMzAwXV1dLAogICAgICBbNDQwLCBbJCwgWzMwMCwgMjUwXSwgWzMwMCwgNDIwXV1dLAogICAgICBbMCwgWyQsIFszMDAsIDI1MF1dXSwKICAgIF07CiAgcC5BZFNsb3Q0ID0gcC5BZFNsb3Q0IHx8IHsKICAgIGNtZDogW10sCiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIGV2ZW50czogewogICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSwKICAgIH0sCiAgICByZWZyZXNoQWRzOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICB9OwoKICBmdW5jdGlvbiBaKG4sIHIpIHsKICAgIGxlLmNtZC5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSBpLndpZHRoLnZhbHVlLAogICAgICAgIHQgPSBlIDwgMiA/IFsic21hbGwiLCAibWVkaXVtIl1bZV0gOiAibGFyZ2UiLAogICAgICAgIGUgPSBUKCJhZC1rZXl3b3JkcyIpLAogICAgICAgIGUgPSBLKAogICAgICAgICAgSygKICAgICAgICAgICAgewogICAgICAgICAgICAgIHBsYXQ6ICJ3ZWIiLAogICAgICAgICAgICAgIHByb3A6ICJueXQiLAogICAgICAgICAgICAgIHR5cDogImdhbWVzIiwKICAgICAgICAgICAgICB2cDogdCwKICAgICAgICAgICAgICBzdWI6IFYuZW50aXRsZW1lbnQsCiAgICAgICAgICAgICAgcGFnZV92aWV3X2lkOiBNLmN1cnJlbnQsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGUgPyB7IGFkdjogZSB9IDoge30KICAgICAgICAgICksCiAgICAgICAgICB7fSwKICAgICAgICAgIHsKICAgICAgICAgICAgc292OiBMLAogICAgICAgICAgICBhYnJhX2RmcDogKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoCiAgICAgICAgICAgICAgICAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXQogICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXQogICAgICAgICAgICAgICAgICA6IHt9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICBlID0gRyhlLCAxKVswXTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIC9kZnAvLnRlc3QoZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0ID0gRyhlLCAyKSwKICAgICAgICAgICAgICAgICAgICBlID0gdFswXSwKICAgICAgICAgICAgICAgICAgICB0ID0gdFsxXTsKICAgICAgICAgICAgICAgICAgcmV0dXJuICIiLmNvbmNhdChlLCAiXyIpLmNvbmNhdCh0KS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5qb2luKCImIik7CiAgICAgICAgICAgIH0pKHIpLAogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIGxlLmluaXQoewogICAgICAgIGFkVGFyZ2V0aW5nOiBlLAogICAgICAgIGFkVW5pdFBhdGg6ICIiLmNvbmNhdCgiMjkzOTAyMzgvTllUL2Nyb3Nzd29yZHMiLCAiLyIpLmNvbmNhdChuKSwKICAgICAgICBzaXplTWFwcGluZzogeyBkZWZhdWx0OiBRIH0sCiAgICAgIH0pLAogICAgICAgIGxlLmV2ZW50cy5zdWJzY3JpYmUoewogICAgICAgICAgbmFtZTogIkFkUmVuZGVyZWQiLAogICAgICAgICAgc2NvcGU6ICJhbGwiLAogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0ID0gZS5zbG90LAogICAgICAgICAgICAgIGUgPSBlLnNpemUsCiAgICAgICAgICAgICAgdCA9IGQuZ2V0RWxlbWVudEJ5SWQodC5nZXRTbG90RWxlbWVudElkKCkpOwogICAgICAgICAgICBlICYmIDAgPT09IGVbMV0gPyB0ICYmIHkodCwgImZsdWlkIikgOiB0ICYmIGcodCwgImZsdWlkIik7CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBlZShlLCB0KSB7CiAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgZS5oYWRSZWNlbnRJbnB1dCB8fCAoKG8udmFsdWUgKz0gZS52YWx1ZSksIG8uZW50cmllcy5wdXNoKGUpLCByKCkpOwogICAgfQoKICAgIHZhciByLAogICAgICBpLAogICAgICBvID0gZmUoIkNMUyIsIDApOwogICAgKGkgPSBoZSgibGF5b3V0LXNoaWZ0IiwgbikpICYmCiAgICAgICgociA9IGdlKGUsIG8sIHQpKSwKICAgICAgbWUoZnVuY3Rpb24gKCkgewogICAgICAgIGkudGFrZVJlY29yZHMoKS5tYXAobiksIHIoKTsKICAgICAgfSksCiAgICAgIHZlKGZ1bmN0aW9uICgpIHsKICAgICAgICAobyA9IGZlKCJDTFMiLCAwKSksIChyID0gZ2UoZSwgbywgdCkpOwogICAgICB9KSk7CiAgfQoKICBmdW5jdGlvbiB0ZSgpIHsKICAgIHJldHVybiAiaGlkZGVuIiA9PT0gZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID8gMCA6IDEgLyAwOwogIH0KCiAgZnVuY3Rpb24gbmUoKSB7CiAgICBtZShmdW5jdGlvbiAoZSkgewogICAgICBlID0gZS50aW1lU3RhbXA7CiAgICAgIF9lID0gZTsKICAgIH0sICEwKTsKICB9CgogIGZ1bmN0aW9uIHJlKGUsIHQpIHsKICAgIGFlIHx8CiAgICAgICgoYWUgPSB0KSwgKHNlID0gZSksIChjZSA9IG5ldyBEYXRlKCkpLCBrZShyZW1vdmVFdmVudExpc3RlbmVyKSwgRWUoKSk7CiAgfQoKICBmdW5jdGlvbiBpZShlLCB0KSB7CiAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgZS5zdGFydFRpbWUgPCByLnRpbWVTdGFtcCAmJgogICAgICAgICgoaS52YWx1ZSA9IGUucHJvY2Vzc2luZ1N0YXJ0IC0gZS5zdGFydFRpbWUpLAogICAgICAgIGkuZW50cmllcy5wdXNoKGUpLAogICAgICAgIHllLmFkZChpKSwKICAgICAgICBhKCkpOwogICAgfQoKICAgIHZhciByID0gYmUoKSwKICAgICAgaSA9IGZlKCJGSUQiKSwKICAgICAgbyA9IGhlKCJmaXJzdC1pbnB1dCIsIG4pLAogICAgICBhID0gZ2UoZSwgaSwgdCk7CiAgICBvICYmCiAgICAgIG1lKGZ1bmN0aW9uICgpIHsKICAgICAgICBvLnRha2VSZWNvcmRzKCkubWFwKG4pLCBvLmRpc2Nvbm5lY3QoKTsKICAgICAgfSwgITApLAogICAgICBvICYmCiAgICAgICAgdmUoZnVuY3Rpb24gKCkgewogICAgICAgICAgKGkgPSBmZSgiRklEIikpLAogICAgICAgICAgICAoYSA9IGdlKGUsIGksIHQpKSwKICAgICAgICAgICAgKHVlID0gW10pLAogICAgICAgICAgICAoc2UgPSAtMSksCiAgICAgICAgICAgIChhZSA9IG51bGwpLAogICAgICAgICAgICBrZShhZGRFdmVudExpc3RlbmVyKSwKICAgICAgICAgICAgdWUucHVzaChuKSwKICAgICAgICAgICAgRWUoKTsKICAgICAgICB9KTsKICB9CgogIGZ1bmN0aW9uIG9lKHQsIG4pIHsKICAgIGZ1bmN0aW9uIGUoZSkgewogICAgICB2YXIgdCA9IGUuc3RhcnRUaW1lOwogICAgICB0IDwgby50aW1lU3RhbXAgJiYgKChhLnZhbHVlID0gdCksIGEuZW50cmllcy5wdXNoKGUpKSwgcigpOwogICAgfQoKICAgIHZhciByLAogICAgICBpLAogICAgICBvID0gYmUoKSwKICAgICAgYSA9IGZlKCJMQ1AiKSwKICAgICAgcyA9IGhlKCJsYXJnZXN0LWNvbnRlbnRmdWwtcGFpbnQiLCBlKTsKICAgIHMgJiYKICAgICAgKChyID0gZ2UodCwgYSwgbikpLAogICAgICAoaSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB5ZS5oYXMoYSkgfHwgKHMudGFrZVJlY29yZHMoKS5tYXAoZSksIHMuZGlzY29ubmVjdCgpLCB5ZS5hZGQoYSksIHIoKSk7CiAgICAgIH0pLAogICAgICBbImtleWRvd24iLCAiY2xpY2siXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlLCBpLCB7IG9uY2U6ICEwLCBjYXB0dXJlOiAhMCB9KTsKICAgICAgfSksCiAgICAgIG1lKGksICEwKSwKICAgICAgdmUoZnVuY3Rpb24gKGUpIHsKICAgICAgICAoYSA9IGZlKCJMQ1AiKSksCiAgICAgICAgICAociA9IGdlKHQsIGEsIG4pKSwKICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgKGEudmFsdWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIGUudGltZVN0YW1wKSwgeWUuYWRkKGEpLCByKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0pKTsKICB9CgogIHZhciBhZSwKICAgIHNlLAogICAgY2UsCiAgICB1ZSwKICAgIGxlID0gcC5BZFNsb3Q0LAogICAgcGUgPSBwLm5hdmlnYXRvciwKICAgIGRlID0gUigKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBXLmdldCgiL3B1enpsZXMvZGV2aWNlIik7CiAgICAgIH0sCiAgICAgIG4sCiAgICAgICJwei1kZXZpY2UiLAogICAgICBwZS51c2VyQWdlbnQKICAgICksCiAgICBmZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogZSwKICAgICAgICB2YWx1ZTogdm9pZCAwID09PSB0ID8gLTEgOiB0LAogICAgICAgIGRlbHRhOiAwLAogICAgICAgIGVudHJpZXM6IFtdLAogICAgICAgIGlkOiAidjEtIgogICAgICAgICAgLmNvbmNhdChEYXRlLm5vdygpLCAiLSIpCiAgICAgICAgICAuY29uY2F0KE1hdGguZmxvb3IoODk5OTk5OTk5OTk5OSAqIE1hdGgucmFuZG9tKCkpICsgMWUxMiksCiAgICAgIH07CiAgICB9LAogICAgaGUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB0cnkgewogICAgICAgIGlmIChQZXJmb3JtYW5jZU9ic2VydmVyLnN1cHBvcnRlZEVudHJ5VHlwZXMuaW5jbHVkZXMoZSkpIHsKICAgICAgICAgIGlmICgiZmlyc3QtaW5wdXQiID09PSBlICYmICEoIlBlcmZvcm1hbmNlRXZlbnRUaW1pbmciIGluIHNlbGYpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB2YXIgbiA9IG5ldyBQZXJmb3JtYW5jZU9ic2VydmVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlLmdldEVudHJpZXMoKS5tYXAodCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBuLm9ic2VydmUoeyB0eXBlOiBlLCBidWZmZXJlZDogITAgfSksIG47CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7fQogICAgfSwKICAgIG1lID0gZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgZnVuY3Rpb24gcihlKSB7CiAgICAgICAgKCJwYWdlaGlkZSIgIT09IGUudHlwZSAmJiAiaGlkZGVuIiAhPT0gZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKSB8fAogICAgICAgICAgKHQoZSksCiAgICAgICAgICBuICYmCiAgICAgICAgICAgIChyZW1vdmVFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIiwgciwgITApLAogICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCJwYWdlaGlkZSIsIHIsICEwKSkpOwogICAgICB9CgogICAgICBhZGRFdmVudExpc3RlbmVyKCJ2aXNpYmlsaXR5Y2hhbmdlIiwgciwgITApLAogICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoInBhZ2VoaWRlIiwgciwgITApOwogICAgfSwKICAgIHZlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgICAicGFnZXNob3ciLAogICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBlLnBlcnNpc3RlZCAmJiB0KGUpOwogICAgICAgIH0sCiAgICAgICAgITAKICAgICAgKTsKICAgIH0sCiAgICB5ZSA9IG5ldyAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgV2Vha1NldCA/IFdlYWtTZXQgOiBTZXQpKCksCiAgICBnZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIHZhciByOwogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIDAgPD0gdC52YWx1ZSAmJgogICAgICAgICAgKG4gfHwgeWUuaGFzKHQpIHx8ICJoaWRkZW4iID09PSBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpICYmCiAgICAgICAgICAoKHQuZGVsdGEgPSB0LnZhbHVlIC0gKHIgfHwgMCkpLAogICAgICAgICAgKCF0LmRlbHRhICYmIHZvaWQgMCAhPT0gcikgfHwgKChyID0gdC52YWx1ZSksIGUodCkpKTsKICAgICAgfTsKICAgIH0sCiAgICBfZSA9IC0xLAogICAgYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgX2UgPCAwICYmCiAgICAgICAgICAoKF9lID0gdGUoKSksCiAgICAgICAgICBuZSgpLAogICAgICAgICAgdmUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAoX2UgPSB0ZSgpKSwgbmUoKTsKICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICB9KSksCiAgICAgICAgewogICAgICAgICAgZ2V0IHRpbWVTdGFtcCgpIHsKICAgICAgICAgICAgcmV0dXJuIF9lOwogICAgICAgICAgfSwKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgd2UgPSB7IHBhc3NpdmU6ICEwLCBjYXB0dXJlOiAhMCB9LAogICAgU2UgPSBuZXcgRGF0ZSgpLAogICAgRWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0OwogICAgICAwIDw9IHNlICYmCiAgICAgICAgc2UgPCBjZSAtIFNlICYmCiAgICAgICAgKCh0ID0gewogICAgICAgICAgZW50cnlUeXBlOiAiZmlyc3QtaW5wdXQiLAogICAgICAgICAgbmFtZTogYWUudHlwZSwKICAgICAgICAgIHRhcmdldDogYWUudGFyZ2V0LAogICAgICAgICAgY2FuY2VsYWJsZTogYWUuY2FuY2VsYWJsZSwKICAgICAgICAgIHN0YXJ0VGltZTogYWUudGltZVN0YW1wLAogICAgICAgICAgcHJvY2Vzc2luZ1N0YXJ0OiBhZS50aW1lU3RhbXAgKyBzZSwKICAgICAgICB9KSwKICAgICAgICB1ZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBlKHQpOwogICAgICAgIH0pLAogICAgICAgICh1ZSA9IFtdKSk7CiAgICB9LAogICAgeGUgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCwgbiwgciwgaTsKCiAgICAgIGZ1bmN0aW9uIG8oKSB7CiAgICAgICAgcmUobiwgciksIGkoKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICBpKCk7CiAgICAgIH0KCiAgICAgIGUuY2FuY2VsYWJsZSAmJgogICAgICAgICgodCA9CiAgICAgICAgICAoMWUxMiA8IGUudGltZVN0YW1wID8gbmV3IERhdGUoKSA6IHBlcmZvcm1hbmNlLm5vdygpKSAtIGUudGltZVN0YW1wKSwKICAgICAgICAicG9pbnRlcmRvd24iID09IGUudHlwZQogICAgICAgICAgPyAoKG4gPSB0KSwKICAgICAgICAgICAgKHIgPSBlKSwKICAgICAgICAgICAgKGkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIiwgbywgd2UpLAogICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsIGEsIHdlKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsIG8sIHdlKSwKICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmNhbmNlbCIsIGEsIHdlKSkKICAgICAgICAgIDogcmUodCwgZSkpOwogICAgfSwKICAgIGtlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgWyJtb3VzZWRvd24iLCAia2V5ZG93biIsICJ0b3VjaHN0YXJ0IiwgInBvaW50ZXJkb3duIl0uZm9yRWFjaChmdW5jdGlvbiAoCiAgICAgICAgZQogICAgICApIHsKICAgICAgICByZXR1cm4gdChlLCB4ZSwgd2UpOwogICAgICB9KTsKICAgIH07CgogIGZ1bmN0aW9uIE9lKHQsIGUpIHsKICAgIHZhciBuLAogICAgICByID0gT2JqZWN0LmtleXModCk7CiAgICByZXR1cm4gKAogICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICYmCiAgICAgICAgKChuID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KSksCiAgICAgICAgZSAmJgogICAgICAgICAgKG4gPSBuLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBlKS5lbnVtZXJhYmxlOwogICAgICAgICAgfSkpLAogICAgICAgIHIucHVzaC5hcHBseShyLCBuKSksCiAgICAgIHIKICAgICk7CiAgfQoKICBmdW5jdGlvbiBUZSh0KSB7CiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgewogICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW2VdID8gYXJndW1lbnRzW2VdIDoge307CiAgICAgIGUgJSAyCiAgICAgICAgPyBPZShPYmplY3QobiksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIEllKHQsIGUsIG5bZV0pOwogICAgICAgICAgfSkKICAgICAgICA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkKICAgICAgICA6IE9lKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiB0OwogIH0KCiAgZnVuY3Rpb24gSWUoZSwgdCwgbikgewogICAgcmV0dXJuICgKICAgICAgdCBpbiBlCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgewogICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgIH0pCiAgICAgICAgOiAoZVt0XSA9IG4pLAogICAgICBlCiAgICApOwogIH0KCiAgdmFyIENlID0gImRhdGFMYXllciIsCiAgICBqZSA9ICJnYW1lcy1jcm9zc3dvcmRzIjsKICAocFtDZV0gPSBwW0NlXSB8fCBbXSksCiAgICB3aW5kb3cuaXNIeWJyaWRXZWJWaWV3IHx8IHBbQ2VdLnB1c2goeyBldmVudDogImd0bS5qcyIsICJndG0uc3RhcnQiOiBBKCkgfSk7CgogIGZ1bmN0aW9uIEFlKCkgewogICAgZnVuY3Rpb24gZShlKSB7CiAgICAgIHZhciB0OwogICAgICBlICYmIExlKCJ1c2VyRGF0YVJlYWR5IiwgZSksCiAgICAgICAgTGUoInBhZ2VEYXRhUmVhZHkiLCB7CiAgICAgICAgICBhcHBsaWNhdGlvbjogeyBuYW1lOiBqZSwgZW52aXJvbm1lbnQ6IGgubmFtZSB9LAogICAgICAgICAgYXNzZXQ6IHsgdXJsOiBOZSB9LAogICAgICAgICAgcGFnZXZpZXc6IHsgaWQ6IE0uY3VycmVudCB9LAogICAgICAgIH0pLAogICAgICAgICh0ID0gQSgpKSwKICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkLmhhc0ZvY3VzKCkgJiYKICAgICAgICAgICAgTGUoImhlYXJ0YmVhdCIsIHsKICAgICAgICAgICAgICBwYWdldmlldzogewogICAgICAgICAgICAgICAgaGVhcnRiZWF0OiB7CiAgICAgICAgICAgICAgICAgIHRpbWVTaW5jZVBhZ2VEYXRhUmVhZHk6IEEoKSAtIHQsCiAgICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEludGVydmFsOiA1ZTMsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgIH0sIDVlMyk7CiAgICB9CgogICAgcWUuaW5pdGlhbGl6ZSgpLAogICAgICBxZQogICAgICAgIC5nZXQoKQogICAgICAgIC50aGVuKGUpCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBlKCk7CiAgICAgICAgfSk7CiAgfQoKICBmdW5jdGlvbiBSZShlKSB7CiAgICB2YXIgdCA9IGUubmFtZSwKICAgICAgbiA9IGUuZGVsdGEsCiAgICAgIG4gPSB7CiAgICAgICAgZXZlbnRBY3Rpb246ICJXZWIgVml0YWxzIiwKICAgICAgICBldmVudExhYmVsOiBlLmlkLAogICAgICAgIHBhZ2V2aWV3OiB7CiAgICAgICAgICBwZXJmb3JtYW5jZTogSWUoCiAgICAgICAgICAgIHt9LAogICAgICAgICAgICB0LnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgIE1hdGgucm91bmQoIkNMUyIgPT09IHQgPyAxZTMgKiBuIDogbikKICAgICAgICAgICksCiAgICAgICAgfSwKICAgICAgfTsKICAgIExlKCJwZXJmb3JtYW5jZSIsIG4pOwogIH0KCiAgZnVuY3Rpb24gRGUoKSB7CiAgICBlZShSZSksIGllKFJlKSwgb2UoUmUpOwogIH0KCiAgdmFyIFBlID0gZC5xdWVyeVNlbGVjdG9yKCJsaW5rW3JlbD1jYW5vbmljYWxdIiksCiAgICBOZSA9IChQZSB8fCBkLmxvY2F0aW9uKS5ocmVmLAogICAgTGUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbjsKICAgICAgd2luZG93LmlzSHlicmlkV2ViVmlldyAmJiB3aW5kb3cuTmF0aXZlQnJpZGdlCiAgICAgICAgPyAiaGVhcnRiZWF0IiAhPT0gKG4gPSAibW9kdWxlSW50ZXJhY3Rpb24iID09PSBlID8gImludGVyYWN0aW9uIiA6IGUpICYmCiAgICAgICAgICB3aW5kb3cuTmF0aXZlQnJpZGdlLnNlbmRBbmFseXRpYyhuLCB0KQogICAgICAgIDogcFtDZV0ucHVzaChUZSh7IGV2ZW50OiBlIH0sIHQpKTsKICAgIH0sCiAgICBxZSA9IFIoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0pLAogICAgTWUgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IGUubmFtZSwKICAgICAgICBuID0gZS5sYWJlbCwKICAgICAgICByID0gZS5jb250ZXh0LAogICAgICAgIGkgPSBlLmVsZW1lbnQsCiAgICAgICAgbyA9IHZvaWQgMCA9PT0gaSA/IG51bGwgOiBpLAogICAgICAgIGEgPSBlLnVzZUJlYWNvbiwKICAgICAgICBpID0gZS5tZWRpdW0sCiAgICAgICAgZSA9IGUuc291cmNlOwogICAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmCiAgICAgICAgTGUoIm1vZHVsZUludGVyYWN0aW9uIiwgewogICAgICAgICAgZXZlbnREYXRhOiB7CiAgICAgICAgICAgIHBhZ2V0eXBlOiAiZ2FtZSIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJtb2R1bGUiLAogICAgICAgICAgICB0eXBlOiB2b2lkIDAgIT09IGEgJiYgYSA/ICJvYl9jbGljayIgOiAiY2xpY2siLAogICAgICAgICAgfSwKICAgICAgICAgIG1vZHVsZTogewogICAgICAgICAgICB0eXBlOiAiY2xpY2siLAogICAgICAgICAgICBlbGVtZW50OiBvIHx8IHsgbmFtZTogdCwgbGFiZWw6IG4gfSwKICAgICAgICAgICAgY29udGV4dDogciwKICAgICAgICAgICAgbGFiZWw6IG4sCiAgICAgICAgICAgIG1lZGl1bTogdm9pZCAwID09PSBpID8gbnVsbCA6IGksCiAgICAgICAgICAgIHNvdXJjZTogdm9pZCAwID09PSBlID8gbnVsbCA6IGUsCiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgfTsKCiAgZnVuY3Rpb24gVWUoZSkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBIZShlKTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgbnVsbCAhPSBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICBudWxsICE9IGVbIkBAaXRlcmF0b3IiXQogICAgICAgICkKICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKGUpOwogICAgICB9KShlKSB8fAogICAgICBCZShlKSB8fAogICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBGZShlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0KICAgICAgICAgIG51bGwgPT0gZQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICAgICAgZVsiQEBpdGVyYXRvciJdOwogICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgIHZhciByLAogICAgICAgICAgICBpLAogICAgICAgICAgICBvID0gW10sCiAgICAgICAgICAgIGEgPSAhMCwKICAgICAgICAgICAgcyA9ICExOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBuID0gbi5jYWxsKGUpOwogICAgICAgICAgICAgICEoYSA9IChyID0gbi5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKG8ucHVzaChyLnZhbHVlKSwgIXQgfHwgby5sZW5ndGggIT09IHQpOwogICAgICAgICAgICAgIGEgPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAocyA9ICEwKSwgKGkgPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYSB8fCBudWxsID09IG4ucmV0dXJuIHx8IG4ucmV0dXJuKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKHMpIHRocm93IGk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBvOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgQmUoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBCZShlLCB0KSB7CiAgICBpZiAoZSkgewogICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBIZShlLCB0KTsKICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwgLTEpOwogICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAiU2V0IiA9PT0gbgogICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgIC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pCiAgICAgICAgPyBIZShlLCB0KQogICAgICAgIDogdm9pZCAwOwogICAgfQogIH0KCiAgZnVuY3Rpb24gSGUoZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIHIgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIHJbbl0gPSBlW25dOwogICAgcmV0dXJuIHI7CiAgfQoKICBmdW5jdGlvbiB6ZShuKSB7CiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1kuZ2V0KCksIGRlLmdldCgpXSkKICAgICAgLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IEZlKGUsIDIpLAogICAgICAgICAgZSA9IHRbMF0sCiAgICAgICAgICB0ID0gdFsxXTsKICAgICAgICByZXR1cm4gVmUoZSwgdCwgbik7CiAgICAgIH0pCiAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFllOwogICAgICB9KTsKICB9CgogIHZhciBXZSwKICAgIFllID0gIiIsCiAgICBWZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIG4gPSBNLmN1cnJlbnQsCiAgICAgICAgICByID0gIiIKICAgICAgICAgICAgLmNvbmNhdCgKICAgICAgICAgICAgICAyIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXQogICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMl0KICAgICAgICAgICAgICAgIDogIldlYiBGZWVkYmFjayIsCiAgICAgICAgICAgICAgIiAoIgogICAgICAgICAgICApCiAgICAgICAgICAgIC5jb25jYXQobi5zbGljZSgtNiksICIpIiksCiAgICAgICAgICBpID0gcC5zY3JlZW4sCiAgICAgICAgICBvID0gZC5kb2N1bWVudEVsZW1lbnQsCiAgICAgICAgICBhID0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpLAogICAgICAgICAgcyA9IFsKICAgICAgICAgICAgcC5sb2NhdGlvbi5wYXRobmFtZSwKICAgICAgICAgICAgaS53aWR0aCwKICAgICAgICAgICAgaS5oZWlnaHQsCiAgICAgICAgICAgIG8uY2xpZW50V2lkdGgsCiAgICAgICAgICAgIG8uY2xpZW50SGVpZ2h0LAogICAgICAgICAgICAiVVRDIi5jb25jYXQoMCA8IGEgPyAiIiA6ICIrIikuY29uY2F0KGEgLyAtNjApLAogICAgICAgICAgICBlLmlkLAogICAgICAgICAgICBudWxsICE9IFYgJiYgVi5oYXNEaWdpID8gIlllcyIgOiAiTm8iLAogICAgICAgICAgICBudWxsICE9IFYgJiYgVi5oYXNYd2QgPyAiWWVzIiA6ICJObyIsCiAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBlID0gZC5jb29raWUubWF0Y2goL255dC14d2QtaGFzaGQ9KC4rKTsvKTsKICAgICAgICAgICAgICAgIHJldHVybiBlICYmICJ0cnVlIiA9PT0gZVsxXTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSgpCiAgICAgICAgICAgICAgPyAiWWVzIgogICAgICAgICAgICAgIDogIk5vIiwKICAgICAgICAgICAgbiwKICAgICAgICAgIF0sCiAgICAgICAgICBjID0gdC5mZWVkYmFjaywKICAgICAgICAgIHUgPSAvJXMvLAogICAgICAgICAgbCA9IDA7CiAgICAgICAgbCA8IHMubGVuZ3RoOwoKICAgICAgKQogICAgICAgIChjID0gYy5yZXBsYWNlKHUsIHNbbF0udG9TdHJpbmcoKSkpLCAobCArPSAxKTsKICAgICAgcmV0dXJuIFllICsgTyh7IHN1YmplY3Q6IHIsIGJvZHk6IGMgfSk7CiAgICB9LAogICAgR2UgPSBbCiAgICAgICJNb25kYXkiLAogICAgICAiVHVlc2RheSIsCiAgICAgICJXZWRuZXNkYXkiLAogICAgICAiVGh1cnNkYXkiLAogICAgICAiRnJpZGF5IiwKICAgICAgIlNhdHVyZGF5IiwKICAgICAgIlN1bmRheSIsCiAgICAgICJNb24iLAogICAgICAiVHVlIiwKICAgICAgIldlZCIsCiAgICAgICJUaHUiLAogICAgICAiRnJpIiwKICAgICAgIlNhdCIsCiAgICAgICJTdW4iLAogICAgXSwKICAgIEplID0KICAgICAgKChXZSA9ICJodWIiKSwKICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9CiAgICAgICAgICAxIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6IG51bGw7CiAgICAgICAgaWYgKEdlLmluY2x1ZGVzKGUpKQogICAgICAgICAgcmV0dXJuIE1lKHsgbmFtZTogV2UsIGxhYmVsOiAiZGFpbHktYXJjaGl2ZSIsIGNvbnRleHQ6IHQgfSk7CiAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICBjYXNlICJUaGUgQ3Jvc3N3b3JkIjoKICAgICAgICAgICAgcmV0dXJuIE1lKHsgbmFtZTogV2UsIGxhYmVsOiAiZGFpbHktcGFnZSIsIGNvbnRleHQ6IHQgfSk7CiAgICAgICAgICBjYXNlICJUaGUgTWluaSI6CiAgICAgICAgICAgIHJldHVybiBNZSh7IG5hbWU6IFdlLCBsYWJlbDogIm1pbmktcGFnZSIsIGNvbnRleHQ6IHQgfSk7CiAgICAgICAgICBjYXNlICJHYW1lcGxheSBTdG9yaWVzIjoKICAgICAgICAgICAgcmV0dXJuIE1lKHsgbmFtZTogV2UsIGxhYmVsOiAid29yZHBsYXkiLCBjb250ZXh0OiB0IH0pOwogICAgICAgICAgY2FzZSAiU3BlbGxpbmcgQmVlIjoKICAgICAgICAgICAgcmV0dXJuIE1lKHsgbmFtZTogV2UsIGxhYmVsOiAic3BlbGxpbmctYmVlIiwgY29udGV4dDogdCB9KTsKICAgICAgICAgIGNhc2UgIldvcmRsZSI6CiAgICAgICAgICAgIHJldHVybiBNZSh7IG5hbWU6IFdlLCBsYWJlbDogIndvcmRsZSIsIGNvbnRleHQ6IHQgfSk7CiAgICAgICAgICBjYXNlICJMZXR0ZXIgQm94ZWQiOgogICAgICAgICAgICByZXR1cm4gTWUoeyBuYW1lOiBXZSwgbGFiZWw6ICJsZXR0ZXItYm94ZWQiLCBjb250ZXh0OiB0IH0pOwogICAgICAgICAgY2FzZSAiVGlsZXMiOgogICAgICAgICAgICByZXR1cm4gTWUoeyBuYW1lOiBXZSwgbGFiZWw6ICJ0aWxlcyIsIGNvbnRleHQ6IHQgfSk7CiAgICAgICAgICBjYXNlICJTdWRva3UiOgogICAgICAgICAgICByZXR1cm4gTWUoeyBuYW1lOiBXZSwgbGFiZWw6ICJzdWRva3UiLCBjb250ZXh0OiB0IH0pOwogICAgICAgICAgY2FzZSAiVmVydGV4IjoKICAgICAgICAgICAgcmV0dXJuIE1lKHsgbmFtZTogV2UsIGxhYmVsOiAidmVydGV4IiwgY29udGV4dDogdCB9KTsKICAgICAgICAgIGNhc2UgIkFsbCBHYW1lcyI6CiAgICAgICAgICAgIHJldHVybiBNZSh7IG5hbWU6IFdlLCBsYWJlbDogIm5hdi1hbGwtZ2FtZXMiLCBjb250ZXh0OiB0IH0pOwogICAgICAgICAgY2FzZSAiU3RhdGlzdGljcyI6CiAgICAgICAgICAgIHJldHVybiBNZSh7IG5hbWU6IFdlLCBsYWJlbDogInN0YXRzIiwgY29udGV4dDogdCB9KTsKICAgICAgICAgIGNhc2UgIkNyb3Nzd29yZCBBcmNoaXZlcyI6CiAgICAgICAgICAgIHJldHVybiBNZSh7IG5hbWU6IFdlLCBsYWJlbDogImRhaWx5LWFyY2hpdmUiLCBjb250ZXh0OiB0IH0pOwogICAgICAgICAgY2FzZSAiZG93bmxvYWQtYXBwIjoKICAgICAgICAgICAgcmV0dXJuIE1lKHsgbmFtZTogV2UsIGxhYmVsOiAiZG93bmxvYWQtYXBwIiwgY29udGV4dDogdCB9KTsKICAgICAgICAgIGNhc2UgIm1vbnRobHktYm9udXMiOgogICAgICAgICAgICByZXR1cm4gTWUoeyBuYW1lOiBXZSwgbGFiZWw6ICJtb250aGx5LWJvbnVzIiwgY29udGV4dDogdCB9KTsKICAgICAgICAgIGNhc2UgInZhcmlldHktcHV6emxlcyI6CiAgICAgICAgICAgIHJldHVybiBNZSh7IG5hbWU6IFdlLCBsYWJlbDogInZhcmlldHktcHV6emxlcyIsIGNvbnRleHQ6IHQgfSk7CiAgICAgICAgICBjYXNlICJIb3cgdG8gU29sdmUgVGhlIE5ldyBZb3JrIFRpbWVzIENyb3Nzd29yZCI6CiAgICAgICAgICBjYXNlICJGZWF0dXJlZCBBcnRpY2xlIjoKICAgICAgICAgICAgcmV0dXJuIE1lKHsgbmFtZTogV2UsIGxhYmVsOiAiZmVhdHVyZWQtYXJ0aWNsZSIsIGNvbnRleHQ6IHQgfSk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pOwoKICBmdW5jdGlvbiBYZShlKSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIEtlKGUpOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBudWxsICE9IGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgIG51bGwgIT0gZVsiQEBpdGVyYXRvciJdCiAgICAgICAgKQogICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZSk7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBLZShlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IEtlKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gS2UoZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIHIgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIHJbbl0gPSBlW25dOwogICAgcmV0dXJuIHI7CiAgfQoKICB2YXIgJGUsCiAgICBRZSwKICAgIFplLAogICAgZXQsCiAgICB0dCwKICAgIG50ID0gQygiZ2xvYmFsLW5hdiIpLAogICAgcnQgPSBDKCJtb2JpbGUtdG9vbGJhciIpLAogICAgaXQgPSAic2hvdy1tb2JpbGUtdG9vbGJhciIsCiAgICBtID0KICAgICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5wei1oZWFkZXIiKSwKICAgICAgKCRlID0gdyhudCkpLAogICAgICAoUWUgPSB3KHJ0KSksCiAgICAgIChaZSA9ICJwei1tb2JpbGUtbmF2X190b29sYmFyLWl0ZW0iKSwKICAgICAgKHR0ID0gIShldCA9ICJwei1kcm9wZG93bl9fbWVudS1pdGVtIikpLAogICAgICB7CiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdShRZSwgb3QoZSkpOwogICAgICAgIH0sCiAgICAgICAgY3JlYXRlRHJvcERvd246IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IGYoImRpdiIsIHsKICAgICAgICAgICAgICBpZDogQygibW9iaWxlLWRyb3Bkb3duIiksCiAgICAgICAgICAgICAgY2xhc3M6ICJwei1kcm9wZG93biBwei1tb2JpbGUtZHJvcGRvd24iLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgbiA9IGYoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICBjbGFzczogInB6LW1vYmlsZS1uYXZfX3Rvb2xiYXItaXRlbSBwei1kcm9wZG93bl9fYnV0dG9uIiwKICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IHcoQygibW9iaWxlLWRyb3Bkb3duIikpLAogICAgICAgICAgICAgICAgICB0ID0gdyhDKCJtb2JpbGUtZHJvcGRvd24tYXJyb3ciKSk7CiAgICAgICAgICAgICAgICBlICYmIHMoZSwgInNob3ciKSwgdCAmJiBzKHQsICJyZXZlcnNlIik7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHIgPSBmKCJzcGFuIiwgeyBjbGFzczogInB6LWRyb3Bkb3duX19sYWJlbCIgfSwgZS52YWx1ZSksCiAgICAgICAgICAgIGkgPSBmKCJzcGFuIiwgewogICAgICAgICAgICAgIGNsYXNzOiAicHotZHJvcGRvd25fX2Fycm93IGRvd24iLAogICAgICAgICAgICAgIGlkOiBDKCJtb2JpbGUtZHJvcGRvd24tYXJyb3ciKSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG8gPSBmKCJuYXYiLCB7IGNsYXNzOiAicHotZHJvcGRvd25fX2xpc3QiIH0pLAogICAgICAgICAgICBlID0gb3QoZS5pdGVtcywgITApOwogICAgICAgICAgcmV0dXJuIGMobiwgciksIGMobiwgaSksIGModCwgbiksIGModCwgbyksIHUobywgZSksIHQ7CiAgICAgICAgfSwKICAgICAgICBhY3RpdmF0ZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgdHQgfHwgKCh0dCA9ICEwKSwgeSgkZSwgaXQpKTsKICAgICAgICB9LAogICAgICAgIGRlYWN0aXZhdGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHR0ICYmICgodHQgPSAhMSksIGcoJGUsIGl0KSk7CiAgICAgICAgfSwKICAgICAgfSk7CgogIGZ1bmN0aW9uIG90KGUpIHsKICAgIHZhciB0ID0gMSA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gJiYgYXJndW1lbnRzWzFdOwogICAgcmV0dXJuIGUubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQKICAgICAgICA/IGUKICAgICAgICA6IChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCwKICAgICAgICAgICAgICBuID0gewogICAgICAgICAgICAgICAgY2xhc3M6CiAgICAgICAgICAgICAgICAgIDEgPCBhcmd1bWVudHMubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdICYmCiAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXQogICAgICAgICAgICAgICAgICAgID8gZXQKICAgICAgICAgICAgICAgICAgICA6IFplLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIHN3aXRjaCAoZS50eXBlKSB7CiAgICAgICAgICAgICAgY2FzZSAiYnV0dG9uIjoKICAgICAgICAgICAgICAgICh0ID0gImJ1dHRvbiIpLCAobi5vbkNsaWNrID0gZS5hY3Rpb24pOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAibmF2aWdhdGlvbiI6CiAgICAgICAgICAgICAgICAodCA9ICJhIiksCiAgICAgICAgICAgICAgICAgIChuLmhyZWYgPSBlLnVybCksCiAgICAgICAgICAgICAgICAgIChuLnRhcmdldCA9IHdpbmRvdy5pc0h5YnJpZFdlYlZpZXcgPyAiX3NlbGYiIDogIl9ibGFuayIpLAogICAgICAgICAgICAgICAgICAobi5yZWwgPSAibm9yZWZlcnJlciIpLAogICAgICAgICAgICAgICAgICBlLmFjdGlvbiAmJiAobi5vbkNsaWNrID0gZS5hY3Rpb24pOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICh0ID0gInNwYW4iKSwgKG4ub25DbGljayA9IGUuYWN0aW9uKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgciA9IGYodCwgbiwgZS52YWx1ZSk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgInRleHQiICE9PSBlLnR5cGUgJiYKICAgICAgICAgICAgICAgIGUuaWNvbiAmJgogICAgICAgICAgICAgICAgYyhyLCBmKCJpIiwgeyBjbGFzczogInB6LXRvb2xiYXItaWNvbiAiLmNvbmNhdChlLmljb24pIH0pKSwKICAgICAgICAgICAgICByCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KShlLCB0KTsKICAgIH0pOwogIH0KCiAgdmFyIGF0LAogICAgc3QgPSAiX192aWV3ZXJzX18iOwogICJJbnRlcnNlY3Rpb25PYnNlcnZlciIgaW4gcCAmJgogICAgIkludGVyc2VjdGlvbk9ic2VydmVyRW50cnkiIGluIHAgJiYKICAgICJpbnRlcnNlY3Rpb25SYXRpbyIgaW4gcC5JbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5LnByb3RvdHlwZSAmJgogICAgKCJpc0ludGVyc2VjdGluZyIgaW4gcC5JbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5LnByb3RvdHlwZSB8fAogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoCiAgICAgICAgcC5JbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5LnByb3RvdHlwZSwKICAgICAgICAiaXNJbnRlcnNlY3RpbmciLAogICAgICAgIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gMCA8IHRoaXMuaW50ZXJzZWN0aW9uUmF0aW87CiAgICAgICAgICB9LAogICAgICAgIH0KICAgICAgKSwKICAgIChwLl9fb2JzZXJ2ZUluVmlld19fID0gITApKTsKICB2YXIgY3QgPSBmdW5jdGlvbiAoKSB7CiAgICBhdCA9IG5ldyBwLkludGVyc2VjdGlvbk9ic2VydmVyKAogICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgdmFyIGU7CiAgICAgICAgICB0LmlzSW50ZXJzZWN0aW5nICYmCiAgICAgICAgICAgIG51bGwgIT09IChlID0gdC50YXJnZXRbc3RdKSAmJgogICAgICAgICAgICB2b2lkIDAgIT09IGUgJiYKICAgICAgICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGUodCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9LAogICAgICB7IHRocmVzaG9sZDogMC40IH0KICAgICk7CiAgfTsKCiAgZnVuY3Rpb24gdXQodCwgZSkgewogICAgdmFyIG4sCiAgICAgIHIgPSBPYmplY3Qua2V5cyh0KTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYKICAgICAgICAoKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSwKICAgICAgICBlICYmCiAgICAgICAgICAobiA9IG4uZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIGUpLmVudW1lcmFibGU7CiAgICAgICAgICB9KSksCiAgICAgICAgci5wdXNoLmFwcGx5KHIsIG4pKSwKICAgICAgcgogICAgKTsKICB9CgogIGZ1bmN0aW9uIGx0KHIpIHsKICAgIGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7CiAgICAgIHZhciBpID0gbnVsbCAhPSBhcmd1bWVudHNbZV0gPyBhcmd1bWVudHNbZV0gOiB7fTsKICAgICAgZSAlIDIKICAgICAgICA/IHV0KE9iamVjdChpKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICh0ID0gciksCiAgICAgICAgICAgICAgKGUgPSBpWyhuID0gZSldKSwKICAgICAgICAgICAgICBuIGluIHQKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKHRbbl0gPSBlKTsKICAgICAgICAgIH0pCiAgICAgICAgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycwogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMociwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoaSkpCiAgICAgICAgOiB1dChPYmplY3QoaSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSwgZSkpOwogICAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIGZ1bmN0aW9uIHB0KGUpIHsKICAgIHZhciB0ID0gZS50YXJnZXQsCiAgICAgIG4gPSB0LmdldEF0dHJpYnV0ZSgiZGF0YS1yZWdpb24iKSB8fCAiIiwKICAgICAgciA9IHQuZ2V0QXR0cmlidXRlKCJkYXRhLXRyYWNrIikgfHwgIiIsCiAgICAgIGkgPSB0LmdldEF0dHJpYnV0ZSgiZGF0YS1sYWJlbCIpIHx8IHQudGV4dENvbnRlbnQsCiAgICAgIGUgPSB7fTsKICAgICJub3RpY2VPcHRPdXQiID09PSByICYmCiAgICAgIChlID0gewogICAgICAgIG5hbWU6IHQuZ2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtbmFtZSIpLAogICAgICAgIHVybDogdC5ocmVmIHx8ICIiLAogICAgICAgIGxhYmVsOiBpLAogICAgICB9KSwKICAgICAgTGUoIm1vZHVsZUludGVyYWN0aW9uIiwgewogICAgICAgIGV2ZW50RGF0YTogeyBwYWdldHlwZTogImdhbWUiLCB0cmlnZ2VyOiAibW9kdWxlIiwgdHlwZTogImNsaWNrIiB9LAogICAgICAgIG1vZHVsZTogeyBuYW1lOiBmdFtyXSwgbGFiZWw6IGksIHJlZ2lvbjogbiwgZWxlbWVudDogbHQoe30sIGUpIH0sCiAgICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZHQoZSkgewogICAgdmFyIHQgPSB7fSwKICAgICAgbiA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgiZGF0YS1yZWdpb24iKSB8fCAiIiwKICAgICAgciA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgiZGF0YS10cmFjayIpIHx8ICIiLAogICAgICBlID0gZS50YXJnZXQudGV4dENvbnRlbnQ7CiAgICB0W25dIHx8CiAgICAgIChMZSgiaW1wcmVzc2lvbiIsIHsKICAgICAgICBldmVudERhdGE6IHsgcGFnZXR5cGU6ICJnYW1lIiwgdHJpZ2dlcjogIm1vZHVsZSIsIHR5cGU6ICJpbXByZXNzaW9uIiB9LAogICAgICAgIG1vZHVsZTogeyBuYW1lOiBmdFtyXSwgbGFiZWw6IGUsIHJlZ2lvbjogbiB9LAogICAgICB9KSwKICAgICAgKHRbbl0gPSAhMCkpOwogIH0KCiAgdmFyIGZ0ID0gewogICAgbGlua0NBTm90aWNlOiAiY2FsaWZvcm5pYSBub3RpY2VzIGxpbmsiLAogICAgbGlua09wdE91dDogImNjcGEgb3B0LW91dCBsaW5rIiwKICAgIG9wdGVkT3V0OiAiY2NwYSBvcHRlZC1vdXQgaW5kaWNhdG9yIiwKICAgIG1vZGFsUHJpdmFjeTogImNjcGEgbm90aWNlIG9mIG9wdC1vdXQgcHJpdmFjeSBwb2xpY3kgbGluayIsCiAgICBzbmFja2JhcjogImNjcGEgc25hY2tiYXIgbWVzc2FnZSIsCiAgICBub3RpY2VPcHRPdXQ6ICJjY3BhIG5vdGljZSBvZiBvcHQtb3V0IGVsZW1lbnQiLAogIH07CgogIGZ1bmN0aW9uIGh0KGUpIHsKICAgIHJldHVybiAoCiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gbXQoZSk7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICgKICAgICAgICAgICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIG51bGwgIT0gZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgbnVsbCAhPSBlWyJAQGl0ZXJhdG9yIl0KICAgICAgICApCiAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShlKTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIG10KGUsIHQpOwogICAgICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwgLTEpOwogICAgICAgICAgcmV0dXJuICJNYXAiID09PQogICAgICAgICAgICAobiA9ICJPYmplY3QiID09PSBuICYmIGUuY29uc3RydWN0b3IgPyBlLmNvbnN0cnVjdG9yLm5hbWUgOiBuKSB8fAogICAgICAgICAgICAiU2V0IiA9PT0gbgogICAgICAgICAgICA/IEFycmF5LmZyb20oZSkKICAgICAgICAgICAgOiAiQXJndW1lbnRzIiA9PT0gbiB8fAogICAgICAgICAgICAgIC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pCiAgICAgICAgICAgID8gbXQoZSwgdCkKICAgICAgICAgICAgOiB2b2lkIDA7CiAgICAgICAgfQogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBtdChlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgciA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgcltuXSA9IGVbbl07CiAgICByZXR1cm4gcjsKICB9CgogIGZ1bmN0aW9uIF90KCkgewogICAgdmFyIGUsIHQ7CiAgICB0cnkgewogICAgICAoZSA9IGh0KGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNjcGEtaW1wcmVzc2lvbiIpKSksCiAgICAgICAgKHQgPSBodChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuY2NwYS1saW5rIikpKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICBlLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgcHQpOwogICAgfSksCiAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0LCBuOwogICAgICAgICh0ID0gZSksCiAgICAgICAgICAobiA9IGR0KSwKICAgICAgICAgIHdpbmRvdy5fX29ic2VydmVJblZpZXdfXyAmJgogICAgICAgICAgICAoYXQgfHwgY3QoKSwKICAgICAgICAgICAgdFtzdF0KICAgICAgICAgICAgICA/IG51bGwgIT09IChlID0gdFtzdF0pICYmIHZvaWQgMCAhPT0gZSAmJiBlLnB1c2gobikKICAgICAgICAgICAgICA6ICgodFtzdF0gPSBbbl0pLCBhdC5vYnNlcnZlKHQpKSk7CiAgICAgIH0pOwogIH0KCiAgdmFyIGJ0ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgIHJldHVybiAoYnQgPQogICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYKICAgICAgICBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgZS5fX3Byb3RvX18gPSB0OwogICAgICAgIH0pIHx8CiAgICAgIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgZm9yICh2YXIgbiBpbiB0KSB0Lmhhc093blByb3BlcnR5KG4pICYmIChlW25dID0gdFtuXSk7CiAgICAgIH0pKGUsIHQpOwogIH07CgogIGZ1bmN0aW9uIHd0KGUsIHQpIHsKICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBlOwogICAgfQoKICAgIGJ0KGUsIHQpLAogICAgICAoZS5wcm90b3R5cGUgPQogICAgICAgIG51bGwgPT09IHQgPyBPYmplY3QuY3JlYXRlKHQpIDogKChuLnByb3RvdHlwZSA9IHQucHJvdG90eXBlKSwgbmV3IG4oKSkpOwogIH0KCiAgdmFyIFN0LAogICAgRXQsCiAgICB4dCwKICAgIGt0LAogICAgT3QsCiAgICBUdCwKICAgIEl0ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gKEl0ID0KICAgICAgICBPYmplY3QuYXNzaWduIHx8CiAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGZvciAodmFyIHQsIG4gPSAxLCByID0gYXJndW1lbnRzLmxlbmd0aDsgbiA8IHI7IG4rKykKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiAodCA9IGFyZ3VtZW50c1tuXSkpCiAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGkpICYmIChlW2ldID0gdFtpXSk7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKCiAgZnVuY3Rpb24gQ3QoZSwgdCkgewogICAgdmFyIG4gPSB7fTsKICAgIGZvciAoaSBpbiBlKQogICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgaSkgJiYKICAgICAgICB0LmluZGV4T2YoaSkgPCAwICYmCiAgICAgICAgKG5baV0gPSBlW2ldKTsKICAgIGlmIChudWxsICE9IGUgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykKICAgICAgZm9yICh2YXIgciA9IDAsIGkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByIDwgaS5sZW5ndGg7IHIrKykKICAgICAgICB0LmluZGV4T2YoaVtyXSkgPCAwICYmCiAgICAgICAgICBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSwgaVtyXSkgJiYKICAgICAgICAgIChuW2lbcl1dID0gZVtpW3JdXSk7CiAgICByZXR1cm4gbjsKICB9CgogIGZ1bmN0aW9uIGp0KGUpIHsKICAgIHZhciB0ID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvciwKICAgICAgbiA9IHQgJiYgZVt0XSwKICAgICAgciA9IDA7CiAgICBpZiAobikgcmV0dXJuIG4uY2FsbChlKTsKICAgIGlmIChlICYmICJudW1iZXIiID09IHR5cGVvZiBlLmxlbmd0aCkKICAgICAgcmV0dXJuIHsKICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogKGUgPSBlICYmIHIgPj0gZS5sZW5ndGggPyB2b2lkIDAgOiBlKSAmJiBlW3IrK10sCiAgICAgICAgICAgIGRvbmU6ICFlLAogICAgICAgICAgfTsKICAgICAgICB9LAogICAgICB9OwogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgdCA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIKICAgICk7CiAgfQoKICBmdW5jdGlvbiBBdChlLCB0KSB7CiAgICB2YXIgbiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl07CiAgICBpZiAoIW4pIHJldHVybiBlOwogICAgdmFyIHIsCiAgICAgIGksCiAgICAgIG8gPSBuLmNhbGwoZSksCiAgICAgIGEgPSBbXTsKICAgIHRyeSB7CiAgICAgIGZvciAoOyAodm9pZCAwID09PSB0IHx8IDAgPCB0LS0pICYmICEociA9IG8ubmV4dCgpKS5kb25lOyApCiAgICAgICAgYS5wdXNoKHIudmFsdWUpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBpID0geyBlcnJvcjogZSB9OwogICAgfSBmaW5hbGx5IHsKICAgICAgdHJ5IHsKICAgICAgICByICYmICFyLmRvbmUgJiYgKG4gPSBvLnJldHVybikgJiYgbi5jYWxsKG8pOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlmIChpKSB0aHJvdyBpLmVycm9yOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIFJ0KCkgewogICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykKICAgICAgZSA9IGUuY29uY2F0KEF0KGFyZ3VtZW50c1t0XSkpOwogICAgcmV0dXJuIGU7CiAgfQoKICBmdW5jdGlvbiBEdChlKSB7CiAgICByZXR1cm4gKER0ID0KICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IKICAgICAgICA/IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZTsKICAgICAgICAgIH0KICAgICAgICA6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlICYmCiAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICAgICAgZS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmCiAgICAgICAgICAgICAgZSAhPT0gU3ltYm9sLnByb3RvdHlwZQogICAgICAgICAgICAgID8gInN5bWJvbCIKICAgICAgICAgICAgICA6IHR5cGVvZiBlOwogICAgICAgICAgfSkoZSk7CiAgfQoKICBmdW5jdGlvbiBQdChlKSB7CiAgICBzd2l0Y2ggKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkgewogICAgICBjYXNlICJbb2JqZWN0IEVycm9yXSI6CiAgICAgIGNhc2UgIltvYmplY3QgRXhjZXB0aW9uXSI6CiAgICAgIGNhc2UgIltvYmplY3QgRE9NRXhjZXB0aW9uXSI6CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIHp0KGUsIEVycm9yKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIE50KGUpIHsKICAgIHJldHVybiAiW29iamVjdCBFcnJvckV2ZW50XSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKTsKICB9CgogIGZ1bmN0aW9uIEx0KGUpIHsKICAgIHJldHVybiAiW29iamVjdCBET01FcnJvcl0iID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk7CiAgfQoKICBmdW5jdGlvbiBxdChlKSB7CiAgICByZXR1cm4gIltvYmplY3QgU3RyaW5nXSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKTsKICB9CgogIGZ1bmN0aW9uIE10KGUpIHsKICAgIHJldHVybiBudWxsID09PSBlIHx8ICgib2JqZWN0IiAhPT0gRHQoZSkgJiYgImZ1bmN0aW9uIiAhPSB0eXBlb2YgZSk7CiAgfQoKICBmdW5jdGlvbiBVdChlKSB7CiAgICByZXR1cm4gIltvYmplY3QgT2JqZWN0XSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKTsKICB9CgogIGZ1bmN0aW9uIEZ0KGUpIHsKICAgIHJldHVybiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgRXZlbnQgJiYgenQoZSwgRXZlbnQpOwogIH0KCiAgZnVuY3Rpb24gQnQoZSkgewogICAgcmV0dXJuICJ1bmRlZmluZWQiICE9IHR5cGVvZiBFbGVtZW50ICYmIHp0KGUsIEVsZW1lbnQpOwogIH0KCiAgZnVuY3Rpb24gSHQoZSkgewogICAgcmV0dXJuIEJvb2xlYW4oZSAmJiBlLnRoZW4gJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZS50aGVuKTsKICB9CgogIGZ1bmN0aW9uIHp0KGUsIHQpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgdDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuICExOwogICAgfQogIH0KCiAgZnVuY3Rpb24gV3QoZSwgdCkgewogICAgdHJ5IHsKICAgICAgZm9yICgKICAgICAgICB2YXIgbiwgciA9IGUsIGkgPSBbXSwgbyA9IDAsIGEgPSAwLCBzID0gIiA+ICIubGVuZ3RoOwogICAgICAgIHIgJiYKICAgICAgICBvKysgPCA1ICYmCiAgICAgICAgISgKICAgICAgICAgICJodG1sIiA9PT0KICAgICAgICAgICAgKG4gPSAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgIHIsCiAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgbywKICAgICAgICAgICAgICAgIGEgPSBlLAogICAgICAgICAgICAgICAgcyA9IFtdOwogICAgICAgICAgICAgIGlmICghYSB8fCAhYS50YWdOYW1lKSByZXR1cm4gIiI7CiAgICAgICAgICAgICAgcy5wdXNoKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKTsKICAgICAgICAgICAgICB2YXIgZSA9CiAgICAgICAgICAgICAgICBudWxsICE9PSAoZSA9IHQpICYmIHZvaWQgMCAhPT0gZSAmJiBlLmxlbmd0aAogICAgICAgICAgICAgICAgICA/IHQKICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZ2V0QXR0cmlidXRlKGUpOwogICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtlLCBhLmdldEF0dHJpYnV0ZShlKV07CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICA6IG51bGw7CiAgICAgICAgICAgICAgaWYgKG51bGwgIT09ICh0ID0gZSkgJiYgdm9pZCAwICE9PSB0ICYmIHQubGVuZ3RoKQogICAgICAgICAgICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHMucHVzaCgiWyIgKyBlWzBdICsgJz0iJyArIGVbMV0gKyAnIl0nKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGVsc2UgaWYgKChhLmlkICYmIHMucHVzaCgiIyIgKyBhLmlkKSwgKGUgPSBhLmNsYXNzTmFtZSkgJiYgcXQoZSkpKQogICAgICAgICAgICAgICAgZm9yIChuID0gZS5zcGxpdCgvXHMrLyksIG8gPSAwOyBvIDwgbi5sZW5ndGg7IG8rKykKICAgICAgICAgICAgICAgICAgcy5wdXNoKCIuIiArIG5bb10pOwogICAgICAgICAgICAgIHZhciBjID0gWyJ0eXBlIiwgIm5hbWUiLCAidGl0bGUiLCAiYWx0Il07CiAgICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IGMubGVuZ3RoOyBvKyspCiAgICAgICAgICAgICAgICAociA9IGNbb10pLAogICAgICAgICAgICAgICAgICAoaSA9IGEuZ2V0QXR0cmlidXRlKHIpKSAmJiBzLnB1c2goIlsiICsgciArICc9IicgKyBpICsgJyJdJyk7CiAgICAgICAgICAgICAgcmV0dXJuIHMuam9pbigiIik7CiAgICAgICAgICAgIH0pKHIsIHQpKSB8fAogICAgICAgICAgKDEgPCBvICYmIDgwIDw9IGEgKyBpLmxlbmd0aCAqIHMgKyBuLmxlbmd0aCkKICAgICAgICApOwoKICAgICAgKQogICAgICAgIGkucHVzaChuKSwgKGEgKz0gbi5sZW5ndGgpLCAociA9IHIucGFyZW50Tm9kZSk7CiAgICAgIHJldHVybiBpLnJldmVyc2UoKS5qb2luKCIgPiAiKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuICI8dW5rbm93bj4iOwogICAgfQogIH0KCiAgKCh4ID0gU3QgPSBTdCB8fCB7fSkuT2sgPSAib2siKSwKICAgICh4LkV4aXRlZCA9ICJleGl0ZWQiKSwKICAgICh4LkNyYXNoZWQgPSAiY3Jhc2hlZCIpLAogICAgKHguQWJub3JtYWwgPSAiYWJub3JtYWwiKSwKICAgICgoRSA9IEtuID0gS24gfHwge30pLk9rID0gIm9rIiksCiAgICAoRS5FcnJvcmVkID0gImVycm9yZWQiKSwKICAgIChFLkNyYXNoZWQgPSAiY3Jhc2hlZCIpLAogICAgKChvID0gRXQgPSBFdCB8fCB7fSkuRmF0YWwgPSAiZmF0YWwiKSwKICAgIChvLkVycm9yID0gImVycm9yIiksCiAgICAoby5XYXJuaW5nID0gIndhcm5pbmciKSwKICAgIChvLkxvZyA9ICJsb2ciKSwKICAgIChvLkluZm8gPSAiaW5mbyIpLAogICAgKG8uRGVidWcgPSAiZGVidWciKSwKICAgIChvLkNyaXRpY2FsID0gImNyaXRpY2FsIiksCiAgICAoKHh0ID0gRXQgPSBFdCB8fCB7fSkuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHN3aXRjaCAoZSkgewogICAgICAgIGNhc2UgImRlYnVnIjoKICAgICAgICAgIHJldHVybiB4dC5EZWJ1ZzsKICAgICAgICBjYXNlICJpbmZvIjoKICAgICAgICAgIHJldHVybiB4dC5JbmZvOwogICAgICAgIGNhc2UgIndhcm4iOgogICAgICAgIGNhc2UgIndhcm5pbmciOgogICAgICAgICAgcmV0dXJuIHh0Lldhcm5pbmc7CiAgICAgICAgY2FzZSAiZXJyb3IiOgogICAgICAgICAgcmV0dXJuIHh0LkVycm9yOwogICAgICAgIGNhc2UgImZhdGFsIjoKICAgICAgICAgIHJldHVybiB4dC5GYXRhbDsKICAgICAgICBjYXNlICJjcml0aWNhbCI6CiAgICAgICAgICByZXR1cm4geHQuQ3JpdGljYWw7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiB4dC5Mb2c7CiAgICAgIH0KICAgIH0pLAogICAgKCgkID0ga3QgPSBrdCB8fCB7fSkuVW5rbm93biA9ICJ1bmtub3duIiksCiAgICAoJC5Ta2lwcGVkID0gInNraXBwZWQiKSwKICAgICgkLlN1Y2Nlc3MgPSAic3VjY2VzcyIpLAogICAgKCQuUmF0ZUxpbWl0ID0gInJhdGVfbGltaXQiKSwKICAgICgkLkludmFsaWQgPSAiaW52YWxpZCIpLAogICAgKCQuRmFpbGVkID0gImZhaWxlZCIpLAogICAgKChPdCA9IGt0ID0ga3QgfHwge30pLmZyb21IdHRwQ29kZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAyMDAgPD0gZSAmJiBlIDwgMzAwCiAgICAgICAgPyBPdC5TdWNjZXNzCiAgICAgICAgOiA0MjkgPT09IGUKICAgICAgICA/IE90LlJhdGVMaW1pdAogICAgICAgIDogNDAwIDw9IGUgJiYgZSA8IDUwMAogICAgICAgID8gT3QuSW52YWxpZAogICAgICAgIDogNTAwIDw9IGUKICAgICAgICA/IE90LkZhaWxlZAogICAgICAgIDogT3QuVW5rbm93bjsKICAgIH0pLAogICAgKChuID0gVHQgPSBUdCB8fCB7fSkuRXhwbGljaXQgPSAiZXhwbGljaXRseV9zZXQiKSwKICAgIChuLlNhbXBsZXIgPSAiY2xpZW50X3NhbXBsZXIiKSwKICAgIChuLlJhdGUgPSAiY2xpZW50X3JhdGUiKSwKICAgIChuLkluaGVyaXRhbmNlID0gImluaGVyaXRhbmNlIik7CiAgdmFyIFl0ID0KICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAogICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkKICAgICAgPyBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIChlLl9fcHJvdG9fXyA9IHQpLCBlOwogICAgICAgIH0KICAgICAgOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgZm9yICh2YXIgbiBpbiB0KSBlLmhhc093blByb3BlcnR5KG4pIHx8IChlW25dID0gdFtuXSk7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KTsKICB2YXIgVnQsCiAgICBHdCA9ICh3dChKdCwgKFZ0ID0gRXJyb3IpKSwgSnQpOwoKICBmdW5jdGlvbiBKdChlKSB7CiAgICB2YXIgdCA9IHRoaXMuY29uc3RydWN0b3IsCiAgICAgIG4gPSBWdC5jYWxsKHRoaXMsIGUpIHx8IHRoaXM7CiAgICByZXR1cm4gKAogICAgICAobi5tZXNzYWdlID0gZSksCiAgICAgIChuLm5hbWUgPSB0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lKSwKICAgICAgWXQobiwgdC5wcm90b3R5cGUpLAogICAgICBuCiAgICApOwogIH0KCiAgdmFyIFh0ID0gL14oPzooXHcrKTopXC9cLyg/OihcdyspKD86OihcdyspKT9AKShbXHcuLV0rKSg/OjooXGQrKSk/XC8oLispLywKICAgIEt0ID0gIkludmFsaWQgRHNuIiwKICAgICR0ID0KICAgICAgKChRdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgIG4gPSB0Lmhvc3QsCiAgICAgICAgICByID0gdC5wYXRoLAogICAgICAgICAgaSA9IHQucGFzcywKICAgICAgICAgIG8gPSB0LnBvcnQsCiAgICAgICAgICBhID0gdC5wcm9qZWN0SWQ7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHQucHJvdG9jb2wgKwogICAgICAgICAgIjovLyIgKwogICAgICAgICAgdC5wdWJsaWNLZXkgKwogICAgICAgICAgKChlID0gdm9pZCAwID09PSBlID8gITEgOiBlKSAmJiBpID8gIjoiICsgaSA6ICIiKSArCiAgICAgICAgICAiQCIgKwogICAgICAgICAgbiArCiAgICAgICAgICAobyA/ICI6IiArIG8gOiAiIikgKwogICAgICAgICAgIi8iICsKICAgICAgICAgIChyICYmIHIgKyAiLyIpICsKICAgICAgICAgIGEKICAgICAgICApOwogICAgICB9KSwKICAgICAgKFF0LnByb3RvdHlwZS5fZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSBYdC5leGVjKGUpOwogICAgICAgIGlmICghdCkgdGhyb3cgbmV3IEd0KEt0KTsKICAgICAgICB2YXIgbiA9IEF0KHQuc2xpY2UoMSksIDYpLAogICAgICAgICAgciA9IG5bMF0sCiAgICAgICAgICBpID0gblsxXSwKICAgICAgICAgIG8gPSBuWzJdLAogICAgICAgICAgYSA9IHZvaWQgMCA9PT0gbyA/ICIiIDogbywKICAgICAgICAgIHMgPSBuWzNdLAogICAgICAgICAgZSA9IG5bNF0sCiAgICAgICAgICB0ID0gdm9pZCAwID09PSBlID8gIiIgOiBlLAogICAgICAgICAgbyA9ICIiLAogICAgICAgICAgZSA9IG5bNV0sCiAgICAgICAgICBuID0gZS5zcGxpdCgiLyIpOwogICAgICAgIDEgPCBuLmxlbmd0aCAmJiAoKG8gPSBuLnNsaWNlKDAsIC0xKS5qb2luKCIvIikpLCAoZSA9IG4ucG9wKCkpKSwKICAgICAgICAgICFlIHx8ICgobiA9IGUubWF0Y2goL15cZCsvKSkgJiYgKGUgPSBuWzBdKSksCiAgICAgICAgICB0aGlzLl9mcm9tQ29tcG9uZW50cyh7CiAgICAgICAgICAgIGhvc3Q6IHMsCiAgICAgICAgICAgIHBhc3M6IGEsCiAgICAgICAgICAgIHBhdGg6IG8sCiAgICAgICAgICAgIHByb2plY3RJZDogZSwKICAgICAgICAgICAgcG9ydDogdCwKICAgICAgICAgICAgcHJvdG9jb2w6IHIsCiAgICAgICAgICAgIHB1YmxpY0tleTogaSwKICAgICAgICAgIH0pOwogICAgICB9KSwKICAgICAgKFF0LnByb3RvdHlwZS5fZnJvbUNvbXBvbmVudHMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICJ1c2VyIiBpbiBlICYmICEoInB1YmxpY0tleSIgaW4gZSkgJiYgKGUucHVibGljS2V5ID0gZS51c2VyKSwKICAgICAgICAgICh0aGlzLnVzZXIgPSBlLnB1YmxpY0tleSB8fCAiIiksCiAgICAgICAgICAodGhpcy5wcm90b2NvbCA9IGUucHJvdG9jb2wpLAogICAgICAgICAgKHRoaXMucHVibGljS2V5ID0gZS5wdWJsaWNLZXkgfHwgIiIpLAogICAgICAgICAgKHRoaXMucGFzcyA9IGUucGFzcyB8fCAiIiksCiAgICAgICAgICAodGhpcy5ob3N0ID0gZS5ob3N0KSwKICAgICAgICAgICh0aGlzLnBvcnQgPSBlLnBvcnQgfHwgIiIpLAogICAgICAgICAgKHRoaXMucGF0aCA9IGUucGF0aCB8fCAiIiksCiAgICAgICAgICAodGhpcy5wcm9qZWN0SWQgPSBlLnByb2plY3RJZCk7CiAgICAgIH0pLAogICAgICAoUXQucHJvdG90eXBlLl92YWxpZGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgaWYgKAogICAgICAgICAgKFsicHJvdG9jb2wiLCAicHVibGljS2V5IiwgImhvc3QiLCAicHJvamVjdElkIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoIXRbZV0pIHRocm93IG5ldyBHdChLdCArICI6ICIgKyBlICsgIiBtaXNzaW5nIik7CiAgICAgICAgICB9KSwKICAgICAgICAgICF0aGlzLnByb2plY3RJZC5tYXRjaCgvXlxkKyQvKSkKICAgICAgICApCiAgICAgICAgICB0aHJvdyBuZXcgR3QoS3QgKyAiOiBJbnZhbGlkIHByb2plY3RJZCAiICsgdGhpcy5wcm9qZWN0SWQpOwogICAgICAgIGlmICgiaHR0cCIgIT09IHRoaXMucHJvdG9jb2wgJiYgImh0dHBzIiAhPT0gdGhpcy5wcm90b2NvbCkKICAgICAgICAgIHRocm93IG5ldyBHdChLdCArICI6IEludmFsaWQgcHJvdG9jb2wgIiArIHRoaXMucHJvdG9jb2wpOwogICAgICAgIGlmICh0aGlzLnBvcnQgJiYgaXNOYU4ocGFyc2VJbnQodGhpcy5wb3J0LCAxMCkpKQogICAgICAgICAgdGhyb3cgbmV3IEd0KEt0ICsgIjogSW52YWxpZCBwb3J0ICIgKyB0aGlzLnBvcnQpOwogICAgICB9KSwKICAgICAgUXQpOwoKICBmdW5jdGlvbiBRdChlKSB7CiAgICAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IHRoaXMuX2Zyb21TdHJpbmcoZSkgOiB0aGlzLl9mcm9tQ29tcG9uZW50cyhlKSwKICAgICAgdGhpcy5fdmFsaWRhdGUoKTsKICB9CgogIGZ1bmN0aW9uIFp0KCkgewogICAgcmV0dXJuICgKICAgICAgIltvYmplY3QgcHJvY2Vzc10iID09PQogICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoCiAgICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHByb2Nlc3MgPyBwcm9jZXNzIDogMAogICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gZW4oZSwgdCkgewogICAgcmV0dXJuIGUucmVxdWlyZSh0KTsKICB9CgogIGZ1bmN0aW9uIHRuKGUpIHsKICAgIHRyeSB7CiAgICAgIG4gPSBlbihtb2R1bGUsIGUpOwogICAgfSBjYXRjaCAoZSkge30KICAgIHRyeSB7CiAgICAgIHZhciB0ID0gZW4obW9kdWxlLCAicHJvY2VzcyIpLmN3ZCwKICAgICAgICBuID0gZW4obW9kdWxlLCB0KCkgKyAiL25vZGVfbW9kdWxlcy8iICsgZSk7CiAgICB9IGNhdGNoIChlKSB7fQogICAgcmV0dXJuIG47CiAgfQoKICBmdW5jdGlvbiBubihlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSAwKSwKICAgICAgInN0cmluZyIgIT0gdHlwZW9mIGUgfHwgMCA9PT0gdCB8fCBlLmxlbmd0aCA8PSB0CiAgICAgICAgPyBlCiAgICAgICAgOiBlLnN1YnN0cigwLCB0KSArICIuLi4iCiAgICApOwogIH0KCiAgZnVuY3Rpb24gcm4oZSwgdCkgewogICAgaWYgKCFBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gIiI7CiAgICBmb3IgKHZhciBuID0gW10sIHIgPSAwOyByIDwgZS5sZW5ndGg7IHIrKykgewogICAgICB2YXIgaSA9IGVbcl07CiAgICAgIHRyeSB7CiAgICAgICAgbi5wdXNoKFN0cmluZyhpKSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBuLnB1c2goIlt2YWx1ZSBjYW5ub3QgYmUgc2VyaWFsaXplZF0iKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG4uam9pbih0KTsKICB9CgogIGZ1bmN0aW9uIG9uKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgICEhcXQoZSkgJiYKICAgICAgKCJbb2JqZWN0IFJlZ0V4cF0iID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkKICAgICAgICA/IHQudGVzdChlKQogICAgICAgIDogInN0cmluZyIgPT0gdHlwZW9mIHQgJiYgLTEgIT09IGUuaW5kZXhPZih0KSkKICAgICk7CiAgfQoKICB2YXIgYW4gPSB7fTsKCiAgZnVuY3Rpb24gc24oKSB7CiAgICByZXR1cm4gWnQoKQogICAgICA/IGdsb2JhbAogICAgICA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cKICAgICAgPyB3aW5kb3cKICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygc2VsZgogICAgICA/IHNlbGYKICAgICAgOiBhbjsKICB9CgogIGZ1bmN0aW9uIGNuKCkgewogICAgdmFyIGUgPSBzbigpLAogICAgICB0ID0gZS5jcnlwdG8gfHwgZS5tc0NyeXB0bzsKICAgIGlmICh2b2lkIDAgIT09IHQgJiYgdC5nZXRSYW5kb21WYWx1ZXMpIHsKICAgICAgZSA9IG5ldyBVaW50MTZBcnJheSg4KTsKICAgICAgdC5nZXRSYW5kb21WYWx1ZXMoZSksCiAgICAgICAgKGVbM10gPSAoNDA5NSAmIGVbM10pIHwgMTYzODQpLAogICAgICAgIChlWzRdID0gKDE2MzgzICYgZVs0XSkgfCAzMjc2OCk7CiAgICAgIHQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGZvciAodmFyIHQgPSBlLnRvU3RyaW5nKDE2KTsgdC5sZW5ndGggPCA0OyApIHQgPSAiMCIgKyB0OwogICAgICAgIHJldHVybiB0OwogICAgICB9OwogICAgICByZXR1cm4gKAogICAgICAgIHQoZVswXSkgKwogICAgICAgIHQoZVsxXSkgKwogICAgICAgIHQoZVsyXSkgKwogICAgICAgIHQoZVszXSkgKwogICAgICAgIHQoZVs0XSkgKwogICAgICAgIHQoZVs1XSkgKwogICAgICAgIHQoZVs2XSkgKwogICAgICAgIHQoZVs3XSkKICAgICAgKTsKICAgIH0KICAgIHJldHVybiAieHh4eHh4eHh4eHh4NHh4eHl4eHh4eHh4eHh4eHh4eHgiLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSAoMTYgKiBNYXRoLnJhbmRvbSgpKSB8IDA7CiAgICAgIHJldHVybiAoIngiID09PSBlID8gdCA6ICgzICYgdCkgfCA4KS50b1N0cmluZygxNik7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHVuKGUpIHsKICAgIGlmICghZSkgcmV0dXJuIHt9OwogICAgdmFyIHQgPSBlLm1hdGNoKAogICAgICAvXigoW146Lz8jXSspOik/KFwvXC8oW14vPyNdKikpPyhbXj8jXSopKFw/KFteI10qKSk/KCMoLiopKT8kLwogICAgKTsKICAgIGlmICghdCkgcmV0dXJuIHt9OwogICAgdmFyIG4gPSB0WzZdIHx8ICIiLAogICAgICBlID0gdFs4XSB8fCAiIjsKICAgIHJldHVybiB7IGhvc3Q6IHRbNF0sIHBhdGg6IHRbNV0sIHByb3RvY29sOiB0WzJdLCByZWxhdGl2ZTogdFs1XSArIG4gKyBlIH07CiAgfQoKICBmdW5jdGlvbiBsbihlKSB7CiAgICBpZiAoZS5tZXNzYWdlKSByZXR1cm4gZS5tZXNzYWdlOwogICAgaWYgKGUuZXhjZXB0aW9uICYmIGUuZXhjZXB0aW9uLnZhbHVlcyAmJiBlLmV4Y2VwdGlvbi52YWx1ZXNbMF0pIHsKICAgICAgdmFyIHQgPSBlLmV4Y2VwdGlvbi52YWx1ZXNbMF07CiAgICAgIHJldHVybiB0LnR5cGUgJiYgdC52YWx1ZQogICAgICAgID8gdC50eXBlICsgIjogIiArIHQudmFsdWUKICAgICAgICA6IHQudHlwZSB8fCB0LnZhbHVlIHx8IGUuZXZlbnRfaWQgfHwgIjx1bmtub3duPiI7CiAgICB9CiAgICByZXR1cm4gZS5ldmVudF9pZCB8fCAiPHVua25vd24+IjsKICB9CgogIGZ1bmN0aW9uIHBuKGUpIHsKICAgIHZhciB0ID0gc24oKTsKICAgIGlmICghKCJjb25zb2xlIiBpbiB0KSkgcmV0dXJuIGUoKTsKICAgIHZhciBuID0gdC5jb25zb2xlLAogICAgICByID0ge307CiAgICBbImRlYnVnIiwgImluZm8iLCAid2FybiIsICJlcnJvciIsICJsb2ciLCAiYXNzZXJ0Il0uZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICBlIGluIHQuY29uc29sZSAmJgogICAgICAgIG5bZV0uX19zZW50cnlfb3JpZ2luYWxfXyAmJgogICAgICAgICgocltlXSA9IG5bZV0pLCAobltlXSA9IG5bZV0uX19zZW50cnlfb3JpZ2luYWxfXykpOwogICAgfSk7CiAgICBlID0gZSgpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmtleXMocikuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIG5bZV0gPSByW2VdOwogICAgICB9KSwKICAgICAgZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGRuKGUsIHQsIG4pIHsKICAgIChlLmV4Y2VwdGlvbiA9IGUuZXhjZXB0aW9uIHx8IHt9KSwKICAgICAgKGUuZXhjZXB0aW9uLnZhbHVlcyA9IGUuZXhjZXB0aW9uLnZhbHVlcyB8fCBbXSksCiAgICAgIChlLmV4Y2VwdGlvbi52YWx1ZXNbMF0gPSBlLmV4Y2VwdGlvbi52YWx1ZXNbMF0gfHwge30pLAogICAgICAoZS5leGNlcHRpb24udmFsdWVzWzBdLnZhbHVlID0gZS5leGNlcHRpb24udmFsdWVzWzBdLnZhbHVlIHx8IHQgfHwgIiIpLAogICAgICAoZS5leGNlcHRpb24udmFsdWVzWzBdLnR5cGUgPSBlLmV4Y2VwdGlvbi52YWx1ZXNbMF0udHlwZSB8fCBuIHx8ICJFcnJvciIpOwogIH0KCiAgZnVuY3Rpb24gZm4odCwgbikgewogICAgdm9pZCAwID09PSBuICYmIChuID0ge30pOwogICAgdHJ5IHsKICAgICAgKHQuZXhjZXB0aW9uLnZhbHVlc1swXS5tZWNoYW5pc20gPSB0LmV4Y2VwdGlvbi52YWx1ZXNbMF0ubWVjaGFuaXNtIHx8IHt9KSwKICAgICAgICBPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB0LmV4Y2VwdGlvbi52YWx1ZXNbMF0ubWVjaGFuaXNtW2VdID0gbltlXTsKICAgICAgICB9KTsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgfQoKICB2YXIgaG4gPSBzbigpLAogICAgbW4gPSAiU2VudHJ5IExvZ2dlciAiLAogICAgUGUgPQogICAgICAoKHZuLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuX2VuYWJsZWQgPSAhMTsKICAgICAgfSksCiAgICAgICh2bi5wcm90b3R5cGUuZW5hYmxlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuX2VuYWJsZWQgPSAhMDsKICAgICAgfSksCiAgICAgICh2bi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgdGhpcy5fZW5hYmxlZCAmJgogICAgICAgICAgcG4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBobi5jb25zb2xlLmxvZyhtbiArICJbTG9nXTogIiArIGUuam9pbigiICIpKTsKICAgICAgICAgIH0pOwogICAgICB9KSwKICAgICAgKHZuLnByb3RvdHlwZS53YXJuID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgdGhpcy5fZW5hYmxlZCAmJgogICAgICAgICAgcG4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBobi5jb25zb2xlLndhcm4obW4gKyAiW1dhcm5dOiAiICsgZS5qb2luKCIgIikpOwogICAgICAgICAgfSk7CiAgICAgIH0pLAogICAgICAodm4ucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgdGhpcy5fZW5hYmxlZCAmJgogICAgICAgICAgcG4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBobi5jb25zb2xlLmVycm9yKG1uICsgIltFcnJvcl06ICIgKyBlLmpvaW4oIiAiKSk7CiAgICAgICAgICB9KTsKICAgICAgfSksCiAgICAgIHZuKTsKCiAgZnVuY3Rpb24gdm4oKSB7CiAgICB0aGlzLl9lbmFibGVkID0gITE7CiAgfQoKICBobi5fX1NFTlRSWV9fID0gaG4uX19TRU5UUllfXyB8fCB7fTsKICB2YXIgeW4gPSBobi5fX1NFTlRSWV9fLmxvZ2dlciB8fCAoaG4uX19TRU5UUllfXy5sb2dnZXIgPSBuZXcgUGUoKSksCiAgICBnbiA9CiAgICAgICgoX24ucHJvdG90eXBlLm1lbW9pemUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICh0aGlzLl9oYXNXZWFrU2V0KQogICAgICAgICAgcmV0dXJuICEhdGhpcy5faW5uZXIuaGFzKGUpIHx8ICh0aGlzLl9pbm5lci5hZGQoZSksICExKTsKICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRoaXMuX2lubmVyLmxlbmd0aDsgdCsrKQogICAgICAgICAgaWYgKHRoaXMuX2lubmVyW3RdID09PSBlKSByZXR1cm4gITA7CiAgICAgICAgcmV0dXJuIHRoaXMuX2lubmVyLnB1c2goZSksICExOwogICAgICB9KSwKICAgICAgKF9uLnByb3RvdHlwZS51bm1lbW9pemUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICh0aGlzLl9oYXNXZWFrU2V0KSB0aGlzLl9pbm5lci5kZWxldGUoZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLl9pbm5lci5sZW5ndGg7IHQrKykKICAgICAgICAgICAgaWYgKHRoaXMuX2lubmVyW3RdID09PSBlKSB7CiAgICAgICAgICAgICAgdGhpcy5faW5uZXIuc3BsaWNlKHQsIDEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgIH0pLAogICAgICBfbik7CgogIGZ1bmN0aW9uIF9uKCkgewogICAgKHRoaXMuX2hhc1dlYWtTZXQgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBXZWFrU2V0KSwKICAgICAgKHRoaXMuX2lubmVyID0gdGhpcy5faGFzV2Vha1NldCA/IG5ldyBXZWFrU2V0KCkgOiBbXSk7CiAgfQoKICB2YXIgYm4gPSAiPGFub255bW91cz4iOwoKICBmdW5jdGlvbiB3bihlKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gZSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBlID8gZS5uYW1lIHx8IGJuIDogYm47CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiBibjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIFNuKGUpIHsKICAgIHJldHVybiAoU24gPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIGZ1bmN0aW9uIEVuKGUsIHQsIG4pIHsKICAgIGlmICh0IGluIGUpIHsKICAgICAgdmFyIHIgPSBlW3RdLAogICAgICAgIG4gPSBuKHIpOwogICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgbikKICAgICAgICB0cnkgewogICAgICAgICAgKG4ucHJvdG90eXBlID0gbi5wcm90b3R5cGUgfHwge30pLAogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhuLCB7CiAgICAgICAgICAgICAgX19zZW50cnlfb3JpZ2luYWxfXzogewogICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITEsCiAgICAgICAgICAgICAgICB2YWx1ZTogciwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICBlW3RdID0gbjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHhuKGUpIHsKICAgIGlmIChQdChlKSkgewogICAgICB2YXIgdCwKICAgICAgICBuID0gZSwKICAgICAgICByID0geyBtZXNzYWdlOiBuLm1lc3NhZ2UsIG5hbWU6IG4ubmFtZSwgc3RhY2s6IG4uc3RhY2sgfTsKICAgICAgZm9yICh0IGluIG4pIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLCB0KSAmJiAoclt0XSA9IG5bdF0pOwogICAgICByZXR1cm4gcjsKICAgIH0KICAgIGlmIChGdChlKSkgewogICAgICB2YXIgaSwKICAgICAgICBvID0gZSwKICAgICAgICBhID0ge307CiAgICAgIGEudHlwZSA9IG8udHlwZTsKICAgICAgdHJ5IHsKICAgICAgICBhLnRhcmdldCA9IEJ0KG8udGFyZ2V0KQogICAgICAgICAgPyBXdChvLnRhcmdldCkKICAgICAgICAgIDogT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8udGFyZ2V0KTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGEudGFyZ2V0ID0gIjx1bmtub3duPiI7CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBhLmN1cnJlbnRUYXJnZXQgPSBCdChvLmN1cnJlbnRUYXJnZXQpCiAgICAgICAgICA/IFd0KG8uY3VycmVudFRhcmdldCkKICAgICAgICAgIDogT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8uY3VycmVudFRhcmdldCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBhLmN1cnJlbnRUYXJnZXQgPSAiPHVua25vd24+IjsKICAgICAgfQogICAgICBmb3IgKGkgaW4gKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBDdXN0b21FdmVudCAmJgogICAgICAgIHp0KGUsIEN1c3RvbUV2ZW50KSAmJgogICAgICAgIChhLmRldGFpbCA9IG8uZGV0YWlsKSwKICAgICAgbykpCiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGkpICYmIChhW2ldID0gb1tpXSk7CiAgICAgIHJldHVybiBhOwogICAgfQogICAgcmV0dXJuIGU7CiAgfQoKICBmdW5jdGlvbiBrbihlKSB7CiAgICByZXR1cm4gKGUgPSBKU09OLnN0cmluZ2lmeShlKSksIH4tZW5jb2RlVVJJKGUpLnNwbGl0KC8lLi58Li8pLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIE9uKGUsIHQpIHsKICAgIHJldHVybiAiZG9tYWluIiA9PT0gdCAmJiBlICYmICJvYmplY3QiID09PSBTbihlKSAmJiBlLl9ldmVudHMKICAgICAgPyAiW0RvbWFpbl0iCiAgICAgIDogImRvbWFpbkVtaXR0ZXIiID09PSB0CiAgICAgID8gIltEb21haW5FbWl0dGVyXSIKICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZ2xvYmFsICYmIGUgPT09IGdsb2JhbAogICAgICA/ICJbR2xvYmFsXSIKICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmIGUgPT09IHdpbmRvdwogICAgICA/ICJbV2luZG93XSIKICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZG9jdW1lbnQgJiYgZSA9PT0gZG9jdW1lbnQKICAgICAgPyAiW0RvY3VtZW50XSIKICAgICAgOiBVdCgodCA9IGUpKSAmJgogICAgICAgICJuYXRpdmVFdmVudCIgaW4gdCAmJgogICAgICAgICJwcmV2ZW50RGVmYXVsdCIgaW4gdCAmJgogICAgICAgICJzdG9wUHJvcGFnYXRpb24iIGluIHQKICAgICAgPyAiW1N5bnRoZXRpY0V2ZW50XSIKICAgICAgOiAibnVtYmVyIiA9PSB0eXBlb2YgZSAmJiBlICE9IGUKICAgICAgPyAiW05hTl0iCiAgICAgIDogdm9pZCAwID09PSBlCiAgICAgID8gIlt1bmRlZmluZWRdIgogICAgICA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUKICAgICAgPyAiW0Z1bmN0aW9uOiAiICsgd24oZSkgKyAiXSIKICAgICAgOiAic3ltYm9sIiA9PT0gU24oZSkKICAgICAgPyAiWyIgKyBTdHJpbmcoZSkgKyAiXSIKICAgICAgOiAiYmlnaW50IiA9PSB0eXBlb2YgZQogICAgICA/ICJbQmlnSW50OiAiICsgU3RyaW5nKGUpICsgIl0iCiAgICAgIDogZTsKICB9CgogIGZ1bmN0aW9uIFRuKGUsIHQsIG4sIHIpIHsKICAgIGlmICgodm9pZCAwID09PSBuICYmIChuID0gMSAvIDApLCB2b2lkIDAgPT09IHIgJiYgKHIgPSBuZXcgZ24oKSksIDAgPT09IG4pKQogICAgICByZXR1cm4gKAogICAgICAgIChpID0gdCksCiAgICAgICAgKG8gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaSkpLAogICAgICAgICJzdHJpbmciID09IHR5cGVvZiBpCiAgICAgICAgICA/IGkKICAgICAgICAgIDogIltvYmplY3QgT2JqZWN0XSIgPT09IG8KICAgICAgICAgID8gIltPYmplY3RdIgogICAgICAgICAgOiAiW29iamVjdCBBcnJheV0iID09PSBvCiAgICAgICAgICA/ICJbQXJyYXldIgogICAgICAgICAgOiBNdCgoaSA9IE9uKGkpKSkKICAgICAgICAgID8gaQogICAgICAgICAgOiBvCiAgICAgICk7CiAgICB2YXIgaSwgbzsKICAgIGlmIChudWxsICE9IHQgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC50b0pTT04pIHJldHVybiB0LnRvSlNPTigpOwogICAgZSA9IE9uKHQsIGUpOwogICAgaWYgKE10KGUpKSByZXR1cm4gZTsKICAgIHZhciBhLAogICAgICBzID0geG4odCksCiAgICAgIGMgPSBBcnJheS5pc0FycmF5KHQpID8gW10gOiB7fTsKICAgIGlmIChyLm1lbW9pemUodCkpIHJldHVybiAiW0NpcmN1bGFyIH5dIjsKICAgIGZvciAoYSBpbiBzKQogICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgYSkgJiYKICAgICAgICAoY1thXSA9IFRuKGEsIHNbYV0sIG4gLSAxLCByKSk7CiAgICByZXR1cm4gci51bm1lbW9pemUodCksIGM7CiAgfQoKICBmdW5jdGlvbiBJbihlLCBuKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gSlNPTi5wYXJzZSgKICAgICAgICBKU09OLnN0cmluZ2lmeShlLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIFRuKGUsIHQsIG4pOwogICAgICAgIH0pCiAgICAgICk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiAiKipub24tc2VyaWFsaXphYmxlKioiOwogICAgfQogIH0KCiAgZnVuY3Rpb24gQ24oZSkgewogICAgdmFyIHQsIG47CiAgICBpZiAoVXQoZSkpIHsKICAgICAgdmFyIHIgPSBlLAogICAgICAgIGkgPSB7fTsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHZhciBvID0ganQoT2JqZWN0LmtleXMocikpLCBhID0gby5uZXh0KCk7ICFhLmRvbmU7IGEgPSBvLm5leHQoKSkgewogICAgICAgICAgdmFyIHMgPSBhLnZhbHVlOwogICAgICAgICAgdm9pZCAwICE9PSByW3NdICYmIChpW3NdID0gQ24ocltzXSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHQgPSB7IGVycm9yOiBlIH07CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGEgJiYgIWEuZG9uZSAmJiAobiA9IG8ucmV0dXJuKSAmJiBuLmNhbGwobyk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmICh0KSB0aHJvdyB0LmVycm9yOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gaTsKICAgIH0KICAgIHJldHVybiBBcnJheS5pc0FycmF5KGUpID8gZS5tYXAoQ24pIDogZTsKICB9CgogIGZ1bmN0aW9uIGpuKCkgewogICAgaWYgKCJmZXRjaCIgaW4gc24oKSkKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gbmV3IEhlYWRlcnMoKSwgbmV3IFJlcXVlc3QoIiIpLCBuZXcgUmVzcG9uc2UoKSwgMTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogIH0KCiAgZnVuY3Rpb24gQW4oZSkgewogICAgcmV0dXJuICgKICAgICAgZSAmJiAvXmZ1bmN0aW9uIGZldGNoXChcKVxzK1x7XHMrXFtuYXRpdmUgY29kZVxdXHMrXH0kLy50ZXN0KGUudG9TdHJpbmcoKSkKICAgICk7CiAgfQoKICB2YXIgUm4sCiAgICBEbiA9IHNuKCksCiAgICBQbiA9IHt9LAogICAgTm4gPSB7fTsKCiAgZnVuY3Rpb24gTG4oZSkgewogICAgdmFyIHIsIGEsIHMsIGMsIHQ7CiAgICBpZiAoIU5uW2VdKQogICAgICBzd2l0Y2ggKCgoTm5bZV0gPSAhMCksIGUpKSB7CiAgICAgICAgY2FzZSAiY29uc29sZSI6CiAgICAgICAgICAiY29uc29sZSIgaW4gRG4gJiYKICAgICAgICAgICAgWyJkZWJ1ZyIsICJpbmZvIiwgIndhcm4iLCAiZXJyb3IiLCAibG9nIiwgImFzc2VydCJdLmZvckVhY2goCiAgICAgICAgICAgICAgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgIHIgaW4gRG4uY29uc29sZSAmJgogICAgICAgICAgICAgICAgICBFbihEbi5jb25zb2xlLCByLCBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKQogICAgICAgICAgICAgICAgICAgICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgICAgICAgTW4oImNvbnNvbGUiLCB7IGFyZ3M6IGUsIGxldmVsOiByIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBuICYmIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKG4sIERuLmNvbnNvbGUsIGUpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImRvbSI6CiAgICAgICAgICAiZG9jdW1lbnQiIGluIERuICYmCiAgICAgICAgICAgICgoYyA9IE1uLmJpbmQobnVsbCwgImRvbSIpKSwKICAgICAgICAgICAgKHQgPSBCbihjLCAhMCkpLAogICAgICAgICAgICBEbi5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIHQsICExKSwKICAgICAgICAgICAgRG4uZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5cHJlc3MiLCB0LCAhMSksCiAgICAgICAgICAgIFsiRXZlbnRUYXJnZXQiLCAiTm9kZSJdLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBlID0gRG5bZV0gJiYgRG5bZV0ucHJvdG90eXBlOwogICAgICAgICAgICAgIGUgJiYKICAgICAgICAgICAgICAgIGUuaGFzT3duUHJvcGVydHkgJiYKICAgICAgICAgICAgICAgIGUuaGFzT3duUHJvcGVydHkoImFkZEV2ZW50TGlzdGVuZXIiKSAmJgogICAgICAgICAgICAgICAgKEVuKGUsICJhZGRFdmVudExpc3RlbmVyIiwgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJjbGljayIgPT09IGUgfHwgImtleXByZXNzIiA9PSBlKQogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9ICh0aGlzLl9fc2VudHJ5X2luc3RydW1lbnRhdGlvbl9oYW5kbGVyc19fID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX19zZW50cnlfaW5zdHJ1bWVudGF0aW9uX2hhbmRsZXJzX18gfHwge30pLAogICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSAoaVtlXSA9IGlbZV0gfHwgeyByZWZDb3VudDogMCB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgby5oYW5kbGVyIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgKChyID0gQm4oYykpLCAoby5oYW5kbGVyID0gciksIGEuY2FsbCh0aGlzLCBlLCByLCBuKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKG8ucmVmQ291bnQgKz0gMSk7CiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmNhbGwodGhpcywgZSwgdCwgbik7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIEVuKGUsICJyZW1vdmVFdmVudExpc3RlbmVyIiwgZnVuY3Rpb24gKG8pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJjbGljayIgPT09IGUgfHwgImtleXByZXNzIiA9PSBlKQogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLl9fc2VudHJ5X2luc3RydW1lbnRhdGlvbl9oYW5kbGVyc19fIHx8IHt9LAogICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSByW2VdOwogICAgICAgICAgICAgICAgICAgICAgICBpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgKC0taS5yZWZDb3VudCwKICAgICAgICAgICAgICAgICAgICAgICAgICBpLnJlZkNvdW50IDw9IDAgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvLmNhbGwodGhpcywgZSwgaS5oYW5kbGVyLCBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLmhhbmRsZXIgPSB2b2lkIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHJbZV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT09IE9iamVjdC5rZXlzKHIpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX19zZW50cnlfaW5zdHJ1bWVudGF0aW9uX2hhbmRsZXJzX18pOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5jYWxsKHRoaXMsIGUsIHQsIG4pOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJ4aHIiOgogICAgICAgICAgIlhNTEh0dHBSZXF1ZXN0IiBpbiBEbiAmJgogICAgICAgICAgICAoKGEgPSBbXSksCiAgICAgICAgICAgIChzID0gW10pLAogICAgICAgICAgICBFbigodCA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSksICJvcGVuIiwgZnVuY3Rpb24gKG8pIHsKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IFtdLCBlID0gMDsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykKICAgICAgICAgICAgICAgICAgbltlXSA9IGFyZ3VtZW50c1tlXTsKICAgICAgICAgICAgICAgIHZhciByID0gdGhpcywKICAgICAgICAgICAgICAgICAgdCA9IG5bMV07CiAgICAgICAgICAgICAgICAoci5fX3NlbnRyeV94aHJfXyA9IHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiBxdChuWzBdKSA/IG5bMF0udG9VcHBlckNhc2UoKSA6IG5bMF0sCiAgICAgICAgICAgICAgICAgIHVybDogblsxXSwKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBxdCh0KSAmJgogICAgICAgICAgICAgICAgICAgICJQT1NUIiA9PT0gci5fX3NlbnRyeV94aHJfXy5tZXRob2QgJiYKICAgICAgICAgICAgICAgICAgICB0Lm1hdGNoKC9zZW50cnlfa2V5LykgJiYKICAgICAgICAgICAgICAgICAgICAoci5fX3NlbnRyeV9vd25fcmVxdWVzdF9fID0gITApOwoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGkoKSB7CiAgICAgICAgICAgICAgICAgIGlmICg0ID09PSByLnJlYWR5U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgci5fX3NlbnRyeV94aHJfXyAmJgogICAgICAgICAgICAgICAgICAgICAgICAoci5fX3NlbnRyeV94aHJfXy5zdGF0dXNfY29kZSA9IHIuc3RhdHVzKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGEuaW5kZXhPZihyKTsKICAgICAgICAgICAgICAgICAgICAgIC0xICE9PSB0ICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChhLnNwbGljZSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBzLnNwbGljZSh0KVswXSksCiAgICAgICAgICAgICAgICAgICAgICAgIHIuX19zZW50cnlfeGhyX18gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGVbMF0gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAoci5fX3NlbnRyeV94aHJfXy5ib2R5ID0gZVswXSkpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgTW4oInhociIsIHsKICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IG4sCiAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lc3RhbXA6IERhdGUubm93KCksCiAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICAgIHhocjogciwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICJvbnJlYWR5c3RhdGVjaGFuZ2UiIGluIHIgJiYKICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2Ygci5vbnJlYWR5c3RhdGVjaGFuZ2UKICAgICAgICAgICAgICAgICAgICA/IEVuKHIsICJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpKCksIG4uYXBwbHkociwgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIDogci5hZGRFdmVudExpc3RlbmVyKCJyZWFkeXN0YXRlY2hhbmdlIiwgaSksCiAgICAgICAgICAgICAgICAgIG8uYXBwbHkociwgbikKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIEVuKHQsICJzZW5kIiwgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykKICAgICAgICAgICAgICAgICAgZVt0XSA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIGEucHVzaCh0aGlzKSwKICAgICAgICAgICAgICAgICAgcy5wdXNoKGUpLAogICAgICAgICAgICAgICAgICBNbigieGhyIiwgewogICAgICAgICAgICAgICAgICAgIGFyZ3M6IGUsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXA6IERhdGUubm93KCksCiAgICAgICAgICAgICAgICAgICAgeGhyOiB0aGlzLAogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgbi5hcHBseSh0aGlzLCBlKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJmZXRjaCI6CiAgICAgICAgICAhKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGpuKCkpIHsKICAgICAgICAgICAgICB2YXIgZSA9IHNuKCk7CiAgICAgICAgICAgICAgaWYgKEFuKGUuZmV0Y2gpKSByZXR1cm4gMTsKICAgICAgICAgICAgICB2YXIgdCA9ICExLAogICAgICAgICAgICAgICAgZSA9IGUuZG9jdW1lbnQ7CiAgICAgICAgICAgICAgaWYgKGUgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZS5jcmVhdGVFbGVtZW50KQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwogICAgICAgICAgICAgICAgICAobi5oaWRkZW4gPSAhMCksCiAgICAgICAgICAgICAgICAgICAgZS5oZWFkLmFwcGVuZENoaWxkKG4pLAogICAgICAgICAgICAgICAgICAgIG4uY29udGVudFdpbmRvdyAmJgogICAgICAgICAgICAgICAgICAgICAgbi5jb250ZW50V2luZG93LmZldGNoICYmCiAgICAgICAgICAgICAgICAgICAgICAodCA9IEFuKG4uY29udGVudFdpbmRvdy5mZXRjaCkpLAogICAgICAgICAgICAgICAgICAgIGUuaGVhZC5yZW1vdmVDaGlsZChuKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgeW4ud2FybigKICAgICAgICAgICAgICAgICAgICAiQ291bGQgbm90IGNyZWF0ZSBzYW5kYm94IGlmcmFtZSBmb3IgcHVyZSBmZXRjaCBjaGVjaywgYmFpbGluZyB0byB3aW5kb3cuZmV0Y2g6ICIsCiAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSgpIHx8CiAgICAgICAgICAgIEVuKERuLCAiZmV0Y2giLCBmdW5jdGlvbiAocikgewogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKQogICAgICAgICAgICAgICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgdmFyIG4gPSB7CiAgICAgICAgICAgICAgICAgIGFyZ3M6IGUsCiAgICAgICAgICAgICAgICAgIGZldGNoRGF0YTogewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBbXSk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIlJlcXVlc3QiIGluIERuICYmIHp0KGVbMF0sIFJlcXVlc3QpICYmIGVbMF0ubWV0aG9kKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKGVbMF0ubWV0aG9kKS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGVbMV0gJiYgZVsxXS5tZXRob2QpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcoZVsxXS5tZXRob2QpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkdFVCI7CiAgICAgICAgICAgICAgICAgICAgfSkoZSksCiAgICAgICAgICAgICAgICAgICAgdXJsOiAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IFtdKTsKICAgICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZVswXSkgcmV0dXJuIGVbMF07CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIlJlcXVlc3QiIGluIERuICYmIHp0KGVbMF0sIFJlcXVlc3QpKSByZXR1cm4gZVswXS51cmw7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKGVbMF0pOwogICAgICAgICAgICAgICAgICAgIH0pKGUpLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzdGFydFRpbWVzdGFtcDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICBNbigiZmV0Y2giLCBJdCh7fSwgbikpLAogICAgICAgICAgICAgICAgICByLmFwcGx5KERuLCBlKS50aGVuKAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICBNbigKICAgICAgICAgICAgICAgICAgICAgICAgICAiZmV0Y2giLAogICAgICAgICAgICAgICAgICAgICAgICAgIEl0KEl0KHt9LCBuKSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZXN0YW1wOiBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoCiAgICAgICAgICAgICAgICAgICAgICAgIChNbigKICAgICAgICAgICAgICAgICAgICAgICAgICAiZmV0Y2giLAogICAgICAgICAgICAgICAgICAgICAgICAgIEl0KEl0KHt9LCBuKSwgeyBlbmRUaW1lc3RhbXA6IERhdGUubm93KCksIGVycm9yOiBlIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIGUpCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImhpc3RvcnkiOgogICAgICAgICAgIShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlID0gc24oKSwKICAgICAgICAgICAgICB0ID0gKHQgPSBlLmNocm9tZSkgJiYgdC5hcHAgJiYgdC5hcHAucnVudGltZSwKICAgICAgICAgICAgICBlID0KICAgICAgICAgICAgICAgICJoaXN0b3J5IiBpbiBlICYmCiAgICAgICAgICAgICAgICAhIWUuaGlzdG9yeS5wdXNoU3RhdGUgJiYKICAgICAgICAgICAgICAgICEhZS5oaXN0b3J5LnJlcGxhY2VTdGF0ZTsKICAgICAgICAgICAgcmV0dXJuICF0ICYmIGU7CiAgICAgICAgICB9KSgpIHx8CiAgICAgICAgICAgICgociA9IERuLm9ucG9wc3RhdGUpLAogICAgICAgICAgICAoRG4ub25wb3BzdGF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKQogICAgICAgICAgICAgICAgZVt0XSA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgICB2YXIgbiA9IERuLmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgICAgaWYgKChNbigiaGlzdG9yeSIsIHsgZnJvbTogUm4sIHRvOiAoUm4gPSBuKSB9KSwgcikpCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICByZXR1cm4gci5hcHBseSh0aGlzLCBlKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBFbihEbi5oaXN0b3J5LCAicHVzaFN0YXRlIiwgbiksCiAgICAgICAgICAgIEVuKERuLmhpc3RvcnksICJyZXBsYWNlU3RhdGUiLCBuKSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJlcnJvciI6CiAgICAgICAgICAoSG4gPSBEbi5vbmVycm9yKSwKICAgICAgICAgICAgKERuLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSwgdCwgbiwgciwgaSkgewogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBNbigiZXJyb3IiLCB7IGNvbHVtbjogciwgZXJyb3I6IGksIGxpbmU6IG4sIG1zZzogZSwgdXJsOiB0IH0pLAogICAgICAgICAgICAgICAgISFIbiAmJiBIbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJ1bmhhbmRsZWRyZWplY3Rpb24iOgogICAgICAgICAgKFduID0gRG4ub251bmhhbmRsZWRyZWplY3Rpb24pLAogICAgICAgICAgICAoRG4ub251bmhhbmRsZWRyZWplY3Rpb24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBNbigidW5oYW5kbGVkcmVqZWN0aW9uIiwgZSksICFXbiB8fCBXbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgeW4ud2FybigidW5rbm93biBpbnN0cnVtZW50YXRpb24gdHlwZToiLCBlKTsKICAgICAgfQoKICAgIGZ1bmN0aW9uIG4oaSkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgdmFyIG4sCiAgICAgICAgICByID0gMiA8IGUubGVuZ3RoID8gZVsyXSA6IHZvaWQgMDsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgciAmJgogICAgICAgICAgICAoKG4gPSBSbiksCiAgICAgICAgICAgIChyID0gU3RyaW5nKHIpKSwKICAgICAgICAgICAgTW4oImhpc3RvcnkiLCB7IGZyb206IG4sIHRvOiAoUm4gPSByKSB9KSksCiAgICAgICAgICBpLmFwcGx5KHRoaXMsIGUpCiAgICAgICAgKTsKICAgICAgfTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHFuKGUpIHsKICAgIGUgJiYKICAgICAgInN0cmluZyIgPT0gdHlwZW9mIGUudHlwZSAmJgogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBlLmNhbGxiYWNrICYmCiAgICAgICgoUG5bZS50eXBlXSA9IFBuW2UudHlwZV0gfHwgW10pLAogICAgICBQbltlLnR5cGVdLnB1c2goZS5jYWxsYmFjayksCiAgICAgIExuKGUudHlwZSkpOwogIH0KCiAgZnVuY3Rpb24gTW4odCwgZSkgewogICAgdmFyIG4sIHI7CiAgICBpZiAodCAmJiBQblt0XSkKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKHZhciBpID0ganQoUG5bdF0gfHwgW10pLCBvID0gaS5uZXh0KCk7ICFvLmRvbmU7IG8gPSBpLm5leHQoKSkgewogICAgICAgICAgdmFyIGEgPSBvLnZhbHVlOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgYShlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgeW4uZXJyb3IoCiAgICAgICAgICAgICAgIkVycm9yIHdoaWxlIHRyaWdnZXJpbmcgaW5zdHJ1bWVudGF0aW9uIGhhbmRsZXIuXG5UeXBlOiAiICsKICAgICAgICAgICAgICAgIHQgKwogICAgICAgICAgICAgICAgIlxuTmFtZTogIiArCiAgICAgICAgICAgICAgICB3bihhKSArCiAgICAgICAgICAgICAgICAiXG5FcnJvcjogIiArCiAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgbiA9IHsgZXJyb3I6IGUgfTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgbyAmJiAhby5kb25lICYmIChyID0gaS5yZXR1cm4pICYmIHIuY2FsbChpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgaWYgKG4pIHRocm93IG4uZXJyb3I7CiAgICAgICAgfQogICAgICB9CiAgfQoKICB2YXIgVW4sIEZuOwoKICBmdW5jdGlvbiBCbihuLCByKSB7CiAgICByZXR1cm4gKAogICAgICB2b2lkIDAgPT09IHIgJiYgKHIgPSAhMSksCiAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQ7CiAgICAgICAgZSAmJgogICAgICAgICAgRm4gIT09IGUgJiYKICAgICAgICAgICEoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKCJrZXlwcmVzcyIgPT09IGUudHlwZSkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgaWYgKCF0IHx8ICF0LnRhZ05hbWUpIHJldHVybiAxOwogICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAiSU5QVVQiID09PSB0LnRhZ05hbWUgfHwKICAgICAgICAgICAgICAgICAgIlRFWFRBUkVBIiA9PT0gdC50YWdOYW1lIHx8CiAgICAgICAgICAgICAgICAgIHQuaXNDb250ZW50RWRpdGFibGUKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKGUpICYmCiAgICAgICAgICAoKHQgPSAia2V5cHJlc3MiID09PSBlLnR5cGUgPyAiaW5wdXQiIDogZS50eXBlKSwKICAgICAgICAgICh2b2lkIDAgIT09IFVuICYmCiAgICAgICAgICAgICEoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICBpZiAoIWUpIHJldHVybiAxOwogICAgICAgICAgICAgIGlmIChlLnR5cGUgIT09IHQudHlwZSkgcmV0dXJuIDE7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCAhPT0gdC50YXJnZXQpIHJldHVybiAxOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIH0pKEZuLCBlKSkgfHwKICAgICAgICAgICAgKG4oeyBldmVudDogZSwgbmFtZTogdCwgZ2xvYmFsOiByIH0pLCAoRm4gPSBlKSksCiAgICAgICAgICBjbGVhclRpbWVvdXQoVW4pLAogICAgICAgICAgKFVuID0gRG4uc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIFVuID0gdm9pZCAwOwogICAgICAgICAgfSwgMWUzKSkpOwogICAgICB9CiAgICApOwogIH0KCiAgdmFyIEhuID0gbnVsbDsKICB2YXIgem4sCiAgICBXbiA9IG51bGw7CiAgKChSID0gem4gPSB6biB8fCB7fSkuUEVORElORyA9ICJQRU5ESU5HIiksCiAgICAoUi5SRVNPTFZFRCA9ICJSRVNPTFZFRCIpLAogICAgKFIuUkVKRUNURUQgPSAiUkVKRUNURUQiKTsKICB2YXIgWW4gPQogICAgKChWbi5yZXNvbHZlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIG5ldyBWbihmdW5jdGlvbiAoZSkgewogICAgICAgIGUodCk7CiAgICAgIH0pOwogICAgfSksCiAgICAoVm4ucmVqZWN0ID0gZnVuY3Rpb24gKG4pIHsKICAgICAgcmV0dXJuIG5ldyBWbihmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHQobik7CiAgICAgIH0pOwogICAgfSksCiAgICAoVm4uYWxsID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIG5ldyBWbihmdW5jdGlvbiAobiwgcikgewogICAgICAgIHZhciBpLCBvOwogICAgICAgIEFycmF5LmlzQXJyYXkoZSkKICAgICAgICAgID8gMCAhPT0gZS5sZW5ndGgKICAgICAgICAgICAgPyAoKGkgPSBlLmxlbmd0aCksCiAgICAgICAgICAgICAgKG8gPSBbXSksCiAgICAgICAgICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICBWbi5yZXNvbHZlKGUpCiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgKG9bdF0gPSBlKSwgMCA9PT0gLS1pICYmIG4obyk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC50aGVuKG51bGwsIHIpOwogICAgICAgICAgICAgIH0pKQogICAgICAgICAgICA6IG4oW10pCiAgICAgICAgICA6IHIobmV3IFR5cGVFcnJvcigiUHJvbWlzZS5hbGwgcmVxdWlyZXMgYW4gYXJyYXkgYXMgaW5wdXQuIikpOwogICAgICB9KTsKICAgIH0pLAogICAgKFZuLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKHIsIGkpIHsKICAgICAgdmFyIGUgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFZuKGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgZS5fYXR0YWNoSGFuZGxlcih7CiAgICAgICAgICBkb25lOiAhMSwKICAgICAgICAgIG9uZnVsZmlsbGVkOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAocikKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgdChyKGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCBuKGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB0KGUpOwogICAgICAgICAgfSwKICAgICAgICAgIG9ucmVqZWN0ZWQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChpKQogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCB0KGkoZSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIG4oZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIG4oZSk7CiAgICAgICAgICB9LAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pLAogICAgKFZuLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfSwgZSk7CiAgICB9KSwKICAgIChWbi5wcm90b3R5cGUuZmluYWxseSA9IGZ1bmN0aW9uIChpKSB7CiAgICAgIHZhciBvID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBWbihmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuLCByOwogICAgICAgIHJldHVybiBvCiAgICAgICAgICAudGhlbigKICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAociA9ICExKSwgKG4gPSBlKSwgaSAmJiBpKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgKHIgPSAhMCksIChuID0gZSksIGkgJiYgaSgpOwogICAgICAgICAgICB9CiAgICAgICAgICApCiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIChyID8gdCA6IGUpKG4pOwogICAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSksCiAgICAoVm4ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gIltvYmplY3QgU3luY1Byb21pc2VdIjsKICAgIH0pLAogICAgVm4pOwoKICBmdW5jdGlvbiBWbihlKSB7CiAgICB2YXIgbiA9IHRoaXM7CiAgICAodGhpcy5fc3RhdGUgPSB6bi5QRU5ESU5HKSwKICAgICAgKHRoaXMuX2hhbmRsZXJzID0gW10pLAogICAgICAodGhpcy5fcmVzb2x2ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgbi5fc2V0UmVzdWx0KHpuLlJFU09MVkVELCBlKTsKICAgICAgfSksCiAgICAgICh0aGlzLl9yZWplY3QgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIG4uX3NldFJlc3VsdCh6bi5SRUpFQ1RFRCwgZSk7CiAgICAgIH0pLAogICAgICAodGhpcy5fc2V0UmVzdWx0ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBuLl9zdGF0ZSA9PT0gem4uUEVORElORyAmJgogICAgICAgICAgKEh0KHQpCiAgICAgICAgICAgID8gdC50aGVuKG4uX3Jlc29sdmUsIG4uX3JlamVjdCkKICAgICAgICAgICAgOiAoKG4uX3N0YXRlID0gZSksIChuLl92YWx1ZSA9IHQpLCBuLl9leGVjdXRlSGFuZGxlcnMoKSkpOwogICAgICB9KSwKICAgICAgKHRoaXMuX2F0dGFjaEhhbmRsZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIChuLl9oYW5kbGVycyA9IG4uX2hhbmRsZXJzLmNvbmNhdChlKSksIG4uX2V4ZWN1dGVIYW5kbGVycygpOwogICAgICB9KSwKICAgICAgKHRoaXMuX2V4ZWN1dGVIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZTsKICAgICAgICBuLl9zdGF0ZSAhPT0gem4uUEVORElORyAmJgogICAgICAgICAgKChlID0gbi5faGFuZGxlcnMuc2xpY2UoKSksCiAgICAgICAgICAobi5faGFuZGxlcnMgPSBbXSksCiAgICAgICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5kb25lIHx8CiAgICAgICAgICAgICAgKG4uX3N0YXRlID09PSB6bi5SRVNPTFZFRCAmJgogICAgICAgICAgICAgICAgZS5vbmZ1bGZpbGxlZCAmJgogICAgICAgICAgICAgICAgZS5vbmZ1bGZpbGxlZChuLl92YWx1ZSksCiAgICAgICAgICAgICAgbi5fc3RhdGUgPT09IHpuLlJFSkVDVEVEICYmCiAgICAgICAgICAgICAgICBlLm9ucmVqZWN0ZWQgJiYKICAgICAgICAgICAgICAgIGUub25yZWplY3RlZChuLl92YWx1ZSksCiAgICAgICAgICAgICAgKGUuZG9uZSA9ICEwKSk7CiAgICAgICAgICB9KSk7CiAgICAgIH0pOwogICAgdHJ5IHsKICAgICAgZSh0aGlzLl9yZXNvbHZlLCB0aGlzLl9yZWplY3QpOwogICAgfSBjYXRjaCAoZSkgewogICAgICB0aGlzLl9yZWplY3QoZSk7CiAgICB9CiAgfQoKICB2YXIgR24gPQogICAgKChKbi5wcm90b3R5cGUuaXNSZWFkeSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy5fbGltaXQgfHwgdGhpcy5sZW5ndGgoKSA8IHRoaXMuX2xpbWl0OwogICAgfSksCiAgICAoSm4ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gdGhpczsKICAgICAgaWYgKCF0aGlzLmlzUmVhZHkoKSkKICAgICAgICByZXR1cm4gWW4ucmVqZWN0KAogICAgICAgICAgbmV3IEd0KCJOb3QgYWRkaW5nIFByb21pc2UgZHVlIHRvIGJ1ZmZlciBsaW1pdCByZWFjaGVkLiIpCiAgICAgICAgKTsKICAgICAgdmFyIG4gPSBlKCk7CiAgICAgIHJldHVybiAoCiAgICAgICAgLTEgPT09IHRoaXMuX2J1ZmZlci5pbmRleE9mKG4pICYmIHRoaXMuX2J1ZmZlci5wdXNoKG4pLAogICAgICAgIG4KICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHQucmVtb3ZlKG4pOwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKG51bGwsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHQucmVtb3ZlKG4pLnRoZW4obnVsbCwgZnVuY3Rpb24gKCkge30pOwogICAgICAgICAgfSksCiAgICAgICAgbgogICAgICApOwogICAgfSksCiAgICAoSm4ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiB0aGlzLl9idWZmZXIuc3BsaWNlKHRoaXMuX2J1ZmZlci5pbmRleE9mKGUpLCAxKVswXTsKICAgIH0pLAogICAgKEpuLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLl9idWZmZXIubGVuZ3RoOwogICAgfSksCiAgICAoSm4ucHJvdG90eXBlLmRyYWluID0gZnVuY3Rpb24gKG4pIHsKICAgICAgdmFyIHIgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFluKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG4gJiYgMCA8IG4gJiYgZSghMSk7CiAgICAgICAgfSwgbik7CiAgICAgICAgWW4uYWxsKHIuX2J1ZmZlcikKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHQpLCBlKCEwKTsKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihudWxsLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGUoITApOwogICAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSksCiAgICBKbik7CgogIGZ1bmN0aW9uIEpuKGUpIHsKICAgICh0aGlzLl9saW1pdCA9IGUpLCAodGhpcy5fYnVmZmVyID0gW10pOwogIH0KCiAgeCA9IHsKICAgIG5vd1NlY29uZHM6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIERhdGUubm93KCkgLyAxZTM7CiAgICB9LAogIH07CiAgdmFyIFhuID0gKAogICAgICBadCgpCiAgICAgICAgPyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVuKG1vZHVsZSwgInBlcmZfaG9va3MiKS5wZXJmb3JtYW5jZTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZSA9IHNuKCkucGVyZm9ybWFuY2U7CiAgICAgICAgICAgIGlmIChlICYmIGUubm93KQogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBub3c6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubm93KCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdGltZU9yaWdpbjogRGF0ZS5ub3coKSAtIGUubm93KCksCiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICkoKSwKICAgIEtuID0KICAgICAgdm9pZCAwID09PSBYbgogICAgICAgID8geAogICAgICAgIDogewogICAgICAgICAgICBub3dTZWNvbmRzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIChYbi50aW1lT3JpZ2luICsgWG4ubm93KCkpIC8gMWUzOwogICAgICAgICAgICB9LAogICAgICAgICAgfSwKICAgICRuID0geC5ub3dTZWNvbmRzLmJpbmQoeCksCiAgICBRbiA9IEtuLm5vd1NlY29uZHMuYmluZChLbiksCiAgICBabiA9IFFuLAogICAgZXIgPSAoZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHNuKCkucGVyZm9ybWFuY2U7CiAgICAgIGlmIChlICYmIGUubm93KSB7CiAgICAgICAgdmFyIHQgPSBlLm5vdygpLAogICAgICAgICAgbiA9IERhdGUubm93KCksCiAgICAgICAgICByID0gZS50aW1lT3JpZ2luID8gTWF0aC5hYnMoZS50aW1lT3JpZ2luICsgdCAtIG4pIDogMzZlNSwKICAgICAgICAgIGkgPSByIDwgMzZlNSwKICAgICAgICAgIG8gPSBlLnRpbWluZyAmJiBlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQsCiAgICAgICAgICB0ID0gIm51bWJlciIgPT0gdHlwZW9mIG8gPyBNYXRoLmFicyhvICsgdCAtIG4pIDogMzZlNTsKICAgICAgICByZXR1cm4gaSB8fCB0IDwgMzZlNSA/IChyIDw9IHQgPyBlLnRpbWVPcmlnaW4gOiBvKSA6IG47CiAgICAgIH0KICAgIH0pKCksCiAgICB0ciA9CiAgICAgICgobnIuY2xvbmUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gbmV3IG5yKCk7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIGUgJiYKICAgICAgICAgICAgKCh0Ll9icmVhZGNydW1icyA9IFJ0KGUuX2JyZWFkY3J1bWJzKSksCiAgICAgICAgICAgICh0Ll90YWdzID0gSXQoe30sIGUuX3RhZ3MpKSwKICAgICAgICAgICAgKHQuX2V4dHJhID0gSXQoe30sIGUuX2V4dHJhKSksCiAgICAgICAgICAgICh0Ll9jb250ZXh0cyA9IEl0KHt9LCBlLl9jb250ZXh0cykpLAogICAgICAgICAgICAodC5fdXNlciA9IGUuX3VzZXIpLAogICAgICAgICAgICAodC5fbGV2ZWwgPSBlLl9sZXZlbCksCiAgICAgICAgICAgICh0Ll9zcGFuID0gZS5fc3BhbiksCiAgICAgICAgICAgICh0Ll9zZXNzaW9uID0gZS5fc2Vzc2lvbiksCiAgICAgICAgICAgICh0Ll90cmFuc2FjdGlvbk5hbWUgPSBlLl90cmFuc2FjdGlvbk5hbWUpLAogICAgICAgICAgICAodC5fZmluZ2VycHJpbnQgPSBlLl9maW5nZXJwcmludCksCiAgICAgICAgICAgICh0Ll9ldmVudFByb2Nlc3NvcnMgPSBSdChlLl9ldmVudFByb2Nlc3NvcnMpKSwKICAgICAgICAgICAgKHQuX3JlcXVlc3RTZXNzaW9uID0gZS5fcmVxdWVzdFNlc3Npb24pKSwKICAgICAgICAgIHQKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5hZGRTY29wZUxpc3RlbmVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB0aGlzLl9zY29wZUxpc3RlbmVycy5wdXNoKGUpOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5hZGRFdmVudFByb2Nlc3NvciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2V2ZW50UHJvY2Vzc29ycy5wdXNoKGUpLCB0aGlzOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5zZXRVc2VyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKHRoaXMuX3VzZXIgPSBlIHx8IHt9KSwKICAgICAgICAgIHRoaXMuX3Nlc3Npb24gJiYgdGhpcy5fc2Vzc2lvbi51cGRhdGUoeyB1c2VyOiBlIH0pLAogICAgICAgICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl91c2VyOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5nZXRSZXF1ZXN0U2Vzc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdFNlc3Npb247CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLnNldFJlcXVlc3RTZXNzaW9uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gKHRoaXMuX3JlcXVlc3RTZXNzaW9uID0gZSksIHRoaXM7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLnNldFRhZ3MgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAodGhpcy5fdGFncyA9IEl0KEl0KHt9LCB0aGlzLl90YWdzKSwgZSkpLAogICAgICAgICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5zZXRUYWcgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAodGhpcy5fdGFncyA9IEl0KEl0KHt9LCB0aGlzLl90YWdzKSwgKCgobiA9IHt9KVtlXSA9IHQpLCBuKSkpLAogICAgICAgICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5zZXRFeHRyYXMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAodGhpcy5fZXh0cmEgPSBJdChJdCh7fSwgdGhpcy5fZXh0cmEpLCBlKSksCiAgICAgICAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLAogICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLnNldEV4dHJhID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbjsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKHRoaXMuX2V4dHJhID0gSXQoSXQoe30sIHRoaXMuX2V4dHJhKSwgKCgobiA9IHt9KVtlXSA9IHQpLCBuKSkpLAogICAgICAgICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5zZXRGaW5nZXJwcmludCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICh0aGlzLl9maW5nZXJwcmludCA9IGUpLCB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLCB0aGlzOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5zZXRMZXZlbCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICh0aGlzLl9sZXZlbCA9IGUpLCB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLCB0aGlzOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5zZXRUcmFuc2FjdGlvbk5hbWUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAodGhpcy5fdHJhbnNhY3Rpb25OYW1lID0gZSksIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksIHRoaXM7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLnNldFRyYW5zYWN0aW9uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5zZXRUcmFuc2FjdGlvbk5hbWUoZSk7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLnNldENvbnRleHQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICBudWxsID09PSB0CiAgICAgICAgICAgID8gZGVsZXRlIHRoaXMuX2NvbnRleHRzW2VdCiAgICAgICAgICAgIDogKHRoaXMuX2NvbnRleHRzID0gSXQoCiAgICAgICAgICAgICAgICBJdCh7fSwgdGhpcy5fY29udGV4dHMpLAogICAgICAgICAgICAgICAgKCgobiA9IHt9KVtlXSA9IHQpLCBuKQogICAgICAgICAgICAgICkpLAogICAgICAgICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5zZXRTcGFuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gKHRoaXMuX3NwYW4gPSBlKSwgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwgdGhpczsKICAgICAgfSksCiAgICAgIChuci5wcm90b3R5cGUuZ2V0U3BhbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fc3BhbjsKICAgICAgfSksCiAgICAgIChuci5wcm90b3R5cGUuZ2V0VHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUsCiAgICAgICAgICB0ID0gdGhpcy5nZXRTcGFuKCk7CiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgdm9pZCAwICE9PSB0ICYmIHQudHJhbnNhY3Rpb24KICAgICAgICAgID8gbnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQKICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgOiB0LnRyYW5zYWN0aW9uCiAgICAgICAgICA6IG51bGwgIT09CiAgICAgICAgICAgICAgKGUgPSBudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuc3BhblJlY29yZGVyKSAmJgogICAgICAgICAgICB2b2lkIDAgIT09IGUgJiYKICAgICAgICAgICAgZS5zcGFuc1swXQogICAgICAgICAgPyB0LnNwYW5SZWNvcmRlci5zcGFuc1swXQogICAgICAgICAgOiB2b2lkIDA7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLnNldFNlc3Npb24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICBlID8gKHRoaXMuX3Nlc3Npb24gPSBlKSA6IGRlbGV0ZSB0aGlzLl9zZXNzaW9uLAogICAgICAgICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5nZXRTZXNzaW9uID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl9zZXNzaW9uOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICghZSkgcmV0dXJuIHRoaXM7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGUpCiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBlIGluc3RhbmNlb2YgbnIKICAgICAgICAgICAgICA/ICgodGhpcy5fdGFncyA9IEl0KEl0KHt9LCB0aGlzLl90YWdzKSwgZS5fdGFncykpLAogICAgICAgICAgICAgICAgKHRoaXMuX2V4dHJhID0gSXQoSXQoe30sIHRoaXMuX2V4dHJhKSwgZS5fZXh0cmEpKSwKICAgICAgICAgICAgICAgICh0aGlzLl9jb250ZXh0cyA9IEl0KEl0KHt9LCB0aGlzLl9jb250ZXh0cyksIGUuX2NvbnRleHRzKSksCiAgICAgICAgICAgICAgICBlLl91c2VyICYmCiAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGUuX3VzZXIpLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAodGhpcy5fdXNlciA9IGUuX3VzZXIpLAogICAgICAgICAgICAgICAgZS5fbGV2ZWwgJiYgKHRoaXMuX2xldmVsID0gZS5fbGV2ZWwpLAogICAgICAgICAgICAgICAgZS5fZmluZ2VycHJpbnQgJiYgKHRoaXMuX2ZpbmdlcnByaW50ID0gZS5fZmluZ2VycHJpbnQpLAogICAgICAgICAgICAgICAgZS5fcmVxdWVzdFNlc3Npb24gJiYgKHRoaXMuX3JlcXVlc3RTZXNzaW9uID0gZS5fcmVxdWVzdFNlc3Npb24pKQogICAgICAgICAgICAgIDogVXQoZSkgJiYKICAgICAgICAgICAgICAgICgodGhpcy5fdGFncyA9IEl0KEl0KHt9LCB0aGlzLl90YWdzKSwgZS50YWdzKSksCiAgICAgICAgICAgICAgICAodGhpcy5fZXh0cmEgPSBJdChJdCh7fSwgdGhpcy5fZXh0cmEpLCBlLmV4dHJhKSksCiAgICAgICAgICAgICAgICAodGhpcy5fY29udGV4dHMgPSBJdChJdCh7fSwgdGhpcy5fY29udGV4dHMpLCBlLmNvbnRleHRzKSksCiAgICAgICAgICAgICAgICBlLnVzZXIgJiYgKHRoaXMuX3VzZXIgPSBlLnVzZXIpLAogICAgICAgICAgICAgICAgZS5sZXZlbCAmJiAodGhpcy5fbGV2ZWwgPSBlLmxldmVsKSwKICAgICAgICAgICAgICAgIGUuZmluZ2VycHJpbnQgJiYgKHRoaXMuX2ZpbmdlcnByaW50ID0gZS5maW5nZXJwcmludCksCiAgICAgICAgICAgICAgICBlLnJlcXVlc3RTZXNzaW9uICYmICh0aGlzLl9yZXF1ZXN0U2Vzc2lvbiA9IGUucmVxdWVzdFNlc3Npb24pKSwKICAgICAgICAgICAgdGhpcwogICAgICAgICAgKTsKICAgICAgICBlID0gZSh0aGlzKTsKICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIG5yID8gZSA6IHRoaXM7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAodGhpcy5fYnJlYWRjcnVtYnMgPSBbXSksCiAgICAgICAgICAodGhpcy5fdGFncyA9IHt9KSwKICAgICAgICAgICh0aGlzLl9leHRyYSA9IHt9KSwKICAgICAgICAgICh0aGlzLl91c2VyID0ge30pLAogICAgICAgICAgKHRoaXMuX2NvbnRleHRzID0ge30pLAogICAgICAgICAgKHRoaXMuX2xldmVsID0gdm9pZCAwKSwKICAgICAgICAgICh0aGlzLl90cmFuc2FjdGlvbk5hbWUgPSB2b2lkIDApLAogICAgICAgICAgKHRoaXMuX2ZpbmdlcnByaW50ID0gdm9pZCAwKSwKICAgICAgICAgICh0aGlzLl9yZXF1ZXN0U2Vzc2lvbiA9IHZvaWQgMCksCiAgICAgICAgICAodGhpcy5fc3BhbiA9IHZvaWQgMCksCiAgICAgICAgICAodGhpcy5fc2Vzc2lvbiA9IHZvaWQgMCksCiAgICAgICAgICB0aGlzLl9ub3RpZnlTY29wZUxpc3RlbmVycygpLAogICAgICAgICAgdGhpcwogICAgICAgICk7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLmFkZEJyZWFkY3J1bWIgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHQgPSAibnVtYmVyIiA9PSB0eXBlb2YgdCA/IE1hdGgubWluKHQsIDEwMCkgOiAxMDA7CiAgICAgICAgaWYgKHQgPD0gMCkgcmV0dXJuIHRoaXM7CiAgICAgICAgZSA9IEl0KHsgdGltZXN0YW1wOiAkbigpIH0sIGUpOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAodGhpcy5fYnJlYWRjcnVtYnMgPSBSdCh0aGlzLl9icmVhZGNydW1icywgW2VdKS5zbGljZSgtdCkpLAogICAgICAgICAgdGhpcy5fbm90aWZ5U2NvcGVMaXN0ZW5lcnMoKSwKICAgICAgICAgIHRoaXMKICAgICAgICApOwogICAgICB9KSwKICAgICAgKG5yLnByb3RvdHlwZS5jbGVhckJyZWFkY3J1bWJzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAodGhpcy5fYnJlYWRjcnVtYnMgPSBbXSksIHRoaXMuX25vdGlmeVNjb3BlTGlzdGVuZXJzKCksIHRoaXM7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLmFwcGx5VG9FdmVudCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG47CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMuX2V4dHJhICYmCiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuX2V4dHJhKS5sZW5ndGggJiYKICAgICAgICAgICAgKGUuZXh0cmEgPSBJdChJdCh7fSwgdGhpcy5fZXh0cmEpLCBlLmV4dHJhKSksCiAgICAgICAgICB0aGlzLl90YWdzICYmCiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuX3RhZ3MpLmxlbmd0aCAmJgogICAgICAgICAgICAoZS50YWdzID0gSXQoSXQoe30sIHRoaXMuX3RhZ3MpLCBlLnRhZ3MpKSwKICAgICAgICAgIHRoaXMuX3VzZXIgJiYKICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5fdXNlcikubGVuZ3RoICYmCiAgICAgICAgICAgIChlLnVzZXIgPSBJdChJdCh7fSwgdGhpcy5fdXNlciksIGUudXNlcikpLAogICAgICAgICAgdGhpcy5fY29udGV4dHMgJiYKICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5fY29udGV4dHMpLmxlbmd0aCAmJgogICAgICAgICAgICAoZS5jb250ZXh0cyA9IEl0KEl0KHt9LCB0aGlzLl9jb250ZXh0cyksIGUuY29udGV4dHMpKSwKICAgICAgICAgIHRoaXMuX2xldmVsICYmIChlLmxldmVsID0gdGhpcy5fbGV2ZWwpLAogICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb25OYW1lICYmIChlLnRyYW5zYWN0aW9uID0gdGhpcy5fdHJhbnNhY3Rpb25OYW1lKSwKICAgICAgICAgIHRoaXMuX3NwYW4gJiYKICAgICAgICAgICAgKChlLmNvbnRleHRzID0gSXQoCiAgICAgICAgICAgICAgeyB0cmFjZTogdGhpcy5fc3Bhbi5nZXRUcmFjZUNvbnRleHQoKSB9LAogICAgICAgICAgICAgIGUuY29udGV4dHMKICAgICAgICAgICAgKSksCiAgICAgICAgICAgIChuID0KICAgICAgICAgICAgICBudWxsID09PSAobiA9IHRoaXMuX3NwYW4udHJhbnNhY3Rpb24pIHx8IHZvaWQgMCA9PT0gbgogICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgIDogbi5uYW1lKSAmJiAoZS50YWdzID0gSXQoeyB0cmFuc2FjdGlvbjogbiB9LCBlLnRhZ3MpKSksCiAgICAgICAgICB0aGlzLl9hcHBseUZpbmdlcnByaW50KGUpLAogICAgICAgICAgKGUuYnJlYWRjcnVtYnMgPSBSdChlLmJyZWFkY3J1bWJzIHx8IFtdLCB0aGlzLl9icmVhZGNydW1icykpLAogICAgICAgICAgKGUuYnJlYWRjcnVtYnMgPSAwIDwgZS5icmVhZGNydW1icy5sZW5ndGggPyBlLmJyZWFkY3J1bWJzIDogdm9pZCAwKSwKICAgICAgICAgIHRoaXMuX25vdGlmeUV2ZW50UHJvY2Vzc29ycyhSdChycigpLCB0aGlzLl9ldmVudFByb2Nlc3NvcnMpLCBlLCB0KQogICAgICAgICk7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLl9ub3RpZnlFdmVudFByb2Nlc3NvcnMgPSBmdW5jdGlvbiAociwgaSwgbywgYSkgewogICAgICAgIHZhciBzID0gdGhpczsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgdm9pZCAwID09PSBhICYmIChhID0gMCksCiAgICAgICAgICBuZXcgWW4oZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICAgICAgdmFyIG4gPSByW2FdOwogICAgICAgICAgICBudWxsID09PSBpIHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIG4KICAgICAgICAgICAgICA/IHQoaSkKICAgICAgICAgICAgICA6IChIdCgobiA9IG4oSXQoe30sIGkpLCBvKSkpCiAgICAgICAgICAgICAgICAgID8gbi50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5fbm90aWZ5RXZlbnRQcm9jZXNzb3JzKHIsIGUsIG8sIGEgKyAxKS50aGVuKHQpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIDogcy5fbm90aWZ5RXZlbnRQcm9jZXNzb3JzKHIsIG4sIG8sIGEgKyAxKS50aGVuKHQpCiAgICAgICAgICAgICAgICApLnRoZW4obnVsbCwgZSk7CiAgICAgICAgICB9KQogICAgICAgICk7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLl9ub3RpZnlTY29wZUxpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgdGhpcy5fbm90aWZ5aW5nTGlzdGVuZXJzIHx8CiAgICAgICAgICAoKHRoaXMuX25vdGlmeWluZ0xpc3RlbmVycyA9ICEwKSwKICAgICAgICAgIHRoaXMuX3Njb3BlTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZSh0KTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHRoaXMuX25vdGlmeWluZ0xpc3RlbmVycyA9ICExKSk7CiAgICAgIH0pLAogICAgICAobnIucHJvdG90eXBlLl9hcHBseUZpbmdlcnByaW50ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAoZS5maW5nZXJwcmludCA9IGUuZmluZ2VycHJpbnQKICAgICAgICAgID8gQXJyYXkuaXNBcnJheShlLmZpbmdlcnByaW50KQogICAgICAgICAgICA/IGUuZmluZ2VycHJpbnQKICAgICAgICAgICAgOiBbZS5maW5nZXJwcmludF0KICAgICAgICAgIDogW10pLAogICAgICAgICAgdGhpcy5fZmluZ2VycHJpbnQgJiYKICAgICAgICAgICAgKGUuZmluZ2VycHJpbnQgPSBlLmZpbmdlcnByaW50LmNvbmNhdCh0aGlzLl9maW5nZXJwcmludCkpLAogICAgICAgICAgZS5maW5nZXJwcmludCAmJiAhZS5maW5nZXJwcmludC5sZW5ndGggJiYgZGVsZXRlIGUuZmluZ2VycHJpbnQ7CiAgICAgIH0pLAogICAgICBucik7CgogIGZ1bmN0aW9uIG5yKCkgewogICAgKHRoaXMuX25vdGlmeWluZ0xpc3RlbmVycyA9ICExKSwKICAgICAgKHRoaXMuX3Njb3BlTGlzdGVuZXJzID0gW10pLAogICAgICAodGhpcy5fZXZlbnRQcm9jZXNzb3JzID0gW10pLAogICAgICAodGhpcy5fYnJlYWRjcnVtYnMgPSBbXSksCiAgICAgICh0aGlzLl91c2VyID0ge30pLAogICAgICAodGhpcy5fdGFncyA9IHt9KSwKICAgICAgKHRoaXMuX2V4dHJhID0ge30pLAogICAgICAodGhpcy5fY29udGV4dHMgPSB7fSk7CiAgfQoKICBmdW5jdGlvbiBycigpIHsKICAgIHZhciBlID0gc24oKTsKICAgIHJldHVybiAoCiAgICAgIChlLl9fU0VOVFJZX18gPSBlLl9fU0VOVFJZX18gfHwge30pLAogICAgICAoZS5fX1NFTlRSWV9fLmdsb2JhbEV2ZW50UHJvY2Vzc29ycyA9CiAgICAgICAgZS5fX1NFTlRSWV9fLmdsb2JhbEV2ZW50UHJvY2Vzc29ycyB8fCBbXSksCiAgICAgIGUuX19TRU5UUllfXy5nbG9iYWxFdmVudFByb2Nlc3NvcnMKICAgICk7CiAgfQoKICBmdW5jdGlvbiBpcihlKSB7CiAgICBycigpLnB1c2goZSk7CiAgfQoKICB2YXIgb3IgPQogICAgKChhci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQ7CiAgICAgIChlID0gdm9pZCAwID09PSBlID8ge30gOiBlKS51c2VyICYmCiAgICAgICAgKCF0aGlzLmlwQWRkcmVzcyAmJgogICAgICAgICAgZS51c2VyLmlwX2FkZHJlc3MgJiYKICAgICAgICAgICh0aGlzLmlwQWRkcmVzcyA9IGUudXNlci5pcF9hZGRyZXNzKSwKICAgICAgICB0aGlzLmRpZCB8fAogICAgICAgICAgZS5kaWQgfHwKICAgICAgICAgICh0aGlzLmRpZCA9IGUudXNlci5pZCB8fCBlLnVzZXIuZW1haWwgfHwgZS51c2VyLnVzZXJuYW1lKSksCiAgICAgICAgKHRoaXMudGltZXN0YW1wID0gZS50aW1lc3RhbXAgfHwgUW4oKSksCiAgICAgICAgZS5pZ25vcmVEdXJhdGlvbiAmJiAodGhpcy5pZ25vcmVEdXJhdGlvbiA9IGUuaWdub3JlRHVyYXRpb24pLAogICAgICAgIGUuc2lkICYmICh0aGlzLnNpZCA9IDMyID09PSBlLnNpZC5sZW5ndGggPyBlLnNpZCA6IGNuKCkpLAogICAgICAgIHZvaWQgMCAhPT0gZS5pbml0ICYmICh0aGlzLmluaXQgPSBlLmluaXQpLAogICAgICAgICF0aGlzLmRpZCAmJiBlLmRpZCAmJiAodGhpcy5kaWQgPSAiIiArIGUuZGlkKSwKICAgICAgICAibnVtYmVyIiA9PSB0eXBlb2YgZS5zdGFydGVkICYmICh0aGlzLnN0YXJ0ZWQgPSBlLnN0YXJ0ZWQpLAogICAgICAgIHRoaXMuaWdub3JlRHVyYXRpb24KICAgICAgICAgID8gKHRoaXMuZHVyYXRpb24gPSB2b2lkIDApCiAgICAgICAgICA6ICJudW1iZXIiID09IHR5cGVvZiBlLmR1cmF0aW9uCiAgICAgICAgICA/ICh0aGlzLmR1cmF0aW9uID0gZS5kdXJhdGlvbikKICAgICAgICAgIDogKCh0ID0gdGhpcy50aW1lc3RhbXAgLSB0aGlzLnN0YXJ0ZWQpLAogICAgICAgICAgICAodGhpcy5kdXJhdGlvbiA9IDAgPD0gdCA/IHQgOiAwKSksCiAgICAgICAgZS5yZWxlYXNlICYmICh0aGlzLnJlbGVhc2UgPSBlLnJlbGVhc2UpLAogICAgICAgIGUuZW52aXJvbm1lbnQgJiYgKHRoaXMuZW52aXJvbm1lbnQgPSBlLmVudmlyb25tZW50KSwKICAgICAgICAhdGhpcy5pcEFkZHJlc3MgJiYgZS5pcEFkZHJlc3MgJiYgKHRoaXMuaXBBZGRyZXNzID0gZS5pcEFkZHJlc3MpLAogICAgICAgICF0aGlzLnVzZXJBZ2VudCAmJiBlLnVzZXJBZ2VudCAmJiAodGhpcy51c2VyQWdlbnQgPSBlLnVzZXJBZ2VudCksCiAgICAgICAgIm51bWJlciIgPT0gdHlwZW9mIGUuZXJyb3JzICYmICh0aGlzLmVycm9ycyA9IGUuZXJyb3JzKSwKICAgICAgICBlLnN0YXR1cyAmJiAodGhpcy5zdGF0dXMgPSBlLnN0YXR1cyk7CiAgICB9KSwKICAgIChhci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZSkgewogICAgICBlCiAgICAgICAgPyB0aGlzLnVwZGF0ZSh7IHN0YXR1czogZSB9KQogICAgICAgIDogdGhpcy5zdGF0dXMgPT09IFN0Lk9rCiAgICAgICAgPyB0aGlzLnVwZGF0ZSh7IHN0YXR1czogU3QuRXhpdGVkIH0pCiAgICAgICAgOiB0aGlzLnVwZGF0ZSgpOwogICAgfSksCiAgICAoYXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIENuKHsKICAgICAgICBzaWQ6ICIiICsgdGhpcy5zaWQsCiAgICAgICAgaW5pdDogdGhpcy5pbml0LAogICAgICAgIHN0YXJ0ZWQ6IG5ldyBEYXRlKDFlMyAqIHRoaXMuc3RhcnRlZCkudG9JU09TdHJpbmcoKSwKICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKDFlMyAqIHRoaXMudGltZXN0YW1wKS50b0lTT1N0cmluZygpLAogICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsCiAgICAgICAgZXJyb3JzOiB0aGlzLmVycm9ycywKICAgICAgICBkaWQ6CiAgICAgICAgICAibnVtYmVyIiA9PSB0eXBlb2YgdGhpcy5kaWQgfHwgInN0cmluZyIgPT0gdHlwZW9mIHRoaXMuZGlkCiAgICAgICAgICAgID8gIiIgKyB0aGlzLmRpZAogICAgICAgICAgICA6IHZvaWQgMCwKICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbiwKICAgICAgICBhdHRyczogQ24oewogICAgICAgICAgcmVsZWFzZTogdGhpcy5yZWxlYXNlLAogICAgICAgICAgZW52aXJvbm1lbnQ6IHRoaXMuZW52aXJvbm1lbnQsCiAgICAgICAgICBpcF9hZGRyZXNzOiB0aGlzLmlwQWRkcmVzcywKICAgICAgICAgIHVzZXJfYWdlbnQ6IHRoaXMudXNlckFnZW50LAogICAgICAgIH0pLAogICAgICB9KTsKICAgIH0pLAogICAgYXIpOwoKICBmdW5jdGlvbiBhcihlKSB7CiAgICAodGhpcy5lcnJvcnMgPSAwKSwKICAgICAgKHRoaXMuc2lkID0gY24oKSksCiAgICAgICh0aGlzLmR1cmF0aW9uID0gMCksCiAgICAgICh0aGlzLnN0YXR1cyA9IFN0Lk9rKSwKICAgICAgKHRoaXMuaW5pdCA9ICEwKSwKICAgICAgKHRoaXMuaWdub3JlRHVyYXRpb24gPSAhMSk7CiAgICB2YXIgdCA9IFFuKCk7CiAgICAodGhpcy50aW1lc3RhbXAgPSB0KSwgKHRoaXMuc3RhcnRlZCA9IHQpLCBlICYmIHRoaXMudXBkYXRlKGUpOwogIH0KCiAgdmFyIHNyID0gNCwKICAgIGNyID0KICAgICAgKCh1ci5wcm90b3R5cGUuaXNPbGRlclRoYW4gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB0aGlzLl92ZXJzaW9uIDwgZTsKICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuYmluZENsaWVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgKHRoaXMuZ2V0U3RhY2tUb3AoKS5jbGllbnQgPSBlKSAmJgogICAgICAgICAgZS5zZXR1cEludGVncmF0aW9ucyAmJgogICAgICAgICAgZS5zZXR1cEludGVncmF0aW9ucygpOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5wdXNoU2NvcGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSB0ci5jbG9uZSh0aGlzLmdldFNjb3BlKCkpOwogICAgICAgIHJldHVybiB0aGlzLmdldFN0YWNrKCkucHVzaCh7IGNsaWVudDogdGhpcy5nZXRDbGllbnQoKSwgc2NvcGU6IGUgfSksIGU7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLnBvcFNjb3BlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAhKHRoaXMuZ2V0U3RhY2soKS5sZW5ndGggPD0gMSkgJiYgISF0aGlzLmdldFN0YWNrKCkucG9wKCk7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLndpdGhTY29wZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLnB1c2hTY29wZSgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBlKHQpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICB0aGlzLnBvcFNjb3BlKCk7CiAgICAgICAgfQogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5nZXRDbGllbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RhY2tUb3AoKS5jbGllbnQ7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLmdldFNjb3BlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldFN0YWNrVG9wKCkuc2NvcGU7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLmdldFN0YWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLl9zdGFjazsKICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuZ2V0U3RhY2tUb3AgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YWNrW3RoaXMuX3N0YWNrLmxlbmd0aCAtIDFdOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5jYXB0dXJlRXhjZXB0aW9uID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9ICh0aGlzLl9sYXN0RXZlbnRJZCA9IGNuKCkpLAogICAgICAgICAgciA9IHQ7CiAgICAgICAgaWYgKCF0KSB7CiAgICAgICAgICB0ID0gdm9pZCAwOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJTZW50cnkgc3ludGhldGljRXhjZXB0aW9uIik7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHQgPSBlOwogICAgICAgICAgfQogICAgICAgICAgciA9IHsgb3JpZ2luYWxFeGNlcHRpb246IGUsIHN5bnRoZXRpY0V4Y2VwdGlvbjogdCB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gKAogICAgICAgICAgdGhpcy5faW52b2tlQ2xpZW50KAogICAgICAgICAgICAiY2FwdHVyZUV4Y2VwdGlvbiIsCiAgICAgICAgICAgIGUsCiAgICAgICAgICAgIEl0KEl0KHt9LCByKSwgeyBldmVudF9pZDogbiB9KQogICAgICAgICAgKSwKICAgICAgICAgIG4KICAgICAgICApOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5jYXB0dXJlTWVzc2FnZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgdmFyIHIgPSAodGhpcy5fbGFzdEV2ZW50SWQgPSBjbigpKSwKICAgICAgICAgIGkgPSBuOwogICAgICAgIGlmICghbikgewogICAgICAgICAgbiA9IHZvaWQgMDsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgbiA9IGU7CiAgICAgICAgICB9CiAgICAgICAgICBpID0geyBvcmlnaW5hbEV4Y2VwdGlvbjogZSwgc3ludGhldGljRXhjZXB0aW9uOiBuIH07CiAgICAgICAgfQogICAgICAgIHJldHVybiAoCiAgICAgICAgICB0aGlzLl9pbnZva2VDbGllbnQoCiAgICAgICAgICAgICJjYXB0dXJlTWVzc2FnZSIsCiAgICAgICAgICAgIGUsCiAgICAgICAgICAgIHQsCiAgICAgICAgICAgIEl0KEl0KHt9LCBpKSwgeyBldmVudF9pZDogciB9KQogICAgICAgICAgKSwKICAgICAgICAgIHIKICAgICAgICApOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5jYXB0dXJlRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0gKHRoaXMuX2xhc3RFdmVudElkID0gY24oKSk7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMuX2ludm9rZUNsaWVudCgiY2FwdHVyZUV2ZW50IiwgZSwgSXQoSXQoe30sIHQpLCB7IGV2ZW50X2lkOiBuIH0pKSwKICAgICAgICAgIG4KICAgICAgICApOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5sYXN0RXZlbnRJZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fbGFzdEV2ZW50SWQ7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLmFkZEJyZWFkY3J1bWIgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuLAogICAgICAgICAgciwKICAgICAgICAgIGkgPSB0aGlzLmdldFN0YWNrVG9wKCksCiAgICAgICAgICBvID0gaS5zY29wZSwKICAgICAgICAgIGEgPSBpLmNsaWVudDsKICAgICAgICBvICYmCiAgICAgICAgICBhICYmCiAgICAgICAgICAoKGEgPSAoaSA9IChhLmdldE9wdGlvbnMgJiYgYS5nZXRPcHRpb25zKCkpIHx8IHt9KS5iZWZvcmVCcmVhZGNydW1iKSwKICAgICAgICAgIChuID0gdm9pZCAwID09PSBhID8gbnVsbCA6IGEpLAogICAgICAgICAgKGkgPSB2b2lkIDAgPT09IChhID0gaS5tYXhCcmVhZGNydW1icykgPyAxMDAgOiBhKSA8PSAwIHx8CiAgICAgICAgICAgICgoYSA9ICRuKCkpLAogICAgICAgICAgICAociA9IEl0KHsgdGltZXN0YW1wOiBhIH0sIGUpKSwKICAgICAgICAgICAgbnVsbCAhPT0KICAgICAgICAgICAgICAoZSA9IG4KICAgICAgICAgICAgICAgID8gcG4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuKHIsIHQpOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiByKSAmJiBvLmFkZEJyZWFkY3J1bWIoZSwgaSkpKTsKICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuc2V0VXNlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLmdldFNjb3BlKCk7CiAgICAgICAgdCAmJiB0LnNldFVzZXIoZSk7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLnNldFRhZ3MgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gdGhpcy5nZXRTY29wZSgpOwogICAgICAgIHQgJiYgdC5zZXRUYWdzKGUpOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5zZXRFeHRyYXMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gdGhpcy5nZXRTY29wZSgpOwogICAgICAgIHQgJiYgdC5zZXRFeHRyYXMoZSk7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLnNldFRhZyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0aGlzLmdldFNjb3BlKCk7CiAgICAgICAgbiAmJiBuLnNldFRhZyhlLCB0KTsKICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuc2V0RXh0cmEgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0gdGhpcy5nZXRTY29wZSgpOwogICAgICAgIG4gJiYgbi5zZXRFeHRyYShlLCB0KTsKICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuc2V0Q29udGV4dCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0aGlzLmdldFNjb3BlKCk7CiAgICAgICAgbiAmJiBuLnNldENvbnRleHQoZSwgdCk7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLmNvbmZpZ3VyZVNjb3BlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IHRoaXMuZ2V0U3RhY2tUb3AoKSwKICAgICAgICAgIG4gPSB0LnNjb3BlLAogICAgICAgICAgdCA9IHQuY2xpZW50OwogICAgICAgIG4gJiYgdCAmJiBlKG4pOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gcHIodGhpcyk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGUodGhpcyk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHByKHQpOwogICAgICAgIH0KICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuZ2V0SW50ZWdyYXRpb24gPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBlID0gdGhpcy5nZXRDbGllbnQoKTsKICAgICAgICBpZiAoIWUpIHJldHVybiBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gZS5nZXRJbnRlZ3JhdGlvbih0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB5bi53YXJuKAogICAgICAgICAgICAgICJDYW5ub3QgcmV0cmlldmUgaW50ZWdyYXRpb24gIiArIHQuaWQgKyAiIGZyb20gdGhlIGN1cnJlbnQgSHViIgogICAgICAgICAgICApLAogICAgICAgICAgICBudWxsCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuc3RhcnRTcGFuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5fY2FsbEV4dGVuc2lvbk1ldGhvZCgic3RhcnRTcGFuIiwgZSk7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLnN0YXJ0VHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHJldHVybiB0aGlzLl9jYWxsRXh0ZW5zaW9uTWV0aG9kKCJzdGFydFRyYW5zYWN0aW9uIiwgZSwgdCk7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLnRyYWNlSGVhZGVycyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy5fY2FsbEV4dGVuc2lvbk1ldGhvZCgidHJhY2VIZWFkZXJzIik7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLmNhcHR1cmVTZXNzaW9uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoKGUgPSB2b2lkIDAgPT09IGUgPyAhMSA6IGUpKSByZXR1cm4gdGhpcy5lbmRTZXNzaW9uKCk7CiAgICAgICAgdGhpcy5fc2VuZFNlc3Npb25VcGRhdGUoKTsKICAgICAgfSksCiAgICAgICh1ci5wcm90b3R5cGUuZW5kU2Vzc2lvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZTsKICAgICAgICBudWxsICE9PQogICAgICAgICAgKGUgPQogICAgICAgICAgICBudWxsID09PQogICAgICAgICAgICAgIChlID0KICAgICAgICAgICAgICAgIG51bGwgPT09IChlID0gdGhpcy5nZXRTdGFja1RvcCgpKSB8fCB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgICAgOiBlLnNjb3BlKSB8fCB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICAgIDogZS5nZXRTZXNzaW9uKCkpICYmCiAgICAgICAgICB2b2lkIDAgIT09IGUgJiYKICAgICAgICAgIGUuY2xvc2UoKSwKICAgICAgICAgIHRoaXMuX3NlbmRTZXNzaW9uVXBkYXRlKCksCiAgICAgICAgICBudWxsICE9PQogICAgICAgICAgICAoZSA9CiAgICAgICAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLmdldFN0YWNrVG9wKCkpIHx8IHZvaWQgMCA9PT0gZQogICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgIDogZS5zY29wZSkgJiYKICAgICAgICAgICAgdm9pZCAwICE9PSBlICYmCiAgICAgICAgICAgIGUuc2V0U2Vzc2lvbigpOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5zdGFydFNlc3Npb24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gdGhpcy5nZXRTdGFja1RvcCgpLAogICAgICAgICAgbiA9IHQuc2NvcGUsCiAgICAgICAgICByID0gdC5jbGllbnQsCiAgICAgICAgICBpID0gKHIgJiYgci5nZXRPcHRpb25zKCkpIHx8IHt9LAogICAgICAgICAgdCA9IGkucmVsZWFzZSwKICAgICAgICAgIHIgPSBpLmVudmlyb25tZW50LAogICAgICAgICAgaSA9IChzbigpLm5hdmlnYXRvciB8fCB7fSkudXNlckFnZW50LAogICAgICAgICAgaSA9IG5ldyBvcigKICAgICAgICAgICAgSXQoCiAgICAgICAgICAgICAgSXQoCiAgICAgICAgICAgICAgICBJdCh7IHJlbGVhc2U6IHQsIGVudmlyb25tZW50OiByIH0sIG4gJiYgeyB1c2VyOiBuLmdldFVzZXIoKSB9KSwKICAgICAgICAgICAgICAgIGkgJiYgeyB1c2VyQWdlbnQ6IGkgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgZQogICAgICAgICAgICApCiAgICAgICAgICApOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICBuICYmCiAgICAgICAgICAgICgoZSA9IG4uZ2V0U2Vzc2lvbiAmJiBuLmdldFNlc3Npb24oKSkgJiYKICAgICAgICAgICAgICBlLnN0YXR1cyA9PT0gU3QuT2sgJiYKICAgICAgICAgICAgICBlLnVwZGF0ZSh7IHN0YXR1czogU3QuRXhpdGVkIH0pLAogICAgICAgICAgICB0aGlzLmVuZFNlc3Npb24oKSwKICAgICAgICAgICAgbi5zZXRTZXNzaW9uKGkpKSwKICAgICAgICAgIGkKICAgICAgICApOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5fc2VuZFNlc3Npb25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSB0aGlzLmdldFN0YWNrVG9wKCksCiAgICAgICAgICB0ID0gZS5zY29wZSwKICAgICAgICAgIGUgPSBlLmNsaWVudDsKICAgICAgICAhdCB8fAogICAgICAgICAgKCh0ID0gdC5nZXRTZXNzaW9uICYmIHQuZ2V0U2Vzc2lvbigpKSAmJgogICAgICAgICAgICBlICYmCiAgICAgICAgICAgIGUuY2FwdHVyZVNlc3Npb24gJiYKICAgICAgICAgICAgZS5jYXB0dXJlU2Vzc2lvbih0KSk7CiAgICAgIH0pLAogICAgICAodXIucHJvdG90eXBlLl9pbnZva2VDbGllbnQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGZvciAodmFyIHQgPSBbXSwgbiA9IDE7IG4gPCBhcmd1bWVudHMubGVuZ3RoOyBuKyspCiAgICAgICAgICB0W24gLSAxXSA9IGFyZ3VtZW50c1tuXTsKICAgICAgICB2YXIgciA9IHRoaXMuZ2V0U3RhY2tUb3AoKSwKICAgICAgICAgIGkgPSByLnNjb3BlLAogICAgICAgICAgciA9IHIuY2xpZW50OwogICAgICAgIHIgJiYgcltlXSAmJiByW2VdLmFwcGx5KHIsIFJ0KHQsIFtpXSkpOwogICAgICB9KSwKICAgICAgKHVyLnByb3RvdHlwZS5fY2FsbEV4dGVuc2lvbk1ldGhvZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IFtdLCBuID0gMTsgbiA8IGFyZ3VtZW50cy5sZW5ndGg7IG4rKykKICAgICAgICAgIHRbbiAtIDFdID0gYXJndW1lbnRzW25dOwogICAgICAgIHZhciByID0gbHIoKS5fX1NFTlRSWV9fOwogICAgICAgIGlmIChyICYmIHIuZXh0ZW5zaW9ucyAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiByLmV4dGVuc2lvbnNbZV0pCiAgICAgICAgICByZXR1cm4gci5leHRlbnNpb25zW2VdLmFwcGx5KHRoaXMsIHQpOwogICAgICAgIHluLndhcm4oIkV4dGVuc2lvbiBtZXRob2QgIiArIGUgKyAiIGNvdWxkbid0IGJlIGZvdW5kLCBkb2luZyBub3RoaW5nLiIpOwogICAgICB9KSwKICAgICAgdXIpOwoKICBmdW5jdGlvbiB1cihlLCB0LCBuKSB7CiAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBuZXcgdHIoKSksCiAgICAgICh0aGlzLl92ZXJzaW9uID0gbiA9IHZvaWQgMCA9PT0gbiA/IHNyIDogbiksCiAgICAgICh0aGlzLl9zdGFjayA9IFt7fV0pLAogICAgICAodGhpcy5nZXRTdGFja1RvcCgpLnNjb3BlID0gdCksCiAgICAgIGUgJiYgdGhpcy5iaW5kQ2xpZW50KGUpOwogIH0KCiAgZnVuY3Rpb24gbHIoKSB7CiAgICB2YXIgZSA9IHNuKCk7CiAgICByZXR1cm4gKGUuX19TRU5UUllfXyA9IGUuX19TRU5UUllfXyB8fCB7IGV4dGVuc2lvbnM6IHt9LCBodWI6IHZvaWQgMCB9KSwgZTsKICB9CgogIGZ1bmN0aW9uIHByKGUpIHsKICAgIHZhciB0ID0gbHIoKSwKICAgICAgbiA9IGhyKHQpOwogICAgcmV0dXJuIG1yKHQsIGUpLCBuOwogIH0KCiAgZnVuY3Rpb24gZHIoKSB7CiAgICB2YXIgZSA9IGxyKCk7CiAgICByZXR1cm4gKAogICAgICAoZnIoZSkgJiYgIWhyKGUpLmlzT2xkZXJUaGFuKHNyKSkgfHwgbXIoZSwgbmV3IGNyKCkpLAogICAgICAoWnQoKQogICAgICAgID8gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIGUsIG4sIHI7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIGksCiAgICAgICAgICAgICAgICBvID0KICAgICAgICAgICAgICAgICAgbnVsbCA9PT0KICAgICAgICAgICAgICAgICAgICAociA9CiAgICAgICAgICAgICAgICAgICAgICBudWxsID09PQogICAgICAgICAgICAgICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gKGUgPSBscigpLl9fU0VOVFJZX18pIHx8IHZvaWQgMCA9PT0gZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZS5leHRlbnNpb25zKSB8fCB2b2lkIDAgPT09IG4KICAgICAgICAgICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgICAgOiBuLmRvbWFpbikgfHwgdm9pZCAwID09PSByCiAgICAgICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgICAgICA6IHIuYWN0aXZlOwogICAgICAgICAgICAgIHJldHVybiBvCiAgICAgICAgICAgICAgICA/ICgoZnIobykgJiYgIWhyKG8pLmlzT2xkZXJUaGFuKHNyKSkgfHwKICAgICAgICAgICAgICAgICAgICAoKGkgPSBocih0KS5nZXRTdGFja1RvcCgpKSwKICAgICAgICAgICAgICAgICAgICBtcihvLCBuZXcgY3IoaS5jbGllbnQsIHRyLmNsb25lKGkuc2NvcGUpKSkpLAogICAgICAgICAgICAgICAgICBocihvKSkKICAgICAgICAgICAgICAgIDogaHIodCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gaHIodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICA6IGhyKShlKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGZyKGUpIHsKICAgIHJldHVybiBlICYmIGUuX19TRU5UUllfXyAmJiBlLl9fU0VOVFJZX18uaHViOwogIH0KCiAgZnVuY3Rpb24gaHIoZSkgewogICAgcmV0dXJuICgKICAgICAgKGUgJiYgZS5fX1NFTlRSWV9fICYmIGUuX19TRU5UUllfXy5odWIpIHx8CiAgICAgICAgKChlLl9fU0VOVFJZX18gPSBlLl9fU0VOVFJZX18gfHwge30pLCAoZS5fX1NFTlRSWV9fLmh1YiA9IG5ldyBjcigpKSksCiAgICAgIGUuX19TRU5UUllfXy5odWIKICAgICk7CiAgfQoKICBmdW5jdGlvbiBtcihlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICBlICYmICgoZS5fX1NFTlRSWV9fID0gZS5fX1NFTlRSWV9fIHx8IHt9KSwgKGUuX19TRU5UUllfXy5odWIgPSB0KSwgMSkKICAgICk7CiAgfQoKICBmdW5jdGlvbiB2cihlKSB7CiAgICBmb3IgKHZhciB0ID0gW10sIG4gPSAxOyBuIDwgYXJndW1lbnRzLmxlbmd0aDsgbisrKSB0W24gLSAxXSA9IGFyZ3VtZW50c1tuXTsKICAgIHZhciByID0gZHIoKTsKICAgIGlmIChyICYmIHJbZV0pIHJldHVybiByW2VdLmFwcGx5KHIsIFJ0KHQpKTsKICAgIHRocm93IG5ldyBFcnJvcigKICAgICAgIk5vIGh1YiBkZWZpbmVkIG9yICIgKwogICAgICAgIGUgKwogICAgICAgICIgd2FzIG5vdCBmb3VuZCBvbiB0aGUgaHViLCBwbGVhc2Ugb3BlbiBhIGJ1ZyByZXBvcnQuIgogICAgKTsKICB9CgogIGZ1bmN0aW9uIHlyKGUsIHQpIHsKICAgIHZhciBuOwogICAgdHJ5IHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJTZW50cnkgc3ludGhldGljRXhjZXB0aW9uIik7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIG4gPSBlOwogICAgfQogICAgcmV0dXJuIHZyKCJjYXB0dXJlRXhjZXB0aW9uIiwgZSwgewogICAgICBjYXB0dXJlQ29udGV4dDogdCwKICAgICAgb3JpZ2luYWxFeGNlcHRpb246IGUsCiAgICAgIHN5bnRoZXRpY0V4Y2VwdGlvbjogbiwKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZ3IoZSwgdCkgewogICAgdnIoInNldENvbnRleHQiLCBlLCB0KTsKICB9CgogIGZ1bmN0aW9uIF9yKGUpIHsKICAgIHZyKCJ3aXRoU2NvcGUiLCBlKTsKICB9CgogIHZhciBiciA9CiAgICAoKHdyLnByb3RvdHlwZS5nZXREc24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kc25PYmplY3Q7CiAgICB9KSwKICAgICh3ci5wcm90b3R5cGUuZm9yY2VFbnZlbG9wZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5fdHVubmVsOwogICAgfSksCiAgICAod3IucHJvdG90eXBlLmdldEJhc2VBcGlFbmRwb2ludCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSB0aGlzLmdldERzbigpLAogICAgICAgIHQgPSBlLnByb3RvY29sID8gZS5wcm90b2NvbCArICI6IiA6ICIiLAogICAgICAgIG4gPSBlLnBvcnQgPyAiOiIgKyBlLnBvcnQgOiAiIjsKICAgICAgcmV0dXJuIHQgKyAiLy8iICsgZS5ob3N0ICsgbiArIChlLnBhdGggPyAiLyIgKyBlLnBhdGggOiAiIikgKyAiL2FwaS8iOwogICAgfSksCiAgICAod3IucHJvdG90eXBlLmdldFN0b3JlRW5kcG9pbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLl9nZXRJbmdlc3RFbmRwb2ludCgic3RvcmUiKTsKICAgIH0pLAogICAgKHdyLnByb3RvdHlwZS5nZXRTdG9yZUVuZHBvaW50V2l0aFVybEVuY29kZWRBdXRoID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5nZXRTdG9yZUVuZHBvaW50KCkgKyAiPyIgKyB0aGlzLl9lbmNvZGVkQXV0aCgpOwogICAgfSksCiAgICAod3IucHJvdG90eXBlLmdldEVudmVsb3BlRW5kcG9pbnRXaXRoVXJsRW5jb2RlZEF1dGggPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmZvcmNlRW52ZWxvcGUoKQogICAgICAgID8gdGhpcy5fdHVubmVsCiAgICAgICAgOiB0aGlzLl9nZXRFbnZlbG9wZUVuZHBvaW50KCkgKyAiPyIgKyB0aGlzLl9lbmNvZGVkQXV0aCgpOwogICAgfSksCiAgICAod3IucHJvdG90eXBlLmdldFN0b3JlRW5kcG9pbnRQYXRoID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXMuZ2V0RHNuKCk7CiAgICAgIHJldHVybiAoZS5wYXRoID8gIi8iICsgZS5wYXRoIDogIiIpICsgIi9hcGkvIiArIGUucHJvamVjdElkICsgIi9zdG9yZS8iOwogICAgfSksCiAgICAod3IucHJvdG90eXBlLmdldFJlcXVlc3RIZWFkZXJzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4gPSB0aGlzLmdldERzbigpLAogICAgICAgIHIgPSBbIlNlbnRyeSBzZW50cnlfdmVyc2lvbj03Il07CiAgICAgIHJldHVybiAoCiAgICAgICAgci5wdXNoKCJzZW50cnlfY2xpZW50PSIgKyBlICsgIi8iICsgdCksCiAgICAgICAgci5wdXNoKCJzZW50cnlfa2V5PSIgKyBuLnB1YmxpY0tleSksCiAgICAgICAgbi5wYXNzICYmIHIucHVzaCgic2VudHJ5X3NlY3JldD0iICsgbi5wYXNzKSwKICAgICAgICB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgIlgtU2VudHJ5LUF1dGgiOiByLmpvaW4oIiwgIiksCiAgICAgICAgfQogICAgICApOwogICAgfSksCiAgICAod3IucHJvdG90eXBlLmdldFJlcG9ydERpYWxvZ0VuZHBvaW50ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdm9pZCAwID09PSBlICYmIChlID0ge30pOwogICAgICB2YXIgdCwKICAgICAgICBuID0gdGhpcy5nZXREc24oKSwKICAgICAgICByID0gdGhpcy5nZXRCYXNlQXBpRW5kcG9pbnQoKSArICJlbWJlZC9lcnJvci1wYWdlLyIsCiAgICAgICAgaSA9IFtdOwogICAgICBmb3IgKHQgaW4gKGkucHVzaCgiZHNuPSIgKyBuLnRvU3RyaW5nKCkpLCBlKSkKICAgICAgICAiZHNuIiAhPT0gdCAmJgogICAgICAgICAgKCJ1c2VyIiA9PT0gdAogICAgICAgICAgICA/IGUudXNlciAmJgogICAgICAgICAgICAgIChlLnVzZXIubmFtZSAmJiBpLnB1c2goIm5hbWU9IiArIGVuY29kZVVSSUNvbXBvbmVudChlLnVzZXIubmFtZSkpLAogICAgICAgICAgICAgIGUudXNlci5lbWFpbCAmJgogICAgICAgICAgICAgICAgaS5wdXNoKCJlbWFpbD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUudXNlci5lbWFpbCkpKQogICAgICAgICAgICA6IGkucHVzaChlbmNvZGVVUklDb21wb25lbnQodCkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZVt0XSkpKTsKICAgICAgcmV0dXJuIGkubGVuZ3RoID8gciArICI/IiArIGkuam9pbigiJiIpIDogcjsKICAgIH0pLAogICAgKHdyLnByb3RvdHlwZS5fZ2V0RW52ZWxvcGVFbmRwb2ludCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2dldEluZ2VzdEVuZHBvaW50KCJlbnZlbG9wZSIpOwogICAgfSksCiAgICAod3IucHJvdG90eXBlLl9nZXRJbmdlc3RFbmRwb2ludCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5fdHVubmVsIHx8CiAgICAgICAgIiIgKyB0aGlzLmdldEJhc2VBcGlFbmRwb2ludCgpICsgdGhpcy5nZXREc24oKS5wcm9qZWN0SWQgKyAiLyIgKyBlICsgIi8iCiAgICAgICk7CiAgICB9KSwKICAgICh3ci5wcm90b3R5cGUuX2VuY29kZWRBdXRoID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCwKICAgICAgICBlID0geyBzZW50cnlfa2V5OiB0aGlzLmdldERzbigpLnB1YmxpY0tleSwgc2VudHJ5X3ZlcnNpb246ICI3IiB9OwogICAgICByZXR1cm4gKAogICAgICAgICh0ID0gZSksCiAgICAgICAgT2JqZWN0LmtleXModCkKICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChlKSArICI9IiArIGVuY29kZVVSSUNvbXBvbmVudCh0W2VdKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuam9pbigiJiIpCiAgICAgICk7CiAgICB9KSwKICAgIHdyKTsKCiAgZnVuY3Rpb24gd3IoZSwgdCwgbikgewogICAgdm9pZCAwID09PSB0ICYmICh0ID0ge30pLAogICAgICAodGhpcy5kc24gPSBlKSwKICAgICAgKHRoaXMuX2Rzbk9iamVjdCA9IG5ldyAkdChlKSksCiAgICAgICh0aGlzLm1ldGFkYXRhID0gdCksCiAgICAgICh0aGlzLl90dW5uZWwgPSBuKTsKICB9CgogIHZhciBTciA9IFtdOwoKICBmdW5jdGlvbiBFcihlKSB7CiAgICByZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgcmV0dXJuICgKICAgICAgICBlLmV2ZXJ5KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gdC5uYW1lICE9PSBlLm5hbWU7CiAgICAgICAgfSkgJiYgZS5wdXNoKHQpLAogICAgICAgIGUKICAgICAgKTsKICAgIH0sIFtdKTsKICB9CgogIGZ1bmN0aW9uIHhyKGUpIHsKICAgIHZhciB0LAogICAgICBuLAogICAgICByID0ge307CiAgICByZXR1cm4gKAogICAgICAoZSA9ICgodCA9IGUpLmRlZmF1bHRJbnRlZ3JhdGlvbnMgJiYgUnQodC5kZWZhdWx0SW50ZWdyYXRpb25zKSkgfHwgW10pLAogICAgICAobiA9IHQuaW50ZWdyYXRpb25zKSwKICAgICAgKHQgPSBSdChFcihlKSkpLAogICAgICBBcnJheS5pc0FycmF5KG4pCiAgICAgICAgPyAodCA9IFJ0KAogICAgICAgICAgICB0LmZpbHRlcihmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIHJldHVybiBuLmV2ZXJ5KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZS5uYW1lICE9PSB0Lm5hbWU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBFcihuKQogICAgICAgICAgKSkKICAgICAgICA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gJiYKICAgICAgICAgICgodCA9IG4odCkpLCAodCA9IEFycmF5LmlzQXJyYXkodCkgPyB0IDogW3RdKSksCiAgICAgIC0xICE9PQogICAgICAgIChlID0gdC5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlLm5hbWU7CiAgICAgICAgfSkpLmluZGV4T2YoIkRlYnVnIikgJiYKICAgICAgICB0LnB1c2guYXBwbHkodCwgUnQodC5zcGxpY2UoZS5pbmRleE9mKCJEZWJ1ZyIpLCAxKSkpLAogICAgICB0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAocltlLm5hbWVdID0gZSksCiAgICAgICAgICAoZSA9IGUpLAogICAgICAgICAgLTEgPT09IFNyLmluZGV4T2YoZS5uYW1lKSAmJgogICAgICAgICAgICAoZS5zZXR1cE9uY2UoaXIsIGRyKSwKICAgICAgICAgICAgU3IucHVzaChlLm5hbWUpLAogICAgICAgICAgICB5bi5sb2coIkludGVncmF0aW9uIGluc3RhbGxlZDogIiArIGUubmFtZSkpOwogICAgICB9KSwKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsICJpbml0aWFsaXplZCIsIHsgdmFsdWU6ICEwIH0pLAogICAgICByCiAgICApOwogIH0KCiAgKGtyLnByb3RvdHlwZS5jYXB0dXJlRXhjZXB0aW9uID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgIHZhciByID0gdGhpcywKICAgICAgaSA9IHQgJiYgdC5ldmVudF9pZDsKICAgIHJldHVybiAoCiAgICAgIHRoaXMuX3Byb2Nlc3MoCiAgICAgICAgdGhpcy5fZ2V0QmFja2VuZCgpCiAgICAgICAgICAuZXZlbnRGcm9tRXhjZXB0aW9uKGUsIHQpCiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gci5fY2FwdHVyZUV2ZW50KGUsIHQsIG4pOwogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGkgPSBlOwogICAgICAgICAgfSkKICAgICAgKSwKICAgICAgaQogICAgKTsKICB9KSwKICAgIChrci5wcm90b3R5cGUuY2FwdHVyZU1lc3NhZ2UgPSBmdW5jdGlvbiAoZSwgdCwgbiwgcikgewogICAgICB2YXIgaSA9IHRoaXMsCiAgICAgICAgbyA9IG4gJiYgbi5ldmVudF9pZCwKICAgICAgICBlID0gTXQoZSkKICAgICAgICAgID8gdGhpcy5fZ2V0QmFja2VuZCgpLmV2ZW50RnJvbU1lc3NhZ2UoU3RyaW5nKGUpLCB0LCBuKQogICAgICAgICAgOiB0aGlzLl9nZXRCYWNrZW5kKCkuZXZlbnRGcm9tRXhjZXB0aW9uKGUsIG4pOwogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuX3Byb2Nlc3MoCiAgICAgICAgICBlCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuX2NhcHR1cmVFdmVudChlLCBuLCByKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBvID0gZTsKICAgICAgICAgICAgfSkKICAgICAgICApLAogICAgICAgIG8KICAgICAgKTsKICAgIH0pLAogICAgKGtyLnByb3RvdHlwZS5jYXB0dXJlRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICB2YXIgciA9IHQgJiYgdC5ldmVudF9pZDsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLl9wcm9jZXNzKAogICAgICAgICAgdGhpcy5fY2FwdHVyZUV2ZW50KGUsIHQsIG4pLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgciA9IGU7CiAgICAgICAgICB9KQogICAgICAgICksCiAgICAgICAgcgogICAgICApOwogICAgfSksCiAgICAoa3IucHJvdG90eXBlLmNhcHR1cmVTZXNzaW9uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5faXNFbmFibGVkKCkKICAgICAgICA/ICJzdHJpbmciICE9IHR5cGVvZiBlLnJlbGVhc2UKICAgICAgICAgID8geW4ud2FybigKICAgICAgICAgICAgICAiRGlzY2FyZGVkIHNlc3Npb24gYmVjYXVzZSBvZiBtaXNzaW5nIG9yIG5vbi1zdHJpbmcgcmVsZWFzZSIKICAgICAgICAgICAgKQogICAgICAgICAgOiAodGhpcy5fc2VuZFNlc3Npb24oZSksIGUudXBkYXRlKHsgaW5pdDogITEgfSkpCiAgICAgICAgOiB5bi53YXJuKCJTREsgbm90IGVuYWJsZWQsIHdpbGwgbm90IGNhcHR1cmUgc2Vzc2lvbi4iKTsKICAgIH0pLAogICAgKGtyLnByb3RvdHlwZS5nZXREc24gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kc247CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgbiA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzLl9pc0NsaWVudERvbmVQcm9jZXNzaW5nKGUpLnRoZW4oZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gbgogICAgICAgICAgLl9nZXRCYWNrZW5kKCkKICAgICAgICAgIC5nZXRUcmFuc3BvcnQoKQogICAgICAgICAgLmNsb3NlKGUpCiAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gdCAmJiBlOwogICAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSksCiAgICAoa3IucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy5mbHVzaChlKS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICh0LmdldE9wdGlvbnMoKS5lbmFibGVkID0gITEpLCBlOwogICAgICB9KTsKICAgIH0pLAogICAgKGtyLnByb3RvdHlwZS5zZXR1cEludGVncmF0aW9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5faXNFbmFibGVkKCkgJiYKICAgICAgICAhdGhpcy5faW50ZWdyYXRpb25zLmluaXRpYWxpemVkICYmCiAgICAgICAgKHRoaXMuX2ludGVncmF0aW9ucyA9IHhyKHRoaXMuX29wdGlvbnMpKTsKICAgIH0pLAogICAgKGtyLnByb3RvdHlwZS5nZXRJbnRlZ3JhdGlvbiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVncmF0aW9uc1t0LmlkXSB8fCBudWxsOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHluLndhcm4oCiAgICAgICAgICAgICJDYW5ub3QgcmV0cmlldmUgaW50ZWdyYXRpb24gIiArIHQuaWQgKyAiIGZyb20gdGhlIGN1cnJlbnQgQ2xpZW50IgogICAgICAgICAgKSwKICAgICAgICAgIG51bGwKICAgICAgICApOwogICAgICB9CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuX3VwZGF0ZVNlc3Npb25Gcm9tRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiwKICAgICAgICByID0gITEsCiAgICAgICAgaSA9ICExLAogICAgICAgIHQgPSB0LmV4Y2VwdGlvbiAmJiB0LmV4Y2VwdGlvbi52YWx1ZXM7CiAgICAgIGlmICh0KSB7CiAgICAgICAgaSA9ICEwOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKHZhciBvID0ganQodCksIGEgPSBvLm5leHQoKTsgIWEuZG9uZTsgYSA9IG8ubmV4dCgpKSB7CiAgICAgICAgICAgIHZhciBzID0gYS52YWx1ZS5tZWNoYW5pc207CiAgICAgICAgICAgIGlmIChzICYmICExID09PSBzLmhhbmRsZWQpIHsKICAgICAgICAgICAgICByID0gITA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjID0geyBlcnJvcjogZSB9OwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBhICYmICFhLmRvbmUgJiYgKG4gPSBvLnJldHVybikgJiYgbi5jYWxsKG8pOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgaWYgKGMpIHRocm93IGMuZXJyb3I7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBjID0gZS5zdGF0dXMgPT09IFN0Lk9rOwogICAgICAoKGMgJiYgMCA9PT0gZS5lcnJvcnMpIHx8IChjICYmIHIpKSAmJgogICAgICAgIChlLnVwZGF0ZSgKICAgICAgICAgIEl0KEl0KHt9LCByICYmIHsgc3RhdHVzOiBTdC5DcmFzaGVkIH0pLCB7CiAgICAgICAgICAgIGVycm9yczogZS5lcnJvcnMgfHwgTnVtYmVyKGkgfHwgciksCiAgICAgICAgICB9KQogICAgICAgICksCiAgICAgICAgdGhpcy5jYXB0dXJlU2Vzc2lvbihlKSk7CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuX3NlbmRTZXNzaW9uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5fZ2V0QmFja2VuZCgpLnNlbmRTZXNzaW9uKGUpOwogICAgfSksCiAgICAoa3IucHJvdG90eXBlLl9pc0NsaWVudERvbmVQcm9jZXNzaW5nID0gZnVuY3Rpb24gKHIpIHsKICAgICAgdmFyIGkgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFluKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSAwLAogICAgICAgICAgbiA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgMCA9PSBpLl9udW1Qcm9jZXNzaW5nCiAgICAgICAgICAgICAgPyAoY2xlYXJJbnRlcnZhbChuKSwgZSghMCkpCiAgICAgICAgICAgICAgOiAoKHQgKz0gMSksIHIgJiYgciA8PSB0ICYmIChjbGVhckludGVydmFsKG4pLCBlKCExKSkpOwogICAgICAgICAgfSwgMSk7CiAgICAgIH0pOwogICAgfSksCiAgICAoa3IucHJvdG90eXBlLl9nZXRCYWNrZW5kID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5fYmFja2VuZDsKICAgIH0pLAogICAgKGtyLnByb3RvdHlwZS5faXNFbmFibGVkID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gITEgIT09IHRoaXMuZ2V0T3B0aW9ucygpLmVuYWJsZWQgJiYgdm9pZCAwICE9PSB0aGlzLl9kc247CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuX3ByZXBhcmVFdmVudCA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIHZhciByID0gdGhpcywKICAgICAgICBpID0gdGhpcy5nZXRPcHRpb25zKCkubm9ybWFsaXplRGVwdGgsCiAgICAgICAgbyA9IHZvaWQgMCA9PT0gaSA/IDMgOiBpLAogICAgICAgIGkgPSBJdChJdCh7fSwgZSksIHsKICAgICAgICAgIGV2ZW50X2lkOiBlLmV2ZW50X2lkIHx8IChuICYmIG4uZXZlbnRfaWQgPyBuLmV2ZW50X2lkIDogY24oKSksCiAgICAgICAgICB0aW1lc3RhbXA6IGUudGltZXN0YW1wIHx8ICRuKCksCiAgICAgICAgfSk7CiAgICAgIHRoaXMuX2FwcGx5Q2xpZW50T3B0aW9ucyhpKSwgdGhpcy5fYXBwbHlJbnRlZ3JhdGlvbnNNZXRhZGF0YShpKTsKICAgICAgZSA9IHQ7CiAgICAgIG4gJiYgbi5jYXB0dXJlQ29udGV4dCAmJiAoZSA9IHRyLmNsb25lKGUpLnVwZGF0ZShuLmNhcHR1cmVDb250ZXh0KSk7CiAgICAgIHQgPSBZbi5yZXNvbHZlKGkpOwogICAgICByZXR1cm4gKHQgPSBlID8gZS5hcHBseVRvRXZlbnQoaSwgbikgOiB0KS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICJudW1iZXIiID09IHR5cGVvZiBvICYmIDAgPCBvID8gci5fbm9ybWFsaXplRXZlbnQoZSwgbykgOiBlOwogICAgICB9KTsKICAgIH0pLAogICAgKGtyLnByb3RvdHlwZS5fbm9ybWFsaXplRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICBpZiAoIWUpIHJldHVybiBudWxsOwogICAgICB2YXIgbiA9IEl0KAogICAgICAgIEl0KAogICAgICAgICAgSXQoCiAgICAgICAgICAgIEl0KAogICAgICAgICAgICAgIEl0KHt9LCBlKSwKICAgICAgICAgICAgICBlLmJyZWFkY3J1bWJzICYmIHsKICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzOiBlLmJyZWFkY3J1bWJzLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gSXQoSXQoe30sIGUpLCBlLmRhdGEgJiYgeyBkYXRhOiBJbihlLmRhdGEsIHQpIH0pOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApLAogICAgICAgICAgICBlLnVzZXIgJiYgeyB1c2VyOiBJbihlLnVzZXIsIHQpIH0KICAgICAgICAgICksCiAgICAgICAgICBlLmNvbnRleHRzICYmIHsgY29udGV4dHM6IEluKGUuY29udGV4dHMsIHQpIH0KICAgICAgICApLAogICAgICAgIGUuZXh0cmEgJiYgeyBleHRyYTogSW4oZS5leHRyYSwgdCkgfQogICAgICApOwogICAgICBlLmNvbnRleHRzICYmIGUuY29udGV4dHMudHJhY2UgJiYgKG4uY29udGV4dHMudHJhY2UgPSBlLmNvbnRleHRzLnRyYWNlKTsKICAgICAgZSA9IHRoaXMuZ2V0T3B0aW9ucygpLl9leHBlcmltZW50czsKICAgICAgcmV0dXJuICh2b2lkIDAgPT09IGUgPyB7fSA6IGUpLmVuc3VyZU5vQ2lyY3VsYXJTdHJ1Y3R1cmVzID8gSW4obikgOiBuOwogICAgfSksCiAgICAoa3IucHJvdG90eXBlLl9hcHBseUNsaWVudE9wdGlvbnMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IHRoaXMuZ2V0T3B0aW9ucygpLAogICAgICAgIG4gPSB0LmVudmlyb25tZW50LAogICAgICAgIHIgPSB0LnJlbGVhc2UsCiAgICAgICAgaSA9IHQuZGlzdCwKICAgICAgICBvID0gdC5tYXhWYWx1ZUxlbmd0aCwKICAgICAgICBvID0gdm9pZCAwID09PSBvID8gMjUwIDogbzsKICAgICAgImVudmlyb25tZW50IiBpbiBlIHx8CiAgICAgICAgKGUuZW52aXJvbm1lbnQgPSAiZW52aXJvbm1lbnQiIGluIHQgPyBuIDogInByb2R1Y3Rpb24iKSwKICAgICAgICB2b2lkIDAgPT09IGUucmVsZWFzZSAmJiB2b2lkIDAgIT09IHIgJiYgKGUucmVsZWFzZSA9IHIpLAogICAgICAgIHZvaWQgMCA9PT0gZS5kaXN0ICYmIHZvaWQgMCAhPT0gaSAmJiAoZS5kaXN0ID0gaSksCiAgICAgICAgZS5tZXNzYWdlICYmIChlLm1lc3NhZ2UgPSBubihlLm1lc3NhZ2UsIG8pKTsKICAgICAgaSA9IGUuZXhjZXB0aW9uICYmIGUuZXhjZXB0aW9uLnZhbHVlcyAmJiBlLmV4Y2VwdGlvbi52YWx1ZXNbMF07CiAgICAgIGkgJiYgaS52YWx1ZSAmJiAoaS52YWx1ZSA9IG5uKGkudmFsdWUsIG8pKTsKICAgICAgZSA9IGUucmVxdWVzdDsKICAgICAgZSAmJiBlLnVybCAmJiAoZS51cmwgPSBubihlLnVybCwgbykpOwogICAgfSksCiAgICAoa3IucHJvdG90eXBlLl9hcHBseUludGVncmF0aW9uc01ldGFkYXRhID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSBPYmplY3Qua2V5cyh0aGlzLl9pbnRlZ3JhdGlvbnMpOwogICAgICAwIDwgdC5sZW5ndGggJiYKICAgICAgICAoKGUuc2RrID0gZS5zZGsgfHwge30pLAogICAgICAgIChlLnNkay5pbnRlZ3JhdGlvbnMgPSBSdChlLnNkay5pbnRlZ3JhdGlvbnMgfHwgW10sIHQpKSk7CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuX3NlbmRFdmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRoaXMuX2dldEJhY2tlbmQoKS5zZW5kRXZlbnQoZSk7CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuX2NhcHR1cmVFdmVudCA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIHJldHVybiB0aGlzLl9wcm9jZXNzRXZlbnQoZSwgdCwgbikudGhlbigKICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUuZXZlbnRfaWQ7CiAgICAgICAgfSwKICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgeW4uZXJyb3IoZSk7CiAgICAgICAgfQogICAgICApOwogICAgfSksCiAgICAoa3IucHJvdG90eXBlLl9wcm9jZXNzRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICB2YXIgciA9IHRoaXMsCiAgICAgICAgaSA9IHRoaXMuZ2V0T3B0aW9ucygpLAogICAgICAgIG8gPSBpLmJlZm9yZVNlbmQsCiAgICAgICAgaSA9IGkuc2FtcGxlUmF0ZTsKICAgICAgaWYgKCF0aGlzLl9pc0VuYWJsZWQoKSkKICAgICAgICByZXR1cm4gWW4ucmVqZWN0KG5ldyBHdCgiU0RLIG5vdCBlbmFibGVkLCB3aWxsIG5vdCBjYXB0dXJlIGV2ZW50LiIpKTsKICAgICAgdmFyIGEgPSAidHJhbnNhY3Rpb24iID09PSBlLnR5cGU7CiAgICAgIHJldHVybiAhYSAmJiAibnVtYmVyIiA9PSB0eXBlb2YgaSAmJiBNYXRoLnJhbmRvbSgpID4gaQogICAgICAgID8gWW4ucmVqZWN0KAogICAgICAgICAgICBuZXcgR3QoCiAgICAgICAgICAgICAgIkRpc2NhcmRpbmcgZXZlbnQgYmVjYXVzZSBpdCdzIG5vdCBpbmNsdWRlZCBpbiB0aGUgcmFuZG9tIHNhbXBsZSAoc2FtcGxpbmcgcmF0ZSA9ICIgKwogICAgICAgICAgICAgICAgaSArCiAgICAgICAgICAgICAgICAiKSIKICAgICAgICAgICAgKQogICAgICAgICAgKQogICAgICAgIDogdGhpcy5fcHJlcGFyZUV2ZW50KGUsIG4sIHQpCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3QoCiAgICAgICAgICAgICAgICAgICJBbiBldmVudCBwcm9jZXNzb3IgcmV0dXJuZWQgbnVsbCwgd2lsbCBub3Qgc2VuZCBldmVudC4iCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGlmICgodCAmJiB0LmRhdGEgJiYgITAgPT09IHQuZGF0YS5fX3NlbnRyeV9fKSB8fCBhIHx8ICFvKQogICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgICAgZSA9IG8oZSwgdCk7CiAgICAgICAgICAgICAgcmV0dXJuIHIuX2Vuc3VyZUJlZm9yZVNlbmRSdihlKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBHdCgKICAgICAgICAgICAgICAgICAgImBiZWZvcmVTZW5kYCByZXR1cm5lZCBgbnVsbGAsIHdpbGwgbm90IHNlbmQgZXZlbnQuIgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB2YXIgdCA9IG4gJiYgbi5nZXRTZXNzaW9uICYmIG4uZ2V0U2Vzc2lvbigpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAhYSAmJiB0ICYmIHIuX3VwZGF0ZVNlc3Npb25Gcm9tRXZlbnQodCwgZSksIHIuX3NlbmRFdmVudChlKSwgZQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKG51bGwsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBHdCkgdGhyb3cgZTsKICAgICAgICAgICAgICB0aHJvdyAoCiAgICAgICAgICAgICAgICAoci5jYXB0dXJlRXhjZXB0aW9uKGUsIHsKICAgICAgICAgICAgICAgICAgZGF0YTogeyBfX3NlbnRyeV9fOiAhMCB9LAogICAgICAgICAgICAgICAgICBvcmlnaW5hbEV4Y2VwdGlvbjogZSwKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgbmV3IEd0KAogICAgICAgICAgICAgICAgICAiRXZlbnQgcHJvY2Vzc2luZyBwaXBlbGluZSB0aHJldyBhbiBlcnJvciwgb3JpZ2luYWwgZXZlbnQgd2lsbCBub3QgYmUgc2VudC4gRGV0YWlscyBoYXZlIGJlZW4gc2VudCBhcyBhIG5ldyBldmVudC5cblJlYXNvbjogIiArCiAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgIH0pLAogICAgKGtyLnByb3RvdHlwZS5fcHJvY2VzcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gdGhpczsKICAgICAgKHRoaXMuX251bVByb2Nlc3NpbmcgKz0gMSksCiAgICAgICAgZS50aGVuKAogICAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIC0tdC5fbnVtUHJvY2Vzc2luZywgZTsKICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gLS10Ll9udW1Qcm9jZXNzaW5nLCBlOwogICAgICAgICAgfQogICAgICAgICk7CiAgICB9KSwKICAgIChrci5wcm90b3R5cGUuX2Vuc3VyZUJlZm9yZVNlbmRSdiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gImBiZWZvcmVTZW5kYCBtZXRob2QgaGFzIHRvIHJldHVybiBgbnVsbGAgb3IgYSB2YWxpZCBldmVudC4iOwogICAgICBpZiAoSHQoZSkpCiAgICAgICAgcmV0dXJuIGUudGhlbigKICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmICghVXQoZSkgJiYgbnVsbCAhPT0gZSkgdGhyb3cgbmV3IEd0KHQpOwogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgR3QoImJlZm9yZVNlbmQgcmVqZWN0ZWQgd2l0aCAiICsgZSk7CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgaWYgKCFVdChlKSAmJiBudWxsICE9PSBlKSB0aHJvdyBuZXcgR3QodCk7CiAgICAgIHJldHVybiBlOwogICAgfSksCiAgICAoRSA9IGtyKTsKCiAgZnVuY3Rpb24ga3IoZSwgdCkgewogICAgKHRoaXMuX2ludGVncmF0aW9ucyA9IHt9KSwKICAgICAgKHRoaXMuX251bVByb2Nlc3NpbmcgPSAwKSwKICAgICAgKHRoaXMuX2JhY2tlbmQgPSBuZXcgZSh0KSksCiAgICAgICh0aGlzLl9vcHRpb25zID0gdCkuZHNuICYmICh0aGlzLl9kc24gPSBuZXcgJHQodC5kc24pKTsKICB9CgogIHZhciBPciA9CiAgICAoKFRyLnByb3RvdHlwZS5zZW5kRXZlbnQgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gWW4ucmVzb2x2ZSh7CiAgICAgICAgcmVhc29uOgogICAgICAgICAgIk5vb3BUcmFuc3BvcnQ6IEV2ZW50IGhhcyBiZWVuIHNraXBwZWQgYmVjYXVzZSBubyBEc24gaXMgY29uZmlndXJlZC4iLAogICAgICAgIHN0YXR1czoga3QuU2tpcHBlZCwKICAgICAgfSk7CiAgICB9KSwKICAgIChUci5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gWW4ucmVzb2x2ZSghMCk7CiAgICB9KSwKICAgIFRyKTsKCiAgZnVuY3Rpb24gVHIoKSB7fQoKICAoSXIucHJvdG90eXBlLmV2ZW50RnJvbUV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICB0aHJvdyBuZXcgR3QoIkJhY2tlbmQgaGFzIHRvIGltcGxlbWVudCBgZXZlbnRGcm9tRXhjZXB0aW9uYCBtZXRob2QiKTsKICB9KSwKICAgIChJci5wcm90b3R5cGUuZXZlbnRGcm9tTWVzc2FnZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIHRocm93IG5ldyBHdCgiQmFja2VuZCBoYXMgdG8gaW1wbGVtZW50IGBldmVudEZyb21NZXNzYWdlYCBtZXRob2QiKTsKICAgIH0pLAogICAgKElyLnByb3RvdHlwZS5zZW5kRXZlbnQgPSBmdW5jdGlvbiAoZSkgewogICAgICB0aGlzLl90cmFuc3BvcnQuc2VuZEV2ZW50KGUpLnRoZW4obnVsbCwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB5bi5lcnJvcigiRXJyb3Igd2hpbGUgc2VuZGluZyBldmVudDogIiArIGUpOwogICAgICB9KTsKICAgIH0pLAogICAgKElyLnByb3RvdHlwZS5zZW5kU2Vzc2lvbiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRoaXMuX3RyYW5zcG9ydC5zZW5kU2Vzc2lvbgogICAgICAgID8gdGhpcy5fdHJhbnNwb3J0LnNlbmRTZXNzaW9uKGUpLnRoZW4obnVsbCwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgeW4uZXJyb3IoIkVycm9yIHdoaWxlIHNlbmRpbmcgc2Vzc2lvbjogIiArIGUpOwogICAgICAgICAgfSkKICAgICAgICA6IHluLndhcm4oCiAgICAgICAgICAgICJEcm9wcGluZyBzZXNzaW9uIGJlY2F1c2UgY3VzdG9tIHRyYW5zcG9ydCBkb2Vzbid0IGltcGxlbWVudCBzZW5kU2Vzc2lvbiIKICAgICAgICAgICk7CiAgICB9KSwKICAgIChJci5wcm90b3R5cGUuZ2V0VHJhbnNwb3J0ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0OwogICAgfSksCiAgICAoSXIucHJvdG90eXBlLl9zZXR1cFRyYW5zcG9ydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG5ldyBPcigpOwogICAgfSksCiAgICAobyA9IElyKTsKCiAgZnVuY3Rpb24gSXIoZSkgewogICAgKHRoaXMuX29wdGlvbnMgPSBlKSwKICAgICAgdGhpcy5fb3B0aW9ucy5kc24gfHwKICAgICAgICB5bi53YXJuKCJObyBEU04gcHJvdmlkZWQsIGJhY2tlbmQgd2lsbCBub3QgZG8gYW55dGhpbmcuIiksCiAgICAgICh0aGlzLl90cmFuc3BvcnQgPSB0aGlzLl9zZXR1cFRyYW5zcG9ydCgpKTsKICB9CgogIGZ1bmN0aW9uIENyKGUpIHsKICAgIGlmIChlLm1ldGFkYXRhICYmIGUubWV0YWRhdGEuc2RrKSB7CiAgICAgIGUgPSBlLm1ldGFkYXRhLnNkazsKICAgICAgcmV0dXJuIHsgbmFtZTogZS5uYW1lLCB2ZXJzaW9uOiBlLnZlcnNpb24gfTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGpyKGUsIHQpIHsKICAgIHZhciBuID0gQ3IodCksCiAgICAgIHIgPSBKU09OLnN0cmluZ2lmeSgKICAgICAgICBJdCgKICAgICAgICAgIEl0KHsgc2VudF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0sIG4gJiYgeyBzZGs6IG4gfSksCiAgICAgICAgICB0LmZvcmNlRW52ZWxvcGUoKSAmJiB7IGRzbjogdC5nZXREc24oKS50b1N0cmluZygpIH0KICAgICAgICApCiAgICAgICksCiAgICAgIG4gPSAiYWdncmVnYXRlcyIgaW4gZSA/ICJzZXNzaW9ucyIgOiAic2Vzc2lvbiI7CiAgICByZXR1cm4gewogICAgICBib2R5OiByICsgIlxuIiArIEpTT04uc3RyaW5naWZ5KHsgdHlwZTogbiB9KSArICJcbiIgKyBKU09OLnN0cmluZ2lmeShlKSwKICAgICAgdHlwZTogbiwKICAgICAgdXJsOiB0LmdldEVudmVsb3BlRW5kcG9pbnRXaXRoVXJsRW5jb2RlZEF1dGgoKSwKICAgIH07CiAgfQoKICBmdW5jdGlvbiBBcihlLCB0KSB7CiAgICB2YXIgbiA9IENyKHQpLAogICAgICByID0gZS50eXBlIHx8ICJldmVudCIsCiAgICAgIGkgPSAidHJhbnNhY3Rpb24iID09PSByIHx8IHQuZm9yY2VFbnZlbG9wZSgpLAogICAgICBvID0gZS5kZWJ1Z19tZXRhIHx8IHt9LAogICAgICBhID0gby50cmFuc2FjdGlvblNhbXBsaW5nLAogICAgICBzID0gQ3QobywgWyJ0cmFuc2FjdGlvblNhbXBsaW5nIl0pLAogICAgICBvID0gYSB8fCB7fSwKICAgICAgYSA9IG8ubWV0aG9kLAogICAgICBvID0gby5yYXRlOwogICAgMCA9PT0gT2JqZWN0LmtleXMocykubGVuZ3RoID8gZGVsZXRlIGUuZGVidWdfbWV0YSA6IChlLmRlYnVnX21ldGEgPSBzKTsKICAgIHZhciBjLAogICAgICBjID0gewogICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KAogICAgICAgICAgbgogICAgICAgICAgICA/ICgoYyA9IGUpLAogICAgICAgICAgICAgIChzID0gdC5tZXRhZGF0YS5zZGspICYmCiAgICAgICAgICAgICAgICAoKGMuc2RrID0gYy5zZGsgfHwge30pLAogICAgICAgICAgICAgICAgKGMuc2RrLm5hbWUgPSBjLnNkay5uYW1lIHx8IHMubmFtZSksCiAgICAgICAgICAgICAgICAoYy5zZGsudmVyc2lvbiA9IGMuc2RrLnZlcnNpb24gfHwgcy52ZXJzaW9uKSwKICAgICAgICAgICAgICAgIChjLnNkay5pbnRlZ3JhdGlvbnMgPSBSdCgKICAgICAgICAgICAgICAgICAgYy5zZGsuaW50ZWdyYXRpb25zIHx8IFtdLAogICAgICAgICAgICAgICAgICBzLmludGVncmF0aW9ucyB8fCBbXQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICAoYy5zZGsucGFja2FnZXMgPSBSdChjLnNkay5wYWNrYWdlcyB8fCBbXSwgcy5wYWNrYWdlcyB8fCBbXSkpKSwKICAgICAgICAgICAgICBjKQogICAgICAgICAgICA6IGUKICAgICAgICApLAogICAgICAgIHR5cGU6IHIsCiAgICAgICAgdXJsOiBpCiAgICAgICAgICA/IHQuZ2V0RW52ZWxvcGVFbmRwb2ludFdpdGhVcmxFbmNvZGVkQXV0aCgpCiAgICAgICAgICA6IHQuZ2V0U3RvcmVFbmRwb2ludFdpdGhVcmxFbmNvZGVkQXV0aCgpLAogICAgICB9OwogICAgcmV0dXJuICgKICAgICAgaSAmJgogICAgICAgICgobyA9CiAgICAgICAgICBKU09OLnN0cmluZ2lmeSgKICAgICAgICAgICAgSXQoCiAgICAgICAgICAgICAgSXQoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGV2ZW50X2lkOiBlLmV2ZW50X2lkLAogICAgICAgICAgICAgICAgICBzZW50X2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbiAmJiB7IHNkazogbiB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB0LmZvcmNlRW52ZWxvcGUoKSAmJiB7IGRzbjogdC5nZXREc24oKS50b1N0cmluZygpIH0KICAgICAgICAgICAgKQogICAgICAgICAgKSArCiAgICAgICAgICAiXG4iICsKICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgdHlwZTogciwKICAgICAgICAgICAgc2FtcGxlX3JhdGVzOiBbeyBpZDogYSwgcmF0ZTogbyB9XSwKICAgICAgICAgIH0pICsKICAgICAgICAgICJcbiIgKwogICAgICAgICAgYy5ib2R5KSwKICAgICAgICAoYy5ib2R5ID0gbykpLAogICAgICBjCiAgICApOwogIH0KCiAgdmFyIFJyLAogICAgRHIgPSAiNi4xMS4wIiwKICAgICQgPQogICAgICAoKFByLnByb3RvdHlwZS5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgKFJyID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nKSwKICAgICAgICAgIChGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspCiAgICAgICAgICAgICAgZVt0XSA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgdmFyIG4gPSB0aGlzLl9fc2VudHJ5X29yaWdpbmFsX18gfHwgdGhpczsKICAgICAgICAgICAgcmV0dXJuIFJyLmFwcGx5KG4sIGUpOwogICAgICAgICAgfSk7CiAgICAgIH0pLAogICAgICAoUHIuaWQgPSAiRnVuY3Rpb25Ub1N0cmluZyIpLAogICAgICBQcik7CgogIGZ1bmN0aW9uIFByKCkgewogICAgdGhpcy5uYW1lID0gUHIuaWQ7CiAgfQoKICB2YXIgTnIgPSBbCiAgICAgIC9eU2NyaXB0IGVycm9yXC4/JC8sCiAgICAgIC9eSmF2YXNjcmlwdCBlcnJvcjogU2NyaXB0IGVycm9yXC4/IG9uIGxpbmUgMCQvLAogICAgXSwKICAgIG4gPQogICAgICAoKExyLnByb3RvdHlwZS5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gZHIoKTsKICAgICAgICAgIGlmICghdCkgcmV0dXJuIGU7CiAgICAgICAgICB2YXIgbiA9IHQuZ2V0SW50ZWdyYXRpb24oTHIpOwogICAgICAgICAgaWYgKG4pIHsKICAgICAgICAgICAgKHQgPSB0LmdldENsaWVudCgpKSwKICAgICAgICAgICAgICAodCA9IHQgPyB0LmdldE9wdGlvbnMoKSA6IHt9KSwKICAgICAgICAgICAgICAodCA9CiAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBuLl9tZXJnZU9wdGlvbnMgPyBuLl9tZXJnZU9wdGlvbnModCkgOiB7fSk7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iICE9IHR5cGVvZiBuLl9zaG91bGREcm9wRXZlbnQKICAgICAgICAgICAgICA/IGUKICAgICAgICAgICAgICA6IG4uX3Nob3VsZERyb3BFdmVudChlLCB0KQogICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgIDogZTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0pOwogICAgICB9KSwKICAgICAgKExyLnByb3RvdHlwZS5fc2hvdWxkRHJvcEV2ZW50ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICByZXR1cm4gdGhpcy5faXNTZW50cnlFcnJvcihlLCB0KQogICAgICAgICAgPyAoeW4ud2FybigKICAgICAgICAgICAgICAiRXZlbnQgZHJvcHBlZCBkdWUgdG8gYmVpbmcgaW50ZXJuYWwgU2VudHJ5IEVycm9yLlxuRXZlbnQ6ICIgKwogICAgICAgICAgICAgICAgbG4oZSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgITApCiAgICAgICAgICA6IHRoaXMuX2lzSWdub3JlZEVycm9yKGUsIHQpCiAgICAgICAgICA/ICh5bi53YXJuKAogICAgICAgICAgICAgICJFdmVudCBkcm9wcGVkIGR1ZSB0byBiZWluZyBtYXRjaGVkIGJ5IGBpZ25vcmVFcnJvcnNgIG9wdGlvbi5cbkV2ZW50OiAiICsKICAgICAgICAgICAgICAgIGxuKGUpCiAgICAgICAgICAgICksCiAgICAgICAgICAgICEwKQogICAgICAgICAgOiB0aGlzLl9pc0RlbmllZFVybChlLCB0KQogICAgICAgICAgPyAoeW4ud2FybigKICAgICAgICAgICAgICAiRXZlbnQgZHJvcHBlZCBkdWUgdG8gYmVpbmcgbWF0Y2hlZCBieSBgZGVueVVybHNgIG9wdGlvbi5cbkV2ZW50OiAiICsKICAgICAgICAgICAgICAgIGxuKGUpICsKICAgICAgICAgICAgICAgICIuXG5Vcmw6ICIgKwogICAgICAgICAgICAgICAgdGhpcy5fZ2V0RXZlbnRGaWx0ZXJVcmwoZSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgITApCiAgICAgICAgICA6ICF0aGlzLl9pc0FsbG93ZWRVcmwoZSwgdCkgJiYKICAgICAgICAgICAgKHluLndhcm4oCiAgICAgICAgICAgICAgIkV2ZW50IGRyb3BwZWQgZHVlIHRvIG5vdCBiZWluZyBtYXRjaGVkIGJ5IGBhbGxvd1VybHNgIG9wdGlvbi5cbkV2ZW50OiAiICsKICAgICAgICAgICAgICAgIGxuKGUpICsKICAgICAgICAgICAgICAgICIuXG5Vcmw6ICIgKwogICAgICAgICAgICAgICAgdGhpcy5fZ2V0RXZlbnRGaWx0ZXJVcmwoZSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgITApOwogICAgICB9KSwKICAgICAgKExyLnByb3RvdHlwZS5faXNTZW50cnlFcnJvciA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKCF0Lmlnbm9yZUludGVybmFsKSByZXR1cm4gITE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIChlICYmCiAgICAgICAgICAgICAgZS5leGNlcHRpb24gJiYKICAgICAgICAgICAgICBlLmV4Y2VwdGlvbi52YWx1ZXMgJiYKICAgICAgICAgICAgICBlLmV4Y2VwdGlvbi52YWx1ZXNbMF0gJiYKICAgICAgICAgICAgICAiU2VudHJ5RXJyb3IiID09PSBlLmV4Y2VwdGlvbi52YWx1ZXNbMF0udHlwZSkgfHwKICAgICAgICAgICAgITEKICAgICAgICAgICk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuICExOwogICAgICAgIH0KICAgICAgfSksCiAgICAgIChMci5wcm90b3R5cGUuX2lzSWdub3JlZEVycm9yID0gZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgISghbi5pZ25vcmVFcnJvcnMgfHwgIW4uaWdub3JlRXJyb3JzLmxlbmd0aCkgJiYKICAgICAgICAgIHRoaXMuX2dldFBvc3NpYmxlRXZlbnRNZXNzYWdlcyhlKS5zb21lKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiBuLmlnbm9yZUVycm9ycy5zb21lKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9uKHQsIGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgKTsKICAgICAgfSksCiAgICAgIChMci5wcm90b3R5cGUuX2lzRGVuaWVkVXJsID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoIXQuZGVueVVybHMgfHwgIXQuZGVueVVybHMubGVuZ3RoKSByZXR1cm4gITE7CiAgICAgICAgdmFyIG4gPSB0aGlzLl9nZXRFdmVudEZpbHRlclVybChlKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgISFuICYmCiAgICAgICAgICB0LmRlbnlVcmxzLnNvbWUoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG9uKG4sIGUpOwogICAgICAgICAgfSkKICAgICAgICApOwogICAgICB9KSwKICAgICAgKExyLnByb3RvdHlwZS5faXNBbGxvd2VkVXJsID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoIXQuYWxsb3dVcmxzIHx8ICF0LmFsbG93VXJscy5sZW5ndGgpIHJldHVybiAhMDsKICAgICAgICB2YXIgbiA9IHRoaXMuX2dldEV2ZW50RmlsdGVyVXJsKGUpOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAhbiB8fAogICAgICAgICAgdC5hbGxvd1VybHMuc29tZShmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gb24obiwgZSk7CiAgICAgICAgICB9KQogICAgICAgICk7CiAgICAgIH0pLAogICAgICAoTHIucHJvdG90eXBlLl9tZXJnZU9wdGlvbnMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBhbGxvd1VybHM6IFJ0KAogICAgICAgICAgICB0aGlzLl9vcHRpb25zLndoaXRlbGlzdFVybHMgfHwgW10sCiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuYWxsb3dVcmxzIHx8IFtdLAogICAgICAgICAgICAoZSA9IHZvaWQgMCA9PT0gZSA/IHt9IDogZSkud2hpdGVsaXN0VXJscyB8fCBbXSwKICAgICAgICAgICAgZS5hbGxvd1VybHMgfHwgW10KICAgICAgICAgICksCiAgICAgICAgICBkZW55VXJsczogUnQoCiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuYmxhY2tsaXN0VXJscyB8fCBbXSwKICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5kZW55VXJscyB8fCBbXSwKICAgICAgICAgICAgZS5ibGFja2xpc3RVcmxzIHx8IFtdLAogICAgICAgICAgICBlLmRlbnlVcmxzIHx8IFtdCiAgICAgICAgICApLAogICAgICAgICAgaWdub3JlRXJyb3JzOiBSdCgKICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5pZ25vcmVFcnJvcnMgfHwgW10sCiAgICAgICAgICAgIGUuaWdub3JlRXJyb3JzIHx8IFtdLAogICAgICAgICAgICBOcgogICAgICAgICAgKSwKICAgICAgICAgIGlnbm9yZUludGVybmFsOgogICAgICAgICAgICB2b2lkIDAgPT09IHRoaXMuX29wdGlvbnMuaWdub3JlSW50ZXJuYWwgfHwKICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5pZ25vcmVJbnRlcm5hbCwKICAgICAgICB9OwogICAgICB9KSwKICAgICAgKExyLnByb3RvdHlwZS5fZ2V0UG9zc2libGVFdmVudE1lc3NhZ2VzID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAodC5tZXNzYWdlKSByZXR1cm4gW3QubWVzc2FnZV07CiAgICAgICAgaWYgKHQuZXhjZXB0aW9uKQogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGUgPSAodC5leGNlcHRpb24udmFsdWVzICYmIHQuZXhjZXB0aW9uLnZhbHVlc1swXSkgfHwge30sCiAgICAgICAgICAgICAgbiA9IGUudHlwZSwKICAgICAgICAgICAgICByID0gdm9pZCAwID09PSBuID8gIiIgOiBuLAogICAgICAgICAgICAgIGkgPSBlLnZhbHVlLAogICAgICAgICAgICAgIG8gPSB2b2lkIDAgPT09IGkgPyAiIiA6IGk7CiAgICAgICAgICAgIHJldHVybiBbIiIgKyBvLCByICsgIjogIiArIG9dOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4geW4uZXJyb3IoIkNhbm5vdCBleHRyYWN0IG1lc3NhZ2UgZm9yIGV2ZW50ICIgKyBsbih0KSksIFtdOwogICAgICAgICAgfQogICAgICAgIHJldHVybiBbXTsKICAgICAgfSksCiAgICAgIChMci5wcm90b3R5cGUuX2dldExhc3RWYWxpZFVybCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IChlID0gdm9pZCAwID09PSBlID8gW10gOiBlKS5sZW5ndGggLSAxOyAwIDw9IHQ7IHQtLSkgewogICAgICAgICAgdmFyIG4gPSBlW3RdOwogICAgICAgICAgaWYgKAogICAgICAgICAgICAiPGFub255bW91cz4iICE9PSAobnVsbCA9PT0gbiB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmZpbGVuYW1lKQogICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gbi5maWxlbmFtZSB8fCBudWxsOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSksCiAgICAgIChMci5wcm90b3R5cGUuX2dldEV2ZW50RmlsdGVyVXJsID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKHQuc3RhY2t0cmFjZSkgewogICAgICAgICAgICB2YXIgZSA9IHQuc3RhY2t0cmFjZS5mcmFtZXM7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRMYXN0VmFsaWRVcmwoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodC5leGNlcHRpb24pIHsKICAgICAgICAgICAgdmFyIG4gPQogICAgICAgICAgICAgIHQuZXhjZXB0aW9uLnZhbHVlcyAmJgogICAgICAgICAgICAgIHQuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlICYmCiAgICAgICAgICAgICAgdC5leGNlcHRpb24udmFsdWVzWzBdLnN0YWNrdHJhY2UuZnJhbWVzOwogICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0TGFzdFZhbGlkVXJsKG4pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuIHluLmVycm9yKCJDYW5ub3QgZXh0cmFjdCB1cmwgZm9yIGV2ZW50ICIgKyBsbih0KSksIG51bGw7CiAgICAgICAgfQogICAgICB9KSwKICAgICAgKExyLmlkID0gIkluYm91bmRGaWx0ZXJzIiksCiAgICAgIExyKTsKCiAgZnVuY3Rpb24gTHIoZSkgewogICAgKHRoaXMuX29wdGlvbnMgPSBlID0gdm9pZCAwID09PSBlID8ge30gOiBlKSwgKHRoaXMubmFtZSA9IExyLmlkKTsKICB9CgogIHZhciBxciA9ICI/IiwKICAgIE1yID0KICAgICAgL15ccyphdCAoPzooLio/KSA/XCgpPygoPzpmaWxlfGh0dHBzP3xibG9ifGNocm9tZS1leHRlbnNpb258YWRkcmVzc3xuYXRpdmV8ZXZhbHx3ZWJwYWNrfDxhbm9ueW1vdXM+fFstYS16XSs6fC4qYnVuZGxlfFwvKS4qPykoPzo6KFxkKykpPyg/OjooXGQrKSk/XCk/XHMqJC9pLAogICAgVXIgPQogICAgICAvXlxzKiguKj8pKD86XCgoLio/KVwpKT8oPzpefEApPygoPzpmaWxlfGh0dHBzP3xibG9ifGNocm9tZXx3ZWJwYWNrfHJlc291cmNlfG1vei1leHRlbnNpb258Y2FwYWNpdG9yKS4qPzpcLy4qP3xcW25hdGl2ZSBjb2RlXF18W15AXSooPzpidW5kbGV8XGQrXC5qcyl8XC9bXHdcLS4gLz1dKykoPzo6KFxkKykpPyg/OjooXGQrKSk/XHMqJC9pLAogICAgRnIgPQogICAgICAvXlxzKmF0ICg/OigoPzpcW29iamVjdCBvYmplY3RcXSk/LispICk/XCg/KCg/OmZpbGV8bXMtYXBweHxodHRwcz98d2VicGFja3xibG9iKTouKj8pOihcZCspKD86OihcZCspKT9cKT9ccyokL2ksCiAgICBCciA9IC8oXFMrKSBsaW5lIChcZCspKD86ID4gZXZhbCBsaW5lIFxkKykqID4gZXZhbC9pLAogICAgSHIgPSAvXCgoXFMqKSg/OjooXGQrKSkoPzo6KFxkKykpXCkvLAogICAgenIgPSAvTWluaWZpZWQgUmVhY3QgZXJyb3IgI1xkKzsvaTsKCiAgZnVuY3Rpb24gV3IoZSkgewogICAgdmFyIHQgPSBudWxsLAogICAgICBuID0gMDsKICAgIGUgJiYKICAgICAgKCJudW1iZXIiID09IHR5cGVvZiBlLmZyYW1lc1RvUG9wCiAgICAgICAgPyAobiA9IGUuZnJhbWVzVG9Qb3ApCiAgICAgICAgOiB6ci50ZXN0KGUubWVzc2FnZSkgJiYgKG4gPSAxKSk7CiAgICB0cnkgewogICAgICBpZiAoCiAgICAgICAgKHQgPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmICghZSB8fCAhZS5zdGFja3RyYWNlKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGZvciAoCiAgICAgICAgICAgIHZhciB0LAogICAgICAgICAgICAgIG4gPSBlLnN0YWNrdHJhY2UsCiAgICAgICAgICAgICAgciA9IC8gbGluZSAoXGQrKS4qc2NyaXB0ICg/OmluICk/KFxTKykoPzo6IGluIGZ1bmN0aW9uIChcUyspKT8kL2ksCiAgICAgICAgICAgICAgaSA9CiAgICAgICAgICAgICAgICAvIGxpbmUgKFxkKyksIGNvbHVtbiAoXGQrKVxzKig/OmluICg/Ojxhbm9ueW1vdXMgZnVuY3Rpb246IChbXj5dKyk+fChbXildKykpXCgoLiopXCkpPyBpbiAoLiopOlxzKiQvaSwKICAgICAgICAgICAgICBvID0gbi5zcGxpdCgiXG4iKSwKICAgICAgICAgICAgICBhID0gW10sCiAgICAgICAgICAgICAgcyA9IDA7CiAgICAgICAgICAgIHMgPCBvLmxlbmd0aDsKICAgICAgICAgICAgcyArPSAyCiAgICAgICAgICApIHsKICAgICAgICAgICAgdmFyIGMgPSBudWxsOwogICAgICAgICAgICAodCA9IHIuZXhlYyhvW3NdKSkKICAgICAgICAgICAgICA/IChjID0gewogICAgICAgICAgICAgICAgICB1cmw6IHRbMl0sCiAgICAgICAgICAgICAgICAgIGZ1bmM6IHRbM10sCiAgICAgICAgICAgICAgICAgIGFyZ3M6IFtdLAogICAgICAgICAgICAgICAgICBsaW5lOiArdFsxXSwKICAgICAgICAgICAgICAgICAgY29sdW1uOiBudWxsLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6ICh0ID0gaS5leGVjKG9bc10pKSAmJgogICAgICAgICAgICAgICAgKGMgPSB7CiAgICAgICAgICAgICAgICAgIHVybDogdFs2XSwKICAgICAgICAgICAgICAgICAgZnVuYzogdFszXSB8fCB0WzRdLAogICAgICAgICAgICAgICAgICBhcmdzOiB0WzVdID8gdFs1XS5zcGxpdCgiLCIpIDogW10sCiAgICAgICAgICAgICAgICAgIGxpbmU6ICt0WzFdLAogICAgICAgICAgICAgICAgICBjb2x1bW46ICt0WzJdLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgYyAmJiAoIWMuZnVuYyAmJiBjLmxpbmUgJiYgKGMuZnVuYyA9IHFyKSwgYS5wdXNoKGMpKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBhLmxlbmd0aCA/IHsgbWVzc2FnZTogVnIoZSksIG5hbWU6IGUubmFtZSwgc3RhY2s6IGEgfSA6IG51bGw7CiAgICAgICAgfSkoZSkpCiAgICAgICkKICAgICAgICByZXR1cm4gWXIodCwgbik7CiAgICB9IGNhdGNoIChlKSB7fQogICAgdHJ5IHsKICAgICAgaWYgKAogICAgICAgICh0ID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoIWUgfHwgIWUuc3RhY2spIHJldHVybiBudWxsOwogICAgICAgICAgZm9yICgKICAgICAgICAgICAgdmFyIHQsIG4sIHIgPSBbXSwgaSA9IGUuc3RhY2suc3BsaXQoIlxuIiksIG8gPSAwOwogICAgICAgICAgICBvIDwgaS5sZW5ndGg7CiAgICAgICAgICAgICsrbwogICAgICAgICAgKSB7CiAgICAgICAgICAgIGlmICgobiA9IE1yLmV4ZWMoaVtvXSkpKSB7CiAgICAgICAgICAgICAgdmFyIGEgPSBuWzJdICYmIDAgPT09IG5bMl0uaW5kZXhPZigibmF0aXZlIik7CiAgICAgICAgICAgICAgblsyXSAmJgogICAgICAgICAgICAgICAgMCA9PT0gblsyXS5pbmRleE9mKCJldmFsIikgJiYKICAgICAgICAgICAgICAgICh0ID0gSHIuZXhlYyhuWzJdKSkgJiYKICAgICAgICAgICAgICAgICgoblsyXSA9IHRbMV0pLCAoblszXSA9IHRbMl0pLCAobls0XSA9IHRbM10pKTsKICAgICAgICAgICAgICB2YXIgcyA9CiAgICAgICAgICAgICAgICAgIG5bMl0gJiYgMCA9PT0gblsyXS5pbmRleE9mKCJhZGRyZXNzIGF0ICIpCiAgICAgICAgICAgICAgICAgICAgPyBuWzJdLnN1YnN0cigiYWRkcmVzcyBhdCAiLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgICA6IG5bMl0sCiAgICAgICAgICAgICAgICBjID0gblsxXSB8fCBxciwKICAgICAgICAgICAgICAgIHUgPSAtMSAhPT0gYy5pbmRleE9mKCJzYWZhcmktZXh0ZW5zaW9uIiksCiAgICAgICAgICAgICAgICBsID0gLTEgIT09IGMuaW5kZXhPZigic2FmYXJpLXdlYi1leHRlbnNpb24iKTsKICAgICAgICAgICAgICAodSB8fCBsKSAmJgogICAgICAgICAgICAgICAgKChjID0gLTEgIT09IGMuaW5kZXhPZigiQCIpID8gYy5zcGxpdCgiQCIpWzBdIDogcXIpLAogICAgICAgICAgICAgICAgKHMgPSB1CiAgICAgICAgICAgICAgICAgID8gInNhZmFyaS1leHRlbnNpb246IiArIHMKICAgICAgICAgICAgICAgICAgOiAic2FmYXJpLXdlYi1leHRlbnNpb246IiArIHMpKSwKICAgICAgICAgICAgICAgIChhID0gewogICAgICAgICAgICAgICAgICB1cmw6IHMsCiAgICAgICAgICAgICAgICAgIGZ1bmM6IGMsCiAgICAgICAgICAgICAgICAgIGFyZ3M6IGEgPyBbblsyXV0gOiBbXSwKICAgICAgICAgICAgICAgICAgbGluZTogblszXSA/ICtuWzNdIDogbnVsbCwKICAgICAgICAgICAgICAgICAgY29sdW1uOiBuWzRdID8gK25bNF0gOiBudWxsLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoKG4gPSBGci5leGVjKGlbb10pKSkKICAgICAgICAgICAgICBhID0gewogICAgICAgICAgICAgICAgdXJsOiBuWzJdLAogICAgICAgICAgICAgICAgZnVuYzogblsxXSB8fCBxciwKICAgICAgICAgICAgICAgIGFyZ3M6IFtdLAogICAgICAgICAgICAgICAgbGluZTogK25bM10sCiAgICAgICAgICAgICAgICBjb2x1bW46IG5bNF0gPyArbls0XSA6IG51bGwsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCEobiA9IFVyLmV4ZWMoaVtvXSkpKSBjb250aW51ZTsKICAgICAgICAgICAgICBuWzNdICYmIC0xIDwgblszXS5pbmRleE9mKCIgPiBldmFsIikgJiYgKHQgPSBCci5leGVjKG5bM10pKQogICAgICAgICAgICAgICAgPyAoKG5bMV0gPSBuWzFdIHx8ICJldmFsIiksCiAgICAgICAgICAgICAgICAgIChuWzNdID0gdFsxXSksCiAgICAgICAgICAgICAgICAgIChuWzRdID0gdFsyXSksCiAgICAgICAgICAgICAgICAgIChuWzVdID0gIiIpKQogICAgICAgICAgICAgICAgOiAwICE9PSBvIHx8CiAgICAgICAgICAgICAgICAgIG5bNV0gfHwKICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlLmNvbHVtbk51bWJlciB8fAogICAgICAgICAgICAgICAgICAoclswXS5jb2x1bW4gPSBlLmNvbHVtbk51bWJlciArIDEpLAogICAgICAgICAgICAgICAgKGEgPSB7CiAgICAgICAgICAgICAgICAgIHVybDogblszXSwKICAgICAgICAgICAgICAgICAgZnVuYzogblsxXSB8fCBxciwKICAgICAgICAgICAgICAgICAgYXJnczogblsyXSA/IG5bMl0uc3BsaXQoIiwiKSA6IFtdLAogICAgICAgICAgICAgICAgICBsaW5lOiBuWzRdID8gK25bNF0gOiBudWxsLAogICAgICAgICAgICAgICAgICBjb2x1bW46IG5bNV0gPyArbls1XSA6IG51bGwsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAhYS5mdW5jICYmIGEubGluZSAmJiAoYS5mdW5jID0gcXIpLCByLnB1c2goYSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gci5sZW5ndGggPyB7IG1lc3NhZ2U6IFZyKGUpLCBuYW1lOiBlLm5hbWUsIHN0YWNrOiByIH0gOiBudWxsOwogICAgICAgIH0pKGUpKQogICAgICApCiAgICAgICAgcmV0dXJuIFlyKHQsIG4pOwogICAgfSBjYXRjaCAoZSkge30KICAgIHJldHVybiB7IG1lc3NhZ2U6IFZyKGUpLCBuYW1lOiBlICYmIGUubmFtZSwgc3RhY2s6IFtdLCBmYWlsZWQ6ICEwIH07CiAgfQoKICBmdW5jdGlvbiBZcih0LCBlKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gSXQoSXQoe30sIHQpLCB7IHN0YWNrOiB0LnN0YWNrLnNsaWNlKGUpIH0pOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gdDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIFZyKGUpIHsKICAgIGUgPSBlICYmIGUubWVzc2FnZTsKICAgIHJldHVybiBlCiAgICAgID8gZS5lcnJvciAmJiAic3RyaW5nIiA9PSB0eXBlb2YgZS5lcnJvci5tZXNzYWdlCiAgICAgICAgPyBlLmVycm9yLm1lc3NhZ2UKICAgICAgICA6IGUKICAgICAgOiAiTm8gZXJyb3IgbWVzc2FnZSI7CiAgfQoKICB2YXIgR3IgPSA1MDsKCiAgZnVuY3Rpb24gSnIoZSkgewogICAgdmFyIHQgPSAkcihlLnN0YWNrKSwKICAgICAgZSA9IHsgdHlwZTogZS5uYW1lLCB2YWx1ZTogZS5tZXNzYWdlIH07CiAgICByZXR1cm4gKAogICAgICB0ICYmIHQubGVuZ3RoICYmIChlLnN0YWNrdHJhY2UgPSB7IGZyYW1lczogdCB9KSwKICAgICAgdm9pZCAwID09PSBlLnR5cGUgJiYKICAgICAgICAiIiA9PT0gZS52YWx1ZSAmJgogICAgICAgIChlLnZhbHVlID0gIlVucmVjb3ZlcmFibGUgZXJyb3IgY2F1Z2h0IiksCiAgICAgIGUKICAgICk7CiAgfQoKICBmdW5jdGlvbiBYcihlLCB0LCBuKSB7CiAgICBlID0gewogICAgICBleGNlcHRpb246IHsKICAgICAgICB2YWx1ZXM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogRnQoZSkKICAgICAgICAgICAgICA/IGUuY29uc3RydWN0b3IubmFtZQogICAgICAgICAgICAgIDogbgogICAgICAgICAgICAgID8gIlVuaGFuZGxlZFJlamVjdGlvbiIKICAgICAgICAgICAgICA6ICJFcnJvciIsCiAgICAgICAgICAgIHZhbHVlOgogICAgICAgICAgICAgICJOb24tRXJyb3IgIiArCiAgICAgICAgICAgICAgKG4gPyAicHJvbWlzZSByZWplY3Rpb24iIDogImV4Y2VwdGlvbiIpICsKICAgICAgICAgICAgICAiIGNhcHR1cmVkIHdpdGgga2V5czogIiArCiAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSA0MCk7CiAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKHhuKGUpKTsKICAgICAgICAgICAgICAgIGlmICgobi5zb3J0KCksICFuLmxlbmd0aCkpIHJldHVybiAiW29iamVjdCBoYXMgbm8ga2V5c10iOwogICAgICAgICAgICAgICAgaWYgKG5bMF0ubGVuZ3RoID49IHQpIHJldHVybiBubihuWzBdLCB0KTsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBuLmxlbmd0aDsgMCA8IHI7IHItLSkgewogICAgICAgICAgICAgICAgICB2YXIgaSA9IG4uc2xpY2UoMCwgcikuam9pbigiLCAiKTsKICAgICAgICAgICAgICAgICAgaWYgKCEoaS5sZW5ndGggPiB0KSkgcmV0dXJuIHIgPT09IG4ubGVuZ3RoID8gaSA6IG5uKGksIHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICAgIH0pKGUpLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBleHRyYTogewogICAgICAgIF9fc2VyaWFsaXplZF9fOiAoZnVuY3Rpb24gZSh0LCBuLCByKSB7CiAgICAgICAgICB2b2lkIDAgPT09IHIgJiYgKHIgPSAxMDI0MDApOwogICAgICAgICAgdmFyIGkgPSBJbih0LCAobiA9IHZvaWQgMCA9PT0gbiA/IDMgOiBuKSk7CiAgICAgICAgICByZXR1cm4ga24oaSkgPiByID8gZSh0LCBuIC0gMSwgcikgOiBpOwogICAgICAgIH0pKGUpLAogICAgICB9LAogICAgfTsKICAgIHJldHVybiB0ICYmICgodCA9ICRyKFdyKHQpLnN0YWNrKSksIChlLnN0YWNrdHJhY2UgPSB7IGZyYW1lczogdCB9KSksIGU7CiAgfQoKICBmdW5jdGlvbiBLcihlKSB7CiAgICByZXR1cm4geyBleGNlcHRpb246IHsgdmFsdWVzOiBbSnIoZSldIH0gfTsKICB9CgogIGZ1bmN0aW9uICRyKGUpIHsKICAgIGlmICghZSB8fCAhZS5sZW5ndGgpIHJldHVybiBbXTsKICAgIHZhciB0ID0gZSwKICAgICAgbiA9IHRbMF0uZnVuYyB8fCAiIiwKICAgICAgZSA9IHRbdC5sZW5ndGggLSAxXS5mdW5jIHx8ICIiOwogICAgcmV0dXJuICgKICAgICAgKC0xID09PSBuLmluZGV4T2YoImNhcHR1cmVNZXNzYWdlIikgJiYKICAgICAgICAtMSA9PT0gbi5pbmRleE9mKCJjYXB0dXJlRXhjZXB0aW9uIikpIHx8CiAgICAgICAgKHQgPSB0LnNsaWNlKDEpKSwKICAgICAgKHQgPSAtMSAhPT0gZS5pbmRleE9mKCJzZW50cnlXcmFwcGVkIikgPyB0LnNsaWNlKDAsIC0xKSA6IHQpCiAgICAgICAgLnNsaWNlKDAsIEdyKQogICAgICAgIC5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvbG5vOiBudWxsID09PSBlLmNvbHVtbiA/IHZvaWQgMCA6IGUuY29sdW1uLAogICAgICAgICAgICBmaWxlbmFtZTogZS51cmwgfHwgdFswXS51cmwsCiAgICAgICAgICAgIGZ1bmN0aW9uOiBlLmZ1bmMgfHwgIj8iLAogICAgICAgICAgICBpbl9hcHA6ICEwLAogICAgICAgICAgICBsaW5lbm86IG51bGwgPT09IGUubGluZSA/IHZvaWQgMCA6IGUubGluZSwKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgICAucmV2ZXJzZSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gUXIoZSwgdCwgbikgewogICAgaWYgKCh2b2lkIDAgPT09IG4gJiYgKG4gPSB7fSksIE50KGUpICYmIGUuZXJyb3IpKQogICAgICByZXR1cm4gKHIgPSBLcihXcigoZSA9IGUuZXJyb3IpKSkpOwogICAgaWYgKAogICAgICBMdChlKSB8fAogICAgICAoKG8gPSBlKSwgIltvYmplY3QgRE9NRXhjZXB0aW9uXSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSkKICAgICkgewogICAgICB2YXIgciwKICAgICAgICBpID0gZSwKICAgICAgICBvID0gaS5uYW1lIHx8IChMdChpKSA/ICJET01FcnJvciIgOiAiRE9NRXhjZXB0aW9uIiksCiAgICAgICAgbyA9IGkubWVzc2FnZSA/IG8gKyAiOiAiICsgaS5tZXNzYWdlIDogbzsKICAgICAgcmV0dXJuICgKICAgICAgICBkbigociA9IFpyKG8sIHQsIG4pKSwgbyksCiAgICAgICAgImNvZGUiIGluIGkgJiYKICAgICAgICAgIChyLnRhZ3MgPSBJdChJdCh7fSwgci50YWdzKSwgeyAiRE9NRXhjZXB0aW9uLmNvZGUiOiAiIiArIGkuY29kZSB9KSksCiAgICAgICAgcgogICAgICApOwogICAgfQogICAgcmV0dXJuIFB0KGUpCiAgICAgID8gKHIgPSBLcihXcihlKSkpCiAgICAgIDogKFV0KGUpIHx8IEZ0KGUpCiAgICAgICAgICA/IGZuKChyID0gWHIoZSwgdCwgbi5yZWplY3Rpb24pKSwgeyBzeW50aGV0aWM6ICEwIH0pCiAgICAgICAgICA6IChkbigociA9IFpyKGUsIHQsIG4pKSwgIiIgKyBlLCB2b2lkIDApLCBmbihyLCB7IHN5bnRoZXRpYzogITAgfSkpLAogICAgICAgIHIpOwogIH0KCiAgZnVuY3Rpb24gWnIoZSwgdCwgbikgewogICAgZSA9IHsgbWVzc2FnZTogZSB9OwogICAgcmV0dXJuICgKICAgICAgKG4gPSB2b2lkIDAgPT09IG4gPyB7fSA6IG4pLmF0dGFjaFN0YWNrdHJhY2UgJiYKICAgICAgICB0ICYmCiAgICAgICAgKCh0ID0gJHIoV3IodCkuc3RhY2spKSwgKGUuc3RhY2t0cmFjZSA9IHsgZnJhbWVzOiB0IH0pKSwKICAgICAgZQogICAgKTsKICB9CgogIHZhciBlaSA9IHsKICAgICAgZXZlbnQ6ICJlcnJvciIsCiAgICAgIHRyYW5zYWN0aW9uOiAidHJhbnNhY3Rpb24iLAogICAgICBzZXNzaW9uOiAic2Vzc2lvbiIsCiAgICAgIGF0dGFjaG1lbnQ6ICJhdHRhY2htZW50IiwKICAgIH0sCiAgICBQZSA9CiAgICAgICgodGkucHJvdG90eXBlLnNlbmRFdmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdGhyb3cgbmV3IEd0KCJUcmFuc3BvcnQgQ2xhc3MgaGFzIHRvIGltcGxlbWVudCBgc2VuZEV2ZW50YCBtZXRob2QiKTsKICAgICAgfSksCiAgICAgICh0aS5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB0aGlzLl9idWZmZXIuZHJhaW4oZSk7CiAgICAgIH0pLAogICAgICAodGkucHJvdG90eXBlLl9oYW5kbGVSZXNwb25zZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSBlLnJlcXVlc3RUeXBlLAogICAgICAgICAgbiA9IGUucmVzcG9uc2UsCiAgICAgICAgICByID0gZS5oZWFkZXJzLAogICAgICAgICAgaSA9IGUucmVzb2x2ZSwKICAgICAgICAgIG8gPSBlLnJlamVjdCwKICAgICAgICAgIGUgPSBrdC5mcm9tSHR0cENvZGUobi5zdGF0dXMpOwogICAgICAgIHRoaXMuX2hhbmRsZVJhdGVMaW1pdChyKSAmJgogICAgICAgICAgeW4ud2FybigKICAgICAgICAgICAgIlRvbyBtYW55ICIgKwogICAgICAgICAgICAgIHQgKwogICAgICAgICAgICAgICIgcmVxdWVzdHMsIGJhY2tpbmcgb2ZmIHVudGlsOiAiICsKICAgICAgICAgICAgICB0aGlzLl9kaXNhYmxlZFVudGlsKHQpCiAgICAgICAgICApLAogICAgICAgICAgZSAhPT0ga3QuU3VjY2VzcyA/IG8obikgOiBpKHsgc3RhdHVzOiBlIH0pOwogICAgICB9KSwKICAgICAgKHRpLnByb3RvdHlwZS5fZGlzYWJsZWRVbnRpbCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3JhdGVMaW1pdHNbZWlbZV1dIHx8IHRoaXMuX3JhdGVMaW1pdHMuYWxsOwogICAgICB9KSwKICAgICAgKHRpLnByb3RvdHlwZS5faXNSYXRlTGltaXRlZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkVW50aWwoZSkgPiBuZXcgRGF0ZShEYXRlLm5vdygpKTsKICAgICAgfSksCiAgICAgICh0aS5wcm90b3R5cGUuX2hhbmRsZVJhdGVMaW1pdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQsCiAgICAgICAgICBuLAogICAgICAgICAgciwKICAgICAgICAgIGksCiAgICAgICAgICBvID0gRGF0ZS5ub3coKSwKICAgICAgICAgIGEgPSBlWyJ4LXNlbnRyeS1yYXRlLWxpbWl0cyJdLAogICAgICAgICAgZSA9IGVbInJldHJ5LWFmdGVyIl07CiAgICAgICAgaWYgKGEpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgdmFyIHMgPSBqdChhLnRyaW0oKS5zcGxpdCgiLCIpKSwgYyA9IHMubmV4dCgpOwogICAgICAgICAgICAgICFjLmRvbmU7CiAgICAgICAgICAgICAgYyA9IHMubmV4dCgpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHZhciB1ID0gYy52YWx1ZS5zcGxpdCgiOiIsIDIpLAogICAgICAgICAgICAgICAgbCA9IHBhcnNlSW50KHVbMF0sIDEwKSwKICAgICAgICAgICAgICAgIHAgPSAxZTMgKiAoaXNOYU4obCkgPyA2MCA6IGwpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICB2YXIgZCA9ICgociA9IHZvaWQgMCksIGp0KHVbMV0uc3BsaXQoIjsiKSkpLCBmID0gZC5uZXh0KCk7CiAgICAgICAgICAgICAgICAgICFmLmRvbmU7CiAgICAgICAgICAgICAgICAgIGYgPSBkLm5leHQoKQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHZhciBoID0gZi52YWx1ZTsKICAgICAgICAgICAgICAgICAgdGhpcy5fcmF0ZUxpbWl0c1toIHx8ICJhbGwiXSA9IG5ldyBEYXRlKG8gKyBwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByID0geyBlcnJvcjogZSB9OwogICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBmICYmICFmLmRvbmUgJiYgKGkgPSBkLnJldHVybikgJiYgaS5jYWxsKGQpOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgaWYgKHIpIHRocm93IHIuZXJyb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHQgPSB7IGVycm9yOiBlIH07CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGMgJiYgIWMuZG9uZSAmJiAobiA9IHMucmV0dXJuKSAmJiBuLmNhbGwocyk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKHQpIHRocm93IHQuZXJyb3I7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgICEhZSAmJgogICAgICAgICAgKCh0aGlzLl9yYXRlTGltaXRzLmFsbCA9IG5ldyBEYXRlKAogICAgICAgICAgICBvICsKICAgICAgICAgICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIDZlNDsKICAgICAgICAgICAgICAgIHZhciBuID0gcGFyc2VJbnQoIiIgKyB0LCAxMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4obikKICAgICAgICAgICAgICAgICAgPyAoKHQgPSBEYXRlLnBhcnNlKCIiICsgdCkpLCBpc05hTih0KSA/IDZlNCA6IHQgLSBlKQogICAgICAgICAgICAgICAgICA6IDFlMyAqIG47CiAgICAgICAgICAgICAgfSkobywgZSkKICAgICAgICAgICkpLAogICAgICAgICAgITApCiAgICAgICAgKTsKICAgICAgfSksCiAgICAgIHRpKTsKCiAgZnVuY3Rpb24gdGkoZSkgewogICAgKHRoaXMub3B0aW9ucyA9IGUpLAogICAgICAodGhpcy5fYnVmZmVyID0gbmV3IEduKDMwKSksCiAgICAgICh0aGlzLl9yYXRlTGltaXRzID0ge30pLAogICAgICAodGhpcy5fYXBpID0gbmV3IGJyKGUuZHNuLCBlLl9tZXRhZGF0YSwgZS50dW5uZWwpKSwKICAgICAgKHRoaXMudXJsID0gdGhpcy5fYXBpLmdldFN0b3JlRW5kcG9pbnRXaXRoVXJsRW5jb2RlZEF1dGgoKSk7CiAgfQoKICB2YXIgbmksCiAgICByaSA9CiAgICAgICh3dChpaSwgKG5pID0gUGUpKSwKICAgICAgKGlpLnByb3RvdHlwZS5zZW5kRXZlbnQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChBcihlLCB0aGlzLl9hcGkpLCBlKTsKICAgICAgfSksCiAgICAgIChpaS5wcm90b3R5cGUuc2VuZFNlc3Npb24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChqcihlLCB0aGlzLl9hcGkpLCBlKTsKICAgICAgfSksCiAgICAgIChpaS5wcm90b3R5cGUuX3NlbmRSZXF1ZXN0ID0gZnVuY3Rpb24gKGksIGUpIHsKICAgICAgICB2YXIgbyA9IHRoaXM7CiAgICAgICAgaWYgKHRoaXMuX2lzUmF0ZUxpbWl0ZWQoaS50eXBlKSkKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7CiAgICAgICAgICAgIGV2ZW50OiBlLAogICAgICAgICAgICB0eXBlOiBpLnR5cGUsCiAgICAgICAgICAgIHJlYXNvbjoKICAgICAgICAgICAgICAiVHJhbnNwb3J0IGZvciAiICsKICAgICAgICAgICAgICBpLnR5cGUgKwogICAgICAgICAgICAgICIgcmVxdWVzdHMgbG9ja2VkIHRpbGwgIiArCiAgICAgICAgICAgICAgdGhpcy5fZGlzYWJsZWRVbnRpbChpLnR5cGUpICsKICAgICAgICAgICAgICAiIGR1ZSB0byB0b28gbWFueSByZXF1ZXN0cy4iLAogICAgICAgICAgICBzdGF0dXM6IDQyOSwKICAgICAgICAgIH0pOwogICAgICAgIHZhciB0ID0gewogICAgICAgICAgYm9keTogaS5ib2R5LAogICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICByZWZlcnJlclBvbGljeTogKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGpuKCkpCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVxdWVzdCgiXyIsIHsgcmVmZXJyZXJQb2xpY3k6ICJvcmlnaW4iIH0pLCAxOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9KSgpCiAgICAgICAgICAgID8gIm9yaWdpbiIKICAgICAgICAgICAgOiAiIiwKICAgICAgICB9OwogICAgICAgIHJldHVybiAoCiAgICAgICAgICB2b2lkIDAgIT09IHRoaXMub3B0aW9ucy5mZXRjaFBhcmFtZXRlcnMgJiYKICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0LCB0aGlzLm9wdGlvbnMuZmV0Y2hQYXJhbWV0ZXJzKSwKICAgICAgICAgIHZvaWQgMCAhPT0gdGhpcy5vcHRpb25zLmhlYWRlcnMgJiYgKHQuaGVhZGVycyA9IHRoaXMub3B0aW9ucy5oZWFkZXJzKSwKICAgICAgICAgIHRoaXMuX2J1ZmZlci5hZGQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFluKGZ1bmN0aW9uIChuLCByKSB7CiAgICAgICAgICAgICAgby5fZmV0Y2goaS51cmwsIHQpCiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICB2YXIgdCA9IHsKICAgICAgICAgICAgICAgICAgICAieC1zZW50cnktcmF0ZS1saW1pdHMiOiBlLmhlYWRlcnMuZ2V0KAogICAgICAgICAgICAgICAgICAgICAgIlgtU2VudHJ5LVJhdGUtTGltaXRzIgogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgInJldHJ5LWFmdGVyIjogZS5oZWFkZXJzLmdldCgiUmV0cnktQWZ0ZXIiKSwKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgby5faGFuZGxlUmVzcG9uc2UoewogICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUeXBlOiBpLnR5cGUsCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IGUsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdCwKICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiBuLAogICAgICAgICAgICAgICAgICAgIHJlamVjdDogciwKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKHIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgKTsKICAgICAgfSksCiAgICAgIGlpKTsKCiAgZnVuY3Rpb24gaWkoZSwgdCkgewogICAgdm9pZCAwID09PSB0ICYmCiAgICAgICh0ID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZSwKICAgICAgICAgIHQgPSBzbigpOwogICAgICAgIGlmIChBbih0LmZldGNoKSkgcmV0dXJuIHQuZmV0Y2guYmluZCh0KTsKICAgICAgICB2YXIgbiA9IHQuZG9jdW1lbnQsCiAgICAgICAgICByID0gdC5mZXRjaDsKICAgICAgICBpZiAoCiAgICAgICAgICAiZnVuY3Rpb24iID09CiAgICAgICAgICB0eXBlb2YgKG51bGwgPT09IG4gfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jcmVhdGVFbGVtZW50KQogICAgICAgICkKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHZhciBpID0gbi5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAgICAgICAgICAgKGkuaGlkZGVuID0gITApLAogICAgICAgICAgICAgIG4uaGVhZC5hcHBlbmRDaGlsZChpKSwKICAgICAgICAgICAgICBudWxsICE9PSAoZSA9IGkuY29udGVudFdpbmRvdykgJiYKICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZSAmJgogICAgICAgICAgICAgICAgZS5mZXRjaCAmJgogICAgICAgICAgICAgICAgKHIgPSBpLmNvbnRlbnRXaW5kb3cuZmV0Y2gpLAogICAgICAgICAgICAgIG4uaGVhZC5yZW1vdmVDaGlsZChpKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgeW4ud2FybigKICAgICAgICAgICAgICAiQ291bGQgbm90IGNyZWF0ZSBzYW5kYm94IGlmcmFtZSBmb3IgcHVyZSBmZXRjaCBjaGVjaywgYmFpbGluZyB0byB3aW5kb3cuZmV0Y2g6ICIsCiAgICAgICAgICAgICAgZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIHJldHVybiByLmJpbmQodCk7CiAgICAgIH0pKCkpOwogICAgZSA9IG5pLmNhbGwodGhpcywgZSkgfHwgdGhpczsKICAgIHJldHVybiAoZS5fZmV0Y2ggPSB0KSwgZTsKICB9CgogIHZhciBvaSwKICAgIGFpID0KICAgICAgKHd0KHNpLCAob2kgPSBQZSkpLAogICAgICAoc2kucHJvdG90eXBlLnNlbmRFdmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KEFyKGUsIHRoaXMuX2FwaSksIGUpOwogICAgICB9KSwKICAgICAgKHNpLnByb3RvdHlwZS5zZW5kU2Vzc2lvbiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGpyKGUsIHRoaXMuX2FwaSksIGUpOwogICAgICB9KSwKICAgICAgKHNpLnByb3RvdHlwZS5fc2VuZFJlcXVlc3QgPSBmdW5jdGlvbiAoaSwgZSkgewogICAgICAgIHZhciBvID0gdGhpczsKICAgICAgICByZXR1cm4gdGhpcy5faXNSYXRlTGltaXRlZChpLnR5cGUpCiAgICAgICAgICA/IFByb21pc2UucmVqZWN0KHsKICAgICAgICAgICAgICBldmVudDogZSwKICAgICAgICAgICAgICB0eXBlOiBpLnR5cGUsCiAgICAgICAgICAgICAgcmVhc29uOgogICAgICAgICAgICAgICAgIlRyYW5zcG9ydCBmb3IgIiArCiAgICAgICAgICAgICAgICBpLnR5cGUgKwogICAgICAgICAgICAgICAgIiByZXF1ZXN0cyBsb2NrZWQgdGlsbCAiICsKICAgICAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVkVW50aWwoaS50eXBlKSArCiAgICAgICAgICAgICAgICAiIGR1ZSB0byB0b28gbWFueSByZXF1ZXN0cy4iLAogICAgICAgICAgICAgIHN0YXR1czogNDI5LAogICAgICAgICAgICB9KQogICAgICAgICAgOiB0aGlzLl9idWZmZXIuYWRkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IFluKGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgICAgICAgciA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgZm9yIChlIGluICgoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICAgICAgICA0ID09PSByLnJlYWR5U3RhdGUgJiYKICAgICAgICAgICAgICAgICAgICAoKGUgPSB7CiAgICAgICAgICAgICAgICAgICAgICAieC1zZW50cnktcmF0ZS1saW1pdHMiOiByLmdldFJlc3BvbnNlSGVhZGVyKAogICAgICAgICAgICAgICAgICAgICAgICAiWC1TZW50cnktUmF0ZS1MaW1pdHMiCiAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgInJldHJ5LWFmdGVyIjogci5nZXRSZXNwb25zZUhlYWRlcigiUmV0cnktQWZ0ZXIiKSwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBvLl9oYW5kbGVSZXNwb25zZSh7CiAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VHlwZTogaS50eXBlLAogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IHIsCiAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBlLAogICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZTogdCwKICAgICAgICAgICAgICAgICAgICAgIHJlamVjdDogbiwKICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHIub3BlbigiUE9TVCIsIGkudXJsKSwKICAgICAgICAgICAgICAgIG8ub3B0aW9ucy5oZWFkZXJzKSkKICAgICAgICAgICAgICAgICAgby5vcHRpb25zLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoZSkgJiYKICAgICAgICAgICAgICAgICAgICByLnNldFJlcXVlc3RIZWFkZXIoZSwgby5vcHRpb25zLmhlYWRlcnNbZV0pOwogICAgICAgICAgICAgICAgci5zZW5kKGkuYm9keSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICB9KSwKICAgICAgc2kpOwoKICBmdW5jdGlvbiBzaSgpIHsKICAgIHJldHVybiAobnVsbCAhPT0gb2kgJiYgb2kuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpczsKICB9CgogIHZhciBjaSwKICAgIHVpID0KICAgICAgKHd0KGxpLCAoY2kgPSBvKSksCiAgICAgIChsaS5wcm90b3R5cGUuZXZlbnRGcm9tRXhjZXB0aW9uID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKG4gPSB0aGlzLl9vcHRpb25zKSwKICAgICAgICAgIGZuKAogICAgICAgICAgICAobiA9IFFyKGUsICgodCA9IHQpICYmIHQuc3ludGhldGljRXhjZXB0aW9uKSB8fCB2b2lkIDAsIHsKICAgICAgICAgICAgICBhdHRhY2hTdGFja3RyYWNlOiBuLmF0dGFjaFN0YWNrdHJhY2UsCiAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGhhbmRsZWQ6ICEwLAogICAgICAgICAgICAgIHR5cGU6ICJnZW5lcmljIiwKICAgICAgICAgICAgfQogICAgICAgICAgKSwKICAgICAgICAgIChuLmxldmVsID0gRXQuRXJyb3IpLAogICAgICAgICAgdCAmJiB0LmV2ZW50X2lkICYmIChuLmV2ZW50X2lkID0gdC5ldmVudF9pZCksCiAgICAgICAgICBZbi5yZXNvbHZlKG4pCiAgICAgICAgKTsKICAgICAgICB2YXIgbjsKICAgICAgfSksCiAgICAgIChsaS5wcm90b3R5cGUuZXZlbnRGcm9tTWVzc2FnZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHZvaWQgMCA9PT0gdCAmJiAodCA9IEV0LkluZm8pLAogICAgICAgICAgKHIgPSB0aGlzLl9vcHRpb25zKSwKICAgICAgICAgIChuID0gbiksCiAgICAgICAgICB2b2lkIDAgPT09ICh0ID0gdCkgJiYgKHQgPSBFdC5JbmZvKSwKICAgICAgICAgICgociA9IFpyKGUsIChuICYmIG4uc3ludGhldGljRXhjZXB0aW9uKSB8fCB2b2lkIDAsIHsKICAgICAgICAgICAgYXR0YWNoU3RhY2t0cmFjZTogci5hdHRhY2hTdGFja3RyYWNlLAogICAgICAgICAgfSkpLmxldmVsID0gdCksCiAgICAgICAgICBuICYmIG4uZXZlbnRfaWQgJiYgKHIuZXZlbnRfaWQgPSBuLmV2ZW50X2lkKSwKICAgICAgICAgIFluLnJlc29sdmUocikKICAgICAgICApOwogICAgICAgIHZhciByOwogICAgICB9KSwKICAgICAgKGxpLnByb3RvdHlwZS5fc2V0dXBUcmFuc3BvcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF0aGlzLl9vcHRpb25zLmRzbikgcmV0dXJuIGNpLnByb3RvdHlwZS5fc2V0dXBUcmFuc3BvcnQuY2FsbCh0aGlzKTsKICAgICAgICB2YXIgZSA9IEl0KEl0KHt9LCB0aGlzLl9vcHRpb25zLnRyYW5zcG9ydE9wdGlvbnMpLCB7CiAgICAgICAgICBkc246IHRoaXMuX29wdGlvbnMuZHNuLAogICAgICAgICAgdHVubmVsOiB0aGlzLl9vcHRpb25zLnR1bm5lbCwKICAgICAgICAgIF9tZXRhZGF0YTogdGhpcy5fb3B0aW9ucy5fbWV0YWRhdGEsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG5ldyAodGhpcy5fb3B0aW9ucy50cmFuc3BvcnQgfHwgKGpuKCkgPyByaSA6IGFpKSkoZSk7CiAgICAgIH0pLAogICAgICBsaSk7CgogIGZ1bmN0aW9uIGxpKCkgewogICAgcmV0dXJuIChudWxsICE9PSBjaSAmJiBjaS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzOwogIH0KCiAgdmFyIHBpID0gMDsKCiAgZnVuY3Rpb24gZGkodCwgciwgaSkgewogICAgaWYgKCh2b2lkIDAgPT09IHIgJiYgKHIgPSB7fSksICJmdW5jdGlvbiIgIT0gdHlwZW9mIHQpKSByZXR1cm4gdDsKICAgIHRyeSB7CiAgICAgIGlmICh0Ll9fc2VudHJ5X18pIHJldHVybiB0OwogICAgICBpZiAodC5fX3NlbnRyeV93cmFwcGVkX18pIHJldHVybiB0Ll9fc2VudHJ5X3dyYXBwZWRfXzsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIHQ7CiAgICB9CgogICAgZnVuY3Rpb24gZSgpIHsKICAgICAgdmFyIG4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgICB0cnkgewogICAgICAgIGkgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgaSAmJiBpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgdmFyIGUgPSBuLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGRpKGUsIHIpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0LmhhbmRsZUV2ZW50ID8gdC5oYW5kbGVFdmVudC5hcHBseSh0aGlzLCBlKSA6IHQuYXBwbHkodGhpcywgZSk7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICB0aHJvdyAoCiAgICAgICAgICAoKHBpICs9IDEpLAogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIC0tcGk7CiAgICAgICAgICB9KSwKICAgICAgICAgIF9yKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUuYWRkRXZlbnRQcm9jZXNzb3IoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBlID0gSXQoe30sIGUpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICByLm1lY2hhbmlzbSAmJiAoZG4oZSwgdm9pZCAwLCB2b2lkIDApLCBmbihlLCByLm1lY2hhbmlzbSkpLAogICAgICAgICAgICAgICAgKGUuZXh0cmEgPSBJdChJdCh7fSwgZS5leHRyYSksIHsgYXJndW1lbnRzOiBuIH0pKSwKICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB5cih0KTsKICAgICAgICAgIH0pLAogICAgICAgICAgdCkKICAgICAgICApOwogICAgICB9CiAgICB9CgogICAgdHJ5IHsKICAgICAgZm9yICh2YXIgbiBpbiB0KQogICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiAoZVtuXSA9IHRbbl0pOwogICAgfSBjYXRjaCAoZSkge30KICAgICh0LnByb3RvdHlwZSA9IHQucHJvdG90eXBlIHx8IHt9KSwKICAgICAgKGUucHJvdG90eXBlID0gdC5wcm90b3R5cGUpLAogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgIl9fc2VudHJ5X3dyYXBwZWRfXyIsIHsKICAgICAgICBlbnVtZXJhYmxlOiAhMSwKICAgICAgICB2YWx1ZTogZSwKICAgICAgfSksCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIHsKICAgICAgICBfX3NlbnRyeV9fOiB7IGVudW1lcmFibGU6ICExLCB2YWx1ZTogITAgfSwKICAgICAgICBfX3NlbnRyeV9vcmlnaW5hbF9fOiB7IGVudW1lcmFibGU6ICExLCB2YWx1ZTogdCB9LAogICAgICB9KTsKICAgIHRyeSB7CiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgIm5hbWUiKS5jb25maWd1cmFibGUgJiYKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgIm5hbWUiLCB7CiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHQubmFtZTsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICB9IGNhdGNoIChlKSB7fQogICAgcmV0dXJuIGU7CiAgfQoKICAoZmkucHJvdG90eXBlLnNldHVwT25jZSA9IGZ1bmN0aW9uICgpIHsKICAgIChFcnJvci5zdGFja1RyYWNlTGltaXQgPSA1MCksCiAgICAgIHRoaXMuX29wdGlvbnMub25lcnJvciAmJgogICAgICAgICh5bi5sb2coIkdsb2JhbCBIYW5kbGVyIGF0dGFjaGVkOiBvbmVycm9yIiksCiAgICAgICAgdGhpcy5faW5zdGFsbEdsb2JhbE9uRXJyb3JIYW5kbGVyKCkpLAogICAgICB0aGlzLl9vcHRpb25zLm9udW5oYW5kbGVkcmVqZWN0aW9uICYmCiAgICAgICAgKHluLmxvZygiR2xvYmFsIEhhbmRsZXIgYXR0YWNoZWQ6IG9udW5oYW5kbGVkcmVqZWN0aW9uIiksCiAgICAgICAgdGhpcy5faW5zdGFsbEdsb2JhbE9uVW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlcigpKTsKICB9KSwKICAgIChmaS5wcm90b3R5cGUuX2luc3RhbGxHbG9iYWxPbkVycm9ySGFuZGxlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIG8gPSB0aGlzOwogICAgICB0aGlzLl9vbkVycm9ySGFuZGxlckluc3RhbGxlZCB8fAogICAgICAgIChxbih7CiAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBlLmVycm9yLAogICAgICAgICAgICAgIG4gPSBkcigpLAogICAgICAgICAgICAgIHIgPSBuLmdldEludGVncmF0aW9uKGZpKSwKICAgICAgICAgICAgICBpID0gdCAmJiAhMCA9PT0gdC5fX3NlbnRyeV9vd25fcmVxdWVzdF9fOwogICAgICAgICAgICAhciB8fAogICAgICAgICAgICAgIDAgPCBwaSB8fAogICAgICAgICAgICAgIGkgfHwKICAgICAgICAgICAgICAoKGkgPSBuLmdldENsaWVudCgpKSwKICAgICAgICAgICAgICBmbigKICAgICAgICAgICAgICAgIChlID0KICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmIHF0KGUubXNnKQogICAgICAgICAgICAgICAgICAgID8gby5fZXZlbnRGcm9tSW5jb21wbGV0ZU9uRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgIGUubXNnLAogICAgICAgICAgICAgICAgICAgICAgICBlLnVybCwKICAgICAgICAgICAgICAgICAgICAgICAgZS5saW5lLAogICAgICAgICAgICAgICAgICAgICAgICBlLmNvbHVtbgogICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIDogby5fZW5oYW5jZUV2ZW50V2l0aEluaXRpYWxGcmFtZSgKICAgICAgICAgICAgICAgICAgICAgICAgUXIodCB8fCBlLm1zZywgdm9pZCAwLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0YWNoU3RhY2t0cmFjZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgaS5nZXRPcHRpb25zKCkuYXR0YWNoU3RhY2t0cmFjZSwKICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3Rpb246ICExLAogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZS51cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIGUubGluZSwKICAgICAgICAgICAgICAgICAgICAgICAgZS5jb2x1bW4KICAgICAgICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgeyBoYW5kbGVkOiAhMSwgdHlwZTogIm9uZXJyb3IiIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIG4uY2FwdHVyZUV2ZW50KGUsIHsgb3JpZ2luYWxFeGNlcHRpb246IHQgfSkpOwogICAgICAgICAgfSwKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgfSksCiAgICAgICAgKHRoaXMuX29uRXJyb3JIYW5kbGVySW5zdGFsbGVkID0gITApKTsKICAgIH0pLAogICAgKGZpLnByb3RvdHlwZS5faW5zdGFsbEdsb2JhbE9uVW5oYW5kbGVkUmVqZWN0aW9uSGFuZGxlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGkgPSB0aGlzOwogICAgICB0aGlzLl9vblVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZXJJbnN0YWxsZWQgfHwKICAgICAgICAocW4oewogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0ID0gZTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAicmVhc29uIiBpbiBlCiAgICAgICAgICAgICAgICA/ICh0ID0gZS5yZWFzb24pCiAgICAgICAgICAgICAgICA6ICJkZXRhaWwiIGluIGUgJiYKICAgICAgICAgICAgICAgICAgInJlYXNvbiIgaW4gZS5kZXRhaWwgJiYKICAgICAgICAgICAgICAgICAgKHQgPSBlLmRldGFpbC5yZWFzb24pOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICB2YXIgbiA9IGRyKCksCiAgICAgICAgICAgICAgciA9IG4uZ2V0SW50ZWdyYXRpb24oZmkpLAogICAgICAgICAgICAgIGUgPSB0ICYmICEwID09PSB0Ll9fc2VudHJ5X293bl9yZXF1ZXN0X187CiAgICAgICAgICAgIGlmICghciB8fCAwIDwgcGkgfHwgZSkgcmV0dXJuICEwOwogICAgICAgICAgICAoZSA9IG4uZ2V0Q2xpZW50KCkpLAogICAgICAgICAgICAgIChlID0gTXQodCkKICAgICAgICAgICAgICAgID8gaS5fZXZlbnRGcm9tUmVqZWN0aW9uV2l0aFByaW1pdGl2ZSh0KQogICAgICAgICAgICAgICAgOiBRcih0LCB2b2lkIDAsIHsKICAgICAgICAgICAgICAgICAgICBhdHRhY2hTdGFja3RyYWNlOiBlICYmIGUuZ2V0T3B0aW9ucygpLmF0dGFjaFN0YWNrdHJhY2UsCiAgICAgICAgICAgICAgICAgICAgcmVqZWN0aW9uOiAhMCwKICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAoZS5sZXZlbCA9IEV0LkVycm9yKSwKICAgICAgICAgICAgICBmbihlLCB7CiAgICAgICAgICAgICAgICBoYW5kbGVkOiAhMSwKICAgICAgICAgICAgICAgIHR5cGU6ICJvbnVuaGFuZGxlZHJlamVjdGlvbiIsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbi5jYXB0dXJlRXZlbnQoZSwgeyBvcmlnaW5hbEV4Y2VwdGlvbjogdCB9KTsKICAgICAgICAgIH0sCiAgICAgICAgICB0eXBlOiAidW5oYW5kbGVkcmVqZWN0aW9uIiwKICAgICAgICB9KSwKICAgICAgICAodGhpcy5fb25VbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVySW5zdGFsbGVkID0gITApKTsKICAgIH0pLAogICAgKGZpLnByb3RvdHlwZS5fZXZlbnRGcm9tSW5jb21wbGV0ZU9uRXJyb3IgPSBmdW5jdGlvbiAoZSwgdCwgbiwgcikgewogICAgICB2YXIgaSwKICAgICAgICBvID0gTnQoZSkgPyBlLm1lc3NhZ2UgOiBlLAogICAgICAgIGUgPSBvLm1hdGNoKAogICAgICAgICAgL14oPzpbVXVdbmNhdWdodCAoPzpleGNlcHRpb246ICk/KT8oPzooKD86RXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJfClFcnJvcik6ICk/KC4qKSQvaQogICAgICAgICk7CiAgICAgIHJldHVybiAoCiAgICAgICAgZSAmJiAoKGkgPSBlWzFdKSwgKG8gPSBlWzJdKSksCiAgICAgICAgdGhpcy5fZW5oYW5jZUV2ZW50V2l0aEluaXRpYWxGcmFtZSgKICAgICAgICAgIHsKICAgICAgICAgICAgZXhjZXB0aW9uOiB7CiAgICAgICAgICAgICAgdmFsdWVzOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IGkgfHwgIkVycm9yIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IG8sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgdCwKICAgICAgICAgIG4sCiAgICAgICAgICByCiAgICAgICAgKQogICAgICApOwogICAgfSksCiAgICAoZmkucHJvdG90eXBlLl9ldmVudEZyb21SZWplY3Rpb25XaXRoUHJpbWl0aXZlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBleGNlcHRpb246IHsKICAgICAgICAgIHZhbHVlczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogIlVuaGFuZGxlZFJlamVjdGlvbiIsCiAgICAgICAgICAgICAgdmFsdWU6CiAgICAgICAgICAgICAgICAiTm9uLUVycm9yIHByb21pc2UgcmVqZWN0aW9uIGNhcHR1cmVkIHdpdGggdmFsdWU6ICIgKyBTdHJpbmcoZSksCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0sCiAgICAgIH07CiAgICB9KSwKICAgIChmaS5wcm90b3R5cGUuX2VuaGFuY2VFdmVudFdpdGhJbml0aWFsRnJhbWUgPSBmdW5jdGlvbiAoZSwgdCwgbiwgcikgewogICAgICAoZS5leGNlcHRpb24gPSBlLmV4Y2VwdGlvbiB8fCB7fSksCiAgICAgICAgKGUuZXhjZXB0aW9uLnZhbHVlcyA9IGUuZXhjZXB0aW9uLnZhbHVlcyB8fCBbXSksCiAgICAgICAgKGUuZXhjZXB0aW9uLnZhbHVlc1swXSA9IGUuZXhjZXB0aW9uLnZhbHVlc1swXSB8fCB7fSksCiAgICAgICAgKGUuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlID0KICAgICAgICAgIGUuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlIHx8IHt9KSwKICAgICAgICAoZS5leGNlcHRpb24udmFsdWVzWzBdLnN0YWNrdHJhY2UuZnJhbWVzID0KICAgICAgICAgIGUuZXhjZXB0aW9uLnZhbHVlc1swXS5zdGFja3RyYWNlLmZyYW1lcyB8fCBbXSk7CiAgICAgIChyID0gaXNOYU4ocGFyc2VJbnQociwgMTApKSA/IHZvaWQgMCA6IHIpLAogICAgICAgIChuID0gaXNOYU4ocGFyc2VJbnQobiwgMTApKSA/IHZvaWQgMCA6IG4pLAogICAgICAgICh0ID0KICAgICAgICAgIHF0KHQpICYmIDAgPCB0Lmxlbmd0aAogICAgICAgICAgICA/IHQKICAgICAgICAgICAgOiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KSgpKTsKICAgICAgcmV0dXJuICgKICAgICAgICAwID09PSBlLmV4Y2VwdGlvbi52YWx1ZXNbMF0uc3RhY2t0cmFjZS5mcmFtZXMubGVuZ3RoICYmCiAgICAgICAgICBlLmV4Y2VwdGlvbi52YWx1ZXNbMF0uc3RhY2t0cmFjZS5mcmFtZXMucHVzaCh7CiAgICAgICAgICAgIGNvbG5vOiByLAogICAgICAgICAgICBmaWxlbmFtZTogdCwKICAgICAgICAgICAgZnVuY3Rpb246ICI/IiwKICAgICAgICAgICAgaW5fYXBwOiAhMCwKICAgICAgICAgICAgbGluZW5vOiBuLAogICAgICAgICAgfSksCiAgICAgICAgZQogICAgICApOwogICAgfSksCiAgICAoZmkuaWQgPSAiR2xvYmFsSGFuZGxlcnMiKSwKICAgIChSID0gZmkpOwoKICBmdW5jdGlvbiBmaShlKSB7CiAgICAodGhpcy5uYW1lID0gZmkuaWQpLAogICAgICAodGhpcy5fb25FcnJvckhhbmRsZXJJbnN0YWxsZWQgPSAhMSksCiAgICAgICh0aGlzLl9vblVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZXJJbnN0YWxsZWQgPSAhMSksCiAgICAgICh0aGlzLl9vcHRpb25zID0gSXQoCiAgICAgICAgewogICAgICAgICAgb25lcnJvcjogITAsCiAgICAgICAgICBvbnVuaGFuZGxlZHJlamVjdGlvbjogITAsCiAgICAgICAgfSwKICAgICAgICBlCiAgICAgICkpOwogIH0KCiAgdmFyIGhpID0gWwogICAgICAiRXZlbnRUYXJnZXQiLAogICAgICAiV2luZG93IiwKICAgICAgIk5vZGUiLAogICAgICAiQXBwbGljYXRpb25DYWNoZSIsCiAgICAgICJBdWRpb1RyYWNrTGlzdCIsCiAgICAgICJDaGFubmVsTWVyZ2VyTm9kZSIsCiAgICAgICJDcnlwdG9PcGVyYXRpb24iLAogICAgICAiRXZlbnRTb3VyY2UiLAogICAgICAiRmlsZVJlYWRlciIsCiAgICAgICJIVE1MVW5rbm93bkVsZW1lbnQiLAogICAgICAiSURCRGF0YWJhc2UiLAogICAgICAiSURCUmVxdWVzdCIsCiAgICAgICJJREJUcmFuc2FjdGlvbiIsCiAgICAgICJLZXlPcGVyYXRpb24iLAogICAgICAiTWVkaWFDb250cm9sbGVyIiwKICAgICAgIk1lc3NhZ2VQb3J0IiwKICAgICAgIk1vZGFsV2luZG93IiwKICAgICAgIk5vdGlmaWNhdGlvbiIsCiAgICAgICJTVkdFbGVtZW50SW5zdGFuY2UiLAogICAgICAiU2NyZWVuIiwKICAgICAgIlRleHRUcmFjayIsCiAgICAgICJUZXh0VHJhY2tDdWUiLAogICAgICAiVGV4dFRyYWNrTGlzdCIsCiAgICAgICJXZWJTb2NrZXQiLAogICAgICAiV2ViU29ja2V0V29ya2VyIiwKICAgICAgIldvcmtlciIsCiAgICAgICJYTUxIdHRwUmVxdWVzdCIsCiAgICAgICJYTUxIdHRwUmVxdWVzdEV2ZW50VGFyZ2V0IiwKICAgICAgIlhNTEh0dHBSZXF1ZXN0VXBsb2FkIiwKICAgIF0sCiAgICB4ID0KICAgICAgKChtaS5wcm90b3R5cGUuc2V0dXBPbmNlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlID0gc24oKTsKICAgICAgICB0aGlzLl9vcHRpb25zLnNldFRpbWVvdXQgJiYKICAgICAgICAgIEVuKGUsICJzZXRUaW1lb3V0IiwgdGhpcy5fd3JhcFRpbWVGdW5jdGlvbi5iaW5kKHRoaXMpKSwKICAgICAgICAgIHRoaXMuX29wdGlvbnMuc2V0SW50ZXJ2YWwgJiYKICAgICAgICAgICAgRW4oZSwgInNldEludGVydmFsIiwgdGhpcy5fd3JhcFRpbWVGdW5jdGlvbi5iaW5kKHRoaXMpKSwKICAgICAgICAgIHRoaXMuX29wdGlvbnMucmVxdWVzdEFuaW1hdGlvbkZyYW1lICYmCiAgICAgICAgICAgIEVuKGUsICJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCB0aGlzLl93cmFwUkFGLmJpbmQodGhpcykpLAogICAgICAgICAgdGhpcy5fb3B0aW9ucy5YTUxIdHRwUmVxdWVzdCAmJgogICAgICAgICAgICAiWE1MSHR0cFJlcXVlc3QiIGluIGUgJiYKICAgICAgICAgICAgRW4oWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCAic2VuZCIsIHRoaXMuX3dyYXBYSFIuYmluZCh0aGlzKSksCiAgICAgICAgICB0aGlzLl9vcHRpb25zLmV2ZW50VGFyZ2V0ICYmCiAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHRoaXMuX29wdGlvbnMuZXZlbnRUYXJnZXQpCiAgICAgICAgICAgICAgPyB0aGlzLl9vcHRpb25zLmV2ZW50VGFyZ2V0CiAgICAgICAgICAgICAgOiBoaQogICAgICAgICAgICApLmZvckVhY2godGhpcy5fd3JhcEV2ZW50VGFyZ2V0LmJpbmQodGhpcykpOwogICAgICB9KSwKICAgICAgKG1pLnByb3RvdHlwZS5fd3JhcFRpbWVGdW5jdGlvbiA9IGZ1bmN0aW9uIChyKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspCiAgICAgICAgICAgIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICB2YXIgbiA9IGVbMF07CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoZVswXSA9IGRpKG4sIHsKICAgICAgICAgICAgICBtZWNoYW5pc206IHsKICAgICAgICAgICAgICAgIGRhdGE6IHsgZnVuY3Rpb246IHduKHIpIH0sCiAgICAgICAgICAgICAgICBoYW5kbGVkOiAhMCwKICAgICAgICAgICAgICAgIHR5cGU6ICJpbnN0cnVtZW50IiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KSksCiAgICAgICAgICAgIHIuYXBwbHkodGhpcywgZSkKICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgfSksCiAgICAgIChtaS5wcm90b3R5cGUuX3dyYXBSQUYgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHQuY2FsbCgKICAgICAgICAgICAgdGhpcywKICAgICAgICAgICAgZGkoZSwgewogICAgICAgICAgICAgIG1lY2hhbmlzbTogewogICAgICAgICAgICAgICAgZGF0YTogeyBmdW5jdGlvbjogInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIGhhbmRsZXI6IHduKHQpIH0sCiAgICAgICAgICAgICAgICBoYW5kbGVkOiAhMCwKICAgICAgICAgICAgICAgIHR5cGU6ICJpbnN0cnVtZW50IiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9OwogICAgICB9KSwKICAgICAgKG1pLnByb3RvdHlwZS5fd3JhcEV2ZW50VGFyZ2V0ID0gZnVuY3Rpb24gKGkpIHsKICAgICAgICB2YXIgZSA9IHNuKCksCiAgICAgICAgICBlID0gZVtpXSAmJiBlW2ldLnByb3RvdHlwZTsKICAgICAgICBlICYmCiAgICAgICAgICBlLmhhc093blByb3BlcnR5ICYmCiAgICAgICAgICBlLmhhc093blByb3BlcnR5KCJhZGRFdmVudExpc3RlbmVyIikgJiYKICAgICAgICAgIChFbihlLCAiYWRkRXZlbnRMaXN0ZW5lciIsIGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiB0LmhhbmRsZUV2ZW50ICYmCiAgICAgICAgICAgICAgICAgICh0LmhhbmRsZUV2ZW50ID0gZGkodC5oYW5kbGVFdmVudC5iaW5kKHQpLCB7CiAgICAgICAgICAgICAgICAgICAgbWVjaGFuaXNtOiB7CiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiAiaGFuZGxlRXZlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyOiB3bih0KSwKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBpLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZWQ6ICEwLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogImluc3RydW1lbnQiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgIHJldHVybiByLmNhbGwoCiAgICAgICAgICAgICAgICB0aGlzLAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIGRpKHQsIHsKICAgICAgICAgICAgICAgICAgbWVjaGFuaXNtOiB7CiAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246ICJhZGRFdmVudExpc3RlbmVyIiwKICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IHduKHQpLAogICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBpLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZDogITAsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogImluc3RydW1lbnQiLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBuCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pLAogICAgICAgICAgRW4oZSwgInJlbW92ZUV2ZW50TGlzdGVuZXIiLCBmdW5jdGlvbiAoaSkgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgdmFyIHIgPQogICAgICAgICAgICAgICAgICBudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuX19zZW50cnlfd3JhcHBlZF9fOwogICAgICAgICAgICAgICAgciAmJiBpLmNhbGwodGhpcywgZSwgciwgbik7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICByZXR1cm4gaS5jYWxsKHRoaXMsIGUsIHQsIG4pOwogICAgICAgICAgICB9OwogICAgICAgICAgfSkpOwogICAgICB9KSwKICAgICAgKG1pLnByb3RvdHlwZS5fd3JhcFhIUiA9IGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspCiAgICAgICAgICAgIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICB2YXIgciA9IHRoaXM7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBbIm9ubG9hZCIsICJvbmVycm9yIiwgIm9ucHJvZ3Jlc3MiLCAib25yZWFkeXN0YXRlY2hhbmdlIl0uZm9yRWFjaCgKICAgICAgICAgICAgICBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgbiBpbiByICYmCiAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIHJbbl0gJiYKICAgICAgICAgICAgICAgICAgRW4ociwgbiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHsKICAgICAgICAgICAgICAgICAgICAgIG1lY2hhbmlzbTogewogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGZ1bmN0aW9uOiBuLCBoYW5kbGVyOiB3bihlKSB9LAogICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVkOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImluc3RydW1lbnQiLAogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICBlLl9fc2VudHJ5X29yaWdpbmFsX18gJiYKICAgICAgICAgICAgICAgICAgICAgICAgKHQubWVjaGFuaXNtLmRhdGEuaGFuZGxlciA9IHduKGUuX19zZW50cnlfb3JpZ2luYWxfXykpLAogICAgICAgICAgICAgICAgICAgICAgZGkoZSwgdCkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICksCiAgICAgICAgICAgIG4uYXBwbHkodGhpcywgZSkKICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgfSksCiAgICAgIChtaS5pZCA9ICJUcnlDYXRjaCIpLAogICAgICBtaSk7CgogIGZ1bmN0aW9uIG1pKGUpIHsKICAgICh0aGlzLm5hbWUgPSBtaS5pZCksCiAgICAgICh0aGlzLl9vcHRpb25zID0gSXQoCiAgICAgICAgewogICAgICAgICAgWE1MSHR0cFJlcXVlc3Q6ICEwLAogICAgICAgICAgZXZlbnRUYXJnZXQ6ICEwLAogICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lOiAhMCwKICAgICAgICAgIHNldEludGVydmFsOiAhMCwKICAgICAgICAgIHNldFRpbWVvdXQ6ICEwLAogICAgICAgIH0sCiAgICAgICAgZQogICAgICApKTsKICB9CgogIGZ1bmN0aW9uIHZpKGUpIHsKICAgIHJldHVybiAodmkgPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIHZhciB5aSA9CiAgICAoKGdpLnByb3RvdHlwZS5hZGRTZW50cnlCcmVhZGNydW1iID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5fb3B0aW9ucy5zZW50cnkgJiYKICAgICAgICBkcigpLmFkZEJyZWFkY3J1bWIoCiAgICAgICAgICB7CiAgICAgICAgICAgIGNhdGVnb3J5OgogICAgICAgICAgICAgICJzZW50cnkuIiArICgidHJhbnNhY3Rpb24iID09PSBlLnR5cGUgPyAidHJhbnNhY3Rpb24iIDogImV2ZW50IiksCiAgICAgICAgICAgIGV2ZW50X2lkOiBlLmV2ZW50X2lkLAogICAgICAgICAgICBsZXZlbDogZS5sZXZlbCwKICAgICAgICAgICAgbWVzc2FnZTogbG4oZSksCiAgICAgICAgICB9LAogICAgICAgICAgeyBldmVudDogZSB9CiAgICAgICAgKTsKICAgIH0pLAogICAgKGdpLnByb3RvdHlwZS5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBuID0gdGhpczsKICAgICAgdGhpcy5fb3B0aW9ucy5jb25zb2xlICYmCiAgICAgICAgcW4oewogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykKICAgICAgICAgICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICBuLl9jb25zb2xlQnJlYWRjcnVtYi5hcHBseShuLCBSdChlKSk7CiAgICAgICAgICB9LAogICAgICAgICAgdHlwZTogImNvbnNvbGUiLAogICAgICAgIH0pLAogICAgICAgIHRoaXMuX29wdGlvbnMuZG9tICYmCiAgICAgICAgICBxbih7CiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykKICAgICAgICAgICAgICAgIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICAgICAgbi5fZG9tQnJlYWRjcnVtYi5hcHBseShuLCBSdChlKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR5cGU6ICJkb20iLAogICAgICAgICAgfSksCiAgICAgICAgdGhpcy5fb3B0aW9ucy54aHIgJiYKICAgICAgICAgIHFuKHsKICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKQogICAgICAgICAgICAgICAgZVt0XSA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgICBuLl94aHJCcmVhZGNydW1iLmFwcGx5KG4sIFJ0KGUpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogInhociIsCiAgICAgICAgICB9KSwKICAgICAgICB0aGlzLl9vcHRpb25zLmZldGNoICYmCiAgICAgICAgICBxbih7CiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykKICAgICAgICAgICAgICAgIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICAgICAgbi5fZmV0Y2hCcmVhZGNydW1iLmFwcGx5KG4sIFJ0KGUpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogImZldGNoIiwKICAgICAgICAgIH0pLAogICAgICAgIHRoaXMuX29wdGlvbnMuaGlzdG9yeSAmJgogICAgICAgICAgcW4oewogICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspCiAgICAgICAgICAgICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgIG4uX2hpc3RvcnlCcmVhZGNydW1iLmFwcGx5KG4sIFJ0KGUpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogImhpc3RvcnkiLAogICAgICAgICAgfSk7CiAgICB9KSwKICAgIChnaS5wcm90b3R5cGUuX2NvbnNvbGVCcmVhZGNydW1iID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB7CiAgICAgICAgY2F0ZWdvcnk6ICJjb25zb2xlIiwKICAgICAgICBkYXRhOiB7IGFyZ3VtZW50czogZS5hcmdzLCBsb2dnZXI6ICJjb25zb2xlIiB9LAogICAgICAgIGxldmVsOiBFdC5mcm9tU3RyaW5nKGUubGV2ZWwpLAogICAgICAgIG1lc3NhZ2U6IHJuKGUuYXJncywgIiAiKSwKICAgICAgfTsKICAgICAgaWYgKCJhc3NlcnQiID09PSBlLmxldmVsKSB7CiAgICAgICAgaWYgKCExICE9PSBlLmFyZ3NbMF0pIHJldHVybjsKICAgICAgICAodC5tZXNzYWdlID0KICAgICAgICAgICJBc3NlcnRpb24gZmFpbGVkOiAiICsKICAgICAgICAgIChybihlLmFyZ3Muc2xpY2UoMSksICIgIikgfHwgImNvbnNvbGUuYXNzZXJ0IikpLAogICAgICAgICAgKHQuZGF0YS5hcmd1bWVudHMgPSBlLmFyZ3Muc2xpY2UoMSkpOwogICAgICB9CiAgICAgIGRyKCkuYWRkQnJlYWRjcnVtYih0LCB7IGlucHV0OiBlLmFyZ3MsIGxldmVsOiBlLmxldmVsIH0pOwogICAgfSksCiAgICAoZ2kucHJvdG90eXBlLl9kb21CcmVhZGNydW1iID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQsCiAgICAgICAgbiA9CiAgICAgICAgICAib2JqZWN0IiA9PT0gdmkodGhpcy5fb3B0aW9ucy5kb20pCiAgICAgICAgICAgID8gdGhpcy5fb3B0aW9ucy5kb20uc2VyaWFsaXplQXR0cmlidXRlCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAic3RyaW5nIiA9PSB0eXBlb2YgbiAmJiAobiA9IFtuXSk7CiAgICAgIHRyeSB7CiAgICAgICAgdCA9IGUuZXZlbnQudGFyZ2V0ID8gV3QoZS5ldmVudC50YXJnZXQsIG4pIDogV3QoZS5ldmVudCwgbik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0ID0gIjx1bmtub3duPiI7CiAgICAgIH0KICAgICAgMCAhPT0gdC5sZW5ndGggJiYKICAgICAgICBkcigpLmFkZEJyZWFkY3J1bWIoCiAgICAgICAgICB7IGNhdGVnb3J5OiAidWkuIiArIGUubmFtZSwgbWVzc2FnZTogdCB9LAogICAgICAgICAgewogICAgICAgICAgICBldmVudDogZS5ldmVudCwKICAgICAgICAgICAgbmFtZTogZS5uYW1lLAogICAgICAgICAgICBnbG9iYWw6IGUuZ2xvYmFsLAogICAgICAgICAgfQogICAgICAgICk7CiAgICB9KSwKICAgIChnaS5wcm90b3R5cGUuX3hockJyZWFkY3J1bWIgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCwgbiwgciwgaTsKICAgICAgZS5lbmRUaW1lc3RhbXAgJiYKICAgICAgICAoZS54aHIuX19zZW50cnlfb3duX3JlcXVlc3RfXyB8fAogICAgICAgICAgKCh0ID0gKGkgPSBlLnhoci5fX3NlbnRyeV94aHJfXyB8fCB7fSkubWV0aG9kKSwKICAgICAgICAgIChuID0gaS51cmwpLAogICAgICAgICAgKHIgPSBpLnN0YXR1c19jb2RlKSwKICAgICAgICAgIChpID0gaS5ib2R5KSwKICAgICAgICAgIGRyKCkuYWRkQnJlYWRjcnVtYigKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNhdGVnb3J5OiAieGhyIiwKICAgICAgICAgICAgICBkYXRhOiB7IG1ldGhvZDogdCwgdXJsOiBuLCBzdGF0dXNfY29kZTogciB9LAogICAgICAgICAgICAgIHR5cGU6ICJodHRwIiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeyB4aHI6IGUueGhyLCBpbnB1dDogaSB9CiAgICAgICAgICApKSk7CiAgICB9KSwKICAgIChnaS5wcm90b3R5cGUuX2ZldGNoQnJlYWRjcnVtYiA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGUuZW5kVGltZXN0YW1wICYmCiAgICAgICAgKChlLmZldGNoRGF0YS51cmwubWF0Y2goL3NlbnRyeV9rZXkvKSAmJgogICAgICAgICAgIlBPU1QiID09PSBlLmZldGNoRGF0YS5tZXRob2QpIHx8CiAgICAgICAgICAoZS5lcnJvcgogICAgICAgICAgICA/IGRyKCkuYWRkQnJlYWRjcnVtYigKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICJmZXRjaCIsCiAgICAgICAgICAgICAgICAgIGRhdGE6IGUuZmV0Y2hEYXRhLAogICAgICAgICAgICAgICAgICBsZXZlbDogRXQuRXJyb3IsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJodHRwIiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7IGRhdGE6IGUuZXJyb3IsIGlucHV0OiBlLmFyZ3MgfQogICAgICAgICAgICAgICkKICAgICAgICAgICAgOiBkcigpLmFkZEJyZWFkY3J1bWIoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiAiZmV0Y2giLAogICAgICAgICAgICAgICAgICBkYXRhOiBJdChJdCh7fSwgZS5mZXRjaERhdGEpLCB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzX2NvZGU6IGUucmVzcG9uc2Uuc3RhdHVzLAogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgdHlwZTogImh0dHAiLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsgaW5wdXQ6IGUuYXJncywgcmVzcG9uc2U6IGUucmVzcG9uc2UgfQogICAgICAgICAgICAgICkpKTsKICAgIH0pLAogICAgKGdpLnByb3RvdHlwZS5faGlzdG9yeUJyZWFkY3J1bWIgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IHNuKCksCiAgICAgICAgbiA9IGUuZnJvbSwKICAgICAgICByID0gZS50bywKICAgICAgICBpID0gdW4odC5sb2NhdGlvbi5ocmVmKSwKICAgICAgICBlID0gdW4obiksCiAgICAgICAgdCA9IHVuKHIpOwogICAgICBlLnBhdGggfHwgKGUgPSBpKSwKICAgICAgICBpLnByb3RvY29sID09PSB0LnByb3RvY29sICYmIGkuaG9zdCA9PT0gdC5ob3N0ICYmIChyID0gdC5yZWxhdGl2ZSksCiAgICAgICAgaS5wcm90b2NvbCA9PT0gZS5wcm90b2NvbCAmJiBpLmhvc3QgPT09IGUuaG9zdCAmJiAobiA9IGUucmVsYXRpdmUpLAogICAgICAgIGRyKCkuYWRkQnJlYWRjcnVtYih7CiAgICAgICAgICBjYXRlZ29yeTogIm5hdmlnYXRpb24iLAogICAgICAgICAgZGF0YTogeyBmcm9tOiBuLCB0bzogciB9LAogICAgICAgIH0pOwogICAgfSksCiAgICAoZ2kuaWQgPSAiQnJlYWRjcnVtYnMiKSwKICAgIGdpKTsKCiAgZnVuY3Rpb24gZ2koZSkgewogICAgKHRoaXMubmFtZSA9IGdpLmlkKSwKICAgICAgKHRoaXMuX29wdGlvbnMgPSBJdCgKICAgICAgICB7IGNvbnNvbGU6ICEwLCBkb206ICEwLCBmZXRjaDogITAsIGhpc3Rvcnk6ICEwLCBzZW50cnk6ICEwLCB4aHI6ICEwIH0sCiAgICAgICAgZQogICAgICApKTsKICB9CgogIChfaS5wcm90b3R5cGUuc2V0dXBPbmNlID0gZnVuY3Rpb24gKCkgewogICAgaXIoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4gPSBkcigpLmdldEludGVncmF0aW9uKF9pKTsKICAgICAgaWYgKG4pIHsKICAgICAgICBuID0gbi5faGFuZGxlciAmJiBuLl9oYW5kbGVyLmJpbmQobik7CiAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gPyBuKGUsIHQpIDogZTsKICAgICAgfQogICAgICByZXR1cm4gZTsKICAgIH0pOwogIH0pLAogICAgKF9pLnByb3RvdHlwZS5faGFuZGxlciA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIGlmICgKICAgICAgICAhKAogICAgICAgICAgZS5leGNlcHRpb24gJiYKICAgICAgICAgIGUuZXhjZXB0aW9uLnZhbHVlcyAmJgogICAgICAgICAgdCAmJgogICAgICAgICAgenQodC5vcmlnaW5hbEV4Y2VwdGlvbiwgRXJyb3IpCiAgICAgICAgKQogICAgICApCiAgICAgICAgcmV0dXJuIGU7CiAgICAgIHQgPSB0aGlzLl93YWxrRXJyb3JUcmVlKHQub3JpZ2luYWxFeGNlcHRpb24sIHRoaXMuX2tleSk7CiAgICAgIHJldHVybiAoZS5leGNlcHRpb24udmFsdWVzID0gUnQodCwgZS5leGNlcHRpb24udmFsdWVzKSksIGU7CiAgICB9KSwKICAgIChfaS5wcm90b3R5cGUuX3dhbGtFcnJvclRyZWUgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICBpZiAoCiAgICAgICAgKHZvaWQgMCA9PT0gbiAmJiAobiA9IFtdKSwKICAgICAgICAhenQoZVt0XSwgRXJyb3IpIHx8IG4ubGVuZ3RoICsgMSA+PSB0aGlzLl9saW1pdCkKICAgICAgKQogICAgICAgIHJldHVybiBuOwogICAgICB2YXIgciA9IEpyKFdyKGVbdF0pKTsKICAgICAgcmV0dXJuIHRoaXMuX3dhbGtFcnJvclRyZWUoZVt0XSwgdCwgUnQoW3JdLCBuKSk7CiAgICB9KSwKICAgIChfaS5pZCA9ICJMaW5rZWRFcnJvcnMiKSwKICAgIChLbiA9IF9pKTsKCiAgZnVuY3Rpb24gX2koZSkgewogICAgdm9pZCAwID09PSBlICYmIChlID0ge30pLAogICAgICAodGhpcy5uYW1lID0gX2kuaWQpLAogICAgICAodGhpcy5fa2V5ID0gZS5rZXkgfHwgImNhdXNlIiksCiAgICAgICh0aGlzLl9saW1pdCA9IGUubGltaXQgfHwgNSk7CiAgfQoKICB2YXIgYmkgPSBzbigpLAogICAgUGUgPQogICAgICAoKHdpLnByb3RvdHlwZS5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0OwogICAgICAgICAgaWYgKGRyKCkuZ2V0SW50ZWdyYXRpb24od2kpKSB7CiAgICAgICAgICAgIGlmICghYmkubmF2aWdhdG9yICYmICFiaS5sb2NhdGlvbiAmJiAhYmkuZG9jdW1lbnQpIHJldHVybiBlOwogICAgICAgICAgICB2YXIgbiA9CiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKGkgPSBlLnJlcXVlc3QpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkudXJsKSB8fAogICAgICAgICAgICAgICAgKG51bGwgPT09ICh0ID0gYmkubG9jYXRpb24pIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuaHJlZiksCiAgICAgICAgICAgICAgciA9IChiaS5kb2N1bWVudCB8fCB7fSkucmVmZXJyZXIsCiAgICAgICAgICAgICAgaSA9IChiaS5uYXZpZ2F0b3IgfHwge30pLnVzZXJBZ2VudCwKICAgICAgICAgICAgICBpID0gSXQoCiAgICAgICAgICAgICAgICBJdCgKICAgICAgICAgICAgICAgICAgSXQoCiAgICAgICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gKHQgPSBlLnJlcXVlc3QpIHx8IHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgICAgICAgIDogdC5oZWFkZXJzCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgIHIgJiYgeyBSZWZlcmVyOiByIH0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBpICYmIHsgIlVzZXItQWdlbnQiOiBpIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIGkgPSBJdChJdCh7fSwgbiAmJiB7IHVybDogbiB9KSwgeyBoZWFkZXJzOiBpIH0pOwogICAgICAgICAgICByZXR1cm4gSXQoSXQoe30sIGUpLCB7IHJlcXVlc3Q6IGkgfSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9KTsKICAgICAgfSksCiAgICAgICh3aS5pZCA9ICJVc2VyQWdlbnQiKSwKICAgICAgd2kpOwoKICBmdW5jdGlvbiB3aSgpIHsKICAgIHRoaXMubmFtZSA9IHdpLmlkOwogIH0KCiAgKFNpLnByb3RvdHlwZS5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoZSwgcikgewogICAgZShmdW5jdGlvbiAodCkgewogICAgICB2YXIgbiA9IHIoKS5nZXRJbnRlZ3JhdGlvbihTaSk7CiAgICAgIGlmIChuKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmIChuLl9zaG91bGREcm9wRXZlbnQodCwgbi5fcHJldmlvdXNFdmVudCkpIHJldHVybiBudWxsOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiAobi5fcHJldmlvdXNFdmVudCA9IHQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKG4uX3ByZXZpb3VzRXZlbnQgPSB0KTsKICAgICAgfQogICAgICByZXR1cm4gdDsKICAgIH0pOwogIH0pLAogICAgKFNpLnByb3RvdHlwZS5fc2hvdWxkRHJvcEV2ZW50ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgcmV0dXJuICgKICAgICAgICAhIXQgJiYKICAgICAgICAoISF0aGlzLl9pc1NhbWVNZXNzYWdlRXZlbnQoZSwgdCkgfHwgISF0aGlzLl9pc1NhbWVFeGNlcHRpb25FdmVudChlLCB0KSkKICAgICAgKTsKICAgIH0pLAogICAgKFNpLnByb3RvdHlwZS5faXNTYW1lTWVzc2FnZUV2ZW50ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4gPSBlLm1lc3NhZ2UsCiAgICAgICAgciA9IHQubWVzc2FnZTsKICAgICAgcmV0dXJuICgKICAgICAgICAhKCFuICYmICFyKSAmJgogICAgICAgICEoKG4gJiYgIXIpIHx8ICghbiAmJiByKSkgJiYKICAgICAgICBuID09PSByICYmCiAgICAgICAgISF0aGlzLl9pc1NhbWVGaW5nZXJwcmludChlLCB0KSAmJgogICAgICAgICEhdGhpcy5faXNTYW1lU3RhY2t0cmFjZShlLCB0KQogICAgICApOwogICAgfSksCiAgICAoU2kucHJvdG90eXBlLl9nZXRGcmFtZXNGcm9tRXZlbnQgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IGUuZXhjZXB0aW9uOwogICAgICBpZiAodCkKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIHQudmFsdWVzWzBdLnN0YWNrdHJhY2UuZnJhbWVzOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIGVsc2UgaWYgKGUuc3RhY2t0cmFjZSkgcmV0dXJuIGUuc3RhY2t0cmFjZS5mcmFtZXM7CiAgICB9KSwKICAgIChTaS5wcm90b3R5cGUuX2lzU2FtZVN0YWNrdHJhY2UgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiA9IHRoaXMuX2dldEZyYW1lc0Zyb21FdmVudChlKSwKICAgICAgICByID0gdGhpcy5fZ2V0RnJhbWVzRnJvbUV2ZW50KHQpOwogICAgICBpZiAoIW4gJiYgIXIpIHJldHVybiAhMDsKICAgICAgaWYgKChuICYmICFyKSB8fCAoIW4gJiYgcikpIHJldHVybiAhMTsKICAgICAgaWYgKHIubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHIubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbyA9IHJbaV0sCiAgICAgICAgICBhID0gbltpXTsKICAgICAgICBpZiAoCiAgICAgICAgICBvLmZpbGVuYW1lICE9PSBhLmZpbGVuYW1lIHx8CiAgICAgICAgICBvLmxpbmVubyAhPT0gYS5saW5lbm8gfHwKICAgICAgICAgIG8uY29sbm8gIT09IGEuY29sbm8gfHwKICAgICAgICAgIG8uZnVuY3Rpb24gIT09IGEuZnVuY3Rpb24KICAgICAgICApCiAgICAgICAgICByZXR1cm4gITE7CiAgICAgIH0KICAgICAgcmV0dXJuICEwOwogICAgfSksCiAgICAoU2kucHJvdG90eXBlLl9nZXRFeGNlcHRpb25Gcm9tRXZlbnQgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5leGNlcHRpb24gJiYgZS5leGNlcHRpb24udmFsdWVzICYmIGUuZXhjZXB0aW9uLnZhbHVlc1swXTsKICAgIH0pLAogICAgKFNpLnByb3RvdHlwZS5faXNTYW1lRXhjZXB0aW9uRXZlbnQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiA9IHRoaXMuX2dldEV4Y2VwdGlvbkZyb21FdmVudCh0KSwKICAgICAgICByID0gdGhpcy5fZ2V0RXhjZXB0aW9uRnJvbUV2ZW50KGUpOwogICAgICByZXR1cm4gKAogICAgICAgICEoIW4gfHwgIXIpICYmCiAgICAgICAgbi50eXBlID09PSByLnR5cGUgJiYKICAgICAgICBuLnZhbHVlID09PSByLnZhbHVlICYmCiAgICAgICAgISF0aGlzLl9pc1NhbWVGaW5nZXJwcmludChlLCB0KSAmJgogICAgICAgICEhdGhpcy5faXNTYW1lU3RhY2t0cmFjZShlLCB0KQogICAgICApOwogICAgfSksCiAgICAoU2kucHJvdG90eXBlLl9pc1NhbWVGaW5nZXJwcmludCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIChlID0gZS5maW5nZXJwcmludCksICh0ID0gdC5maW5nZXJwcmludCk7CiAgICAgIGlmICghZSAmJiAhdCkgcmV0dXJuICEwOwogICAgICBpZiAoKGUgJiYgIXQpIHx8ICghZSAmJiB0KSkgcmV0dXJuICExOwogICAgICB0cnkgewogICAgICAgIHJldHVybiAhKGUuam9pbigiIikgIT09IHQuam9pbigiIikpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9CiAgICB9KSwKICAgIChTaS5pZCA9ICJEZWR1cGUiKSwKICAgIChvID0gU2kpOwoKICBmdW5jdGlvbiBTaSgpIHsKICAgIHRoaXMubmFtZSA9IFNpLmlkOwogIH0KCiAgdmFyIEVpLAogICAgeGkgPQogICAgICAod3Qoa2ksIChFaSA9IEUpKSwKICAgICAgKGtpLnByb3RvdHlwZS5zaG93UmVwb3J0RGlhbG9nID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdDsKICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSB7fSksCiAgICAgICAgICBzbigpLmRvY3VtZW50ICYmCiAgICAgICAgICAgICh0aGlzLl9pc0VuYWJsZWQoKQogICAgICAgICAgICAgID8gKHQgPQogICAgICAgICAgICAgICAgICB2b2lkIDAgPT09CiAgICAgICAgICAgICAgICAgICh0ID0gSXQoSXQoe30sIGUpLCB7IGRzbjogZS5kc24gfHwgdGhpcy5nZXREc24oKSB9KSkKICAgICAgICAgICAgICAgICAgICA/IHt9CiAgICAgICAgICAgICAgICAgICAgOiB0KS5ldmVudElkCiAgICAgICAgICAgICAgICA/IHQuZHNuCiAgICAgICAgICAgICAgICAgID8gKCgoZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpKS5hc3luYyA9ICEwKSwKICAgICAgICAgICAgICAgICAgICAoZS5zcmMgPSBuZXcgYnIodC5kc24pLmdldFJlcG9ydERpYWxvZ0VuZHBvaW50KHQpKSwKICAgICAgICAgICAgICAgICAgICB0Lm9uTG9hZCAmJiAoZS5vbmxvYWQgPSB0Lm9uTG9hZCksCiAgICAgICAgICAgICAgICAgICAgKGRvY3VtZW50LmhlYWQgfHwgZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoZSkpCiAgICAgICAgICAgICAgICAgIDogeW4uZXJyb3IoIk1pc3NpbmcgZHNuIG9wdGlvbiBpbiBzaG93UmVwb3J0RGlhbG9nIGNhbGwiKQogICAgICAgICAgICAgICAgOiB5bi5lcnJvcigiTWlzc2luZyBldmVudElkIG9wdGlvbiBpbiBzaG93UmVwb3J0RGlhbG9nIGNhbGwiKQogICAgICAgICAgICAgIDogeW4uZXJyb3IoCiAgICAgICAgICAgICAgICAgICJUcnlpbmcgdG8gY2FsbCBzaG93UmVwb3J0RGlhbG9nIHdpdGggU2VudHJ5IENsaWVudCBkaXNhYmxlZCIKICAgICAgICAgICAgICAgICkpOwogICAgICB9KSwKICAgICAgKGtpLnByb3RvdHlwZS5fcHJlcGFyZUV2ZW50ID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKGUucGxhdGZvcm0gPSBlLnBsYXRmb3JtIHx8ICJqYXZhc2NyaXB0IiksCiAgICAgICAgICBFaS5wcm90b3R5cGUuX3ByZXBhcmVFdmVudC5jYWxsKHRoaXMsIGUsIHQsIG4pCiAgICAgICAgKTsKICAgICAgfSksCiAgICAgIChraS5wcm90b3R5cGUuX3NlbmRFdmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLmdldEludGVncmF0aW9uKHlpKTsKICAgICAgICB0ICYmIHQuYWRkU2VudHJ5QnJlYWRjcnVtYihlKSwgRWkucHJvdG90eXBlLl9zZW5kRXZlbnQuY2FsbCh0aGlzLCBlKTsKICAgICAgfSksCiAgICAgIGtpKTsKCiAgZnVuY3Rpb24ga2koZSkgewogICAgcmV0dXJuICgKICAgICAgKChlID0gdm9pZCAwID09PSBlID8ge30gOiBlKS5fbWV0YWRhdGEgPSBlLl9tZXRhZGF0YSB8fCB7fSksCiAgICAgIChlLl9tZXRhZGF0YS5zZGsgPSBlLl9tZXRhZGF0YS5zZGsgfHwgewogICAgICAgIG5hbWU6ICJzZW50cnkuamF2YXNjcmlwdC5icm93c2VyIiwKICAgICAgICBwYWNrYWdlczogW3sgbmFtZTogIm5wbTpAc2VudHJ5L2Jyb3dzZXIiLCB2ZXJzaW9uOiBEciB9XSwKICAgICAgICB2ZXJzaW9uOiBEciwKICAgICAgfSksCiAgICAgIEVpLmNhbGwodGhpcywgdWksIGUpIHx8IHRoaXMKICAgICk7CiAgfQoKICB2YXIgT2ksCiAgICBUaSwKICAgIElpID0gWwogICAgICBuZXcgbigpLAogICAgICBuZXcgJCgpLAogICAgICBuZXcgeCgpLAogICAgICBuZXcgeWkoKSwKICAgICAgbmV3IFIoKSwKICAgICAgbmV3IEtuKCksCiAgICAgIG5ldyBvKCksCiAgICAgIG5ldyBQZSgpLAogICAgXTsKCiAgZnVuY3Rpb24gQ2koZSkgewogICAgdmFyIHQsIG47CiAgICB2b2lkIDAgPT09IChlID0gdm9pZCAwID09PSBlID8ge30gOiBlKS5kZWZhdWx0SW50ZWdyYXRpb25zICYmCiAgICAgIChlLmRlZmF1bHRJbnRlZ3JhdGlvbnMgPSBJaSksCiAgICAgIHZvaWQgMCAhPT0gZS5yZWxlYXNlIHx8CiAgICAgICAgKCh0ID0gc24oKSkuU0VOVFJZX1JFTEVBU0UgJiYKICAgICAgICAgIHQuU0VOVFJZX1JFTEVBU0UuaWQgJiYKICAgICAgICAgIChlLnJlbGVhc2UgPSB0LlNFTlRSWV9SRUxFQVNFLmlkKSksCiAgICAgIHZvaWQgMCA9PT0gZS5hdXRvU2Vzc2lvblRyYWNraW5nICYmIChlLmF1dG9TZXNzaW9uVHJhY2tpbmcgPSAhMCksCiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuOwogICAgICAgICEwID09PSB0LmRlYnVnICYmIHluLmVuYWJsZSgpOwogICAgICAgIHZhciByID0gZHIoKTsKICAgICAgICBudWxsICE9PSAobiA9IHIuZ2V0U2NvcGUoKSkgJiYgdm9pZCAwICE9PSBuICYmIG4udXBkYXRlKHQuaW5pdGlhbFNjb3BlKSwKICAgICAgICAgICh0ID0gbmV3IGUodCkpLAogICAgICAgICAgci5iaW5kQ2xpZW50KHQpOwogICAgICB9KSh4aSwgZSksCiAgICAgIGUuYXV0b1Nlc3Npb25UcmFja2luZyAmJgogICAgICAgICh2b2lkIDAgIT09IHNuKCkuZG9jdW1lbnQKICAgICAgICAgID8gImZ1bmN0aW9uIiA9PSB0eXBlb2YgKG4gPSBkcigpKS5zdGFydFNlc3Npb24gJiYKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2Ygbi5jYXB0dXJlU2Vzc2lvbiAmJgogICAgICAgICAgICAobi5zdGFydFNlc3Npb24oeyBpZ25vcmVEdXJhdGlvbjogITAgfSksCiAgICAgICAgICAgIG4uY2FwdHVyZVNlc3Npb24oKSwKICAgICAgICAgICAgcW4oewogICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBlLmZyb20sCiAgICAgICAgICAgICAgICAgIGUgPSBlLnRvOwogICAgICAgICAgICAgICAgdm9pZCAwICE9PSB0ICYmCiAgICAgICAgICAgICAgICAgIHQgIT09IGUgJiYKICAgICAgICAgICAgICAgICAgKG4uc3RhcnRTZXNzaW9uKHsgaWdub3JlRHVyYXRpb246ICEwIH0pLCBuLmNhcHR1cmVTZXNzaW9uKCkpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdHlwZTogImhpc3RvcnkiLAogICAgICAgICAgICB9KSkKICAgICAgICAgIDogeW4ud2FybigKICAgICAgICAgICAgICAiU2Vzc2lvbiB0cmFja2luZyBpbiBub24tYnJvd3NlciBlbnZpcm9ubWVudCB3aXRoIEBzZW50cnkvYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkLiIKICAgICAgICAgICAgKSk7CiAgfQoKICAoKHggPSBPaSA9IE9pIHx8IHt9KS5PayA9ICJvayIpLAogICAgKHguRGVhZGxpbmVFeGNlZWRlZCA9ICJkZWFkbGluZV9leGNlZWRlZCIpLAogICAgKHguVW5hdXRoZW50aWNhdGVkID0gInVuYXV0aGVudGljYXRlZCIpLAogICAgKHguUGVybWlzc2lvbkRlbmllZCA9ICJwZXJtaXNzaW9uX2RlbmllZCIpLAogICAgKHguTm90Rm91bmQgPSAibm90X2ZvdW5kIiksCiAgICAoeC5SZXNvdXJjZUV4aGF1c3RlZCA9ICJyZXNvdXJjZV9leGhhdXN0ZWQiKSwKICAgICh4LkludmFsaWRBcmd1bWVudCA9ICJpbnZhbGlkX2FyZ3VtZW50IiksCiAgICAoeC5VbmltcGxlbWVudGVkID0gInVuaW1wbGVtZW50ZWQiKSwKICAgICh4LlVuYXZhaWxhYmxlID0gInVuYXZhaWxhYmxlIiksCiAgICAoeC5JbnRlcm5hbEVycm9yID0gImludGVybmFsX2Vycm9yIiksCiAgICAoeC5Vbmtub3duRXJyb3IgPSAidW5rbm93bl9lcnJvciIpLAogICAgKHguQ2FuY2VsbGVkID0gImNhbmNlbGxlZCIpLAogICAgKHguQWxyZWFkeUV4aXN0cyA9ICJhbHJlYWR5X2V4aXN0cyIpLAogICAgKHguRmFpbGVkUHJlY29uZGl0aW9uID0gImZhaWxlZF9wcmVjb25kaXRpb24iKSwKICAgICh4LkFib3J0ZWQgPSAiYWJvcnRlZCIpLAogICAgKHguT3V0T2ZSYW5nZSA9ICJvdXRfb2ZfcmFuZ2UiKSwKICAgICh4LkRhdGFMb3NzID0gImRhdGFfbG9zcyIpLAogICAgKChUaSA9IE9pID0gT2kgfHwge30pLmZyb21IdHRwQ29kZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlIDwgNDAwKSByZXR1cm4gVGkuT2s7CiAgICAgIGlmICg0MDAgPD0gZSAmJiBlIDwgNTAwKQogICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgY2FzZSA0MDE6CiAgICAgICAgICAgIHJldHVybiBUaS5VbmF1dGhlbnRpY2F0ZWQ7CiAgICAgICAgICBjYXNlIDQwMzoKICAgICAgICAgICAgcmV0dXJuIFRpLlBlcm1pc3Npb25EZW5pZWQ7CiAgICAgICAgICBjYXNlIDQwNDoKICAgICAgICAgICAgcmV0dXJuIFRpLk5vdEZvdW5kOwogICAgICAgICAgY2FzZSA0MDk6CiAgICAgICAgICAgIHJldHVybiBUaS5BbHJlYWR5RXhpc3RzOwogICAgICAgICAgY2FzZSA0MTM6CiAgICAgICAgICAgIHJldHVybiBUaS5GYWlsZWRQcmVjb25kaXRpb247CiAgICAgICAgICBjYXNlIDQyOToKICAgICAgICAgICAgcmV0dXJuIFRpLlJlc291cmNlRXhoYXVzdGVkOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIFRpLkludmFsaWRBcmd1bWVudDsKICAgICAgICB9CiAgICAgIGlmICg1MDAgPD0gZSAmJiBlIDwgNjAwKQogICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgY2FzZSA1MDE6CiAgICAgICAgICAgIHJldHVybiBUaS5VbmltcGxlbWVudGVkOwogICAgICAgICAgY2FzZSA1MDM6CiAgICAgICAgICAgIHJldHVybiBUaS5VbmF2YWlsYWJsZTsKICAgICAgICAgIGNhc2UgNTA0OgogICAgICAgICAgICByZXR1cm4gVGkuRGVhZGxpbmVFeGNlZWRlZDsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBUaS5JbnRlcm5hbEVycm9yOwogICAgICAgIH0KICAgICAgcmV0dXJuIFRpLlVua25vd25FcnJvcjsKICAgIH0pOwogIHZhciBqaSA9IG5ldyBSZWdFeHAoCiAgICAiXlsgXFx0XSooWzAtOWEtZl17MzJ9KT8tPyhbMC05YS1mXXsxNn0pPy0/KFswMV0pP1sgXFx0XSokIgogICk7CgogIGZ1bmN0aW9uIEFpKGUpIHsKICAgIHZhciB0OwogICAgcmV0dXJuICgKICAgICAgKGUgPQogICAgICAgIHZvaWQgMCA9PT0gZQogICAgICAgICAgPyBudWxsID09PSAodCA9IGRyKCkuZ2V0Q2xpZW50KCkpIHx8IHZvaWQgMCA9PT0gdAogICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICA6IHQuZ2V0T3B0aW9ucygpCiAgICAgICAgICA6IGUpICYmCiAgICAgICgidHJhY2VzU2FtcGxlUmF0ZSIgaW4gZSB8fCAidHJhY2VzU2FtcGxlciIgaW4gZSkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBSaShlKSB7CiAgICByZXR1cm4gbnVsbCA9PT0KICAgICAgKGUgPQogICAgICAgIG51bGwgPT09IChlID0gdm9pZCAwID09PSBlID8gZHIoKSA6IGUpIHx8IHZvaWQgMCA9PT0gZQogICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgIDogZS5nZXRTY29wZSgpKSB8fCB2b2lkIDAgPT09IGUKICAgICAgPyB2b2lkIDAKICAgICAgOiBlLmdldFRyYW5zYWN0aW9uKCk7CiAgfQoKICBmdW5jdGlvbiBEaSgpIHsKICAgIHZhciBlID0gUmkoKTsKICAgIGUgJiYKICAgICAgKHluLmxvZygKICAgICAgICAiW1RyYWNpbmddIFRyYW5zYWN0aW9uOiAiICsKICAgICAgICAgIE9pLkludGVybmFsRXJyb3IgKwogICAgICAgICAgIiAtPiBHbG9iYWwgZXJyb3Igb2NjdXJlZCIKICAgICAgKSwKICAgICAgZS5zZXRTdGF0dXMoT2kuSW50ZXJuYWxFcnJvcikpOwogIH0KCiAgdmFyIFBpID0KICAgICgoTmkucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRoaXMuc3BhbnMubGVuZ3RoID4gdGhpcy5fbWF4bGVuCiAgICAgICAgPyAoZS5zcGFuUmVjb3JkZXIgPSB2b2lkIDApCiAgICAgICAgOiB0aGlzLnNwYW5zLnB1c2goZSk7CiAgICB9KSwKICAgIE5pKTsKCiAgZnVuY3Rpb24gTmkoZSkgewogICAgdm9pZCAwID09PSBlICYmIChlID0gMWUzKSwgKHRoaXMuc3BhbnMgPSBbXSksICh0aGlzLl9tYXhsZW4gPSBlKTsKICB9CgogIChMaS5wcm90b3R5cGUuY2hpbGQgPSBmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIHRoaXMuc3RhcnRDaGlsZChlKTsKICB9KSwKICAgIChMaS5wcm90b3R5cGUuc3RhcnRDaGlsZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGUgPSBuZXcgTGkoCiAgICAgICAgSXQoSXQoe30sIGUpLCB7CiAgICAgICAgICBwYXJlbnRTcGFuSWQ6IHRoaXMuc3BhbklkLAogICAgICAgICAgc2FtcGxlZDogdGhpcy5zYW1wbGVkLAogICAgICAgICAgdHJhY2VJZDogdGhpcy50cmFjZUlkLAogICAgICAgIH0pCiAgICAgICk7CiAgICAgIHJldHVybiAoCiAgICAgICAgKGUuc3BhblJlY29yZGVyID0gdGhpcy5zcGFuUmVjb3JkZXIpLAogICAgICAgIGUuc3BhblJlY29yZGVyICYmIGUuc3BhblJlY29yZGVyLmFkZChlKSwKICAgICAgICAoZS50cmFuc2FjdGlvbiA9IHRoaXMudHJhbnNhY3Rpb24pLAogICAgICAgIGUKICAgICAgKTsKICAgIH0pLAogICAgKExpLnByb3RvdHlwZS5zZXRUYWcgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbjsKICAgICAgcmV0dXJuICh0aGlzLnRhZ3MgPSBJdChJdCh7fSwgdGhpcy50YWdzKSwgKCgobiA9IHt9KVtlXSA9IHQpLCBuKSkpLCB0aGlzOwogICAgfSksCiAgICAoTGkucHJvdG90eXBlLnNldERhdGEgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbjsKICAgICAgcmV0dXJuICh0aGlzLmRhdGEgPSBJdChJdCh7fSwgdGhpcy5kYXRhKSwgKCgobiA9IHt9KVtlXSA9IHQpLCBuKSkpLCB0aGlzOwogICAgfSksCiAgICAoTGkucHJvdG90eXBlLnNldFN0YXR1cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAodGhpcy5zdGF0dXMgPSBlKSwgdGhpczsKICAgIH0pLAogICAgKExpLnByb3RvdHlwZS5zZXRIdHRwU3RhdHVzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5zZXRUYWcoImh0dHAuc3RhdHVzX2NvZGUiLCBTdHJpbmcoZSkpOwogICAgICBlID0gT2kuZnJvbUh0dHBDb2RlKGUpOwogICAgICByZXR1cm4gZSAhPT0gT2kuVW5rbm93bkVycm9yICYmIHRoaXMuc2V0U3RhdHVzKGUpLCB0aGlzOwogICAgfSksCiAgICAoTGkucHJvdG90eXBlLmlzU3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSBPaS5PazsKICAgIH0pLAogICAgKExpLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiAoZSkgewogICAgICB0aGlzLmVuZFRpbWVzdGFtcCA9ICJudW1iZXIiID09IHR5cGVvZiBlID8gZSA6IFpuKCk7CiAgICB9KSwKICAgIChMaS5wcm90b3R5cGUudG9UcmFjZXBhcmVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSAiIjsKICAgICAgcmV0dXJuICgKICAgICAgICB2b2lkIDAgIT09IHRoaXMuc2FtcGxlZCAmJiAoZSA9IHRoaXMuc2FtcGxlZCA/ICItMSIgOiAiLTAiKSwKICAgICAgICB0aGlzLnRyYWNlSWQgKyAiLSIgKyB0aGlzLnNwYW5JZCArIGUKICAgICAgKTsKICAgIH0pLAogICAgKExpLnByb3RvdHlwZS50b0NvbnRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBDbih7CiAgICAgICAgZGF0YTogdGhpcy5kYXRhLAogICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLAogICAgICAgIGVuZFRpbWVzdGFtcDogdGhpcy5lbmRUaW1lc3RhbXAsCiAgICAgICAgb3A6IHRoaXMub3AsCiAgICAgICAgcGFyZW50U3BhbklkOiB0aGlzLnBhcmVudFNwYW5JZCwKICAgICAgICBzYW1wbGVkOiB0aGlzLnNhbXBsZWQsCiAgICAgICAgc3BhbklkOiB0aGlzLnNwYW5JZCwKICAgICAgICBzdGFydFRpbWVzdGFtcDogdGhpcy5zdGFydFRpbWVzdGFtcCwKICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLAogICAgICAgIHRhZ3M6IHRoaXMudGFncywKICAgICAgICB0cmFjZUlkOiB0aGlzLnRyYWNlSWQsCiAgICAgIH0pOwogICAgfSksCiAgICAoTGkucHJvdG90eXBlLnVwZGF0ZVdpdGhDb250ZXh0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQ7CiAgICAgIHJldHVybiAoCiAgICAgICAgKHRoaXMuZGF0YSA9IG51bGwgIT0gKHQgPSBlLmRhdGEpID8gdCA6IHt9KSwKICAgICAgICAodGhpcy5kZXNjcmlwdGlvbiA9IGUuZGVzY3JpcHRpb24pLAogICAgICAgICh0aGlzLmVuZFRpbWVzdGFtcCA9IGUuZW5kVGltZXN0YW1wKSwKICAgICAgICAodGhpcy5vcCA9IGUub3ApLAogICAgICAgICh0aGlzLnBhcmVudFNwYW5JZCA9IGUucGFyZW50U3BhbklkKSwKICAgICAgICAodGhpcy5zYW1wbGVkID0gZS5zYW1wbGVkKSwKICAgICAgICAodGhpcy5zcGFuSWQgPSBudWxsICE9ICh0ID0gZS5zcGFuSWQpID8gdCA6IHRoaXMuc3BhbklkKSwKICAgICAgICAodGhpcy5zdGFydFRpbWVzdGFtcCA9CiAgICAgICAgICBudWxsICE9ICh0ID0gZS5zdGFydFRpbWVzdGFtcCkgPyB0IDogdGhpcy5zdGFydFRpbWVzdGFtcCksCiAgICAgICAgKHRoaXMuc3RhdHVzID0gZS5zdGF0dXMpLAogICAgICAgICh0aGlzLnRhZ3MgPSBudWxsICE9ICh0ID0gZS50YWdzKSA/IHQgOiB7fSksCiAgICAgICAgKHRoaXMudHJhY2VJZCA9IG51bGwgIT0gKGUgPSBlLnRyYWNlSWQpID8gZSA6IHRoaXMudHJhY2VJZCksCiAgICAgICAgdGhpcwogICAgICApOwogICAgfSksCiAgICAoTGkucHJvdG90eXBlLmdldFRyYWNlQ29udGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIENuKHsKICAgICAgICBkYXRhOiAwIDwgT2JqZWN0LmtleXModGhpcy5kYXRhKS5sZW5ndGggPyB0aGlzLmRhdGEgOiB2b2lkIDAsCiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgb3A6IHRoaXMub3AsCiAgICAgICAgcGFyZW50X3NwYW5faWQ6IHRoaXMucGFyZW50U3BhbklkLAogICAgICAgIHNwYW5faWQ6IHRoaXMuc3BhbklkLAogICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsCiAgICAgICAgdGFnczogMCA8IE9iamVjdC5rZXlzKHRoaXMudGFncykubGVuZ3RoID8gdGhpcy50YWdzIDogdm9pZCAwLAogICAgICAgIHRyYWNlX2lkOiB0aGlzLnRyYWNlSWQsCiAgICAgIH0pOwogICAgfSksCiAgICAoTGkucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIENuKHsKICAgICAgICBkYXRhOiAwIDwgT2JqZWN0LmtleXModGhpcy5kYXRhKS5sZW5ndGggPyB0aGlzLmRhdGEgOiB2b2lkIDAsCiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgb3A6IHRoaXMub3AsCiAgICAgICAgcGFyZW50X3NwYW5faWQ6IHRoaXMucGFyZW50U3BhbklkLAogICAgICAgIHNwYW5faWQ6IHRoaXMuc3BhbklkLAogICAgICAgIHN0YXJ0X3RpbWVzdGFtcDogdGhpcy5zdGFydFRpbWVzdGFtcCwKICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLAogICAgICAgIHRhZ3M6IDAgPCBPYmplY3Qua2V5cyh0aGlzLnRhZ3MpLmxlbmd0aCA/IHRoaXMudGFncyA6IHZvaWQgMCwKICAgICAgICB0aW1lc3RhbXA6IHRoaXMuZW5kVGltZXN0YW1wLAogICAgICAgIHRyYWNlX2lkOiB0aGlzLnRyYWNlSWQsCiAgICAgIH0pOwogICAgfSksCiAgICAoUiA9IExpKTsKCiAgZnVuY3Rpb24gTGkoZSkgewogICAgaWYgKAogICAgICAoKHRoaXMudHJhY2VJZCA9IGNuKCkpLAogICAgICAodGhpcy5zcGFuSWQgPSBjbigpLnN1YnN0cmluZygxNikpLAogICAgICAodGhpcy5zdGFydFRpbWVzdGFtcCA9IFpuKCkpLAogICAgICAodGhpcy50YWdzID0ge30pLAogICAgICAodGhpcy5kYXRhID0ge30pLAogICAgICAhZSkKICAgICkKICAgICAgcmV0dXJuIHRoaXM7CiAgICBlLnRyYWNlSWQgJiYgKHRoaXMudHJhY2VJZCA9IGUudHJhY2VJZCksCiAgICAgIGUuc3BhbklkICYmICh0aGlzLnNwYW5JZCA9IGUuc3BhbklkKSwKICAgICAgZS5wYXJlbnRTcGFuSWQgJiYgKHRoaXMucGFyZW50U3BhbklkID0gZS5wYXJlbnRTcGFuSWQpLAogICAgICAic2FtcGxlZCIgaW4gZSAmJiAodGhpcy5zYW1wbGVkID0gZS5zYW1wbGVkKSwKICAgICAgZS5vcCAmJiAodGhpcy5vcCA9IGUub3ApLAogICAgICBlLmRlc2NyaXB0aW9uICYmICh0aGlzLmRlc2NyaXB0aW9uID0gZS5kZXNjcmlwdGlvbiksCiAgICAgIGUuZGF0YSAmJiAodGhpcy5kYXRhID0gZS5kYXRhKSwKICAgICAgZS50YWdzICYmICh0aGlzLnRhZ3MgPSBlLnRhZ3MpLAogICAgICBlLnN0YXR1cyAmJiAodGhpcy5zdGF0dXMgPSBlLnN0YXR1cyksCiAgICAgIGUuc3RhcnRUaW1lc3RhbXAgJiYgKHRoaXMuc3RhcnRUaW1lc3RhbXAgPSBlLnN0YXJ0VGltZXN0YW1wKSwKICAgICAgZS5lbmRUaW1lc3RhbXAgJiYgKHRoaXMuZW5kVGltZXN0YW1wID0gZS5lbmRUaW1lc3RhbXApOwogIH0KCiAgdmFyIHFpLAogICAgTWkgPQogICAgICAod3QoVWksIChxaSA9IFIpKSwKICAgICAgKFVpLnByb3RvdHlwZS5zZXROYW1lID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB0aGlzLm5hbWUgPSBlOwogICAgICB9KSwKICAgICAgKFVpLnByb3RvdHlwZS5pbml0U3BhblJlY29yZGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSAxZTMpLAogICAgICAgICAgdGhpcy5zcGFuUmVjb3JkZXIgfHwgKHRoaXMuc3BhblJlY29yZGVyID0gbmV3IFBpKGUpKSwKICAgICAgICAgIHRoaXMuc3BhblJlY29yZGVyLmFkZCh0aGlzKTsKICAgICAgfSksCiAgICAgIChVaS5wcm90b3R5cGUuc2V0TWVhc3VyZW1lbnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB0aGlzLl9tZWFzdXJlbWVudHMgPSBJdCh7fSwgZSk7CiAgICAgIH0pLAogICAgICAoVWkucHJvdG90eXBlLnNldE1ldGFkYXRhID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB0aGlzLm1ldGFkYXRhID0gSXQoSXQoe30sIHRoaXMubWV0YWRhdGEpLCBlKTsKICAgICAgfSksCiAgICAgIChVaS5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IHRoaXM7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdGhpcy5lbmRUaW1lc3RhbXApIHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgKHRoaXMubmFtZSB8fAogICAgICAgICAgICAgICh5bi53YXJuKAogICAgICAgICAgICAgICAgIlRyYW5zYWN0aW9uIGhhcyBubyBuYW1lLCBmYWxsaW5nIGJhY2sgdG8gYDx1bmxhYmVsZWQgdHJhbnNhY3Rpb24+YC4iCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAodGhpcy5uYW1lID0gIjx1bmxhYmVsZWQgdHJhbnNhY3Rpb24+IikpLAogICAgICAgICAgICBxaS5wcm90b3R5cGUuZmluaXNoLmNhbGwodGhpcywgZSksCiAgICAgICAgICAgICEwID09PSB0aGlzLnNhbXBsZWQpCiAgICAgICAgICApIHsKICAgICAgICAgICAgZSA9IHRoaXMuc3BhblJlY29yZGVyCiAgICAgICAgICAgICAgPyB0aGlzLnNwYW5SZWNvcmRlci5zcGFucy5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgIT09IHQgJiYgZS5lbmRUaW1lc3RhbXA7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogW107CiAgICAgICAgICAgIHRoaXMuX3RyaW1FbmQgJiYKICAgICAgICAgICAgICAwIDwgZS5sZW5ndGggJiYKICAgICAgICAgICAgICAodGhpcy5lbmRUaW1lc3RhbXAgPSBlLnJlZHVjZShmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgcmV0dXJuICFlLmVuZFRpbWVzdGFtcCB8fAogICAgICAgICAgICAgICAgICAhdC5lbmRUaW1lc3RhbXAgfHwKICAgICAgICAgICAgICAgICAgZS5lbmRUaW1lc3RhbXAgPiB0LmVuZFRpbWVzdGFtcAogICAgICAgICAgICAgICAgICA/IGUKICAgICAgICAgICAgICAgICAgOiB0OwogICAgICAgICAgICAgIH0pLmVuZFRpbWVzdGFtcCk7CiAgICAgICAgICAgIGUgPSB7CiAgICAgICAgICAgICAgY29udGV4dHM6IHsgdHJhY2U6IHRoaXMuZ2V0VHJhY2VDb250ZXh0KCkgfSwKICAgICAgICAgICAgICBzcGFuczogZSwKICAgICAgICAgICAgICBzdGFydF90aW1lc3RhbXA6IHRoaXMuc3RhcnRUaW1lc3RhbXAsCiAgICAgICAgICAgICAgdGFnczogdGhpcy50YWdzLAogICAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy5lbmRUaW1lc3RhbXAsCiAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHRoaXMubmFtZSwKICAgICAgICAgICAgICB0eXBlOiAidHJhbnNhY3Rpb24iLAogICAgICAgICAgICAgIGRlYnVnX21ldGE6IHRoaXMubWV0YWRhdGEsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgMCA8IE9iamVjdC5rZXlzKHRoaXMuX21lYXN1cmVtZW50cykubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAoeW4ubG9nKAogICAgICAgICAgICAgICAgICAiW01lYXN1cmVtZW50c10gQWRkaW5nIG1lYXN1cmVtZW50cyB0byB0cmFuc2FjdGlvbiIsCiAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuX21lYXN1cmVtZW50cywgdm9pZCAwLCAyKQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIChlLm1lYXN1cmVtZW50cyA9IHRoaXMuX21lYXN1cmVtZW50cykpLAogICAgICAgICAgICAgIHluLmxvZygKICAgICAgICAgICAgICAgICJbVHJhY2luZ10gRmluaXNoaW5nICIgKwogICAgICAgICAgICAgICAgICB0aGlzLm9wICsKICAgICAgICAgICAgICAgICAgIiB0cmFuc2FjdGlvbjogIiArCiAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSArCiAgICAgICAgICAgICAgICAgICIuIgogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgdGhpcy5faHViLmNhcHR1cmVFdmVudChlKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgeW4ubG9nKAogICAgICAgICAgICAiW1RyYWNpbmddIERpc2NhcmRpbmcgdHJhbnNhY3Rpb24gYmVjYXVzZSBpdHMgdHJhY2Ugd2FzIG5vdCBjaG9zZW4gdG8gYmUgc2FtcGxlZC4iCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfSksCiAgICAgIChVaS5wcm90b3R5cGUudG9Db250ZXh0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlID0gcWkucHJvdG90eXBlLnRvQ29udGV4dC5jYWxsKHRoaXMpOwogICAgICAgIHJldHVybiBDbihJdChJdCh7fSwgZSksIHsgbmFtZTogdGhpcy5uYW1lLCB0cmltRW5kOiB0aGlzLl90cmltRW5kIH0pKTsKICAgICAgfSksCiAgICAgIChVaS5wcm90b3R5cGUudXBkYXRlV2l0aENvbnRleHQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0OwogICAgICAgIHJldHVybiAoCiAgICAgICAgICBxaS5wcm90b3R5cGUudXBkYXRlV2l0aENvbnRleHQuY2FsbCh0aGlzLCBlKSwKICAgICAgICAgICh0aGlzLm5hbWUgPSBudWxsICE9ICh0ID0gZS5uYW1lKSA/IHQgOiAiIiksCiAgICAgICAgICAodGhpcy5fdHJpbUVuZCA9IGUudHJpbUVuZCksCiAgICAgICAgICB0aGlzCiAgICAgICAgKTsKICAgICAgfSksCiAgICAgIFVpKTsKCiAgZnVuY3Rpb24gVWkoZSwgdCkgewogICAgdmFyIG4gPSBxaS5jYWxsKHRoaXMsIGUpIHx8IHRoaXM7CiAgICByZXR1cm4gKAogICAgICAobi5fbWVhc3VyZW1lbnRzID0ge30pLAogICAgICAobi5faHViID0gZHIoKSksCiAgICAgIHp0KHQsIGNyKSAmJiAobi5faHViID0gdCksCiAgICAgIChuLm5hbWUgPSBlLm5hbWUgfHwgIiIpLAogICAgICAobi5tZXRhZGF0YSA9IGUubWV0YWRhdGEgfHwge30pLAogICAgICAobi5fdHJpbUVuZCA9IGUudHJpbUVuZCksCiAgICAgIChuLnRyYW5zYWN0aW9uID0gbikKICAgICk7CiAgfQoKICB2YXIgRmksCiAgICBCaSA9CiAgICAgICh3dChIaSwgKEZpID0gUGkpKSwKICAgICAgKEhpLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBuID0gdGhpczsKICAgICAgICB0LnNwYW5JZCAhPT0gdGhpcy50cmFuc2FjdGlvblNwYW5JZCAmJgogICAgICAgICAgKCh0LmZpbmlzaCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICh0LmVuZFRpbWVzdGFtcCA9ICJudW1iZXIiID09IHR5cGVvZiBlID8gZSA6IFpuKCkpLAogICAgICAgICAgICAgIG4uX3BvcEFjdGl2aXR5KHQuc3BhbklkKTsKICAgICAgICAgIH0pLAogICAgICAgICAgdm9pZCAwID09PSB0LmVuZFRpbWVzdGFtcCAmJiB0aGlzLl9wdXNoQWN0aXZpdHkodC5zcGFuSWQpKSwKICAgICAgICAgIEZpLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLCB0KTsKICAgICAgfSksCiAgICAgIEhpKTsKCiAgZnVuY3Rpb24gSGkoZSwgdCwgbiwgcikgewogICAgdm9pZCAwID09PSBuICYmIChuID0gIiIpOwogICAgciA9IEZpLmNhbGwodGhpcywgcikgfHwgdGhpczsKICAgIHJldHVybiAoCiAgICAgIChyLl9wdXNoQWN0aXZpdHkgPSBlKSwgKHIuX3BvcEFjdGl2aXR5ID0gdCksIChyLnRyYW5zYWN0aW9uU3BhbklkID0gbiksIHIKICAgICk7CiAgfQoKICB2YXIgemksCiAgICBXaSA9CiAgICAgICh3dChZaSwgKHppID0gTWkpKSwKICAgICAgKFlpLnByb3RvdHlwZS5maW5pc2ggPSBmdW5jdGlvbiAobikgewogICAgICAgIHZhciB0LAogICAgICAgICAgZSwKICAgICAgICAgIHIgPSB0aGlzOwogICAgICAgIGlmICgKICAgICAgICAgICh2b2lkIDAgPT09IG4gJiYgKG4gPSBabigpKSwKICAgICAgICAgICh0aGlzLl9maW5pc2hlZCA9ICEwKSwKICAgICAgICAgICh0aGlzLmFjdGl2aXRpZXMgPSB7fSksCiAgICAgICAgICB0aGlzLnNwYW5SZWNvcmRlcikKICAgICAgICApIHsKICAgICAgICAgIHluLmxvZygKICAgICAgICAgICAgIltUcmFjaW5nXSBmaW5pc2hpbmcgSWRsZVRyYW5zYWN0aW9uIiwKICAgICAgICAgICAgbmV3IERhdGUoMWUzICogbikudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgdGhpcy5vcAogICAgICAgICAgKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgdmFyIGkgPSBqdCh0aGlzLl9iZWZvcmVGaW5pc2hDYWxsYmFja3MpLCBvID0gaS5uZXh0KCk7CiAgICAgICAgICAgICAgIW8uZG9uZTsKICAgICAgICAgICAgICBvID0gaS5uZXh0KCkKICAgICAgICAgICAgKQogICAgICAgICAgICAgICgwLCBvLnZhbHVlKSh0aGlzLCBuKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdCA9IHsgZXJyb3I6IGUgfTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgbyAmJiAhby5kb25lICYmIChlID0gaS5yZXR1cm4pICYmIGUuY2FsbChpKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAodCkgdGhyb3cgdC5lcnJvcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgKHRoaXMuc3BhblJlY29yZGVyLnNwYW5zID0gdGhpcy5zcGFuUmVjb3JkZXIuc3BhbnMuZmlsdGVyKGZ1bmN0aW9uICgKICAgICAgICAgICAgZQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGlmIChlLnNwYW5JZCA9PT0gci5zcGFuSWQpIHJldHVybiAhMDsKICAgICAgICAgICAgZS5lbmRUaW1lc3RhbXAgfHwKICAgICAgICAgICAgICAoKGUuZW5kVGltZXN0YW1wID0gbiksCiAgICAgICAgICAgICAgZS5zZXRTdGF0dXMoT2kuQ2FuY2VsbGVkKSwKICAgICAgICAgICAgICB5bi5sb2coCiAgICAgICAgICAgICAgICAiW1RyYWNpbmddIGNhbmNlbGxpbmcgc3BhbiBzaW5jZSB0cmFuc2FjdGlvbiBlbmRlZCBlYXJseSIsCiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShlLCB2b2lkIDAsIDIpCiAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIHZhciB0ID0gZS5zdGFydFRpbWVzdGFtcCA8IG47CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgdCB8fAogICAgICAgICAgICAgICAgeW4ubG9nKAogICAgICAgICAgICAgICAgICAiW1RyYWNpbmddIGRpc2NhcmRpbmcgU3BhbiBzaW5jZSBpdCBoYXBwZW5lZCBhZnRlciBUcmFuc2FjdGlvbiB3YXMgZmluaXNoZWQiLAogICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShlLCB2b2lkIDAsIDIpCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pKSwKICAgICAgICAgICAgeW4ubG9nKCJbVHJhY2luZ10gZmx1c2hpbmcgSWRsZVRyYW5zYWN0aW9uIik7CiAgICAgICAgfSBlbHNlIHluLmxvZygiW1RyYWNpbmddIE5vIGFjdGl2ZSBJZGxlVHJhbnNhY3Rpb24iKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgdGhpcy5fb25TY29wZSAmJiBWaSh0aGlzLl9pZGxlSHViKSwgemkucHJvdG90eXBlLmZpbmlzaC5jYWxsKHRoaXMsIG4pCiAgICAgICAgKTsKICAgICAgfSksCiAgICAgIChZaS5wcm90b3R5cGUucmVnaXN0ZXJCZWZvcmVGaW5pc2hDYWxsYmFjayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdGhpcy5fYmVmb3JlRmluaXNoQ2FsbGJhY2tzLnB1c2goZSk7CiAgICAgIH0pLAogICAgICAoWWkucHJvdG90eXBlLmluaXRTcGFuUmVjb3JkZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gdGhpczsKICAgICAgICB0aGlzLnNwYW5SZWNvcmRlciB8fAogICAgICAgICAgKCh0aGlzLnNwYW5SZWNvcmRlciA9IG5ldyBCaSgKICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICB0Ll9maW5pc2hlZCB8fCB0Ll9wdXNoQWN0aXZpdHkoZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgdC5fZmluaXNoZWQgfHwgdC5fcG9wQWN0aXZpdHkoZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRoaXMuc3BhbklkLAogICAgICAgICAgICBlCiAgICAgICAgICApKSwKICAgICAgICAgIHluLmxvZygiU3RhcnRpbmcgaGVhcnRiZWF0IiksCiAgICAgICAgICB0aGlzLl9waW5nSGVhcnRiZWF0KCkpLAogICAgICAgICAgdGhpcy5zcGFuUmVjb3JkZXIuYWRkKHRoaXMpOwogICAgICB9KSwKICAgICAgKFlpLnByb3RvdHlwZS5fcHVzaEFjdGl2aXR5ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB0aGlzLl9pbml0VGltZW91dCAmJgogICAgICAgICAgKGNsZWFyVGltZW91dCh0aGlzLl9pbml0VGltZW91dCksICh0aGlzLl9pbml0VGltZW91dCA9IHZvaWQgMCkpLAogICAgICAgICAgeW4ubG9nKCJbVHJhY2luZ10gcHVzaEFjdGl2aXR5OiAiICsgZSksCiAgICAgICAgICAodGhpcy5hY3Rpdml0aWVzW2VdID0gITApLAogICAgICAgICAgeW4ubG9nKAogICAgICAgICAgICAiW1RyYWNpbmddIG5ldyBhY3Rpdml0aWVzIGNvdW50IiwKICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5hY3Rpdml0aWVzKS5sZW5ndGgKICAgICAgICAgICk7CiAgICAgIH0pLAogICAgICAoWWkucHJvdG90eXBlLl9wb3BBY3Rpdml0eSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQsCiAgICAgICAgICBuID0gdGhpczsKICAgICAgICB0aGlzLmFjdGl2aXRpZXNbZV0gJiYKICAgICAgICAgICh5bi5sb2coIltUcmFjaW5nXSBwb3BBY3Rpdml0eSAiICsgZSksCiAgICAgICAgICBkZWxldGUgdGhpcy5hY3Rpdml0aWVzW2VdLAogICAgICAgICAgeW4ubG9nKAogICAgICAgICAgICAiW1RyYWNpbmddIG5ldyBhY3Rpdml0aWVzIGNvdW50IiwKICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5hY3Rpdml0aWVzKS5sZW5ndGgKICAgICAgICAgICkpLAogICAgICAgICAgMCA9PT0gT2JqZWN0LmtleXModGhpcy5hY3Rpdml0aWVzKS5sZW5ndGggJiYKICAgICAgICAgICAgKChlID0gdGhpcy5faWRsZVRpbWVvdXQpLAogICAgICAgICAgICAodCA9IFpuKCkgKyBlIC8gMWUzKSwKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgbi5fZmluaXNoZWQgfHwgbi5maW5pc2godCk7CiAgICAgICAgICAgIH0sIGUpKTsKICAgICAgfSksCiAgICAgIChZaS5wcm90b3R5cGUuX2JlYXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGU7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2hlYXJ0YmVhdFRpbWVyKSwKICAgICAgICAgIHRoaXMuX2ZpbmlzaGVkIHx8CiAgICAgICAgICAgICgoZSA9IChlID0gT2JqZWN0LmtleXModGhpcy5hY3Rpdml0aWVzKSkubGVuZ3RoCiAgICAgICAgICAgICAgPyBlLnJlZHVjZShmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZSArIHQ7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogIiIpID09PSB0aGlzLl9wcmV2SGVhcnRiZWF0U3RyaW5nCiAgICAgICAgICAgICAgPyAodGhpcy5faGVhcnRiZWF0Q291bnRlciArPSAxKQogICAgICAgICAgICAgIDogKHRoaXMuX2hlYXJ0YmVhdENvdW50ZXIgPSAxKSwKICAgICAgICAgICAgKHRoaXMuX3ByZXZIZWFydGJlYXRTdHJpbmcgPSBlKSwKICAgICAgICAgICAgMyA8PSB0aGlzLl9oZWFydGJlYXRDb3VudGVyCiAgICAgICAgICAgICAgPyAoeW4ubG9nKAogICAgICAgICAgICAgICAgICAiW1RyYWNpbmddIFRyYW5zYWN0aW9uIGZpbmlzaGVkIGJlY2F1c2Ugb2Ygbm8gY2hhbmdlIGZvciAzIGhlYXJ0IGJlYXRzIgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzKE9pLkRlYWRsaW5lRXhjZWVkZWQpLAogICAgICAgICAgICAgICAgdGhpcy5zZXRUYWcoImhlYXJ0YmVhdCIsICJmYWlsZWQiKSwKICAgICAgICAgICAgICAgIHRoaXMuZmluaXNoKCkpCiAgICAgICAgICAgICAgOiB0aGlzLl9waW5nSGVhcnRiZWF0KCkpOwogICAgICB9KSwKICAgICAgKFlpLnByb3RvdHlwZS5fcGluZ0hlYXJ0YmVhdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZSA9IHRoaXM7CiAgICAgICAgeW4ubG9nKAogICAgICAgICAgInBpbmdpbmcgSGVhcnRiZWF0IC0+IGN1cnJlbnQgY291bnRlcjogIiArIHRoaXMuX2hlYXJ0YmVhdENvdW50ZXIKICAgICAgICApLAogICAgICAgICAgKHRoaXMuX2hlYXJ0YmVhdFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGUuX2JlYXQoKTsKICAgICAgICAgIH0sIDVlMykpOwogICAgICB9KSwKICAgICAgWWkpOwoKICBmdW5jdGlvbiBZaShlLCB0LCBuLCByKSB7CiAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSAxZTMpLCB2b2lkIDAgPT09IHIgJiYgKHIgPSAhMSk7CiAgICB2YXIgaSA9IHppLmNhbGwodGhpcywgZSwgdCkgfHwgdGhpczsKICAgIHJldHVybiAoCiAgICAgIChpLl9pZGxlSHViID0gdCksCiAgICAgIChpLl9pZGxlVGltZW91dCA9IG4pLAogICAgICAoaS5fb25TY29wZSA9IHIpLAogICAgICAoaS5hY3Rpdml0aWVzID0ge30pLAogICAgICAoaS5faGVhcnRiZWF0VGltZXIgPSAwKSwKICAgICAgKGkuX2hlYXJ0YmVhdENvdW50ZXIgPSAwKSwKICAgICAgKGkuX2ZpbmlzaGVkID0gITEpLAogICAgICAoaS5fYmVmb3JlRmluaXNoQ2FsbGJhY2tzID0gW10pLAogICAgICB0ICYmCiAgICAgICAgciAmJgogICAgICAgIChWaSh0KSwKICAgICAgICB5bi5sb2coIlNldHRpbmcgaWRsZSB0cmFuc2FjdGlvbiBvbiBzY29wZS4gU3BhbiBJRDogIiArIGkuc3BhbklkKSwKICAgICAgICB0LmNvbmZpZ3VyZVNjb3BlKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZS5zZXRTcGFuKGkpOwogICAgICAgIH0pKSwKICAgICAgKGkuX2luaXRUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaS5fZmluaXNoZWQgfHwgaS5maW5pc2goKTsKICAgICAgfSwgaS5faWRsZVRpbWVvdXQpKSwKICAgICAgaQogICAgKTsKICB9CgogIGZ1bmN0aW9uIFZpKGUpIHsKICAgICFlIHx8ICgoZSA9IGUuZ2V0U2NvcGUoKSkgJiYgZS5nZXRUcmFuc2FjdGlvbigpICYmIGUuc2V0U3Bhbih2b2lkIDApKTsKICB9CgogIGZ1bmN0aW9uIEdpKGUpIHsKICAgIHJldHVybiAoR2kgPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIGZ1bmN0aW9uIEppKCkgewogICAgdmFyIGUgPSB0aGlzLmdldFNjb3BlKCk7CiAgICBpZiAoZSkgewogICAgICBlID0gZS5nZXRTcGFuKCk7CiAgICAgIGlmIChlKSByZXR1cm4geyAic2VudHJ5LXRyYWNlIjogZS50b1RyYWNlcGFyZW50KCkgfTsKICAgIH0KICAgIHJldHVybiB7fTsKICB9CgogIGZ1bmN0aW9uIFhpKGUsIHQsIG4pIHsKICAgIHJldHVybiBBaSgpCiAgICAgID8gdm9pZCAwICE9PSBlLnNhbXBsZWQKICAgICAgICA/IChlLnNldE1ldGFkYXRhKHsgdHJhbnNhY3Rpb25TYW1wbGluZzogeyBtZXRob2Q6IFR0LkV4cGxpY2l0IH0gfSksIGUpCiAgICAgICAgOiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC50cmFjZXNTYW1wbGVyCiAgICAgICAgICAgID8gKChyID0gdC50cmFjZXNTYW1wbGVyKG4pKSwKICAgICAgICAgICAgICBlLnNldE1ldGFkYXRhKHsKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uU2FtcGxpbmc6IHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiBUdC5TYW1wbGVyLAogICAgICAgICAgICAgICAgICByYXRlOiBOdW1iZXIociksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0pKQogICAgICAgICAgICA6IHZvaWQgMCAhPT0gbi5wYXJlbnRTYW1wbGVkCiAgICAgICAgICAgID8gKChyID0gbi5wYXJlbnRTYW1wbGVkKSwKICAgICAgICAgICAgICBlLnNldE1ldGFkYXRhKHsKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uU2FtcGxpbmc6IHsgbWV0aG9kOiBUdC5Jbmhlcml0YW5jZSB9LAogICAgICAgICAgICAgIH0pKQogICAgICAgICAgICA6ICgociA9IHQudHJhY2VzU2FtcGxlUmF0ZSksCiAgICAgICAgICAgICAgZS5zZXRNZXRhZGF0YSh7CiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblNhbXBsaW5nOiB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogVHQuUmF0ZSwKICAgICAgICAgICAgICAgICAgcmF0ZTogTnVtYmVyKHIpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKGlzTmFOKGUpIHx8ICgibnVtYmVyIiAhPSB0eXBlb2YgZSAmJiAiYm9vbGVhbiIgIT0gdHlwZW9mIGUpKQogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICB5bi53YXJuKAogICAgICAgICAgICAgICAgICAiW1RyYWNpbmddIEdpdmVuIHNhbXBsZSByYXRlIGlzIGludmFsaWQuIFNhbXBsZSByYXRlIG11c3QgYmUgYSBib29sZWFuIG9yIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMS4gR290ICIgKwogICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGUpICsKICAgICAgICAgICAgICAgICAgICAiIG9mIHR5cGUgIiArCiAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoR2koZSkpICsKICAgICAgICAgICAgICAgICAgICAiLiIKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAhMQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmIChlIDwgMCB8fCAxIDwgZSkKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgeW4ud2FybigKICAgICAgICAgICAgICAgICAgIltUcmFjaW5nXSBHaXZlbiBzYW1wbGUgcmF0ZSBpcyBpbnZhbGlkLiBTYW1wbGUgcmF0ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMS4gR290ICIgKwogICAgICAgICAgICAgICAgICAgIGUgKwogICAgICAgICAgICAgICAgICAgICIuIgogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICExCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgfSkocikKICAgICAgICAgICAgPyByCiAgICAgICAgICAgICAgPyAoKGUuc2FtcGxlZCA9IE1hdGgucmFuZG9tKCkgPCByKSwKICAgICAgICAgICAgICAgIGUuc2FtcGxlZAogICAgICAgICAgICAgICAgICA/IHluLmxvZygKICAgICAgICAgICAgICAgICAgICAgICJbVHJhY2luZ10gc3RhcnRpbmcgIiArIGUub3AgKyAiIHRyYW5zYWN0aW9uIC0gIiArIGUubmFtZQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgOiB5bi5sb2coCiAgICAgICAgICAgICAgICAgICAgICAiW1RyYWNpbmddIERpc2NhcmRpbmcgdHJhbnNhY3Rpb24gYmVjYXVzZSBpdCdzIG5vdCBpbmNsdWRlZCBpbiB0aGUgcmFuZG9tIHNhbXBsZSAoc2FtcGxpbmcgcmF0ZSA9ICIgKwogICAgICAgICAgICAgICAgICAgICAgICBOdW1iZXIocikgKwogICAgICAgICAgICAgICAgICAgICAgICAiKSIKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgZSkKICAgICAgICAgICAgICA6ICh5bi5sb2coCiAgICAgICAgICAgICAgICAgICJbVHJhY2luZ10gRGlzY2FyZGluZyB0cmFuc2FjdGlvbiBiZWNhdXNlICIgKwogICAgICAgICAgICAgICAgICAgICgiZnVuY3Rpb24iID09IHR5cGVvZiB0LnRyYWNlc1NhbXBsZXIKICAgICAgICAgICAgICAgICAgICAgID8gInRyYWNlc1NhbXBsZXIgcmV0dXJuZWQgMCBvciBmYWxzZSIKICAgICAgICAgICAgICAgICAgICAgIDogImEgbmVnYXRpdmUgc2FtcGxpbmcgZGVjaXNpb24gd2FzIGluaGVyaXRlZCBvciB0cmFjZXNTYW1wbGVSYXRlIGlzIHNldCB0byAwIikKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAoZS5zYW1wbGVkID0gITEpLAogICAgICAgICAgICAgICAgZSkKICAgICAgICAgICAgOiAoeW4ud2FybigKICAgICAgICAgICAgICAgICJbVHJhY2luZ10gRGlzY2FyZGluZyB0cmFuc2FjdGlvbiBiZWNhdXNlIG9mIGludmFsaWQgc2FtcGxlIHJhdGUuIgogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKGUuc2FtcGxlZCA9ICExKSwKICAgICAgICAgICAgICBlKSkKICAgICAgOiAoKGUuc2FtcGxlZCA9ICExKSwgZSk7CiAgICB2YXIgcjsKICB9CgogIGZ1bmN0aW9uIEtpKGUsIHQpIHsKICAgIHZhciBuID0KICAgICAgICAobnVsbCA9PT0gKHIgPSB0aGlzLmdldENsaWVudCgpKSB8fCB2b2lkIDAgPT09IHIKICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICA6IHIuZ2V0T3B0aW9ucygpKSB8fCB7fSwKICAgICAgciA9IG5ldyBNaShlLCB0aGlzKTsKICAgIHJldHVybiAoCiAgICAgIChyID0gWGkoCiAgICAgICAgciwKICAgICAgICBuLAogICAgICAgIEl0KAogICAgICAgICAgewogICAgICAgICAgICBwYXJlbnRTYW1wbGVkOiBlLnBhcmVudFNhbXBsZWQsCiAgICAgICAgICAgIHRyYW5zYWN0aW9uQ29udGV4dDogZSwKICAgICAgICAgIH0sCiAgICAgICAgICB0CiAgICAgICAgKQogICAgICApKS5zYW1wbGVkICYmCiAgICAgICAgci5pbml0U3BhblJlY29yZGVyKAogICAgICAgICAgbnVsbCA9PT0gKG4gPSBuLl9leHBlcmltZW50cykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5tYXhTcGFucwogICAgICAgICksCiAgICAgIHIKICAgICk7CiAgfQoKICB2YXIgJGkgPSBzbigpOwoKICBmdW5jdGlvbiBRaSh0LCBuLCByKSB7CiAgICB2YXIgaTsKICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICAwIDw9IG4udmFsdWUgJiYKICAgICAgICAoZSB8fCByKSAmJgogICAgICAgICgobi5kZWx0YSA9IG4udmFsdWUgLSAoaSB8fCAwKSksCiAgICAgICAgKCFuLmRlbHRhICYmIHZvaWQgMCAhPT0gaSkgfHwgKChpID0gbi52YWx1ZSksIHQobikpKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBaaShlLCB0KSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBlLAogICAgICB2YWx1ZTogbnVsbCAhPSB0ID8gdCA6IC0xLAogICAgICBkZWx0YTogMCwKICAgICAgZW50cmllczogW10sCiAgICAgIGlkOiBvbygpLAogICAgfTsKICB9CgogIGZ1bmN0aW9uIGVvKGUsIHQpIHsKICAgIHRyeSB7CiAgICAgIGlmIChQZXJmb3JtYW5jZU9ic2VydmVyLnN1cHBvcnRlZEVudHJ5VHlwZXMuaW5jbHVkZXMoZSkpIHsKICAgICAgICBpZiAoImZpcnN0LWlucHV0IiA9PT0gZSAmJiAhKCJQZXJmb3JtYW5jZUV2ZW50VGltaW5nIiBpbiBzZWxmKSkgcmV0dXJuOwogICAgICAgIHZhciBuID0gbmV3IFBlcmZvcm1hbmNlT2JzZXJ2ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlLmdldEVudHJpZXMoKS5tYXAodCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG4ub2JzZXJ2ZSh7IHR5cGU6IGUsIGJ1ZmZlcmVkOiAhMCB9KSwgbjsKICAgICAgfQogICAgfSBjYXRjaCAoZSkge30KICB9CgogIGZ1bmN0aW9uIHRvKGUsIHQpIHsKICAgIGZ1bmN0aW9uIG4oZSkgewogICAgICB2YXIgdCwgbjsKICAgICAgZSAmJgogICAgICAgICFlLmhhZFJlY2VudElucHV0ICYmCiAgICAgICAgKCh0ID0gYVswXSksCiAgICAgICAgKG4gPSBhW2EubGVuZ3RoIC0gMV0pLAogICAgICAgIG8gJiYKICAgICAgICAwICE9PSBhLmxlbmd0aCAmJgogICAgICAgIGUuc3RhcnRUaW1lIC0gbi5zdGFydFRpbWUgPCAxZTMgJiYKICAgICAgICBlLnN0YXJ0VGltZSAtIHQuc3RhcnRUaW1lIDwgNWUzCiAgICAgICAgICA/ICgobyArPSBlLnZhbHVlKSwgYS5wdXNoKGUpKQogICAgICAgICAgOiAoKG8gPSBlLnZhbHVlKSwgKGEgPSBbZV0pKSwKICAgICAgICBvID4gaS52YWx1ZSAmJiAoKGkudmFsdWUgPSBvKSwgKGkuZW50cmllcyA9IGEpLCByICYmIHIoKSkpOwogICAgfQoKICAgIHZhciByLAogICAgICBpID0gWmkoIkNMUyIsIDApLAogICAgICBvID0gMCwKICAgICAgYSA9IFtdLAogICAgICBzID0gZW8oImxheW91dC1zaGlmdCIsIG4pOwogICAgcyAmJgogICAgICAoKHIgPSBRaShlLCBpLCB0KSksCiAgICAgIGFvKGZ1bmN0aW9uICgpIHsKICAgICAgICBzLnRha2VSZWNvcmRzKCkubWFwKG4pLCByKCEwKTsKICAgICAgfSkpOwogIH0KCiAgZnVuY3Rpb24gbm8oKSB7CiAgICByZXR1cm4gKAogICAgICBzbyA8IDAgJiYKICAgICAgICAoKHNvID0gImhpZGRlbiIgPT09IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA/IDAgOiAxIC8gMCksCiAgICAgICAgYW8oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUgPSBlLnRpbWVTdGFtcDsKICAgICAgICAgIHNvID0gZTsKICAgICAgICB9LCAhMCkpLAogICAgICB7CiAgICAgICAgZ2V0IGZpcnN0SGlkZGVuVGltZSgpIHsKICAgICAgICAgIHJldHVybiBzbzsKICAgICAgICB9LAogICAgICB9CiAgICApOwogIH0KCiAgZnVuY3Rpb24gcm8oZSwgdCkgewogICAgZnVuY3Rpb24gbihlKSB7CiAgICAgIHIgJiYKICAgICAgICBlLnN0YXJ0VGltZSA8IGkuZmlyc3RIaWRkZW5UaW1lICYmCiAgICAgICAgKChvLnZhbHVlID0gZS5wcm9jZXNzaW5nU3RhcnQgLSBlLnN0YXJ0VGltZSksIG8uZW50cmllcy5wdXNoKGUpLCByKCEwKSk7CiAgICB9CgogICAgdmFyIHIsCiAgICAgIGkgPSBubygpLAogICAgICBvID0gWmkoIkZJRCIpLAogICAgICBhID0gZW8oImZpcnN0LWlucHV0Iiwgbik7CiAgICBhICYmCiAgICAgICgociA9IFFpKGUsIG8sIHQpKSwKICAgICAgYW8oZnVuY3Rpb24gKCkgewogICAgICAgIGEudGFrZVJlY29yZHMoKS5tYXAobiksIGEuZGlzY29ubmVjdCgpOwogICAgICB9LCAhMCkpOwogIH0KCiAgZnVuY3Rpb24gaW8oZSwgdCkgewogICAgZnVuY3Rpb24gbihlKSB7CiAgICAgIHZhciB0ID0gZS5zdGFydFRpbWU7CiAgICAgIHQgPCBvLmZpcnN0SGlkZGVuVGltZSAmJiAoKGEudmFsdWUgPSB0KSwgYS5lbnRyaWVzLnB1c2goZSkpLCByICYmIHIoKTsKICAgIH0KCiAgICB2YXIgciwKICAgICAgaSwKICAgICAgbyA9IG5vKCksCiAgICAgIGEgPSBaaSgiTENQIiksCiAgICAgIHMgPSBlbygibGFyZ2VzdC1jb250ZW50ZnVsLXBhaW50Iiwgbik7CiAgICBzICYmCiAgICAgICgociA9IFFpKGUsIGEsIHQpKSwKICAgICAgKGkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgY29bYS5pZF0gfHwKICAgICAgICAgIChzLnRha2VSZWNvcmRzKCkubWFwKG4pLCBzLmRpc2Nvbm5lY3QoKSwgKGNvW2EuaWRdID0gITApLCByKCEwKSk7CiAgICAgIH0pLAogICAgICBbImtleWRvd24iLCAiY2xpY2siXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlLCBpLCB7IG9uY2U6ICEwLCBjYXB0dXJlOiAhMCB9KTsKICAgICAgfSksCiAgICAgIGFvKGksICEwKSk7CiAgfQoKICB2YXIgb28gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgInYyLSIgKwogICAgICAgIERhdGUubm93KCkgKwogICAgICAgICItIiArCiAgICAgICAgKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg5ZTEyIC0gMSkpICsgMWUxMikKICAgICAgKTsKICAgIH0sCiAgICBhbyA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgICgicGFnZWhpZGUiICE9PSBlLnR5cGUgJiYgImhpZGRlbiIgIT09IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSkgfHwKICAgICAgICAgICh0KGUpLAogICAgICAgICAgbiAmJgogICAgICAgICAgICAocmVtb3ZlRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsIHIsICEwKSwKICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcigicGFnZWhpZGUiLCByLCAhMCkpKTsKICAgICAgfQoKICAgICAgYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsIHIsICEwKSwKICAgICAgICBhZGRFdmVudExpc3RlbmVyKCJwYWdlaGlkZSIsIHIsICEwKTsKICAgIH0sCiAgICBzbyA9IC0xLAogICAgY28gPSB7fSwKICAgIHVvID0gc24oKSwKICAgIGxvID0KICAgICAgKChwby5wcm90b3R5cGUuYWRkUGVyZm9ybWFuY2VFbnRyaWVzID0gZnVuY3Rpb24gKGMpIHsKICAgICAgICB2YXIgdSA9IHRoaXM7CiAgICAgICAgaWYgKHVvICYmIHVvLnBlcmZvcm1hbmNlICYmIHVvLnBlcmZvcm1hbmNlLmdldEVudHJpZXMgJiYgZXIpIHsKICAgICAgICAgIHluLmxvZygiW1RyYWNpbmddIEFkZGluZyAmIGFkanVzdGluZyBzcGFucyB1c2luZyBQZXJmb3JtYW5jZSBBUEkiKTsKICAgICAgICAgIHZhciBsLAogICAgICAgICAgICBwLAogICAgICAgICAgICBkLAogICAgICAgICAgICBmLAogICAgICAgICAgICBoLAogICAgICAgICAgICByLAogICAgICAgICAgICBtID0gZXIgLyAxZTM7CiAgICAgICAgICBpZiAodW8uZG9jdW1lbnQgJiYgdW8uZG9jdW1lbnQuc2NyaXB0cykKICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCB1by5kb2N1bWVudC5zY3JpcHRzLmxlbmd0aDsgZSsrKQogICAgICAgICAgICAgIGlmICgidHJ1ZSIgPT09IHVvLmRvY3VtZW50LnNjcmlwdHNbZV0uZGF0YXNldC5lbnRyeSkgewogICAgICAgICAgICAgICAgbCA9IHVvLmRvY3VtZW50LnNjcmlwdHNbZV0uc3JjOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgdW8ucGVyZm9ybWFuY2UKICAgICAgICAgICAgLmdldEVudHJpZXMoKQogICAgICAgICAgICAuc2xpY2UodGhpcy5fcGVyZm9ybWFuY2VDdXJzb3IpCiAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgdmFyIHQsCiAgICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgIGkgPSBlLnN0YXJ0VGltZSAvIDFlMywKICAgICAgICAgICAgICAgIG8gPSBlLmR1cmF0aW9uIC8gMWUzOwogICAgICAgICAgICAgIGlmICghKCJuYXZpZ2F0aW9uIiA9PT0gYy5vcCAmJiBtICsgaSA8IGMuc3RhcnRUaW1lc3RhbXApKQogICAgICAgICAgICAgICAgc3dpdGNoIChlLmVudHJ5VHlwZSkgewogICAgICAgICAgICAgICAgICBjYXNlICJuYXZpZ2F0aW9uIjoKICAgICAgICAgICAgICAgICAgICBmbyh7CiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogKHQgPSBjKSwKICAgICAgICAgICAgICAgICAgICAgIGVudHJ5OiAobiA9IGUpLAogICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICJ1bmxvYWRFdmVudCIsCiAgICAgICAgICAgICAgICAgICAgICB0aW1lT3JpZ2luOiAociA9IG0pLAogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgZm8oewogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdCwKICAgICAgICAgICAgICAgICAgICAgICAgZW50cnk6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAicmVkaXJlY3QiLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lT3JpZ2luOiByLAogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICBmbyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICJkb21Db250ZW50TG9hZGVkRXZlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lT3JpZ2luOiByLAogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICBmbyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICJsb2FkRXZlbnQiLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lT3JpZ2luOiByLAogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICBmbyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICJjb25uZWN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZU9yaWdpbjogciwKICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgZm8oewogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdCwKICAgICAgICAgICAgICAgICAgICAgICAgZW50cnk6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAic2VjdXJlQ29ubmVjdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVPcmlnaW46IHIsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50RW5kOiAiY29ubmVjdEVuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiVExTL1NTTCIsCiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIGZvKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5OiBuLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudDogImZldGNoIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZU9yaWdpbjogciwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRFbmQ6ICJkb21haW5Mb29rdXBTdGFydCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAiY2FjaGUiLAogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICBmbyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiB0LAogICAgICAgICAgICAgICAgICAgICAgICBlbnRyeTogbiwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICJkb21haW5Mb29rdXAiLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lT3JpZ2luOiByLAogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogIkROUyIsCiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICAgICAgICBobyhlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJicm93c2VyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogInJlcXVlc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiBuICsgdC5yZXF1ZXN0U3RhcnQgLyAxZTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZXN0YW1wOiBuICsgdC5yZXNwb25zZUVuZCAvIDFlMywKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgaG8oZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICJicm93c2VyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAicmVzcG9uc2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXA6IG4gKyB0LnJlc3BvbnNlU3RhcnQgLyAxZTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lc3RhbXA6IG4gKyB0LnJlc3BvbnNlRW5kIC8gMWUzLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSkodCwgbiwgciksCiAgICAgICAgICAgICAgICAgICAgICAoZiA9IG0gKyBlLnJlc3BvbnNlU3RhcnQgLyAxZTMpLAogICAgICAgICAgICAgICAgICAgICAgKGggPSBtICsgZS5yZXF1ZXN0U3RhcnQgLyAxZTMpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICJtYXJrIjoKICAgICAgICAgICAgICAgICAgY2FzZSAicGFpbnQiOgogICAgICAgICAgICAgICAgICBjYXNlICJtZWFzdXJlIjoKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IChmdW5jdGlvbiAoZSwgdCwgbiwgciwgaSkgewogICAgICAgICAgICAgICAgICAgICAgKG4gPSBpICsgbiksIChyID0gbiArIHIpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgaG8oZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0Lm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZXN0YW1wOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiB0LmVudHJ5VHlwZSwKICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVzdGFtcDogbiwKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSkoYywgZSwgaSwgbywgbSk7CiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBkICYmICJzZW50cnktdHJhY2luZy1pbml0IiA9PT0gZS5uYW1lICYmIChkID0gYSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBubygpLAogICAgICAgICAgICAgICAgICAgICAgcyA9IGUuc3RhcnRUaW1lIDwgcy5maXJzdEhpZGRlblRpbWU7CiAgICAgICAgICAgICAgICAgICAgImZpcnN0LXBhaW50IiA9PT0gZS5uYW1lICYmCiAgICAgICAgICAgICAgICAgICAgICBzICYmCiAgICAgICAgICAgICAgICAgICAgICAoeW4ubG9nKCJbTWVhc3VyZW1lbnRzXSBBZGRpbmcgRlAiKSwKICAgICAgICAgICAgICAgICAgICAgICh1Ll9tZWFzdXJlbWVudHMuZnAgPSB7IHZhbHVlOiBlLnN0YXJ0VGltZSB9KSwKICAgICAgICAgICAgICAgICAgICAgICh1Ll9tZWFzdXJlbWVudHNbIm1hcmsuZnAiXSA9IHsgdmFsdWU6IGEgfSkpLAogICAgICAgICAgICAgICAgICAgICAgImZpcnN0LWNvbnRlbnRmdWwtcGFpbnQiID09PSBlLm5hbWUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgcyAmJgogICAgICAgICAgICAgICAgICAgICAgICAoeW4ubG9nKCJbTWVhc3VyZW1lbnRzXSBBZGRpbmcgRkNQIiksCiAgICAgICAgICAgICAgICAgICAgICAgICh1Ll9tZWFzdXJlbWVudHMuZmNwID0geyB2YWx1ZTogZS5zdGFydFRpbWUgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICh1Ll9tZWFzdXJlbWVudHNbIm1hcmsuZmNwIl0gPSB7IHZhbHVlOiBhIH0pKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAicmVzb3VyY2UiOgogICAgICAgICAgICAgICAgICAgIChzID0gZS5uYW1lLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgIiIpKSwKICAgICAgICAgICAgICAgICAgICAgIChhID0gKGZ1bmN0aW9uIChlLCB0LCBuLCByLCBpLCBvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAieG1saHR0cHJlcXVlc3QiID09PSB0LmluaXRpYXRvclR5cGUgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAiZmV0Y2giID09PSB0LmluaXRpYXRvclR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgInRyYW5zZmVyU2l6ZSIgaW4gdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIChhWyJUcmFuc2ZlciBTaXplIl0gPSB0LnRyYW5zZmVyU2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICJlbmNvZGVkQm9keVNpemUiIGluIHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAoYVsiRW5jb2RlZCBCb2R5IFNpemUiXSA9IHQuZW5jb2RlZEJvZHlTaXplKTsKICAgICAgICAgICAgICAgICAgICAgICAgImRlY29kZWRCb2R5U2l6ZSIgaW4gdCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIChhWyJEZWNvZGVkIEJvZHkgU2l6ZSJdID0gdC5kZWNvZGVkQm9keVNpemUpOwogICAgICAgICAgICAgICAgICAgICAgICAociA9IG8gKyByKSwgKGkgPSByICsgaSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgaG8oZSwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lc3RhbXA6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogdC5pbml0aWF0b3JUeXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gInJlc291cmNlLiIgKyB0LmluaXRpYXRvclR5cGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAicmVzb3VyY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBhLAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIGkKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIH0pKGMsIGUsIHMsIGksIG8sIG0pKTsKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHAgJiYgLTEgPCAobCB8fCAiIikuaW5kZXhPZihzKSAmJiAocCA9IGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdm9pZCAwICE9PSBwICYmCiAgICAgICAgICAgICAgdm9pZCAwICE9PSBkICYmCiAgICAgICAgICAgICAgaG8oYywgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJldmFsdWF0aW9uIiwKICAgICAgICAgICAgICAgIGVuZFRpbWVzdGFtcDogZCwKICAgICAgICAgICAgICAgIG9wOiAic2NyaXB0IiwKICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiBwLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAodGhpcy5fcGVyZm9ybWFuY2VDdXJzb3IgPSBNYXRoLm1heCgKICAgICAgICAgICAgICBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzKCkubGVuZ3RoIC0gMSwKICAgICAgICAgICAgICAwCiAgICAgICAgICAgICkpLAogICAgICAgICAgICB0aGlzLl90cmFja05hdmlnYXRvcihjKSwKICAgICAgICAgICAgInBhZ2Vsb2FkIiA9PT0gYy5vcCAmJgogICAgICAgICAgICAgICgociA9IGVyIC8gMWUzKSwKICAgICAgICAgICAgICAibnVtYmVyIiA9PSB0eXBlb2YgZiAmJgogICAgICAgICAgICAgICAgKHluLmxvZygiW01lYXN1cmVtZW50c10gQWRkaW5nIFRURkIiKSwKICAgICAgICAgICAgICAgICh0aGlzLl9tZWFzdXJlbWVudHMudHRmYiA9IHsKICAgICAgICAgICAgICAgICAgdmFsdWU6IDFlMyAqIChmIC0gYy5zdGFydFRpbWVzdGFtcCksCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICJudW1iZXIiID09IHR5cGVvZiBoICYmCiAgICAgICAgICAgICAgICAgIGggPD0gZiAmJgogICAgICAgICAgICAgICAgICAodGhpcy5fbWVhc3VyZW1lbnRzWyJ0dGZiLnJlcXVlc3RUaW1lIl0gPSB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDFlMyAqIChmIC0gaCksCiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICBbImZjcCIsICJmcCIsICJsY3AiXS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCwgbjsKICAgICAgICAgICAgICAgICF1Ll9tZWFzdXJlbWVudHNbZV0gfHwKICAgICAgICAgICAgICAgICAgciA+PSBjLnN0YXJ0VGltZXN0YW1wIHx8CiAgICAgICAgICAgICAgICAgICgodCA9IHUuX21lYXN1cmVtZW50c1tlXS52YWx1ZSksCiAgICAgICAgICAgICAgICAgIChuID0gTWF0aC5hYnMoMWUzICogKHIgKyB0IC8gMWUzIC0gYy5zdGFydFRpbWVzdGFtcCkpKSwKICAgICAgICAgICAgICAgICAgeW4ubG9nKAogICAgICAgICAgICAgICAgICAgICJbTWVhc3VyZW1lbnRzXSBOb3JtYWxpemVkICIgKwogICAgICAgICAgICAgICAgICAgICAgZSArCiAgICAgICAgICAgICAgICAgICAgICAiIGZyb20gIiArCiAgICAgICAgICAgICAgICAgICAgICB0ICsKICAgICAgICAgICAgICAgICAgICAgICIgdG8gIiArCiAgICAgICAgICAgICAgICAgICAgICBuICsKICAgICAgICAgICAgICAgICAgICAgICIgKCIgKwogICAgICAgICAgICAgICAgICAgICAgKG4gLSB0KSArCiAgICAgICAgICAgICAgICAgICAgICAiKSIKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgKHUuX21lYXN1cmVtZW50c1tlXS52YWx1ZSA9IG4pKTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB0aGlzLl9tZWFzdXJlbWVudHNbIm1hcmsuZmlkIl0gJiYKICAgICAgICAgICAgICAgIHRoaXMuX21lYXN1cmVtZW50cy5maWQgJiYKICAgICAgICAgICAgICAgIGhvKGMsIHsKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJmaXJzdCBpbnB1dCBkZWxheSIsCiAgICAgICAgICAgICAgICAgIGVuZFRpbWVzdGFtcDoKICAgICAgICAgICAgICAgICAgICB0aGlzLl9tZWFzdXJlbWVudHNbIm1hcmsuZmlkIl0udmFsdWUgKwogICAgICAgICAgICAgICAgICAgIHRoaXMuX21lYXN1cmVtZW50cy5maWQudmFsdWUgLyAxZTMsCiAgICAgICAgICAgICAgICAgIG9wOiAid2ViLnZpdGFscyIsCiAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiB0aGlzLl9tZWFzdXJlbWVudHNbIm1hcmsuZmlkIl0udmFsdWUsCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAiZmNwIiBpbiB0aGlzLl9tZWFzdXJlbWVudHMgfHwgZGVsZXRlIHRoaXMuX21lYXN1cmVtZW50cy5jbHMsCiAgICAgICAgICAgICAgYy5zZXRNZWFzdXJlbWVudHModGhpcy5fbWVhc3VyZW1lbnRzKSwKICAgICAgICAgICAgICB0aGlzLl90YWdNZXRyaWNJbmZvKGMpKTsKICAgICAgICB9CiAgICAgIH0pLAogICAgICAocG8ucHJvdG90eXBlLl90YWdNZXRyaWNJbmZvID0gZnVuY3Rpb24gKG4pIHsKICAgICAgICB0aGlzLl9sY3BFbnRyeSAmJgogICAgICAgICAgKHluLmxvZygiW01lYXN1cmVtZW50c10gQWRkaW5nIExDUCBEYXRhIiksCiAgICAgICAgICB0aGlzLl9sY3BFbnRyeS5lbGVtZW50ICYmCiAgICAgICAgICAgIG4uc2V0VGFnKCJsY3AuZWxlbWVudCIsIFd0KHRoaXMuX2xjcEVudHJ5LmVsZW1lbnQpKSwKICAgICAgICAgIHRoaXMuX2xjcEVudHJ5LmlkICYmIG4uc2V0VGFnKCJsY3AuaWQiLCB0aGlzLl9sY3BFbnRyeS5pZCksCiAgICAgICAgICB0aGlzLl9sY3BFbnRyeS51cmwgJiYKICAgICAgICAgICAgbi5zZXRUYWcoImxjcC51cmwiLCB0aGlzLl9sY3BFbnRyeS51cmwudHJpbSgpLnNsaWNlKDAsIDIwMCkpLAogICAgICAgICAgbi5zZXRUYWcoImxjcC5zaXplIiwgdGhpcy5fbGNwRW50cnkuc2l6ZSkpLAogICAgICAgICAgdGhpcy5fY2xzRW50cnkgJiYKICAgICAgICAgICAgdGhpcy5fY2xzRW50cnkuc291cmNlcyAmJgogICAgICAgICAgICAoeW4ubG9nKCJbTWVhc3VyZW1lbnRzXSBBZGRpbmcgQ0xTIERhdGEiKSwKICAgICAgICAgICAgdGhpcy5fY2xzRW50cnkuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4uc2V0VGFnKCJjbHMuc291cmNlLiIgKyAodCArIDEpLCBXdChlLm5vZGUpKTsKICAgICAgICAgICAgfSkpOwogICAgICB9KSwKICAgICAgKHBvLnByb3RvdHlwZS5fdHJhY2tDTFMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG4gPSB0aGlzOwogICAgICAgIHRvKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IGUuZW50cmllcy5wb3AoKTsKICAgICAgICAgIHQgJiYKICAgICAgICAgICAgKHluLmxvZygiW01lYXN1cmVtZW50c10gQWRkaW5nIENMUyIpLAogICAgICAgICAgICAobi5fbWVhc3VyZW1lbnRzLmNscyA9IHsgdmFsdWU6IGUudmFsdWUgfSksCiAgICAgICAgICAgIChuLl9jbHNFbnRyeSA9IHQpKTsKICAgICAgICB9KTsKICAgICAgfSksCiAgICAgIChwby5wcm90b3R5cGUuX3RyYWNrTmF2aWdhdG9yID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCwKICAgICAgICAgIG4gPSB1by5uYXZpZ2F0b3I7CiAgICAgICAgbiAmJgogICAgICAgICAgKCh0ID0gbi5jb25uZWN0aW9uKSAmJgogICAgICAgICAgICAodC5lZmZlY3RpdmVUeXBlICYmCiAgICAgICAgICAgICAgZS5zZXRUYWcoImVmZmVjdGl2ZUNvbm5lY3Rpb25UeXBlIiwgdC5lZmZlY3RpdmVUeXBlKSwKICAgICAgICAgICAgdC50eXBlICYmIGUuc2V0VGFnKCJjb25uZWN0aW9uVHlwZSIsIHQudHlwZSksCiAgICAgICAgICAgIG1vKHQucnR0KSAmJgogICAgICAgICAgICAgICh0aGlzLl9tZWFzdXJlbWVudHNbImNvbm5lY3Rpb24ucnR0Il0gPSB7IHZhbHVlOiB0LnJ0dCB9KSwKICAgICAgICAgICAgbW8odC5kb3dubGluaykgJiYKICAgICAgICAgICAgICAodGhpcy5fbWVhc3VyZW1lbnRzWyJjb25uZWN0aW9uLmRvd25saW5rIl0gPSB7CiAgICAgICAgICAgICAgICB2YWx1ZTogdC5kb3dubGluaywKICAgICAgICAgICAgICB9KSksCiAgICAgICAgICBtbyhuLmRldmljZU1lbW9yeSkgJiYKICAgICAgICAgICAgZS5zZXRUYWcoImRldmljZU1lbW9yeSIsIFN0cmluZyhuLmRldmljZU1lbW9yeSkpLAogICAgICAgICAgbW8obi5oYXJkd2FyZUNvbmN1cnJlbmN5KSAmJgogICAgICAgICAgICBlLnNldFRhZygiaGFyZHdhcmVDb25jdXJyZW5jeSIsIFN0cmluZyhuLmhhcmR3YXJlQ29uY3VycmVuY3kpKSk7CiAgICAgIH0pLAogICAgICAocG8ucHJvdG90eXBlLl90cmFja0xDUCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaSA9IHRoaXM7CiAgICAgICAgaW8oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0LAogICAgICAgICAgICBuLAogICAgICAgICAgICByID0gZS5lbnRyaWVzLnBvcCgpOwogICAgICAgICAgciAmJgogICAgICAgICAgICAoKHQgPSBlciAvIDFlMyksCiAgICAgICAgICAgIChuID0gci5zdGFydFRpbWUgLyAxZTMpLAogICAgICAgICAgICB5bi5sb2coIltNZWFzdXJlbWVudHNdIEFkZGluZyBMQ1AiKSwKICAgICAgICAgICAgKGkuX21lYXN1cmVtZW50cy5sY3AgPSB7IHZhbHVlOiBlLnZhbHVlIH0pLAogICAgICAgICAgICAoaS5fbWVhc3VyZW1lbnRzWyJtYXJrLmxjcCJdID0geyB2YWx1ZTogdCArIG4gfSksCiAgICAgICAgICAgIChpLl9sY3BFbnRyeSA9IHIpKTsKICAgICAgICB9KTsKICAgICAgfSksCiAgICAgIChwby5wcm90b3R5cGUuX3RyYWNrRklEID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciByID0gdGhpczsKICAgICAgICBybyhmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQsCiAgICAgICAgICAgIG4gPSBlLmVudHJpZXMucG9wKCk7CiAgICAgICAgICBuICYmCiAgICAgICAgICAgICgodCA9IGVyIC8gMWUzKSwKICAgICAgICAgICAgKG4gPSBuLnN0YXJ0VGltZSAvIDFlMyksCiAgICAgICAgICAgIHluLmxvZygiW01lYXN1cmVtZW50c10gQWRkaW5nIEZJRCIpLAogICAgICAgICAgICAoci5fbWVhc3VyZW1lbnRzLmZpZCA9IHsgdmFsdWU6IGUudmFsdWUgfSksCiAgICAgICAgICAgIChyLl9tZWFzdXJlbWVudHNbIm1hcmsuZmlkIl0gPSB7IHZhbHVlOiB0ICsgbiB9KSk7CiAgICAgICAgfSk7CiAgICAgIH0pLAogICAgICBwbyk7CgogIGZ1bmN0aW9uIHBvKCkgewogICAgKHRoaXMuX21lYXN1cmVtZW50cyA9IHt9KSwKICAgICAgKHRoaXMuX3BlcmZvcm1hbmNlQ3Vyc29yID0gMCksCiAgICAgICFadCgpICYmCiAgICAgICAgbnVsbCAhPT0gdW8gJiYKICAgICAgICB2b2lkIDAgIT09IHVvICYmCiAgICAgICAgdW8ucGVyZm9ybWFuY2UgJiYKICAgICAgICAodW8ucGVyZm9ybWFuY2UubWFyayAmJiB1by5wZXJmb3JtYW5jZS5tYXJrKCJzZW50cnktdHJhY2luZy1pbml0IiksCiAgICAgICAgdGhpcy5fdHJhY2tDTFMoKSwKICAgICAgICB0aGlzLl90cmFja0xDUCgpLAogICAgICAgIHRoaXMuX3RyYWNrRklEKCkpOwogIH0KCiAgZnVuY3Rpb24gZm8oZSkgewogICAgdmFyIHQgPSBlLnRyYW5zYWN0aW9uLAogICAgICBuID0gZS5lbnRyeSwKICAgICAgciA9IGUuZXZlbnQsCiAgICAgIGkgPSBlLnRpbWVPcmlnaW4sCiAgICAgIG8gPSBlLmV2ZW50RW5kLAogICAgICBlID0gZS5kZXNjcmlwdGlvbiwKICAgICAgbyA9IG8gPyBuW29dIDogbltyICsgIkVuZCJdLAogICAgICBuID0gbltyICsgIlN0YXJ0Il07CiAgICBuICYmCiAgICAgIG8gJiYKICAgICAgaG8odCwgewogICAgICAgIG9wOiAiYnJvd3NlciIsCiAgICAgICAgZGVzY3JpcHRpb246IG51bGwgIT0gZSA/IGUgOiByLAogICAgICAgIHN0YXJ0VGltZXN0YW1wOiBpICsgbiAvIDFlMywKICAgICAgICBlbmRUaW1lc3RhbXA6IGkgKyBvIC8gMWUzLAogICAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGhvKGUsIHQpIHsKICAgIHZhciBuID0gdC5zdGFydFRpbWVzdGFtcCwKICAgICAgdCA9IEN0KHQsIFsic3RhcnRUaW1lc3RhbXAiXSk7CiAgICByZXR1cm4gKAogICAgICBuICYmIGUuc3RhcnRUaW1lc3RhbXAgPiBuICYmIChlLnN0YXJ0VGltZXN0YW1wID0gbiksCiAgICAgIGUuc3RhcnRDaGlsZChJdCh7IHN0YXJ0VGltZXN0YW1wOiBuIH0sIHQpKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIG1vKGUpIHsKICAgIHJldHVybiAibnVtYmVyIiA9PSB0eXBlb2YgZSAmJiBpc0Zpbml0ZShlKTsKICB9CgogIHZhciB2byA9IHsKICAgIHRyYWNlRmV0Y2g6ICEwLAogICAgdHJhY2VYSFI6ICEwLAogICAgdHJhY2luZ09yaWdpbnM6IFsibG9jYWxob3N0IiwgL15cLy9dLAogIH07CgogIGZ1bmN0aW9uIHlvKGUpIHsKICAgIGZ1bmN0aW9uIHQodCkgewogICAgICBpZiAoYVt0XSkgcmV0dXJuIGFbdF07CiAgICAgIHZhciBlID0gaTsKICAgICAgcmV0dXJuICgKICAgICAgICAoYVt0XSA9CiAgICAgICAgICBlLnNvbWUoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG9uKHQsIGUpOwogICAgICAgICAgfSkgJiYgIW9uKHQsICJzZW50cnlfa2V5IikpLAogICAgICAgIGFbdF0KICAgICAgKTsKICAgIH0KCiAgICB2YXIgbiA9IEl0KEl0KHt9LCB2byksIGUpLAogICAgICByID0gbi50cmFjZUZldGNoLAogICAgICBlID0gbi50cmFjZVhIUiwKICAgICAgaSA9IG4udHJhY2luZ09yaWdpbnMsCiAgICAgIG8gPSBuLnNob3VsZENyZWF0ZVNwYW5Gb3JSZXF1ZXN0LAogICAgICBhID0ge30sCiAgICAgIHMgPSB0OwogICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgbyAmJgogICAgICAocyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIHQoZSkgJiYgbyhlKTsKICAgICAgfSk7CiAgICB2YXIgYyA9IHt9OwogICAgciAmJgogICAgICBxbih7CiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCwgbiwgcjsKICAgICAgICAgICh0ID0gZSksCiAgICAgICAgICAgIChuID0gcyksCiAgICAgICAgICAgIChlID0gYyksCiAgICAgICAgICAgIEFpKCkgJiYKICAgICAgICAgICAgICB0LmZldGNoRGF0YSAmJgogICAgICAgICAgICAgIG4odC5mZXRjaERhdGEudXJsKSAmJgogICAgICAgICAgICAgICh0LmVuZFRpbWVzdGFtcCAmJiB0LmZldGNoRGF0YS5fX3NwYW4KICAgICAgICAgICAgICAgID8gKHIgPSBlW3QuZmV0Y2hEYXRhLl9fc3Bhbl0pICYmCiAgICAgICAgICAgICAgICAgICh0LnJlc3BvbnNlCiAgICAgICAgICAgICAgICAgICAgPyByLnNldEh0dHBTdGF0dXModC5yZXNwb25zZS5zdGF0dXMpCiAgICAgICAgICAgICAgICAgICAgOiB0LmVycm9yICYmIHIuc2V0U3RhdHVzKE9pLkludGVybmFsRXJyb3IpLAogICAgICAgICAgICAgICAgICByLmZpbmlzaCgpLAogICAgICAgICAgICAgICAgICBkZWxldGUgZVt0LmZldGNoRGF0YS5fX3NwYW5dKQogICAgICAgICAgICAgICAgOiAobiA9IFJpKCkpICYmCiAgICAgICAgICAgICAgICAgICgociA9IG4uc3RhcnRDaGlsZCh7CiAgICAgICAgICAgICAgICAgICAgZGF0YTogSXQoSXQoe30sIHQuZmV0Y2hEYXRhKSwgeyB0eXBlOiAiZmV0Y2giIH0pLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0LmZldGNoRGF0YS5tZXRob2QgKyAiICIgKyB0LmZldGNoRGF0YS51cmwsCiAgICAgICAgICAgICAgICAgICAgb3A6ICJodHRwLmNsaWVudCIsCiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgKHQuZmV0Y2hEYXRhLl9fc3BhbiA9IHIuc3BhbklkKSwKICAgICAgICAgICAgICAgICAgKGVbci5zcGFuSWRdID0gciksCiAgICAgICAgICAgICAgICAgIChuID0gdC5hcmdzWzBdID0gdC5hcmdzWzBdKSwKICAgICAgICAgICAgICAgICAgKHQgPSAoZSA9IHQuYXJnc1sxXSA9IHQuYXJnc1sxXSB8fCB7fSkuaGVhZGVycyksCiAgICAgICAgICAgICAgICAgICh0ID0genQobiwgUmVxdWVzdCkgPyBuLmhlYWRlcnMgOiB0KQogICAgICAgICAgICAgICAgICAgID8gImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC5hcHBlbmQKICAgICAgICAgICAgICAgICAgICAgID8gdC5hcHBlbmQoInNlbnRyeS10cmFjZSIsIHIudG9UcmFjZXBhcmVudCgpKQogICAgICAgICAgICAgICAgICAgICAgOiAodCA9IEFycmF5LmlzQXJyYXkodCkKICAgICAgICAgICAgICAgICAgICAgICAgICA/IFJ0KHQsIFtbInNlbnRyeS10cmFjZSIsIHIudG9UcmFjZXBhcmVudCgpXV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBJdChJdCh7fSwgdCksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInNlbnRyeS10cmFjZSI6IHIudG9UcmFjZXBhcmVudCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgOiAodCA9IHsgInNlbnRyeS10cmFjZSI6IHIudG9UcmFjZXBhcmVudCgpIH0pLAogICAgICAgICAgICAgICAgICAoZS5oZWFkZXJzID0gdCkpKTsKICAgICAgICB9LAogICAgICAgIHR5cGU6ICJmZXRjaCIsCiAgICAgIH0pLAogICAgICBlICYmCiAgICAgICAgcW4oewogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICEoZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBBaSgpICYmCiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKHIgPSBlLnhocikgfHwKICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSByIHx8CiAgICAgICAgICAgICAgICAgICFyLl9fc2VudHJ5X293bl9yZXF1ZXN0X18pICYmCiAgICAgICAgICAgICAgICBudWxsICE9PSAoaSA9IGUueGhyKSAmJgogICAgICAgICAgICAgICAgdm9pZCAwICE9PSBpICYmCiAgICAgICAgICAgICAgICBpLl9fc2VudHJ5X3hocl9fICYmCiAgICAgICAgICAgICAgICB0KGUueGhyLl9fc2VudHJ5X3hocl9fLnVybCkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHZhciBpID0gZS54aHIuX19zZW50cnlfeGhyX187CiAgICAgICAgICAgICAgICBpZiAoZS5lbmRUaW1lc3RhbXAgJiYgZS54aHIuX19zZW50cnlfeGhyX3NwYW5faWRfXykKICAgICAgICAgICAgICAgICAgKG8gPSBuW2UueGhyLl9fc2VudHJ5X3hocl9zcGFuX2lkX19dKSAmJgogICAgICAgICAgICAgICAgICAgIChvLnNldEh0dHBTdGF0dXMoaS5zdGF0dXNfY29kZSksCiAgICAgICAgICAgICAgICAgICAgby5maW5pc2goKSwKICAgICAgICAgICAgICAgICAgICBkZWxldGUgbltlLnhoci5fX3NlbnRyeV94aHJfc3Bhbl9pZF9fXSk7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgdCA9IFJpKCk7CiAgICAgICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0LnN0YXJ0Q2hpbGQoewogICAgICAgICAgICAgICAgICAgICAgZGF0YTogSXQoSXQoe30sIGkuZGF0YSksIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInhociIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogaS5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogaS51cmwsCiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpLm1ldGhvZCArICIgIiArIGkudXJsLAogICAgICAgICAgICAgICAgICAgICAgb3A6ICJodHRwLmNsaWVudCIsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgKChlLnhoci5fX3NlbnRyeV94aHJfc3Bhbl9pZF9fID0gby5zcGFuSWQpLAogICAgICAgICAgICAgICAgICAgICAgKG5bZS54aHIuX19zZW50cnlfeGhyX3NwYW5faWRfX10gPSBvKSwKICAgICAgICAgICAgICAgICAgICAgIGUueGhyLnNldFJlcXVlc3RIZWFkZXIpCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgZS54aHIuc2V0UmVxdWVzdEhlYWRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICAic2VudHJ5LXRyYWNlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBvLnRvVHJhY2VwYXJlbnQoKQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkoZSwgcywgYyk7CiAgICAgICAgICB9LAogICAgICAgICAgdHlwZTogInhociIsCiAgICAgICAgfSk7CiAgfQoKICB2YXIgZ28gPSBzbigpOwogIHZhciBfbyA9IEl0KAogICAgICB7CiAgICAgICAgaWRsZVRpbWVvdXQ6IDFlMywKICAgICAgICBtYXJrQmFja2dyb3VuZFRyYW5zYWN0aW9uczogITAsCiAgICAgICAgbWF4VHJhbnNhY3Rpb25EdXJhdGlvbjogNjAwLAogICAgICAgIHJvdXRpbmdJbnN0cnVtZW50YXRpb246IGZ1bmN0aW9uIChuLCBlLCB0KSB7CiAgICAgICAgICB2YXIgciwgaTsKICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICEwKSwKICAgICAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gITApLAogICAgICAgICAgICBnbyAmJiBnby5sb2NhdGlvbgogICAgICAgICAgICAgID8gKChyID0gZ28ubG9jYXRpb24uaHJlZiksCiAgICAgICAgICAgICAgICBlICYmCiAgICAgICAgICAgICAgICAgIChpID0gbih7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogZ28ubG9jYXRpb24ucGF0aG5hbWUsCiAgICAgICAgICAgICAgICAgICAgb3A6ICJwYWdlbG9hZCIsCiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgIHQgJiYKICAgICAgICAgICAgICAgICAgcW4oewogICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRvLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gZS5mcm9tOwogICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIHIgJiYgLTEgIT09IHIuaW5kZXhPZih0KQogICAgICAgICAgICAgICAgICAgICAgICA/IChyID0gdm9pZCAwKQogICAgICAgICAgICAgICAgICAgICAgICA6IGUgIT09IHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAoKHIgPSB2b2lkIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICh5bi5sb2coCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJbVHJhY2luZ10gRmluaXNoaW5nIGN1cnJlbnQgdHJhbnNhY3Rpb24gd2l0aCBvcDogIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5vcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuZmluaXNoKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBnby5sb2NhdGlvbi5wYXRobmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAibmF2aWdhdGlvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJoaXN0b3J5IiwKICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgOiB5bi53YXJuKAogICAgICAgICAgICAgICAgICAiQ291bGQgbm90IGluaXRpYWxpemUgcm91dGluZyBpbnN0cnVtZW50YXRpb24gZHVlIHRvIGludmFsaWQgbG9jYXRpb24iCiAgICAgICAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICAgc3RhcnRUcmFuc2FjdGlvbk9uTG9jYXRpb25DaGFuZ2U6ICEwLAogICAgICAgIHN0YXJ0VHJhbnNhY3Rpb25PblBhZ2VMb2FkOiAhMCwKICAgICAgfSwKICAgICAgdm8KICAgICksCiAgICBLbiA9CiAgICAgICgoYm8ucHJvdG90eXBlLnNldHVwT25jZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0aGlzOwogICAgICAgICh0aGlzLl9nZXRDdXJyZW50SHViID0gdCksCiAgICAgICAgICB0aGlzLl9lbWl0T3B0aW9uc1dhcm5pbmcgJiYKICAgICAgICAgICAgKHluLndhcm4oCiAgICAgICAgICAgICAgIltUcmFjaW5nXSBZb3UgbmVlZCB0byBkZWZpbmUgYHRyYWNpbmdPcmlnaW5zYCBpbiB0aGUgb3B0aW9ucy4gU2V0IGFuIGFycmF5IG9mIHVybHMgb3IgcGF0dGVybnMgdG8gdHJhY2UuIgogICAgICAgICAgICApLAogICAgICAgICAgICB5bi53YXJuKAogICAgICAgICAgICAgICJbVHJhY2luZ10gV2UgYWRkZWQgYSByZWFzb25hYmxlIGRlZmF1bHQgZm9yIHlvdTogIiArCiAgICAgICAgICAgICAgICB2by50cmFjaW5nT3JpZ2lucwogICAgICAgICAgICApKTsKICAgICAgICB2YXIgciA9IHRoaXMub3B0aW9ucywKICAgICAgICAgIGkgPSByLnJvdXRpbmdJbnN0cnVtZW50YXRpb24sCiAgICAgICAgICBvID0gci5zdGFydFRyYW5zYWN0aW9uT25Mb2NhdGlvbkNoYW5nZSwKICAgICAgICAgIGEgPSByLnN0YXJ0VHJhbnNhY3Rpb25PblBhZ2VMb2FkLAogICAgICAgICAgcyA9IHIubWFya0JhY2tncm91bmRUcmFuc2FjdGlvbnMsCiAgICAgICAgICBjID0gci50cmFjZUZldGNoLAogICAgICAgICAgdSA9IHIudHJhY2VYSFIsCiAgICAgICAgICB0ID0gci50cmFjaW5nT3JpZ2lucywKICAgICAgICAgIHIgPSByLnNob3VsZENyZWF0ZVNwYW5Gb3JSZXF1ZXN0OwogICAgICAgIGkoCiAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gbi5fY3JlYXRlUm91dGVUcmFuc2FjdGlvbihlKTsKICAgICAgICAgIH0sCiAgICAgICAgICBhLAogICAgICAgICAgbwogICAgICAgICksCiAgICAgICAgICBzICYmCiAgICAgICAgICAgICgkaSAmJiAkaS5kb2N1bWVudAogICAgICAgICAgICAgID8gJGkuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigidmlzaWJpbGl0eWNoYW5nZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIGUgPSBSaSgpOwogICAgICAgICAgICAgICAgICAkaS5kb2N1bWVudC5oaWRkZW4gJiYKICAgICAgICAgICAgICAgICAgICBlICYmCiAgICAgICAgICAgICAgICAgICAgKHluLmxvZygKICAgICAgICAgICAgICAgICAgICAgICJbVHJhY2luZ10gVHJhbnNhY3Rpb246ICIgKwogICAgICAgICAgICAgICAgICAgICAgICBPaS5DYW5jZWxsZWQgKwogICAgICAgICAgICAgICAgICAgICAgICAiIC0+IHNpbmNlIHRhYiBtb3ZlZCB0byB0aGUgYmFja2dyb3VuZCwgb3A6ICIgKwogICAgICAgICAgICAgICAgICAgICAgICBlLm9wCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBlLnN0YXR1cyB8fCBlLnNldFN0YXR1cyhPaS5DYW5jZWxsZWQpLAogICAgICAgICAgICAgICAgICAgIGUuc2V0VGFnKCJ2aXNpYmlsaXR5Y2hhbmdlIiwgImRvY3VtZW50LmhpZGRlbiIpLAogICAgICAgICAgICAgICAgICAgIGUuZmluaXNoKCkpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IHluLndhcm4oCiAgICAgICAgICAgICAgICAgICJbVHJhY2luZ10gQ291bGQgbm90IHNldCB1cCBiYWNrZ3JvdW5kIHRhYiBkZXRlY3Rpb24gZHVlIHRvIGxhY2sgb2YgZ2xvYmFsIGRvY3VtZW50IgogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICB5byh7CiAgICAgICAgICAgIHRyYWNlRmV0Y2g6IGMsCiAgICAgICAgICAgIHRyYWNlWEhSOiB1LAogICAgICAgICAgICB0cmFjaW5nT3JpZ2luczogdCwKICAgICAgICAgICAgc2hvdWxkQ3JlYXRlU3BhbkZvclJlcXVlc3Q6IHIsCiAgICAgICAgICB9KTsKICAgICAgfSksCiAgICAgIChiby5wcm90b3R5cGUuX2NyZWF0ZVJvdXRlVHJhbnNhY3Rpb24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBpID0gdGhpczsKICAgICAgICBpZiAodGhpcy5fZ2V0Q3VycmVudEh1YikgewogICAgICAgICAgdmFyIHQgPSB0aGlzLm9wdGlvbnMsCiAgICAgICAgICAgIG4gPSB0LmJlZm9yZU5hdmlnYXRlLAogICAgICAgICAgICByID0gdC5pZGxlVGltZW91dCwKICAgICAgICAgICAgbyA9IHQubWF4VHJhbnNhY3Rpb25EdXJhdGlvbiwKICAgICAgICAgICAgYSA9CiAgICAgICAgICAgICAgInBhZ2Vsb2FkIiA9PT0gZS5vcAogICAgICAgICAgICAgICAgPyAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibWV0YVtuYW1lPSIgKyBlICsgIl0iKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlID8gZS5nZXRBdHRyaWJ1dGUoImNvbnRlbnQiKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgfSkoInNlbnRyeS10cmFjZSIpOwogICAgICAgICAgICAgICAgICAgIGlmIChlKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUubWF0Y2goamkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIxIiA9PT0gdFszXSA/IChlID0gITApIDogIjAiID09PSB0WzNdICYmIChlID0gITEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjZUlkOiB0WzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRTYW1wbGVkOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRTcGFuSWQ6IHRbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfSkoZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9KSgpCiAgICAgICAgICAgICAgICA6IHZvaWQgMCwKICAgICAgICAgICAgcyA9IEl0KEl0KEl0KHt9LCBlKSwgYSksIHsgdHJpbUVuZDogITAgfSksCiAgICAgICAgICAgIGMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBuID8gbihzKSA6IHMsCiAgICAgICAgICAgIHQgPSB2b2lkIDAgPT09IGMgPyBJdChJdCh7fSwgcyksIHsgc2FtcGxlZDogITEgfSkgOiBjOwogICAgICAgICAgITEgPT09IHQuc2FtcGxlZCAmJgogICAgICAgICAgICB5bi5sb2coCiAgICAgICAgICAgICAgIltUcmFjaW5nXSBXaWxsIG5vdCBzZW5kICIgKwogICAgICAgICAgICAgICAgdC5vcCArCiAgICAgICAgICAgICAgICAiIHRyYW5zYWN0aW9uIGJlY2F1c2Ugb2YgYmVmb3JlTmF2aWdhdGUuIgogICAgICAgICAgICApLAogICAgICAgICAgICB5bi5sb2coIltUcmFjaW5nXSBTdGFydGluZyAiICsgdC5vcCArICIgdHJhbnNhY3Rpb24gb24gc2NvcGUiKTsKICAgICAgICAgIHZhciBhID0gdGhpcy5fZ2V0Q3VycmVudEh1YigpLAogICAgICAgICAgICBuID0gc24oKS5sb2NhdGlvbiwKICAgICAgICAgICAgdCA9CiAgICAgICAgICAgICAgKChzID0gdCksCiAgICAgICAgICAgICAgKGMgPSByKSwKICAgICAgICAgICAgICAodCA9ICEwKSwKICAgICAgICAgICAgICAociA9IHsgbG9jYXRpb246IG4gfSksCiAgICAgICAgICAgICAgKGEgPQogICAgICAgICAgICAgICAgKG51bGwgPT09IChhID0gKG4gPSBhKS5nZXRDbGllbnQoKSkgfHwgdm9pZCAwID09PSBhCiAgICAgICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgICAgIDogYS5nZXRPcHRpb25zKCkpIHx8IHt9KSwKICAgICAgICAgICAgICAodCA9IFhpKAogICAgICAgICAgICAgICAgKHQgPSBuZXcgV2kocywgbiwgYywgdCkpLAogICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgIEl0KAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50U2FtcGxlZDogcy5wYXJlbnRTYW1wbGVkLAogICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uQ29udGV4dDogcywKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgcgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICkpLnNhbXBsZWQgJiYKICAgICAgICAgICAgICAgIHQuaW5pdFNwYW5SZWNvcmRlcigKICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gKGEgPSBhLl9leHBlcmltZW50cykgfHwgdm9pZCAwID09PSBhCiAgICAgICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgICAgICA6IGEubWF4U3BhbnMKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgdCk7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB0LnJlZ2lzdGVyQmVmb3JlRmluaXNoQ2FsbGJhY2soZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICB2YXIgbiwgcjsKICAgICAgICAgICAgICBpLl9tZXRyaWNzLmFkZFBlcmZvcm1hbmNlRW50cmllcyhlKSwKICAgICAgICAgICAgICAgIChuID0gMWUzICogbyksCiAgICAgICAgICAgICAgICAoZSA9IHQgLSAociA9IGUpLnN0YXJ0VGltZXN0YW1wKSwKICAgICAgICAgICAgICAgIHQgJiYKICAgICAgICAgICAgICAgICAgKG4gPCBlIHx8IGUgPCAwKSAmJgogICAgICAgICAgICAgICAgICAoci5zZXRTdGF0dXMoT2kuRGVhZGxpbmVFeGNlZWRlZCksCiAgICAgICAgICAgICAgICAgIHIuc2V0VGFnKCJtYXhUcmFuc2FjdGlvbkR1cmF0aW9uRXhjZWVkZWQiLCAidHJ1ZSIpKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHQKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHluLndhcm4oCiAgICAgICAgICAiW1RyYWNpbmddIERpZCBub3QgY3JlYXRlICIgKwogICAgICAgICAgICBlLm9wICsKICAgICAgICAgICAgIiB0cmFuc2FjdGlvbiBiZWNhdXNlIF9nZXRDdXJyZW50SHViIGlzIGludmFsaWQuIgogICAgICAgICk7CiAgICAgIH0pLAogICAgICAoYm8uaWQgPSAiQnJvd3NlclRyYWNpbmciKSwKICAgICAgYm8pOwoKICBmdW5jdGlvbiBibyhlKSB7CiAgICAodGhpcy5uYW1lID0gYm8uaWQpLAogICAgICAodGhpcy5fbWV0cmljcyA9IG5ldyBsbygpKSwKICAgICAgKHRoaXMuX2VtaXRPcHRpb25zV2FybmluZyA9ICExKTsKICAgIHZhciB0ID0gdm8udHJhY2luZ09yaWdpbnM7CiAgICBlICYmCiAgICBlLnRyYWNpbmdPcmlnaW5zICYmCiAgICBBcnJheS5pc0FycmF5KGUudHJhY2luZ09yaWdpbnMpICYmCiAgICAwICE9PSBlLnRyYWNpbmdPcmlnaW5zLmxlbmd0aAogICAgICA/ICh0ID0gZS50cmFjaW5nT3JpZ2lucykKICAgICAgOiAodGhpcy5fZW1pdE9wdGlvbnNXYXJuaW5nID0gITApLAogICAgICAodGhpcy5vcHRpb25zID0gSXQoSXQoSXQoe30sIF9vKSwgZSksIHsgdHJhY2luZ09yaWdpbnM6IHQgfSkpOwogIH0KCiAgKHdvLnByb3RvdHlwZS5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLl9yb3V0ZXIKICAgICAgPyAoZnVuY3Rpb24gKG4sIGUpIHsKICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IFtdKTsKICAgICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIChpID0gKHQgPSBuKVsociA9IGUpXSksCiAgICAgICAgICAgICAgKHRbcl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCBlID0gW10sIG4gPSAwOyBuIDwgYXJndW1lbnRzLmxlbmd0aDsgbisrKQogICAgICAgICAgICAgICAgICBlW25dID0gYXJndW1lbnRzW25dOwogICAgICAgICAgICAgICAgcmV0dXJuIGkuY2FsbC5hcHBseSgKICAgICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgICAgUnQoCiAgICAgICAgICAgICAgICAgICAgW3RoaXNdLAogICAgICAgICAgICAgICAgICAgICgodCA9IHIpLAogICAgICAgICAgICAgICAgICAgIGUubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZQogICAgICAgICAgICAgICAgICAgICAgICA/IFNvKGUsIHQpCiAgICAgICAgICAgICAgICAgICAgICAgIDogQXJyYXkuaXNBcnJheShlKQogICAgICAgICAgICAgICAgICAgICAgICA/IGUubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSA/IFNvKGUsIHQpIDogZTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICA6IGU7CiAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdAogICAgICAgICAgICApOwogICAgICAgICAgICB2YXIgdCwgciwgaTsKICAgICAgICAgIH0pOwogICAgICAgIH0pKHRoaXMuX3JvdXRlciwgdGhpcy5fbWV0aG9kcykKICAgICAgOiB5bi5lcnJvcigiRXhwcmVzc0ludGVncmF0aW9uIGlzIG1pc3NpbmcgYW4gRXhwcmVzcyBpbnN0YW5jZSIpOwogIH0pLAogICAgKHdvLmlkID0gIkV4cHJlc3MiKSwKICAgIChvID0gd28pOwoKICBmdW5jdGlvbiB3byhlKSB7CiAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSB7fSksCiAgICAgICh0aGlzLm5hbWUgPSB3by5pZCksCiAgICAgICh0aGlzLl9yb3V0ZXIgPSBlLnJvdXRlciB8fCBlLmFwcCksCiAgICAgICh0aGlzLl9tZXRob2RzID0gKEFycmF5LmlzQXJyYXkoZS5tZXRob2RzKSA/IGUubWV0aG9kcyA6IFtdKS5jb25jYXQoCiAgICAgICAgInVzZSIKICAgICAgKSk7CiAgfQoKICBmdW5jdGlvbiBTbyhhLCBzKSB7CiAgICB2YXIgZSA9IGEubGVuZ3RoOwogICAgc3dpdGNoIChlKSB7CiAgICAgIGNhc2UgMjoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuLAogICAgICAgICAgICByID0gdC5fX3NlbnRyeV90cmFuc2FjdGlvbjsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHIgJiYKICAgICAgICAgICAgICAoKG4gPSByLnN0YXJ0Q2hpbGQoewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGEubmFtZSwKICAgICAgICAgICAgICAgIG9wOiAibWlkZGxld2FyZS4iICsgcywKICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgdC5vbmNlKCJmaW5pc2giLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBuLmZpbmlzaCgpOwogICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgYS5jYWxsKHRoaXMsIGUsIHQpCiAgICAgICAgICApOwogICAgICAgIH07CiAgICAgIGNhc2UgMzoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgIHZhciByID0gdC5fX3NlbnRyeV90cmFuc2FjdGlvbiwKICAgICAgICAgICAgaSA9CiAgICAgICAgICAgICAgbnVsbCA9PT0gciB8fCB2b2lkIDAgPT09IHIKICAgICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgICA6IHIuc3RhcnRDaGlsZCh7IGRlc2NyaXB0aW9uOiBhLm5hbWUsIG9wOiAibWlkZGxld2FyZS4iICsgcyB9KTsKICAgICAgICAgIGEuY2FsbCh0aGlzLCBlLCB0LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspCiAgICAgICAgICAgICAgZVt0XSA9IGFyZ3VtZW50c1t0XTsKICAgICAgICAgICAgbnVsbCAhPT0gaSAmJiB2b2lkIDAgIT09IGkgJiYgaS5maW5pc2goKSwKICAgICAgICAgICAgICBuLmNhbGwuYXBwbHkobiwgUnQoW3RoaXNdLCBlKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICBjYXNlIDQ6CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCBuLCByKSB7CiAgICAgICAgICB2YXIgaSA9IG4uX19zZW50cnlfdHJhbnNhY3Rpb24sCiAgICAgICAgICAgIG8gPQogICAgICAgICAgICAgIG51bGwgPT09IGkgfHwgdm9pZCAwID09PSBpCiAgICAgICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICAgICAgOiBpLnN0YXJ0Q2hpbGQoeyBkZXNjcmlwdGlvbjogYS5uYW1lLCBvcDogIm1pZGRsZXdhcmUuIiArIHMgfSk7CiAgICAgICAgICBhLmNhbGwodGhpcywgZSwgdCwgbiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKQogICAgICAgICAgICAgIGVbdF0gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICAgIG51bGwgIT09IG8gJiYgdm9pZCAwICE9PSBvICYmIG8uZmluaXNoKCksCiAgICAgICAgICAgICAgci5jYWxsLmFwcGx5KHIsIFJ0KFt0aGlzXSwgZSkpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgZGVmYXVsdDoKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkV4cHJlc3MgbWlkZGxld2FyZSB0YWtlcyAyLTQgYXJndW1lbnRzLiBHb3Q6ICIgKyBlKTsKICAgIH0KICB9CgogIChFby5wcm90b3R5cGUuc2V0dXBPbmNlID0gZnVuY3Rpb24gKGUsIGEpIHsKICAgIHZhciB0ID0gdG4oInBnIik7CiAgICB0CiAgICAgID8gRW4odC5DbGllbnQucHJvdG90eXBlLCAicXVlcnkiLCBmdW5jdGlvbiAobykgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCBuLCByKSB7CiAgICAgICAgICAgIHZhciB0ID0gYSgpLmdldFNjb3BlKCksCiAgICAgICAgICAgICAgdCA9IG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5nZXRTcGFuKCksCiAgICAgICAgICAgICAgaSA9CiAgICAgICAgICAgICAgICBudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICAgICAgICA6IHQuc3RhcnRDaGlsZCh7CiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogInN0cmluZyIgPT0gdHlwZW9mIGUgPyBlIDogZS50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgb3A6ICJkYiIsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiByKQogICAgICAgICAgICAgIHJldHVybiBvLmNhbGwodGhpcywgZSwgbiwgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgIG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpICYmIGkuZmluaXNoKCksIHIoZSwgdCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBuKQogICAgICAgICAgICAgIHJldHVybiBvLmNhbGwodGhpcywgZSwgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgIG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpICYmIGkuZmluaXNoKCksIG4oZSwgdCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGUgPSB2b2lkIDAgIT09IG4gPyBvLmNhbGwodGhpcywgZSwgbikgOiBvLmNhbGwodGhpcywgZSk7CiAgICAgICAgICAgIHJldHVybiBIdChlKQogICAgICAgICAgICAgID8gZS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBpICYmIHZvaWQgMCAhPT0gaSAmJiBpLmZpbmlzaCgpLCBlOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChudWxsICE9PSBpICYmIHZvaWQgMCAhPT0gaSAmJiBpLmZpbmlzaCgpLCBlKTsKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgOiB5bi5lcnJvcigiUG9zdGdyZXMgSW50ZWdyYXRpb24gd2FzIHVuYWJsZSB0byByZXF1aXJlIGBwZ2AgcGFja2FnZS4iKTsKICB9KSwKICAgIChFby5pZCA9ICJQb3N0Z3JlcyIpLAogICAgKFBlID0gRW8pOwoKICBmdW5jdGlvbiBFbygpIHsKICAgIHRoaXMubmFtZSA9IEVvLmlkOwogIH0KCiAgKHhvLnByb3RvdHlwZS5zZXR1cE9uY2UgPSBmdW5jdGlvbiAoZSwgYSkgewogICAgdmFyIHQgPSB0bigibXlzcWwvbGliL0Nvbm5lY3Rpb24uanMiKTsKICAgIHQKICAgICAgPyBFbih0LCAiY3JlYXRlUXVlcnkiLCBmdW5jdGlvbiAobikgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCByLCBpKSB7CiAgICAgICAgICAgIHZhciB0ID0gYSgpLmdldFNjb3BlKCksCiAgICAgICAgICAgICAgdCA9IG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5nZXRTcGFuKCksCiAgICAgICAgICAgICAgbyA9CiAgICAgICAgICAgICAgICBudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICAgICAgICA6IHQuc3RhcnRDaGlsZCh7CiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogInN0cmluZyIgPT0gdHlwZW9mIGUgPyBlIDogZS5zcWwsCiAgICAgICAgICAgICAgICAgICAgICBvcDogImRiIiwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGkKICAgICAgICAgICAgICA/IG4uY2FsbCh0aGlzLCBlLCByLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICBudWxsICE9PSBvICYmIHZvaWQgMCAhPT0gbyAmJiBvLmZpbmlzaCgpLCBpKGUsIHQsIG4pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIKICAgICAgICAgICAgICA/IG4uY2FsbCh0aGlzLCBlLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICAgICAgICBudWxsICE9PSBvICYmIHZvaWQgMCAhPT0gbyAmJiBvLmZpbmlzaCgpLCByKGUsIHQsIG4pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IG4uY2FsbCh0aGlzLCBlLCByLCBpKTsKICAgICAgICAgIH07CiAgICAgICAgfSkKICAgICAgOiB5bi5lcnJvcigiTXlzcWwgSW50ZWdyYXRpb24gd2FzIHVuYWJsZSB0byByZXF1aXJlIGBteXNxbGAgcGFja2FnZS4iKTsKICB9KSwKICAgICh4by5pZCA9ICJNeXNxbCIpLAogICAgKHggPSB4byk7CgogIGZ1bmN0aW9uIHhvKCkgewogICAgdGhpcy5uYW1lID0geG8uaWQ7CiAgfQoKICB2YXIga28gPSBbCiAgICAgICJhZ2dyZWdhdGUiLAogICAgICAiYnVsa1dyaXRlIiwKICAgICAgImNvdW50RG9jdW1lbnRzIiwKICAgICAgImNyZWF0ZUluZGV4IiwKICAgICAgImNyZWF0ZUluZGV4ZXMiLAogICAgICAiZGVsZXRlTWFueSIsCiAgICAgICJkZWxldGVPbmUiLAogICAgICAiZGlzdGluY3QiLAogICAgICAiZHJvcCIsCiAgICAgICJkcm9wSW5kZXgiLAogICAgICAiZHJvcEluZGV4ZXMiLAogICAgICAiZXN0aW1hdGVkRG9jdW1lbnRDb3VudCIsCiAgICAgICJmaW5kIiwKICAgICAgImZpbmRPbmUiLAogICAgICAiZmluZE9uZUFuZERlbGV0ZSIsCiAgICAgICJmaW5kT25lQW5kUmVwbGFjZSIsCiAgICAgICJmaW5kT25lQW5kVXBkYXRlIiwKICAgICAgImluZGV4ZXMiLAogICAgICAiaW5kZXhFeGlzdHMiLAogICAgICAiaW5kZXhJbmZvcm1hdGlvbiIsCiAgICAgICJpbml0aWFsaXplT3JkZXJlZEJ1bGtPcCIsCiAgICAgICJpbnNlcnRNYW55IiwKICAgICAgImluc2VydE9uZSIsCiAgICAgICJpc0NhcHBlZCIsCiAgICAgICJtYXBSZWR1Y2UiLAogICAgICAib3B0aW9ucyIsCiAgICAgICJwYXJhbGxlbENvbGxlY3Rpb25TY2FuIiwKICAgICAgInJlbmFtZSIsCiAgICAgICJyZXBsYWNlT25lIiwKICAgICAgInN0YXRzIiwKICAgICAgInVwZGF0ZU1hbnkiLAogICAgICAidXBkYXRlT25lIiwKICAgIF0sCiAgICBPbyA9IHsKICAgICAgYnVsa1dyaXRlOiBbIm9wZXJhdGlvbnMiXSwKICAgICAgY291bnREb2N1bWVudHM6IFsicXVlcnkiXSwKICAgICAgY3JlYXRlSW5kZXg6IFsiZmllbGRPclNwZWMiXSwKICAgICAgY3JlYXRlSW5kZXhlczogWyJpbmRleFNwZWNzIl0sCiAgICAgIGRlbGV0ZU1hbnk6IFsiZmlsdGVyIl0sCiAgICAgIGRlbGV0ZU9uZTogWyJmaWx0ZXIiXSwKICAgICAgZGlzdGluY3Q6IFsia2V5IiwgInF1ZXJ5Il0sCiAgICAgIGRyb3BJbmRleDogWyJpbmRleE5hbWUiXSwKICAgICAgZmluZDogWyJxdWVyeSJdLAogICAgICBmaW5kT25lOiBbInF1ZXJ5Il0sCiAgICAgIGZpbmRPbmVBbmREZWxldGU6IFsiZmlsdGVyIl0sCiAgICAgIGZpbmRPbmVBbmRSZXBsYWNlOiBbImZpbHRlciIsICJyZXBsYWNlbWVudCJdLAogICAgICBmaW5kT25lQW5kVXBkYXRlOiBbImZpbHRlciIsICJ1cGRhdGUiXSwKICAgICAgaW5kZXhFeGlzdHM6IFsiaW5kZXhlcyJdLAogICAgICBpbnNlcnRNYW55OiBbImRvY3MiXSwKICAgICAgaW5zZXJ0T25lOiBbImRvYyJdLAogICAgICBtYXBSZWR1Y2U6IFsibWFwIiwgInJlZHVjZSJdLAogICAgICByZW5hbWU6IFsibmV3TmFtZSJdLAogICAgICByZXBsYWNlT25lOiBbImZpbHRlciIsICJkb2MiXSwKICAgICAgdXBkYXRlTWFueTogWyJmaWx0ZXIiLCAidXBkYXRlIl0sCiAgICAgIHVwZGF0ZU9uZTogWyJmaWx0ZXIiLCAidXBkYXRlIl0sCiAgICB9LAogICAgUiA9CiAgICAgICgoVG8ucHJvdG90eXBlLnNldHVwT25jZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0aGlzLl91c2VNb25nb29zZSA/ICJtb25nb29zZSIgOiAibW9uZ29kYiIsCiAgICAgICAgICByID0gdG4obik7CiAgICAgICAgcgogICAgICAgICAgPyB0aGlzLl9pbnN0cnVtZW50T3BlcmF0aW9ucyhyLkNvbGxlY3Rpb24sIHRoaXMuX29wZXJhdGlvbnMsIHQpCiAgICAgICAgICA6IHluLmVycm9yKAogICAgICAgICAgICAgICJNb25nbyBJbnRlZ3JhdGlvbiB3YXMgdW5hYmxlIHRvIHJlcXVpcmUgYCIgKyBuICsgImAgcGFja2FnZS4iCiAgICAgICAgICAgICk7CiAgICAgIH0pLAogICAgICAoVG8ucHJvdG90eXBlLl9pbnN0cnVtZW50T3BlcmF0aW9ucyA9IGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgICAgdmFyIHIgPSB0aGlzOwogICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHIuX3BhdGNoT3BlcmF0aW9uKHQsIGUsIG4pOwogICAgICAgIH0pOwogICAgICB9KSwKICAgICAgKFRvLnByb3RvdHlwZS5fcGF0Y2hPcGVyYXRpb24gPSBmdW5jdGlvbiAoZSwgYywgdSkgewogICAgICAgIHZhciBsOwogICAgICAgIGMgaW4gZS5wcm90b3R5cGUgJiYKICAgICAgICAgICgobCA9IHRoaXMuX2dldFNwYW5Db250ZXh0RnJvbU9wZXJhdGlvbkFyZ3VtZW50cy5iaW5kKHRoaXMpKSwKICAgICAgICAgIEVuKGUucHJvdG90eXBlLCBjLCBmdW5jdGlvbiAocykgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspCiAgICAgICAgICAgICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgIHZhciBuID0gZVtlLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgciA9IHUoKS5nZXRTY29wZSgpLAogICAgICAgICAgICAgICAgaSA9IG51bGwgPT09IHIgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5nZXRTcGFuKCk7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgImZ1bmN0aW9uIiAhPSB0eXBlb2YgbiB8fAogICAgICAgICAgICAgICAgKCJtYXBSZWR1Y2UiID09PSBjICYmIDIgPT09IGUubGVuZ3RoKQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgdmFyIG8gPQogICAgICAgICAgICAgICAgICAgIG51bGwgPT09IGkgfHwgdm9pZCAwID09PSBpCiAgICAgICAgICAgICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgOiBpLnN0YXJ0Q2hpbGQobCh0aGlzLCBjLCBlKSksCiAgICAgICAgICAgICAgICAgIHIgPSBzLmNhbGwuYXBwbHkocywgUnQoW3RoaXNdLCBlKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gSHQocikKICAgICAgICAgICAgICAgICAgPyByLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBvICYmIHZvaWQgMCAhPT0gbyAmJiBvLmZpbmlzaCgpLCBlOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIDogKG51bGwgIT09IG8gJiYgdm9pZCAwICE9PSBvICYmIG8uZmluaXNoKCksIHIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB2YXIgYSA9CiAgICAgICAgICAgICAgICBudWxsID09PSBpIHx8IHZvaWQgMCA9PT0gaQogICAgICAgICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICAgICAgICA6IGkuc3RhcnRDaGlsZChsKHRoaXMsIGMsIGUuc2xpY2UoMCwgLTEpKSk7CiAgICAgICAgICAgICAgcmV0dXJuIHMuY2FsbC5hcHBseSgKICAgICAgICAgICAgICAgIHMsCiAgICAgICAgICAgICAgICBSdChbdGhpc10sIGUuc2xpY2UoMCwgLTEpLCBbCiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gYSAmJiB2b2lkIDAgIT09IGEgJiYgYS5maW5pc2goKSwgbihlLCB0KTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pKTsKICAgICAgfSksCiAgICAgIChUby5wcm90b3R5cGUuX2dldFNwYW5Db250ZXh0RnJvbU9wZXJhdGlvbkFyZ3VtZW50cyA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgdmFyIHIgPSB7CiAgICAgICAgICAgIGNvbGxlY3Rpb25OYW1lOiBlLmNvbGxlY3Rpb25OYW1lLAogICAgICAgICAgICBkYk5hbWU6IGUuZGJOYW1lLAogICAgICAgICAgICBuYW1lc3BhY2U6IGUubmFtZXNwYWNlLAogICAgICAgICAgfSwKICAgICAgICAgIGkgPSB7IG9wOiAiZGIiLCBkZXNjcmlwdGlvbjogdCwgZGF0YTogciB9LAogICAgICAgICAgbyA9IE9vW3RdLAogICAgICAgICAgZSA9IEFycmF5LmlzQXJyYXkodGhpcy5fZGVzY3JpYmVPcGVyYXRpb25zKQogICAgICAgICAgICA/IHRoaXMuX2Rlc2NyaWJlT3BlcmF0aW9ucy5pbmNsdWRlcyh0KQogICAgICAgICAgICA6IHRoaXMuX2Rlc2NyaWJlT3BlcmF0aW9uczsKICAgICAgICBpZiAoIW8gfHwgIWUpIHJldHVybiBpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBpZiAoIm1hcFJlZHVjZSIgPT09IHQpIHsKICAgICAgICAgICAgdmFyIGEgPSBBdChuLCAyKSwKICAgICAgICAgICAgICBzID0gYVswXSwKICAgICAgICAgICAgICBjID0gYVsxXTsKICAgICAgICAgICAgKHJbb1swXV0gPSAic3RyaW5nIiA9PSB0eXBlb2YgcyA/IHMgOiBzLm5hbWUgfHwgIjxhbm9ueW1vdXM+IiksCiAgICAgICAgICAgICAgKHJbb1sxXV0gPSAic3RyaW5nIiA9PSB0eXBlb2YgYyA/IGMgOiBjLm5hbWUgfHwgIjxhbm9ueW1vdXM+Iik7CiAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCBvLmxlbmd0aDsgdSsrKSByW29bdV1dID0gSlNPTi5zdHJpbmdpZnkoblt1XSk7CiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICByZXR1cm4gaTsKICAgICAgfSksCiAgICAgIChUby5pZCA9ICJNb25nbyIpLAogICAgICBUbyk7CgogIGZ1bmN0aW9uIFRvKGUpIHsKICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHt9KSwKICAgICAgKHRoaXMubmFtZSA9IFRvLmlkKSwKICAgICAgKHRoaXMuX29wZXJhdGlvbnMgPSBBcnJheS5pc0FycmF5KGUub3BlcmF0aW9ucykgPyBlLm9wZXJhdGlvbnMgOiBrbyksCiAgICAgICh0aGlzLl9kZXNjcmliZU9wZXJhdGlvbnMgPQogICAgICAgICEoImRlc2NyaWJlT3BlcmF0aW9ucyIgaW4gZSkgfHwgZS5kZXNjcmliZU9wZXJhdGlvbnMpLAogICAgICAodGhpcy5fdXNlTW9uZ29vc2UgPSAhIWUudXNlTW9uZ29vc2UpOwogIH0KCiAgdmFyIElvLAogICAgQ28sCiAgICBqbywKICAgIEFvID0gSXQoCiAgICAgIEl0KAogICAgICAgIHt9LAogICAgICAgIE9iamVjdC5mcmVlemUoewogICAgICAgICAgX19wcm90b19fOiBudWxsLAogICAgICAgICAgRXhwcmVzczogbywKICAgICAgICAgIFBvc3RncmVzOiBQZSwKICAgICAgICAgIE15c3FsOiB4LAogICAgICAgICAgTW9uZ286IFIsCiAgICAgICAgfSkKICAgICAgKSwKICAgICAgeyBCcm93c2VyVHJhY2luZzogS24gfQogICAgKTsKICAoQ28gPSBscigpKS5fX1NFTlRSWV9fICYmCiAgICAoKENvLl9fU0VOVFJZX18uZXh0ZW5zaW9ucyA9IENvLl9fU0VOVFJZX18uZXh0ZW5zaW9ucyB8fCB7fSksCiAgICBDby5fX1NFTlRSWV9fLmV4dGVuc2lvbnMuc3RhcnRUcmFuc2FjdGlvbiB8fAogICAgICAoQ28uX19TRU5UUllfXy5leHRlbnNpb25zLnN0YXJ0VHJhbnNhY3Rpb24gPSBLaSksCiAgICBDby5fX1NFTlRSWV9fLmV4dGVuc2lvbnMudHJhY2VIZWFkZXJzIHx8CiAgICAgIChDby5fX1NFTlRSWV9fLmV4dGVuc2lvbnMudHJhY2VIZWFkZXJzID0gSmkpKSwKICAgIFp0KCkgJiYKICAgICAgKGpvID0gbHIoKSkuX19TRU5UUllfXyAmJgogICAgICAoKElvID0gewogICAgICAgIG1vbmdvZGI6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBuZXcgKGVuKG1vZHVsZSwgIi4vaW50ZWdyYXRpb25zL21vbmdvIikuTW9uZ28pKCk7CiAgICAgICAgfSwKICAgICAgICBtb25nb29zZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIG5ldyAoZW4obW9kdWxlLCAiLi9pbnRlZ3JhdGlvbnMvbW9uZ28iKS5Nb25nbykoewogICAgICAgICAgICBtb25nb29zZTogITAsCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIG15c3FsOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbmV3IChlbihtb2R1bGUsICIuL2ludGVncmF0aW9ucy9teXNxbCIpLk15c3FsKSgpOwogICAgICAgIH0sCiAgICAgICAgcGc6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBuZXcgKGVuKG1vZHVsZSwgIi4vaW50ZWdyYXRpb25zL3Bvc3RncmVzIikuUG9zdGdyZXMpKCk7CiAgICAgICAgfSwKICAgICAgfSksCiAgICAgIDAgPAogICAgICAgIChDbyA9IE9iamVjdC5rZXlzKElvKQogICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gISF0bihlKTsKICAgICAgICAgIH0pCiAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIElvW2VdKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgfSkpLmxlbmd0aCAmJgogICAgICAgIChqby5fX1NFTlRSWV9fLmludGVncmF0aW9ucyA9IFJ0KAogICAgICAgICAgam8uX19TRU5UUllfXy5pbnRlZ3JhdGlvbnMgfHwgW10sCiAgICAgICAgICBDbwogICAgICAgICkpKSwKICAgIHFuKHsKICAgICAgY2FsbGJhY2s6IERpLAogICAgICB0eXBlOiAiZXJyb3IiLAogICAgfSksCiAgICBxbih7IGNhbGxiYWNrOiBEaSwgdHlwZTogInVuaGFuZGxlZHJlamVjdGlvbiIgfSk7CgogIGZ1bmN0aW9uIFJvKGUsIHQpIHsKICAgIHZhciBuID0gdC5vcmlnaW5hbEV4Y2VwdGlvbjsKICAgIGlmIChuICYmICJzdHJpbmciICE9IHR5cGVvZiBuKSB7CiAgICAgIHQgPSBuLnN0YWNrOwogICAgICBpZiAoUG8udGVzdCh2b2lkIDAgPT09IHQgPyAiIiA6IHQpKSByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSBpZiAoInN0cmluZyIgPT0gdHlwZW9mIG4gJiYgUG8udGVzdChuKSkgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gZTsKICB9CgogIHZhciBEbyA9IFsKICAgICAgL2V4dGVuc2lvbnNcLy9pLAogICAgICAvXmNocm9tZTpcL1wvL2ksCiAgICAgIC9zYWZhcmktZXh0ZW5zaW9uLywKICAgICAgL3NhZmFyaS13ZWItZXh0ZW5zaW9uLywKICAgICAgL21vei1leHRlbnNpb24vLAogICAgICAvY2hyb21lLWV4dGVuc2lvbi8sCiAgICAgIC9kYXRhOmFwcGxpY2F0aW9uLywKICAgICAgL2ZpbGU6XC9cL1wvLywKICAgICAgLzEyN1wuMFwuMFwuMTo0MDAxXC9pc3J1bm5pbmcvaSwKICAgICAgL3dlYmFwcHN0b29sYmFyYmFcLnRleHRoZWxwXC5jb21cLy9pLAogICAgICAvbWV0cmljc1wuaXR1bmVzXC5hcHBsZVwuY29tXC5lZGdlc3VpdGVcLm5ldFwvL2ksCiAgICAgIC90cmFuc2xhdGVcLmdvb2cvLAogICAgICAvZ29vZ2xldGFnc2VydmljZXMvLAogICAgICAvbW9hdGFkcy8sCiAgICAgIC9hZHRlY2gvLAogICAgICAvY29udGV4dHVhbFwubWVkaWFcLm5ldC8sCiAgICAgIC9wbGF0Zm9ybVwuaXRlcmF0ZWhxXC5jb20vLAogICAgICAvY2hhcnRiZWF0LywKICAgICAgL2ZsYXNodGFsa2luZy8sCiAgICAgIC9kb3VibGV2ZXJpZnkvLAogICAgICAvZ29vZ2xlLWFuYWx5dGljcy8sCiAgICAgIC8zbGlmdC8sCiAgICAgIC9jZWx0cmEvLAogICAgICAvNGV2ZXJwcm94eS8sCiAgICAgIC9oaWRlcHJveHkvLAogICAgICAvcHJveHlzaXRlLywKICAgICAgL3VzLXByb3h5LywKICAgICAgL2dlb2VkZ2UvLAogICAgICAvZ3J1bWktaXAvLAogICAgXSwKICAgIFBvID0gbmV3IFJlZ0V4cCgKICAgICAgWwogICAgICAgICJhbWF6b24tYWRzeXN0ZW0iLAogICAgICAgICJhZHMtdXMiLAogICAgICAgICJhbXA0YWRzIiwKICAgICAgICAicHViYWRzIiwKICAgICAgICAiMm1kbiIsCiAgICAgICAgImFtcHByb2plY3QiLAogICAgICAgICJjaGFydGJlYXQiLAogICAgICAgICJnc2kiLAogICAgICAgICJia19hZGRQYWdlQ3R4IiwKICAgICAgICAieWltZyIsCiAgICAgICAgIkJPT01SIiwKICAgICAgICAiYm9vbWVyYW5nIiwKICAgICAgICAiZ3RtIiwKICAgICAgICAiZ29vZ2xlX3RhZ19tYW5hZ2VyIiwKICAgICAgICAic2NvcmVjYXJkcmVzZWFyY2giLAogICAgICAgICJzYWZhcmktZXh0ZW5zaW9uIiwKICAgICAgICAibW96LWV4dGVuc2lvbiIsCiAgICAgICAgImNocm9tZS1leHRlbnNpb24iLAogICAgICAgICJiYWQgcmVxIiwKICAgICAgICAiTm8gSW50ZXJuZXQiLAogICAgICAgICJObyByb290IGNvbmZpZyBmb3VuZCIsCiAgICAgIF0uam9pbigifCIpCiAgICApLAogICAgTm8gPSAoZnVuY3Rpb24gKCkgewogICAgICB3aW5kb3cuaHlicmlkRGVidWcgPSB3aW5kb3cuaHlicmlkRGVidWcgfHwgW107CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgIDMwIDwgd2luZG93Lmh5YnJpZERlYnVnLmxlbmd0aCAmJiB3aW5kb3cuaHlicmlkRGVidWcucG9wKCksCiAgICAgICAgICB3aW5kb3cuaHlicmlkRGVidWcudW5zaGlmdCh7CiAgICAgICAgICAgIG1lc3NhZ2U6IGUsCiAgICAgICAgICAgIGFyZ3M6IHQsCiAgICAgICAgICAgIHJlc3BvbnNlOiBuLAogICAgICAgICAgfSk7CiAgICAgIH07CiAgICB9KSgpOwoKICBmdW5jdGlvbiBMbyhlLCB0LCBuKSB7CiAgICByZXR1cm4gKAogICAgICB0IGluIGUKICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7CiAgICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgfSkKICAgICAgICA6IChlW3RdID0gbiksCiAgICAgIGUKICAgICk7CiAgfQoKICBmdW5jdGlvbiBxbyhyKSB7CiAgICB2YXIgZTsKICAgIHJldHVybiAoCiAgICAgIExvKChlID0ge30pLCBVbywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICByZXR1cm4gcihVbywgeyBldmVudE5hbWU6IGUsIG9wdGlvbnM6IHQgfHwge30gfSk7CiAgICAgIH0pLAogICAgICBMbyhlLCBGbywgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gcihGbywgeyB2YWx1ZTogZSB9KTsKICAgICAgfSksCiAgICAgIExvKGUsIEJvLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiByKEJvLCB7IHR5cGU6IGUgfSk7CiAgICAgIH0pLAogICAgICBMbyhlLCBIbywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiByKEhvKTsKICAgICAgfSksCiAgICAgIExvKGUsIHpvLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHIoem8pOwogICAgICB9KSwKICAgICAgTG8oZSwgV28sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gcihXbyk7CiAgICAgIH0pLAogICAgICBMbyhlLCBZbywgZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiByKFlvKTsKICAgICAgfSksCiAgICAgIExvKGUsIFZvLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gZS50eXBlLAogICAgICAgICAgZSA9IGUuZGVidWdJbmZvOwogICAgICAgIHJldHVybiByKFZvLCB7IHR5cGU6IHQsIGRlYnVnSW5mbzogZSB9KTsKICAgICAgfSksCiAgICAgIExvKGUsIEdvLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgIHJldHVybiByKEdvLCB7IHVybDogZSwgdGV4dDogdCwgdGl0bGU6IG4gfSk7CiAgICAgIH0pLAogICAgICBlCiAgICApOwogIH0KCiAgZnVuY3Rpb24gTW8oKSB7CiAgICByZXR1cm4gImlvcyIgPT09IHdpbmRvdy5uZXdzcmVhZGVyQXBwUGxhdGZvcm07CiAgfQoKICB2YXIgVW8gPSAic2VuZEFuYWx5dGljIiwKICAgIEZvID0gInNldFB1bGxUb1JlZnJlc2hFbmFibGVkIiwKICAgIEJvID0gImdhbWVzQXV0aGVudGljYXRlVXNlciIsCiAgICBIbyA9ICJnYW1lc0JhY2tUb0h1YiIsCiAgICB6byA9ICJnYW1lc0NhY2hlUmVmcmVzaCIsCiAgICBXbyA9ICJnYW1lc0dldFVzZXJEZXRhaWxzIiwKICAgIFlvID0gImdhbWVzSW5pdGlhbGl6ZVN0YXRlIiwKICAgIFZvID0gImdhbWVzU2VuZEVtYWlsIiwKICAgIEdvID0gInNoYXJlIiwKICAgIEpvID0gW1VvLCBGbywgQm8sIEhvLCB6bywgV28sIFlvLCBWbywgR29dLAogICAgWG8gPSBmdW5jdGlvbiAoZSkgewogICAgICBObygiTm8gYW5kcm9pZC1zcGVjaWZpYyB0YXNrcyBkZWZpbmVkIik7CiAgICB9LAogICAgS28gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgKCJhbmRyb2lkIiA9PT0gd2luZG93LmdhbWVzQXBwUGxhdGZvcm0gfHwKICAgICAgICAgICJhbmRyb2lkIiA9PT0gd2luZG93Lm5ld3NyZWFkZXJBcHBQbGF0Zm9ybSkgJiYKICAgICAgICB3aW5kb3cuaXNIeWJyaWRXZWJWaWV3CiAgICAgICk7CiAgICB9LAogICAgJG8gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgKCJpb3MiID09PSB3aW5kb3cuZ2FtZXNBcHBQbGF0Zm9ybSB8fCBNbygpKSAmJiB3aW5kb3cuaXNIeWJyaWRXZWJWaWV3CiAgICAgICk7CiAgICB9LAogICAgUW8gPSBmdW5jdGlvbiAoZSkgewogICAgICBNbygpICYmIGUuc2V0UHVsbFRvUmVmcmVzaEVuYWJsZWQoITEpOwogICAgfSwKICAgIFpvID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9CiAgICAgICAgICAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXQogICAgICAgICAgICA/IGFyZ3VtZW50c1swXQogICAgICAgICAgICA6IHdpbmRvdywKICAgICAgICB0ID0gMSA8IGFyZ3VtZW50cy5sZW5ndGggPyBhcmd1bWVudHNbMV0gOiB2b2lkIDA7CiAgICAgICEoZnVuY3Rpb24gKCkgewogICAgICAgICgwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXQogICAgICAgICAgPyBhcmd1bWVudHNbMF0KICAgICAgICAgIDogd2luZG93CiAgICAgICAgKS5hc3NldCA9IHsgdXJpOiAiZmFrZUFzc2V0VXJpIiB9OwogICAgICB9KShlKSwKICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHQgPQogICAgICAgICAgICAgIDAgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdCiAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXQogICAgICAgICAgICAgICAgOiB3aW5kb3csCiAgICAgICAgICAgIGUgPSAxIDwgYXJndW1lbnRzLmxlbmd0aCA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMDsKICAgICAgICAgICh0Lm5hdmlnYXRvci5uYXRpdmUgPSB7IGJyaWRnZUNvbW1hbmRzOiB7fSB9KSwKICAgICAgICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgdC5uYXZpZ2F0b3IubmF0aXZlLmJyaWRnZUNvbW1hbmRzW2VdID0geyBlbmFibGVkOiAhMCB9OwogICAgICAgICAgICB9KTsKICAgICAgICB9KShlLCB0KTsKICAgICAgdmFyIGUgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGUgPQogICAgICAgICAgICAgIDAgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdCiAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXQogICAgICAgICAgICAgICAgOiB3aW5kb3csCiAgICAgICAgICAgIGUgPSBhLmluaXROYXRpdmVCcmlkZ2UoZSwgITApOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgTmF0aXZlQnJpZGdlOiBlLAogICAgICAgICAgICBjYWxsTmF0aXZlQnJpZGdlQ29tbWFuZDogZS5jYWxsTmF0aXZlQnJpZGdlQ29tbWFuZCwKICAgICAgICAgIH07CiAgICAgICAgfSkoZSksCiAgICAgICAgbiA9IGUuTmF0aXZlQnJpZGdlLAogICAgICAgIG8gPSBlLmNhbGxOYXRpdmVCcmlkZ2VDb21tYW5kLAogICAgICAgIHIgPSBxbyhmdW5jdGlvbiAoZSkgewogICAgICAgICAgZm9yICgKICAgICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoLCBuID0gbmV3IEFycmF5KDEgPCB0ID8gdCAtIDEgOiAwKSwgciA9IDE7CiAgICAgICAgICAgIHIgPCB0OwogICAgICAgICAgICByKysKICAgICAgICAgICkKICAgICAgICAgICAgbltyIC0gMV0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgICB2YXIgaSA9IG8uYXBwbHkodm9pZCAwLCBbZV0uY29uY2F0KG4pKTsKICAgICAgICAgIHJldHVybiBObygiRXhlY3V0aW5nIG5hdGl2ZSBicmlkZ2UgY29tbWFuZDogIi5jb25jYXQoZSksIG4sIGkpLCBpOwogICAgICAgIH0pOwogICAgICByZXR1cm4gKAogICAgICAgIHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgbltlXSA9IHJbZV07CiAgICAgICAgfSksCiAgICAgICAgbgogICAgICApOwogICAgfTsKCiAgZnVuY3Rpb24gZWEodCwgZSkgewogICAgdmFyIG4sCiAgICAgIHIgPSBPYmplY3Qua2V5cyh0KTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYKICAgICAgICAoKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSwKICAgICAgICBlICYmCiAgICAgICAgICAobiA9IG4uZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIGUpLmVudW1lcmFibGU7CiAgICAgICAgICB9KSksCiAgICAgICAgci5wdXNoLmFwcGx5KHIsIG4pKSwKICAgICAgcgogICAgKTsKICB9CgogIGZ1bmN0aW9uIHRhKHIpIHsKICAgIGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7CiAgICAgIHZhciBpID0gbnVsbCAhPSBhcmd1bWVudHNbZV0gPyBhcmd1bWVudHNbZV0gOiB7fTsKICAgICAgZSAlIDIKICAgICAgICA/IGVhKE9iamVjdChpKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICh0ID0gciksCiAgICAgICAgICAgICAgKGUgPSBpWyhuID0gZSldKSwKICAgICAgICAgICAgICBuIGluIHQKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKHRbbl0gPSBlKTsKICAgICAgICAgIH0pCiAgICAgICAgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycwogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMociwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoaSkpCiAgICAgICAgOiBlYShPYmplY3QoaSkpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsIGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoaSwgZSkpOwogICAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gcjsKICB9CgogIHZhciBuYSA9IHsKICAgICAgaXNVc2VyTG9nZ2VkSW46ICEwLAogICAgICBpc1N1YnNjcmliZWQ6ICEwLAogICAgICBueXRzQ29va2llOiAiIiwKICAgICAgcmVnaUlEOiAxMzE5OTkzODUsCiAgICB9LAogICAgcmEgPSB7IHN1Y2Nlc3M6ICEwIH0sCiAgICBpYSA9IHRhKHRhKHt9LCByYSksIHt9LCB7IHZhbHVlczogeyBnYW1lc0F1dGhlbnRpY2F0ZVVzZXI6IHRhKHt9LCBuYSkgfSB9KSwKICAgIG9hID0gdGEoCiAgICAgIHRhKHt9LCByYSksCiAgICAgIHt9LAogICAgICB7IHZhbHVlczogeyBnYW1lc0luaXRpYWxpemVTdGF0ZTogeyBpc1JldHVybmluZ0Zyb21CYWNrZ3JvdW5kOiAhMSB9IH0gfQogICAgKSwKICAgIGFhID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB7CiAgICAgICAgICBOYXRpdmVCcmlkZ2U6IHt9LAogICAgICAgICAgY2FsbE5hdGl2ZUJyaWRnZUNvbW1hbmQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoLCBuID0gbmV3IEFycmF5KDEgPCB0ID8gdCAtIDEgOiAwKSwgciA9IDE7CiAgICAgICAgICAgICAgciA8IHQ7CiAgICAgICAgICAgICAgcisrCiAgICAgICAgICAgICkKICAgICAgICAgICAgICBuW3IgLSAxXSA9IGFyZ3VtZW50c1tyXTsKICAgICAgICAgICAgc3dpdGNoICgKICAgICAgICAgICAgICAoY29uc29sZS5sb2coCiAgICAgICAgICAgICAgICAiW05BVElWRSBCUklER0UgTU9DS106ICIuY29uY2F0KGUsICIgY2FsbGVkIGJ5IHdlYiBhcHAiKSwKICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIGUpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGNhc2UgWW86CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgICAgICAgICAiW05BVElWRSBCUklER0UgTU9DS106ICIuY29uY2F0KGUsICIgcmVzcG9uZGVkIHdpdGgiKSwKICAgICAgICAgICAgICAgICAgICBvYQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUob2EpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGNhc2UgV286CiAgICAgICAgICAgICAgY2FzZSBCbzoKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICAgICAgICJbTkFUSVZFIEJSSURHRSBNT0NLXTogIi5jb25jYXQoZSwgIiByZXNwb25kZWQgd2l0aCIpLAogICAgICAgICAgICAgICAgICAgIGlhCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShpYSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICAgICAgICJbTkFUSVZFIEJSSURHRSBNT0NLXTogIi5jb25jYXQoZSwgIiByZXNwb25kZWQgd2l0aCIpLAogICAgICAgICAgICAgICAgICAgIHJhCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZShyYSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBuID0gdC5OYXRpdmVCcmlkZ2UsCiAgICAgICAgciA9IHFvKHQuY2FsbE5hdGl2ZUJyaWRnZUNvbW1hbmQpOwogICAgICByZXR1cm4gKAogICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgbltlXSA9IHJbZV07CiAgICAgICAgfSksCiAgICAgICAgbgogICAgICApOwogICAgfTsKCiAgZnVuY3Rpb24gc2EoZSkgewogICAgcmV0dXJuIHAuYWJyYS50ZXN0c1tlXTsKICB9CgogIHZhciBjYSA9IHt9LAogICAgdWEgPSB7CiAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgdCwKICAgICAgICAgIGUgPQogICAgICAgICAgICAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXQogICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdCiAgICAgICAgICAgICAgOiBwLmFicmEuY29uZmlnOwogICAgICAgIGUgJiYKICAgICAgICAgICgodCA9IHAuQWJyYSgKICAgICAgICAgICAgZSwKICAgICAgICAgICAgMSA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiB7fSwKICAgICAgICAgICAgMiA8IGFyZ3VtZW50cy5sZW5ndGggPyBhcmd1bWVudHNbMl0gOiB2b2lkIDAKICAgICAgICAgICkpLAogICAgICAgICAgKHAuYWJyYS5nZXRWYXJpYW50ID0gdCksCiAgICAgICAgICAocC5hYnJhLnRlc3RzID0ge30pLAogICAgICAgICAgT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBwLmFicmEudGVzdHNbZV0gPSB0KGUpOwogICAgICAgICAgfSkpOwogICAgICB9LAogICAgICBnZXRUZXN0czogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBwLmFicmEudGVzdHM7CiAgICAgIH0sCiAgICAgIGdldFZhcmlhbnQ6IHNhLAogICAgICByZXNldDogZnVuY3Rpb24gKCkgewogICAgICAgIGNhID0ge307CiAgICAgIH0sCiAgICAgIHJlcG9ydEV4cG9zdXJlOiBmdW5jdGlvbiAoZSkgewogICAgICAgIGNhW2VdIHx8CiAgICAgICAgICAoKGNhW2VdID0gITApLAogICAgICAgICAgKHAuZGF0YUxheWVyID0gcC5kYXRhTGF5ZXIgfHwgW10pLAogICAgICAgICAgcC5kYXRhTGF5ZXIucHVzaCh7CiAgICAgICAgICAgIGV2ZW50OiAiYWItZXhwb3NlIiwKICAgICAgICAgICAgYWJ0ZXN0OiB7IHRlc3Q6IGUsIHZhcmlhbnQ6IHNhKGUpIHx8ICIwIiB9LAogICAgICAgICAgfSkpOwogICAgICB9LAogICAgfTsKCiAgZnVuY3Rpb24gbGEodCwgZSkgewogICAgdmFyIG4sCiAgICAgIHIgPSBPYmplY3Qua2V5cyh0KTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYKICAgICAgICAoKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSwKICAgICAgICBlICYmCiAgICAgICAgICAobiA9IG4uZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIGUpLmVudW1lcmFibGU7CiAgICAgICAgICB9KSksCiAgICAgICAgci5wdXNoLmFwcGx5KHIsIG4pKSwKICAgICAgcgogICAgKTsKICB9CgogIGZ1bmN0aW9uIHBhKHQpIHsKICAgIGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7CiAgICAgIHZhciBuID0gbnVsbCAhPSBhcmd1bWVudHNbZV0gPyBhcmd1bWVudHNbZV0gOiB7fTsKICAgICAgZSAlIDIKICAgICAgICA/IGxhKE9iamVjdChuKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZGEodCwgZSwgbltlXSk7CiAgICAgICAgICB9KQogICAgICAgIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMKICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKQogICAgICAgIDogbGEoT2JqZWN0KG4pKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sIGUpKTsKICAgICAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHQ7CiAgfQoKICBmdW5jdGlvbiBkYShlLCB0LCBuKSB7CiAgICByZXR1cm4gKAogICAgICB0IGluIGUKICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7CiAgICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgfSkKICAgICAgICA6IChlW3RdID0gbiksCiAgICAgIGUKICAgICk7CiAgfQoKICB2YXIgZmEsIGhhLCBtYSwgdmEsIHlhLCBnYSwgX2EsIGJhOwogICEoZnVuY3Rpb24gKCkgewogICAgdmFyIGUgPQogICAgICAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IHdpbmRvdzsKICAgIGlmICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQsCiAgICAgICAgICBlID0gMCA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBlID8gZSA6IGRvY3VtZW50OwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAtMSAhPT0KICAgICAgICAgICgKICAgICAgICAgICAgKG51bGwgPT0gZSB8fCBudWxsID09PSAodCA9IGUubG9jYXRpb24pIHx8IHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgOiB0LnNlYXJjaC50b0xvd2VyQ2FzZSgpKSB8fCAiIgogICAgICAgICAgKS5pbmRleE9mKCJicmlkZ2U9bW9jayIpCiAgICAgICAgKTsKICAgICAgfSkoKQogICAgKQogICAgICAhKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGUgPyBlIDogd2luZG93LAogICAgICAgICAgZSA9IGFhKEpvKTsKICAgICAgICAodC5oeWJyaWRDb25maWcgPSB7CiAgICAgICAgICBPUzogIk1vY2sgT1MiLAogICAgICAgICAgQWJyYUNvbmZpZzoge30sCiAgICAgICAgICB1c2VySW5mbzogdGEodGEoe30sIG5hKSwge30sIHsgYWdlbnRJRDogIm1vY2stYWdlbnQtaWQiIH0pLAogICAgICAgIH0pLAogICAgICAgICAgKGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgIG5ldyBFdmVudFRhcmdldCgpLmFkZEV2ZW50TGlzdGVuZXIoZSwgdCwgbik7CiAgICAgICAgICB9KSwKICAgICAgICAgIChlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICBuZXcgRXZlbnRUYXJnZXQoKS5yZW1vdmVFdmVudExpc3RlbmVyKGUsIHQsIG4pOwogICAgICAgICAgfSksCiAgICAgICAgICBLbygpCiAgICAgICAgICAgID8gWG8oKQogICAgICAgICAgICA6ICRvKCkKICAgICAgICAgICAgPyBRbyhlKQogICAgICAgICAgICA6IGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICAgIltOQVRJVkUgQlJJREdFIE1PQ0tdOiBQbGF0Zm9ybSBpcyBuZWl0aGVyIGFuZHJvaWQgbm9yIGlvcyIsCiAgICAgICAgICAgICAgICB0Lm5ld3NyZWFkZXJBcHBQbGF0Zm9ybSwKICAgICAgICAgICAgICAgIHQuZ2FtZXNBcHBQbGF0Zm9ybQogICAgICAgICAgICAgICksCiAgICAgICAgICAodC5OYXRpdmVCcmlkZ2UgPSBlKTsKICAgICAgfSkoZSk7CiAgICBlbHNlIGlmIChLbygpIHx8ICRvKCkpIHsKICAgICAgTm8oIkluaXRpYWxpemluZyBuYXRpdmUgYnJpZGdlIik7CiAgICAgIHRyeSB7CiAgICAgICAgIShmdW5jdGlvbiAoZSkgewogICAgICAgICAgdmFyIHQgPSAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGUgPyBlIDogd2luZG93LAogICAgICAgICAgICBlID0gWm8odCwgSm8pOwogICAgICAgICAgS28oKQogICAgICAgICAgICA/IFhvKCkKICAgICAgICAgICAgOiAkbygpCiAgICAgICAgICAgID8gUW8oZSkKICAgICAgICAgICAgOiBObygiUGxhdGZvcm0gaXMgbmVpdGhlciBhbmRyb2lkIG5vciBpb3MiLCBbCiAgICAgICAgICAgICAgICB0Lm5ld3NyZWFkZXJBcHBQbGF0Zm9ybSwKICAgICAgICAgICAgICAgIHQuZ2FtZXNBcHBQbGF0Zm9ybSwKICAgICAgICAgICAgICBdKSwKICAgICAgICAgICAgKHQuTmF0aXZlQnJpZGdlID0gZSk7CiAgICAgICAgfSkoZSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBObygiRmFpbGVkIHRvIGluaXRpYWxpemUgbmF0aXZlIGJyaWRnZSIsIFtlXSk7CiAgICAgIH0KICAgIH0gZWxzZSBObygiTmVpdGhlciBtb2NrIG5vciBuYXRpdmUgYnJpZGdlIGluaXRpYWxpemVkIik7CiAgfSkoKSwKICAgIERlKCksCiAgICAoZmEgPSBwLnNlbnRyeUNvbmZpZyksCiAgICAoaGEgPSBmYS5kc24pLAogICAgKG1hID0gZmEucmVsZWFzZSksCiAgICAodmEgPSBmYS5zYW1wbGVSYXRlKSwKICAgICh5YSA9IGZhLmVudmlyb25tZW50KSwKICAgIChmYSA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpLnNlYXJjaFBhcmFtcy5nZXQoInNlbnRyeU92ZXJyaWRlIikpLAogICAgKCJwcm9kIiAhPT0geWEgJiYgIWZhKSB8fAogICAgICAoKCh5YSA9IHsKICAgICAgICBkc246IGhhLAogICAgICAgIHJlbGVhc2U6IG1hLAogICAgICAgIHNhbXBsZVJhdGU6IGZhID8gMSA6IHZhLAogICAgICAgIG1heEJyZWFkY3J1bWJzOiAzMCwKICAgICAgICBlbnZpcm9ubWVudDogeWEsCiAgICAgICAgYmVmb3JlU2VuZDogUm8sCiAgICAgICAgZGVueVVybHM6IERvLAogICAgICAgIGludGVncmF0aW9uczogW25ldyBBby5Ccm93c2VyVHJhY2luZygpXSwKICAgICAgfSkuX21ldGFkYXRhID0geWEuX21ldGFkYXRhIHx8IHt9KSwKICAgICAgKHlhLl9tZXRhZGF0YS5zZGsgPSB5YS5fbWV0YWRhdGEuc2RrIHx8IHsKICAgICAgICBuYW1lOiAic2VudHJ5LmphdmFzY3JpcHQucmVhY3QiLAogICAgICAgIHBhY2thZ2VzOiBbeyBuYW1lOiAibnBtOkBzZW50cnkvcmVhY3QiLCB2ZXJzaW9uOiBEciB9XSwKICAgICAgICB2ZXJzaW9uOiBEciwKICAgICAgfSksCiAgICAgIENpKHlhKSwKICAgICAgdnIoInNldFVzZXIiLCB7IGlkOiBQIH0pLAogICAgICBncigidXNlclR5cGUiLCBWKSwKICAgICAgZ3IoImh5YnJpZCIsIHsKICAgICAgICBpc0h5YnJpZFdlYlZpZXc6IHdpbmRvdy5pc0h5YnJpZFdlYlZpZXcsCiAgICAgICAgbmV3c3JlYWRlckFwcFBsYXRmb3JtOiB3aW5kb3cubmV3c3JlYWRlckFwcFBsYXRmb3JtLAogICAgICAgIGdhbWVzQXBwUGxhdGZvcm06IHdpbmRvdy5nYW1lc0FwcFBsYXRmb3JtLAogICAgICAgIGlzUGxheVRhYjogd2luZG93LmlzUGxheVRhYiwKICAgICAgfSksCiAgICAgIHdpbmRvdy5pc0h5YnJpZFdlYlZpZXcgJiYgdnIoInNldFRhZyIsICJoeWJyaWQiLCAhMCksCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvZmZsaW5lIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHZyKCJhZGRCcmVhZGNydW1iIiwgewogICAgICAgICAgbWVzc2FnZTogIlRoZSB1c2VyIGhhcyBnb25lIG9mZmxpbmUiLAogICAgICAgICAgbGV2ZWw6ICJ3YXJuaW5nIiwKICAgICAgICB9KTsKICAgICAgfSkpLAogICAgIm9udG91Y2hzdGFydCIgaW4gcCB8fAogICAgICBwLkRvY3VtZW50VG91Y2ggfHwKICAgICAgeShkLmRvY3VtZW50RWxlbWVudCwgInB6LWRvbnQtdG91Y2giKSwKICAgIHAuaXNIeWJyaWRXZWJWaWV3IHx8CiAgICAgICJ3b3JkbGUiID09PSBwLnBhZ2VOYW1lIHx8CiAgICAgIChZLmluaXRpYWxpemUoKSwgZGUuaW5pdGlhbGl6ZSgpKSwKICAgIChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlLCByLCBuLCBpLCBvLCBhLCBzLCBjLCB0OwogICAgICAoZSA9IFhlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5qcy1uYXYtdHJhY2tlciIpKSksCiAgICAgICAgKHQgPSAodCA9IHcoQygibmF2LXByb2ZpbGUiKSkpID8gWGUodC5xdWVyeVNlbGVjdG9yQWxsKCJhIikpIDogW10pLAogICAgICAgICh0ID0gW10uY29uY2F0KFhlKGUpLCBYZSh0KSkpLAogICAgICAgIChyID0gUygpKSwKICAgICAgICB0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0LAogICAgICAgICAgICBuID0KICAgICAgICAgICAgICAobnVsbCA9PSBlIHx8IG51bGwgPT09ICh0ID0gZS5kYXRhc2V0KSB8fCB2b2lkIDAgPT09IHQKICAgICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgICA6IHQudHJhY2tMYWJlbCkgfHwgIiI7CiAgICAgICAgICBuICYmCiAgICAgICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgTWUoeyBuYW1lOiByLCBsYWJlbDogbiwgdXNlQmVhY29uOiAhMCwgY29udGV4dDogbnVsbCB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgKHQgPSB3KEMoImh5YnJpZC1iYWNrIikpKSAmJgogICAgICAgICAgd2luZG93LmlzSHlicmlkV2ViVmlldyAmJgogICAgICAgICAgd2luZG93Lk5hdGl2ZUJyaWRnZSAmJgogICAgICAgICAgYih0LCAiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICBudWxsICE9PSAoZSA9IHdpbmRvdy5OYXRpdmVCcmlkZ2UpICYmCiAgICAgICAgICAgICAgdm9pZCAwICE9PSBlICYmCiAgICAgICAgICAgICAgZS5nYW1lc0JhY2tUb0h1YigpOwogICAgICAgICAgfSksCiAgICAgICAgd2luZG93LmlzSHlicmlkV2ViVmlldyAmJgogICAgICAgICAgd2luZG93Lk5hdGl2ZUJyaWRnZSAmJgogICAgICAgICAgKChuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLiIuY29uY2F0KEMoIm5hdi1sb2dpbiIpKSkpLAogICAgICAgICAgKGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuIi5jb25jYXQoQygibmF2LWxvZ291dCIpKSkpLAogICAgICAgICAgKG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuIi5jb25jYXQoQygibmF2LXN1YnNjcmliZSIpKSkpLAogICAgICAgICAgKGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuIi5jb25jYXQoQygibmF2LWFjY291bnQtZGV0YWlscyIpKSkpLAogICAgICAgICAgKHMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgeShlLCAiaHlicmlkLWhpZGRlbiIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pLAogICAgICAgICAgKGMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCA9IGUuaXNVc2VyTG9nZ2VkSW4sCiAgICAgICAgICAgICAgZSA9IGUuaXNTdWJzY3JpYmVkOwogICAgICAgICAgICB0ID8gcyhuKSA6IChzKGkpLCBzKGEpKSwgZSAmJiBzKG8pOwogICAgICAgICAgfSksCiAgICAgICAgICB3aW5kb3cuTmF0aXZlQnJpZGdlLmdhbWVzR2V0VXNlckRldGFpbHMoKQogICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmICghZS5zdWNjZXNzKSB0aHJvdyBuZXcgRXJyb3IoZS5lcnJvcik7CiAgICAgICAgICAgICAgYyhlLnZhbHVlcy5nYW1lc0dldFVzZXJEZXRhaWxzKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiR2V0dGluZyB1c2VyIGRldGFpbHMgZmFpbGVkIiwgZSksIHMoaSksIHMoYSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgYih3aW5kb3csICJnYW1lc1VzZXJDcmVkZW50aWFsQ2hhbmdlZCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0LCBuOwogICAgICAgICAgICBjKAogICAgICAgICAgICAgIG51bGwgPT0gZSB8fAogICAgICAgICAgICAgICAgbnVsbCA9PT0gKHQgPSBlLmRldGFpbCkgfHwKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gdCB8fAogICAgICAgICAgICAgICAgbnVsbCA9PT0gKG4gPSB0LnZhbHVlcykgfHwKICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbgogICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgIDogbi5nYW1lc0F1dGhlbnRpY2F0ZVVzZXIKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBiKGUsICJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksCiAgICAgICAgICAgICAgICAgIG51bGwgIT09IChlID0gd2luZG93Lk5hdGl2ZUJyaWRnZSkgJiYKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGUgJiYKICAgICAgICAgICAgICAgICAgICBlLmdhbWVzQXV0aGVudGljYXRlVXNlcih0KS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuc3VjY2VzcykgdGhyb3cgbmV3IEVycm9yKGUuZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudCgiZ2FtZXNVc2VyQ3JlZGVudGlhbENoYW5nZWQiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBlLAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KShvLCAic3Vic2NyaWJlIiksCiAgICAgICAgICB0KG4sICJsb2dpbiIpKSwKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIFhlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5qcy1odWItdHJhY2tlciIpKS5mb3JFYWNoKGZ1bmN0aW9uICgKICAgICAgICAgICAgZQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHZhciB0ID0gZS5kYXRhc2V0LnRyYWNrSHViLAogICAgICAgICAgICAgIG4gPSBlLmRhdGFzZXQudHJhY2tIdWJDb250ZXh0IHx8IG51bGw7CiAgICAgICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICAgICAiY2xpY2siLAogICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIEplKHQsIG4pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sIDApOwogICAgICB2YXIgdSwKICAgICAgICBsLAogICAgICAgIHAgPSAhMSwKICAgICAgICBkID0gLTEsCiAgICAgICAgZiA9IHcoQygibmF2LWJ1cmdlciIpKSwKICAgICAgICBoID0gdyhDKCJuYXYtZHJhd2VyIikpOwoKICAgICAgZnVuY3Rpb24gbSgpIHsKICAgICAgICAocCA9ICEwKSwKICAgICAgICAgIGYgJiYKICAgICAgICAgICAgaCAmJgogICAgICAgICAgICAoeShoLCAib3BlbiIpLAogICAgICAgICAgICB5KGYsICJhY3RpdmUiKSwKICAgICAgICAgICAgTWUoewogICAgICAgICAgICAgIG5hbWU6IFMoKSwKICAgICAgICAgICAgICBsYWJlbDogImNsaWNrLW5hdiIsCiAgICAgICAgICAgICAgY29udGV4dDogbnVsbCwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF8oZiwgImFyaWEtZXhwYW5kZWQiLCBwLnRvU3RyaW5nKCkpLAogICAgICAgICAgICBfKGgsICJhcmlhLWhpZGRlbiIsICghcCkudG9TdHJpbmcoKSkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiB2KCkgewogICAgICAgIChwID0gITEpLAogICAgICAgICAgZiAmJgogICAgICAgICAgICBoICYmCiAgICAgICAgICAgIChnKGgsICJvcGVuIiksCiAgICAgICAgICAgIHkoaCwgImNsb3NpbmciKSwKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgZyhoLCAiY2xvc2luZyIpOwogICAgICAgICAgICB9LCA1MDApLAogICAgICAgICAgICBnKGYsICJhY3RpdmUiKSwKICAgICAgICAgICAgXyhmLCAiYXJpYS1leHBhbmRlZCIsIHAudG9TdHJpbmcoKSksCiAgICAgICAgICAgIF8oaCwgImFyaWEtaGlkZGVuIiwgKCFwKS50b1N0cmluZygpKSk7CiAgICAgIH0KCiAgICAgIGYgJiYKICAgICAgICBoICYmCiAgICAgICAgKCh1ID0gW10uY29uY2F0KAogICAgICAgICAgWGUoaC5xdWVyeVNlbGVjdG9yQWxsKCIucHotbmF2LWRyYXdlcl9fbGluayIpKSwKICAgICAgICAgIFhlKGgucXVlcnlTZWxlY3RvckFsbCgiLnB6LW5hdl9fYnV0dG9uIikpCiAgICAgICAgKSksCiAgICAgICAgKGwgPSB1Lm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgZSA9IGUudGV4dENvbnRlbnQ7CiAgICAgICAgICByZXR1cm4gZSAmJiBlWzBdID8gZVswXS50b1VwcGVyQ2FzZSgpIDogIiI7CiAgICAgICAgfSkpLAogICAgICAgIGIoZiwgImNsaWNrIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgKHAgPyB2IDogbSkoKSwgZi5ibHVyKCk7CiAgICAgICAgfSksCiAgICAgICAgYihmLCAia2V5ZG93biIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IGUua2V5LAogICAgICAgICAgICBuID0gZS5rZXlDb2RlOwogICAgICAgICAgaWYgKCJFc2NhcGUiICE9PSB0ICYmICJFc2MiICE9PSB0KSB7CiAgICAgICAgICAgIGlmICgiRW50ZXIiICE9PSB0ICYmICJTcGFjZSIgIT09IHQgJiYgMzIgIT09IG4pCiAgICAgICAgICAgICAgcmV0dXJuICJBcnJvd0Rvd24iID09PSB0CiAgICAgICAgICAgICAgICA/IChlLnByZXZlbnREZWZhdWx0KCksIG0oKSwgdm9pZCB1WyhkID0gMCldLmZvY3VzKCkpCiAgICAgICAgICAgICAgICA6IHZvaWQgKAogICAgICAgICAgICAgICAgICAgICJBcnJvd1VwIiA9PT0gdCAmJgogICAgICAgICAgICAgICAgICAgIChlLnByZXZlbnREZWZhdWx0KCksIG0oKSwgKGQgPSB1Lmxlbmd0aCAtIDEpLCB1W2RdLmZvY3VzKCkpCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIHAgPyB2KCkgOiAobSgpLCB1WyhkID0gMCldLmZvY3VzKCkpOwogICAgICAgICAgfSBlbHNlIHYoKTsKICAgICAgICB9KSwKICAgICAgICBiKGgsICJrZXlkb3duIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gZS5rZXksCiAgICAgICAgICAgIG4gPSBlLmtleUNvZGUsCiAgICAgICAgICAgIHIgPSBlLnNoaWZ0S2V5OwogICAgICAgICAgcmV0dXJuICJFc2NhcGUiID09PSB0IHx8ICJFc2MiID09PSB0CiAgICAgICAgICAgID8gKHYoKSwgdm9pZCBmLmZvY3VzKCkpCiAgICAgICAgICAgIDogIkFycm93RG93biIgPT09IHQgfHwgIkFycm93UmlnaHQiID09PSB0IHx8ICgiVGFiIiA9PT0gdCAmJiAhcikKICAgICAgICAgICAgPyAoZS5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgICAgIGQgPT09IHUubGVuZ3RoIC0gMSA/IChkID0gMCkgOiAoZCArPSAxKSwKICAgICAgICAgICAgICB2b2lkIHVbZF0uZm9jdXMoKSkKICAgICAgICAgICAgOiAiQXJyb3dVcCIgPT09IHQgfHwgIkFycm93TGVmdCIgPT09IHQgfHwgKCJUYWIiID09PSB0ICYmIHIpCiAgICAgICAgICAgID8gKGUucHJldmVudERlZmF1bHQoKSwKICAgICAgICAgICAgICAwID09PSBkID8gKGQgPSB1Lmxlbmd0aCAtIDEpIDogLS1kLAogICAgICAgICAgICAgIHZvaWQgdVtkXS5mb2N1cygpKQogICAgICAgICAgICA6IHZvaWQgKAogICAgICAgICAgICAgICAgNjUgPD0gbiAmJgogICAgICAgICAgICAgICAgbiA8PSA5MCAmJgogICAgICAgICAgICAgICAgMCA8PQogICAgICAgICAgICAgICAgICAoZSA9IGwuZmluZEluZGV4KGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IFN0cmluZy5mcm9tQ2hhckNvZGUobikgJiYgdCAhPT0gZDsKICAgICAgICAgICAgICAgICAgfSkpICYmCiAgICAgICAgICAgICAgICB1WyhkID0gZSldLmZvY3VzKCkKICAgICAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIHcoQygibG9nby1uYXYiKSkuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZSA9IHsKICAgICAgICAgICAgZXZlbnREYXRhOiB7IHBhZ2V0eXBlOiAiZ2FtZSIsIHRyaWdnZXI6ICJtb2R1bGUiLCB0eXBlOiAiY2xpY2siIH0sCiAgICAgICAgICAgIG1vZHVsZTogewogICAgICAgICAgICAgIG5hbWU6ICJjbGljayIsCiAgICAgICAgICAgICAgY29udGV4dDogIiIsCiAgICAgICAgICAgICAgZWxlbWVudDogeyBuYW1lOiB3aW5kb3cubG9jYXRpb24uaHJlZiwgbGFiZWw6ICJnYW1lcy1sb2dvIiB9LAogICAgICAgICAgICB9LAogICAgICAgICAgfTsKICAgICAgICAgIExlKCJtb2R1bGVJbnRlcmFjdGlvbiIsIGUpOwogICAgICAgIH0pKTsKICAgIH0pKCksCiAgICAoYmEgPSB3KEMoImZlZWRiYWNrLWxpbmsiKSkpICYmCiAgICAgICh6ZSgpLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICBiYS5zZXRBdHRyaWJ1dGUoImhyZWYiLCBlKTsKICAgICAgfSksCiAgICAgIChnYSA9IFVlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi4iLmNvbmNhdChDKCJmb290ZXItdHJhY2tpbmciKSkpKSksCiAgICAgIChfYSA9IFMoKSksCiAgICAgIGdhLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCwKICAgICAgICAgIG4sCiAgICAgICAgICByLAogICAgICAgICAgaSA9CiAgICAgICAgICAgIChudWxsID09IGUgfHwgbnVsbCA9PT0gKHQgPSBlLmRhdGFzZXQpIHx8IHZvaWQgMCA9PT0gdAogICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgOiB0LnRyYWNrTGFiZWwpIHx8ICIiLAogICAgICAgICAgbyA9CiAgICAgICAgICAgIG51bGwgPT0gZSB8fCBudWxsID09PSAobiA9IGUuZGF0YXNldCkgfHwgdm9pZCAwID09PSBuCiAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICA6IG4ubWVkaXVtLAogICAgICAgICAgYSA9CiAgICAgICAgICAgIG51bGwgPT0gZSB8fCBudWxsID09PSAociA9IGUuZGF0YXNldCkgfHwgdm9pZCAwID09PSByCiAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICA6IHIuc291cmNlOwogICAgICAgIGkgJiYKICAgICAgICAgIGUuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBNZSh7CiAgICAgICAgICAgICAgbmFtZTogX2EsCiAgICAgICAgICAgICAgbGFiZWw6IGksCiAgICAgICAgICAgICAgdXNlQmVhY29uOiAhMCwKICAgICAgICAgICAgICBjb250ZXh0OiBudWxsLAogICAgICAgICAgICAgIG1lZGl1bTogbywKICAgICAgICAgICAgICBzb3VyY2U6IGEsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgIH0pKSwKICAgICJ3b3JkbGUiICE9PSBwLnBhZ2VOYW1lICYmCiAgICAgICFpLmlzTW9iaWxlICYmCiAgICAgICgvaVBhZC8udGVzdChwZS5wbGF0Zm9ybSkgfHwKICAgICAgICAoIk1hY0ludGVsIiA9PT0gcGUucGxhdGZvcm0gJiYgMSA8IHBlLm1heFRvdWNoUG9pbnRzKSkgJiYKICAgICAgKChkLmNvb2tpZSA9ICJpbmZlcnJlZElwYWQ9dHJ1ZTtkb21haW49OyIpLCBwLmxvY2F0aW9uLnJlbG9hZCgpKSwKICAgIHAuZmFsc2UgfHwgKChudWxsID09IFYgPyB2b2lkIDAgOiBWLmluU2hvcnR6TW9kZSkgJiYgTikKICAgICAgPyAocC5kYXRhTGF5ZXIgPSBbXSkKICAgICAgOiAobGUgJiYKICAgICAgICAgIGxlLmxvYWRTY3JpcHRzICYmCiAgICAgICAgICBsZS5sb2FkU2NyaXB0cyh7CiAgICAgICAgICAgIHBhZ2VUeXBlOiAiZ2FtZXMiLAogICAgICAgICAgICBzZWN0aW9uOiAiY3Jvc3N3b3JkcyIsCiAgICAgICAgICB9KSwKICAgICAgICBwLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdCgpLCBaKHAuYWRVbml0UGF0aCB8fCAiZGVmYXVsdCIsIHVhLmdldFRlc3RzKCkpLCBBZSgpOwogICAgICAgIH0pKTsKICAoZS5hYnJhID0gdWEpLAogICAgKGUuYWdlbnRJZENvb2tpZSA9IFApLAogICAgKGUuYXBwZW5kU3VwcG9ydGVkUGFyYW1zID0gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgcmV0dXJuIGouc29tZShmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB0LnN0YXJ0c1dpdGgoZSk7CiAgICAgIH0pCiAgICAgICAgPyB0CiAgICAgICAgOiAiIi5jb25jYXQodCkuY29uY2F0KGUpOwogICAgfSksCiAgICAoZS5jYXB0dXJlU2VudHJ5RXJyb3IgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgbiA9CiAgICAgICAgMSA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgX3IoZnVuY3Rpb24gKHQpIHsKICAgICAgICBPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB0LnNldFRhZyhlLCBuW2VdKTsKICAgICAgICB9KSwKICAgICAgICAgIHlyKGUpOwogICAgICB9KTsKICAgIH0pLAogICAgKGUuY2NwYSA9IF90KSwKICAgIChlLmRldmljZSA9IGRlKSwKICAgIChlLmVudiA9IGgpLAogICAgKGUuZmVhdHVyZUZsYWdzID0gdiksCiAgICAoZS5nZXRGZWVkYmFja0xpbmsgPSB6ZSksCiAgICAoZS5nZXRHYW1lRGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHAuZ2FtZURhdGE7CiAgICB9KSwKICAgIChlLmdldFF1ZXJ5UGFyYW1zID0gVCksCiAgICAoZS5nbG9iYWxOYXZJZCA9IG50KSwKICAgIChlLmpzSG9vayA9IEMpLAogICAgKGUubW9iaWxlTmF2VG9vbHMgPSBtKSwKICAgIChlLm1vYmlsZVRvb2xiYXJJZCA9IHJ0KSwKICAgIChlLm55dENvb2tpZSA9IEQpLAogICAgKGUucGFyc2VQdXJyQ29va2llVmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlLAogICAgICAgIHQsCiAgICAgICAgcyA9ICh0ID0KICAgICAgICAgIC0xIDwgZG9jdW1lbnQuY29va2llLmluZGV4T2YoIm55dC1wdXJyIikKICAgICAgICAgICAgPyBudWxsID09PQogICAgICAgICAgICAgICAgKGUgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoIjsgIikuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdGFydHNXaXRoKCJueXQtcHVycj0iKTsKICAgICAgICAgICAgICAgIH0pKSB8fCB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICAgIDogZS5zcGxpdCgiPSIpWzFdCiAgICAgICAgICAgIDogdCk7CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh3aW5kb3cucHVyckRpcmVjdGl2ZUZvcm1hdCkucmVkdWNlKAogICAgICAgIGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgICB2YXIgciwKICAgICAgICAgICAgZSwKICAgICAgICAgICAgaSwKICAgICAgICAgICAgbyA9IHdpbmRvdy5wdXJyRGlyZWN0aXZlRm9ybWF0W25dOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGEgPQogICAgICAgICAgICAgICgoZSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLnNwbGl0KCImIikpLAogICAgICAgICAgICAgIChpID0ge30pLAogICAgICAgICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgKHIgPSBlLnNwbGl0KCI9IikpLAogICAgICAgICAgICAgICAgICAoaVtkZWNvZGVVUklDb21wb25lbnQoclswXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KAogICAgICAgICAgICAgICAgICAgIHJbMV0gfHwgIiIKICAgICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgaSlbby5xdWVyeVBhcmFtXSB8fCBvLnZhbHVlc1tzW28uaW5kZXhdXTsKICAgICAgICAgICAgcmV0dXJuIHBhKHBhKHt9LCB0KSwge30sIGRhKHt9LCBuLCBhKSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHJldHVybiBwYShwYSh7fSwgdCksIHt9LCBkYSh7fSwgbiwgby5kZWZhdWx0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBQVVJSX0RhdGFTYWxlT3B0T3V0VUlfdjI6ICJoaWRlIiwKICAgICAgICAgIFBVUlJfQ2FsaWZvcm5pYU5vdGljZXNVSTogImhpZGUiLAogICAgICAgICAgUFVSUl9BZENvbmZpZ3VyYXRpb25fdjM6ICJmdWxsIiwKICAgICAgICB9CiAgICAgICk7CiAgICB9KSwKICAgIChlLnJlZnJlc2hBZHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGxlLmNtZC5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBsZS5yZWZyZXNoQWRzKCk7CiAgICAgIH0pOwogICAgfSksCiAgICAoZS5yZXBvcnRXZWJWaXRhbHMgPSBEZSksCiAgICAoZS5zZXRTZW50cnlEYXRhID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgZSAmJiB0ICYmIGdyKGUsIHQpOwogICAgfSksCiAgICAoZS5zaG93VG9vbGJhckNsYXNzID0gaXQpLAogICAgKGUudHJhY2sgPSBMZSksCiAgICAoZS50cmFja0NsaWNrID0gTWUpLAogICAgKGUudHJhY2tJbXByZXNzaW9uID0gZnVuY3Rpb24gKGUsIHQsIG4sIHIpIHsKICAgICAgTGUoImltcHJlc3Npb24iLCB7CiAgICAgICAgbW9kdWxlOiB7IG5hbWU6IGUsIGNvbnRleHQ6IHIsIHJlZ2lvbjogdCB8fCAiIiwgbGFiZWw6IG4gfHwgdm9pZCAwIH0sCiAgICAgIH0pOwogICAgfSksCiAgICAoZS50cmFja01vZHVsZUludGVyYWN0aW9uID0gZnVuY3Rpb24gKGUsIHQsIG4sIHIsIGksIG8pIHsKICAgICAgbyA9IHsKICAgICAgICBtb2R1bGU6IFRlKAogICAgICAgICAgewogICAgICAgICAgICBuYW1lOiBlLAogICAgICAgICAgICBjb250ZXh0OiB0LAogICAgICAgICAgICBlbGVtZW50OiB7CiAgICAgICAgICAgICAgbmFtZTogbiB8fCAiIiwKICAgICAgICAgICAgICBsYWJlbDogInN0cmluZyIgPT0gdHlwZW9mIHIgPyByIDogSlNPTi5zdHJpbmdpZnkociksCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgaSAmJiB7IGxhYmVsOiBpIH0KICAgICAgICApLAogICAgICAgIGV2ZW50RGF0YTogewogICAgICAgICAgcGFnZVR5cGU6ICJnYW1lIiwKICAgICAgICAgIHR5cGU6IG8gPyAib2JfY2xpY2siIDogImNsaWNrIiwKICAgICAgICAgIHRyaWdnZXI6ICJtb2R1bGUiLAogICAgICAgICAgc3RhdHVzOiAiIiwKICAgICAgICB9LAogICAgICB9OwogICAgICBMZSgibW9kdWxlSW50ZXJhY3Rpb24iLCBvKTsKICAgIH0pLAogICAgKGUudXNlciA9IFkpLAogICAgKGUudXNlclR5cGUgPSBWKSwKICAgIChlLnhociA9IFcpLAogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogITAgfSk7Cn0pOwovLyMgc291cmNlTWFwcGluZ1VSTD1mb3VuZGF0aW9uLmpzLm1hcAo="
    ></script>
    <script
      defer=""
      type="text/javascript"
      src="data:text/javascript;base64,LyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xNC4wCiAqIHJlYWN0LnByb2R1Y3Rpb24ubWluLmpzCiAqCiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLgogKgogKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGUKICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogKi8KInVzZSBzdHJpY3QiOwooZnVuY3Rpb24gKGQsIHIpIHsKICAib2JqZWN0IiA9PT0gdHlwZW9mIGV4cG9ydHMgJiYgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBtb2R1bGUKICAgID8gcihleHBvcnRzKQogICAgOiAiZnVuY3Rpb24iID09PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQKICAgID8gZGVmaW5lKFsiZXhwb3J0cyJdLCByKQogICAgOiAoKGQgPSBkIHx8IHNlbGYpLCByKChkLlJlYWN0ID0ge30pKSk7Cn0pKHRoaXMsIGZ1bmN0aW9uIChkKSB7CiAgZnVuY3Rpb24gcihhKSB7CiAgICBmb3IgKAogICAgICB2YXIgYiA9ICJodHRwczovL3JlYWN0anMub3JnL2RvY3MvZXJyb3ItZGVjb2Rlci5odG1sP2ludmFyaWFudD0iICsgYSwKICAgICAgICBjID0gMTsKICAgICAgYyA8IGFyZ3VtZW50cy5sZW5ndGg7CiAgICAgIGMrKwogICAgKQogICAgICBiICs9ICImYXJnc1tdPSIgKyBlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2NdKTsKICAgIHJldHVybiAoCiAgICAgICJNaW5pZmllZCBSZWFjdCBlcnJvciAjIiArCiAgICAgIGEgKwogICAgICAiOyB2aXNpdCAiICsKICAgICAgYiArCiAgICAgICIgZm9yIHRoZSBmdWxsIG1lc3NhZ2Ugb3IgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50IGZvciBmdWxsIGVycm9ycyBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLiIKICAgICk7CiAgfQoKICBmdW5jdGlvbiB3KGEsIGIsIGMpIHsKICAgIHRoaXMucHJvcHMgPSBhOwogICAgdGhpcy5jb250ZXh0ID0gYjsKICAgIHRoaXMucmVmcyA9IGJhOwogICAgdGhpcy51cGRhdGVyID0gYyB8fCBjYTsKICB9CgogIGZ1bmN0aW9uIGRhKCkge30KCiAgZnVuY3Rpb24gTChhLCBiLCBjKSB7CiAgICB0aGlzLnByb3BzID0gYTsKICAgIHRoaXMuY29udGV4dCA9IGI7CiAgICB0aGlzLnJlZnMgPSBiYTsKICAgIHRoaXMudXBkYXRlciA9IGMgfHwgY2E7CiAgfQoKICBmdW5jdGlvbiBlYShhLCBiLCBjKSB7CiAgICB2YXIgZywKICAgICAgZSA9IHt9LAogICAgICBmYSA9IG51bGwsCiAgICAgIGQgPSBudWxsOwogICAgaWYgKG51bGwgIT0gYikKICAgICAgZm9yIChnIGluICh2b2lkIDAgIT09IGIucmVmICYmIChkID0gYi5yZWYpLAogICAgICB2b2lkIDAgIT09IGIua2V5ICYmIChmYSA9ICIiICsgYi5rZXkpLAogICAgICBiKSkKICAgICAgICBoYS5jYWxsKGIsIGcpICYmICFpYS5oYXNPd25Qcm9wZXJ0eShnKSAmJiAoZVtnXSA9IGJbZ10pOwogICAgdmFyIGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjsKICAgIGlmICgxID09PSBoKSBlLmNoaWxkcmVuID0gYzsKICAgIGVsc2UgaWYgKDEgPCBoKSB7CiAgICAgIGZvciAodmFyIGsgPSBBcnJheShoKSwgZiA9IDA7IGYgPCBoOyBmKyspIGtbZl0gPSBhcmd1bWVudHNbZiArIDJdOwogICAgICBlLmNoaWxkcmVuID0gazsKICAgIH0KICAgIGlmIChhICYmIGEuZGVmYXVsdFByb3BzKQogICAgICBmb3IgKGcgaW4gKChoID0gYS5kZWZhdWx0UHJvcHMpLCBoKSkgdm9pZCAwID09PSBlW2ddICYmIChlW2ddID0gaFtnXSk7CiAgICByZXR1cm4gewogICAgICAkJHR5cGVvZjogeCwKICAgICAgdHlwZTogYSwKICAgICAga2V5OiBmYSwKICAgICAgcmVmOiBkLAogICAgICBwcm9wczogZSwKICAgICAgX293bmVyOiBNLmN1cnJlbnQsCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gdmEoYSwgYikgewogICAgcmV0dXJuIHsKICAgICAgJCR0eXBlb2Y6IHgsCiAgICAgIHR5cGU6IGEudHlwZSwKICAgICAga2V5OiBiLAogICAgICByZWY6IGEucmVmLAogICAgICBwcm9wczogYS5wcm9wcywKICAgICAgX293bmVyOiBhLl9vd25lciwKICAgIH07CiAgfQoKICBmdW5jdGlvbiBOKGEpIHsKICAgIHJldHVybiAib2JqZWN0IiA9PT0gdHlwZW9mIGEgJiYgbnVsbCAhPT0gYSAmJiBhLiQkdHlwZW9mID09PSB4OwogIH0KCiAgZnVuY3Rpb24gd2EoYSkgewogICAgdmFyIGIgPSB7ICI9IjogIj0wIiwgIjoiOiAiPTIiIH07CiAgICByZXR1cm4gKAogICAgICAiJCIgKwogICAgICAoIiIgKyBhKS5yZXBsYWNlKC9bPTpdL2csIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGJbYV07CiAgICAgIH0pCiAgICApOwogIH0KCiAgZnVuY3Rpb24gamEoYSwgYiwgYywgZykgewogICAgaWYgKEMubGVuZ3RoKSB7CiAgICAgIHZhciBlID0gQy5wb3AoKTsKICAgICAgZS5yZXN1bHQgPSBhOwogICAgICBlLmtleVByZWZpeCA9IGI7CiAgICAgIGUuZnVuYyA9IGM7CiAgICAgIGUuY29udGV4dCA9IGc7CiAgICAgIGUuY291bnQgPSAwOwogICAgICByZXR1cm4gZTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHJlc3VsdDogYSwKICAgICAga2V5UHJlZml4OiBiLAogICAgICBmdW5jOiBjLAogICAgICBjb250ZXh0OiBnLAogICAgICBjb3VudDogMCwKICAgIH07CiAgfQoKICBmdW5jdGlvbiBrYShhKSB7CiAgICBhLnJlc3VsdCA9IG51bGw7CiAgICBhLmtleVByZWZpeCA9IG51bGw7CiAgICBhLmZ1bmMgPSBudWxsOwogICAgYS5jb250ZXh0ID0gbnVsbDsKICAgIGEuY291bnQgPSAwOwogICAgMTAgPiBDLmxlbmd0aCAmJiBDLnB1c2goYSk7CiAgfQoKICBmdW5jdGlvbiBPKGEsIGIsIGMsIGcpIHsKICAgIHZhciBlID0gdHlwZW9mIGE7CiAgICBpZiAoInVuZGVmaW5lZCIgPT09IGUgfHwgImJvb2xlYW4iID09PSBlKSBhID0gbnVsbDsKICAgIHZhciBkID0gITE7CiAgICBpZiAobnVsbCA9PT0gYSkgZCA9ICEwOwogICAgZWxzZQogICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICBjYXNlICJzdHJpbmciOgogICAgICAgIGNhc2UgIm51bWJlciI6CiAgICAgICAgICBkID0gITA7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgc3dpdGNoIChhLiQkdHlwZW9mKSB7CiAgICAgICAgICAgIGNhc2UgeDoKICAgICAgICAgICAgY2FzZSB4YToKICAgICAgICAgICAgICBkID0gITA7CiAgICAgICAgICB9CiAgICAgIH0KICAgIGlmIChkKSByZXR1cm4gYyhnLCBhLCAiIiA9PT0gYiA/ICIuIiArIFAoYSwgMCkgOiBiKSwgMTsKICAgIGQgPSAwOwogICAgYiA9ICIiID09PSBiID8gIi4iIDogYiArICI6IjsKICAgIGlmIChBcnJheS5pc0FycmF5KGEpKQogICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGEubGVuZ3RoOyBmKyspIHsKICAgICAgICBlID0gYVtmXTsKICAgICAgICB2YXIgaCA9IGIgKyBQKGUsIGYpOwogICAgICAgIGQgKz0gTyhlLCBoLCBjLCBnKTsKICAgICAgfQogICAgZWxzZSBpZiAoCiAgICAgIChudWxsID09PSBhIHx8ICJvYmplY3QiICE9PSB0eXBlb2YgYQogICAgICAgID8gKGggPSBudWxsKQogICAgICAgIDogKChoID0gKGxhICYmIGFbbGFdKSB8fCBhWyJAQGl0ZXJhdG9yIl0pLAogICAgICAgICAgKGggPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgaCA/IGggOiBudWxsKSksCiAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBoKQogICAgKQogICAgICBmb3IgKGEgPSBoLmNhbGwoYSksIGYgPSAwOyAhKGUgPSBhLm5leHQoKSkuZG9uZTsgKQogICAgICAgIChlID0gZS52YWx1ZSksIChoID0gYiArIFAoZSwgZisrKSksIChkICs9IE8oZSwgaCwgYywgZykpOwogICAgZWxzZSBpZiAoIm9iamVjdCIgPT09IGUpCiAgICAgIHRocm93ICgKICAgICAgICAoKGMgPSAiIiArIGEpLAogICAgICAgIEVycm9yKAogICAgICAgICAgcigKICAgICAgICAgICAgMzEsCiAgICAgICAgICAgICJbb2JqZWN0IE9iamVjdF0iID09PSBjCiAgICAgICAgICAgICAgPyAib2JqZWN0IHdpdGgga2V5cyB7IiArIE9iamVjdC5rZXlzKGEpLmpvaW4oIiwgIikgKyAifSIKICAgICAgICAgICAgICA6IGMsCiAgICAgICAgICAgICIiCiAgICAgICAgICApCiAgICAgICAgKSkKICAgICAgKTsKICAgIHJldHVybiBkOwogIH0KCiAgZnVuY3Rpb24gUShhLCBiLCBjKSB7CiAgICByZXR1cm4gbnVsbCA9PSBhID8gMCA6IE8oYSwgIiIsIGIsIGMpOwogIH0KCiAgZnVuY3Rpb24gUChhLCBiKSB7CiAgICByZXR1cm4gIm9iamVjdCIgPT09IHR5cGVvZiBhICYmIG51bGwgIT09IGEgJiYgbnVsbCAhPSBhLmtleQogICAgICA/IHdhKGEua2V5KQogICAgICA6IGIudG9TdHJpbmcoMzYpOwogIH0KCiAgZnVuY3Rpb24geWEoYSwgYiwgYykgewogICAgYS5mdW5jLmNhbGwoYS5jb250ZXh0LCBiLCBhLmNvdW50KyspOwogIH0KCiAgZnVuY3Rpb24gemEoYSwgYiwgYykgewogICAgdmFyIGcgPSBhLnJlc3VsdCwKICAgICAgZSA9IGEua2V5UHJlZml4OwogICAgYSA9IGEuZnVuYy5jYWxsKGEuY29udGV4dCwgYiwgYS5jb3VudCsrKTsKICAgIEFycmF5LmlzQXJyYXkoYSkKICAgICAgPyBSKGEsIGcsIGMsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9KQogICAgICA6IG51bGwgIT0gYSAmJgogICAgICAgIChOKGEpICYmCiAgICAgICAgICAoYSA9IHZhKAogICAgICAgICAgICBhLAogICAgICAgICAgICBlICsKICAgICAgICAgICAgICAoIWEua2V5IHx8IChiICYmIGIua2V5ID09PSBhLmtleSkKICAgICAgICAgICAgICAgID8gIiIKICAgICAgICAgICAgICAgIDogKCIiICsgYS5rZXkpLnJlcGxhY2UobWEsICIkJi8iKSArICIvIikgKwogICAgICAgICAgICAgIGMKICAgICAgICAgICkpLAogICAgICAgIGcucHVzaChhKSk7CiAgfQoKICBmdW5jdGlvbiBSKGEsIGIsIGMsIGcsIGUpIHsKICAgIHZhciBkID0gIiI7CiAgICBudWxsICE9IGMgJiYgKGQgPSAoIiIgKyBjKS5yZXBsYWNlKG1hLCAiJCYvIikgKyAiLyIpOwogICAgYiA9IGphKGIsIGQsIGcsIGUpOwogICAgUShhLCB6YSwgYik7CiAgICBrYShiKTsKICB9CgogIGZ1bmN0aW9uIHQoKSB7CiAgICB2YXIgYSA9IG5hLmN1cnJlbnQ7CiAgICBpZiAobnVsbCA9PT0gYSkgdGhyb3cgRXJyb3IocigzMjEpKTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gUyhhLCBiKSB7CiAgICB2YXIgYyA9IGEubGVuZ3RoOwogICAgYS5wdXNoKGIpOwogICAgYTogZm9yICg7OykgewogICAgICB2YXIgZyA9IChjIC0gMSkgPj4+IDEsCiAgICAgICAgZSA9IGFbZ107CiAgICAgIGlmICh2b2lkIDAgIT09IGUgJiYgMCA8IEQoZSwgYikpIChhW2ddID0gYiksIChhW2NdID0gZSksIChjID0gZyk7CiAgICAgIGVsc2UgYnJlYWsgYTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG4oYSkgewogICAgYSA9IGFbMF07CiAgICByZXR1cm4gdm9pZCAwID09PSBhID8gbnVsbCA6IGE7CiAgfQoKICBmdW5jdGlvbiBFKGEpIHsKICAgIHZhciBiID0gYVswXTsKICAgIGlmICh2b2lkIDAgIT09IGIpIHsKICAgICAgdmFyIGMgPSBhLnBvcCgpOwogICAgICBpZiAoYyAhPT0gYikgewogICAgICAgIGFbMF0gPSBjOwogICAgICAgIGE6IGZvciAodmFyIGcgPSAwLCBlID0gYS5sZW5ndGg7IGcgPCBlOyApIHsKICAgICAgICAgIHZhciBkID0gMiAqIChnICsgMSkgLSAxLAogICAgICAgICAgICBmID0gYVtkXSwKICAgICAgICAgICAgaCA9IGQgKyAxLAogICAgICAgICAgICBrID0gYVtoXTsKICAgICAgICAgIGlmICh2b2lkIDAgIT09IGYgJiYgMCA+IEQoZiwgYykpCiAgICAgICAgICAgIHZvaWQgMCAhPT0gayAmJiAwID4gRChrLCBmKQogICAgICAgICAgICAgID8gKChhW2ddID0gayksIChhW2hdID0gYyksIChnID0gaCkpCiAgICAgICAgICAgICAgOiAoKGFbZ10gPSBmKSwgKGFbZF0gPSBjKSwgKGcgPSBkKSk7CiAgICAgICAgICBlbHNlIGlmICh2b2lkIDAgIT09IGsgJiYgMCA+IEQoaywgYykpIChhW2ddID0gayksIChhW2hdID0gYyksIChnID0gaCk7CiAgICAgICAgICBlbHNlIGJyZWFrIGE7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBiOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICBmdW5jdGlvbiBEKGEsIGIpIHsKICAgIHZhciBjID0gYS5zb3J0SW5kZXggLSBiLnNvcnRJbmRleDsKICAgIHJldHVybiAwICE9PSBjID8gYyA6IGEuaWQgLSBiLmlkOwogIH0KCiAgZnVuY3Rpb24gRihhKSB7CiAgICBmb3IgKHZhciBiID0gbih1KTsgbnVsbCAhPT0gYjsgKSB7CiAgICAgIGlmIChudWxsID09PSBiLmNhbGxiYWNrKSBFKHUpOwogICAgICBlbHNlIGlmIChiLnN0YXJ0VGltZSA8PSBhKQogICAgICAgIEUodSksIChiLnNvcnRJbmRleCA9IGIuZXhwaXJhdGlvblRpbWUpLCBTKHAsIGIpOwogICAgICBlbHNlIGJyZWFrOwogICAgICBiID0gbih1KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIFQoYSkgewogICAgeSA9ICExOwogICAgRihhKTsKICAgIGlmICghdikKICAgICAgaWYgKG51bGwgIT09IG4ocCkpICh2ID0gITApLCB6KFUpOwogICAgICBlbHNlIHsKICAgICAgICB2YXIgYiA9IG4odSk7CiAgICAgICAgbnVsbCAhPT0gYiAmJiBHKFQsIGIuc3RhcnRUaW1lIC0gYSk7CiAgICAgIH0KICB9CgogIGZ1bmN0aW9uIFUoYSwgYikgewogICAgdiA9ICExOwogICAgeSAmJiAoKHkgPSAhMSksIFYoKSk7CiAgICBIID0gITA7CiAgICB2YXIgYyA9IG07CiAgICB0cnkgewogICAgICBGKGIpOwogICAgICBmb3IgKGwgPSBuKHApOyBudWxsICE9PSBsICYmICghKGwuZXhwaXJhdGlvblRpbWUgPiBiKSB8fCAoYSAmJiAhVygpKSk7ICkgewogICAgICAgIHZhciBnID0gbC5jYWxsYmFjazsKICAgICAgICBpZiAobnVsbCAhPT0gZykgewogICAgICAgICAgbC5jYWxsYmFjayA9IG51bGw7CiAgICAgICAgICBtID0gbC5wcmlvcml0eUxldmVsOwogICAgICAgICAgdmFyIGUgPSBnKGwuZXhwaXJhdGlvblRpbWUgPD0gYik7CiAgICAgICAgICBiID0gcSgpOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGUgPyAobC5jYWxsYmFjayA9IGUpIDogbCA9PT0gbihwKSAmJiBFKHApOwogICAgICAgICAgRihiKTsKICAgICAgICB9IGVsc2UgRShwKTsKICAgICAgICBsID0gbihwKTsKICAgICAgfQogICAgICBpZiAobnVsbCAhPT0gbCkgdmFyIGQgPSAhMDsKICAgICAgZWxzZSB7CiAgICAgICAgdmFyIGYgPSBuKHUpOwogICAgICAgIG51bGwgIT09IGYgJiYgRyhULCBmLnN0YXJ0VGltZSAtIGIpOwogICAgICAgIGQgPSAhMTsKICAgICAgfQogICAgICByZXR1cm4gZDsKICAgIH0gZmluYWxseSB7CiAgICAgIChsID0gbnVsbCksIChtID0gYyksIChIID0gITEpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gb2EoYSkgewogICAgc3dpdGNoIChhKSB7CiAgICAgIGNhc2UgMToKICAgICAgICByZXR1cm4gLTE7CiAgICAgIGNhc2UgMjoKICAgICAgICByZXR1cm4gMjUwOwogICAgICBjYXNlIDU6CiAgICAgICAgcmV0dXJuIDEwNzM3NDE4MjM7CiAgICAgIGNhc2UgNDoKICAgICAgICByZXR1cm4gMWU0OwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiA1ZTM7CiAgICB9CiAgfQoKICB2YXIgZiA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmZvciwKICAgIHggPSBmID8gU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpIDogNjAxMDMsCiAgICB4YSA9IGYgPyBTeW1ib2wuZm9yKCJyZWFjdC5wb3J0YWwiKSA6IDYwMTA2LAogICAgQWEgPSBmID8gU3ltYm9sLmZvcigicmVhY3QuZnJhZ21lbnQiKSA6IDYwMTA3LAogICAgQmEgPSBmID8gU3ltYm9sLmZvcigicmVhY3Quc3RyaWN0X21vZGUiKSA6IDYwMTA4LAogICAgQ2EgPSBmID8gU3ltYm9sLmZvcigicmVhY3QucHJvZmlsZXIiKSA6IDYwMTE0LAogICAgRGEgPSBmID8gU3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKSA6IDYwMTA5LAogICAgRWEgPSBmID8gU3ltYm9sLmZvcigicmVhY3QuY29udGV4dCIpIDogNjAxMTAsCiAgICBGYSA9IGYgPyBTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpIDogNjAxMTIsCiAgICBHYSA9IGYgPyBTeW1ib2wuZm9yKCJyZWFjdC5zdXNwZW5zZSIpIDogNjAxMTMsCiAgICBIYSA9IGYgPyBTeW1ib2wuZm9yKCJyZWFjdC5tZW1vIikgOiA2MDExNSwKICAgIElhID0gZiA/IFN5bWJvbC5mb3IoInJlYWN0LmxhenkiKSA6IDYwMTE2LAogICAgbGEgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvciwKICAgIHBhID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scywKICAgIEphID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwKICAgIEthID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSwKICAgIEkgPSAoZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIGlmICghT2JqZWN0LmFzc2lnbikgcmV0dXJuICExOwogICAgICAgIHZhciBhID0gbmV3IFN0cmluZygiYWJjIik7CiAgICAgICAgYVs1XSA9ICJkZSI7CiAgICAgICAgaWYgKCI1IiA9PT0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYSlbMF0pIHJldHVybiAhMTsKICAgICAgICB2YXIgYiA9IHt9OwogICAgICAgIGZvciAoYSA9IDA7IDEwID4gYTsgYSsrKSBiWyJfIiArIFN0cmluZy5mcm9tQ2hhckNvZGUoYSldID0gYTsKICAgICAgICBpZiAoCiAgICAgICAgICAiMDEyMzQ1Njc4OSIgIT09CiAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiKQogICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGJbYV07CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5qb2luKCIiKQogICAgICAgICkKICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICB2YXIgYyA9IHt9OwogICAgICAgICJhYmNkZWZnaGlqa2xtbm9wcXJzdCIuc3BsaXQoIiIpLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIGNbYV0gPSBhOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiAiYWJjZGVmZ2hpamtsbW5vcHFyc3QiICE9PQogICAgICAgICAgT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgYykpLmpvaW4oIiIpCiAgICAgICAgICA/ICExCiAgICAgICAgICA6ICEwOwogICAgICB9IGNhdGNoIChnKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9CiAgICB9KSgpCiAgICAgID8gT2JqZWN0LmFzc2lnbgogICAgICA6IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gYSB8fCB2b2lkIDAgPT09IGEpCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAgICAgIk9iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkIgogICAgICAgICAgICApOwogICAgICAgICAgdmFyIGMgPSBPYmplY3QoYSk7CiAgICAgICAgICBmb3IgKHZhciBnLCBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgewogICAgICAgICAgICB2YXIgZCA9IE9iamVjdChhcmd1bWVudHNbZV0pOwogICAgICAgICAgICBmb3IgKHZhciBmIGluIGQpIEphLmNhbGwoZCwgZikgJiYgKGNbZl0gPSBkW2ZdKTsKICAgICAgICAgICAgaWYgKHBhKSB7CiAgICAgICAgICAgICAgZyA9IHBhKGQpOwogICAgICAgICAgICAgIGZvciAodmFyIGggPSAwOyBoIDwgZy5sZW5ndGg7IGgrKykKICAgICAgICAgICAgICAgIEthLmNhbGwoZCwgZ1toXSkgJiYgKGNbZ1toXV0gPSBkW2dbaF1dKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgfSwKICAgIGNhID0gewogICAgICBpc01vdW50ZWQ6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9LAogICAgICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChhLCBiLCBjKSB7fSwKICAgICAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHt9LAogICAgICBlbnF1ZXVlU2V0U3RhdGU6IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7fSwKICAgIH0sCiAgICBiYSA9IHt9OwogIHcucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQgPSB7fTsKICB3LnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICBpZiAoIm9iamVjdCIgIT09IHR5cGVvZiBhICYmICJmdW5jdGlvbiIgIT09IHR5cGVvZiBhICYmIG51bGwgIT0gYSkKICAgICAgdGhyb3cgRXJyb3Iocig4NSkpOwogICAgdGhpcy51cGRhdGVyLmVucXVldWVTZXRTdGF0ZSh0aGlzLCBhLCBiLCAic2V0U3RhdGUiKTsKICB9OwogIHcucHJvdG90eXBlLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKGEpIHsKICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlRm9yY2VVcGRhdGUodGhpcywgYSwgImZvcmNlVXBkYXRlIik7CiAgfTsKICBkYS5wcm90b3R5cGUgPSB3LnByb3RvdHlwZTsKICBmID0gTC5wcm90b3R5cGUgPSBuZXcgZGEoKTsKICBmLmNvbnN0cnVjdG9yID0gTDsKICBJKGYsIHcucHJvdG90eXBlKTsKICBmLmlzUHVyZVJlYWN0Q29tcG9uZW50ID0gITA7CiAgdmFyIE0gPSB7IGN1cnJlbnQ6IG51bGwgfSwKICAgIGhhID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwKICAgIGlhID0geyBrZXk6ICEwLCByZWY6ICEwLCBfX3NlbGY6ICEwLCBfX3NvdXJjZTogITAgfSwKICAgIG1hID0gL1wvKy9nLAogICAgQyA9IFtdLAogICAgbmEgPSB7IGN1cnJlbnQ6IG51bGwgfSwKICAgIFg7CiAgaWYgKCJ1bmRlZmluZWQiID09PSB0eXBlb2Ygd2luZG93IHx8ICJmdW5jdGlvbiIgIT09IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCkgewogICAgdmFyIEEgPSBudWxsLAogICAgICBxYSA9IG51bGwsCiAgICAgIHJhID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChudWxsICE9PSBBKQogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIGEgPSBxKCk7CiAgICAgICAgICAgIEEoITAsIGEpOwogICAgICAgICAgICBBID0gbnVsbDsKICAgICAgICAgIH0gY2F0Y2ggKGIpIHsKICAgICAgICAgICAgdGhyb3cgKHNldFRpbWVvdXQocmEsIDApLCBiKTsKICAgICAgICAgIH0KICAgICAgfSwKICAgICAgTGEgPSBEYXRlLm5vdygpOwogICAgdmFyIHEgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gTGE7CiAgICB9OwogICAgdmFyIHogPSBmdW5jdGlvbiAoYSkgewogICAgICBudWxsICE9PSBBID8gc2V0VGltZW91dCh6LCAwLCBhKSA6ICgoQSA9IGEpLCBzZXRUaW1lb3V0KHJhLCAwKSk7CiAgICB9OwogICAgdmFyIEcgPSBmdW5jdGlvbiAoYSwgYikgewogICAgICBxYSA9IHNldFRpbWVvdXQoYSwgYik7CiAgICB9OwogICAgdmFyIFYgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNsZWFyVGltZW91dChxYSk7CiAgICB9OwogICAgdmFyIFcgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAhMTsKICAgIH07CiAgICBmID0gWCA9IGZ1bmN0aW9uICgpIHt9OwogIH0gZWxzZSB7CiAgICB2YXIgWSA9IHdpbmRvdy5wZXJmb3JtYW5jZSwKICAgICAgc2EgPSB3aW5kb3cuRGF0ZSwKICAgICAgTWEgPSB3aW5kb3cuc2V0VGltZW91dCwKICAgICAgTmEgPSB3aW5kb3cuY2xlYXJUaW1lb3V0OwogICAgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBjb25zb2xlICYmCiAgICAgICgoZiA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSksCiAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lICYmCiAgICAgICAgY29uc29sZS5lcnJvcigKICAgICAgICAgICJUaGlzIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHJlcXVlc3RBbmltYXRpb25GcmFtZS4gTWFrZSBzdXJlIHRoYXQgeW91IGxvYWQgYSBwb2x5ZmlsbCBpbiBvbGRlciBicm93c2Vycy4gaHR0cHM6Ly9mYi5tZS9yZWFjdC1wb2x5ZmlsbHMiCiAgICAgICAgKSwKICAgICAgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGYgJiYKICAgICAgICBjb25zb2xlLmVycm9yKAogICAgICAgICAgIlRoaXMgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgY2FuY2VsQW5pbWF0aW9uRnJhbWUuIE1ha2Ugc3VyZSB0aGF0IHlvdSBsb2FkIGEgcG9seWZpbGwgaW4gb2xkZXIgYnJvd3NlcnMuIGh0dHBzOi8vZmIubWUvcmVhY3QtcG9seWZpbGxzIgogICAgICAgICkpOwogICAgaWYgKCJvYmplY3QiID09PSB0eXBlb2YgWSAmJiAiZnVuY3Rpb24iID09PSB0eXBlb2YgWS5ub3cpCiAgICAgIHEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIFkubm93KCk7CiAgICAgIH07CiAgICBlbHNlIHsKICAgICAgdmFyIE9hID0gc2Eubm93KCk7CiAgICAgIHEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHNhLm5vdygpIC0gT2E7CiAgICAgIH07CiAgICB9CiAgICB2YXIgSiA9ICExLAogICAgICBLID0gbnVsbCwKICAgICAgWiA9IC0xLAogICAgICB0YSA9IDUsCiAgICAgIHVhID0gMDsKICAgIFcgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBxKCkgPj0gdWE7CiAgICB9OwogICAgZiA9IGZ1bmN0aW9uICgpIHt9OwogICAgWCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgIDAgPiBhIHx8IDEyNSA8IGEKICAgICAgICA/IGNvbnNvbGUuZXJyb3IoCiAgICAgICAgICAgICJmb3JjZUZyYW1lUmF0ZSB0YWtlcyBhIHBvc2l0aXZlIGludCBiZXR3ZWVuIDAgYW5kIDEyNSwgZm9yY2luZyBmcmFtZXJhdGVzIGhpZ2hlciB0aGFuIDEyNSBmcHMgaXMgbm90IHVuc3VwcG9ydGVkIgogICAgICAgICAgKQogICAgICAgIDogKHRhID0gMCA8IGEgPyBNYXRoLmZsb29yKDFlMyAvIGEpIDogNSk7CiAgICB9OwogICAgdmFyIEIgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKSwKICAgICAgYWEgPSBCLnBvcnQyOwogICAgQi5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChudWxsICE9PSBLKSB7CiAgICAgICAgdmFyIGEgPSBxKCk7CiAgICAgICAgdWEgPSBhICsgdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIEsoITAsIGEpID8gYWEucG9zdE1lc3NhZ2UobnVsbCkgOiAoKEogPSAhMSksIChLID0gbnVsbCkpOwogICAgICAgIH0gY2F0Y2ggKGIpIHsKICAgICAgICAgIHRocm93IChhYS5wb3N0TWVzc2FnZShudWxsKSwgYik7CiAgICAgICAgfQogICAgICB9IGVsc2UgSiA9ICExOwogICAgfTsKICAgIHogPSBmdW5jdGlvbiAoYSkgewogICAgICBLID0gYTsKICAgICAgSiB8fCAoKEogPSAhMCksIGFhLnBvc3RNZXNzYWdlKG51bGwpKTsKICAgIH07CiAgICBHID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgWiA9IE1hKGZ1bmN0aW9uICgpIHsKICAgICAgICBhKHEoKSk7CiAgICAgIH0sIGIpOwogICAgfTsKICAgIFYgPSBmdW5jdGlvbiAoKSB7CiAgICAgIE5hKFopOwogICAgICBaID0gLTE7CiAgICB9OwogIH0KICB2YXIgcCA9IFtdLAogICAgdSA9IFtdLAogICAgUGEgPSAxLAogICAgbCA9IG51bGwsCiAgICBtID0gMywKICAgIEggPSAhMSwKICAgIHYgPSAhMSwKICAgIHkgPSAhMSwKICAgIFFhID0gMDsKICBCID0gewogICAgUmVhY3RDdXJyZW50RGlzcGF0Y2hlcjogbmEsCiAgICBSZWFjdEN1cnJlbnRPd25lcjogTSwKICAgIElzU29tZVJlbmRlcmVyQWN0aW5nOiB7IGN1cnJlbnQ6ICExIH0sCiAgICBhc3NpZ246IEksCiAgfTsKICBJKEIsIHsKICAgIFNjaGVkdWxlcjogewogICAgICBfX3Byb3RvX186IG51bGwsCiAgICAgIHVuc3RhYmxlX0ltbWVkaWF0ZVByaW9yaXR5OiAxLAogICAgICB1bnN0YWJsZV9Vc2VyQmxvY2tpbmdQcmlvcml0eTogMiwKICAgICAgdW5zdGFibGVfTm9ybWFsUHJpb3JpdHk6IDMsCiAgICAgIHVuc3RhYmxlX0lkbGVQcmlvcml0eTogNSwKICAgICAgdW5zdGFibGVfTG93UHJpb3JpdHk6IDQsCiAgICAgIHVuc3RhYmxlX3J1bldpdGhQcmlvcml0eTogZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICBzd2l0Y2ggKGEpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBhID0gMzsKICAgICAgICB9CiAgICAgICAgdmFyIGMgPSBtOwogICAgICAgIG0gPSBhOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gYigpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBtID0gYzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHVuc3RhYmxlX25leHQ6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgc3dpdGNoIChtKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHZhciBiID0gMzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBiID0gbTsKICAgICAgICB9CiAgICAgICAgdmFyIGMgPSBtOwogICAgICAgIG0gPSBiOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gYSgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBtID0gYzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2s6IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICAgICAgdmFyIGQgPSBxKCk7CiAgICAgICAgaWYgKCJvYmplY3QiID09PSB0eXBlb2YgYyAmJiBudWxsICE9PSBjKSB7CiAgICAgICAgICB2YXIgZSA9IGMuZGVsYXk7CiAgICAgICAgICBlID0gIm51bWJlciIgPT09IHR5cGVvZiBlICYmIDAgPCBlID8gZCArIGUgOiBkOwogICAgICAgICAgYyA9ICJudW1iZXIiID09PSB0eXBlb2YgYy50aW1lb3V0ID8gYy50aW1lb3V0IDogb2EoYSk7CiAgICAgICAgfSBlbHNlIChjID0gb2EoYSkpLCAoZSA9IGQpOwogICAgICAgIGMgPSBlICsgYzsKICAgICAgICBhID0gewogICAgICAgICAgaWQ6IFBhKyssCiAgICAgICAgICBjYWxsYmFjazogYiwKICAgICAgICAgIHByaW9yaXR5TGV2ZWw6IGEsCiAgICAgICAgICBzdGFydFRpbWU6IGUsCiAgICAgICAgICBleHBpcmF0aW9uVGltZTogYywKICAgICAgICAgIHNvcnRJbmRleDogLTEsCiAgICAgICAgfTsKICAgICAgICBlID4gZAogICAgICAgICAgPyAoKGEuc29ydEluZGV4ID0gZSksCiAgICAgICAgICAgIFModSwgYSksCiAgICAgICAgICAgIG51bGwgPT09IG4ocCkgJiYgYSA9PT0gbih1KSAmJiAoeSA/IFYoKSA6ICh5ID0gITApLCBHKFQsIGUgLSBkKSkpCiAgICAgICAgICA6ICgoYS5zb3J0SW5kZXggPSBjKSwgUyhwLCBhKSwgdiB8fCBIIHx8ICgodiA9ICEwKSwgeihVKSkpOwogICAgICAgIHJldHVybiBhOwogICAgICB9LAogICAgICB1bnN0YWJsZV9jYW5jZWxDYWxsYmFjazogZnVuY3Rpb24gKGEpIHsKICAgICAgICBhLmNhbGxiYWNrID0gbnVsbDsKICAgICAgfSwKICAgICAgdW5zdGFibGVfd3JhcENhbGxiYWNrOiBmdW5jdGlvbiAoYSkgewogICAgICAgIHZhciBiID0gbTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGMgPSBtOwogICAgICAgICAgbSA9IGI7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gYS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgbSA9IGM7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgdW5zdGFibGVfZ2V0Q3VycmVudFByaW9yaXR5TGV2ZWw6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gbTsKICAgICAgfSwKICAgICAgdW5zdGFibGVfc2hvdWxkWWllbGQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYSA9IHEoKTsKICAgICAgICBGKGEpOwogICAgICAgIHZhciBiID0gbihwKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKGIgIT09IGwgJiYKICAgICAgICAgICAgbnVsbCAhPT0gbCAmJgogICAgICAgICAgICBudWxsICE9PSBiICYmCiAgICAgICAgICAgIG51bGwgIT09IGIuY2FsbGJhY2sgJiYKICAgICAgICAgICAgYi5zdGFydFRpbWUgPD0gYSAmJgogICAgICAgICAgICBiLmV4cGlyYXRpb25UaW1lIDwgbC5leHBpcmF0aW9uVGltZSkgfHwKICAgICAgICAgIFcoKQogICAgICAgICk7CiAgICAgIH0sCiAgICAgIHVuc3RhYmxlX3JlcXVlc3RQYWludDogZiwKICAgICAgdW5zdGFibGVfY29udGludWVFeGVjdXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICB2IHx8IEggfHwgKCh2ID0gITApLCB6KFUpKTsKICAgICAgfSwKICAgICAgdW5zdGFibGVfcGF1c2VFeGVjdXRpb246IGZ1bmN0aW9uICgpIHt9LAogICAgICB1bnN0YWJsZV9nZXRGaXJzdENhbGxiYWNrTm9kZTogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBuKHApOwogICAgICB9LAogICAgICBnZXQgdW5zdGFibGVfbm93KCkgewogICAgICAgIHJldHVybiBxOwogICAgICB9LAogICAgICBnZXQgdW5zdGFibGVfZm9yY2VGcmFtZVJhdGUoKSB7CiAgICAgICAgcmV0dXJuIFg7CiAgICAgIH0sCiAgICAgIHVuc3RhYmxlX1Byb2ZpbGluZzogbnVsbCwKICAgIH0sCiAgICBTY2hlZHVsZXJUcmFjaW5nOiB7CiAgICAgIF9fcHJvdG9fXzogbnVsbCwKICAgICAgX19pbnRlcmFjdGlvbnNSZWY6IG51bGwsCiAgICAgIF9fc3Vic2NyaWJlclJlZjogbnVsbCwKICAgICAgdW5zdGFibGVfY2xlYXI6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEoKTsKICAgICAgfSwKICAgICAgdW5zdGFibGVfZ2V0Q3VycmVudDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LAogICAgICB1bnN0YWJsZV9nZXRUaHJlYWRJRDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiArK1FhOwogICAgICB9LAogICAgICB1bnN0YWJsZV90cmFjZTogZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICByZXR1cm4gYygpOwogICAgICB9LAogICAgICB1bnN0YWJsZV93cmFwOiBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiBhOwogICAgICB9LAogICAgICB1bnN0YWJsZV9zdWJzY3JpYmU6IGZ1bmN0aW9uIChhKSB7fSwKICAgICAgdW5zdGFibGVfdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIChhKSB7fSwKICAgIH0sCiAgfSk7CiAgZC5DaGlsZHJlbiA9IHsKICAgIG1hcDogZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgaWYgKG51bGwgPT0gYSkgcmV0dXJuIGE7CiAgICAgIHZhciBkID0gW107CiAgICAgIFIoYSwgZCwgbnVsbCwgYiwgYyk7CiAgICAgIHJldHVybiBkOwogICAgfSwKICAgIGZvckVhY2g6IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICAgIGlmIChudWxsID09IGEpIHJldHVybiBhOwogICAgICBiID0gamEobnVsbCwgbnVsbCwgYiwgYyk7CiAgICAgIFEoYSwgeWEsIGIpOwogICAgICBrYShiKTsKICAgIH0sCiAgICBjb3VudDogZnVuY3Rpb24gKGEpIHsKICAgICAgcmV0dXJuIFEoCiAgICAgICAgYSwKICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9LAogICAgICAgIG51bGwKICAgICAgKTsKICAgIH0sCiAgICB0b0FycmF5OiBmdW5jdGlvbiAoYSkgewogICAgICB2YXIgYiA9IFtdOwogICAgICBSKGEsIGIsIG51bGwsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGE7CiAgICAgIH0pOwogICAgICByZXR1cm4gYjsKICAgIH0sCiAgICBvbmx5OiBmdW5jdGlvbiAoYSkgewogICAgICBpZiAoIU4oYSkpIHRocm93IEVycm9yKHIoMTQzKSk7CiAgICAgIHJldHVybiBhOwogICAgfSwKICB9OwogIGQuQ29tcG9uZW50ID0gdzsKICBkLkZyYWdtZW50ID0gQWE7CiAgZC5Qcm9maWxlciA9IENhOwogIGQuUHVyZUNvbXBvbmVudCA9IEw7CiAgZC5TdHJpY3RNb2RlID0gQmE7CiAgZC5TdXNwZW5zZSA9IEdhOwogIGQuX19TRUNSRVRfSU5URVJOQUxTX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQgPSBCOwogIGQuY2xvbmVFbGVtZW50ID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgIGlmIChudWxsID09PSBhIHx8IHZvaWQgMCA9PT0gYSkgdGhyb3cgRXJyb3IocigyNjcsIGEpKTsKICAgIHZhciBkID0gSSh7fSwgYS5wcm9wcyksCiAgICAgIGUgPSBhLmtleSwKICAgICAgZiA9IGEucmVmLAogICAgICBtID0gYS5fb3duZXI7CiAgICBpZiAobnVsbCAhPSBiKSB7CiAgICAgIHZvaWQgMCAhPT0gYi5yZWYgJiYgKChmID0gYi5yZWYpLCAobSA9IE0uY3VycmVudCkpOwogICAgICB2b2lkIDAgIT09IGIua2V5ICYmIChlID0gIiIgKyBiLmtleSk7CiAgICAgIGlmIChhLnR5cGUgJiYgYS50eXBlLmRlZmF1bHRQcm9wcykgdmFyIGggPSBhLnR5cGUuZGVmYXVsdFByb3BzOwogICAgICBmb3IgKGsgaW4gYikKICAgICAgICBoYS5jYWxsKGIsIGspICYmCiAgICAgICAgICAhaWEuaGFzT3duUHJvcGVydHkoaykgJiYKICAgICAgICAgIChkW2tdID0gdm9pZCAwID09PSBiW2tdICYmIHZvaWQgMCAhPT0gaCA/IGhba10gOiBiW2tdKTsKICAgIH0KICAgIHZhciBrID0gYXJndW1lbnRzLmxlbmd0aCAtIDI7CiAgICBpZiAoMSA9PT0gaykgZC5jaGlsZHJlbiA9IGM7CiAgICBlbHNlIGlmICgxIDwgaykgewogICAgICBoID0gQXJyYXkoayk7CiAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgazsgbCsrKSBoW2xdID0gYXJndW1lbnRzW2wgKyAyXTsKICAgICAgZC5jaGlsZHJlbiA9IGg7CiAgICB9CiAgICByZXR1cm4geyAkJHR5cGVvZjogeCwgdHlwZTogYS50eXBlLCBrZXk6IGUsIHJlZjogZiwgcHJvcHM6IGQsIF9vd25lcjogbSB9OwogIH07CiAgZC5jcmVhdGVDb250ZXh0ID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIHZvaWQgMCA9PT0gYiAmJiAoYiA9IG51bGwpOwogICAgYSA9IHsKICAgICAgJCR0eXBlb2Y6IEVhLAogICAgICBfY2FsY3VsYXRlQ2hhbmdlZEJpdHM6IGIsCiAgICAgIF9jdXJyZW50VmFsdWU6IGEsCiAgICAgIF9jdXJyZW50VmFsdWUyOiBhLAogICAgICBfdGhyZWFkQ291bnQ6IDAsCiAgICAgIFByb3ZpZGVyOiBudWxsLAogICAgICBDb25zdW1lcjogbnVsbCwKICAgIH07CiAgICBhLlByb3ZpZGVyID0geyAkJHR5cGVvZjogRGEsIF9jb250ZXh0OiBhIH07CiAgICByZXR1cm4gKGEuQ29uc3VtZXIgPSBhKTsKICB9OwogIGQuY3JlYXRlRWxlbWVudCA9IGVhOwogIGQuY3JlYXRlRmFjdG9yeSA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IGVhLmJpbmQobnVsbCwgYSk7CiAgICBiLnR5cGUgPSBhOwogICAgcmV0dXJuIGI7CiAgfTsKICBkLmNyZWF0ZVJlZiA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7IGN1cnJlbnQ6IG51bGwgfTsKICB9OwogIGQuZm9yd2FyZFJlZiA9IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4geyAkJHR5cGVvZjogRmEsIHJlbmRlcjogYSB9OwogIH07CiAgZC5pc1ZhbGlkRWxlbWVudCA9IE47CiAgZC5sYXp5ID0gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiB7ICQkdHlwZW9mOiBJYSwgX2N0b3I6IGEsIF9zdGF0dXM6IC0xLCBfcmVzdWx0OiBudWxsIH07CiAgfTsKICBkLm1lbW8gPSBmdW5jdGlvbiAoYSwgYikgewogICAgcmV0dXJuIHsgJCR0eXBlb2Y6IEhhLCB0eXBlOiBhLCBjb21wYXJlOiB2b2lkIDAgPT09IGIgPyBudWxsIDogYiB9OwogIH07CiAgZC51c2VDYWxsYmFjayA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gdCgpLnVzZUNhbGxiYWNrKGEsIGIpOwogIH07CiAgZC51c2VDb250ZXh0ID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIHJldHVybiB0KCkudXNlQ29udGV4dChhLCBiKTsKICB9OwogIGQudXNlRGVidWdWYWx1ZSA9IGZ1bmN0aW9uIChhLCBiKSB7fTsKICBkLnVzZUVmZmVjdCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gdCgpLnVzZUVmZmVjdChhLCBiKTsKICB9OwogIGQudXNlSW1wZXJhdGl2ZUhhbmRsZSA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICByZXR1cm4gdCgpLnVzZUltcGVyYXRpdmVIYW5kbGUoYSwgYiwgYyk7CiAgfTsKICBkLnVzZUxheW91dEVmZmVjdCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gdCgpLnVzZUxheW91dEVmZmVjdChhLCBiKTsKICB9OwogIGQudXNlTWVtbyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gdCgpLnVzZU1lbW8oYSwgYik7CiAgfTsKICBkLnVzZVJlZHVjZXIgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgcmV0dXJuIHQoKS51c2VSZWR1Y2VyKGEsIGIsIGMpOwogIH07CiAgZC51c2VSZWYgPSBmdW5jdGlvbiAoYSkgewogICAgcmV0dXJuIHQoKS51c2VSZWYoYSk7CiAgfTsKICBkLnVzZVN0YXRlID0gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiB0KCkudXNlU3RhdGUoYSk7CiAgfTsKICBkLnZlcnNpb24gPSAiMTYuMTQuMCI7Cn0pOwoKLyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xNC4wCiAqIHJlYWN0LWRvbS5wcm9kdWN0aW9uLm1pbi5qcwogKgogKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy4KICoKICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlCiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICovCi8qCiBNb2Rlcm5penIgMy4wLjBwcmUgKEN1c3RvbSBCdWlsZCkgfCBNSVQKKi8KKCJ1c2Ugc3RyaWN0Iik7CihmdW5jdGlvbiAoSSwgZWEpIHsKICAib2JqZWN0IiA9PT0gdHlwZW9mIGV4cG9ydHMgJiYgInVuZGVmaW5lZCIgIT09IHR5cGVvZiBtb2R1bGUKICAgID8gZWEoZXhwb3J0cywgcmVxdWlyZSgicmVhY3QiKSkKICAgIDogImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICA/IGRlZmluZShbImV4cG9ydHMiLCAicmVhY3QiXSwgZWEpCiAgICA6ICgoSSA9IEkgfHwgc2VsZiksIGVhKChJLlJlYWN0RE9NID0ge30pLCBJLlJlYWN0KSk7Cn0pKHRoaXMsIGZ1bmN0aW9uIChJLCBlYSkgewogIGZ1bmN0aW9uIGsoYSkgewogICAgZm9yICgKICAgICAgdmFyIGIgPSAiaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2Vycm9yLWRlY29kZXIuaHRtbD9pbnZhcmlhbnQ9IiArIGEsCiAgICAgICAgYyA9IDE7CiAgICAgIGMgPCBhcmd1bWVudHMubGVuZ3RoOwogICAgICBjKysKICAgICkKICAgICAgYiArPSAiJmFyZ3NbXT0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1tjXSk7CiAgICByZXR1cm4gKAogICAgICAiTWluaWZpZWQgUmVhY3QgZXJyb3IgIyIgKwogICAgICBhICsKICAgICAgIjsgdmlzaXQgIiArCiAgICAgIGIgKwogICAgICAiIGZvciB0aGUgZnVsbCBtZXNzYWdlIG9yIHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCBmb3IgZnVsbCBlcnJvcnMgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4iCiAgICApOwogIH0KCiAgZnVuY3Rpb24gamkoYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgbSkgewogICAgeWIgPSAhMTsKICAgIGdjID0gbnVsbDsKICAgIGtpLmFwcGx5KGxpLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gbWkoYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgbSkgewogICAgamkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIGlmICh5YikgewogICAgICBpZiAoeWIpIHsKICAgICAgICB2YXIgbiA9IGdjOwogICAgICAgIHliID0gITE7CiAgICAgICAgZ2MgPSBudWxsOwogICAgICB9IGVsc2UgdGhyb3cgRXJyb3IoaygxOTgpKTsKICAgICAgaGMgfHwgKChoYyA9ICEwKSwgKHBkID0gbikpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbGYoYSwgYiwgYykgewogICAgdmFyIGQgPSBhLnR5cGUgfHwgInVua25vd24tZXZlbnQiOwogICAgYS5jdXJyZW50VGFyZ2V0ID0gbWYoYyk7CiAgICBtaShkLCBiLCB2b2lkIDAsIGEpOwogICAgYS5jdXJyZW50VGFyZ2V0ID0gbnVsbDsKICB9CgogIGZ1bmN0aW9uIG5mKCkgewogICAgaWYgKGljKQogICAgICBmb3IgKHZhciBhIGluIGNiKSB7CiAgICAgICAgdmFyIGIgPSBjYlthXSwKICAgICAgICAgIGMgPSBpYy5pbmRleE9mKGEpOwogICAgICAgIGlmICghKC0xIDwgYykpIHRocm93IEVycm9yKGsoOTYsIGEpKTsKICAgICAgICBpZiAoIWpjW2NdKSB7CiAgICAgICAgICBpZiAoIWIuZXh0cmFjdEV2ZW50cykgdGhyb3cgRXJyb3Ioayg5NywgYSkpOwogICAgICAgICAgamNbY10gPSBiOwogICAgICAgICAgYyA9IGIuZXZlbnRUeXBlczsKICAgICAgICAgIGZvciAodmFyIGQgaW4gYykgewogICAgICAgICAgICB2YXIgZSA9IHZvaWQgMDsKICAgICAgICAgICAgdmFyIGYgPSBjW2RdLAogICAgICAgICAgICAgIGcgPSBiLAogICAgICAgICAgICAgIGggPSBkOwogICAgICAgICAgICBpZiAocWQuaGFzT3duUHJvcGVydHkoaCkpIHRocm93IEVycm9yKGsoOTksIGgpKTsKICAgICAgICAgICAgcWRbaF0gPSBmOwogICAgICAgICAgICB2YXIgbSA9IGYucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM7CiAgICAgICAgICAgIGlmIChtKSB7CiAgICAgICAgICAgICAgZm9yIChlIGluIG0pIG0uaGFzT3duUHJvcGVydHkoZSkgJiYgb2YobVtlXSwgZywgaCk7CiAgICAgICAgICAgICAgZSA9ICEwOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICBmLnJlZ2lzdHJhdGlvbk5hbWUKICAgICAgICAgICAgICAgID8gKG9mKGYucmVnaXN0cmF0aW9uTmFtZSwgZywgaCksIChlID0gITApKQogICAgICAgICAgICAgICAgOiAoZSA9ICExKTsKICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBFcnJvcihrKDk4LCBkLCBhKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgfQoKICBmdW5jdGlvbiBvZihhLCBiLCBjKSB7CiAgICBpZiAoZGJbYV0pIHRocm93IEVycm9yKGsoMTAwLCBhKSk7CiAgICBkYlthXSA9IGI7CiAgICByZFthXSA9IGIuZXZlbnRUeXBlc1tjXS5kZXBlbmRlbmNpZXM7CiAgfQoKICBmdW5jdGlvbiBwZihhKSB7CiAgICB2YXIgYiA9ICExLAogICAgICBjOwogICAgZm9yIChjIGluIGEpCiAgICAgIGlmIChhLmhhc093blByb3BlcnR5KGMpKSB7CiAgICAgICAgdmFyIGQgPSBhW2NdOwogICAgICAgIGlmICghY2IuaGFzT3duUHJvcGVydHkoYykgfHwgY2JbY10gIT09IGQpIHsKICAgICAgICAgIGlmIChjYltjXSkgdGhyb3cgRXJyb3IoaygxMDIsIGMpKTsKICAgICAgICAgIGNiW2NdID0gZDsKICAgICAgICAgIGIgPSAhMDsKICAgICAgICB9CiAgICAgIH0KICAgIGIgJiYgbmYoKTsKICB9CgogIGZ1bmN0aW9uIHFmKGEpIHsKICAgIGlmICgoYSA9IHJmKGEpKSkgewogICAgICBpZiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIHNkKSB0aHJvdyBFcnJvcihrKDI4MCkpOwogICAgICB2YXIgYiA9IGEuc3RhdGVOb2RlOwogICAgICBiICYmICgoYiA9IHRkKGIpKSwgc2QoYS5zdGF0ZU5vZGUsIGEudHlwZSwgYikpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gc2YoYSkgewogICAgZWIgPyAoZmIgPyBmYi5wdXNoKGEpIDogKGZiID0gW2FdKSkgOiAoZWIgPSBhKTsKICB9CgogIGZ1bmN0aW9uIHRmKCkgewogICAgaWYgKGViKSB7CiAgICAgIHZhciBhID0gZWIsCiAgICAgICAgYiA9IGZiOwogICAgICBmYiA9IGViID0gbnVsbDsKICAgICAgcWYoYSk7CiAgICAgIGlmIChiKSBmb3IgKGEgPSAwOyBhIDwgYi5sZW5ndGg7IGErKykgcWYoYlthXSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB1ZCgpIHsKICAgIGlmIChudWxsICE9PSBlYiB8fCBudWxsICE9PSBmYikgdmQoKSwgdGYoKTsKICB9CgogIGZ1bmN0aW9uIHVmKGEsIGIsIGMpIHsKICAgIGlmICh3ZCkgcmV0dXJuIGEoYiwgYyk7CiAgICB3ZCA9ICEwOwogICAgdHJ5IHsKICAgICAgcmV0dXJuIHZmKGEsIGIsIGMpOwogICAgfSBmaW5hbGx5IHsKICAgICAgKHdkID0gITEpLCB1ZCgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbmkoYSkgewogICAgaWYgKHdmLmNhbGwoeGYsIGEpKSByZXR1cm4gITA7CiAgICBpZiAod2YuY2FsbCh5ZiwgYSkpIHJldHVybiAhMTsKICAgIGlmIChvaS50ZXN0KGEpKSByZXR1cm4gKHhmW2FdID0gITApOwogICAgeWZbYV0gPSAhMDsKICAgIHJldHVybiAhMTsKICB9CgogIGZ1bmN0aW9uIHBpKGEsIGIsIGMsIGQpIHsKICAgIGlmIChudWxsICE9PSBjICYmIDAgPT09IGMudHlwZSkgcmV0dXJuICExOwogICAgc3dpdGNoICh0eXBlb2YgYikgewogICAgICBjYXNlICJmdW5jdGlvbiI6CiAgICAgIGNhc2UgInN5bWJvbCI6CiAgICAgICAgcmV0dXJuICEwOwogICAgICBjYXNlICJib29sZWFuIjoKICAgICAgICBpZiAoZCkgcmV0dXJuICExOwogICAgICAgIGlmIChudWxsICE9PSBjKSByZXR1cm4gIWMuYWNjZXB0c0Jvb2xlYW5zOwogICAgICAgIGEgPSBhLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCwgNSk7CiAgICAgICAgcmV0dXJuICJkYXRhLSIgIT09IGEgJiYgImFyaWEtIiAhPT0gYTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gITE7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBxaShhLCBiLCBjLCBkKSB7CiAgICBpZiAobnVsbCA9PT0gYiB8fCAidW5kZWZpbmVkIiA9PT0gdHlwZW9mIGIgfHwgcGkoYSwgYiwgYywgZCkpIHJldHVybiAhMDsKICAgIGlmIChkKSByZXR1cm4gITE7CiAgICBpZiAobnVsbCAhPT0gYykKICAgICAgc3dpdGNoIChjLnR5cGUpIHsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXR1cm4gIWI7CiAgICAgICAgY2FzZSA0OgogICAgICAgICAgcmV0dXJuICExID09PSBiOwogICAgICAgIGNhc2UgNToKICAgICAgICAgIHJldHVybiBpc05hTihiKTsKICAgICAgICBjYXNlIDY6CiAgICAgICAgICByZXR1cm4gaXNOYU4oYikgfHwgMSA+IGI7CiAgICAgIH0KICAgIHJldHVybiAhMTsKICB9CgogIGZ1bmN0aW9uIEwoYSwgYiwgYywgZCwgZSwgZikgewogICAgdGhpcy5hY2NlcHRzQm9vbGVhbnMgPSAyID09PSBiIHx8IDMgPT09IGIgfHwgNCA9PT0gYjsKICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9IGQ7CiAgICB0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZSA9IGU7CiAgICB0aGlzLm11c3RVc2VQcm9wZXJ0eSA9IGM7CiAgICB0aGlzLnByb3BlcnR5TmFtZSA9IGE7CiAgICB0aGlzLnR5cGUgPSBiOwogICAgdGhpcy5zYW5pdGl6ZVVSTCA9IGY7CiAgfQoKICBmdW5jdGlvbiB4ZChhLCBiLCBjLCBkKSB7CiAgICB2YXIgZSA9IEUuaGFzT3duUHJvcGVydHkoYikgPyBFW2JdIDogbnVsbDsKICAgIHZhciBmID0KICAgICAgbnVsbCAhPT0gZQogICAgICAgID8gMCA9PT0gZS50eXBlCiAgICAgICAgOiBkCiAgICAgICAgPyAhMQogICAgICAgIDogISgyIDwgYi5sZW5ndGgpIHx8CiAgICAgICAgICAoIm8iICE9PSBiWzBdICYmICJPIiAhPT0gYlswXSkgfHwKICAgICAgICAgICgibiIgIT09IGJbMV0gJiYgIk4iICE9PSBiWzFdKQogICAgICAgID8gITEKICAgICAgICA6ICEwOwogICAgZiB8fAogICAgICAocWkoYiwgYywgZSwgZCkgJiYgKGMgPSBudWxsKSwKICAgICAgZCB8fCBudWxsID09PSBlCiAgICAgICAgPyBuaShiKSAmJgogICAgICAgICAgKG51bGwgPT09IGMgPyBhLnJlbW92ZUF0dHJpYnV0ZShiKSA6IGEuc2V0QXR0cmlidXRlKGIsICIiICsgYykpCiAgICAgICAgOiBlLm11c3RVc2VQcm9wZXJ0eQogICAgICAgID8gKGFbZS5wcm9wZXJ0eU5hbWVdID0gbnVsbCA9PT0gYyA/ICgzID09PSBlLnR5cGUgPyAhMSA6ICIiKSA6IGMpCiAgICAgICAgOiAoKGIgPSBlLmF0dHJpYnV0ZU5hbWUpLAogICAgICAgICAgKGQgPSBlLmF0dHJpYnV0ZU5hbWVzcGFjZSksCiAgICAgICAgICBudWxsID09PSBjCiAgICAgICAgICAgID8gYS5yZW1vdmVBdHRyaWJ1dGUoYikKICAgICAgICAgICAgOiAoKGUgPSBlLnR5cGUpLAogICAgICAgICAgICAgIChjID0gMyA9PT0gZSB8fCAoNCA9PT0gZSAmJiAhMCA9PT0gYykgPyAiIiA6ICIiICsgYyksCiAgICAgICAgICAgICAgZCA/IGEuc2V0QXR0cmlidXRlTlMoZCwgYiwgYykgOiBhLnNldEF0dHJpYnV0ZShiLCBjKSkpKTsKICB9CgogIGZ1bmN0aW9uIHpiKGEpIHsKICAgIGlmIChudWxsID09PSBhIHx8ICJvYmplY3QiICE9PSB0eXBlb2YgYSkgcmV0dXJuIG51bGw7CiAgICBhID0gKHpmICYmIGFbemZdKSB8fCBhWyJAQGl0ZXJhdG9yIl07CiAgICByZXR1cm4gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGEgPyBhIDogbnVsbDsKICB9CgogIGZ1bmN0aW9uIHJpKGEpIHsKICAgIGlmICgtMSA9PT0gYS5fc3RhdHVzKSB7CiAgICAgIGEuX3N0YXR1cyA9IDA7CiAgICAgIHZhciBiID0gYS5fY3RvcjsKICAgICAgYiA9IGIoKTsKICAgICAgYS5fcmVzdWx0ID0gYjsKICAgICAgYi50aGVuKAogICAgICAgIGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAwID09PSBhLl9zdGF0dXMgJiYKICAgICAgICAgICAgKChiID0gYi5kZWZhdWx0KSwgKGEuX3N0YXR1cyA9IDEpLCAoYS5fcmVzdWx0ID0gYikpOwogICAgICAgIH0sCiAgICAgICAgZnVuY3Rpb24gKGIpIHsKICAgICAgICAgIDAgPT09IGEuX3N0YXR1cyAmJiAoKGEuX3N0YXR1cyA9IDIpLCAoYS5fcmVzdWx0ID0gYikpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG5hKGEpIHsKICAgIGlmIChudWxsID09IGEpIHJldHVybiBudWxsOwogICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBhKSByZXR1cm4gYS5kaXNwbGF5TmFtZSB8fCBhLm5hbWUgfHwgbnVsbDsKICAgIGlmICgic3RyaW5nIiA9PT0gdHlwZW9mIGEpIHJldHVybiBhOwogICAgc3dpdGNoIChhKSB7CiAgICAgIGNhc2UgTWE6CiAgICAgICAgcmV0dXJuICJGcmFnbWVudCI7CiAgICAgIGNhc2UgZ2I6CiAgICAgICAgcmV0dXJuICJQb3J0YWwiOwogICAgICBjYXNlIGtjOgogICAgICAgIHJldHVybiAiUHJvZmlsZXIiOwogICAgICBjYXNlIEFmOgogICAgICAgIHJldHVybiAiU3RyaWN0TW9kZSI7CiAgICAgIGNhc2UgbGM6CiAgICAgICAgcmV0dXJuICJTdXNwZW5zZSI7CiAgICAgIGNhc2UgeWQ6CiAgICAgICAgcmV0dXJuICJTdXNwZW5zZUxpc3QiOwogICAgfQogICAgaWYgKCJvYmplY3QiID09PSB0eXBlb2YgYSkKICAgICAgc3dpdGNoIChhLiQkdHlwZW9mKSB7CiAgICAgICAgY2FzZSBCZjoKICAgICAgICAgIHJldHVybiAiQ29udGV4dC5Db25zdW1lciI7CiAgICAgICAgY2FzZSBDZjoKICAgICAgICAgIHJldHVybiAiQ29udGV4dC5Qcm92aWRlciI7CiAgICAgICAgY2FzZSB6ZDoKICAgICAgICAgIHZhciBiID0gYS5yZW5kZXI7CiAgICAgICAgICBiID0gYi5kaXNwbGF5TmFtZSB8fCBiLm5hbWUgfHwgIiI7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBhLmRpc3BsYXlOYW1lIHx8ICgiIiAhPT0gYiA/ICJGb3J3YXJkUmVmKCIgKyBiICsgIikiIDogIkZvcndhcmRSZWYiKQogICAgICAgICAgKTsKICAgICAgICBjYXNlIEFkOgogICAgICAgICAgcmV0dXJuIG5hKGEudHlwZSk7CiAgICAgICAgY2FzZSBEZjoKICAgICAgICAgIHJldHVybiBuYShhLnJlbmRlcik7CiAgICAgICAgY2FzZSBFZjoKICAgICAgICAgIGlmICgoYSA9IDEgPT09IGEuX3N0YXR1cyA/IGEuX3Jlc3VsdCA6IG51bGwpKSByZXR1cm4gbmEoYSk7CiAgICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gQmQoYSkgewogICAgdmFyIGIgPSAiIjsKICAgIGRvIHsKICAgICAgYTogc3dpdGNoIChhLnRhZykgewogICAgICAgIGNhc2UgMzoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgY2FzZSA2OgogICAgICAgIGNhc2UgNzoKICAgICAgICBjYXNlIDEwOgogICAgICAgIGNhc2UgOToKICAgICAgICAgIHZhciBjID0gIiI7CiAgICAgICAgICBicmVhayBhOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB2YXIgZCA9IGEuX2RlYnVnT3duZXIsCiAgICAgICAgICAgIGUgPSBhLl9kZWJ1Z1NvdXJjZSwKICAgICAgICAgICAgZiA9IG5hKGEudHlwZSk7CiAgICAgICAgICBjID0gbnVsbDsKICAgICAgICAgIGQgJiYgKGMgPSBuYShkLnR5cGUpKTsKICAgICAgICAgIGQgPSBmOwogICAgICAgICAgZiA9ICIiOwogICAgICAgICAgZQogICAgICAgICAgICA/IChmID0KICAgICAgICAgICAgICAgICIgKGF0ICIgKyBlLmZpbGVOYW1lLnJlcGxhY2Uoc2ksICIiKSArICI6IiArIGUubGluZU51bWJlciArICIpIikKICAgICAgICAgICAgOiBjICYmIChmID0gIiAoY3JlYXRlZCBieSAiICsgYyArICIpIik7CiAgICAgICAgICBjID0gIlxuICAgIGluICIgKyAoZCB8fCAiVW5rbm93biIpICsgZjsKICAgICAgfQogICAgICBiICs9IGM7CiAgICAgIGEgPSBhLnJldHVybjsKICAgIH0gd2hpbGUgKGEpOwogICAgcmV0dXJuIGI7CiAgfQoKICBmdW5jdGlvbiB2YShhKSB7CiAgICBzd2l0Y2ggKHR5cGVvZiBhKSB7CiAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICBjYXNlICJudW1iZXIiOgogICAgICBjYXNlICJvYmplY3QiOgogICAgICBjYXNlICJzdHJpbmciOgogICAgICBjYXNlICJ1bmRlZmluZWQiOgogICAgICAgIHJldHVybiBhOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiAiIjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIEZmKGEpIHsKICAgIHZhciBiID0gYS50eXBlOwogICAgcmV0dXJuICgKICAgICAgKGEgPSBhLm5vZGVOYW1lKSAmJgogICAgICAiaW5wdXQiID09PSBhLnRvTG93ZXJDYXNlKCkgJiYKICAgICAgKCJjaGVja2JveCIgPT09IGIgfHwgInJhZGlvIiA9PT0gYikKICAgICk7CiAgfQoKICBmdW5jdGlvbiB0aShhKSB7CiAgICB2YXIgYiA9IEZmKGEpID8gImNoZWNrZWQiIDogInZhbHVlIiwKICAgICAgYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGIpLAogICAgICBkID0gIiIgKyBhW2JdOwogICAgaWYgKAogICAgICAhYS5oYXNPd25Qcm9wZXJ0eShiKSAmJgogICAgICAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGMgJiYKICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGMuZ2V0ICYmCiAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBjLnNldAogICAgKSB7CiAgICAgIHZhciBlID0gYy5nZXQsCiAgICAgICAgZiA9IGMuc2V0OwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgYiwgewogICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gZS5jYWxsKHRoaXMpOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgZCA9ICIiICsgYTsKICAgICAgICAgIGYuY2FsbCh0aGlzLCBhKTsKICAgICAgICB9LAogICAgICB9KTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGIsIHsgZW51bWVyYWJsZTogYy5lbnVtZXJhYmxlIH0pOwogICAgICByZXR1cm4gewogICAgICAgIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gZDsKICAgICAgICB9LAogICAgICAgIHNldFZhbHVlOiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgZCA9ICIiICsgYTsKICAgICAgICB9LAogICAgICAgIHN0b3BUcmFja2luZzogZnVuY3Rpb24gKCkgewogICAgICAgICAgYS5fdmFsdWVUcmFja2VyID0gbnVsbDsKICAgICAgICAgIGRlbGV0ZSBhW2JdOwogICAgICAgIH0sCiAgICAgIH07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtYyhhKSB7CiAgICBhLl92YWx1ZVRyYWNrZXIgfHwgKGEuX3ZhbHVlVHJhY2tlciA9IHRpKGEpKTsKICB9CgogIGZ1bmN0aW9uIEdmKGEpIHsKICAgIGlmICghYSkgcmV0dXJuICExOwogICAgdmFyIGIgPSBhLl92YWx1ZVRyYWNrZXI7CiAgICBpZiAoIWIpIHJldHVybiAhMDsKICAgIHZhciBjID0gYi5nZXRWYWx1ZSgpOwogICAgdmFyIGQgPSAiIjsKICAgIGEgJiYgKGQgPSBGZihhKSA/IChhLmNoZWNrZWQgPyAidHJ1ZSIgOiAiZmFsc2UiKSA6IGEudmFsdWUpOwogICAgYSA9IGQ7CiAgICByZXR1cm4gYSAhPT0gYyA/IChiLnNldFZhbHVlKGEpLCAhMCkgOiAhMTsKICB9CgogIGZ1bmN0aW9uIENkKGEsIGIpIHsKICAgIHZhciBjID0gYi5jaGVja2VkOwogICAgcmV0dXJuIE0oe30sIGIsIHsKICAgICAgZGVmYXVsdENoZWNrZWQ6IHZvaWQgMCwKICAgICAgZGVmYXVsdFZhbHVlOiB2b2lkIDAsCiAgICAgIHZhbHVlOiB2b2lkIDAsCiAgICAgIGNoZWNrZWQ6IG51bGwgIT0gYyA/IGMgOiBhLl93cmFwcGVyU3RhdGUuaW5pdGlhbENoZWNrZWQsCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIEhmKGEsIGIpIHsKICAgIHZhciBjID0gbnVsbCA9PSBiLmRlZmF1bHRWYWx1ZSA/ICIiIDogYi5kZWZhdWx0VmFsdWUsCiAgICAgIGQgPSBudWxsICE9IGIuY2hlY2tlZCA/IGIuY2hlY2tlZCA6IGIuZGVmYXVsdENoZWNrZWQ7CiAgICBjID0gdmEobnVsbCAhPSBiLnZhbHVlID8gYi52YWx1ZSA6IGMpOwogICAgYS5fd3JhcHBlclN0YXRlID0gewogICAgICBpbml0aWFsQ2hlY2tlZDogZCwKICAgICAgaW5pdGlhbFZhbHVlOiBjLAogICAgICBjb250cm9sbGVkOgogICAgICAgICJjaGVja2JveCIgPT09IGIudHlwZSB8fCAicmFkaW8iID09PSBiLnR5cGUKICAgICAgICAgID8gbnVsbCAhPSBiLmNoZWNrZWQKICAgICAgICAgIDogbnVsbCAhPSBiLnZhbHVlLAogICAgfTsKICB9CgogIGZ1bmN0aW9uIElmKGEsIGIpIHsKICAgIGIgPSBiLmNoZWNrZWQ7CiAgICBudWxsICE9IGIgJiYgeGQoYSwgImNoZWNrZWQiLCBiLCAhMSk7CiAgfQoKICBmdW5jdGlvbiBEZChhLCBiKSB7CiAgICBJZihhLCBiKTsKICAgIHZhciBjID0gdmEoYi52YWx1ZSksCiAgICAgIGQgPSBiLnR5cGU7CiAgICBpZiAobnVsbCAhPSBjKQogICAgICBpZiAoIm51bWJlciIgPT09IGQpIHsKICAgICAgICBpZiAoKDAgPT09IGMgJiYgIiIgPT09IGEudmFsdWUpIHx8IGEudmFsdWUgIT0gYykgYS52YWx1ZSA9ICIiICsgYzsKICAgICAgfSBlbHNlIGEudmFsdWUgIT09ICIiICsgYyAmJiAoYS52YWx1ZSA9ICIiICsgYyk7CiAgICBlbHNlIGlmICgic3VibWl0IiA9PT0gZCB8fCAicmVzZXQiID09PSBkKSB7CiAgICAgIGEucmVtb3ZlQXR0cmlidXRlKCJ2YWx1ZSIpOwogICAgICByZXR1cm47CiAgICB9CiAgICBiLmhhc093blByb3BlcnR5KCJ2YWx1ZSIpCiAgICAgID8gRWQoYSwgYi50eXBlLCBjKQogICAgICA6IGIuaGFzT3duUHJvcGVydHkoImRlZmF1bHRWYWx1ZSIpICYmIEVkKGEsIGIudHlwZSwgdmEoYi5kZWZhdWx0VmFsdWUpKTsKICAgIG51bGwgPT0gYi5jaGVja2VkICYmCiAgICAgIG51bGwgIT0gYi5kZWZhdWx0Q2hlY2tlZCAmJgogICAgICAoYS5kZWZhdWx0Q2hlY2tlZCA9ICEhYi5kZWZhdWx0Q2hlY2tlZCk7CiAgfQoKICBmdW5jdGlvbiBKZihhLCBiLCBjKSB7CiAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eSgidmFsdWUiKSB8fCBiLmhhc093blByb3BlcnR5KCJkZWZhdWx0VmFsdWUiKSkgewogICAgICB2YXIgZCA9IGIudHlwZTsKICAgICAgaWYgKAogICAgICAgICEoCiAgICAgICAgICAoInN1Ym1pdCIgIT09IGQgJiYgInJlc2V0IiAhPT0gZCkgfHwKICAgICAgICAgICh2b2lkIDAgIT09IGIudmFsdWUgJiYgbnVsbCAhPT0gYi52YWx1ZSkKICAgICAgICApCiAgICAgICkKICAgICAgICByZXR1cm47CiAgICAgIGIgPSAiIiArIGEuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWU7CiAgICAgIGMgfHwgYiA9PT0gYS52YWx1ZSB8fCAoYS52YWx1ZSA9IGIpOwogICAgICBhLmRlZmF1bHRWYWx1ZSA9IGI7CiAgICB9CiAgICBjID0gYS5uYW1lOwogICAgIiIgIT09IGMgJiYgKGEubmFtZSA9ICIiKTsKICAgIGEuZGVmYXVsdENoZWNrZWQgPSAhIWEuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZDsKICAgICIiICE9PSBjICYmIChhLm5hbWUgPSBjKTsKICB9CgogIGZ1bmN0aW9uIEVkKGEsIGIsIGMpIHsKICAgIGlmICgibnVtYmVyIiAhPT0gYiB8fCBhLm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gYSkKICAgICAgbnVsbCA9PSBjCiAgICAgICAgPyAoYS5kZWZhdWx0VmFsdWUgPSAiIiArIGEuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWUpCiAgICAgICAgOiBhLmRlZmF1bHRWYWx1ZSAhPT0gIiIgKyBjICYmIChhLmRlZmF1bHRWYWx1ZSA9ICIiICsgYyk7CiAgfQoKICBmdW5jdGlvbiB1aShhKSB7CiAgICB2YXIgYiA9ICIiOwogICAgZWEuQ2hpbGRyZW4uZm9yRWFjaChhLCBmdW5jdGlvbiAoYSkgewogICAgICBudWxsICE9IGEgJiYgKGIgKz0gYSk7CiAgICB9KTsKICAgIHJldHVybiBiOwogIH0KCiAgZnVuY3Rpb24gRmQoYSwgYikgewogICAgYSA9IE0oeyBjaGlsZHJlbjogdm9pZCAwIH0sIGIpOwogICAgaWYgKChiID0gdWkoYi5jaGlsZHJlbikpKSBhLmNoaWxkcmVuID0gYjsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gaGIoYSwgYiwgYywgZCkgewogICAgYSA9IGEub3B0aW9uczsKICAgIGlmIChiKSB7CiAgICAgIGIgPSB7fTsKICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBjLmxlbmd0aDsgZSsrKSBiWyIkIiArIGNbZV1dID0gITA7CiAgICAgIGZvciAoYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKQogICAgICAgIChlID0gYi5oYXNPd25Qcm9wZXJ0eSgiJCIgKyBhW2NdLnZhbHVlKSksCiAgICAgICAgICBhW2NdLnNlbGVjdGVkICE9PSBlICYmIChhW2NdLnNlbGVjdGVkID0gZSksCiAgICAgICAgICBlICYmIGQgJiYgKGFbY10uZGVmYXVsdFNlbGVjdGVkID0gITApOwogICAgfSBlbHNlIHsKICAgICAgYyA9ICIiICsgdmEoYyk7CiAgICAgIGIgPSBudWxsOwogICAgICBmb3IgKGUgPSAwOyBlIDwgYS5sZW5ndGg7IGUrKykgewogICAgICAgIGlmIChhW2VdLnZhbHVlID09PSBjKSB7CiAgICAgICAgICBhW2VdLnNlbGVjdGVkID0gITA7CiAgICAgICAgICBkICYmIChhW2VdLmRlZmF1bHRTZWxlY3RlZCA9ICEwKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbnVsbCAhPT0gYiB8fCBhW2VdLmRpc2FibGVkIHx8IChiID0gYVtlXSk7CiAgICAgIH0KICAgICAgbnVsbCAhPT0gYiAmJiAoYi5zZWxlY3RlZCA9ICEwKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIEdkKGEsIGIpIHsKICAgIGlmIChudWxsICE9IGIuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwpIHRocm93IEVycm9yKGsoOTEpKTsKICAgIHJldHVybiBNKHt9LCBiLCB7CiAgICAgIHZhbHVlOiB2b2lkIDAsCiAgICAgIGRlZmF1bHRWYWx1ZTogdm9pZCAwLAogICAgICBjaGlsZHJlbjogIiIgKyBhLl93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlLAogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBLZihhLCBiKSB7CiAgICB2YXIgYyA9IGIudmFsdWU7CiAgICBpZiAobnVsbCA9PSBjKSB7CiAgICAgIGMgPSBiLmNoaWxkcmVuOwogICAgICBiID0gYi5kZWZhdWx0VmFsdWU7CiAgICAgIGlmIChudWxsICE9IGMpIHsKICAgICAgICBpZiAobnVsbCAhPSBiKSB0aHJvdyBFcnJvcihrKDkyKSk7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYykpIHsKICAgICAgICAgIGlmICghKDEgPj0gYy5sZW5ndGgpKSB0aHJvdyBFcnJvcihrKDkzKSk7CiAgICAgICAgICBjID0gY1swXTsKICAgICAgICB9CiAgICAgICAgYiA9IGM7CiAgICAgIH0KICAgICAgbnVsbCA9PSBiICYmIChiID0gIiIpOwogICAgICBjID0gYjsKICAgIH0KICAgIGEuX3dyYXBwZXJTdGF0ZSA9IHsgaW5pdGlhbFZhbHVlOiB2YShjKSB9OwogIH0KCiAgZnVuY3Rpb24gTGYoYSwgYikgewogICAgdmFyIGMgPSB2YShiLnZhbHVlKSwKICAgICAgZCA9IHZhKGIuZGVmYXVsdFZhbHVlKTsKICAgIG51bGwgIT0gYyAmJgogICAgICAoKGMgPSAiIiArIGMpLAogICAgICBjICE9PSBhLnZhbHVlICYmIChhLnZhbHVlID0gYyksCiAgICAgIG51bGwgPT0gYi5kZWZhdWx0VmFsdWUgJiYgYS5kZWZhdWx0VmFsdWUgIT09IGMgJiYgKGEuZGVmYXVsdFZhbHVlID0gYykpOwogICAgbnVsbCAhPSBkICYmIChhLmRlZmF1bHRWYWx1ZSA9ICIiICsgZCk7CiAgfQoKICBmdW5jdGlvbiBNZihhLCBiKSB7CiAgICBiID0gYS50ZXh0Q29udGVudDsKICAgIGIgPT09IGEuX3dyYXBwZXJTdGF0ZS5pbml0aWFsVmFsdWUgJiYKICAgICAgIiIgIT09IGIgJiYKICAgICAgbnVsbCAhPT0gYiAmJgogICAgICAoYS52YWx1ZSA9IGIpOwogIH0KCiAgZnVuY3Rpb24gTmYoYSkgewogICAgc3dpdGNoIChhKSB7CiAgICAgIGNhc2UgInN2ZyI6CiAgICAgICAgcmV0dXJuICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI7CiAgICAgIGNhc2UgIm1hdGgiOgogICAgICAgIHJldHVybiAiaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoL01hdGhNTCI7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIEhkKGEsIGIpIHsKICAgIHJldHVybiBudWxsID09IGEgfHwgImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiID09PSBhCiAgICAgID8gTmYoYikKICAgICAgOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciID09PSBhICYmICJmb3JlaWduT2JqZWN0IiA9PT0gYgogICAgICA/ICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIgogICAgICA6IGE7CiAgfQoKICBmdW5jdGlvbiBuYyhhLCBiKSB7CiAgICB2YXIgYyA9IHt9OwogICAgY1thLnRvTG93ZXJDYXNlKCldID0gYi50b0xvd2VyQ2FzZSgpOwogICAgY1siV2Via2l0IiArIGFdID0gIndlYmtpdCIgKyBiOwogICAgY1siTW96IiArIGFdID0gIm1veiIgKyBiOwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBvYyhhKSB7CiAgICBpZiAoSWRbYV0pIHJldHVybiBJZFthXTsKICAgIGlmICghaWJbYV0pIHJldHVybiBhOwogICAgdmFyIGIgPSBpYlthXSwKICAgICAgYzsKICAgIGZvciAoYyBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShjKSAmJiBjIGluIE9mKSByZXR1cm4gKElkW2FdID0gYltjXSk7CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIEpkKGEpIHsKICAgIHZhciBiID0gUGYuZ2V0KGEpOwogICAgdm9pZCAwID09PSBiICYmICgoYiA9IG5ldyBNYXAoKSksIFBmLnNldChhLCBiKSk7CiAgICByZXR1cm4gYjsKICB9CgogIGZ1bmN0aW9uIE5hKGEpIHsKICAgIHZhciBiID0gYSwKICAgICAgYyA9IGE7CiAgICBpZiAoYS5hbHRlcm5hdGUpIGZvciAoOyBiLnJldHVybjsgKSBiID0gYi5yZXR1cm47CiAgICBlbHNlIHsKICAgICAgYSA9IGI7CiAgICAgIGRvIChiID0gYSksIDAgIT09IChiLmVmZmVjdFRhZyAmIDEwMjYpICYmIChjID0gYi5yZXR1cm4pLCAoYSA9IGIucmV0dXJuKTsKICAgICAgd2hpbGUgKGEpOwogICAgfQogICAgcmV0dXJuIDMgPT09IGIudGFnID8gYyA6IG51bGw7CiAgfQoKICBmdW5jdGlvbiBRZihhKSB7CiAgICBpZiAoMTMgPT09IGEudGFnKSB7CiAgICAgIHZhciBiID0gYS5tZW1vaXplZFN0YXRlOwogICAgICBudWxsID09PSBiICYmICgoYSA9IGEuYWx0ZXJuYXRlKSwgbnVsbCAhPT0gYSAmJiAoYiA9IGEubWVtb2l6ZWRTdGF0ZSkpOwogICAgICBpZiAobnVsbCAhPT0gYikgcmV0dXJuIGIuZGVoeWRyYXRlZDsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gUmYoYSkgewogICAgaWYgKE5hKGEpICE9PSBhKSB0aHJvdyBFcnJvcihrKDE4OCkpOwogIH0KCiAgZnVuY3Rpb24gdmkoYSkgewogICAgdmFyIGIgPSBhLmFsdGVybmF0ZTsKICAgIGlmICghYikgewogICAgICBiID0gTmEoYSk7CiAgICAgIGlmIChudWxsID09PSBiKSB0aHJvdyBFcnJvcihrKDE4OCkpOwogICAgICByZXR1cm4gYiAhPT0gYSA/IG51bGwgOiBhOwogICAgfQogICAgZm9yICh2YXIgYyA9IGEsIGQgPSBiOyA7ICkgewogICAgICB2YXIgZSA9IGMucmV0dXJuOwogICAgICBpZiAobnVsbCA9PT0gZSkgYnJlYWs7CiAgICAgIHZhciBmID0gZS5hbHRlcm5hdGU7CiAgICAgIGlmIChudWxsID09PSBmKSB7CiAgICAgICAgZCA9IGUucmV0dXJuOwogICAgICAgIGlmIChudWxsICE9PSBkKSB7CiAgICAgICAgICBjID0gZDsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgfQogICAgICBpZiAoZS5jaGlsZCA9PT0gZi5jaGlsZCkgewogICAgICAgIGZvciAoZiA9IGUuY2hpbGQ7IGY7ICkgewogICAgICAgICAgaWYgKGYgPT09IGMpIHJldHVybiBSZihlKSwgYTsKICAgICAgICAgIGlmIChmID09PSBkKSByZXR1cm4gUmYoZSksIGI7CiAgICAgICAgICBmID0gZi5zaWJsaW5nOwogICAgICAgIH0KICAgICAgICB0aHJvdyBFcnJvcihrKDE4OCkpOwogICAgICB9CiAgICAgIGlmIChjLnJldHVybiAhPT0gZC5yZXR1cm4pIChjID0gZSksIChkID0gZik7CiAgICAgIGVsc2UgewogICAgICAgIGZvciAodmFyIGcgPSAhMSwgaCA9IGUuY2hpbGQ7IGg7ICkgewogICAgICAgICAgaWYgKGggPT09IGMpIHsKICAgICAgICAgICAgZyA9ICEwOwogICAgICAgICAgICBjID0gZTsKICAgICAgICAgICAgZCA9IGY7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGggPT09IGQpIHsKICAgICAgICAgICAgZyA9ICEwOwogICAgICAgICAgICBkID0gZTsKICAgICAgICAgICAgYyA9IGY7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgaCA9IGguc2libGluZzsKICAgICAgICB9CiAgICAgICAgaWYgKCFnKSB7CiAgICAgICAgICBmb3IgKGggPSBmLmNoaWxkOyBoOyApIHsKICAgICAgICAgICAgaWYgKGggPT09IGMpIHsKICAgICAgICAgICAgICBnID0gITA7CiAgICAgICAgICAgICAgYyA9IGY7CiAgICAgICAgICAgICAgZCA9IGU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGggPT09IGQpIHsKICAgICAgICAgICAgICBnID0gITA7CiAgICAgICAgICAgICAgZCA9IGY7CiAgICAgICAgICAgICAgYyA9IGU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaCA9IGguc2libGluZzsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghZykgdGhyb3cgRXJyb3IoaygxODkpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGMuYWx0ZXJuYXRlICE9PSBkKSB0aHJvdyBFcnJvcihrKDE5MCkpOwogICAgfQogICAgaWYgKDMgIT09IGMudGFnKSB0aHJvdyBFcnJvcihrKDE4OCkpOwogICAgcmV0dXJuIGMuc3RhdGVOb2RlLmN1cnJlbnQgPT09IGMgPyBhIDogYjsKICB9CgogIGZ1bmN0aW9uIFNmKGEpIHsKICAgIGEgPSB2aShhKTsKICAgIGlmICghYSkgcmV0dXJuIG51bGw7CiAgICBmb3IgKHZhciBiID0gYTsgOyApIHsKICAgICAgaWYgKDUgPT09IGIudGFnIHx8IDYgPT09IGIudGFnKSByZXR1cm4gYjsKICAgICAgaWYgKGIuY2hpbGQpIChiLmNoaWxkLnJldHVybiA9IGIpLCAoYiA9IGIuY2hpbGQpOwogICAgICBlbHNlIHsKICAgICAgICBpZiAoYiA9PT0gYSkgYnJlYWs7CiAgICAgICAgZm9yICg7ICFiLnNpYmxpbmc7ICkgewogICAgICAgICAgaWYgKCFiLnJldHVybiB8fCBiLnJldHVybiA9PT0gYSkgcmV0dXJuIG51bGw7CiAgICAgICAgICBiID0gYi5yZXR1cm47CiAgICAgICAgfQogICAgICAgIGIuc2libGluZy5yZXR1cm4gPSBiLnJldHVybjsKICAgICAgICBiID0gYi5zaWJsaW5nOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIGpiKGEsIGIpIHsKICAgIGlmIChudWxsID09IGIpIHRocm93IEVycm9yKGsoMzApKTsKICAgIGlmIChudWxsID09IGEpIHJldHVybiBiOwogICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYikpIHJldHVybiBhLnB1c2guYXBwbHkoYSwgYiksIGE7CiAgICAgIGEucHVzaChiKTsKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShiKSA/IFthXS5jb25jYXQoYikgOiBbYSwgYl07CiAgfQoKICBmdW5jdGlvbiBLZChhLCBiLCBjKSB7CiAgICBBcnJheS5pc0FycmF5KGEpID8gYS5mb3JFYWNoKGIsIGMpIDogYSAmJiBiLmNhbGwoYywgYSk7CiAgfQoKICBmdW5jdGlvbiBwYyhhKSB7CiAgICBudWxsICE9PSBhICYmIChBYiA9IGpiKEFiLCBhKSk7CiAgICBhID0gQWI7CiAgICBBYiA9IG51bGw7CiAgICBpZiAoYSkgewogICAgICBLZChhLCB3aSk7CiAgICAgIGlmIChBYikgdGhyb3cgRXJyb3Ioayg5NSkpOwogICAgICBpZiAoaGMpIHRocm93ICgoYSA9IHBkKSwgKGhjID0gITEpLCAocGQgPSBudWxsKSwgYSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBMZChhKSB7CiAgICBhID0gYS50YXJnZXQgfHwgYS5zcmNFbGVtZW50IHx8IHdpbmRvdzsKICAgIGEuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQgJiYgKGEgPSBhLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KTsKICAgIHJldHVybiAzID09PSBhLm5vZGVUeXBlID8gYS5wYXJlbnROb2RlIDogYTsKICB9CgogIGZ1bmN0aW9uIFRmKGEpIHsKICAgIGlmICghd2EpIHJldHVybiAhMTsKICAgIGEgPSAib24iICsgYTsKICAgIHZhciBiID0gYSBpbiBkb2N1bWVudDsKICAgIGIgfHwKICAgICAgKChiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLAogICAgICBiLnNldEF0dHJpYnV0ZShhLCAicmV0dXJuOyIpLAogICAgICAoYiA9ICJmdW5jdGlvbiIgPT09IHR5cGVvZiBiW2FdKSk7CiAgICByZXR1cm4gYjsKICB9CgogIGZ1bmN0aW9uIFVmKGEpIHsKICAgIGEudG9wTGV2ZWxUeXBlID0gbnVsbDsKICAgIGEubmF0aXZlRXZlbnQgPSBudWxsOwogICAgYS50YXJnZXRJbnN0ID0gbnVsbDsKICAgIGEuYW5jZXN0b3JzLmxlbmd0aCA9IDA7CiAgICAxMCA+IHFjLmxlbmd0aCAmJiBxYy5wdXNoKGEpOwogIH0KCiAgZnVuY3Rpb24gVmYoYSwgYiwgYywgZCkgewogICAgaWYgKHFjLmxlbmd0aCkgewogICAgICB2YXIgZSA9IHFjLnBvcCgpOwogICAgICBlLnRvcExldmVsVHlwZSA9IGE7CiAgICAgIGUuZXZlbnRTeXN0ZW1GbGFncyA9IGQ7CiAgICAgIGUubmF0aXZlRXZlbnQgPSBiOwogICAgICBlLnRhcmdldEluc3QgPSBjOwogICAgICByZXR1cm4gZTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHRvcExldmVsVHlwZTogYSwKICAgICAgZXZlbnRTeXN0ZW1GbGFnczogZCwKICAgICAgbmF0aXZlRXZlbnQ6IGIsCiAgICAgIHRhcmdldEluc3Q6IGMsCiAgICAgIGFuY2VzdG9yczogW10sCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gV2YoYSkgewogICAgdmFyIGIgPSBhLnRhcmdldEluc3QsCiAgICAgIGMgPSBiOwogICAgZG8gewogICAgICBpZiAoIWMpIHsKICAgICAgICBhLmFuY2VzdG9ycy5wdXNoKGMpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICAgIHZhciBkID0gYzsKICAgICAgaWYgKDMgPT09IGQudGFnKSBkID0gZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbzsKICAgICAgZWxzZSB7CiAgICAgICAgZm9yICg7IGQucmV0dXJuOyApIGQgPSBkLnJldHVybjsKICAgICAgICBkID0gMyAhPT0gZC50YWcgPyBudWxsIDogZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbzsKICAgICAgfQogICAgICBpZiAoIWQpIGJyZWFrOwogICAgICBiID0gYy50YWc7CiAgICAgICg1ICE9PSBiICYmIDYgIT09IGIpIHx8IGEuYW5jZXN0b3JzLnB1c2goYyk7CiAgICAgIGMgPSBCYihkKTsKICAgIH0gd2hpbGUgKGMpOwogICAgZm9yIChjID0gMDsgYyA8IGEuYW5jZXN0b3JzLmxlbmd0aDsgYysrKSB7CiAgICAgIGIgPSBhLmFuY2VzdG9yc1tjXTsKICAgICAgdmFyIGUgPSBMZChhLm5hdGl2ZUV2ZW50KTsKICAgICAgZCA9IGEudG9wTGV2ZWxUeXBlOwogICAgICB2YXIgZiA9IGEubmF0aXZlRXZlbnQsCiAgICAgICAgZyA9IGEuZXZlbnRTeXN0ZW1GbGFnczsKICAgICAgMCA9PT0gYyAmJiAoZyB8PSA2NCk7CiAgICAgIGZvciAodmFyIGggPSBudWxsLCBtID0gMDsgbSA8IGpjLmxlbmd0aDsgbSsrKSB7CiAgICAgICAgdmFyIG4gPSBqY1ttXTsKICAgICAgICBuICYmIChuID0gbi5leHRyYWN0RXZlbnRzKGQsIGIsIGYsIGUsIGcpKSAmJiAoaCA9IGpiKGgsIG4pKTsKICAgICAgfQogICAgICBwYyhoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIE1kKGEsIGIsIGMpIHsKICAgIGlmICghYy5oYXMoYSkpIHsKICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgY2FzZSAic2Nyb2xsIjoKICAgICAgICAgIENiKGIsICJzY3JvbGwiLCAhMCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJmb2N1cyI6CiAgICAgICAgY2FzZSAiYmx1ciI6CiAgICAgICAgICBDYihiLCAiZm9jdXMiLCAhMCk7CiAgICAgICAgICBDYihiLCAiYmx1ciIsICEwKTsKICAgICAgICAgIGMuc2V0KCJibHVyIiwgbnVsbCk7CiAgICAgICAgICBjLnNldCgiZm9jdXMiLCBudWxsKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgImNhbmNlbCI6CiAgICAgICAgY2FzZSAiY2xvc2UiOgogICAgICAgICAgVGYoYSkgJiYgQ2IoYiwgYSwgITApOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiaW52YWxpZCI6CiAgICAgICAgY2FzZSAic3VibWl0IjoKICAgICAgICBjYXNlICJyZXNldCI6CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgLTEgPT09IERiLmluZGV4T2YoYSkgJiYgdyhhLCBiKTsKICAgICAgfQogICAgICBjLnNldChhLCBudWxsKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHhpKGEsIGIpIHsKICAgIHZhciBjID0gSmQoYik7CiAgICBOZC5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICAgIE1kKGEsIGIsIGMpOwogICAgfSk7CiAgICB5aS5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICAgIE1kKGEsIGIsIGMpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBPZChhLCBiLCBjLCBkLCBlKSB7CiAgICByZXR1cm4gewogICAgICBibG9ja2VkT246IGEsCiAgICAgIHRvcExldmVsVHlwZTogYiwKICAgICAgZXZlbnRTeXN0ZW1GbGFnczogYyB8IDMyLAogICAgICBuYXRpdmVFdmVudDogZSwKICAgICAgY29udGFpbmVyOiBkLAogICAgfTsKICB9CgogIGZ1bmN0aW9uIFhmKGEsIGIpIHsKICAgIHN3aXRjaCAoYSkgewogICAgICBjYXNlICJmb2N1cyI6CiAgICAgIGNhc2UgImJsdXIiOgogICAgICAgIHhhID0gbnVsbDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAiZHJhZ2VudGVyIjoKICAgICAgY2FzZSAiZHJhZ2xlYXZlIjoKICAgICAgICB5YSA9IG51bGw7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgIm1vdXNlb3ZlciI6CiAgICAgIGNhc2UgIm1vdXNlb3V0IjoKICAgICAgICB6YSA9IG51bGw7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgInBvaW50ZXJvdmVyIjoKICAgICAgY2FzZSAicG9pbnRlcm91dCI6CiAgICAgICAgRWIuZGVsZXRlKGIucG9pbnRlcklkKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAiZ290cG9pbnRlcmNhcHR1cmUiOgogICAgICBjYXNlICJsb3N0cG9pbnRlcmNhcHR1cmUiOgogICAgICAgIEZiLmRlbGV0ZShiLnBvaW50ZXJJZCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBHYihhLCBiLCBjLCBkLCBlLCBmKSB7CiAgICBpZiAobnVsbCA9PT0gYSB8fCBhLm5hdGl2ZUV2ZW50ICE9PSBmKQogICAgICByZXR1cm4gKAogICAgICAgIChhID0gT2QoYiwgYywgZCwgZSwgZikpLAogICAgICAgIG51bGwgIT09IGIgJiYgKChiID0gSGIoYikpLCBudWxsICE9PSBiICYmIFlmKGIpKSwKICAgICAgICBhCiAgICAgICk7CiAgICBhLmV2ZW50U3lzdGVtRmxhZ3MgfD0gZDsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gemkoYSwgYiwgYywgZCwgZSkgewogICAgc3dpdGNoIChiKSB7CiAgICAgIGNhc2UgImZvY3VzIjoKICAgICAgICByZXR1cm4gKHhhID0gR2IoeGEsIGEsIGIsIGMsIGQsIGUpKSwgITA7CiAgICAgIGNhc2UgImRyYWdlbnRlciI6CiAgICAgICAgcmV0dXJuICh5YSA9IEdiKHlhLCBhLCBiLCBjLCBkLCBlKSksICEwOwogICAgICBjYXNlICJtb3VzZW92ZXIiOgogICAgICAgIHJldHVybiAoemEgPSBHYih6YSwgYSwgYiwgYywgZCwgZSkpLCAhMDsKICAgICAgY2FzZSAicG9pbnRlcm92ZXIiOgogICAgICAgIHZhciBmID0gZS5wb2ludGVySWQ7CiAgICAgICAgRWIuc2V0KGYsIEdiKEViLmdldChmKSB8fCBudWxsLCBhLCBiLCBjLCBkLCBlKSk7CiAgICAgICAgcmV0dXJuICEwOwogICAgICBjYXNlICJnb3Rwb2ludGVyY2FwdHVyZSI6CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIChmID0gZS5wb2ludGVySWQpLCBGYi5zZXQoZiwgR2IoRmIuZ2V0KGYpIHx8IG51bGwsIGEsIGIsIGMsIGQsIGUpKSwgITAKICAgICAgICApOwogICAgfQogICAgcmV0dXJuICExOwogIH0KCiAgZnVuY3Rpb24gQWkoYSkgewogICAgdmFyIGIgPSBCYihhLnRhcmdldCk7CiAgICBpZiAobnVsbCAhPT0gYikgewogICAgICB2YXIgYyA9IE5hKGIpOwogICAgICBpZiAobnVsbCAhPT0gYykKICAgICAgICBpZiAoKChiID0gYy50YWcpLCAxMyA9PT0gYikpIHsKICAgICAgICAgIGlmICgoKGIgPSBRZihjKSksIG51bGwgIT09IGIpKSB7CiAgICAgICAgICAgIGEuYmxvY2tlZE9uID0gYjsKICAgICAgICAgICAgUGQoYS5wcmlvcml0eSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIEJpKGMpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoMyA9PT0gYiAmJiBjLnN0YXRlTm9kZS5oeWRyYXRlKSB7CiAgICAgICAgICBhLmJsb2NrZWRPbiA9IDMgPT09IGMudGFnID8gYy5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyA6IG51bGw7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgfQogICAgYS5ibG9ja2VkT24gPSBudWxsOwogIH0KCiAgZnVuY3Rpb24gcmMoYSkgewogICAgaWYgKG51bGwgIT09IGEuYmxvY2tlZE9uKSByZXR1cm4gITE7CiAgICB2YXIgYiA9IFFkKGEudG9wTGV2ZWxUeXBlLCBhLmV2ZW50U3lzdGVtRmxhZ3MsIGEuY29udGFpbmVyLCBhLm5hdGl2ZUV2ZW50KTsKICAgIGlmIChudWxsICE9PSBiKSB7CiAgICAgIHZhciBjID0gSGIoYik7CiAgICAgIG51bGwgIT09IGMgJiYgWWYoYyk7CiAgICAgIGEuYmxvY2tlZE9uID0gYjsKICAgICAgcmV0dXJuICExOwogICAgfQogICAgcmV0dXJuICEwOwogIH0KCiAgZnVuY3Rpb24gWmYoYSwgYiwgYykgewogICAgcmMoYSkgJiYgYy5kZWxldGUoYik7CiAgfQoKICBmdW5jdGlvbiBDaSgpIHsKICAgIGZvciAoUmQgPSAhMTsgMCA8IGZhLmxlbmd0aDsgKSB7CiAgICAgIHZhciBhID0gZmFbMF07CiAgICAgIGlmIChudWxsICE9PSBhLmJsb2NrZWRPbikgewogICAgICAgIGEgPSBIYihhLmJsb2NrZWRPbik7CiAgICAgICAgbnVsbCAhPT0gYSAmJiBEaShhKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICB2YXIgYiA9IFFkKAogICAgICAgIGEudG9wTGV2ZWxUeXBlLAogICAgICAgIGEuZXZlbnRTeXN0ZW1GbGFncywKICAgICAgICBhLmNvbnRhaW5lciwKICAgICAgICBhLm5hdGl2ZUV2ZW50CiAgICAgICk7CiAgICAgIG51bGwgIT09IGIgPyAoYS5ibG9ja2VkT24gPSBiKSA6IGZhLnNoaWZ0KCk7CiAgICB9CiAgICBudWxsICE9PSB4YSAmJiByYyh4YSkgJiYgKHhhID0gbnVsbCk7CiAgICBudWxsICE9PSB5YSAmJiByYyh5YSkgJiYgKHlhID0gbnVsbCk7CiAgICBudWxsICE9PSB6YSAmJiByYyh6YSkgJiYgKHphID0gbnVsbCk7CiAgICBFYi5mb3JFYWNoKFpmKTsKICAgIEZiLmZvckVhY2goWmYpOwogIH0KCiAgZnVuY3Rpb24gSWIoYSwgYikgewogICAgYS5ibG9ja2VkT24gPT09IGIgJiYgKChhLmJsb2NrZWRPbiA9IG51bGwpLCBSZCB8fCAoKFJkID0gITApLCAkZihhZywgQ2kpKSk7CiAgfQoKICBmdW5jdGlvbiBiZyhhKSB7CiAgICBpZiAoMCA8IGZhLmxlbmd0aCkgewogICAgICBJYihmYVswXSwgYSk7CiAgICAgIGZvciAodmFyIGIgPSAxOyBiIDwgZmEubGVuZ3RoOyBiKyspIHsKICAgICAgICB2YXIgYyA9IGZhW2JdOwogICAgICAgIGMuYmxvY2tlZE9uID09PSBhICYmIChjLmJsb2NrZWRPbiA9IG51bGwpOwogICAgICB9CiAgICB9CiAgICBudWxsICE9PSB4YSAmJiBJYih4YSwgYSk7CiAgICBudWxsICE9PSB5YSAmJiBJYih5YSwgYSk7CiAgICBudWxsICE9PSB6YSAmJiBJYih6YSwgYSk7CiAgICBiID0gZnVuY3Rpb24gKGIpIHsKICAgICAgcmV0dXJuIEliKGIsIGEpOwogICAgfTsKICAgIEViLmZvckVhY2goYik7CiAgICBGYi5mb3JFYWNoKGIpOwogICAgZm9yIChiID0gMDsgYiA8IEpiLmxlbmd0aDsgYisrKQogICAgICAoYyA9IEpiW2JdKSwgYy5ibG9ja2VkT24gPT09IGEgJiYgKGMuYmxvY2tlZE9uID0gbnVsbCk7CiAgICBmb3IgKDsgMCA8IEpiLmxlbmd0aCAmJiAoKGIgPSBKYlswXSksIG51bGwgPT09IGIuYmxvY2tlZE9uKTsgKQogICAgICBBaShiKSwgbnVsbCA9PT0gYi5ibG9ja2VkT24gJiYgSmIuc2hpZnQoKTsKICB9CgogIGZ1bmN0aW9uIFNkKGEsIGIpIHsKICAgIGZvciAodmFyIGMgPSAwOyBjIDwgYS5sZW5ndGg7IGMgKz0gMikgewogICAgICB2YXIgZCA9IGFbY10sCiAgICAgICAgZSA9IGFbYyArIDFdLAogICAgICAgIGYgPSAib24iICsgKGVbMF0udG9VcHBlckNhc2UoKSArIGUuc2xpY2UoMSkpOwogICAgICBmID0gewogICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7IGJ1YmJsZWQ6IGYsIGNhcHR1cmVkOiBmICsgIkNhcHR1cmUiIH0sCiAgICAgICAgZGVwZW5kZW5jaWVzOiBbZF0sCiAgICAgICAgZXZlbnRQcmlvcml0eTogYiwKICAgICAgfTsKICAgICAgVGQuc2V0KGQsIGIpOwogICAgICBjZy5zZXQoZCwgZik7CiAgICAgIGRnW2VdID0gZjsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHcoYSwgYikgewogICAgQ2IoYiwgYSwgITEpOwogIH0KCiAgZnVuY3Rpb24gQ2IoYSwgYiwgYykgewogICAgdmFyIGQgPSBUZC5nZXQoYik7CiAgICBzd2l0Y2ggKHZvaWQgMCA9PT0gZCA/IDIgOiBkKSB7CiAgICAgIGNhc2UgMDoKICAgICAgICBkID0gRWkuYmluZChudWxsLCBiLCAxLCBhKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAxOgogICAgICAgIGQgPSBGaS5iaW5kKG51bGwsIGIsIDEsIGEpOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGQgPSBzYy5iaW5kKG51bGwsIGIsIDEsIGEpOwogICAgfQogICAgYyA/IGEuYWRkRXZlbnRMaXN0ZW5lcihiLCBkLCAhMCkgOiBhLmFkZEV2ZW50TGlzdGVuZXIoYiwgZCwgITEpOwogIH0KCiAgZnVuY3Rpb24gRWkoYSwgYiwgYywgZCkgewogICAgT2EgfHwgdmQoKTsKICAgIHZhciBlID0gc2MsCiAgICAgIGYgPSBPYTsKICAgIE9hID0gITA7CiAgICB0cnkgewogICAgICBlZyhlLCBhLCBiLCBjLCBkKTsKICAgIH0gZmluYWxseSB7CiAgICAgIChPYSA9IGYpIHx8IHVkKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBGaShhLCBiLCBjLCBkKSB7CiAgICBHaShIaSwgc2MuYmluZChudWxsLCBhLCBiLCBjLCBkKSk7CiAgfQoKICBmdW5jdGlvbiBzYyhhLCBiLCBjLCBkKSB7CiAgICBpZiAodGMpCiAgICAgIGlmICgwIDwgZmEubGVuZ3RoICYmIC0xIDwgTmQuaW5kZXhPZihhKSkKICAgICAgICAoYSA9IE9kKG51bGwsIGEsIGIsIGMsIGQpKSwgZmEucHVzaChhKTsKICAgICAgZWxzZSB7CiAgICAgICAgdmFyIGUgPSBRZChhLCBiLCBjLCBkKTsKICAgICAgICBpZiAobnVsbCA9PT0gZSkgWGYoYSwgZCk7CiAgICAgICAgZWxzZSBpZiAoLTEgPCBOZC5pbmRleE9mKGEpKSAoYSA9IE9kKGUsIGEsIGIsIGMsIGQpKSwgZmEucHVzaChhKTsKICAgICAgICBlbHNlIGlmICghemkoZSwgYSwgYiwgYywgZCkpIHsKICAgICAgICAgIFhmKGEsIGQpOwogICAgICAgICAgYSA9IFZmKGEsIGQsIG51bGwsIGIpOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdWYoV2YsIGEpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgVWYoYSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgfQoKICBmdW5jdGlvbiBRZChhLCBiLCBjLCBkKSB7CiAgICBjID0gTGQoZCk7CiAgICBjID0gQmIoYyk7CiAgICBpZiAobnVsbCAhPT0gYykgewogICAgICB2YXIgZSA9IE5hKGMpOwogICAgICBpZiAobnVsbCA9PT0gZSkgYyA9IG51bGw7CiAgICAgIGVsc2UgewogICAgICAgIHZhciBmID0gZS50YWc7CiAgICAgICAgaWYgKDEzID09PSBmKSB7CiAgICAgICAgICBjID0gUWYoZSk7CiAgICAgICAgICBpZiAobnVsbCAhPT0gYykgcmV0dXJuIGM7CiAgICAgICAgICBjID0gbnVsbDsKICAgICAgICB9IGVsc2UgaWYgKDMgPT09IGYpIHsKICAgICAgICAgIGlmIChlLnN0YXRlTm9kZS5oeWRyYXRlKQogICAgICAgICAgICByZXR1cm4gMyA9PT0gZS50YWcgPyBlLnN0YXRlTm9kZS5jb250YWluZXJJbmZvIDogbnVsbDsKICAgICAgICAgIGMgPSBudWxsOwogICAgICAgIH0gZWxzZSBlICE9PSBjICYmIChjID0gbnVsbCk7CiAgICAgIH0KICAgIH0KICAgIGEgPSBWZihhLCBkLCBjLCBiKTsKICAgIHRyeSB7CiAgICAgIHVmKFdmLCBhKTsKICAgIH0gZmluYWxseSB7CiAgICAgIFVmKGEpOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICBmdW5jdGlvbiBmZyhhLCBiLCBjKSB7CiAgICByZXR1cm4gbnVsbCA9PSBiIHx8ICJib29sZWFuIiA9PT0gdHlwZW9mIGIgfHwgIiIgPT09IGIKICAgICAgPyAiIgogICAgICA6IGMgfHwgIm51bWJlciIgIT09IHR5cGVvZiBiIHx8IDAgPT09IGIgfHwgKEtiLmhhc093blByb3BlcnR5KGEpICYmIEtiW2FdKQogICAgICA/ICgiIiArIGIpLnRyaW0oKQogICAgICA6IGIgKyAicHgiOwogIH0KCiAgZnVuY3Rpb24gZ2coYSwgYikgewogICAgYSA9IGEuc3R5bGU7CiAgICBmb3IgKHZhciBjIGluIGIpCiAgICAgIGlmIChiLmhhc093blByb3BlcnR5KGMpKSB7CiAgICAgICAgdmFyIGQgPSAwID09PSBjLmluZGV4T2YoIi0tIiksCiAgICAgICAgICBlID0gZmcoYywgYltjXSwgZCk7CiAgICAgICAgImZsb2F0IiA9PT0gYyAmJiAoYyA9ICJjc3NGbG9hdCIpOwogICAgICAgIGQgPyBhLnNldFByb3BlcnR5KGMsIGUpIDogKGFbY10gPSBlKTsKICAgICAgfQogIH0KCiAgZnVuY3Rpb24gVWQoYSwgYikgewogICAgaWYgKGIpIHsKICAgICAgaWYgKElpW2FdICYmIChudWxsICE9IGIuY2hpbGRyZW4gfHwgbnVsbCAhPSBiLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MKSkKICAgICAgICB0aHJvdyBFcnJvcihrKDEzNywgYSwgIiIpKTsKICAgICAgaWYgKG51bGwgIT0gYi5kYW5nZXJvdXNseVNldElubmVySFRNTCkgewogICAgICAgIGlmIChudWxsICE9IGIuY2hpbGRyZW4pIHRocm93IEVycm9yKGsoNjApKTsKICAgICAgICBpZiAoCiAgICAgICAgICAhKAogICAgICAgICAgICAib2JqZWN0IiA9PT0gdHlwZW9mIGIuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYKICAgICAgICAgICAgIl9faHRtbCIgaW4gYi5kYW5nZXJvdXNseVNldElubmVySFRNTAogICAgICAgICAgKQogICAgICAgICkKICAgICAgICAgIHRocm93IEVycm9yKGsoNjEpKTsKICAgICAgfQogICAgICBpZiAobnVsbCAhPSBiLnN0eWxlICYmICJvYmplY3QiICE9PSB0eXBlb2YgYi5zdHlsZSkKICAgICAgICB0aHJvdyBFcnJvcihrKDYyLCAiIikpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gVmQoYSwgYikgewogICAgaWYgKC0xID09PSBhLmluZGV4T2YoIi0iKSkgcmV0dXJuICJzdHJpbmciID09PSB0eXBlb2YgYi5pczsKICAgIHN3aXRjaCAoYSkgewogICAgICBjYXNlICJhbm5vdGF0aW9uLXhtbCI6CiAgICAgIGNhc2UgImNvbG9yLXByb2ZpbGUiOgogICAgICBjYXNlICJmb250LWZhY2UiOgogICAgICBjYXNlICJmb250LWZhY2Utc3JjIjoKICAgICAgY2FzZSAiZm9udC1mYWNlLXVyaSI6CiAgICAgIGNhc2UgImZvbnQtZmFjZS1mb3JtYXQiOgogICAgICBjYXNlICJmb250LWZhY2UtbmFtZSI6CiAgICAgIGNhc2UgIm1pc3NpbmctZ2x5cGgiOgogICAgICAgIHJldHVybiAhMTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvYShhLCBiKSB7CiAgICBhID0gOSA9PT0gYS5ub2RlVHlwZSB8fCAxMSA9PT0gYS5ub2RlVHlwZSA/IGEgOiBhLm93bmVyRG9jdW1lbnQ7CiAgICB2YXIgYyA9IEpkKGEpOwogICAgYiA9IHJkW2JdOwogICAgZm9yICh2YXIgZCA9IDA7IGQgPCBiLmxlbmd0aDsgZCsrKSBNZChiW2RdLCBhLCBjKTsKICB9CgogIGZ1bmN0aW9uIHVjKCkge30KCiAgZnVuY3Rpb24gV2QoYSkgewogICAgYSA9IGEgfHwgKCJ1bmRlZmluZWQiICE9PSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IHZvaWQgMCk7CiAgICBpZiAoInVuZGVmaW5lZCIgPT09IHR5cGVvZiBhKSByZXR1cm4gbnVsbDsKICAgIHRyeSB7CiAgICAgIHJldHVybiBhLmFjdGl2ZUVsZW1lbnQgfHwgYS5ib2R5OwogICAgfSBjYXRjaCAoYikgewogICAgICByZXR1cm4gYS5ib2R5OwogICAgfQogIH0KCiAgZnVuY3Rpb24gaGcoYSkgewogICAgZm9yICg7IGEgJiYgYS5maXJzdENoaWxkOyApIGEgPSBhLmZpcnN0Q2hpbGQ7CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIGlnKGEsIGIpIHsKICAgIHZhciBjID0gaGcoYSk7CiAgICBhID0gMDsKICAgIGZvciAodmFyIGQ7IGM7ICkgewogICAgICBpZiAoMyA9PT0gYy5ub2RlVHlwZSkgewogICAgICAgIGQgPSBhICsgYy50ZXh0Q29udGVudC5sZW5ndGg7CiAgICAgICAgaWYgKGEgPD0gYiAmJiBkID49IGIpCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBub2RlOiBjLAogICAgICAgICAgICBvZmZzZXQ6IGIgLSBhLAogICAgICAgICAgfTsKICAgICAgICBhID0gZDsKICAgICAgfQogICAgICBhOiB7CiAgICAgICAgZm9yICg7IGM7ICkgewogICAgICAgICAgaWYgKGMubmV4dFNpYmxpbmcpIHsKICAgICAgICAgICAgYyA9IGMubmV4dFNpYmxpbmc7CiAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICB9CiAgICAgICAgICBjID0gYy5wYXJlbnROb2RlOwogICAgICAgIH0KICAgICAgICBjID0gdm9pZCAwOwogICAgICB9CiAgICAgIGMgPSBoZyhjKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGpnKGEsIGIpIHsKICAgIHJldHVybiBhICYmIGIKICAgICAgPyBhID09PSBiCiAgICAgICAgPyAhMAogICAgICAgIDogYSAmJiAzID09PSBhLm5vZGVUeXBlCiAgICAgICAgPyAhMQogICAgICAgIDogYiAmJiAzID09PSBiLm5vZGVUeXBlCiAgICAgICAgPyBqZyhhLCBiLnBhcmVudE5vZGUpCiAgICAgICAgOiAiY29udGFpbnMiIGluIGEKICAgICAgICA/IGEuY29udGFpbnMoYikKICAgICAgICA6IGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24KICAgICAgICA/ICEhKGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYikgJiAxNikKICAgICAgICA6ICExCiAgICAgIDogITE7CiAgfQoKICBmdW5jdGlvbiBrZygpIHsKICAgIGZvciAodmFyIGEgPSB3aW5kb3csIGIgPSBXZCgpOyBiIGluc3RhbmNlb2YgYS5IVE1MSUZyYW1lRWxlbWVudDsgKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIGMgPSAic3RyaW5nIiA9PT0gdHlwZW9mIGIuY29udGVudFdpbmRvdy5sb2NhdGlvbi5ocmVmOwogICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgYyA9ICExOwogICAgICB9CiAgICAgIGlmIChjKSBhID0gYi5jb250ZW50V2luZG93OwogICAgICBlbHNlIGJyZWFrOwogICAgICBiID0gV2QoYS5kb2N1bWVudCk7CiAgICB9CiAgICByZXR1cm4gYjsKICB9CgogIGZ1bmN0aW9uIFhkKGEpIHsKICAgIHZhciBiID0gYSAmJiBhLm5vZGVOYW1lICYmIGEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgIHJldHVybiAoCiAgICAgIGIgJiYKICAgICAgKCgiaW5wdXQiID09PSBiICYmCiAgICAgICAgKCJ0ZXh0IiA9PT0gYS50eXBlIHx8CiAgICAgICAgICAic2VhcmNoIiA9PT0gYS50eXBlIHx8CiAgICAgICAgICAidGVsIiA9PT0gYS50eXBlIHx8CiAgICAgICAgICAidXJsIiA9PT0gYS50eXBlIHx8CiAgICAgICAgICAicGFzc3dvcmQiID09PSBhLnR5cGUpKSB8fAogICAgICAgICJ0ZXh0YXJlYSIgPT09IGIgfHwKICAgICAgICAidHJ1ZSIgPT09IGEuY29udGVudEVkaXRhYmxlKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGxnKGEsIGIpIHsKICAgIHN3aXRjaCAoYSkgewogICAgICBjYXNlICJidXR0b24iOgogICAgICBjYXNlICJpbnB1dCI6CiAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgIGNhc2UgInRleHRhcmVhIjoKICAgICAgICByZXR1cm4gISFiLmF1dG9Gb2N1czsKICAgIH0KICAgIHJldHVybiAhMTsKICB9CgogIGZ1bmN0aW9uIFlkKGEsIGIpIHsKICAgIHJldHVybiAoCiAgICAgICJ0ZXh0YXJlYSIgPT09IGEgfHwKICAgICAgIm9wdGlvbiIgPT09IGEgfHwKICAgICAgIm5vc2NyaXB0IiA9PT0gYSB8fAogICAgICAic3RyaW5nIiA9PT0gdHlwZW9mIGIuY2hpbGRyZW4gfHwKICAgICAgIm51bWJlciIgPT09IHR5cGVvZiBiLmNoaWxkcmVuIHx8CiAgICAgICgib2JqZWN0IiA9PT0gdHlwZW9mIGIuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYKICAgICAgICBudWxsICE9PSBiLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICYmCiAgICAgICAgbnVsbCAhPSBiLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBrYihhKSB7CiAgICBmb3IgKDsgbnVsbCAhPSBhOyBhID0gYS5uZXh0U2libGluZykgewogICAgICB2YXIgYiA9IGEubm9kZVR5cGU7CiAgICAgIGlmICgxID09PSBiIHx8IDMgPT09IGIpIGJyZWFrOwogICAgfQogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBtZyhhKSB7CiAgICBhID0gYS5wcmV2aW91c1NpYmxpbmc7CiAgICBmb3IgKHZhciBiID0gMDsgYTsgKSB7CiAgICAgIGlmICg4ID09PSBhLm5vZGVUeXBlKSB7CiAgICAgICAgdmFyIGMgPSBhLmRhdGE7CiAgICAgICAgaWYgKGMgPT09IG5nIHx8IGMgPT09IFpkIHx8IGMgPT09ICRkKSB7CiAgICAgICAgICBpZiAoMCA9PT0gYikgcmV0dXJuIGE7CiAgICAgICAgICBiLS07CiAgICAgICAgfSBlbHNlIGMgPT09IG9nICYmIGIrKzsKICAgICAgfQogICAgICBhID0gYS5wcmV2aW91c1NpYmxpbmc7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIEJiKGEpIHsKICAgIHZhciBiID0gYVtBYV07CiAgICBpZiAoYikgcmV0dXJuIGI7CiAgICBmb3IgKHZhciBjID0gYS5wYXJlbnROb2RlOyBjOyApIHsKICAgICAgaWYgKChiID0gY1tMYl0gfHwgY1tBYV0pKSB7CiAgICAgICAgYyA9IGIuYWx0ZXJuYXRlOwogICAgICAgIGlmIChudWxsICE9PSBiLmNoaWxkIHx8IChudWxsICE9PSBjICYmIG51bGwgIT09IGMuY2hpbGQpKQogICAgICAgICAgZm9yIChhID0gbWcoYSk7IG51bGwgIT09IGE7ICkgewogICAgICAgICAgICBpZiAoKGMgPSBhW0FhXSkpIHJldHVybiBjOwogICAgICAgICAgICBhID0gbWcoYSk7CiAgICAgICAgICB9CiAgICAgICAgcmV0dXJuIGI7CiAgICAgIH0KICAgICAgYSA9IGM7CiAgICAgIGMgPSBhLnBhcmVudE5vZGU7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIEhiKGEpIHsKICAgIGEgPSBhW0FhXSB8fCBhW0xiXTsKICAgIHJldHVybiAhYSB8fCAoNSAhPT0gYS50YWcgJiYgNiAhPT0gYS50YWcgJiYgMTMgIT09IGEudGFnICYmIDMgIT09IGEudGFnKQogICAgICA/IG51bGwKICAgICAgOiBhOwogIH0KCiAgZnVuY3Rpb24gUGEoYSkgewogICAgaWYgKDUgPT09IGEudGFnIHx8IDYgPT09IGEudGFnKSByZXR1cm4gYS5zdGF0ZU5vZGU7CiAgICB0aHJvdyBFcnJvcihrKDMzKSk7CiAgfQoKICBmdW5jdGlvbiBhZShhKSB7CiAgICByZXR1cm4gYVt2Y10gfHwgbnVsbDsKICB9CgogIGZ1bmN0aW9uIHBhKGEpIHsKICAgIGRvIGEgPSBhLnJldHVybjsKICAgIHdoaWxlIChhICYmIDUgIT09IGEudGFnKTsKICAgIHJldHVybiBhID8gYSA6IG51bGw7CiAgfQoKICBmdW5jdGlvbiBwZyhhLCBiKSB7CiAgICB2YXIgYyA9IGEuc3RhdGVOb2RlOwogICAgaWYgKCFjKSByZXR1cm4gbnVsbDsKICAgIHZhciBkID0gdGQoYyk7CiAgICBpZiAoIWQpIHJldHVybiBudWxsOwogICAgYyA9IGRbYl07CiAgICBhOiBzd2l0Y2ggKGIpIHsKICAgICAgY2FzZSAib25DbGljayI6CiAgICAgIGNhc2UgIm9uQ2xpY2tDYXB0dXJlIjoKICAgICAgY2FzZSAib25Eb3VibGVDbGljayI6CiAgICAgIGNhc2UgIm9uRG91YmxlQ2xpY2tDYXB0dXJlIjoKICAgICAgY2FzZSAib25Nb3VzZURvd24iOgogICAgICBjYXNlICJvbk1vdXNlRG93bkNhcHR1cmUiOgogICAgICBjYXNlICJvbk1vdXNlTW92ZSI6CiAgICAgIGNhc2UgIm9uTW91c2VNb3ZlQ2FwdHVyZSI6CiAgICAgIGNhc2UgIm9uTW91c2VVcCI6CiAgICAgIGNhc2UgIm9uTW91c2VVcENhcHR1cmUiOgogICAgICBjYXNlICJvbk1vdXNlRW50ZXIiOgogICAgICAgIChkID0gIWQuZGlzYWJsZWQpIHx8CiAgICAgICAgICAoKGEgPSBhLnR5cGUpLAogICAgICAgICAgKGQgPSAhKAogICAgICAgICAgICAiYnV0dG9uIiA9PT0gYSB8fAogICAgICAgICAgICAiaW5wdXQiID09PSBhIHx8CiAgICAgICAgICAgICJzZWxlY3QiID09PSBhIHx8CiAgICAgICAgICAgICJ0ZXh0YXJlYSIgPT09IGEKICAgICAgICAgICkpKTsKICAgICAgICBhID0gIWQ7CiAgICAgICAgYnJlYWsgYTsKICAgICAgZGVmYXVsdDoKICAgICAgICBhID0gITE7CiAgICB9CiAgICBpZiAoYSkgcmV0dXJuIG51bGw7CiAgICBpZiAoYyAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgYykgdGhyb3cgRXJyb3IoaygyMzEsIGIsIHR5cGVvZiBjKSk7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIHFnKGEsIGIsIGMpIHsKICAgIGlmICgoYiA9IHBnKGEsIGMuZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNbYl0pKSkKICAgICAgKGMuX2Rpc3BhdGNoTGlzdGVuZXJzID0gamIoYy5fZGlzcGF0Y2hMaXN0ZW5lcnMsIGIpKSwKICAgICAgICAoYy5fZGlzcGF0Y2hJbnN0YW5jZXMgPSBqYihjLl9kaXNwYXRjaEluc3RhbmNlcywgYSkpOwogIH0KCiAgZnVuY3Rpb24gSmkoYSkgewogICAgaWYgKGEgJiYgYS5kaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcykgewogICAgICBmb3IgKHZhciBiID0gYS5fdGFyZ2V0SW5zdCwgYyA9IFtdOyBiOyApIGMucHVzaChiKSwgKGIgPSBwYShiKSk7CiAgICAgIGZvciAoYiA9IGMubGVuZ3RoOyAwIDwgYi0tOyApIHFnKGNbYl0sICJjYXB0dXJlZCIsIGEpOwogICAgICBmb3IgKGIgPSAwOyBiIDwgYy5sZW5ndGg7IGIrKykgcWcoY1tiXSwgImJ1YmJsZWQiLCBhKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGJlKGEsIGIsIGMpIHsKICAgIGEgJiYKICAgICAgYyAmJgogICAgICBjLmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUgJiYKICAgICAgKGIgPSBwZyhhLCBjLmRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpKSAmJgogICAgICAoKGMuX2Rpc3BhdGNoTGlzdGVuZXJzID0gamIoYy5fZGlzcGF0Y2hMaXN0ZW5lcnMsIGIpKSwKICAgICAgKGMuX2Rpc3BhdGNoSW5zdGFuY2VzID0gamIoYy5fZGlzcGF0Y2hJbnN0YW5jZXMsIGEpKSk7CiAgfQoKICBmdW5jdGlvbiBLaShhKSB7CiAgICBhICYmIGEuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSAmJiBiZShhLl90YXJnZXRJbnN0LCBudWxsLCBhKTsKICB9CgogIGZ1bmN0aW9uIGxiKGEpIHsKICAgIEtkKGEsIEppKTsKICB9CgogIGZ1bmN0aW9uIHJnKCkgewogICAgaWYgKHdjKSByZXR1cm4gd2M7CiAgICB2YXIgYSwKICAgICAgYiA9IGNlLAogICAgICBjID0gYi5sZW5ndGgsCiAgICAgIGQsCiAgICAgIGUgPSAidmFsdWUiIGluIEJhID8gQmEudmFsdWUgOiBCYS50ZXh0Q29udGVudCwKICAgICAgZiA9IGUubGVuZ3RoOwogICAgZm9yIChhID0gMDsgYSA8IGMgJiYgYlthXSA9PT0gZVthXTsgYSsrKTsKICAgIHZhciBnID0gYyAtIGE7CiAgICBmb3IgKGQgPSAxOyBkIDw9IGcgJiYgYltjIC0gZF0gPT09IGVbZiAtIGRdOyBkKyspOwogICAgcmV0dXJuICh3YyA9IGUuc2xpY2UoYSwgMSA8IGQgPyAxIC0gZCA6IHZvaWQgMCkpOwogIH0KCiAgZnVuY3Rpb24geGMoKSB7CiAgICByZXR1cm4gITA7CiAgfQoKICBmdW5jdGlvbiB5YygpIHsKICAgIHJldHVybiAhMTsKICB9CgogIGZ1bmN0aW9uIFIoYSwgYiwgYywgZCkgewogICAgdGhpcy5kaXNwYXRjaENvbmZpZyA9IGE7CiAgICB0aGlzLl90YXJnZXRJbnN0ID0gYjsKICAgIHRoaXMubmF0aXZlRXZlbnQgPSBjOwogICAgYSA9IHRoaXMuY29uc3RydWN0b3IuSW50ZXJmYWNlOwogICAgZm9yICh2YXIgZSBpbiBhKQogICAgICBhLmhhc093blByb3BlcnR5KGUpICYmCiAgICAgICAgKChiID0gYVtlXSkKICAgICAgICAgID8gKHRoaXNbZV0gPSBiKGMpKQogICAgICAgICAgOiAidGFyZ2V0IiA9PT0gZQogICAgICAgICAgPyAodGhpcy50YXJnZXQgPSBkKQogICAgICAgICAgOiAodGhpc1tlXSA9IGNbZV0pKTsKICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gKAogICAgICBudWxsICE9IGMuZGVmYXVsdFByZXZlbnRlZCA/IGMuZGVmYXVsdFByZXZlbnRlZCA6ICExID09PSBjLnJldHVyblZhbHVlCiAgICApCiAgICAgID8geGMKICAgICAgOiB5YzsKICAgIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSB5YzsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gTGkoYSwgYiwgYywgZCkgewogICAgaWYgKHRoaXMuZXZlbnRQb29sLmxlbmd0aCkgewogICAgICB2YXIgZSA9IHRoaXMuZXZlbnRQb29sLnBvcCgpOwogICAgICB0aGlzLmNhbGwoZSwgYSwgYiwgYywgZCk7CiAgICAgIHJldHVybiBlOwogICAgfQogICAgcmV0dXJuIG5ldyB0aGlzKGEsIGIsIGMsIGQpOwogIH0KCiAgZnVuY3Rpb24gTWkoYSkgewogICAgaWYgKCEoYSBpbnN0YW5jZW9mIHRoaXMpKSB0aHJvdyBFcnJvcihrKDI3OSkpOwogICAgYS5kZXN0cnVjdG9yKCk7CiAgICAxMCA+IHRoaXMuZXZlbnRQb29sLmxlbmd0aCAmJiB0aGlzLmV2ZW50UG9vbC5wdXNoKGEpOwogIH0KCiAgZnVuY3Rpb24gc2coYSkgewogICAgYS5ldmVudFBvb2wgPSBbXTsKICAgIGEuZ2V0UG9vbGVkID0gTGk7CiAgICBhLnJlbGVhc2UgPSBNaTsKICB9CgogIGZ1bmN0aW9uIHRnKGEsIGIpIHsKICAgIHN3aXRjaCAoYSkgewogICAgICBjYXNlICJrZXl1cCI6CiAgICAgICAgcmV0dXJuIC0xICE9PSBOaS5pbmRleE9mKGIua2V5Q29kZSk7CiAgICAgIGNhc2UgImtleWRvd24iOgogICAgICAgIHJldHVybiAyMjkgIT09IGIua2V5Q29kZTsKICAgICAgY2FzZSAia2V5cHJlc3MiOgogICAgICBjYXNlICJtb3VzZWRvd24iOgogICAgICBjYXNlICJibHVyIjoKICAgICAgICByZXR1cm4gITA7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuICExOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdWcoYSkgewogICAgYSA9IGEuZGV0YWlsOwogICAgcmV0dXJuICJvYmplY3QiID09PSB0eXBlb2YgYSAmJiAiZGF0YSIgaW4gYSA/IGEuZGF0YSA6IG51bGw7CiAgfQoKICBmdW5jdGlvbiBPaShhLCBiKSB7CiAgICBzd2l0Y2ggKGEpIHsKICAgICAgY2FzZSAiY29tcG9zaXRpb25lbmQiOgogICAgICAgIHJldHVybiB1ZyhiKTsKICAgICAgY2FzZSAia2V5cHJlc3MiOgogICAgICAgIGlmICgzMiAhPT0gYi53aGljaCkgcmV0dXJuIG51bGw7CiAgICAgICAgdmcgPSAhMDsKICAgICAgICByZXR1cm4gd2c7CiAgICAgIGNhc2UgInRleHRJbnB1dCI6CiAgICAgICAgcmV0dXJuIChhID0gYi5kYXRhKSwgYSA9PT0gd2cgJiYgdmcgPyBudWxsIDogYTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIFBpKGEsIGIpIHsKICAgIGlmIChtYikKICAgICAgcmV0dXJuICJjb21wb3NpdGlvbmVuZCIgPT09IGEgfHwgKCFkZSAmJiB0ZyhhLCBiKSkKICAgICAgICA/ICgoYSA9IHJnKCkpLCAod2MgPSBjZSA9IEJhID0gbnVsbCksIChtYiA9ICExKSwgYSkKICAgICAgICA6IG51bGw7CiAgICBzd2l0Y2ggKGEpIHsKICAgICAgY2FzZSAicGFzdGUiOgogICAgICAgIHJldHVybiBudWxsOwogICAgICBjYXNlICJrZXlwcmVzcyI6CiAgICAgICAgaWYgKCEoYi5jdHJsS2V5IHx8IGIuYWx0S2V5IHx8IGIubWV0YUtleSkgfHwgKGIuY3RybEtleSAmJiBiLmFsdEtleSkpIHsKICAgICAgICAgIGlmIChiLmNoYXIgJiYgMSA8IGIuY2hhci5sZW5ndGgpIHJldHVybiBiLmNoYXI7CiAgICAgICAgICBpZiAoYi53aGljaCkgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoYi53aGljaCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICBjYXNlICJjb21wb3NpdGlvbmVuZCI6CiAgICAgICAgcmV0dXJuIHhnICYmICJrbyIgIT09IGIubG9jYWxlID8gbnVsbCA6IGIuZGF0YTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHlnKGEpIHsKICAgIHZhciBiID0gYSAmJiBhLm5vZGVOYW1lICYmIGEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgIHJldHVybiAiaW5wdXQiID09PSBiID8gISFRaVthLnR5cGVdIDogInRleHRhcmVhIiA9PT0gYiA/ICEwIDogITE7CiAgfQoKICBmdW5jdGlvbiB6ZyhhLCBiLCBjKSB7CiAgICBhID0gUi5nZXRQb29sZWQoQWcuY2hhbmdlLCBhLCBiLCBjKTsKICAgIGEudHlwZSA9ICJjaGFuZ2UiOwogICAgc2YoYyk7CiAgICBsYihhKTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gUmkoYSkgewogICAgcGMoYSk7CiAgfQoKICBmdW5jdGlvbiB6YyhhKSB7CiAgICB2YXIgYiA9IFBhKGEpOwogICAgaWYgKEdmKGIpKSByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIFNpKGEsIGIpIHsKICAgIGlmICgiY2hhbmdlIiA9PT0gYSkgcmV0dXJuIGI7CiAgfQoKICBmdW5jdGlvbiBCZygpIHsKICAgIE1iICYmIChNYi5kZXRhY2hFdmVudCgib25wcm9wZXJ0eWNoYW5nZSIsIENnKSwgKE5iID0gTWIgPSBudWxsKSk7CiAgfQoKICBmdW5jdGlvbiBDZyhhKSB7CiAgICBpZiAoInZhbHVlIiA9PT0gYS5wcm9wZXJ0eU5hbWUgJiYgemMoTmIpKQogICAgICBpZiAoKChhID0gemcoTmIsIGEsIExkKGEpKSksIE9hKSkgcGMoYSk7CiAgICAgIGVsc2UgewogICAgICAgIE9hID0gITA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGVlKFJpLCBhKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgKE9hID0gITEpLCB1ZCgpOwogICAgICAgIH0KICAgICAgfQogIH0KCiAgZnVuY3Rpb24gVGkoYSwgYiwgYykgewogICAgImZvY3VzIiA9PT0gYQogICAgICA/IChCZygpLCAoTWIgPSBiKSwgKE5iID0gYyksIE1iLmF0dGFjaEV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIiwgQ2cpKQogICAgICA6ICJibHVyIiA9PT0gYSAmJiBCZygpOwogIH0KCiAgZnVuY3Rpb24gVWkoYSwgYikgewogICAgaWYgKCJzZWxlY3Rpb25jaGFuZ2UiID09PSBhIHx8ICJrZXl1cCIgPT09IGEgfHwgImtleWRvd24iID09PSBhKQogICAgICByZXR1cm4gemMoTmIpOwogIH0KCiAgZnVuY3Rpb24gVmkoYSwgYikgewogICAgaWYgKCJjbGljayIgPT09IGEpIHJldHVybiB6YyhiKTsKICB9CgogIGZ1bmN0aW9uIFdpKGEsIGIpIHsKICAgIGlmICgiaW5wdXQiID09PSBhIHx8ICJjaGFuZ2UiID09PSBhKSByZXR1cm4gemMoYik7CiAgfQoKICBmdW5jdGlvbiBYaShhKSB7CiAgICB2YXIgYiA9IHRoaXMubmF0aXZlRXZlbnQ7CiAgICByZXR1cm4gYi5nZXRNb2RpZmllclN0YXRlCiAgICAgID8gYi5nZXRNb2RpZmllclN0YXRlKGEpCiAgICAgIDogKGEgPSBZaVthXSkKICAgICAgPyAhIWJbYV0KICAgICAgOiAhMTsKICB9CgogIGZ1bmN0aW9uIGZlKGEpIHsKICAgIHJldHVybiBYaTsKICB9CgogIGZ1bmN0aW9uIFppKGEsIGIpIHsKICAgIHJldHVybiAoYSA9PT0gYiAmJiAoMCAhPT0gYSB8fCAxIC8gYSA9PT0gMSAvIGIpKSB8fCAoYSAhPT0gYSAmJiBiICE9PSBiKTsKICB9CgogIGZ1bmN0aW9uIE9iKGEsIGIpIHsKICAgIGlmIChRYShhLCBiKSkgcmV0dXJuICEwOwogICAgaWYgKAogICAgICAib2JqZWN0IiAhPT0gdHlwZW9mIGEgfHwKICAgICAgbnVsbCA9PT0gYSB8fAogICAgICAib2JqZWN0IiAhPT0gdHlwZW9mIGIgfHwKICAgICAgbnVsbCA9PT0gYgogICAgKQogICAgICByZXR1cm4gITE7CiAgICB2YXIgYyA9IE9iamVjdC5rZXlzKGEpLAogICAgICBkID0gT2JqZWN0LmtleXMoYik7CiAgICBpZiAoYy5sZW5ndGggIT09IGQubGVuZ3RoKSByZXR1cm4gITE7CiAgICBmb3IgKGQgPSAwOyBkIDwgYy5sZW5ndGg7IGQrKykKICAgICAgaWYgKCEkaS5jYWxsKGIsIGNbZF0pIHx8ICFRYShhW2NbZF1dLCBiW2NbZF1dKSkgcmV0dXJuICExOwogICAgcmV0dXJuICEwOwogIH0KCiAgZnVuY3Rpb24gRGcoYSwgYikgewogICAgdmFyIGMgPQogICAgICBiLndpbmRvdyA9PT0gYiA/IGIuZG9jdW1lbnQgOiA5ID09PSBiLm5vZGVUeXBlID8gYiA6IGIub3duZXJEb2N1bWVudDsKICAgIGlmIChnZSB8fCBudWxsID09IG5iIHx8IG5iICE9PSBXZChjKSkgcmV0dXJuIG51bGw7CiAgICBjID0gbmI7CiAgICAic2VsZWN0aW9uU3RhcnQiIGluIGMgJiYgWGQoYykKICAgICAgPyAoYyA9IHsKICAgICAgICAgIHN0YXJ0OiBjLnNlbGVjdGlvblN0YXJ0LAogICAgICAgICAgZW5kOiBjLnNlbGVjdGlvbkVuZCwKICAgICAgICB9KQogICAgICA6ICgoYyA9ICgKICAgICAgICAgIChjLm93bmVyRG9jdW1lbnQgJiYgYy5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KSB8fAogICAgICAgICAgd2luZG93CiAgICAgICAgKS5nZXRTZWxlY3Rpb24oKSksCiAgICAgICAgKGMgPSB7CiAgICAgICAgICBhbmNob3JOb2RlOiBjLmFuY2hvck5vZGUsCiAgICAgICAgICBhbmNob3JPZmZzZXQ6IGMuYW5jaG9yT2Zmc2V0LAogICAgICAgICAgZm9jdXNOb2RlOiBjLmZvY3VzTm9kZSwKICAgICAgICAgIGZvY3VzT2Zmc2V0OiBjLmZvY3VzT2Zmc2V0LAogICAgICAgIH0pKTsKICAgIHJldHVybiBQYiAmJiBPYihQYiwgYykKICAgICAgPyBudWxsCiAgICAgIDogKChQYiA9IGMpLAogICAgICAgIChhID0gUi5nZXRQb29sZWQoRWcuc2VsZWN0LCBoZSwgYSwgYikpLAogICAgICAgIChhLnR5cGUgPSAic2VsZWN0IiksCiAgICAgICAgKGEudGFyZ2V0ID0gbmIpLAogICAgICAgIGxiKGEpLAogICAgICAgIGEpOwogIH0KCiAgZnVuY3Rpb24gQWMoYSkgewogICAgdmFyIGIgPSBhLmtleUNvZGU7CiAgICAiY2hhckNvZGUiIGluIGEKICAgICAgPyAoKGEgPSBhLmNoYXJDb2RlKSwgMCA9PT0gYSAmJiAxMyA9PT0gYiAmJiAoYSA9IDEzKSkKICAgICAgOiAoYSA9IGIpOwogICAgMTAgPT09IGEgJiYgKGEgPSAxMyk7CiAgICByZXR1cm4gMzIgPD0gYSB8fCAxMyA9PT0gYSA/IGEgOiAwOwogIH0KCiAgZnVuY3Rpb24gcShhLCBiKSB7CiAgICAwID4gb2IgfHwgKChhLmN1cnJlbnQgPSBpZVtvYl0pLCAoaWVbb2JdID0gbnVsbCksIG9iLS0pOwogIH0KCiAgZnVuY3Rpb24geShhLCBiLCBjKSB7CiAgICBvYisrOwogICAgaWVbb2JdID0gYS5jdXJyZW50OwogICAgYS5jdXJyZW50ID0gYjsKICB9CgogIGZ1bmN0aW9uIHBiKGEsIGIpIHsKICAgIHZhciBjID0gYS50eXBlLmNvbnRleHRUeXBlczsKICAgIGlmICghYykgcmV0dXJuIENhOwogICAgdmFyIGQgPSBhLnN0YXRlTm9kZTsKICAgIGlmIChkICYmIGQuX19yZWFjdEludGVybmFsTWVtb2l6ZWRVbm1hc2tlZENoaWxkQ29udGV4dCA9PT0gYikKICAgICAgcmV0dXJuIGQuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNYXNrZWRDaGlsZENvbnRleHQ7CiAgICB2YXIgZSA9IHt9LAogICAgICBmOwogICAgZm9yIChmIGluIGMpIGVbZl0gPSBiW2ZdOwogICAgZCAmJgogICAgICAoKGEgPSBhLnN0YXRlTm9kZSksCiAgICAgIChhLl9fcmVhY3RJbnRlcm5hbE1lbW9pemVkVW5tYXNrZWRDaGlsZENvbnRleHQgPSBiKSwKICAgICAgKGEuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNYXNrZWRDaGlsZENvbnRleHQgPSBlKSk7CiAgICByZXR1cm4gZTsKICB9CgogIGZ1bmN0aW9uIE4oYSkgewogICAgYSA9IGEuY2hpbGRDb250ZXh0VHlwZXM7CiAgICByZXR1cm4gbnVsbCAhPT0gYSAmJiB2b2lkIDAgIT09IGE7CiAgfQoKICBmdW5jdGlvbiBGZyhhLCBiLCBjKSB7CiAgICBpZiAoQi5jdXJyZW50ICE9PSBDYSkgdGhyb3cgRXJyb3IoaygxNjgpKTsKICAgIHkoQiwgYik7CiAgICB5KEcsIGMpOwogIH0KCiAgZnVuY3Rpb24gR2coYSwgYiwgYykgewogICAgdmFyIGQgPSBhLnN0YXRlTm9kZTsKICAgIGEgPSBiLmNoaWxkQ29udGV4dFR5cGVzOwogICAgaWYgKCJmdW5jdGlvbiIgIT09IHR5cGVvZiBkLmdldENoaWxkQ29udGV4dCkgcmV0dXJuIGM7CiAgICBkID0gZC5nZXRDaGlsZENvbnRleHQoKTsKICAgIGZvciAodmFyIGUgaW4gZCkgaWYgKCEoZSBpbiBhKSkgdGhyb3cgRXJyb3IoaygxMDgsIG5hKGIpIHx8ICJVbmtub3duIiwgZSkpOwogICAgcmV0dXJuIE0oe30sIGMsIHt9LCBkKTsKICB9CgogIGZ1bmN0aW9uIEJjKGEpIHsKICAgIGEgPQogICAgICAoKGEgPSBhLnN0YXRlTm9kZSkgJiYgYS5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZE1lcmdlZENoaWxkQ29udGV4dCkgfHwgQ2E7CiAgICBSYSA9IEIuY3VycmVudDsKICAgIHkoQiwgYSk7CiAgICB5KEcsIEcuY3VycmVudCk7CiAgICByZXR1cm4gITA7CiAgfQoKICBmdW5jdGlvbiBIZyhhLCBiLCBjKSB7CiAgICB2YXIgZCA9IGEuc3RhdGVOb2RlOwogICAgaWYgKCFkKSB0aHJvdyBFcnJvcihrKDE2OSkpOwogICAgYwogICAgICA/ICgoYSA9IEdnKGEsIGIsIFJhKSksCiAgICAgICAgKGQuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNZXJnZWRDaGlsZENvbnRleHQgPSBhKSwKICAgICAgICBxKEcpLAogICAgICAgIHEoQiksCiAgICAgICAgeShCLCBhKSkKICAgICAgOiBxKEcpOwogICAgeShHLCBjKTsKICB9CgogIGZ1bmN0aW9uIENjKCkgewogICAgc3dpdGNoIChhaigpKSB7CiAgICAgIGNhc2UgRGM6CiAgICAgICAgcmV0dXJuIDk5OwogICAgICBjYXNlIElnOgogICAgICAgIHJldHVybiA5ODsKICAgICAgY2FzZSBKZzoKICAgICAgICByZXR1cm4gOTc7CiAgICAgIGNhc2UgS2c6CiAgICAgICAgcmV0dXJuIDk2OwogICAgICBjYXNlIExnOgogICAgICAgIHJldHVybiA5NTsKICAgICAgZGVmYXVsdDoKICAgICAgICB0aHJvdyBFcnJvcihrKDMzMikpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gTWcoYSkgewogICAgc3dpdGNoIChhKSB7CiAgICAgIGNhc2UgOTk6CiAgICAgICAgcmV0dXJuIERjOwogICAgICBjYXNlIDk4OgogICAgICAgIHJldHVybiBJZzsKICAgICAgY2FzZSA5NzoKICAgICAgICByZXR1cm4gSmc7CiAgICAgIGNhc2UgOTY6CiAgICAgICAgcmV0dXJuIEtnOwogICAgICBjYXNlIDk1OgogICAgICAgIHJldHVybiBMZzsKICAgICAgZGVmYXVsdDoKICAgICAgICB0aHJvdyBFcnJvcihrKDMzMikpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gRGEoYSwgYikgewogICAgYSA9IE1nKGEpOwogICAgcmV0dXJuIGJqKGEsIGIpOwogIH0KCiAgZnVuY3Rpb24gTmcoYSwgYiwgYykgewogICAgYSA9IE1nKGEpOwogICAgcmV0dXJuIGplKGEsIGIsIGMpOwogIH0KCiAgZnVuY3Rpb24gT2coYSkgewogICAgbnVsbCA9PT0gcWEgPyAoKHFhID0gW2FdKSwgKEVjID0gamUoRGMsIFBnKSkpIDogcWEucHVzaChhKTsKICAgIHJldHVybiBRZzsKICB9CgogIGZ1bmN0aW9uIGhhKCkgewogICAgaWYgKG51bGwgIT09IEVjKSB7CiAgICAgIHZhciBhID0gRWM7CiAgICAgIEVjID0gbnVsbDsKICAgICAgUmcoYSk7CiAgICB9CiAgICBQZygpOwogIH0KCiAgZnVuY3Rpb24gUGcoKSB7CiAgICBpZiAoIWtlICYmIG51bGwgIT09IHFhKSB7CiAgICAgIGtlID0gITA7CiAgICAgIHZhciBhID0gMDsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgYiA9IHFhOwogICAgICAgIERhKDk5LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmb3IgKDsgYSA8IGIubGVuZ3RoOyBhKyspIHsKICAgICAgICAgICAgdmFyIGMgPSBiW2FdOwogICAgICAgICAgICBkbyBjID0gYyghMCk7CiAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSBjKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBxYSA9IG51bGw7CiAgICAgIH0gY2F0Y2ggKGMpIHsKICAgICAgICB0aHJvdyAobnVsbCAhPT0gcWEgJiYgKHFhID0gcWEuc2xpY2UoYSArIDEpKSwgamUoRGMsIGhhKSwgYyk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAga2UgPSAhMTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gRmMoYSwgYiwgYykgewogICAgYyAvPSAxMDsKICAgIHJldHVybiAxMDczNzQxODIxIC0gKCgoKDEwNzM3NDE4MjEgLSBhICsgYiAvIDEwKSAvIGMpIHwgMCkgKyAxKSAqIGM7CiAgfQoKICBmdW5jdGlvbiBhYShhLCBiKSB7CiAgICBpZiAoYSAmJiBhLmRlZmF1bHRQcm9wcykgewogICAgICBiID0gTSh7fSwgYik7CiAgICAgIGEgPSBhLmRlZmF1bHRQcm9wczsKICAgICAgZm9yICh2YXIgYyBpbiBhKSB2b2lkIDAgPT09IGJbY10gJiYgKGJbY10gPSBhW2NdKTsKICAgIH0KICAgIHJldHVybiBiOwogIH0KCiAgZnVuY3Rpb24gbGUoKSB7CiAgICBHYyA9IHFiID0gSGMgPSBudWxsOwogIH0KCiAgZnVuY3Rpb24gbWUoYSkgewogICAgdmFyIGIgPSBJYy5jdXJyZW50OwogICAgcShJYyk7CiAgICBhLnR5cGUuX2NvbnRleHQuX2N1cnJlbnRWYWx1ZSA9IGI7CiAgfQoKICBmdW5jdGlvbiBTZyhhLCBiKSB7CiAgICBmb3IgKDsgbnVsbCAhPT0gYTsgKSB7CiAgICAgIHZhciBjID0gYS5hbHRlcm5hdGU7CiAgICAgIGlmIChhLmNoaWxkRXhwaXJhdGlvblRpbWUgPCBiKQogICAgICAgIChhLmNoaWxkRXhwaXJhdGlvblRpbWUgPSBiKSwKICAgICAgICAgIG51bGwgIT09IGMgJiYKICAgICAgICAgICAgYy5jaGlsZEV4cGlyYXRpb25UaW1lIDwgYiAmJgogICAgICAgICAgICAoYy5jaGlsZEV4cGlyYXRpb25UaW1lID0gYik7CiAgICAgIGVsc2UgaWYgKG51bGwgIT09IGMgJiYgYy5jaGlsZEV4cGlyYXRpb25UaW1lIDwgYikKICAgICAgICBjLmNoaWxkRXhwaXJhdGlvblRpbWUgPSBiOwogICAgICBlbHNlIGJyZWFrOwogICAgICBhID0gYS5yZXR1cm47CiAgICB9CiAgfQoKICBmdW5jdGlvbiByYihhLCBiKSB7CiAgICBIYyA9IGE7CiAgICBHYyA9IHFiID0gbnVsbDsKICAgIGEgPSBhLmRlcGVuZGVuY2llczsKICAgIG51bGwgIT09IGEgJiYKICAgICAgbnVsbCAhPT0gYS5maXJzdENvbnRleHQgJiYKICAgICAgKGEuZXhwaXJhdGlvblRpbWUgPj0gYiAmJiAoaWEgPSAhMCksIChhLmZpcnN0Q29udGV4dCA9IG51bGwpKTsKICB9CgogIGZ1bmN0aW9uIFcoYSwgYikgewogICAgaWYgKEdjICE9PSBhICYmICExICE9PSBiICYmIDAgIT09IGIpIHsKICAgICAgaWYgKCJudW1iZXIiICE9PSB0eXBlb2YgYiB8fCAxMDczNzQxODIzID09PSBiKSAoR2MgPSBhKSwgKGIgPSAxMDczNzQxODIzKTsKICAgICAgYiA9IHsgY29udGV4dDogYSwgb2JzZXJ2ZWRCaXRzOiBiLCBuZXh0OiBudWxsIH07CiAgICAgIGlmIChudWxsID09PSBxYikgewogICAgICAgIGlmIChudWxsID09PSBIYykgdGhyb3cgRXJyb3IoaygzMDgpKTsKICAgICAgICBxYiA9IGI7CiAgICAgICAgSGMuZGVwZW5kZW5jaWVzID0gewogICAgICAgICAgZXhwaXJhdGlvblRpbWU6IDAsCiAgICAgICAgICBmaXJzdENvbnRleHQ6IGIsCiAgICAgICAgICByZXNwb25kZXJzOiBudWxsLAogICAgICAgIH07CiAgICAgIH0gZWxzZSBxYiA9IHFiLm5leHQgPSBiOwogICAgfQogICAgcmV0dXJuIGEuX2N1cnJlbnRWYWx1ZTsKICB9CgogIGZ1bmN0aW9uIG5lKGEpIHsKICAgIGEudXBkYXRlUXVldWUgPSB7CiAgICAgIGJhc2VTdGF0ZTogYS5tZW1vaXplZFN0YXRlLAogICAgICBiYXNlUXVldWU6IG51bGwsCiAgICAgIHNoYXJlZDogeyBwZW5kaW5nOiBudWxsIH0sCiAgICAgIGVmZmVjdHM6IG51bGwsCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gb2UoYSwgYikgewogICAgYSA9IGEudXBkYXRlUXVldWU7CiAgICBiLnVwZGF0ZVF1ZXVlID09PSBhICYmCiAgICAgIChiLnVwZGF0ZVF1ZXVlID0gewogICAgICAgIGJhc2VTdGF0ZTogYS5iYXNlU3RhdGUsCiAgICAgICAgYmFzZVF1ZXVlOiBhLmJhc2VRdWV1ZSwKICAgICAgICBzaGFyZWQ6IGEuc2hhcmVkLAogICAgICAgIGVmZmVjdHM6IGEuZWZmZWN0cywKICAgICAgfSk7CiAgfQoKICBmdW5jdGlvbiBFYShhLCBiKSB7CiAgICBhID0gewogICAgICBleHBpcmF0aW9uVGltZTogYSwKICAgICAgc3VzcGVuc2VDb25maWc6IGIsCiAgICAgIHRhZzogVGcsCiAgICAgIHBheWxvYWQ6IG51bGwsCiAgICAgIGNhbGxiYWNrOiBudWxsLAogICAgICBuZXh0OiBudWxsLAogICAgfTsKICAgIHJldHVybiAoYS5uZXh0ID0gYSk7CiAgfQoKICBmdW5jdGlvbiBGYShhLCBiKSB7CiAgICBhID0gYS51cGRhdGVRdWV1ZTsKICAgIGlmIChudWxsICE9PSBhKSB7CiAgICAgIGEgPSBhLnNoYXJlZDsKICAgICAgdmFyIGMgPSBhLnBlbmRpbmc7CiAgICAgIG51bGwgPT09IGMgPyAoYi5uZXh0ID0gYikgOiAoKGIubmV4dCA9IGMubmV4dCksIChjLm5leHQgPSBiKSk7CiAgICAgIGEucGVuZGluZyA9IGI7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBVZyhhLCBiKSB7CiAgICB2YXIgYyA9IGEuYWx0ZXJuYXRlOwogICAgbnVsbCAhPT0gYyAmJiBvZShjLCBhKTsKICAgIGEgPSBhLnVwZGF0ZVF1ZXVlOwogICAgYyA9IGEuYmFzZVF1ZXVlOwogICAgbnVsbCA9PT0gYwogICAgICA/ICgoYS5iYXNlUXVldWUgPSBiLm5leHQgPSBiKSwgKGIubmV4dCA9IGIpKQogICAgICA6ICgoYi5uZXh0ID0gYy5uZXh0KSwgKGMubmV4dCA9IGIpKTsKICB9CgogIGZ1bmN0aW9uIFFiKGEsIGIsIGMsIGQpIHsKICAgIHZhciBlID0gYS51cGRhdGVRdWV1ZTsKICAgIEdhID0gITE7CiAgICB2YXIgZiA9IGUuYmFzZVF1ZXVlLAogICAgICBnID0gZS5zaGFyZWQucGVuZGluZzsKICAgIGlmIChudWxsICE9PSBnKSB7CiAgICAgIGlmIChudWxsICE9PSBmKSB7CiAgICAgICAgdmFyIGggPSBmLm5leHQ7CiAgICAgICAgZi5uZXh0ID0gZy5uZXh0OwogICAgICAgIGcubmV4dCA9IGg7CiAgICAgIH0KICAgICAgZiA9IGc7CiAgICAgIGUuc2hhcmVkLnBlbmRpbmcgPSBudWxsOwogICAgICBoID0gYS5hbHRlcm5hdGU7CiAgICAgIG51bGwgIT09IGggJiYgKChoID0gaC51cGRhdGVRdWV1ZSksIG51bGwgIT09IGggJiYgKGguYmFzZVF1ZXVlID0gZykpOwogICAgfQogICAgaWYgKG51bGwgIT09IGYpIHsKICAgICAgaCA9IGYubmV4dDsKICAgICAgdmFyIG0gPSBlLmJhc2VTdGF0ZSwKICAgICAgICBuID0gMCwKICAgICAgICBrID0gbnVsbCwKICAgICAgICBiYSA9IG51bGwsCiAgICAgICAgbCA9IG51bGw7CiAgICAgIGlmIChudWxsICE9PSBoKSB7CiAgICAgICAgdmFyIHAgPSBoOwogICAgICAgIGRvIHsKICAgICAgICAgIGcgPSBwLmV4cGlyYXRpb25UaW1lOwogICAgICAgICAgaWYgKGcgPCBkKSB7CiAgICAgICAgICAgIHZhciB0ID0gewogICAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiBwLmV4cGlyYXRpb25UaW1lLAogICAgICAgICAgICAgIHN1c3BlbnNlQ29uZmlnOiBwLnN1c3BlbnNlQ29uZmlnLAogICAgICAgICAgICAgIHRhZzogcC50YWcsCiAgICAgICAgICAgICAgcGF5bG9hZDogcC5wYXlsb2FkLAogICAgICAgICAgICAgIGNhbGxiYWNrOiBwLmNhbGxiYWNrLAogICAgICAgICAgICAgIG5leHQ6IG51bGwsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG51bGwgPT09IGwgPyAoKGJhID0gbCA9IHQpLCAoayA9IG0pKSA6IChsID0gbC5uZXh0ID0gdCk7CiAgICAgICAgICAgIGcgPiBuICYmIChuID0gZyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBudWxsICE9PSBsICYmCiAgICAgICAgICAgICAgKGwgPSBsLm5leHQgPQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBleHBpcmF0aW9uVGltZTogMTA3Mzc0MTgyMywKICAgICAgICAgICAgICAgICAgc3VzcGVuc2VDb25maWc6IHAuc3VzcGVuc2VDb25maWcsCiAgICAgICAgICAgICAgICAgIHRhZzogcC50YWcsCiAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IHAucGF5bG9hZCwKICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IHAuY2FsbGJhY2ssCiAgICAgICAgICAgICAgICAgIG5leHQ6IG51bGwsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgVmcoZywgcC5zdXNwZW5zZUNvbmZpZyk7CiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICB2YXIgcSA9IGEsCiAgICAgICAgICAgICAgICByID0gcDsKICAgICAgICAgICAgICBnID0gYjsKICAgICAgICAgICAgICB0ID0gYzsKICAgICAgICAgICAgICBzd2l0Y2ggKHIudGFnKSB7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIHEgPSByLnBheWxvYWQ7CiAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgcSkgewogICAgICAgICAgICAgICAgICAgIG0gPSBxLmNhbGwodCwgbSwgZyk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBtID0gcTsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgcS5lZmZlY3RUYWcgPSAocS5lZmZlY3RUYWcgJiAtNDA5NykgfCA2NDsKICAgICAgICAgICAgICAgIGNhc2UgVGc6CiAgICAgICAgICAgICAgICAgIHEgPSByLnBheWxvYWQ7CiAgICAgICAgICAgICAgICAgIGcgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgcSA/IHEuY2FsbCh0LCBtLCBnKSA6IHE7CiAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBnIHx8IHZvaWQgMCA9PT0gZykgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgbSA9IE0oe30sIG0sIGcpOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgY2FzZSBKYzoKICAgICAgICAgICAgICAgICAgR2EgPSAhMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbnVsbCAhPT0gcC5jYWxsYmFjayAmJgogICAgICAgICAgICAgICgoYS5lZmZlY3RUYWcgfD0gMzIpLAogICAgICAgICAgICAgIChnID0gZS5lZmZlY3RzKSwKICAgICAgICAgICAgICBudWxsID09PSBnID8gKGUuZWZmZWN0cyA9IFtwXSkgOiBnLnB1c2gocCkpOwogICAgICAgICAgfQogICAgICAgICAgcCA9IHAubmV4dDsKICAgICAgICAgIGlmIChudWxsID09PSBwIHx8IHAgPT09IGgpCiAgICAgICAgICAgIGlmICgoKGcgPSBlLnNoYXJlZC5wZW5kaW5nKSwgbnVsbCA9PT0gZykpIGJyZWFrOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgKHAgPSBmLm5leHQgPSBnLm5leHQpLAogICAgICAgICAgICAgICAgKGcubmV4dCA9IGgpLAogICAgICAgICAgICAgICAgKGUuYmFzZVF1ZXVlID0gZiA9IGcpLAogICAgICAgICAgICAgICAgKGUuc2hhcmVkLnBlbmRpbmcgPSBudWxsKTsKICAgICAgICB9IHdoaWxlICgxKTsKICAgICAgfQogICAgICBudWxsID09PSBsID8gKGsgPSBtKSA6IChsLm5leHQgPSBiYSk7CiAgICAgIGUuYmFzZVN0YXRlID0gazsKICAgICAgZS5iYXNlUXVldWUgPSBsOwogICAgICBLYyhuKTsKICAgICAgYS5leHBpcmF0aW9uVGltZSA9IG47CiAgICAgIGEubWVtb2l6ZWRTdGF0ZSA9IG07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBXZyhhLCBiLCBjKSB7CiAgICBhID0gYi5lZmZlY3RzOwogICAgYi5lZmZlY3RzID0gbnVsbDsKICAgIGlmIChudWxsICE9PSBhKQogICAgICBmb3IgKGIgPSAwOyBiIDwgYS5sZW5ndGg7IGIrKykgewogICAgICAgIHZhciBkID0gYVtiXSwKICAgICAgICAgIGUgPSBkLmNhbGxiYWNrOwogICAgICAgIGlmIChudWxsICE9PSBlKSB7CiAgICAgICAgICBkLmNhbGxiYWNrID0gbnVsbDsKICAgICAgICAgIGQgPSBlOwogICAgICAgICAgZSA9IGM7CiAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGQpIHRocm93IEVycm9yKGsoMTkxLCBkKSk7CiAgICAgICAgICBkLmNhbGwoZSk7CiAgICAgICAgfQogICAgICB9CiAgfQoKICBmdW5jdGlvbiBMYyhhLCBiLCBjLCBkKSB7CiAgICBiID0gYS5tZW1vaXplZFN0YXRlOwogICAgYyA9IGMoZCwgYik7CiAgICBjID0gbnVsbCA9PT0gYyB8fCB2b2lkIDAgPT09IGMgPyBiIDogTSh7fSwgYiwgYyk7CiAgICBhLm1lbW9pemVkU3RhdGUgPSBjOwogICAgMCA9PT0gYS5leHBpcmF0aW9uVGltZSAmJiAoYS51cGRhdGVRdWV1ZS5iYXNlU3RhdGUgPSBjKTsKICB9CgogIGZ1bmN0aW9uIFhnKGEsIGIsIGMsIGQsIGUsIGYsIGcpIHsKICAgIGEgPSBhLnN0YXRlTm9kZTsKICAgIHJldHVybiAiZnVuY3Rpb24iID09PSB0eXBlb2YgYS5zaG91bGRDb21wb25lbnRVcGRhdGUKICAgICAgPyBhLnNob3VsZENvbXBvbmVudFVwZGF0ZShkLCBmLCBnKQogICAgICA6IGIucHJvdG90eXBlICYmIGIucHJvdG90eXBlLmlzUHVyZVJlYWN0Q29tcG9uZW50CiAgICAgID8gIU9iKGMsIGQpIHx8ICFPYihlLCBmKQogICAgICA6ICEwOwogIH0KCiAgZnVuY3Rpb24gWWcoYSwgYiwgYykgewogICAgdmFyIGQgPSAhMSwKICAgICAgZSA9IENhOwogICAgdmFyIGYgPSBiLmNvbnRleHRUeXBlOwogICAgIm9iamVjdCIgPT09IHR5cGVvZiBmICYmIG51bGwgIT09IGYKICAgICAgPyAoZiA9IFcoZikpCiAgICAgIDogKChlID0gTihiKSA/IFJhIDogQi5jdXJyZW50KSwKICAgICAgICAoZCA9IGIuY29udGV4dFR5cGVzKSwKICAgICAgICAoZiA9IChkID0gbnVsbCAhPT0gZCAmJiB2b2lkIDAgIT09IGQpID8gcGIoYSwgZSkgOiBDYSkpOwogICAgYiA9IG5ldyBiKGMsIGYpOwogICAgYS5tZW1vaXplZFN0YXRlID0gbnVsbCAhPT0gYi5zdGF0ZSAmJiB2b2lkIDAgIT09IGIuc3RhdGUgPyBiLnN0YXRlIDogbnVsbDsKICAgIGIudXBkYXRlciA9IE1jOwogICAgYS5zdGF0ZU5vZGUgPSBiOwogICAgYi5fcmVhY3RJbnRlcm5hbEZpYmVyID0gYTsKICAgIGQgJiYKICAgICAgKChhID0gYS5zdGF0ZU5vZGUpLAogICAgICAoYS5fX3JlYWN0SW50ZXJuYWxNZW1vaXplZFVubWFza2VkQ2hpbGRDb250ZXh0ID0gZSksCiAgICAgIChhLl9fcmVhY3RJbnRlcm5hbE1lbW9pemVkTWFza2VkQ2hpbGRDb250ZXh0ID0gZikpOwogICAgcmV0dXJuIGI7CiAgfQoKICBmdW5jdGlvbiBaZyhhLCBiLCBjLCBkKSB7CiAgICBhID0gYi5zdGF0ZTsKICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBiLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYKICAgICAgYi5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKGMsIGQpOwogICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGIuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYKICAgICAgYi5VTlNBRkVfY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhjLCBkKTsKICAgIGIuc3RhdGUgIT09IGEgJiYgTWMuZW5xdWV1ZVJlcGxhY2VTdGF0ZShiLCBiLnN0YXRlLCBudWxsKTsKICB9CgogIGZ1bmN0aW9uIHBlKGEsIGIsIGMsIGQpIHsKICAgIHZhciBlID0gYS5zdGF0ZU5vZGU7CiAgICBlLnByb3BzID0gYzsKICAgIGUuc3RhdGUgPSBhLm1lbW9pemVkU3RhdGU7CiAgICBlLnJlZnMgPSAkZzsKICAgIG5lKGEpOwogICAgdmFyIGYgPSBiLmNvbnRleHRUeXBlOwogICAgIm9iamVjdCIgPT09IHR5cGVvZiBmICYmIG51bGwgIT09IGYKICAgICAgPyAoZS5jb250ZXh0ID0gVyhmKSkKICAgICAgOiAoKGYgPSBOKGIpID8gUmEgOiBCLmN1cnJlbnQpLCAoZS5jb250ZXh0ID0gcGIoYSwgZikpKTsKICAgIFFiKGEsIGMsIGUsIGQpOwogICAgZS5zdGF0ZSA9IGEubWVtb2l6ZWRTdGF0ZTsKICAgIGYgPSBiLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczsKICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBmICYmIChMYyhhLCBiLCBmLCBjKSwgKGUuc3RhdGUgPSBhLm1lbW9pemVkU3RhdGUpKTsKICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBiLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyB8fAogICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZS5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSB8fAogICAgICAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGUuVU5TQUZFX2NvbXBvbmVudFdpbGxNb3VudCAmJgogICAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiBlLmNvbXBvbmVudFdpbGxNb3VudCkgfHwKICAgICAgKChiID0gZS5zdGF0ZSksCiAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBlLmNvbXBvbmVudFdpbGxNb3VudCAmJiBlLmNvbXBvbmVudFdpbGxNb3VudCgpLAogICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ICYmCiAgICAgICAgZS5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCksCiAgICAgIGIgIT09IGUuc3RhdGUgJiYgTWMuZW5xdWV1ZVJlcGxhY2VTdGF0ZShlLCBlLnN0YXRlLCBudWxsKSwKICAgICAgUWIoYSwgYywgZSwgZCksCiAgICAgIChlLnN0YXRlID0gYS5tZW1vaXplZFN0YXRlKSk7CiAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZS5jb21wb25lbnREaWRNb3VudCAmJiAoYS5lZmZlY3RUYWcgfD0gNCk7CiAgfQoKICBmdW5jdGlvbiBSYihhLCBiLCBjKSB7CiAgICBhID0gYy5yZWY7CiAgICBpZiAobnVsbCAhPT0gYSAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgYSAmJiAib2JqZWN0IiAhPT0gdHlwZW9mIGEpIHsKICAgICAgaWYgKGMuX293bmVyKSB7CiAgICAgICAgYyA9IGMuX293bmVyOwogICAgICAgIGlmIChjKSB7CiAgICAgICAgICBpZiAoMSAhPT0gYy50YWcpIHRocm93IEVycm9yKGsoMzA5KSk7CiAgICAgICAgICB2YXIgZCA9IGMuc3RhdGVOb2RlOwogICAgICAgIH0KICAgICAgICBpZiAoIWQpIHRocm93IEVycm9yKGsoMTQ3LCBhKSk7CiAgICAgICAgdmFyIGUgPSAiIiArIGE7CiAgICAgICAgaWYgKAogICAgICAgICAgbnVsbCAhPT0gYiAmJgogICAgICAgICAgbnVsbCAhPT0gYi5yZWYgJiYKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBiLnJlZiAmJgogICAgICAgICAgYi5yZWYuX3N0cmluZ1JlZiA9PT0gZQogICAgICAgICkKICAgICAgICAgIHJldHVybiBiLnJlZjsKICAgICAgICBiID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHZhciBiID0gZC5yZWZzOwogICAgICAgICAgYiA9PT0gJGcgJiYgKGIgPSBkLnJlZnMgPSB7fSk7CiAgICAgICAgICBudWxsID09PSBhID8gZGVsZXRlIGJbZV0gOiAoYltlXSA9IGEpOwogICAgICAgIH07CiAgICAgICAgYi5fc3RyaW5nUmVmID0gZTsKICAgICAgICByZXR1cm4gYjsKICAgICAgfQogICAgICBpZiAoInN0cmluZyIgIT09IHR5cGVvZiBhKSB0aHJvdyBFcnJvcihrKDI4NCkpOwogICAgICBpZiAoIWMuX293bmVyKSB0aHJvdyBFcnJvcihrKDI5MCwgYSkpOwogICAgfQogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBOYyhhLCBiKSB7CiAgICBpZiAoInRleHRhcmVhIiAhPT0gYS50eXBlKQogICAgICB0aHJvdyBFcnJvcigKICAgICAgICBrKAogICAgICAgICAgMzEsCiAgICAgICAgICAiW29iamVjdCBPYmplY3RdIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGIpCiAgICAgICAgICAgID8gIm9iamVjdCB3aXRoIGtleXMgeyIgKyBPYmplY3Qua2V5cyhiKS5qb2luKCIsICIpICsgIn0iCiAgICAgICAgICAgIDogYiwKICAgICAgICAgICIiCiAgICAgICAgKQogICAgICApOwogIH0KCiAgZnVuY3Rpb24gYWgoYSkgewogICAgZnVuY3Rpb24gYihiLCBjKSB7CiAgICAgIGlmIChhKSB7CiAgICAgICAgdmFyIGQgPSBiLmxhc3RFZmZlY3Q7CiAgICAgICAgbnVsbCAhPT0gZAogICAgICAgICAgPyAoKGQubmV4dEVmZmVjdCA9IGMpLCAoYi5sYXN0RWZmZWN0ID0gYykpCiAgICAgICAgICA6IChiLmZpcnN0RWZmZWN0ID0gYi5sYXN0RWZmZWN0ID0gYyk7CiAgICAgICAgYy5uZXh0RWZmZWN0ID0gbnVsbDsKICAgICAgICBjLmVmZmVjdFRhZyA9IDg7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjKGMsIGQpIHsKICAgICAgaWYgKCFhKSByZXR1cm4gbnVsbDsKICAgICAgZm9yICg7IG51bGwgIT09IGQ7ICkgYihjLCBkKSwgKGQgPSBkLnNpYmxpbmcpOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBmdW5jdGlvbiBkKGEsIGIpIHsKICAgICAgZm9yIChhID0gbmV3IE1hcCgpOyBudWxsICE9PSBiOyApCiAgICAgICAgbnVsbCAhPT0gYi5rZXkgPyBhLnNldChiLmtleSwgYikgOiBhLnNldChiLmluZGV4LCBiKSwgKGIgPSBiLnNpYmxpbmcpOwogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICBmdW5jdGlvbiBlKGEsIGIpIHsKICAgICAgYSA9IFNhKGEsIGIpOwogICAgICBhLmluZGV4ID0gMDsKICAgICAgYS5zaWJsaW5nID0gbnVsbDsKICAgICAgcmV0dXJuIGE7CiAgICB9CgogICAgZnVuY3Rpb24gZihiLCBjLCBkKSB7CiAgICAgIGIuaW5kZXggPSBkOwogICAgICBpZiAoIWEpIHJldHVybiBjOwogICAgICBkID0gYi5hbHRlcm5hdGU7CiAgICAgIGlmIChudWxsICE9PSBkKSByZXR1cm4gKGQgPSBkLmluZGV4KSwgZCA8IGMgPyAoKGIuZWZmZWN0VGFnID0gMiksIGMpIDogZDsKICAgICAgYi5lZmZlY3RUYWcgPSAyOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBmdW5jdGlvbiBnKGIpIHsKICAgICAgYSAmJiBudWxsID09PSBiLmFsdGVybmF0ZSAmJiAoYi5lZmZlY3RUYWcgPSAyKTsKICAgICAgcmV0dXJuIGI7CiAgICB9CgogICAgZnVuY3Rpb24gaChhLCBiLCBjLCBkKSB7CiAgICAgIGlmIChudWxsID09PSBiIHx8IDYgIT09IGIudGFnKQogICAgICAgIHJldHVybiAoYiA9IHFlKGMsIGEubW9kZSwgZCkpLCAoYi5yZXR1cm4gPSBhKSwgYjsKICAgICAgYiA9IGUoYiwgYyk7CiAgICAgIGIucmV0dXJuID0gYTsKICAgICAgcmV0dXJuIGI7CiAgICB9CgogICAgZnVuY3Rpb24gbShhLCBiLCBjLCBkKSB7CiAgICAgIGlmIChudWxsICE9PSBiICYmIGIuZWxlbWVudFR5cGUgPT09IGMudHlwZSkKICAgICAgICByZXR1cm4gKGQgPSBlKGIsIGMucHJvcHMpKSwgKGQucmVmID0gUmIoYSwgYiwgYykpLCAoZC5yZXR1cm4gPSBhKSwgZDsKICAgICAgZCA9IE9jKGMudHlwZSwgYy5rZXksIGMucHJvcHMsIG51bGwsIGEubW9kZSwgZCk7CiAgICAgIGQucmVmID0gUmIoYSwgYiwgYyk7CiAgICAgIGQucmV0dXJuID0gYTsKICAgICAgcmV0dXJuIGQ7CiAgICB9CgogICAgZnVuY3Rpb24gbihhLCBiLCBjLCBkKSB7CiAgICAgIGlmICgKICAgICAgICBudWxsID09PSBiIHx8CiAgICAgICAgNCAhPT0gYi50YWcgfHwKICAgICAgICBiLnN0YXRlTm9kZS5jb250YWluZXJJbmZvICE9PSBjLmNvbnRhaW5lckluZm8gfHwKICAgICAgICBiLnN0YXRlTm9kZS5pbXBsZW1lbnRhdGlvbiAhPT0gYy5pbXBsZW1lbnRhdGlvbgogICAgICApCiAgICAgICAgcmV0dXJuIChiID0gcmUoYywgYS5tb2RlLCBkKSksIChiLnJldHVybiA9IGEpLCBiOwogICAgICBiID0gZShiLCBjLmNoaWxkcmVuIHx8IFtdKTsKICAgICAgYi5yZXR1cm4gPSBhOwogICAgICByZXR1cm4gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBsKGEsIGIsIGMsIGQsIGYpIHsKICAgICAgaWYgKG51bGwgPT09IGIgfHwgNyAhPT0gYi50YWcpCiAgICAgICAgcmV0dXJuIChiID0gSGEoYywgYS5tb2RlLCBkLCBmKSksIChiLnJldHVybiA9IGEpLCBiOwogICAgICBiID0gZShiLCBjKTsKICAgICAgYi5yZXR1cm4gPSBhOwogICAgICByZXR1cm4gYjsKICAgIH0KCiAgICBmdW5jdGlvbiBiYShhLCBiLCBjKSB7CiAgICAgIGlmICgic3RyaW5nIiA9PT0gdHlwZW9mIGIgfHwgIm51bWJlciIgPT09IHR5cGVvZiBiKQogICAgICAgIHJldHVybiAoYiA9IHFlKCIiICsgYiwgYS5tb2RlLCBjKSksIChiLnJldHVybiA9IGEpLCBiOwogICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBiICYmIG51bGwgIT09IGIpIHsKICAgICAgICBzd2l0Y2ggKGIuJCR0eXBlb2YpIHsKICAgICAgICAgIGNhc2UgUGM6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKGMgPSBPYyhiLnR5cGUsIGIua2V5LCBiLnByb3BzLCBudWxsLCBhLm1vZGUsIGMpKSwKICAgICAgICAgICAgICAoYy5yZWYgPSBSYihhLCBudWxsLCBiKSksCiAgICAgICAgICAgICAgKGMucmV0dXJuID0gYSksCiAgICAgICAgICAgICAgYwogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSBnYjoKICAgICAgICAgICAgcmV0dXJuIChiID0gcmUoYiwgYS5tb2RlLCBjKSksIChiLnJldHVybiA9IGEpLCBiOwogICAgICAgIH0KICAgICAgICBpZiAoUWMoYikgfHwgemIoYikpCiAgICAgICAgICByZXR1cm4gKGIgPSBIYShiLCBhLm1vZGUsIGMsIG51bGwpKSwgKGIucmV0dXJuID0gYSksIGI7CiAgICAgICAgTmMoYSwgYik7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24gcChhLCBiLCBjLCBkKSB7CiAgICAgIHZhciBlID0gbnVsbCAhPT0gYiA/IGIua2V5IDogbnVsbDsKICAgICAgaWYgKCJzdHJpbmciID09PSB0eXBlb2YgYyB8fCAibnVtYmVyIiA9PT0gdHlwZW9mIGMpCiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgPyBudWxsIDogaChhLCBiLCAiIiArIGMsIGQpOwogICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBjICYmIG51bGwgIT09IGMpIHsKICAgICAgICBzd2l0Y2ggKGMuJCR0eXBlb2YpIHsKICAgICAgICAgIGNhc2UgUGM6CiAgICAgICAgICAgIHJldHVybiBjLmtleSA9PT0gZQogICAgICAgICAgICAgID8gYy50eXBlID09PSBNYQogICAgICAgICAgICAgICAgPyBsKGEsIGIsIGMucHJvcHMuY2hpbGRyZW4sIGQsIGUpCiAgICAgICAgICAgICAgICA6IG0oYSwgYiwgYywgZCkKICAgICAgICAgICAgICA6IG51bGw7CiAgICAgICAgICBjYXNlIGdiOgogICAgICAgICAgICByZXR1cm4gYy5rZXkgPT09IGUgPyBuKGEsIGIsIGMsIGQpIDogbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKFFjKGMpIHx8IHpiKGMpKSByZXR1cm4gbnVsbCAhPT0gZSA/IG51bGwgOiBsKGEsIGIsIGMsIGQsIG51bGwpOwogICAgICAgIE5jKGEsIGMpOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGZ1bmN0aW9uIHQoYSwgYiwgYywgZCwgZSkgewogICAgICBpZiAoInN0cmluZyIgPT09IHR5cGVvZiBkIHx8ICJudW1iZXIiID09PSB0eXBlb2YgZCkKICAgICAgICByZXR1cm4gKGEgPSBhLmdldChjKSB8fCBudWxsKSwgaChiLCBhLCAiIiArIGQsIGUpOwogICAgICBpZiAoIm9iamVjdCIgPT09IHR5cGVvZiBkICYmIG51bGwgIT09IGQpIHsKICAgICAgICBzd2l0Y2ggKGQuJCR0eXBlb2YpIHsKICAgICAgICAgIGNhc2UgUGM6CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKGEgPSBhLmdldChudWxsID09PSBkLmtleSA/IGMgOiBkLmtleSkgfHwgbnVsbCksCiAgICAgICAgICAgICAgZC50eXBlID09PSBNYQogICAgICAgICAgICAgICAgPyBsKGIsIGEsIGQucHJvcHMuY2hpbGRyZW4sIGUsIGQua2V5KQogICAgICAgICAgICAgICAgOiBtKGIsIGEsIGQsIGUpCiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIGdiOgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIChhID0gYS5nZXQobnVsbCA9PT0gZC5rZXkgPyBjIDogZC5rZXkpIHx8IG51bGwpLCBuKGIsIGEsIGQsIGUpCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGlmIChRYyhkKSB8fCB6YihkKSkgcmV0dXJuIChhID0gYS5nZXQoYykgfHwgbnVsbCksIGwoYiwgYSwgZCwgZSwgbnVsbCk7CiAgICAgICAgTmMoYiwgZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgZnVuY3Rpb24gcShlLCBnLCBoLCBtKSB7CiAgICAgIGZvciAoCiAgICAgICAgdmFyIG4gPSBudWxsLCBrID0gbnVsbCwgbCA9IGcsIHIgPSAoZyA9IDApLCBDID0gbnVsbDsKICAgICAgICBudWxsICE9PSBsICYmIHIgPCBoLmxlbmd0aDsKICAgICAgICByKysKICAgICAgKSB7CiAgICAgICAgbC5pbmRleCA+IHIgPyAoKEMgPSBsKSwgKGwgPSBudWxsKSkgOiAoQyA9IGwuc2libGluZyk7CiAgICAgICAgdmFyIE8gPSBwKGUsIGwsIGhbcl0sIG0pOwogICAgICAgIGlmIChudWxsID09PSBPKSB7CiAgICAgICAgICBudWxsID09PSBsICYmIChsID0gQyk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgYSAmJiBsICYmIG51bGwgPT09IE8uYWx0ZXJuYXRlICYmIGIoZSwgbCk7CiAgICAgICAgZyA9IGYoTywgZywgcik7CiAgICAgICAgbnVsbCA9PT0gayA/IChuID0gTykgOiAoay5zaWJsaW5nID0gTyk7CiAgICAgICAgayA9IE87CiAgICAgICAgbCA9IEM7CiAgICAgIH0KICAgICAgaWYgKHIgPT09IGgubGVuZ3RoKSByZXR1cm4gYyhlLCBsKSwgbjsKICAgICAgaWYgKG51bGwgPT09IGwpIHsKICAgICAgICBmb3IgKDsgciA8IGgubGVuZ3RoOyByKyspCiAgICAgICAgICAobCA9IGJhKGUsIGhbcl0sIG0pKSwKICAgICAgICAgICAgbnVsbCAhPT0gbCAmJgogICAgICAgICAgICAgICgoZyA9IGYobCwgZywgcikpLAogICAgICAgICAgICAgIG51bGwgPT09IGsgPyAobiA9IGwpIDogKGsuc2libGluZyA9IGwpLAogICAgICAgICAgICAgIChrID0gbCkpOwogICAgICAgIHJldHVybiBuOwogICAgICB9CiAgICAgIGZvciAobCA9IGQoZSwgbCk7IHIgPCBoLmxlbmd0aDsgcisrKQogICAgICAgIChDID0gdChsLCBlLCByLCBoW3JdLCBtKSksCiAgICAgICAgICBudWxsICE9PSBDICYmCiAgICAgICAgICAgIChhICYmIG51bGwgIT09IEMuYWx0ZXJuYXRlICYmIGwuZGVsZXRlKG51bGwgPT09IEMua2V5ID8gciA6IEMua2V5KSwKICAgICAgICAgICAgKGcgPSBmKEMsIGcsIHIpKSwKICAgICAgICAgICAgbnVsbCA9PT0gayA/IChuID0gQykgOiAoay5zaWJsaW5nID0gQyksCiAgICAgICAgICAgIChrID0gQykpOwogICAgICBhICYmCiAgICAgICAgbC5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICByZXR1cm4gYihlLCBhKTsKICAgICAgICB9KTsKICAgICAgcmV0dXJuIG47CiAgICB9CgogICAgZnVuY3Rpb24gdyhlLCBnLCBoLCBuKSB7CiAgICAgIHZhciBtID0gemIoaCk7CiAgICAgIGlmICgiZnVuY3Rpb24iICE9PSB0eXBlb2YgbSkgdGhyb3cgRXJyb3IoaygxNTApKTsKICAgICAgaCA9IG0uY2FsbChoKTsKICAgICAgaWYgKG51bGwgPT0gaCkgdGhyb3cgRXJyb3IoaygxNTEpKTsKICAgICAgZm9yICgKICAgICAgICB2YXIgbCA9IChtID0gbnVsbCksIHIgPSBnLCBDID0gKGcgPSAwKSwgTyA9IG51bGwsIHYgPSBoLm5leHQoKTsKICAgICAgICBudWxsICE9PSByICYmICF2LmRvbmU7CiAgICAgICAgQysrLCB2ID0gaC5uZXh0KCkKICAgICAgKSB7CiAgICAgICAgci5pbmRleCA+IEMgPyAoKE8gPSByKSwgKHIgPSBudWxsKSkgOiAoTyA9IHIuc2libGluZyk7CiAgICAgICAgdmFyIHEgPSBwKGUsIHIsIHYudmFsdWUsIG4pOwogICAgICAgIGlmIChudWxsID09PSBxKSB7CiAgICAgICAgICBudWxsID09PSByICYmIChyID0gTyk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgYSAmJiByICYmIG51bGwgPT09IHEuYWx0ZXJuYXRlICYmIGIoZSwgcik7CiAgICAgICAgZyA9IGYocSwgZywgQyk7CiAgICAgICAgbnVsbCA9PT0gbCA/IChtID0gcSkgOiAobC5zaWJsaW5nID0gcSk7CiAgICAgICAgbCA9IHE7CiAgICAgICAgciA9IE87CiAgICAgIH0KICAgICAgaWYgKHYuZG9uZSkgcmV0dXJuIGMoZSwgciksIG07CiAgICAgIGlmIChudWxsID09PSByKSB7CiAgICAgICAgZm9yICg7ICF2LmRvbmU7IEMrKywgdiA9IGgubmV4dCgpKQogICAgICAgICAgKHYgPSBiYShlLCB2LnZhbHVlLCBuKSksCiAgICAgICAgICAgIG51bGwgIT09IHYgJiYKICAgICAgICAgICAgICAoKGcgPSBmKHYsIGcsIEMpKSwKICAgICAgICAgICAgICBudWxsID09PSBsID8gKG0gPSB2KSA6IChsLnNpYmxpbmcgPSB2KSwKICAgICAgICAgICAgICAobCA9IHYpKTsKICAgICAgICByZXR1cm4gbTsKICAgICAgfQogICAgICBmb3IgKHIgPSBkKGUsIHIpOyAhdi5kb25lOyBDKyssIHYgPSBoLm5leHQoKSkKICAgICAgICAodiA9IHQociwgZSwgQywgdi52YWx1ZSwgbikpLAogICAgICAgICAgbnVsbCAhPT0gdiAmJgogICAgICAgICAgICAoYSAmJiBudWxsICE9PSB2LmFsdGVybmF0ZSAmJiByLmRlbGV0ZShudWxsID09PSB2LmtleSA/IEMgOiB2LmtleSksCiAgICAgICAgICAgIChnID0gZih2LCBnLCBDKSksCiAgICAgICAgICAgIG51bGwgPT09IGwgPyAobSA9IHYpIDogKGwuc2libGluZyA9IHYpLAogICAgICAgICAgICAobCA9IHYpKTsKICAgICAgYSAmJgogICAgICAgIHIuZm9yRWFjaChmdW5jdGlvbiAoYSkgewogICAgICAgICAgcmV0dXJuIGIoZSwgYSk7CiAgICAgICAgfSk7CiAgICAgIHJldHVybiBtOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAoYSwgZCwgZiwgaCkgewogICAgICB2YXIgbSA9CiAgICAgICAgIm9iamVjdCIgPT09IHR5cGVvZiBmICYmIG51bGwgIT09IGYgJiYgZi50eXBlID09PSBNYSAmJiBudWxsID09PSBmLmtleTsKICAgICAgbSAmJiAoZiA9IGYucHJvcHMuY2hpbGRyZW4pOwogICAgICB2YXIgbiA9ICJvYmplY3QiID09PSB0eXBlb2YgZiAmJiBudWxsICE9PSBmOwogICAgICBpZiAobikKICAgICAgICBzd2l0Y2ggKGYuJCR0eXBlb2YpIHsKICAgICAgICAgIGNhc2UgUGM6CiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICBuID0gZi5rZXk7CiAgICAgICAgICAgICAgZm9yIChtID0gZDsgbnVsbCAhPT0gbTsgKSB7CiAgICAgICAgICAgICAgICBpZiAobS5rZXkgPT09IG4pIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChtLnRhZykgewogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgIGlmIChmLnR5cGUgPT09IE1hKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGMoYSwgbS5zaWJsaW5nKTsKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGUobSwgZi5wcm9wcy5jaGlsZHJlbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGQucmV0dXJuID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgaWYgKG0uZWxlbWVudFR5cGUgPT09IGYudHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjKGEsIG0uc2libGluZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBlKG0sIGYucHJvcHMpOwogICAgICAgICAgICAgICAgICAgICAgICBkLnJlZiA9IFJiKGEsIG0sIGYpOwogICAgICAgICAgICAgICAgICAgICAgICBkLnJldHVybiA9IGE7CiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBkOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGMoYSwgbSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfSBlbHNlIGIoYSwgbSk7CiAgICAgICAgICAgICAgICBtID0gbS5zaWJsaW5nOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBmLnR5cGUgPT09IE1hCiAgICAgICAgICAgICAgICA/ICgoZCA9IEhhKGYucHJvcHMuY2hpbGRyZW4sIGEubW9kZSwgaCwgZi5rZXkpKSwKICAgICAgICAgICAgICAgICAgKGQucmV0dXJuID0gYSksCiAgICAgICAgICAgICAgICAgIChhID0gZCkpCiAgICAgICAgICAgICAgICA6ICgoaCA9IE9jKGYudHlwZSwgZi5rZXksIGYucHJvcHMsIG51bGwsIGEubW9kZSwgaCkpLAogICAgICAgICAgICAgICAgICAoaC5yZWYgPSBSYihhLCBkLCBmKSksCiAgICAgICAgICAgICAgICAgIChoLnJldHVybiA9IGEpLAogICAgICAgICAgICAgICAgICAoYSA9IGgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZyhhKTsKICAgICAgICAgIGNhc2UgZ2I6CiAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICBmb3IgKG0gPSBmLmtleTsgbnVsbCAhPT0gZDsgKSB7CiAgICAgICAgICAgICAgICBpZiAoZC5rZXkgPT09IG0pCiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICA0ID09PSBkLnRhZyAmJgogICAgICAgICAgICAgICAgICAgIGQuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8gPT09IGYuY29udGFpbmVySW5mbyAmJgogICAgICAgICAgICAgICAgICAgIGQuc3RhdGVOb2RlLmltcGxlbWVudGF0aW9uID09PSBmLmltcGxlbWVudGF0aW9uCiAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgIGMoYSwgZC5zaWJsaW5nKTsKICAgICAgICAgICAgICAgICAgICBkID0gZShkLCBmLmNoaWxkcmVuIHx8IFtdKTsKICAgICAgICAgICAgICAgICAgICBkLnJldHVybiA9IGE7CiAgICAgICAgICAgICAgICAgICAgYSA9IGQ7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjKGEsIGQpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGIoYSwgZCk7CiAgICAgICAgICAgICAgICBkID0gZC5zaWJsaW5nOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkID0gcmUoZiwgYS5tb2RlLCBoKTsKICAgICAgICAgICAgICBkLnJldHVybiA9IGE7CiAgICAgICAgICAgICAgYSA9IGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGcoYSk7CiAgICAgICAgfQogICAgICBpZiAoInN0cmluZyIgPT09IHR5cGVvZiBmIHx8ICJudW1iZXIiID09PSB0eXBlb2YgZikKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKGYgPSAiIiArIGYpLAogICAgICAgICAgbnVsbCAhPT0gZCAmJiA2ID09PSBkLnRhZwogICAgICAgICAgICA/IChjKGEsIGQuc2libGluZyksIChkID0gZShkLCBmKSksIChkLnJldHVybiA9IGEpLCAoYSA9IGQpKQogICAgICAgICAgICA6IChjKGEsIGQpLCAoZCA9IHFlKGYsIGEubW9kZSwgaCkpLCAoZC5yZXR1cm4gPSBhKSwgKGEgPSBkKSksCiAgICAgICAgICBnKGEpCiAgICAgICAgKTsKICAgICAgaWYgKFFjKGYpKSByZXR1cm4gcShhLCBkLCBmLCBoKTsKICAgICAgaWYgKHpiKGYpKSByZXR1cm4gdyhhLCBkLCBmLCBoKTsKICAgICAgbiAmJiBOYyhhLCBmKTsKICAgICAgaWYgKCJ1bmRlZmluZWQiID09PSB0eXBlb2YgZiAmJiAhbSkKICAgICAgICBzd2l0Y2ggKGEudGFnKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHRocm93ICgKICAgICAgICAgICAgICAoKGEgPSBhLnR5cGUpLAogICAgICAgICAgICAgIEVycm9yKGsoMTUyLCBhLmRpc3BsYXlOYW1lIHx8IGEubmFtZSB8fCAiQ29tcG9uZW50IikpKQogICAgICAgICAgICApOwogICAgICAgIH0KICAgICAgcmV0dXJuIGMoYSwgZCk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gVGEoYSkgewogICAgaWYgKGEgPT09IFNiKSB0aHJvdyBFcnJvcihrKDE3NCkpOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBzZShhLCBiKSB7CiAgICB5KFRiLCBiKTsKICAgIHkoVWIsIGEpOwogICAgeShqYSwgU2IpOwogICAgYSA9IGIubm9kZVR5cGU7CiAgICBzd2l0Y2ggKGEpIHsKICAgICAgY2FzZSA5OgogICAgICBjYXNlIDExOgogICAgICAgIGIgPSAoYiA9IGIuZG9jdW1lbnRFbGVtZW50KSA/IGIubmFtZXNwYWNlVVJJIDogSGQobnVsbCwgIiIpOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIChhID0gOCA9PT0gYSA/IGIucGFyZW50Tm9kZSA6IGIpLAogICAgICAgICAgKGIgPSBhLm5hbWVzcGFjZVVSSSB8fCBudWxsKSwKICAgICAgICAgIChhID0gYS50YWdOYW1lKSwKICAgICAgICAgIChiID0gSGQoYiwgYSkpOwogICAgfQogICAgcShqYSk7CiAgICB5KGphLCBiKTsKICB9CgogIGZ1bmN0aW9uIHRiKGEpIHsKICAgIHEoamEpOwogICAgcShVYik7CiAgICBxKFRiKTsKICB9CgogIGZ1bmN0aW9uIGJoKGEpIHsKICAgIFRhKFRiLmN1cnJlbnQpOwogICAgdmFyIGIgPSBUYShqYS5jdXJyZW50KTsKICAgIHZhciBjID0gSGQoYiwgYS50eXBlKTsKICAgIGIgIT09IGMgJiYgKHkoVWIsIGEpLCB5KGphLCBjKSk7CiAgfQoKICBmdW5jdGlvbiB0ZShhKSB7CiAgICBVYi5jdXJyZW50ID09PSBhICYmIChxKGphKSwgcShVYikpOwogIH0KCiAgZnVuY3Rpb24gUmMoYSkgewogICAgZm9yICh2YXIgYiA9IGE7IG51bGwgIT09IGI7ICkgewogICAgICBpZiAoMTMgPT09IGIudGFnKSB7CiAgICAgICAgdmFyIGMgPSBiLm1lbW9pemVkU3RhdGU7CiAgICAgICAgaWYgKAogICAgICAgICAgbnVsbCAhPT0gYyAmJgogICAgICAgICAgKChjID0gYy5kZWh5ZHJhdGVkKSwgbnVsbCA9PT0gYyB8fCBjLmRhdGEgPT09ICRkIHx8IGMuZGF0YSA9PT0gWmQpCiAgICAgICAgKQogICAgICAgICAgcmV0dXJuIGI7CiAgICAgIH0gZWxzZSBpZiAoMTkgPT09IGIudGFnICYmIHZvaWQgMCAhPT0gYi5tZW1vaXplZFByb3BzLnJldmVhbE9yZGVyKSB7CiAgICAgICAgaWYgKDAgIT09IChiLmVmZmVjdFRhZyAmIDY0KSkgcmV0dXJuIGI7CiAgICAgIH0gZWxzZSBpZiAobnVsbCAhPT0gYi5jaGlsZCkgewogICAgICAgIGIuY2hpbGQucmV0dXJuID0gYjsKICAgICAgICBiID0gYi5jaGlsZDsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoYiA9PT0gYSkgYnJlYWs7CiAgICAgIGZvciAoOyBudWxsID09PSBiLnNpYmxpbmc7ICkgewogICAgICAgIGlmIChudWxsID09PSBiLnJldHVybiB8fCBiLnJldHVybiA9PT0gYSkgcmV0dXJuIG51bGw7CiAgICAgICAgYiA9IGIucmV0dXJuOwogICAgICB9CiAgICAgIGIuc2libGluZy5yZXR1cm4gPSBiLnJldHVybjsKICAgICAgYiA9IGIuc2libGluZzsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gdWUoYSwgYikgewogICAgcmV0dXJuIHsgcmVzcG9uZGVyOiBhLCBwcm9wczogYiB9OwogIH0KCiAgZnVuY3Rpb24gUygpIHsKICAgIHRocm93IEVycm9yKGsoMzIxKSk7CiAgfQoKICBmdW5jdGlvbiB2ZShhLCBiKSB7CiAgICBpZiAobnVsbCA9PT0gYikgcmV0dXJuICExOwogICAgZm9yICh2YXIgYyA9IDA7IGMgPCBiLmxlbmd0aCAmJiBjIDwgYS5sZW5ndGg7IGMrKykKICAgICAgaWYgKCFRYShhW2NdLCBiW2NdKSkgcmV0dXJuICExOwogICAgcmV0dXJuICEwOwogIH0KCiAgZnVuY3Rpb24gd2UoYSwgYiwgYywgZCwgZSwgZikgewogICAgSWEgPSBmOwogICAgeiA9IGI7CiAgICBiLm1lbW9pemVkU3RhdGUgPSBudWxsOwogICAgYi51cGRhdGVRdWV1ZSA9IG51bGw7CiAgICBiLmV4cGlyYXRpb25UaW1lID0gMDsKICAgIFNjLmN1cnJlbnQgPSBudWxsID09PSBhIHx8IG51bGwgPT09IGEubWVtb2l6ZWRTdGF0ZSA/IGRqIDogZWo7CiAgICBhID0gYyhkLCBlKTsKICAgIGlmIChiLmV4cGlyYXRpb25UaW1lID09PSBJYSkgewogICAgICBmID0gMDsKICAgICAgZG8gewogICAgICAgIGIuZXhwaXJhdGlvblRpbWUgPSAwOwogICAgICAgIGlmICghKDI1ID4gZikpIHRocm93IEVycm9yKGsoMzAxKSk7CiAgICAgICAgZiArPSAxOwogICAgICAgIEogPSBLID0gbnVsbDsKICAgICAgICBiLnVwZGF0ZVF1ZXVlID0gbnVsbDsKICAgICAgICBTYy5jdXJyZW50ID0gZmo7CiAgICAgICAgYSA9IGMoZCwgZSk7CiAgICAgIH0gd2hpbGUgKGIuZXhwaXJhdGlvblRpbWUgPT09IElhKTsKICAgIH0KICAgIFNjLmN1cnJlbnQgPSBUYzsKICAgIGIgPSBudWxsICE9PSBLICYmIG51bGwgIT09IEsubmV4dDsKICAgIElhID0gMDsKICAgIEogPSBLID0geiA9IG51bGw7CiAgICBVYyA9ICExOwogICAgaWYgKGIpIHRocm93IEVycm9yKGsoMzAwKSk7CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIHViKCkgewogICAgdmFyIGEgPSB7CiAgICAgIG1lbW9pemVkU3RhdGU6IG51bGwsCiAgICAgIGJhc2VTdGF0ZTogbnVsbCwKICAgICAgYmFzZVF1ZXVlOiBudWxsLAogICAgICBxdWV1ZTogbnVsbCwKICAgICAgbmV4dDogbnVsbCwKICAgIH07CiAgICBudWxsID09PSBKID8gKHoubWVtb2l6ZWRTdGF0ZSA9IEogPSBhKSA6IChKID0gSi5uZXh0ID0gYSk7CiAgICByZXR1cm4gSjsKICB9CgogIGZ1bmN0aW9uIHZiKCkgewogICAgaWYgKG51bGwgPT09IEspIHsKICAgICAgdmFyIGEgPSB6LmFsdGVybmF0ZTsKICAgICAgYSA9IG51bGwgIT09IGEgPyBhLm1lbW9pemVkU3RhdGUgOiBudWxsOwogICAgfSBlbHNlIGEgPSBLLm5leHQ7CiAgICB2YXIgYiA9IG51bGwgPT09IEogPyB6Lm1lbW9pemVkU3RhdGUgOiBKLm5leHQ7CiAgICBpZiAobnVsbCAhPT0gYikgKEogPSBiKSwgKEsgPSBhKTsKICAgIGVsc2UgewogICAgICBpZiAobnVsbCA9PT0gYSkgdGhyb3cgRXJyb3IoaygzMTApKTsKICAgICAgSyA9IGE7CiAgICAgIGEgPSB7CiAgICAgICAgbWVtb2l6ZWRTdGF0ZTogSy5tZW1vaXplZFN0YXRlLAogICAgICAgIGJhc2VTdGF0ZTogSy5iYXNlU3RhdGUsCiAgICAgICAgYmFzZVF1ZXVlOiBLLmJhc2VRdWV1ZSwKICAgICAgICBxdWV1ZTogSy5xdWV1ZSwKICAgICAgICBuZXh0OiBudWxsLAogICAgICB9OwogICAgICBudWxsID09PSBKID8gKHoubWVtb2l6ZWRTdGF0ZSA9IEogPSBhKSA6IChKID0gSi5uZXh0ID0gYSk7CiAgICB9CiAgICByZXR1cm4gSjsKICB9CgogIGZ1bmN0aW9uIFVhKGEsIGIpIHsKICAgIHJldHVybiAiZnVuY3Rpb24iID09PSB0eXBlb2YgYiA/IGIoYSkgOiBiOwogIH0KCiAgZnVuY3Rpb24gVmMoYSwgYiwgYykgewogICAgYiA9IHZiKCk7CiAgICBjID0gYi5xdWV1ZTsKICAgIGlmIChudWxsID09PSBjKSB0aHJvdyBFcnJvcihrKDMxMSkpOwogICAgYy5sYXN0UmVuZGVyZWRSZWR1Y2VyID0gYTsKICAgIHZhciBkID0gSywKICAgICAgZSA9IGQuYmFzZVF1ZXVlLAogICAgICBmID0gYy5wZW5kaW5nOwogICAgaWYgKG51bGwgIT09IGYpIHsKICAgICAgaWYgKG51bGwgIT09IGUpIHsKICAgICAgICB2YXIgZyA9IGUubmV4dDsKICAgICAgICBlLm5leHQgPSBmLm5leHQ7CiAgICAgICAgZi5uZXh0ID0gZzsKICAgICAgfQogICAgICBkLmJhc2VRdWV1ZSA9IGUgPSBmOwogICAgICBjLnBlbmRpbmcgPSBudWxsOwogICAgfQogICAgaWYgKG51bGwgIT09IGUpIHsKICAgICAgZSA9IGUubmV4dDsKICAgICAgZCA9IGQuYmFzZVN0YXRlOwogICAgICB2YXIgaCA9IChnID0gZiA9IG51bGwpLAogICAgICAgIG0gPSBlOwogICAgICBkbyB7CiAgICAgICAgdmFyIG4gPSBtLmV4cGlyYXRpb25UaW1lOwogICAgICAgIGlmIChuIDwgSWEpIHsKICAgICAgICAgIHZhciBsID0gewogICAgICAgICAgICBleHBpcmF0aW9uVGltZTogbS5leHBpcmF0aW9uVGltZSwKICAgICAgICAgICAgc3VzcGVuc2VDb25maWc6IG0uc3VzcGVuc2VDb25maWcsCiAgICAgICAgICAgIGFjdGlvbjogbS5hY3Rpb24sCiAgICAgICAgICAgIGVhZ2VyUmVkdWNlcjogbS5lYWdlclJlZHVjZXIsCiAgICAgICAgICAgIGVhZ2VyU3RhdGU6IG0uZWFnZXJTdGF0ZSwKICAgICAgICAgICAgbmV4dDogbnVsbCwKICAgICAgICAgIH07CiAgICAgICAgICBudWxsID09PSBoID8gKChnID0gaCA9IGwpLCAoZiA9IGQpKSA6IChoID0gaC5uZXh0ID0gbCk7CiAgICAgICAgICBuID4gei5leHBpcmF0aW9uVGltZSAmJiAoKHouZXhwaXJhdGlvblRpbWUgPSBuKSwgS2MobikpOwogICAgICAgIH0gZWxzZQogICAgICAgICAgbnVsbCAhPT0gaCAmJgogICAgICAgICAgICAoaCA9IGgubmV4dCA9CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IDEwNzM3NDE4MjMsCiAgICAgICAgICAgICAgICBzdXNwZW5zZUNvbmZpZzogbS5zdXNwZW5zZUNvbmZpZywKICAgICAgICAgICAgICAgIGFjdGlvbjogbS5hY3Rpb24sCiAgICAgICAgICAgICAgICBlYWdlclJlZHVjZXI6IG0uZWFnZXJSZWR1Y2VyLAogICAgICAgICAgICAgICAgZWFnZXJTdGF0ZTogbS5lYWdlclN0YXRlLAogICAgICAgICAgICAgICAgbmV4dDogbnVsbCwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgVmcobiwgbS5zdXNwZW5zZUNvbmZpZyksCiAgICAgICAgICAgIChkID0gbS5lYWdlclJlZHVjZXIgPT09IGEgPyBtLmVhZ2VyU3RhdGUgOiBhKGQsIG0uYWN0aW9uKSk7CiAgICAgICAgbSA9IG0ubmV4dDsKICAgICAgfSB3aGlsZSAobnVsbCAhPT0gbSAmJiBtICE9PSBlKTsKICAgICAgbnVsbCA9PT0gaCA/IChmID0gZCkgOiAoaC5uZXh0ID0gZyk7CiAgICAgIFFhKGQsIGIubWVtb2l6ZWRTdGF0ZSkgfHwgKGlhID0gITApOwogICAgICBiLm1lbW9pemVkU3RhdGUgPSBkOwogICAgICBiLmJhc2VTdGF0ZSA9IGY7CiAgICAgIGIuYmFzZVF1ZXVlID0gaDsKICAgICAgYy5sYXN0UmVuZGVyZWRTdGF0ZSA9IGQ7CiAgICB9CiAgICByZXR1cm4gW2IubWVtb2l6ZWRTdGF0ZSwgYy5kaXNwYXRjaF07CiAgfQoKICBmdW5jdGlvbiBXYyhhLCBiLCBjKSB7CiAgICBiID0gdmIoKTsKICAgIGMgPSBiLnF1ZXVlOwogICAgaWYgKG51bGwgPT09IGMpIHRocm93IEVycm9yKGsoMzExKSk7CiAgICBjLmxhc3RSZW5kZXJlZFJlZHVjZXIgPSBhOwogICAgdmFyIGQgPSBjLmRpc3BhdGNoLAogICAgICBlID0gYy5wZW5kaW5nLAogICAgICBmID0gYi5tZW1vaXplZFN0YXRlOwogICAgaWYgKG51bGwgIT09IGUpIHsKICAgICAgYy5wZW5kaW5nID0gbnVsbDsKICAgICAgdmFyIGcgPSAoZSA9IGUubmV4dCk7CiAgICAgIGRvIChmID0gYShmLCBnLmFjdGlvbikpLCAoZyA9IGcubmV4dCk7CiAgICAgIHdoaWxlIChnICE9PSBlKTsKICAgICAgUWEoZiwgYi5tZW1vaXplZFN0YXRlKSB8fCAoaWEgPSAhMCk7CiAgICAgIGIubWVtb2l6ZWRTdGF0ZSA9IGY7CiAgICAgIG51bGwgPT09IGIuYmFzZVF1ZXVlICYmIChiLmJhc2VTdGF0ZSA9IGYpOwogICAgICBjLmxhc3RSZW5kZXJlZFN0YXRlID0gZjsKICAgIH0KICAgIHJldHVybiBbZiwgZF07CiAgfQoKICBmdW5jdGlvbiB4ZShhKSB7CiAgICB2YXIgYiA9IHViKCk7CiAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgYSAmJiAoYSA9IGEoKSk7CiAgICBiLm1lbW9pemVkU3RhdGUgPSBiLmJhc2VTdGF0ZSA9IGE7CiAgICBhID0gYi5xdWV1ZSA9IHsKICAgICAgcGVuZGluZzogbnVsbCwKICAgICAgZGlzcGF0Y2g6IG51bGwsCiAgICAgIGxhc3RSZW5kZXJlZFJlZHVjZXI6IFVhLAogICAgICBsYXN0UmVuZGVyZWRTdGF0ZTogYSwKICAgIH07CiAgICBhID0gYS5kaXNwYXRjaCA9IGNoLmJpbmQobnVsbCwgeiwgYSk7CiAgICByZXR1cm4gW2IubWVtb2l6ZWRTdGF0ZSwgYV07CiAgfQoKICBmdW5jdGlvbiB5ZShhLCBiLCBjLCBkKSB7CiAgICBhID0geyB0YWc6IGEsIGNyZWF0ZTogYiwgZGVzdHJveTogYywgZGVwczogZCwgbmV4dDogbnVsbCB9OwogICAgYiA9IHoudXBkYXRlUXVldWU7CiAgICBudWxsID09PSBiCiAgICAgID8gKChiID0geyBsYXN0RWZmZWN0OiBudWxsIH0pLAogICAgICAgICh6LnVwZGF0ZVF1ZXVlID0gYiksCiAgICAgICAgKGIubGFzdEVmZmVjdCA9IGEubmV4dCA9IGEpKQogICAgICA6ICgoYyA9IGIubGFzdEVmZmVjdCksCiAgICAgICAgbnVsbCA9PT0gYwogICAgICAgICAgPyAoYi5sYXN0RWZmZWN0ID0gYS5uZXh0ID0gYSkKICAgICAgICAgIDogKChkID0gYy5uZXh0KSwgKGMubmV4dCA9IGEpLCAoYS5uZXh0ID0gZCksIChiLmxhc3RFZmZlY3QgPSBhKSkpOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBkaChhKSB7CiAgICByZXR1cm4gdmIoKS5tZW1vaXplZFN0YXRlOwogIH0KCiAgZnVuY3Rpb24gemUoYSwgYiwgYywgZCkgewogICAgdmFyIGUgPSB1YigpOwogICAgei5lZmZlY3RUYWcgfD0gYTsKICAgIGUubWVtb2l6ZWRTdGF0ZSA9IHllKDEgfCBiLCBjLCB2b2lkIDAsIHZvaWQgMCA9PT0gZCA/IG51bGwgOiBkKTsKICB9CgogIGZ1bmN0aW9uIEFlKGEsIGIsIGMsIGQpIHsKICAgIHZhciBlID0gdmIoKTsKICAgIGQgPSB2b2lkIDAgPT09IGQgPyBudWxsIDogZDsKICAgIHZhciBmID0gdm9pZCAwOwogICAgaWYgKG51bGwgIT09IEspIHsKICAgICAgdmFyIGcgPSBLLm1lbW9pemVkU3RhdGU7CiAgICAgIGYgPSBnLmRlc3Ryb3k7CiAgICAgIGlmIChudWxsICE9PSBkICYmIHZlKGQsIGcuZGVwcykpIHsKICAgICAgICB5ZShiLCBjLCBmLCBkKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgIH0KICAgIHouZWZmZWN0VGFnIHw9IGE7CiAgICBlLm1lbW9pemVkU3RhdGUgPSB5ZSgxIHwgYiwgYywgZiwgZCk7CiAgfQoKICBmdW5jdGlvbiBlaChhLCBiKSB7CiAgICByZXR1cm4gemUoNTE2LCA0LCBhLCBiKTsKICB9CgogIGZ1bmN0aW9uIFhjKGEsIGIpIHsKICAgIHJldHVybiBBZSg1MTYsIDQsIGEsIGIpOwogIH0KCiAgZnVuY3Rpb24gZmgoYSwgYikgewogICAgcmV0dXJuIEFlKDQsIDIsIGEsIGIpOwogIH0KCiAgZnVuY3Rpb24gZ2goYSwgYikgewogICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBiKQogICAgICByZXR1cm4gKAogICAgICAgIChhID0gYSgpKSwKICAgICAgICBiKGEpLAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGIobnVsbCk7CiAgICAgICAgfQogICAgICApOwogICAgaWYgKG51bGwgIT09IGIgJiYgdm9pZCAwICE9PSBiKQogICAgICByZXR1cm4gKAogICAgICAgIChhID0gYSgpKSwKICAgICAgICAoYi5jdXJyZW50ID0gYSksCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgYi5jdXJyZW50ID0gbnVsbDsKICAgICAgICB9CiAgICAgICk7CiAgfQoKICBmdW5jdGlvbiBoaChhLCBiLCBjKSB7CiAgICBjID0gbnVsbCAhPT0gYyAmJiB2b2lkIDAgIT09IGMgPyBjLmNvbmNhdChbYV0pIDogbnVsbDsKICAgIHJldHVybiBBZSg0LCAyLCBnaC5iaW5kKG51bGwsIGIsIGEpLCBjKTsKICB9CgogIGZ1bmN0aW9uIEJlKGEsIGIpIHt9CgogIGZ1bmN0aW9uIGloKGEsIGIpIHsKICAgIHViKCkubWVtb2l6ZWRTdGF0ZSA9IFthLCB2b2lkIDAgPT09IGIgPyBudWxsIDogYl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIFljKGEsIGIpIHsKICAgIHZhciBjID0gdmIoKTsKICAgIGIgPSB2b2lkIDAgPT09IGIgPyBudWxsIDogYjsKICAgIHZhciBkID0gYy5tZW1vaXplZFN0YXRlOwogICAgaWYgKG51bGwgIT09IGQgJiYgbnVsbCAhPT0gYiAmJiB2ZShiLCBkWzFdKSkgcmV0dXJuIGRbMF07CiAgICBjLm1lbW9pemVkU3RhdGUgPSBbYSwgYl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIGpoKGEsIGIpIHsKICAgIHZhciBjID0gdmIoKTsKICAgIGIgPSB2b2lkIDAgPT09IGIgPyBudWxsIDogYjsKICAgIHZhciBkID0gYy5tZW1vaXplZFN0YXRlOwogICAgaWYgKG51bGwgIT09IGQgJiYgbnVsbCAhPT0gYiAmJiB2ZShiLCBkWzFdKSkgcmV0dXJuIGRbMF07CiAgICBhID0gYSgpOwogICAgYy5tZW1vaXplZFN0YXRlID0gW2EsIGJdOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBDZShhLCBiLCBjKSB7CiAgICB2YXIgZCA9IENjKCk7CiAgICBEYSg5OCA+IGQgPyA5OCA6IGQsIGZ1bmN0aW9uICgpIHsKICAgICAgYSghMCk7CiAgICB9KTsKICAgIERhKDk3IDwgZCA/IDk3IDogZCwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgZCA9IFguc3VzcGVuc2U7CiAgICAgIFguc3VzcGVuc2UgPSB2b2lkIDAgPT09IGIgPyBudWxsIDogYjsKICAgICAgdHJ5IHsKICAgICAgICBhKCExKSwgYygpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIFguc3VzcGVuc2UgPSBkOwogICAgICB9CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGNoKGEsIGIsIGMpIHsKICAgIHZhciBkID0ga2EoKSwKICAgICAgZSA9IFZiLnN1c3BlbnNlOwogICAgZCA9IFZhKGQsIGEsIGUpOwogICAgZSA9IHsKICAgICAgZXhwaXJhdGlvblRpbWU6IGQsCiAgICAgIHN1c3BlbnNlQ29uZmlnOiBlLAogICAgICBhY3Rpb246IGMsCiAgICAgIGVhZ2VyUmVkdWNlcjogbnVsbCwKICAgICAgZWFnZXJTdGF0ZTogbnVsbCwKICAgICAgbmV4dDogbnVsbCwKICAgIH07CiAgICB2YXIgZiA9IGIucGVuZGluZzsKICAgIG51bGwgPT09IGYgPyAoZS5uZXh0ID0gZSkgOiAoKGUubmV4dCA9IGYubmV4dCksIChmLm5leHQgPSBlKSk7CiAgICBiLnBlbmRpbmcgPSBlOwogICAgZiA9IGEuYWx0ZXJuYXRlOwogICAgaWYgKGEgPT09IHogfHwgKG51bGwgIT09IGYgJiYgZiA9PT0geikpCiAgICAgIChVYyA9ICEwKSwgKGUuZXhwaXJhdGlvblRpbWUgPSBJYSksICh6LmV4cGlyYXRpb25UaW1lID0gSWEpOwogICAgZWxzZSB7CiAgICAgIGlmICgKICAgICAgICAwID09PSBhLmV4cGlyYXRpb25UaW1lICYmCiAgICAgICAgKG51bGwgPT09IGYgfHwgMCA9PT0gZi5leHBpcmF0aW9uVGltZSkgJiYKICAgICAgICAoKGYgPSBiLmxhc3RSZW5kZXJlZFJlZHVjZXIpLCBudWxsICE9PSBmKQogICAgICApCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBnID0gYi5sYXN0UmVuZGVyZWRTdGF0ZSwKICAgICAgICAgICAgaCA9IGYoZywgYyk7CiAgICAgICAgICBlLmVhZ2VyUmVkdWNlciA9IGY7CiAgICAgICAgICBlLmVhZ2VyU3RhdGUgPSBoOwogICAgICAgICAgaWYgKFFhKGgsIGcpKSByZXR1cm47CiAgICAgICAgfSBjYXRjaCAobSkgewogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgfQogICAgICBKYShhLCBkKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGtoKGEsIGIpIHsKICAgIHZhciBjID0gbGEoNSwgbnVsbCwgbnVsbCwgMCk7CiAgICBjLmVsZW1lbnRUeXBlID0gIkRFTEVURUQiOwogICAgYy50eXBlID0gIkRFTEVURUQiOwogICAgYy5zdGF0ZU5vZGUgPSBiOwogICAgYy5yZXR1cm4gPSBhOwogICAgYy5lZmZlY3RUYWcgPSA4OwogICAgbnVsbCAhPT0gYS5sYXN0RWZmZWN0CiAgICAgID8gKChhLmxhc3RFZmZlY3QubmV4dEVmZmVjdCA9IGMpLCAoYS5sYXN0RWZmZWN0ID0gYykpCiAgICAgIDogKGEuZmlyc3RFZmZlY3QgPSBhLmxhc3RFZmZlY3QgPSBjKTsKICB9CgogIGZ1bmN0aW9uIGxoKGEsIGIpIHsKICAgIHN3aXRjaCAoYS50YWcpIHsKICAgICAgY2FzZSA1OgogICAgICAgIHZhciBjID0gYS50eXBlOwogICAgICAgIGIgPQogICAgICAgICAgMSAhPT0gYi5ub2RlVHlwZSB8fCBjLnRvTG93ZXJDYXNlKCkgIT09IGIubm9kZU5hbWUudG9Mb3dlckNhc2UoKQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiBiOwogICAgICAgIHJldHVybiBudWxsICE9PSBiID8gKChhLnN0YXRlTm9kZSA9IGIpLCAhMCkgOiAhMTsKICAgICAgY2FzZSA2OgogICAgICAgIHJldHVybiAoCiAgICAgICAgICAoYiA9ICIiID09PSBhLnBlbmRpbmdQcm9wcyB8fCAzICE9PSBiLm5vZGVUeXBlID8gbnVsbCA6IGIpLAogICAgICAgICAgbnVsbCAhPT0gYiA/ICgoYS5zdGF0ZU5vZGUgPSBiKSwgITApIDogITEKICAgICAgICApOwogICAgICBjYXNlIDEzOgogICAgICAgIHJldHVybiAhMTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gITE7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBEZShhKSB7CiAgICBpZiAoV2EpIHsKICAgICAgdmFyIGIgPSBLYTsKICAgICAgaWYgKGIpIHsKICAgICAgICB2YXIgYyA9IGI7CiAgICAgICAgaWYgKCFsaChhLCBiKSkgewogICAgICAgICAgYiA9IGtiKGMubmV4dFNpYmxpbmcpOwogICAgICAgICAgaWYgKCFiIHx8ICFsaChhLCBiKSkgewogICAgICAgICAgICBhLmVmZmVjdFRhZyA9IChhLmVmZmVjdFRhZyAmIC0xMDI1KSB8IDI7CiAgICAgICAgICAgIFdhID0gITE7CiAgICAgICAgICAgIHJhID0gYTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAga2gocmEsIGMpOwogICAgICAgIH0KICAgICAgICByYSA9IGE7CiAgICAgICAgS2EgPSBrYihiLmZpcnN0Q2hpbGQpOwogICAgICB9IGVsc2UgKGEuZWZmZWN0VGFnID0gKGEuZWZmZWN0VGFnICYgLTEwMjUpIHwgMiksIChXYSA9ICExKSwgKHJhID0gYSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtaChhKSB7CiAgICBmb3IgKAogICAgICBhID0gYS5yZXR1cm47CiAgICAgIG51bGwgIT09IGEgJiYgNSAhPT0gYS50YWcgJiYgMyAhPT0gYS50YWcgJiYgMTMgIT09IGEudGFnOwoKICAgICkKICAgICAgYSA9IGEucmV0dXJuOwogICAgcmEgPSBhOwogIH0KCiAgZnVuY3Rpb24gWmMoYSkgewogICAgaWYgKGEgIT09IHJhKSByZXR1cm4gITE7CiAgICBpZiAoIVdhKSByZXR1cm4gbWgoYSksIChXYSA9ICEwKSwgITE7CiAgICB2YXIgYiA9IGEudHlwZTsKICAgIGlmICgKICAgICAgNSAhPT0gYS50YWcgfHwKICAgICAgKCJoZWFkIiAhPT0gYiAmJiAiYm9keSIgIT09IGIgJiYgIVlkKGIsIGEubWVtb2l6ZWRQcm9wcykpCiAgICApCiAgICAgIGZvciAoYiA9IEthOyBiOyApIGtoKGEsIGIpLCAoYiA9IGtiKGIubmV4dFNpYmxpbmcpKTsKICAgIG1oKGEpOwogICAgaWYgKDEzID09PSBhLnRhZykgewogICAgICBhID0gYS5tZW1vaXplZFN0YXRlOwogICAgICBhID0gbnVsbCAhPT0gYSA/IGEuZGVoeWRyYXRlZCA6IG51bGw7CiAgICAgIGlmICghYSkgdGhyb3cgRXJyb3IoaygzMTcpKTsKICAgICAgYTogewogICAgICAgIGEgPSBhLm5leHRTaWJsaW5nOwogICAgICAgIGZvciAoYiA9IDA7IGE7ICkgewogICAgICAgICAgaWYgKDggPT09IGEubm9kZVR5cGUpIHsKICAgICAgICAgICAgdmFyIGMgPSBhLmRhdGE7CiAgICAgICAgICAgIGlmIChjID09PSBvZykgewogICAgICAgICAgICAgIGlmICgwID09PSBiKSB7CiAgICAgICAgICAgICAgICBLYSA9IGtiKGEubmV4dFNpYmxpbmcpOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYi0tOwogICAgICAgICAgICB9IGVsc2UgKGMgIT09IG5nICYmIGMgIT09IFpkICYmIGMgIT09ICRkKSB8fCBiKys7CiAgICAgICAgICB9CiAgICAgICAgICBhID0gYS5uZXh0U2libGluZzsKICAgICAgICB9CiAgICAgICAgS2EgPSBudWxsOwogICAgICB9CiAgICB9IGVsc2UgS2EgPSByYSA/IGtiKGEuc3RhdGVOb2RlLm5leHRTaWJsaW5nKSA6IG51bGw7CiAgICByZXR1cm4gITA7CiAgfQoKICBmdW5jdGlvbiBFZSgpIHsKICAgIEthID0gcmEgPSBudWxsOwogICAgV2EgPSAhMTsKICB9CgogIGZ1bmN0aW9uIFQoYSwgYiwgYywgZCkgewogICAgYi5jaGlsZCA9IG51bGwgPT09IGEgPyBGZShiLCBudWxsLCBjLCBkKSA6IHdiKGIsIGEuY2hpbGQsIGMsIGQpOwogIH0KCiAgZnVuY3Rpb24gbmgoYSwgYiwgYywgZCwgZSkgewogICAgYyA9IGMucmVuZGVyOwogICAgdmFyIGYgPSBiLnJlZjsKICAgIHJiKGIsIGUpOwogICAgZCA9IHdlKGEsIGIsIGMsIGQsIGYsIGUpOwogICAgaWYgKG51bGwgIT09IGEgJiYgIWlhKQogICAgICByZXR1cm4gKAogICAgICAgIChiLnVwZGF0ZVF1ZXVlID0gYS51cGRhdGVRdWV1ZSksCiAgICAgICAgKGIuZWZmZWN0VGFnICY9IC01MTcpLAogICAgICAgIGEuZXhwaXJhdGlvblRpbWUgPD0gZSAmJiAoYS5leHBpcmF0aW9uVGltZSA9IDApLAogICAgICAgIHNhKGEsIGIsIGUpCiAgICAgICk7CiAgICBiLmVmZmVjdFRhZyB8PSAxOwogICAgVChhLCBiLCBkLCBlKTsKICAgIHJldHVybiBiLmNoaWxkOwogIH0KCiAgZnVuY3Rpb24gb2goYSwgYiwgYywgZCwgZSwgZikgewogICAgaWYgKG51bGwgPT09IGEpIHsKICAgICAgdmFyIGcgPSBjLnR5cGU7CiAgICAgIGlmICgKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZyAmJgogICAgICAgICFHZShnKSAmJgogICAgICAgIHZvaWQgMCA9PT0gZy5kZWZhdWx0UHJvcHMgJiYKICAgICAgICBudWxsID09PSBjLmNvbXBhcmUgJiYKICAgICAgICB2b2lkIDAgPT09IGMuZGVmYXVsdFByb3BzCiAgICAgICkKICAgICAgICByZXR1cm4gKGIudGFnID0gMTUpLCAoYi50eXBlID0gZyksIHBoKGEsIGIsIGcsIGQsIGUsIGYpOwogICAgICBhID0gT2MoYy50eXBlLCBudWxsLCBkLCBudWxsLCBiLm1vZGUsIGYpOwogICAgICBhLnJlZiA9IGIucmVmOwogICAgICBhLnJldHVybiA9IGI7CiAgICAgIHJldHVybiAoYi5jaGlsZCA9IGEpOwogICAgfQogICAgZyA9IGEuY2hpbGQ7CiAgICBpZiAoCiAgICAgIGUgPCBmICYmCiAgICAgICgoZSA9IGcubWVtb2l6ZWRQcm9wcyksCiAgICAgIChjID0gYy5jb21wYXJlKSwKICAgICAgKGMgPSBudWxsICE9PSBjID8gYyA6IE9iKSwKICAgICAgYyhlLCBkKSAmJiBhLnJlZiA9PT0gYi5yZWYpCiAgICApCiAgICAgIHJldHVybiBzYShhLCBiLCBmKTsKICAgIGIuZWZmZWN0VGFnIHw9IDE7CiAgICBhID0gU2EoZywgZCk7CiAgICBhLnJlZiA9IGIucmVmOwogICAgYS5yZXR1cm4gPSBiOwogICAgcmV0dXJuIChiLmNoaWxkID0gYSk7CiAgfQoKICBmdW5jdGlvbiBwaChhLCBiLCBjLCBkLCBlLCBmKSB7CiAgICByZXR1cm4gbnVsbCAhPT0gYSAmJgogICAgICBPYihhLm1lbW9pemVkUHJvcHMsIGQpICYmCiAgICAgIGEucmVmID09PSBiLnJlZiAmJgogICAgICAoKGlhID0gITEpLCBlIDwgZikKICAgICAgPyAoKGIuZXhwaXJhdGlvblRpbWUgPSBhLmV4cGlyYXRpb25UaW1lKSwgc2EoYSwgYiwgZikpCiAgICAgIDogSGUoYSwgYiwgYywgZCwgZik7CiAgfQoKICBmdW5jdGlvbiBxaChhLCBiKSB7CiAgICB2YXIgYyA9IGIucmVmOwogICAgaWYgKChudWxsID09PSBhICYmIG51bGwgIT09IGMpIHx8IChudWxsICE9PSBhICYmIGEucmVmICE9PSBjKSkKICAgICAgYi5lZmZlY3RUYWcgfD0gMTI4OwogIH0KCiAgZnVuY3Rpb24gSGUoYSwgYiwgYywgZCwgZSkgewogICAgdmFyIGYgPSBOKGMpID8gUmEgOiBCLmN1cnJlbnQ7CiAgICBmID0gcGIoYiwgZik7CiAgICByYihiLCBlKTsKICAgIGMgPSB3ZShhLCBiLCBjLCBkLCBmLCBlKTsKICAgIGlmIChudWxsICE9PSBhICYmICFpYSkKICAgICAgcmV0dXJuICgKICAgICAgICAoYi51cGRhdGVRdWV1ZSA9IGEudXBkYXRlUXVldWUpLAogICAgICAgIChiLmVmZmVjdFRhZyAmPSAtNTE3KSwKICAgICAgICBhLmV4cGlyYXRpb25UaW1lIDw9IGUgJiYgKGEuZXhwaXJhdGlvblRpbWUgPSAwKSwKICAgICAgICBzYShhLCBiLCBlKQogICAgICApOwogICAgYi5lZmZlY3RUYWcgfD0gMTsKICAgIFQoYSwgYiwgYywgZSk7CiAgICByZXR1cm4gYi5jaGlsZDsKICB9CgogIGZ1bmN0aW9uIHJoKGEsIGIsIGMsIGQsIGUpIHsKICAgIGlmIChOKGMpKSB7CiAgICAgIHZhciBmID0gITA7CiAgICAgIEJjKGIpOwogICAgfSBlbHNlIGYgPSAhMTsKICAgIHJiKGIsIGUpOwogICAgaWYgKG51bGwgPT09IGIuc3RhdGVOb2RlKQogICAgICBudWxsICE9PSBhICYmCiAgICAgICAgKChhLmFsdGVybmF0ZSA9IG51bGwpLCAoYi5hbHRlcm5hdGUgPSBudWxsKSwgKGIuZWZmZWN0VGFnIHw9IDIpKSwKICAgICAgICBZZyhiLCBjLCBkKSwKICAgICAgICBwZShiLCBjLCBkLCBlKSwKICAgICAgICAoZCA9ICEwKTsKICAgIGVsc2UgaWYgKG51bGwgPT09IGEpIHsKICAgICAgdmFyIGcgPSBiLnN0YXRlTm9kZSwKICAgICAgICBoID0gYi5tZW1vaXplZFByb3BzOwogICAgICBnLnByb3BzID0gaDsKICAgICAgdmFyIG0gPSBnLmNvbnRleHQsCiAgICAgICAgbiA9IGMuY29udGV4dFR5cGU7CiAgICAgICJvYmplY3QiID09PSB0eXBlb2YgbiAmJiBudWxsICE9PSBuCiAgICAgICAgPyAobiA9IFcobikpCiAgICAgICAgOiAoKG4gPSBOKGMpID8gUmEgOiBCLmN1cnJlbnQpLCAobiA9IHBiKGIsIG4pKSk7CiAgICAgIHZhciBsID0gYy5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMsCiAgICAgICAgayA9CiAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgbCB8fAogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGcuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGU7CiAgICAgIGsgfHwKICAgICAgICAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGcuVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgJiYKICAgICAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiBnLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMpIHx8CiAgICAgICAgKChoICE9PSBkIHx8IG0gIT09IG4pICYmIFpnKGIsIGcsIGQsIG4pKTsKICAgICAgR2EgPSAhMTsKICAgICAgdmFyIHAgPSBiLm1lbW9pemVkU3RhdGU7CiAgICAgIGcuc3RhdGUgPSBwOwogICAgICBRYihiLCBkLCBnLCBlKTsKICAgICAgbSA9IGIubWVtb2l6ZWRTdGF0ZTsKICAgICAgaCAhPT0gZCB8fCBwICE9PSBtIHx8IEcuY3VycmVudCB8fCBHYQogICAgICAgID8gKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBsICYmIChMYyhiLCBjLCBsLCBkKSwgKG0gPSBiLm1lbW9pemVkU3RhdGUpKSwKICAgICAgICAgIChoID0gR2EgfHwgWGcoYiwgYywgaCwgZCwgcCwgbSwgbikpCiAgICAgICAgICAgID8gKGsgfHwKICAgICAgICAgICAgICAgICgiZnVuY3Rpb24iICE9PSB0eXBlb2YgZy5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50ICYmCiAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiBnLmNvbXBvbmVudFdpbGxNb3VudCkgfHwKICAgICAgICAgICAgICAgICgiZnVuY3Rpb24iID09PSB0eXBlb2YgZy5jb21wb25lbnRXaWxsTW91bnQgJiYKICAgICAgICAgICAgICAgICAgZy5jb21wb25lbnRXaWxsTW91bnQoKSwKICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBnLlVOU0FGRV9jb21wb25lbnRXaWxsTW91bnQgJiYKICAgICAgICAgICAgICAgICAgZy5VTlNBRkVfY29tcG9uZW50V2lsbE1vdW50KCkpLAogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBnLmNvbXBvbmVudERpZE1vdW50ICYmIChiLmVmZmVjdFRhZyB8PSA0KSkKICAgICAgICAgICAgOiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGcuY29tcG9uZW50RGlkTW91bnQgJiYgKGIuZWZmZWN0VGFnIHw9IDQpLAogICAgICAgICAgICAgIChiLm1lbW9pemVkUHJvcHMgPSBkKSwKICAgICAgICAgICAgICAoYi5tZW1vaXplZFN0YXRlID0gbSkpLAogICAgICAgICAgKGcucHJvcHMgPSBkKSwKICAgICAgICAgIChnLnN0YXRlID0gbSksCiAgICAgICAgICAoZy5jb250ZXh0ID0gbiksCiAgICAgICAgICAoZCA9IGgpKQogICAgICAgIDogKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBnLmNvbXBvbmVudERpZE1vdW50ICYmIChiLmVmZmVjdFRhZyB8PSA0KSwKICAgICAgICAgIChkID0gITEpKTsKICAgIH0gZWxzZQogICAgICAoZyA9IGIuc3RhdGVOb2RlKSwKICAgICAgICBvZShhLCBiKSwKICAgICAgICAoaCA9IGIubWVtb2l6ZWRQcm9wcyksCiAgICAgICAgKGcucHJvcHMgPSBiLnR5cGUgPT09IGIuZWxlbWVudFR5cGUgPyBoIDogYWEoYi50eXBlLCBoKSksCiAgICAgICAgKG0gPSBnLmNvbnRleHQpLAogICAgICAgIChuID0gYy5jb250ZXh0VHlwZSksCiAgICAgICAgIm9iamVjdCIgPT09IHR5cGVvZiBuICYmIG51bGwgIT09IG4KICAgICAgICAgID8gKG4gPSBXKG4pKQogICAgICAgICAgOiAoKG4gPSBOKGMpID8gUmEgOiBCLmN1cnJlbnQpLCAobiA9IHBiKGIsIG4pKSksCiAgICAgICAgKGwgPSBjLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyksCiAgICAgICAgKGsgPQogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGwgfHwKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBnLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlKSB8fAogICAgICAgICAgKCJmdW5jdGlvbiIgIT09IHR5cGVvZiBnLlVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzICYmCiAgICAgICAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiBnLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMpIHx8CiAgICAgICAgICAoKGggIT09IGQgfHwgbSAhPT0gbikgJiYgWmcoYiwgZywgZCwgbikpLAogICAgICAgIChHYSA9ICExKSwKICAgICAgICAobSA9IGIubWVtb2l6ZWRTdGF0ZSksCiAgICAgICAgKGcuc3RhdGUgPSBtKSwKICAgICAgICBRYihiLCBkLCBnLCBlKSwKICAgICAgICAocCA9IGIubWVtb2l6ZWRTdGF0ZSksCiAgICAgICAgaCAhPT0gZCB8fCBtICE9PSBwIHx8IEcuY3VycmVudCB8fCBHYQogICAgICAgICAgPyAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGwgJiYgKExjKGIsIGMsIGwsIGQpLCAocCA9IGIubWVtb2l6ZWRTdGF0ZSkpLAogICAgICAgICAgICAobCA9IEdhIHx8IFhnKGIsIGMsIGgsIGQsIG0sIHAsIG4pKQogICAgICAgICAgICAgID8gKGsgfHwKICAgICAgICAgICAgICAgICAgKCJmdW5jdGlvbiIgIT09IHR5cGVvZiBnLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlICYmCiAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGcuY29tcG9uZW50V2lsbFVwZGF0ZSkgfHwKICAgICAgICAgICAgICAgICAgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBnLmNvbXBvbmVudFdpbGxVcGRhdGUgJiYKICAgICAgICAgICAgICAgICAgICBnLmNvbXBvbmVudFdpbGxVcGRhdGUoZCwgcCwgbiksCiAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBnLlVOU0FGRV9jb21wb25lbnRXaWxsVXBkYXRlICYmCiAgICAgICAgICAgICAgICAgICAgZy5VTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZShkLCBwLCBuKSksCiAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZy5jb21wb25lbnREaWRVcGRhdGUgJiYKICAgICAgICAgICAgICAgICAgKGIuZWZmZWN0VGFnIHw9IDQpLAogICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGcuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUgJiYKICAgICAgICAgICAgICAgICAgKGIuZWZmZWN0VGFnIHw9IDI1NikpCiAgICAgICAgICAgICAgOiAoImZ1bmN0aW9uIiAhPT0gdHlwZW9mIGcuY29tcG9uZW50RGlkVXBkYXRlIHx8CiAgICAgICAgICAgICAgICAgIChoID09PSBhLm1lbW9pemVkUHJvcHMgJiYgbSA9PT0gYS5tZW1vaXplZFN0YXRlKSB8fAogICAgICAgICAgICAgICAgICAoYi5lZmZlY3RUYWcgfD0gNCksCiAgICAgICAgICAgICAgICAiZnVuY3Rpb24iICE9PSB0eXBlb2YgZy5nZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZSB8fAogICAgICAgICAgICAgICAgICAoaCA9PT0gYS5tZW1vaXplZFByb3BzICYmIG0gPT09IGEubWVtb2l6ZWRTdGF0ZSkgfHwKICAgICAgICAgICAgICAgICAgKGIuZWZmZWN0VGFnIHw9IDI1NiksCiAgICAgICAgICAgICAgICAoYi5tZW1vaXplZFByb3BzID0gZCksCiAgICAgICAgICAgICAgICAoYi5tZW1vaXplZFN0YXRlID0gcCkpLAogICAgICAgICAgICAoZy5wcm9wcyA9IGQpLAogICAgICAgICAgICAoZy5zdGF0ZSA9IHApLAogICAgICAgICAgICAoZy5jb250ZXh0ID0gbiksCiAgICAgICAgICAgIChkID0gbCkpCiAgICAgICAgICA6ICgiZnVuY3Rpb24iICE9PSB0eXBlb2YgZy5jb21wb25lbnREaWRVcGRhdGUgfHwKICAgICAgICAgICAgICAoaCA9PT0gYS5tZW1vaXplZFByb3BzICYmIG0gPT09IGEubWVtb2l6ZWRTdGF0ZSkgfHwKICAgICAgICAgICAgICAoYi5lZmZlY3RUYWcgfD0gNCksCiAgICAgICAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiBnLmdldFNuYXBzaG90QmVmb3JlVXBkYXRlIHx8CiAgICAgICAgICAgICAgKGggPT09IGEubWVtb2l6ZWRQcm9wcyAmJiBtID09PSBhLm1lbW9pemVkU3RhdGUpIHx8CiAgICAgICAgICAgICAgKGIuZWZmZWN0VGFnIHw9IDI1NiksCiAgICAgICAgICAgIChkID0gITEpKTsKICAgIHJldHVybiBJZShhLCBiLCBjLCBkLCBmLCBlKTsKICB9CgogIGZ1bmN0aW9uIEllKGEsIGIsIGMsIGQsIGUsIGYpIHsKICAgIHFoKGEsIGIpOwogICAgdmFyIGcgPSAwICE9PSAoYi5lZmZlY3RUYWcgJiA2NCk7CiAgICBpZiAoIWQgJiYgIWcpIHJldHVybiBlICYmIEhnKGIsIGMsICExKSwgc2EoYSwgYiwgZik7CiAgICBkID0gYi5zdGF0ZU5vZGU7CiAgICBnai5jdXJyZW50ID0gYjsKICAgIHZhciBoID0KICAgICAgZyAmJiAiZnVuY3Rpb24iICE9PSB0eXBlb2YgYy5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IgPyBudWxsIDogZC5yZW5kZXIoKTsKICAgIGIuZWZmZWN0VGFnIHw9IDE7CiAgICBudWxsICE9PSBhICYmIGcKICAgICAgPyAoKGIuY2hpbGQgPSB3YihiLCBhLmNoaWxkLCBudWxsLCBmKSksIChiLmNoaWxkID0gd2IoYiwgbnVsbCwgaCwgZikpKQogICAgICA6IFQoYSwgYiwgaCwgZik7CiAgICBiLm1lbW9pemVkU3RhdGUgPSBkLnN0YXRlOwogICAgZSAmJiBIZyhiLCBjLCAhMCk7CiAgICByZXR1cm4gYi5jaGlsZDsKICB9CgogIGZ1bmN0aW9uIHNoKGEpIHsKICAgIHZhciBiID0gYS5zdGF0ZU5vZGU7CiAgICBiLnBlbmRpbmdDb250ZXh0CiAgICAgID8gRmcoYSwgYi5wZW5kaW5nQ29udGV4dCwgYi5wZW5kaW5nQ29udGV4dCAhPT0gYi5jb250ZXh0KQogICAgICA6IGIuY29udGV4dCAmJiBGZyhhLCBiLmNvbnRleHQsICExKTsKICAgIHNlKGEsIGIuY29udGFpbmVySW5mbyk7CiAgfQoKICBmdW5jdGlvbiB0aChhLCBiLCBjKSB7CiAgICB2YXIgZCA9IGIubW9kZSwKICAgICAgZSA9IGIucGVuZGluZ1Byb3BzLAogICAgICBmID0gRC5jdXJyZW50LAogICAgICBnID0gITEsCiAgICAgIGg7CiAgICAoaCA9IDAgIT09IChiLmVmZmVjdFRhZyAmIDY0KSkgfHwKICAgICAgKGggPSAwICE9PSAoZiAmIDIpICYmIChudWxsID09PSBhIHx8IG51bGwgIT09IGEubWVtb2l6ZWRTdGF0ZSkpOwogICAgaAogICAgICA/ICgoZyA9ICEwKSwgKGIuZWZmZWN0VGFnICY9IC02NSkpCiAgICAgIDogKG51bGwgIT09IGEgJiYgbnVsbCA9PT0gYS5tZW1vaXplZFN0YXRlKSB8fAogICAgICAgIHZvaWQgMCA9PT0gZS5mYWxsYmFjayB8fAogICAgICAgICEwID09PSBlLnVuc3RhYmxlX2F2b2lkVGhpc0ZhbGxiYWNrIHx8CiAgICAgICAgKGYgfD0gMSk7CiAgICB5KEQsIGYgJiAxKTsKICAgIGlmIChudWxsID09PSBhKSB7CiAgICAgIHZvaWQgMCAhPT0gZS5mYWxsYmFjayAmJiBEZShiKTsKICAgICAgaWYgKGcpIHsKICAgICAgICBnID0gZS5mYWxsYmFjazsKICAgICAgICBlID0gSGEobnVsbCwgZCwgMCwgbnVsbCk7CiAgICAgICAgZS5yZXR1cm4gPSBiOwogICAgICAgIGlmICgwID09PSAoYi5tb2RlICYgMikpCiAgICAgICAgICBmb3IgKAogICAgICAgICAgICBhID0gbnVsbCAhPT0gYi5tZW1vaXplZFN0YXRlID8gYi5jaGlsZC5jaGlsZCA6IGIuY2hpbGQsIGUuY2hpbGQgPSBhOwogICAgICAgICAgICBudWxsICE9PSBhOwoKICAgICAgICAgICkKICAgICAgICAgICAgKGEucmV0dXJuID0gZSksIChhID0gYS5zaWJsaW5nKTsKICAgICAgICBjID0gSGEoZywgZCwgYywgbnVsbCk7CiAgICAgICAgYy5yZXR1cm4gPSBiOwogICAgICAgIGUuc2libGluZyA9IGM7CiAgICAgICAgYi5tZW1vaXplZFN0YXRlID0gSmU7CiAgICAgICAgYi5jaGlsZCA9IGU7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0KICAgICAgZCA9IGUuY2hpbGRyZW47CiAgICAgIGIubWVtb2l6ZWRTdGF0ZSA9IG51bGw7CiAgICAgIHJldHVybiAoYi5jaGlsZCA9IEZlKGIsIG51bGwsIGQsIGMpKTsKICAgIH0KICAgIGlmIChudWxsICE9PSBhLm1lbW9pemVkU3RhdGUpIHsKICAgICAgYSA9IGEuY2hpbGQ7CiAgICAgIGQgPSBhLnNpYmxpbmc7CiAgICAgIGlmIChnKSB7CiAgICAgICAgZSA9IGUuZmFsbGJhY2s7CiAgICAgICAgYyA9IFNhKGEsIGEucGVuZGluZ1Byb3BzKTsKICAgICAgICBjLnJldHVybiA9IGI7CiAgICAgICAgaWYgKAogICAgICAgICAgMCA9PT0gKGIubW9kZSAmIDIpICYmCiAgICAgICAgICAoKGcgPSBudWxsICE9PSBiLm1lbW9pemVkU3RhdGUgPyBiLmNoaWxkLmNoaWxkIDogYi5jaGlsZCksCiAgICAgICAgICBnICE9PSBhLmNoaWxkKQogICAgICAgICkKICAgICAgICAgIGZvciAoYy5jaGlsZCA9IGc7IG51bGwgIT09IGc7ICkgKGcucmV0dXJuID0gYyksIChnID0gZy5zaWJsaW5nKTsKICAgICAgICBkID0gU2EoZCwgZSk7CiAgICAgICAgZC5yZXR1cm4gPSBiOwogICAgICAgIGMuc2libGluZyA9IGQ7CiAgICAgICAgYy5jaGlsZEV4cGlyYXRpb25UaW1lID0gMDsKICAgICAgICBiLm1lbW9pemVkU3RhdGUgPSBKZTsKICAgICAgICBiLmNoaWxkID0gYzsKICAgICAgICByZXR1cm4gZDsKICAgICAgfQogICAgICBjID0gd2IoYiwgYS5jaGlsZCwgZS5jaGlsZHJlbiwgYyk7CiAgICAgIGIubWVtb2l6ZWRTdGF0ZSA9IG51bGw7CiAgICAgIHJldHVybiAoYi5jaGlsZCA9IGMpOwogICAgfQogICAgYSA9IGEuY2hpbGQ7CiAgICBpZiAoZykgewogICAgICBnID0gZS5mYWxsYmFjazsKICAgICAgZSA9IEhhKG51bGwsIGQsIDAsIG51bGwpOwogICAgICBlLnJldHVybiA9IGI7CiAgICAgIGUuY2hpbGQgPSBhOwogICAgICBudWxsICE9PSBhICYmIChhLnJldHVybiA9IGUpOwogICAgICBpZiAoMCA9PT0gKGIubW9kZSAmIDIpKQogICAgICAgIGZvciAoCiAgICAgICAgICBhID0gbnVsbCAhPT0gYi5tZW1vaXplZFN0YXRlID8gYi5jaGlsZC5jaGlsZCA6IGIuY2hpbGQsIGUuY2hpbGQgPSBhOwogICAgICAgICAgbnVsbCAhPT0gYTsKCiAgICAgICAgKQogICAgICAgICAgKGEucmV0dXJuID0gZSksIChhID0gYS5zaWJsaW5nKTsKICAgICAgYyA9IEhhKGcsIGQsIGMsIG51bGwpOwogICAgICBjLnJldHVybiA9IGI7CiAgICAgIGUuc2libGluZyA9IGM7CiAgICAgIGMuZWZmZWN0VGFnIHw9IDI7CiAgICAgIGUuY2hpbGRFeHBpcmF0aW9uVGltZSA9IDA7CiAgICAgIGIubWVtb2l6ZWRTdGF0ZSA9IEplOwogICAgICBiLmNoaWxkID0gZTsKICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICBiLm1lbW9pemVkU3RhdGUgPSBudWxsOwogICAgcmV0dXJuIChiLmNoaWxkID0gd2IoYiwgYSwgZS5jaGlsZHJlbiwgYykpOwogIH0KCiAgZnVuY3Rpb24gdWgoYSwgYikgewogICAgYS5leHBpcmF0aW9uVGltZSA8IGIgJiYgKGEuZXhwaXJhdGlvblRpbWUgPSBiKTsKICAgIHZhciBjID0gYS5hbHRlcm5hdGU7CiAgICBudWxsICE9PSBjICYmIGMuZXhwaXJhdGlvblRpbWUgPCBiICYmIChjLmV4cGlyYXRpb25UaW1lID0gYik7CiAgICBTZyhhLnJldHVybiwgYik7CiAgfQoKICBmdW5jdGlvbiBLZShhLCBiLCBjLCBkLCBlLCBmKSB7CiAgICB2YXIgZyA9IGEubWVtb2l6ZWRTdGF0ZTsKICAgIG51bGwgPT09IGcKICAgICAgPyAoYS5tZW1vaXplZFN0YXRlID0gewogICAgICAgICAgaXNCYWNrd2FyZHM6IGIsCiAgICAgICAgICByZW5kZXJpbmc6IG51bGwsCiAgICAgICAgICByZW5kZXJpbmdTdGFydFRpbWU6IDAsCiAgICAgICAgICBsYXN0OiBkLAogICAgICAgICAgdGFpbDogYywKICAgICAgICAgIHRhaWxFeHBpcmF0aW9uOiAwLAogICAgICAgICAgdGFpbE1vZGU6IGUsCiAgICAgICAgICBsYXN0RWZmZWN0OiBmLAogICAgICAgIH0pCiAgICAgIDogKChnLmlzQmFja3dhcmRzID0gYiksCiAgICAgICAgKGcucmVuZGVyaW5nID0gbnVsbCksCiAgICAgICAgKGcucmVuZGVyaW5nU3RhcnRUaW1lID0gMCksCiAgICAgICAgKGcubGFzdCA9IGQpLAogICAgICAgIChnLnRhaWwgPSBjKSwKICAgICAgICAoZy50YWlsRXhwaXJhdGlvbiA9IDApLAogICAgICAgIChnLnRhaWxNb2RlID0gZSksCiAgICAgICAgKGcubGFzdEVmZmVjdCA9IGYpKTsKICB9CgogIGZ1bmN0aW9uIHZoKGEsIGIsIGMpIHsKICAgIHZhciBkID0gYi5wZW5kaW5nUHJvcHMsCiAgICAgIGUgPSBkLnJldmVhbE9yZGVyLAogICAgICBmID0gZC50YWlsOwogICAgVChhLCBiLCBkLmNoaWxkcmVuLCBjKTsKICAgIGQgPSBELmN1cnJlbnQ7CiAgICBpZiAoMCAhPT0gKGQgJiAyKSkgKGQgPSAoZCAmIDEpIHwgMiksIChiLmVmZmVjdFRhZyB8PSA2NCk7CiAgICBlbHNlIHsKICAgICAgaWYgKG51bGwgIT09IGEgJiYgMCAhPT0gKGEuZWZmZWN0VGFnICYgNjQpKQogICAgICAgIGE6IGZvciAoYSA9IGIuY2hpbGQ7IG51bGwgIT09IGE7ICkgewogICAgICAgICAgaWYgKDEzID09PSBhLnRhZykgbnVsbCAhPT0gYS5tZW1vaXplZFN0YXRlICYmIHVoKGEsIGMpOwogICAgICAgICAgZWxzZSBpZiAoMTkgPT09IGEudGFnKSB1aChhLCBjKTsKICAgICAgICAgIGVsc2UgaWYgKG51bGwgIT09IGEuY2hpbGQpIHsKICAgICAgICAgICAgYS5jaGlsZC5yZXR1cm4gPSBhOwogICAgICAgICAgICBhID0gYS5jaGlsZDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoYSA9PT0gYikgYnJlYWsgYTsKICAgICAgICAgIGZvciAoOyBudWxsID09PSBhLnNpYmxpbmc7ICkgewogICAgICAgICAgICBpZiAobnVsbCA9PT0gYS5yZXR1cm4gfHwgYS5yZXR1cm4gPT09IGIpIGJyZWFrIGE7CiAgICAgICAgICAgIGEgPSBhLnJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGEuc2libGluZy5yZXR1cm4gPSBhLnJldHVybjsKICAgICAgICAgIGEgPSBhLnNpYmxpbmc7CiAgICAgICAgfQogICAgICBkICY9IDE7CiAgICB9CiAgICB5KEQsIGQpOwogICAgaWYgKDAgPT09IChiLm1vZGUgJiAyKSkgYi5tZW1vaXplZFN0YXRlID0gbnVsbDsKICAgIGVsc2UKICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgY2FzZSAiZm9yd2FyZHMiOgogICAgICAgICAgYyA9IGIuY2hpbGQ7CiAgICAgICAgICBmb3IgKGUgPSBudWxsOyBudWxsICE9PSBjOyApCiAgICAgICAgICAgIChhID0gYy5hbHRlcm5hdGUpLAogICAgICAgICAgICAgIG51bGwgIT09IGEgJiYgbnVsbCA9PT0gUmMoYSkgJiYgKGUgPSBjKSwKICAgICAgICAgICAgICAoYyA9IGMuc2libGluZyk7CiAgICAgICAgICBjID0gZTsKICAgICAgICAgIG51bGwgPT09IGMKICAgICAgICAgICAgPyAoKGUgPSBiLmNoaWxkKSwgKGIuY2hpbGQgPSBudWxsKSkKICAgICAgICAgICAgOiAoKGUgPSBjLnNpYmxpbmcpLCAoYy5zaWJsaW5nID0gbnVsbCkpOwogICAgICAgICAgS2UoYiwgITEsIGUsIGMsIGYsIGIubGFzdEVmZmVjdCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJiYWNrd2FyZHMiOgogICAgICAgICAgYyA9IG51bGw7CiAgICAgICAgICBlID0gYi5jaGlsZDsKICAgICAgICAgIGZvciAoYi5jaGlsZCA9IG51bGw7IG51bGwgIT09IGU7ICkgewogICAgICAgICAgICBhID0gZS5hbHRlcm5hdGU7CiAgICAgICAgICAgIGlmIChudWxsICE9PSBhICYmIG51bGwgPT09IFJjKGEpKSB7CiAgICAgICAgICAgICAgYi5jaGlsZCA9IGU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYSA9IGUuc2libGluZzsKICAgICAgICAgICAgZS5zaWJsaW5nID0gYzsKICAgICAgICAgICAgYyA9IGU7CiAgICAgICAgICAgIGUgPSBhOwogICAgICAgICAgfQogICAgICAgICAgS2UoYiwgITAsIGMsIG51bGwsIGYsIGIubGFzdEVmZmVjdCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJ0b2dldGhlciI6CiAgICAgICAgICBLZShiLCAhMSwgbnVsbCwgbnVsbCwgdm9pZCAwLCBiLmxhc3RFZmZlY3QpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGIubWVtb2l6ZWRTdGF0ZSA9IG51bGw7CiAgICAgIH0KICAgIHJldHVybiBiLmNoaWxkOwogIH0KCiAgZnVuY3Rpb24gc2EoYSwgYiwgYykgewogICAgbnVsbCAhPT0gYSAmJiAoYi5kZXBlbmRlbmNpZXMgPSBhLmRlcGVuZGVuY2llcyk7CiAgICB2YXIgZCA9IGIuZXhwaXJhdGlvblRpbWU7CiAgICAwICE9PSBkICYmIEtjKGQpOwogICAgaWYgKGIuY2hpbGRFeHBpcmF0aW9uVGltZSA8IGMpIHJldHVybiBudWxsOwogICAgaWYgKG51bGwgIT09IGEgJiYgYi5jaGlsZCAhPT0gYS5jaGlsZCkgdGhyb3cgRXJyb3IoaygxNTMpKTsKICAgIGlmIChudWxsICE9PSBiLmNoaWxkKSB7CiAgICAgIGEgPSBiLmNoaWxkOwogICAgICBjID0gU2EoYSwgYS5wZW5kaW5nUHJvcHMpOwogICAgICBiLmNoaWxkID0gYzsKICAgICAgZm9yIChjLnJldHVybiA9IGI7IG51bGwgIT09IGEuc2libGluZzsgKQogICAgICAgIChhID0gYS5zaWJsaW5nKSwKICAgICAgICAgIChjID0gYy5zaWJsaW5nID0gU2EoYSwgYS5wZW5kaW5nUHJvcHMpKSwKICAgICAgICAgIChjLnJldHVybiA9IGIpOwogICAgICBjLnNpYmxpbmcgPSBudWxsOwogICAgfQogICAgcmV0dXJuIGIuY2hpbGQ7CiAgfQoKICBmdW5jdGlvbiAkYyhhLCBiKSB7CiAgICBzd2l0Y2ggKGEudGFpbE1vZGUpIHsKICAgICAgY2FzZSAiaGlkZGVuIjoKICAgICAgICBiID0gYS50YWlsOwogICAgICAgIGZvciAodmFyIGMgPSBudWxsOyBudWxsICE9PSBiOyApCiAgICAgICAgICBudWxsICE9PSBiLmFsdGVybmF0ZSAmJiAoYyA9IGIpLCAoYiA9IGIuc2libGluZyk7CiAgICAgICAgbnVsbCA9PT0gYyA/IChhLnRhaWwgPSBudWxsKSA6IChjLnNpYmxpbmcgPSBudWxsKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAiY29sbGFwc2VkIjoKICAgICAgICBjID0gYS50YWlsOwogICAgICAgIGZvciAodmFyIGQgPSBudWxsOyBudWxsICE9PSBjOyApCiAgICAgICAgICBudWxsICE9PSBjLmFsdGVybmF0ZSAmJiAoZCA9IGMpLCAoYyA9IGMuc2libGluZyk7CiAgICAgICAgbnVsbCA9PT0gZAogICAgICAgICAgPyBiIHx8IG51bGwgPT09IGEudGFpbAogICAgICAgICAgICA/IChhLnRhaWwgPSBudWxsKQogICAgICAgICAgICA6IChhLnRhaWwuc2libGluZyA9IG51bGwpCiAgICAgICAgICA6IChkLnNpYmxpbmcgPSBudWxsKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGhqKGEsIGIsIGMpIHsKICAgIHZhciBkID0gYi5wZW5kaW5nUHJvcHM7CiAgICBzd2l0Y2ggKGIudGFnKSB7CiAgICAgIGNhc2UgMjoKICAgICAgY2FzZSAxNjoKICAgICAgY2FzZSAxNToKICAgICAgY2FzZSAwOgogICAgICBjYXNlIDExOgogICAgICBjYXNlIDc6CiAgICAgIGNhc2UgODoKICAgICAgY2FzZSAxMjoKICAgICAgY2FzZSA5OgogICAgICBjYXNlIDE0OgogICAgICAgIHJldHVybiBudWxsOwogICAgICBjYXNlIDE6CiAgICAgICAgcmV0dXJuIE4oYi50eXBlKSAmJiAocShHKSwgcShCKSksIG51bGw7CiAgICAgIGNhc2UgMzoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgdGIoKSwKICAgICAgICAgIHEoRyksCiAgICAgICAgICBxKEIpLAogICAgICAgICAgKGMgPSBiLnN0YXRlTm9kZSksCiAgICAgICAgICBjLnBlbmRpbmdDb250ZXh0ICYmCiAgICAgICAgICAgICgoYy5jb250ZXh0ID0gYy5wZW5kaW5nQ29udGV4dCksIChjLnBlbmRpbmdDb250ZXh0ID0gbnVsbCkpLAogICAgICAgICAgKG51bGwgIT09IGEgJiYgbnVsbCAhPT0gYS5jaGlsZCkgfHwgIVpjKGIpIHx8IChiLmVmZmVjdFRhZyB8PSA0KSwKICAgICAgICAgIHdoKGIpLAogICAgICAgICAgbnVsbAogICAgICAgICk7CiAgICAgIGNhc2UgNToKICAgICAgICB0ZShiKTsKICAgICAgICBjID0gVGEoVGIuY3VycmVudCk7CiAgICAgICAgdmFyIGUgPSBiLnR5cGU7CiAgICAgICAgaWYgKG51bGwgIT09IGEgJiYgbnVsbCAhPSBiLnN0YXRlTm9kZSkKICAgICAgICAgIGlqKGEsIGIsIGUsIGQsIGMpLCBhLnJlZiAhPT0gYi5yZWYgJiYgKGIuZWZmZWN0VGFnIHw9IDEyOCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBpZiAoIWQpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT09IGIuc3RhdGVOb2RlKSB0aHJvdyBFcnJvcihrKDE2NikpOwogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGEgPSBUYShqYS5jdXJyZW50KTsKICAgICAgICAgIGlmIChaYyhiKSkgewogICAgICAgICAgICBkID0gYi5zdGF0ZU5vZGU7CiAgICAgICAgICAgIGUgPSBiLnR5cGU7CiAgICAgICAgICAgIHZhciBmID0gYi5tZW1vaXplZFByb3BzOwogICAgICAgICAgICBkW0FhXSA9IGI7CiAgICAgICAgICAgIGRbdmNdID0gZjsKICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgY2FzZSAiaWZyYW1lIjoKICAgICAgICAgICAgICBjYXNlICJvYmplY3QiOgogICAgICAgICAgICAgIGNhc2UgImVtYmVkIjoKICAgICAgICAgICAgICAgIHcoImxvYWQiLCBkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgInZpZGVvIjoKICAgICAgICAgICAgICBjYXNlICJhdWRpbyI6CiAgICAgICAgICAgICAgICBmb3IgKGEgPSAwOyBhIDwgRGIubGVuZ3RoOyBhKyspIHcoRGJbYV0sIGQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAic291cmNlIjoKICAgICAgICAgICAgICAgIHcoImVycm9yIiwgZCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJpbWciOgogICAgICAgICAgICAgIGNhc2UgImltYWdlIjoKICAgICAgICAgICAgICBjYXNlICJsaW5rIjoKICAgICAgICAgICAgICAgIHcoImVycm9yIiwgZCk7CiAgICAgICAgICAgICAgICB3KCJsb2FkIiwgZCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJmb3JtIjoKICAgICAgICAgICAgICAgIHcoInJlc2V0IiwgZCk7CiAgICAgICAgICAgICAgICB3KCJzdWJtaXQiLCBkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgImRldGFpbHMiOgogICAgICAgICAgICAgICAgdygidG9nZ2xlIiwgZCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJpbnB1dCI6CiAgICAgICAgICAgICAgICBIZihkLCBmKTsKICAgICAgICAgICAgICAgIHcoImludmFsaWQiLCBkKTsKICAgICAgICAgICAgICAgIG9hKGMsICJvbkNoYW5nZSIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgICAgIGQuX3dyYXBwZXJTdGF0ZSA9IHsgd2FzTXVsdGlwbGU6ICEhZi5tdWx0aXBsZSB9OwogICAgICAgICAgICAgICAgdygiaW52YWxpZCIsIGQpOwogICAgICAgICAgICAgICAgb2EoYywgIm9uQ2hhbmdlIik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJ0ZXh0YXJlYSI6CiAgICAgICAgICAgICAgICBLZihkLCBmKSwgdygiaW52YWxpZCIsIGQpLCBvYShjLCAib25DaGFuZ2UiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBVZChlLCBmKTsKICAgICAgICAgICAgYSA9IG51bGw7CiAgICAgICAgICAgIGZvciAodmFyIGcgaW4gZikKICAgICAgICAgICAgICBpZiAoZi5oYXNPd25Qcm9wZXJ0eShnKSkgewogICAgICAgICAgICAgICAgdmFyIGggPSBmW2ddOwogICAgICAgICAgICAgICAgImNoaWxkcmVuIiA9PT0gZwogICAgICAgICAgICAgICAgICA/ICJzdHJpbmciID09PSB0eXBlb2YgaAogICAgICAgICAgICAgICAgICAgID8gZC50ZXh0Q29udGVudCAhPT0gaCAmJiAoYSA9IFsiY2hpbGRyZW4iLCBoXSkKICAgICAgICAgICAgICAgICAgICA6ICJudW1iZXIiID09PSB0eXBlb2YgaCAmJgogICAgICAgICAgICAgICAgICAgICAgZC50ZXh0Q29udGVudCAhPT0gIiIgKyBoICYmCiAgICAgICAgICAgICAgICAgICAgICAoYSA9IFsiY2hpbGRyZW4iLCAiIiArIGhdKQogICAgICAgICAgICAgICAgICA6IGRiLmhhc093blByb3BlcnR5KGcpICYmIG51bGwgIT0gaCAmJiBvYShjLCBnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgICAgICAgIG1jKGQpOwogICAgICAgICAgICAgICAgSmYoZCwgZiwgITApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAidGV4dGFyZWEiOgogICAgICAgICAgICAgICAgbWMoZCk7CiAgICAgICAgICAgICAgICBNZihkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICAgICAgY2FzZSAib3B0aW9uIjoKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZi5vbkNsaWNrICYmIChkLm9uY2xpY2sgPSB1Yyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYyA9IGE7CiAgICAgICAgICAgIGIudXBkYXRlUXVldWUgPSBjOwogICAgICAgICAgICBudWxsICE9PSBjICYmIChiLmVmZmVjdFRhZyB8PSA0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGcgPSA5ID09PSBjLm5vZGVUeXBlID8gYyA6IGMub3duZXJEb2N1bWVudDsKICAgICAgICAgICAgImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiID09PSBhICYmIChhID0gTmYoZSkpOwogICAgICAgICAgICAiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgPT09IGEKICAgICAgICAgICAgICA/ICJzY3JpcHQiID09PSBlCiAgICAgICAgICAgICAgICA/ICgoYSA9IGcuY3JlYXRlRWxlbWVudCgiZGl2IikpLAogICAgICAgICAgICAgICAgICAoYS5pbm5lckhUTUwgPSAiPHNjcmlwdD5ceDNjL3NjcmlwdD4iKSwKICAgICAgICAgICAgICAgICAgKGEgPSBhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCkpKQogICAgICAgICAgICAgICAgOiAic3RyaW5nIiA9PT0gdHlwZW9mIGQuaXMKICAgICAgICAgICAgICAgID8gKGEgPSBnLmNyZWF0ZUVsZW1lbnQoZSwgeyBpczogZC5pcyB9KSkKICAgICAgICAgICAgICAgIDogKChhID0gZy5jcmVhdGVFbGVtZW50KGUpKSwKICAgICAgICAgICAgICAgICAgInNlbGVjdCIgPT09IGUgJiYKICAgICAgICAgICAgICAgICAgICAoKGcgPSBhKSwKICAgICAgICAgICAgICAgICAgICBkLm11bHRpcGxlCiAgICAgICAgICAgICAgICAgICAgICA/IChnLm11bHRpcGxlID0gITApCiAgICAgICAgICAgICAgICAgICAgICA6IGQuc2l6ZSAmJiAoZy5zaXplID0gZC5zaXplKSkpCiAgICAgICAgICAgICAgOiAoYSA9IGcuY3JlYXRlRWxlbWVudE5TKGEsIGUpKTsKICAgICAgICAgICAgYVtBYV0gPSBiOwogICAgICAgICAgICBhW3ZjXSA9IGQ7CiAgICAgICAgICAgIGpqKGEsIGIsICExLCAhMSk7CiAgICAgICAgICAgIGIuc3RhdGVOb2RlID0gYTsKICAgICAgICAgICAgZyA9IFZkKGUsIGQpOwogICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICBjYXNlICJpZnJhbWUiOgogICAgICAgICAgICAgIGNhc2UgIm9iamVjdCI6CiAgICAgICAgICAgICAgY2FzZSAiZW1iZWQiOgogICAgICAgICAgICAgICAgdygibG9hZCIsIGEpOwogICAgICAgICAgICAgICAgaCA9IGQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJ2aWRlbyI6CiAgICAgICAgICAgICAgY2FzZSAiYXVkaW8iOgogICAgICAgICAgICAgICAgZm9yIChoID0gMDsgaCA8IERiLmxlbmd0aDsgaCsrKSB3KERiW2hdLCBhKTsKICAgICAgICAgICAgICAgIGggPSBkOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAic291cmNlIjoKICAgICAgICAgICAgICAgIHcoImVycm9yIiwgYSk7CiAgICAgICAgICAgICAgICBoID0gZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgImltZyI6CiAgICAgICAgICAgICAgY2FzZSAiaW1hZ2UiOgogICAgICAgICAgICAgIGNhc2UgImxpbmsiOgogICAgICAgICAgICAgICAgdygiZXJyb3IiLCBhKTsKICAgICAgICAgICAgICAgIHcoImxvYWQiLCBhKTsKICAgICAgICAgICAgICAgIGggPSBkOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAiZm9ybSI6CiAgICAgICAgICAgICAgICB3KCJyZXNldCIsIGEpOwogICAgICAgICAgICAgICAgdygic3VibWl0IiwgYSk7CiAgICAgICAgICAgICAgICBoID0gZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgImRldGFpbHMiOgogICAgICAgICAgICAgICAgdygidG9nZ2xlIiwgYSk7CiAgICAgICAgICAgICAgICBoID0gZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgImlucHV0IjoKICAgICAgICAgICAgICAgIEhmKGEsIGQpOwogICAgICAgICAgICAgICAgaCA9IENkKGEsIGQpOwogICAgICAgICAgICAgICAgdygiaW52YWxpZCIsIGEpOwogICAgICAgICAgICAgICAgb2EoYywgIm9uQ2hhbmdlIik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJvcHRpb24iOgogICAgICAgICAgICAgICAgaCA9IEZkKGEsIGQpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgICAgICAgIGEuX3dyYXBwZXJTdGF0ZSA9IHsgd2FzTXVsdGlwbGU6ICEhZC5tdWx0aXBsZSB9OwogICAgICAgICAgICAgICAgaCA9IE0oe30sIGQsIHsgdmFsdWU6IHZvaWQgMCB9KTsKICAgICAgICAgICAgICAgIHcoImludmFsaWQiLCBhKTsKICAgICAgICAgICAgICAgIG9hKGMsICJvbkNoYW5nZSIpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAidGV4dGFyZWEiOgogICAgICAgICAgICAgICAgS2YoYSwgZCk7CiAgICAgICAgICAgICAgICBoID0gR2QoYSwgZCk7CiAgICAgICAgICAgICAgICB3KCJpbnZhbGlkIiwgYSk7CiAgICAgICAgICAgICAgICBvYShjLCAib25DaGFuZ2UiKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBoID0gZDsKICAgICAgICAgICAgfQogICAgICAgICAgICBVZChlLCBoKTsKICAgICAgICAgICAgdmFyIG0gPSBoOwogICAgICAgICAgICBmb3IgKGYgaW4gbSkKICAgICAgICAgICAgICBpZiAobS5oYXNPd25Qcm9wZXJ0eShmKSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBtW2ZdOwogICAgICAgICAgICAgICAgInN0eWxlIiA9PT0gZgogICAgICAgICAgICAgICAgICA/IGdnKGEsIG4pCiAgICAgICAgICAgICAgICAgIDogImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiA9PT0gZgogICAgICAgICAgICAgICAgICA/ICgobiA9IG4gPyBuLl9faHRtbCA6IHZvaWQgMCksIG51bGwgIT0gbiAmJiB4aChhLCBuKSkKICAgICAgICAgICAgICAgICAgOiAiY2hpbGRyZW4iID09PSBmCiAgICAgICAgICAgICAgICAgID8gInN0cmluZyIgPT09IHR5cGVvZiBuCiAgICAgICAgICAgICAgICAgICAgPyAoInRleHRhcmVhIiAhPT0gZSB8fCAiIiAhPT0gbikgJiYgV2IoYSwgbikKICAgICAgICAgICAgICAgICAgICA6ICJudW1iZXIiID09PSB0eXBlb2YgbiAmJiBXYihhLCAiIiArIG4pCiAgICAgICAgICAgICAgICAgIDogInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyIgIT09IGYgJiYKICAgICAgICAgICAgICAgICAgICAic3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIiAhPT0gZiAmJgogICAgICAgICAgICAgICAgICAgICJhdXRvRm9jdXMiICE9PSBmICYmCiAgICAgICAgICAgICAgICAgICAgKGRiLmhhc093blByb3BlcnR5KGYpCiAgICAgICAgICAgICAgICAgICAgICA/IG51bGwgIT0gbiAmJiBvYShjLCBmKQogICAgICAgICAgICAgICAgICAgICAgOiBudWxsICE9IG4gJiYgeGQoYSwgZiwgbiwgZykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgICAgICAgICAgbWMoYSk7CiAgICAgICAgICAgICAgICBKZihhLCBkLCAhMSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJ0ZXh0YXJlYSI6CiAgICAgICAgICAgICAgICBtYyhhKTsKICAgICAgICAgICAgICAgIE1mKGEpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAib3B0aW9uIjoKICAgICAgICAgICAgICAgIG51bGwgIT0gZC52YWx1ZSAmJiBhLnNldEF0dHJpYnV0ZSgidmFsdWUiLCAiIiArIHZhKGQudmFsdWUpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICAgICAgICBhLm11bHRpcGxlID0gISFkLm11bHRpcGxlOwogICAgICAgICAgICAgICAgYyA9IGQudmFsdWU7CiAgICAgICAgICAgICAgICBudWxsICE9IGMKICAgICAgICAgICAgICAgICAgPyBoYihhLCAhIWQubXVsdGlwbGUsIGMsICExKQogICAgICAgICAgICAgICAgICA6IG51bGwgIT0gZC5kZWZhdWx0VmFsdWUgJiYKICAgICAgICAgICAgICAgICAgICBoYihhLCAhIWQubXVsdGlwbGUsIGQuZGVmYXVsdFZhbHVlLCAhMCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGgub25DbGljayAmJiAoYS5vbmNsaWNrID0gdWMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxnKGUsIGQpICYmIChiLmVmZmVjdFRhZyB8PSA0KTsKICAgICAgICAgIH0KICAgICAgICAgIG51bGwgIT09IGIucmVmICYmIChiLmVmZmVjdFRhZyB8PSAxMjgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgY2FzZSA2OgogICAgICAgIGlmIChhICYmIG51bGwgIT0gYi5zdGF0ZU5vZGUpIGtqKGEsIGIsIGEubWVtb2l6ZWRQcm9wcywgZCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgIT09IHR5cGVvZiBkICYmIG51bGwgPT09IGIuc3RhdGVOb2RlKQogICAgICAgICAgICB0aHJvdyBFcnJvcihrKDE2NikpOwogICAgICAgICAgYyA9IFRhKFRiLmN1cnJlbnQpOwogICAgICAgICAgVGEoamEuY3VycmVudCk7CiAgICAgICAgICBaYyhiKQogICAgICAgICAgICA/ICgoYyA9IGIuc3RhdGVOb2RlKSwKICAgICAgICAgICAgICAoZCA9IGIubWVtb2l6ZWRQcm9wcyksCiAgICAgICAgICAgICAgKGNbQWFdID0gYiksCiAgICAgICAgICAgICAgYy5ub2RlVmFsdWUgIT09IGQgJiYgKGIuZWZmZWN0VGFnIHw9IDQpKQogICAgICAgICAgICA6ICgoYyA9ICg5ID09PSBjLm5vZGVUeXBlID8gYyA6IGMub3duZXJEb2N1bWVudCkuY3JlYXRlVGV4dE5vZGUoZCkpLAogICAgICAgICAgICAgIChjW0FhXSA9IGIpLAogICAgICAgICAgICAgIChiLnN0YXRlTm9kZSA9IGMpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIGNhc2UgMTM6CiAgICAgICAgcShEKTsKICAgICAgICBkID0gYi5tZW1vaXplZFN0YXRlOwogICAgICAgIGlmICgwICE9PSAoYi5lZmZlY3RUYWcgJiA2NCkpIHJldHVybiAoYi5leHBpcmF0aW9uVGltZSA9IGMpLCBiOwogICAgICAgIGMgPSBudWxsICE9PSBkOwogICAgICAgIGQgPSAhMTsKICAgICAgICBudWxsID09PSBhCiAgICAgICAgICA/IHZvaWQgMCAhPT0gYi5tZW1vaXplZFByb3BzLmZhbGxiYWNrICYmIFpjKGIpCiAgICAgICAgICA6ICgoZSA9IGEubWVtb2l6ZWRTdGF0ZSksCiAgICAgICAgICAgIChkID0gbnVsbCAhPT0gZSksCiAgICAgICAgICAgIGMgfHwKICAgICAgICAgICAgICBudWxsID09PSBlIHx8CiAgICAgICAgICAgICAgKChlID0gYS5jaGlsZC5zaWJsaW5nKSwKICAgICAgICAgICAgICBudWxsICE9PSBlICYmCiAgICAgICAgICAgICAgICAoKGYgPSBiLmZpcnN0RWZmZWN0KSwKICAgICAgICAgICAgICAgIG51bGwgIT09IGYKICAgICAgICAgICAgICAgICAgPyAoKGIuZmlyc3RFZmZlY3QgPSBlKSwgKGUubmV4dEVmZmVjdCA9IGYpKQogICAgICAgICAgICAgICAgICA6ICgoYi5maXJzdEVmZmVjdCA9IGIubGFzdEVmZmVjdCA9IGUpLCAoZS5uZXh0RWZmZWN0ID0gbnVsbCkpLAogICAgICAgICAgICAgICAgKGUuZWZmZWN0VGFnID0gOCkpKSk7CiAgICAgICAgaWYgKGMgJiYgIWQgJiYgMCAhPT0gKGIubW9kZSAmIDIpKQogICAgICAgICAgaWYgKAogICAgICAgICAgICAobnVsbCA9PT0gYSAmJiAhMCAhPT0gYi5tZW1vaXplZFByb3BzLnVuc3RhYmxlX2F2b2lkVGhpc0ZhbGxiYWNrKSB8fAogICAgICAgICAgICAwICE9PSAoRC5jdXJyZW50ICYgMSkKICAgICAgICAgICkKICAgICAgICAgICAgRiA9PT0gWGEgJiYgKEYgPSBhZCk7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKEYgPT09IFhhIHx8IEYgPT09IGFkKSBGID0gYmQ7CiAgICAgICAgICAgIDAgIT09IFhiICYmIG51bGwgIT09IFUgJiYgKFlhKFUsIFApLCB5aChVLCBYYikpOwogICAgICAgICAgfQogICAgICAgIGlmIChjIHx8IGQpIGIuZWZmZWN0VGFnIHw9IDQ7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIGNhc2UgNDoKICAgICAgICByZXR1cm4gdGIoKSwgd2goYiksIG51bGw7CiAgICAgIGNhc2UgMTA6CiAgICAgICAgcmV0dXJuIG1lKGIpLCBudWxsOwogICAgICBjYXNlIDE3OgogICAgICAgIHJldHVybiBOKGIudHlwZSkgJiYgKHEoRyksIHEoQikpLCBudWxsOwogICAgICBjYXNlIDE5OgogICAgICAgIHEoRCk7CiAgICAgICAgZCA9IGIubWVtb2l6ZWRTdGF0ZTsKICAgICAgICBpZiAobnVsbCA9PT0gZCkgcmV0dXJuIG51bGw7CiAgICAgICAgZSA9IDAgIT09IChiLmVmZmVjdFRhZyAmIDY0KTsKICAgICAgICBmID0gZC5yZW5kZXJpbmc7CiAgICAgICAgaWYgKG51bGwgPT09IGYpCiAgICAgICAgICBpZiAoZSkgJGMoZCwgITEpOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmIChGICE9PSBYYSB8fCAobnVsbCAhPT0gYSAmJiAwICE9PSAoYS5lZmZlY3RUYWcgJiA2NCkpKQogICAgICAgICAgICAgIGZvciAoZiA9IGIuY2hpbGQ7IG51bGwgIT09IGY7ICkgewogICAgICAgICAgICAgICAgYSA9IFJjKGYpOwogICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGEpIHsKICAgICAgICAgICAgICAgICAgYi5lZmZlY3RUYWcgfD0gNjQ7CiAgICAgICAgICAgICAgICAgICRjKGQsICExKTsKICAgICAgICAgICAgICAgICAgZSA9IGEudXBkYXRlUXVldWU7CiAgICAgICAgICAgICAgICAgIG51bGwgIT09IGUgJiYgKChiLnVwZGF0ZVF1ZXVlID0gZSksIChiLmVmZmVjdFRhZyB8PSA0KSk7CiAgICAgICAgICAgICAgICAgIG51bGwgPT09IGQubGFzdEVmZmVjdCAmJiAoYi5maXJzdEVmZmVjdCA9IG51bGwpOwogICAgICAgICAgICAgICAgICBiLmxhc3RFZmZlY3QgPSBkLmxhc3RFZmZlY3Q7CiAgICAgICAgICAgICAgICAgIGZvciAoZCA9IGIuY2hpbGQ7IG51bGwgIT09IGQ7ICkKICAgICAgICAgICAgICAgICAgICAoZSA9IGQpLAogICAgICAgICAgICAgICAgICAgICAgKGYgPSBjKSwKICAgICAgICAgICAgICAgICAgICAgIChlLmVmZmVjdFRhZyAmPSAyKSwKICAgICAgICAgICAgICAgICAgICAgIChlLm5leHRFZmZlY3QgPSBudWxsKSwKICAgICAgICAgICAgICAgICAgICAgIChlLmZpcnN0RWZmZWN0ID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAoZS5sYXN0RWZmZWN0ID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAoYSA9IGUuYWx0ZXJuYXRlKSwKICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IGEKICAgICAgICAgICAgICAgICAgICAgICAgPyAoKGUuY2hpbGRFeHBpcmF0aW9uVGltZSA9IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgIChlLmV4cGlyYXRpb25UaW1lID0gZiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuY2hpbGQgPSBudWxsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5tZW1vaXplZFByb3BzID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUubWVtb2l6ZWRTdGF0ZSA9IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChlLnVwZGF0ZVF1ZXVlID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuZGVwZW5kZW5jaWVzID0gbnVsbCkpCiAgICAgICAgICAgICAgICAgICAgICAgIDogKChlLmNoaWxkRXhwaXJhdGlvblRpbWUgPSBhLmNoaWxkRXhwaXJhdGlvblRpbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChlLmV4cGlyYXRpb25UaW1lID0gYS5leHBpcmF0aW9uVGltZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuY2hpbGQgPSBhLmNoaWxkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5tZW1vaXplZFByb3BzID0gYS5tZW1vaXplZFByb3BzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5tZW1vaXplZFN0YXRlID0gYS5tZW1vaXplZFN0YXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZS51cGRhdGVRdWV1ZSA9IGEudXBkYXRlUXVldWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChmID0gYS5kZXBlbmRlbmNpZXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChlLmRlcGVuZGVuY2llcyA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSBmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiBmLmV4cGlyYXRpb25UaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb250ZXh0OiBmLmZpcnN0Q29udGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbmRlcnM6IGYucmVzcG9uZGVycywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICAgICAgICAoZCA9IGQuc2libGluZyk7CiAgICAgICAgICAgICAgICAgIHkoRCwgKEQuY3VycmVudCAmIDEpIHwgMik7CiAgICAgICAgICAgICAgICAgIHJldHVybiBiLmNoaWxkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZiA9IGYuc2libGluZzsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICBpZiAoIWUpCiAgICAgICAgICAgIGlmICgoKGEgPSBSYyhmKSksIG51bGwgIT09IGEpKSB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgKChiLmVmZmVjdFRhZyB8PSA2NCksCiAgICAgICAgICAgICAgICAoZSA9ICEwKSwKICAgICAgICAgICAgICAgIChjID0gYS51cGRhdGVRdWV1ZSksCiAgICAgICAgICAgICAgICBudWxsICE9PSBjICYmICgoYi51cGRhdGVRdWV1ZSA9IGMpLCAoYi5lZmZlY3RUYWcgfD0gNCkpLAogICAgICAgICAgICAgICAgJGMoZCwgITApLAogICAgICAgICAgICAgICAgbnVsbCA9PT0gZC50YWlsICYmICJoaWRkZW4iID09PSBkLnRhaWxNb2RlICYmICFmLmFsdGVybmF0ZSkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAoYiA9IGIubGFzdEVmZmVjdCA9IGQubGFzdEVmZmVjdCksCiAgICAgICAgICAgICAgICAgIG51bGwgIT09IGIgJiYgKGIubmV4dEVmZmVjdCA9IG51bGwpLAogICAgICAgICAgICAgICAgICBudWxsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAyICogWSgpIC0gZC5yZW5kZXJpbmdTdGFydFRpbWUgPiBkLnRhaWxFeHBpcmF0aW9uICYmCiAgICAgICAgICAgICAgICAxIDwgYyAmJgogICAgICAgICAgICAgICAgKChiLmVmZmVjdFRhZyB8PSA2NCksCiAgICAgICAgICAgICAgICAoZSA9ICEwKSwKICAgICAgICAgICAgICAgICRjKGQsICExKSwKICAgICAgICAgICAgICAgIChiLmV4cGlyYXRpb25UaW1lID0gYi5jaGlsZEV4cGlyYXRpb25UaW1lID0gYyAtIDEpKTsKICAgICAgICAgIGQuaXNCYWNrd2FyZHMKICAgICAgICAgICAgPyAoKGYuc2libGluZyA9IGIuY2hpbGQpLCAoYi5jaGlsZCA9IGYpKQogICAgICAgICAgICA6ICgoYyA9IGQubGFzdCksCiAgICAgICAgICAgICAgbnVsbCAhPT0gYyA/IChjLnNpYmxpbmcgPSBmKSA6IChiLmNoaWxkID0gZiksCiAgICAgICAgICAgICAgKGQubGFzdCA9IGYpKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG51bGwgIT09IGQudGFpbAogICAgICAgICAgPyAoMCA9PT0gZC50YWlsRXhwaXJhdGlvbiAmJiAoZC50YWlsRXhwaXJhdGlvbiA9IFkoKSArIDUwMCksCiAgICAgICAgICAgIChjID0gZC50YWlsKSwKICAgICAgICAgICAgKGQucmVuZGVyaW5nID0gYyksCiAgICAgICAgICAgIChkLnRhaWwgPSBjLnNpYmxpbmcpLAogICAgICAgICAgICAoZC5sYXN0RWZmZWN0ID0gYi5sYXN0RWZmZWN0KSwKICAgICAgICAgICAgKGQucmVuZGVyaW5nU3RhcnRUaW1lID0gWSgpKSwKICAgICAgICAgICAgKGMuc2libGluZyA9IG51bGwpLAogICAgICAgICAgICAoYiA9IEQuY3VycmVudCksCiAgICAgICAgICAgIHkoRCwgZSA/IChiICYgMSkgfCAyIDogYiAmIDEpLAogICAgICAgICAgICBjKQogICAgICAgICAgOiBudWxsOwogICAgfQogICAgdGhyb3cgRXJyb3IoaygxNTYsIGIudGFnKSk7CiAgfQoKICBmdW5jdGlvbiBsaihhLCBiKSB7CiAgICBzd2l0Y2ggKGEudGFnKSB7CiAgICAgIGNhc2UgMToKICAgICAgICByZXR1cm4gKAogICAgICAgICAgTihhLnR5cGUpICYmIChxKEcpLCBxKEIpKSwKICAgICAgICAgIChiID0gYS5lZmZlY3RUYWcpLAogICAgICAgICAgYiAmIDQwOTYgPyAoKGEuZWZmZWN0VGFnID0gKGIgJiAtNDA5NykgfCA2NCksIGEpIDogbnVsbAogICAgICAgICk7CiAgICAgIGNhc2UgMzoKICAgICAgICB0YigpOwogICAgICAgIHEoRyk7CiAgICAgICAgcShCKTsKICAgICAgICBiID0gYS5lZmZlY3RUYWc7CiAgICAgICAgaWYgKDAgIT09IChiICYgNjQpKSB0aHJvdyBFcnJvcihrKDI4NSkpOwogICAgICAgIGEuZWZmZWN0VGFnID0gKGIgJiAtNDA5NykgfCA2NDsKICAgICAgICByZXR1cm4gYTsKICAgICAgY2FzZSA1OgogICAgICAgIHJldHVybiB0ZShhKSwgbnVsbDsKICAgICAgY2FzZSAxMzoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgcShEKSwKICAgICAgICAgIChiID0gYS5lZmZlY3RUYWcpLAogICAgICAgICAgYiAmIDQwOTYgPyAoKGEuZWZmZWN0VGFnID0gKGIgJiAtNDA5NykgfCA2NCksIGEpIDogbnVsbAogICAgICAgICk7CiAgICAgIGNhc2UgMTk6CiAgICAgICAgcmV0dXJuIHEoRCksIG51bGw7CiAgICAgIGNhc2UgNDoKICAgICAgICByZXR1cm4gdGIoKSwgbnVsbDsKICAgICAgY2FzZSAxMDoKICAgICAgICByZXR1cm4gbWUoYSksIG51bGw7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBMZShhLCBiKSB7CiAgICByZXR1cm4geyB2YWx1ZTogYSwgc291cmNlOiBiLCBzdGFjazogQmQoYikgfTsKICB9CgogIGZ1bmN0aW9uIE1lKGEsIGIpIHsKICAgIHZhciBjID0gYi5zb3VyY2UsCiAgICAgIGQgPSBiLnN0YWNrOwogICAgbnVsbCA9PT0gZCAmJiBudWxsICE9PSBjICYmIChkID0gQmQoYykpOwogICAgbnVsbCAhPT0gYyAmJiBuYShjLnR5cGUpOwogICAgYiA9IGIudmFsdWU7CiAgICBudWxsICE9PSBhICYmIDEgPT09IGEudGFnICYmIG5hKGEudHlwZSk7CiAgICB0cnkgewogICAgICBjb25zb2xlLmVycm9yKGIpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBlOwogICAgICB9KTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG1qKGEsIGIpIHsKICAgIHRyeSB7CiAgICAgIChiLnByb3BzID0gYS5tZW1vaXplZFByb3BzKSwKICAgICAgICAoYi5zdGF0ZSA9IGEubWVtb2l6ZWRTdGF0ZSksCiAgICAgICAgYi5jb21wb25lbnRXaWxsVW5tb3VudCgpOwogICAgfSBjYXRjaCAoYykgewogICAgICBaYShhLCBjKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHpoKGEpIHsKICAgIHZhciBiID0gYS5yZWY7CiAgICBpZiAobnVsbCAhPT0gYikKICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBiKQogICAgICAgIHRyeSB7CiAgICAgICAgICBiKG51bGwpOwogICAgICAgIH0gY2F0Y2ggKGMpIHsKICAgICAgICAgIFphKGEsIGMpOwogICAgICAgIH0KICAgICAgZWxzZSBiLmN1cnJlbnQgPSBudWxsOwogIH0KCiAgZnVuY3Rpb24gbmooYSwgYikgewogICAgc3dpdGNoIChiLnRhZykgewogICAgICBjYXNlIDA6CiAgICAgIGNhc2UgMTE6CiAgICAgIGNhc2UgMTU6CiAgICAgIGNhc2UgMjI6CiAgICAgICAgcmV0dXJuOwogICAgICBjYXNlIDE6CiAgICAgICAgaWYgKGIuZWZmZWN0VGFnICYgMjU2ICYmIG51bGwgIT09IGEpIHsKICAgICAgICAgIHZhciBjID0gYS5tZW1vaXplZFByb3BzLAogICAgICAgICAgICBkID0gYS5tZW1vaXplZFN0YXRlOwogICAgICAgICAgYSA9IGIuc3RhdGVOb2RlOwogICAgICAgICAgYiA9IGEuZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoCiAgICAgICAgICAgIGIuZWxlbWVudFR5cGUgPT09IGIudHlwZSA/IGMgOiBhYShiLnR5cGUsIGMpLAogICAgICAgICAgICBkCiAgICAgICAgICApOwogICAgICAgICAgYS5fX3JlYWN0SW50ZXJuYWxTbmFwc2hvdEJlZm9yZVVwZGF0ZSA9IGI7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgY2FzZSAzOgogICAgICBjYXNlIDU6CiAgICAgIGNhc2UgNjoKICAgICAgY2FzZSA0OgogICAgICBjYXNlIDE3OgogICAgICAgIHJldHVybjsKICAgIH0KICAgIHRocm93IEVycm9yKGsoMTYzKSk7CiAgfQoKICBmdW5jdGlvbiBBaChhLCBiKSB7CiAgICBiID0gYi51cGRhdGVRdWV1ZTsKICAgIGIgPSBudWxsICE9PSBiID8gYi5sYXN0RWZmZWN0IDogbnVsbDsKICAgIGlmIChudWxsICE9PSBiKSB7CiAgICAgIHZhciBjID0gKGIgPSBiLm5leHQpOwogICAgICBkbyB7CiAgICAgICAgaWYgKChjLnRhZyAmIGEpID09PSBhKSB7CiAgICAgICAgICB2YXIgZCA9IGMuZGVzdHJveTsKICAgICAgICAgIGMuZGVzdHJveSA9IHZvaWQgMDsKICAgICAgICAgIHZvaWQgMCAhPT0gZCAmJiBkKCk7CiAgICAgICAgfQogICAgICAgIGMgPSBjLm5leHQ7CiAgICAgIH0gd2hpbGUgKGMgIT09IGIpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gQmgoYSwgYikgewogICAgYiA9IGIudXBkYXRlUXVldWU7CiAgICBiID0gbnVsbCAhPT0gYiA/IGIubGFzdEVmZmVjdCA6IG51bGw7CiAgICBpZiAobnVsbCAhPT0gYikgewogICAgICB2YXIgYyA9IChiID0gYi5uZXh0KTsKICAgICAgZG8gewogICAgICAgIGlmICgoYy50YWcgJiBhKSA9PT0gYSkgewogICAgICAgICAgdmFyIGQgPSBjLmNyZWF0ZTsKICAgICAgICAgIGMuZGVzdHJveSA9IGQoKTsKICAgICAgICB9CiAgICAgICAgYyA9IGMubmV4dDsKICAgICAgfSB3aGlsZSAoYyAhPT0gYik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvaihhLCBiLCBjLCBkKSB7CiAgICBzd2l0Y2ggKGMudGFnKSB7CiAgICAgIGNhc2UgMDoKICAgICAgY2FzZSAxMToKICAgICAgY2FzZSAxNToKICAgICAgY2FzZSAyMjoKICAgICAgICBCaCgzLCBjKTsKICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgMToKICAgICAgICBhID0gYy5zdGF0ZU5vZGU7CiAgICAgICAgYy5lZmZlY3RUYWcgJiA0ICYmCiAgICAgICAgICAobnVsbCA9PT0gYgogICAgICAgICAgICA/IGEuY29tcG9uZW50RGlkTW91bnQoKQogICAgICAgICAgICA6ICgoZCA9CiAgICAgICAgICAgICAgICBjLmVsZW1lbnRUeXBlID09PSBjLnR5cGUKICAgICAgICAgICAgICAgICAgPyBiLm1lbW9pemVkUHJvcHMKICAgICAgICAgICAgICAgICAgOiBhYShjLnR5cGUsIGIubWVtb2l6ZWRQcm9wcykpLAogICAgICAgICAgICAgIGEuY29tcG9uZW50RGlkVXBkYXRlKAogICAgICAgICAgICAgICAgZCwKICAgICAgICAgICAgICAgIGIubWVtb2l6ZWRTdGF0ZSwKICAgICAgICAgICAgICAgIGEuX19yZWFjdEludGVybmFsU25hcHNob3RCZWZvcmVVcGRhdGUKICAgICAgICAgICAgICApKSk7CiAgICAgICAgYiA9IGMudXBkYXRlUXVldWU7CiAgICAgICAgbnVsbCAhPT0gYiAmJiBXZyhjLCBiLCBhKTsKICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgMzoKICAgICAgICBiID0gYy51cGRhdGVRdWV1ZTsKICAgICAgICBpZiAobnVsbCAhPT0gYikgewogICAgICAgICAgYSA9IG51bGw7CiAgICAgICAgICBpZiAobnVsbCAhPT0gYy5jaGlsZCkKICAgICAgICAgICAgc3dpdGNoIChjLmNoaWxkLnRhZykgewogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGEgPSBjLmNoaWxkLnN0YXRlTm9kZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIGEgPSBjLmNoaWxkLnN0YXRlTm9kZTsKICAgICAgICAgICAgfQogICAgICAgICAgV2coYywgYiwgYSk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgY2FzZSA1OgogICAgICAgIGEgPSBjLnN0YXRlTm9kZTsKICAgICAgICBudWxsID09PSBiICYmCiAgICAgICAgICBjLmVmZmVjdFRhZyAmIDQgJiYKICAgICAgICAgIGxnKGMudHlwZSwgYy5tZW1vaXplZFByb3BzKSAmJgogICAgICAgICAgYS5mb2N1cygpOwogICAgICAgIHJldHVybjsKICAgICAgY2FzZSA2OgogICAgICAgIHJldHVybjsKICAgICAgY2FzZSA0OgogICAgICAgIHJldHVybjsKICAgICAgY2FzZSAxMjoKICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgMTM6CiAgICAgICAgbnVsbCA9PT0gYy5tZW1vaXplZFN0YXRlICYmCiAgICAgICAgICAoKGMgPSBjLmFsdGVybmF0ZSksCiAgICAgICAgICBudWxsICE9PSBjICYmCiAgICAgICAgICAgICgoYyA9IGMubWVtb2l6ZWRTdGF0ZSksCiAgICAgICAgICAgIG51bGwgIT09IGMgJiYgKChjID0gYy5kZWh5ZHJhdGVkKSwgbnVsbCAhPT0gYyAmJiBiZyhjKSkpKTsKICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgMTk6CiAgICAgIGNhc2UgMTc6CiAgICAgIGNhc2UgMjA6CiAgICAgIGNhc2UgMjE6CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgdGhyb3cgRXJyb3IoaygxNjMpKTsKICB9CgogIGZ1bmN0aW9uIENoKGEsIGIsIGMpIHsKICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBOZSAmJiBOZShiKTsKICAgIHN3aXRjaCAoYi50YWcpIHsKICAgICAgY2FzZSAwOgogICAgICBjYXNlIDExOgogICAgICBjYXNlIDE0OgogICAgICBjYXNlIDE1OgogICAgICBjYXNlIDIyOgogICAgICAgIGEgPSBiLnVwZGF0ZVF1ZXVlOwogICAgICAgIGlmIChudWxsICE9PSBhICYmICgoYSA9IGEubGFzdEVmZmVjdCksIG51bGwgIT09IGEpKSB7CiAgICAgICAgICB2YXIgZCA9IGEubmV4dDsKICAgICAgICAgIERhKDk3IDwgYyA/IDk3IDogYywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYSA9IGQ7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICB2YXIgYyA9IGEuZGVzdHJveTsKICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBjKSB7CiAgICAgICAgICAgICAgICB2YXIgZyA9IGI7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBjKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChoKSB7CiAgICAgICAgICAgICAgICAgIFphKGcsIGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhID0gYS5uZXh0OwogICAgICAgICAgICB9IHdoaWxlIChhICE9PSBkKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAxOgogICAgICAgIHpoKGIpOwogICAgICAgIGMgPSBiLnN0YXRlTm9kZTsKICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgYy5jb21wb25lbnRXaWxsVW5tb3VudCAmJiBtaihiLCBjKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSA1OgogICAgICAgIHpoKGIpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDQ6CiAgICAgICAgRGgoYSwgYiwgYyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBFaChhKSB7CiAgICB2YXIgYiA9IGEuYWx0ZXJuYXRlOwogICAgYS5yZXR1cm4gPSBudWxsOwogICAgYS5jaGlsZCA9IG51bGw7CiAgICBhLm1lbW9pemVkU3RhdGUgPSBudWxsOwogICAgYS51cGRhdGVRdWV1ZSA9IG51bGw7CiAgICBhLmRlcGVuZGVuY2llcyA9IG51bGw7CiAgICBhLmFsdGVybmF0ZSA9IG51bGw7CiAgICBhLmZpcnN0RWZmZWN0ID0gbnVsbDsKICAgIGEubGFzdEVmZmVjdCA9IG51bGw7CiAgICBhLnBlbmRpbmdQcm9wcyA9IG51bGw7CiAgICBhLm1lbW9pemVkUHJvcHMgPSBudWxsOwogICAgYS5zdGF0ZU5vZGUgPSBudWxsOwogICAgbnVsbCAhPT0gYiAmJiBFaChiKTsKICB9CgogIGZ1bmN0aW9uIEZoKGEpIHsKICAgIHJldHVybiA1ID09PSBhLnRhZyB8fCAzID09PSBhLnRhZyB8fCA0ID09PSBhLnRhZzsKICB9CgogIGZ1bmN0aW9uIEdoKGEpIHsKICAgIGE6IHsKICAgICAgZm9yICh2YXIgYiA9IGEucmV0dXJuOyBudWxsICE9PSBiOyApIHsKICAgICAgICBpZiAoRmgoYikpIHsKICAgICAgICAgIHZhciBjID0gYjsKICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgfQogICAgICAgIGIgPSBiLnJldHVybjsKICAgICAgfQogICAgICB0aHJvdyBFcnJvcihrKDE2MCkpOwogICAgfQogICAgYiA9IGMuc3RhdGVOb2RlOwogICAgc3dpdGNoIChjLnRhZykgewogICAgICBjYXNlIDU6CiAgICAgICAgdmFyIGQgPSAhMTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAzOgogICAgICAgIGIgPSBiLmNvbnRhaW5lckluZm87CiAgICAgICAgZCA9ICEwOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDQ6CiAgICAgICAgYiA9IGIuY29udGFpbmVySW5mbzsKICAgICAgICBkID0gITA7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhyb3cgRXJyb3IoaygxNjEpKTsKICAgIH0KICAgIGMuZWZmZWN0VGFnICYgMTYgJiYgKFdiKGIsICIiKSwgKGMuZWZmZWN0VGFnICY9IC0xNykpOwogICAgYTogYjogZm9yIChjID0gYTsgOyApIHsKICAgICAgZm9yICg7IG51bGwgPT09IGMuc2libGluZzsgKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGMucmV0dXJuIHx8IEZoKGMucmV0dXJuKSkgewogICAgICAgICAgYyA9IG51bGw7CiAgICAgICAgICBicmVhayBhOwogICAgICAgIH0KICAgICAgICBjID0gYy5yZXR1cm47CiAgICAgIH0KICAgICAgYy5zaWJsaW5nLnJldHVybiA9IGMucmV0dXJuOwogICAgICBmb3IgKGMgPSBjLnNpYmxpbmc7IDUgIT09IGMudGFnICYmIDYgIT09IGMudGFnICYmIDE4ICE9PSBjLnRhZzsgKSB7CiAgICAgICAgaWYgKGMuZWZmZWN0VGFnICYgMikgY29udGludWUgYjsKICAgICAgICBpZiAobnVsbCA9PT0gYy5jaGlsZCB8fCA0ID09PSBjLnRhZykgY29udGludWUgYjsKICAgICAgICBlbHNlIChjLmNoaWxkLnJldHVybiA9IGMpLCAoYyA9IGMuY2hpbGQpOwogICAgICB9CiAgICAgIGlmICghKGMuZWZmZWN0VGFnICYgMikpIHsKICAgICAgICBjID0gYy5zdGF0ZU5vZGU7CiAgICAgICAgYnJlYWsgYTsKICAgICAgfQogICAgfQogICAgZCA/IE9lKGEsIGMsIGIpIDogUGUoYSwgYywgYik7CiAgfQoKICBmdW5jdGlvbiBPZShhLCBiLCBjKSB7CiAgICB2YXIgZCA9IGEudGFnLAogICAgICBlID0gNSA9PT0gZCB8fCA2ID09PSBkOwogICAgaWYgKGUpCiAgICAgIChhID0gZSA/IGEuc3RhdGVOb2RlIDogYS5zdGF0ZU5vZGUuaW5zdGFuY2UpLAogICAgICAgIGIKICAgICAgICAgID8gOCA9PT0gYy5ub2RlVHlwZQogICAgICAgICAgICA/IGMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSwgYikKICAgICAgICAgICAgOiBjLmluc2VydEJlZm9yZShhLCBiKQogICAgICAgICAgOiAoOCA9PT0gYy5ub2RlVHlwZQogICAgICAgICAgICAgID8gKChiID0gYy5wYXJlbnROb2RlKSwgYi5pbnNlcnRCZWZvcmUoYSwgYykpCiAgICAgICAgICAgICAgOiAoKGIgPSBjKSwgYi5hcHBlbmRDaGlsZChhKSksCiAgICAgICAgICAgIChjID0gYy5fcmVhY3RSb290Q29udGFpbmVyKSwKICAgICAgICAgICAgKG51bGwgIT09IGMgJiYgdm9pZCAwICE9PSBjKSB8fAogICAgICAgICAgICAgIG51bGwgIT09IGIub25jbGljayB8fAogICAgICAgICAgICAgIChiLm9uY2xpY2sgPSB1YykpOwogICAgZWxzZSBpZiAoNCAhPT0gZCAmJiAoKGEgPSBhLmNoaWxkKSwgbnVsbCAhPT0gYSkpCiAgICAgIGZvciAoT2UoYSwgYiwgYyksIGEgPSBhLnNpYmxpbmc7IG51bGwgIT09IGE7ICkKICAgICAgICBPZShhLCBiLCBjKSwgKGEgPSBhLnNpYmxpbmcpOwogIH0KCiAgZnVuY3Rpb24gUGUoYSwgYiwgYykgewogICAgdmFyIGQgPSBhLnRhZywKICAgICAgZSA9IDUgPT09IGQgfHwgNiA9PT0gZDsKICAgIGlmIChlKQogICAgICAoYSA9IGUgPyBhLnN0YXRlTm9kZSA6IGEuc3RhdGVOb2RlLmluc3RhbmNlKSwKICAgICAgICBiID8gYy5pbnNlcnRCZWZvcmUoYSwgYikgOiBjLmFwcGVuZENoaWxkKGEpOwogICAgZWxzZSBpZiAoNCAhPT0gZCAmJiAoKGEgPSBhLmNoaWxkKSwgbnVsbCAhPT0gYSkpCiAgICAgIGZvciAoUGUoYSwgYiwgYyksIGEgPSBhLnNpYmxpbmc7IG51bGwgIT09IGE7ICkKICAgICAgICBQZShhLCBiLCBjKSwgKGEgPSBhLnNpYmxpbmcpOwogIH0KCiAgZnVuY3Rpb24gRGgoYSwgYiwgYykgewogICAgZm9yICh2YXIgZCA9IGIsIGUgPSAhMSwgZiwgZzsgOyApIHsKICAgICAgaWYgKCFlKSB7CiAgICAgICAgZSA9IGQucmV0dXJuOwogICAgICAgIGE6IGZvciAoOzspIHsKICAgICAgICAgIGlmIChudWxsID09PSBlKSB0aHJvdyBFcnJvcihrKDE2MCkpOwogICAgICAgICAgZiA9IGUuc3RhdGVOb2RlOwogICAgICAgICAgc3dpdGNoIChlLnRhZykgewogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgZyA9ICExOwogICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBmID0gZi5jb250YWluZXJJbmZvOwogICAgICAgICAgICAgIGcgPSAhMDsKICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgZiA9IGYuY29udGFpbmVySW5mbzsKICAgICAgICAgICAgICBnID0gITA7CiAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgIH0KICAgICAgICAgIGUgPSBlLnJldHVybjsKICAgICAgICB9CiAgICAgICAgZSA9ICEwOwogICAgICB9CiAgICAgIGlmICg1ID09PSBkLnRhZyB8fCA2ID09PSBkLnRhZykgewogICAgICAgIGE6IGZvciAodmFyIGggPSBhLCBtID0gZCwgbiA9IGMsIGwgPSBtOyA7ICkKICAgICAgICAgIGlmICgoQ2goaCwgbCwgbiksIG51bGwgIT09IGwuY2hpbGQgJiYgNCAhPT0gbC50YWcpKQogICAgICAgICAgICAobC5jaGlsZC5yZXR1cm4gPSBsKSwgKGwgPSBsLmNoaWxkKTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAobCA9PT0gbSkgYnJlYWsgYTsKICAgICAgICAgICAgZm9yICg7IG51bGwgPT09IGwuc2libGluZzsgKSB7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGwucmV0dXJuIHx8IGwucmV0dXJuID09PSBtKSBicmVhayBhOwogICAgICAgICAgICAgIGwgPSBsLnJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBsLnNpYmxpbmcucmV0dXJuID0gbC5yZXR1cm47CiAgICAgICAgICAgIGwgPSBsLnNpYmxpbmc7CiAgICAgICAgICB9CiAgICAgICAgZwogICAgICAgICAgPyAoKGggPSBmKSwKICAgICAgICAgICAgKG0gPSBkLnN0YXRlTm9kZSksCiAgICAgICAgICAgIDggPT09IGgubm9kZVR5cGUgPyBoLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobSkgOiBoLnJlbW92ZUNoaWxkKG0pKQogICAgICAgICAgOiBmLnJlbW92ZUNoaWxkKGQuc3RhdGVOb2RlKTsKICAgICAgfSBlbHNlIGlmICg0ID09PSBkLnRhZykgewogICAgICAgIGlmIChudWxsICE9PSBkLmNoaWxkKSB7CiAgICAgICAgICBmID0gZC5zdGF0ZU5vZGUuY29udGFpbmVySW5mbzsKICAgICAgICAgIGcgPSAhMDsKICAgICAgICAgIGQuY2hpbGQucmV0dXJuID0gZDsKICAgICAgICAgIGQgPSBkLmNoaWxkOwogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKChDaChhLCBkLCBjKSwgbnVsbCAhPT0gZC5jaGlsZCkpIHsKICAgICAgICBkLmNoaWxkLnJldHVybiA9IGQ7CiAgICAgICAgZCA9IGQuY2hpbGQ7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKGQgPT09IGIpIGJyZWFrOwogICAgICBmb3IgKDsgbnVsbCA9PT0gZC5zaWJsaW5nOyApIHsKICAgICAgICBpZiAobnVsbCA9PT0gZC5yZXR1cm4gfHwgZC5yZXR1cm4gPT09IGIpIHJldHVybjsKICAgICAgICBkID0gZC5yZXR1cm47CiAgICAgICAgNCA9PT0gZC50YWcgJiYgKGUgPSAhMSk7CiAgICAgIH0KICAgICAgZC5zaWJsaW5nLnJldHVybiA9IGQucmV0dXJuOwogICAgICBkID0gZC5zaWJsaW5nOwogICAgfQogIH0KCiAgZnVuY3Rpb24gUWUoYSwgYikgewogICAgc3dpdGNoIChiLnRhZykgewogICAgICBjYXNlIDA6CiAgICAgIGNhc2UgMTE6CiAgICAgIGNhc2UgMTQ6CiAgICAgIGNhc2UgMTU6CiAgICAgIGNhc2UgMjI6CiAgICAgICAgQWgoMywgYik7CiAgICAgICAgcmV0dXJuOwogICAgICBjYXNlIDE6CiAgICAgICAgcmV0dXJuOwogICAgICBjYXNlIDU6CiAgICAgICAgdmFyIGMgPSBiLnN0YXRlTm9kZTsKICAgICAgICBpZiAobnVsbCAhPSBjKSB7CiAgICAgICAgICB2YXIgZCA9IGIubWVtb2l6ZWRQcm9wcywKICAgICAgICAgICAgZSA9IG51bGwgIT09IGEgPyBhLm1lbW9pemVkUHJvcHMgOiBkOwogICAgICAgICAgYSA9IGIudHlwZTsKICAgICAgICAgIHZhciBmID0gYi51cGRhdGVRdWV1ZTsKICAgICAgICAgIGIudXBkYXRlUXVldWUgPSBudWxsOwogICAgICAgICAgaWYgKG51bGwgIT09IGYpIHsKICAgICAgICAgICAgY1t2Y10gPSBkOwogICAgICAgICAgICAiaW5wdXQiID09PSBhICYmICJyYWRpbyIgPT09IGQudHlwZSAmJiBudWxsICE9IGQubmFtZSAmJiBJZihjLCBkKTsKICAgICAgICAgICAgVmQoYSwgZSk7CiAgICAgICAgICAgIGIgPSBWZChhLCBkKTsKICAgICAgICAgICAgZm9yIChlID0gMDsgZSA8IGYubGVuZ3RoOyBlICs9IDIpIHsKICAgICAgICAgICAgICB2YXIgZyA9IGZbZV0sCiAgICAgICAgICAgICAgICBoID0gZltlICsgMV07CiAgICAgICAgICAgICAgInN0eWxlIiA9PT0gZwogICAgICAgICAgICAgICAgPyBnZyhjLCBoKQogICAgICAgICAgICAgICAgOiAiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiID09PSBnCiAgICAgICAgICAgICAgICA/IHhoKGMsIGgpCiAgICAgICAgICAgICAgICA6ICJjaGlsZHJlbiIgPT09IGcKICAgICAgICAgICAgICAgID8gV2IoYywgaCkKICAgICAgICAgICAgICAgIDogeGQoYywgZywgaCwgYik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgICAgICAgICAgRGQoYywgZCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlICJ0ZXh0YXJlYSI6CiAgICAgICAgICAgICAgICBMZihjLCBkKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICAgICAgICAoYiA9IGMuX3dyYXBwZXJTdGF0ZS53YXNNdWx0aXBsZSksCiAgICAgICAgICAgICAgICAgIChjLl93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGUgPSAhIWQubXVsdGlwbGUpLAogICAgICAgICAgICAgICAgICAoYSA9IGQudmFsdWUpLAogICAgICAgICAgICAgICAgICBudWxsICE9IGEKICAgICAgICAgICAgICAgICAgICA/IGhiKGMsICEhZC5tdWx0aXBsZSwgYSwgITEpCiAgICAgICAgICAgICAgICAgICAgOiBiICE9PSAhIWQubXVsdGlwbGUgJiYKICAgICAgICAgICAgICAgICAgICAgIChudWxsICE9IGQuZGVmYXVsdFZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgID8gaGIoYywgISFkLm11bHRpcGxlLCBkLmRlZmF1bHRWYWx1ZSwgITApCiAgICAgICAgICAgICAgICAgICAgICAgIDogaGIoYywgISFkLm11bHRpcGxlLCBkLm11bHRpcGxlID8gW10gOiAiIiwgITEpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgNjoKICAgICAgICBpZiAobnVsbCA9PT0gYi5zdGF0ZU5vZGUpIHRocm93IEVycm9yKGsoMTYyKSk7CiAgICAgICAgYi5zdGF0ZU5vZGUubm9kZVZhbHVlID0gYi5tZW1vaXplZFByb3BzOwogICAgICAgIHJldHVybjsKICAgICAgY2FzZSAzOgogICAgICAgIGIgPSBiLnN0YXRlTm9kZTsKICAgICAgICBiLmh5ZHJhdGUgJiYgKChiLmh5ZHJhdGUgPSAhMSksIGJnKGIuY29udGFpbmVySW5mbykpOwogICAgICAgIHJldHVybjsKICAgICAgY2FzZSAxMjoKICAgICAgICByZXR1cm47CiAgICAgIGNhc2UgMTM6CiAgICAgICAgYyA9IGI7CiAgICAgICAgbnVsbCA9PT0gYi5tZW1vaXplZFN0YXRlCiAgICAgICAgICA/IChkID0gITEpCiAgICAgICAgICA6ICgoZCA9ICEwKSwgKGMgPSBiLmNoaWxkKSwgKFJlID0gWSgpKSk7CiAgICAgICAgaWYgKG51bGwgIT09IGMpCiAgICAgICAgICBhOiBmb3IgKGEgPSBjOyA7ICkgewogICAgICAgICAgICBpZiAoNSA9PT0gYS50YWcpCiAgICAgICAgICAgICAgKGYgPSBhLnN0YXRlTm9kZSksCiAgICAgICAgICAgICAgICBkCiAgICAgICAgICAgICAgICAgID8gKChmID0gZi5zdHlsZSksCiAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGYuc2V0UHJvcGVydHkKICAgICAgICAgICAgICAgICAgICAgID8gZi5zZXRQcm9wZXJ0eSgiZGlzcGxheSIsICJub25lIiwgImltcG9ydGFudCIpCiAgICAgICAgICAgICAgICAgICAgICA6IChmLmRpc3BsYXkgPSAibm9uZSIpKQogICAgICAgICAgICAgICAgICA6ICgoZiA9IGEuc3RhdGVOb2RlKSwKICAgICAgICAgICAgICAgICAgICAoZSA9IGEubWVtb2l6ZWRQcm9wcy5zdHlsZSksCiAgICAgICAgICAgICAgICAgICAgKGUgPQogICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBlICYmIG51bGwgIT09IGUgJiYgZS5oYXNPd25Qcm9wZXJ0eSgiZGlzcGxheSIpCiAgICAgICAgICAgICAgICAgICAgICAgID8gZS5kaXNwbGF5CiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCksCiAgICAgICAgICAgICAgICAgICAgKGYuc3R5bGUuZGlzcGxheSA9IGZnKCJkaXNwbGF5IiwgZSkpKTsKICAgICAgICAgICAgZWxzZSBpZiAoNiA9PT0gYS50YWcpCiAgICAgICAgICAgICAgYS5zdGF0ZU5vZGUubm9kZVZhbHVlID0gZCA/ICIiIDogYS5tZW1vaXplZFByb3BzOwogICAgICAgICAgICBlbHNlIGlmICgKICAgICAgICAgICAgICAxMyA9PT0gYS50YWcgJiYKICAgICAgICAgICAgICBudWxsICE9PSBhLm1lbW9pemVkU3RhdGUgJiYKICAgICAgICAgICAgICBudWxsID09PSBhLm1lbW9pemVkU3RhdGUuZGVoeWRyYXRlZAogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBmID0gYS5jaGlsZC5zaWJsaW5nOwogICAgICAgICAgICAgIGYucmV0dXJuID0gYTsKICAgICAgICAgICAgICBhID0gZjsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9PSBhLmNoaWxkKSB7CiAgICAgICAgICAgICAgYS5jaGlsZC5yZXR1cm4gPSBhOwogICAgICAgICAgICAgIGEgPSBhLmNoaWxkOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChhID09PSBjKSBicmVhazsKICAgICAgICAgICAgZm9yICg7IG51bGwgPT09IGEuc2libGluZzsgKSB7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGEucmV0dXJuIHx8IGEucmV0dXJuID09PSBjKSBicmVhayBhOwogICAgICAgICAgICAgIGEgPSBhLnJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBhLnNpYmxpbmcucmV0dXJuID0gYS5yZXR1cm47CiAgICAgICAgICAgIGEgPSBhLnNpYmxpbmc7CiAgICAgICAgICB9CiAgICAgICAgSGgoYik7CiAgICAgICAgcmV0dXJuOwogICAgICBjYXNlIDE5OgogICAgICAgIEhoKGIpOwogICAgICAgIHJldHVybjsKICAgICAgY2FzZSAxNzoKICAgICAgICByZXR1cm47CiAgICB9CiAgICB0aHJvdyBFcnJvcihrKDE2MykpOwogIH0KCiAgZnVuY3Rpb24gSGgoYSkgewogICAgdmFyIGIgPSBhLnVwZGF0ZVF1ZXVlOwogICAgaWYgKG51bGwgIT09IGIpIHsKICAgICAgYS51cGRhdGVRdWV1ZSA9IG51bGw7CiAgICAgIHZhciBjID0gYS5zdGF0ZU5vZGU7CiAgICAgIG51bGwgPT09IGMgJiYgKGMgPSBhLnN0YXRlTm9kZSA9IG5ldyBwaigpKTsKICAgICAgYi5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgdmFyIGQgPSBxai5iaW5kKG51bGwsIGEsIGIpOwogICAgICAgIGMuaGFzKGIpIHx8IChjLmFkZChiKSwgYi50aGVuKGQsIGQpKTsKICAgICAgfSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBJaChhLCBiLCBjKSB7CiAgICBjID0gRWEoYywgbnVsbCk7CiAgICBjLnRhZyA9IDM7CiAgICBjLnBheWxvYWQgPSB7IGVsZW1lbnQ6IG51bGwgfTsKICAgIHZhciBkID0gYi52YWx1ZTsKICAgIGMuY2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGNkIHx8ICgoY2QgPSAhMCksIChTZSA9IGQpKTsKICAgICAgTWUoYSwgYik7CiAgICB9OwogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiBKaChhLCBiLCBjKSB7CiAgICBjID0gRWEoYywgbnVsbCk7CiAgICBjLnRhZyA9IDM7CiAgICB2YXIgZCA9IGEudHlwZS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I7CiAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGQpIHsKICAgICAgdmFyIGUgPSBiLnZhbHVlOwogICAgICBjLnBheWxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgTWUoYSwgYik7CiAgICAgICAgcmV0dXJuIGQoZSk7CiAgICAgIH07CiAgICB9CiAgICB2YXIgZiA9IGEuc3RhdGVOb2RlOwogICAgbnVsbCAhPT0gZiAmJgogICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgZi5jb21wb25lbnREaWRDYXRjaCAmJgogICAgICAoYy5jYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAiZnVuY3Rpb24iICE9PSB0eXBlb2YgZCAmJgogICAgICAgICAgKG51bGwgPT09IExhID8gKExhID0gbmV3IFNldChbdGhpc10pKSA6IExhLmFkZCh0aGlzKSwgTWUoYSwgYikpOwogICAgICAgIHZhciBjID0gYi5zdGFjazsKICAgICAgICB0aGlzLmNvbXBvbmVudERpZENhdGNoKGIudmFsdWUsIHsKICAgICAgICAgIGNvbXBvbmVudFN0YWNrOiBudWxsICE9PSBjID8gYyA6ICIiLAogICAgICAgIH0pOwogICAgICB9KTsKICAgIHJldHVybiBjOwogIH0KCiAgZnVuY3Rpb24ga2EoKSB7CiAgICByZXR1cm4gKHAgJiAoY2EgfCBtYSkpICE9PSBICiAgICAgID8gMTA3Mzc0MTgyMSAtICgoWSgpIC8gMTApIHwgMCkKICAgICAgOiAwICE9PSBkZAogICAgICA/IGRkCiAgICAgIDogKGRkID0gMTA3Mzc0MTgyMSAtICgoWSgpIC8gMTApIHwgMCkpOwogIH0KCiAgZnVuY3Rpb24gVmEoYSwgYiwgYykgewogICAgYiA9IGIubW9kZTsKICAgIGlmICgwID09PSAoYiAmIDIpKSByZXR1cm4gMTA3Mzc0MTgyMzsKICAgIHZhciBkID0gQ2MoKTsKICAgIGlmICgwID09PSAoYiAmIDQpKSByZXR1cm4gOTkgPT09IGQgPyAxMDczNzQxODIzIDogMTA3Mzc0MTgyMjsKICAgIGlmICgocCAmIGNhKSAhPT0gSCkgcmV0dXJuIFA7CiAgICBpZiAobnVsbCAhPT0gYykgYSA9IEZjKGEsIGMudGltZW91dE1zIHwgMCB8fCA1ZTMsIDI1MCk7CiAgICBlbHNlCiAgICAgIHN3aXRjaCAoZCkgewogICAgICAgIGNhc2UgOTk6CiAgICAgICAgICBhID0gMTA3Mzc0MTgyMzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgOTg6CiAgICAgICAgICBhID0gRmMoYSwgMTUwLCAxMDApOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA5NzoKICAgICAgICBjYXNlIDk2OgogICAgICAgICAgYSA9IEZjKGEsIDVlMywgMjUwKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgOTU6CiAgICAgICAgICBhID0gMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aHJvdyBFcnJvcihrKDMyNikpOwogICAgICB9CiAgICBudWxsICE9PSBVICYmIGEgPT09IFAgJiYgLS1hOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBlZChhLCBiKSB7CiAgICBhLmV4cGlyYXRpb25UaW1lIDwgYiAmJiAoYS5leHBpcmF0aW9uVGltZSA9IGIpOwogICAgdmFyIGMgPSBhLmFsdGVybmF0ZTsKICAgIG51bGwgIT09IGMgJiYgYy5leHBpcmF0aW9uVGltZSA8IGIgJiYgKGMuZXhwaXJhdGlvblRpbWUgPSBiKTsKICAgIHZhciBkID0gYS5yZXR1cm4sCiAgICAgIGUgPSBudWxsOwogICAgaWYgKG51bGwgPT09IGQgJiYgMyA9PT0gYS50YWcpIGUgPSBhLnN0YXRlTm9kZTsKICAgIGVsc2UKICAgICAgZm9yICg7IG51bGwgIT09IGQ7ICkgewogICAgICAgIGMgPSBkLmFsdGVybmF0ZTsKICAgICAgICBkLmNoaWxkRXhwaXJhdGlvblRpbWUgPCBiICYmIChkLmNoaWxkRXhwaXJhdGlvblRpbWUgPSBiKTsKICAgICAgICBudWxsICE9PSBjICYmIGMuY2hpbGRFeHBpcmF0aW9uVGltZSA8IGIgJiYgKGMuY2hpbGRFeHBpcmF0aW9uVGltZSA9IGIpOwogICAgICAgIGlmIChudWxsID09PSBkLnJldHVybiAmJiAzID09PSBkLnRhZykgewogICAgICAgICAgZSA9IGQuc3RhdGVOb2RlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGQgPSBkLnJldHVybjsKICAgICAgfQogICAgbnVsbCAhPT0gZSAmJiAoVSA9PT0gZSAmJiAoS2MoYiksIEYgPT09IGJkICYmIFlhKGUsIFApKSwgeWgoZSwgYikpOwogICAgcmV0dXJuIGU7CiAgfQoKICBmdW5jdGlvbiBmZChhKSB7CiAgICB2YXIgYiA9IGEubGFzdEV4cGlyZWRUaW1lOwogICAgaWYgKDAgIT09IGIpIHJldHVybiBiOwogICAgYiA9IGEuZmlyc3RQZW5kaW5nVGltZTsKICAgIGlmICghS2goYSwgYikpIHJldHVybiBiOwogICAgdmFyIGMgPSBhLmxhc3RQaW5nZWRUaW1lOwogICAgYSA9IGEubmV4dEtub3duUGVuZGluZ0xldmVsOwogICAgYSA9IGMgPiBhID8gYyA6IGE7CiAgICByZXR1cm4gMiA+PSBhICYmIGIgIT09IGEgPyAwIDogYTsKICB9CgogIGZ1bmN0aW9uIFYoYSkgewogICAgaWYgKDAgIT09IGEubGFzdEV4cGlyZWRUaW1lKQogICAgICAoYS5jYWxsYmFja0V4cGlyYXRpb25UaW1lID0gMTA3Mzc0MTgyMyksCiAgICAgICAgKGEuY2FsbGJhY2tQcmlvcml0eSA9IDk5KSwKICAgICAgICAoYS5jYWxsYmFja05vZGUgPSBPZyhUZS5iaW5kKG51bGwsIGEpKSk7CiAgICBlbHNlIHsKICAgICAgdmFyIGIgPSBmZChhKSwKICAgICAgICBjID0gYS5jYWxsYmFja05vZGU7CiAgICAgIGlmICgwID09PSBiKQogICAgICAgIG51bGwgIT09IGMgJiYKICAgICAgICAgICgoYS5jYWxsYmFja05vZGUgPSBudWxsKSwKICAgICAgICAgIChhLmNhbGxiYWNrRXhwaXJhdGlvblRpbWUgPSAwKSwKICAgICAgICAgIChhLmNhbGxiYWNrUHJpb3JpdHkgPSA5MCkpOwogICAgICBlbHNlIHsKICAgICAgICB2YXIgZCA9IGthKCk7CiAgICAgICAgMTA3Mzc0MTgyMyA9PT0gYgogICAgICAgICAgPyAoZCA9IDk5KQogICAgICAgICAgOiAxID09PSBiIHx8IDIgPT09IGIKICAgICAgICAgID8gKGQgPSA5NSkKICAgICAgICAgIDogKChkID0gMTAgKiAoMTA3Mzc0MTgyMSAtIGIpIC0gMTAgKiAoMTA3Mzc0MTgyMSAtIGQpKSwKICAgICAgICAgICAgKGQgPSAwID49IGQgPyA5OSA6IDI1MCA+PSBkID8gOTggOiA1MjUwID49IGQgPyA5NyA6IDk1KSk7CiAgICAgICAgaWYgKG51bGwgIT09IGMpIHsKICAgICAgICAgIHZhciBlID0gYS5jYWxsYmFja1ByaW9yaXR5OwogICAgICAgICAgaWYgKGEuY2FsbGJhY2tFeHBpcmF0aW9uVGltZSA9PT0gYiAmJiBlID49IGQpIHJldHVybjsKICAgICAgICAgIGMgIT09IFFnICYmIFJnKGMpOwogICAgICAgIH0KICAgICAgICBhLmNhbGxiYWNrRXhwaXJhdGlvblRpbWUgPSBiOwogICAgICAgIGEuY2FsbGJhY2tQcmlvcml0eSA9IGQ7CiAgICAgICAgYiA9CiAgICAgICAgICAxMDczNzQxODIzID09PSBiCiAgICAgICAgICAgID8gT2coVGUuYmluZChudWxsLCBhKSkKICAgICAgICAgICAgOiBOZyhkLCBMaC5iaW5kKG51bGwsIGEpLCB7IHRpbWVvdXQ6IDEwICogKDEwNzM3NDE4MjEgLSBiKSAtIFkoKSB9KTsKICAgICAgICBhLmNhbGxiYWNrTm9kZSA9IGI7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIExoKGEsIGIpIHsKICAgIGRkID0gMDsKICAgIGlmIChiKSByZXR1cm4gKGIgPSBrYSgpKSwgVWUoYSwgYiksIFYoYSksIG51bGw7CiAgICB2YXIgYyA9IGZkKGEpOwogICAgaWYgKDAgIT09IGMpIHsKICAgICAgYiA9IGEuY2FsbGJhY2tOb2RlOwogICAgICBpZiAoKHAgJiAoY2EgfCBtYSkpICE9PSBIKSB0aHJvdyBFcnJvcihrKDMyNykpOwogICAgICB4YigpOwogICAgICAoYSA9PT0gVSAmJiBjID09PSBQKSB8fCAkYShhLCBjKTsKICAgICAgaWYgKG51bGwgIT09IHQpIHsKICAgICAgICB2YXIgZCA9IHA7CiAgICAgICAgcCB8PSBjYTsKICAgICAgICB2YXIgZSA9IE1oKCk7CiAgICAgICAgZG8KICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJqKCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfSBjYXRjaCAoaCkgewogICAgICAgICAgICBOaChhLCBoKTsKICAgICAgICAgIH0KICAgICAgICB3aGlsZSAoMSk7CiAgICAgICAgbGUoKTsKICAgICAgICBwID0gZDsKICAgICAgICBnZC5jdXJyZW50ID0gZTsKICAgICAgICBpZiAoRiA9PT0gaGQpIHRocm93ICgoYiA9IGlkKSwgJGEoYSwgYyksIFlhKGEsIGMpLCBWKGEpLCBiKTsKICAgICAgICBpZiAobnVsbCA9PT0gdCkKICAgICAgICAgIHN3aXRjaCAoCiAgICAgICAgICAgICgoZSA9IGEuZmluaXNoZWRXb3JrID0gYS5jdXJyZW50LmFsdGVybmF0ZSksCiAgICAgICAgICAgIChhLmZpbmlzaGVkRXhwaXJhdGlvblRpbWUgPSBjKSwKICAgICAgICAgICAgKGQgPSBGKSwKICAgICAgICAgICAgKFUgPSBudWxsKSwKICAgICAgICAgICAgZCkKICAgICAgICAgICkgewogICAgICAgICAgICBjYXNlIFhhOgogICAgICAgICAgICBjYXNlIGhkOgogICAgICAgICAgICAgIHRocm93IEVycm9yKGsoMzQ1KSk7CiAgICAgICAgICAgIGNhc2UgT2g6CiAgICAgICAgICAgICAgVWUoYSwgMiA8IGMgPyAyIDogYyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgYWQ6CiAgICAgICAgICAgICAgWWEoYSwgYyk7CiAgICAgICAgICAgICAgZCA9IGEubGFzdFN1c3BlbmRlZFRpbWU7CiAgICAgICAgICAgICAgYyA9PT0gZCAmJiAoYS5uZXh0S25vd25QZW5kaW5nTGV2ZWwgPSBWZShlKSk7CiAgICAgICAgICAgICAgaWYgKDEwNzM3NDE4MjMgPT09IHRhICYmICgoZSA9IFJlICsgUGggLSBZKCkpLCAxMCA8IGUpKSB7CiAgICAgICAgICAgICAgICBpZiAoamQpIHsKICAgICAgICAgICAgICAgICAgdmFyIGYgPSBhLmxhc3RQaW5nZWRUaW1lOwogICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gZiB8fCBmID49IGMpIHsKICAgICAgICAgICAgICAgICAgICBhLmxhc3RQaW5nZWRUaW1lID0gYzsKICAgICAgICAgICAgICAgICAgICAkYShhLCBjKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZiA9IGZkKGEpOwogICAgICAgICAgICAgICAgaWYgKDAgIT09IGYgJiYgZiAhPT0gYykgYnJlYWs7CiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZCAmJiBkICE9PSBjKSB7CiAgICAgICAgICAgICAgICAgIGEubGFzdFBpbmdlZFRpbWUgPSBkOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGEudGltZW91dEhhbmRsZSA9IFdlKGFiLmJpbmQobnVsbCwgYSksIGUpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFiKGEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIGJkOgogICAgICAgICAgICAgIFlhKGEsIGMpOwogICAgICAgICAgICAgIGQgPSBhLmxhc3RTdXNwZW5kZWRUaW1lOwogICAgICAgICAgICAgIGMgPT09IGQgJiYgKGEubmV4dEtub3duUGVuZGluZ0xldmVsID0gVmUoZSkpOwogICAgICAgICAgICAgIGlmIChqZCAmJiAoKGUgPSBhLmxhc3RQaW5nZWRUaW1lKSwgMCA9PT0gZSB8fCBlID49IGMpKSB7CiAgICAgICAgICAgICAgICBhLmxhc3RQaW5nZWRUaW1lID0gYzsKICAgICAgICAgICAgICAgICRhKGEsIGMpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGUgPSBmZChhKTsKICAgICAgICAgICAgICBpZiAoMCAhPT0gZSAmJiBlICE9PSBjKSBicmVhazsKICAgICAgICAgICAgICBpZiAoMCAhPT0gZCAmJiBkICE9PSBjKSB7CiAgICAgICAgICAgICAgICBhLmxhc3RQaW5nZWRUaW1lID0gZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAxMDczNzQxODIzICE9PSBZYgogICAgICAgICAgICAgICAgPyAoZCA9IDEwICogKDEwNzM3NDE4MjEgLSBZYikgLSBZKCkpCiAgICAgICAgICAgICAgICA6IDEwNzM3NDE4MjMgPT09IHRhCiAgICAgICAgICAgICAgICA/IChkID0gMCkKICAgICAgICAgICAgICAgIDogKChkID0gMTAgKiAoMTA3Mzc0MTgyMSAtIHRhKSAtIDVlMyksCiAgICAgICAgICAgICAgICAgIChlID0gWSgpKSwKICAgICAgICAgICAgICAgICAgKGMgPSAxMCAqICgxMDczNzQxODIxIC0gYykgLSBlKSwKICAgICAgICAgICAgICAgICAgKGQgPSBlIC0gZCksCiAgICAgICAgICAgICAgICAgIDAgPiBkICYmIChkID0gMCksCiAgICAgICAgICAgICAgICAgIChkID0KICAgICAgICAgICAgICAgICAgICAoMTIwID4gZAogICAgICAgICAgICAgICAgICAgICAgPyAxMjAKICAgICAgICAgICAgICAgICAgICAgIDogNDgwID4gZAogICAgICAgICAgICAgICAgICAgICAgPyA0ODAKICAgICAgICAgICAgICAgICAgICAgIDogMTA4MCA+IGQKICAgICAgICAgICAgICAgICAgICAgID8gMTA4MAogICAgICAgICAgICAgICAgICAgICAgOiAxOTIwID4gZAogICAgICAgICAgICAgICAgICAgICAgPyAxOTIwCiAgICAgICAgICAgICAgICAgICAgICA6IDNlMyA+IGQKICAgICAgICAgICAgICAgICAgICAgID8gM2UzCiAgICAgICAgICAgICAgICAgICAgICA6IDQzMjAgPiBkCiAgICAgICAgICAgICAgICAgICAgICA/IDQzMjAKICAgICAgICAgICAgICAgICAgICAgIDogMTk2MCAqIHNqKGQgLyAxOTYwKSkgLSBkKSwKICAgICAgICAgICAgICAgICAgYyA8IGQgJiYgKGQgPSBjKSk7CiAgICAgICAgICAgICAgaWYgKDEwIDwgZCkgewogICAgICAgICAgICAgICAgYS50aW1lb3V0SGFuZGxlID0gV2UoYWIuYmluZChudWxsLCBhKSwgZCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYWIoYSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgWGU6CiAgICAgICAgICAgICAgaWYgKDEwNzM3NDE4MjMgIT09IHRhICYmIG51bGwgIT09IGtkKSB7CiAgICAgICAgICAgICAgICBmID0gdGE7CiAgICAgICAgICAgICAgICB2YXIgZyA9IGtkOwogICAgICAgICAgICAgICAgZCA9IGcuYnVzeU1pbkR1cmF0aW9uTXMgfCAwOwogICAgICAgICAgICAgICAgMCA+PSBkCiAgICAgICAgICAgICAgICAgID8gKGQgPSAwKQogICAgICAgICAgICAgICAgICA6ICgoZSA9IGcuYnVzeURlbGF5TXMgfCAwKSwKICAgICAgICAgICAgICAgICAgICAoZiA9CiAgICAgICAgICAgICAgICAgICAgICBZKCkgLSAoMTAgKiAoMTA3Mzc0MTgyMSAtIGYpIC0gKGcudGltZW91dE1zIHwgMCB8fCA1ZTMpKSksCiAgICAgICAgICAgICAgICAgICAgKGQgPSBmIDw9IGUgPyAwIDogZSArIGQgLSBmKSk7CiAgICAgICAgICAgICAgICBpZiAoMTAgPCBkKSB7CiAgICAgICAgICAgICAgICAgIFlhKGEsIGMpOwogICAgICAgICAgICAgICAgICBhLnRpbWVvdXRIYW5kbGUgPSBXZShhYi5iaW5kKG51bGwsIGEpLCBkKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGFiKGEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRocm93IEVycm9yKGsoMzI5KSk7CiAgICAgICAgICB9CiAgICAgICAgVihhKTsKICAgICAgICBpZiAoYS5jYWxsYmFja05vZGUgPT09IGIpIHJldHVybiBMaC5iaW5kKG51bGwsIGEpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIFRlKGEpIHsKICAgIHZhciBiID0gYS5sYXN0RXhwaXJlZFRpbWU7CiAgICBiID0gMCAhPT0gYiA/IGIgOiAxMDczNzQxODIzOwogICAgaWYgKChwICYgKGNhIHwgbWEpKSAhPT0gSCkgdGhyb3cgRXJyb3IoaygzMjcpKTsKICAgIHhiKCk7CiAgICAoYSA9PT0gVSAmJiBiID09PSBQKSB8fCAkYShhLCBiKTsKICAgIGlmIChudWxsICE9PSB0KSB7CiAgICAgIHZhciBjID0gcDsKICAgICAgcCB8PSBjYTsKICAgICAgdmFyIGQgPSBNaCgpOwogICAgICBkbwogICAgICAgIHRyeSB7CiAgICAgICAgICB0aigpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgTmgoYSwgZSk7CiAgICAgICAgfQogICAgICB3aGlsZSAoMSk7CiAgICAgIGxlKCk7CiAgICAgIHAgPSBjOwogICAgICBnZC5jdXJyZW50ID0gZDsKICAgICAgaWYgKEYgPT09IGhkKSB0aHJvdyAoKGMgPSBpZCksICRhKGEsIGIpLCBZYShhLCBiKSwgVihhKSwgYyk7CiAgICAgIGlmIChudWxsICE9PSB0KSB0aHJvdyBFcnJvcihrKDI2MSkpOwogICAgICBhLmZpbmlzaGVkV29yayA9IGEuY3VycmVudC5hbHRlcm5hdGU7CiAgICAgIGEuZmluaXNoZWRFeHBpcmF0aW9uVGltZSA9IGI7CiAgICAgIFUgPSBudWxsOwogICAgICBhYihhKTsKICAgICAgVihhKTsKICAgIH0KICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gdWooKSB7CiAgICBpZiAobnVsbCAhPT0gYmIpIHsKICAgICAgdmFyIGEgPSBiYjsKICAgICAgYmIgPSBudWxsOwogICAgICBhLmZvckVhY2goZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICBVZShjLCBhKTsKICAgICAgICBWKGMpOwogICAgICB9KTsKICAgICAgaGEoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIFFoKGEsIGIpIHsKICAgIHZhciBjID0gcDsKICAgIHAgfD0gMTsKICAgIHRyeSB7CiAgICAgIHJldHVybiBhKGIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgKHAgPSBjKSwgcCA9PT0gSCAmJiBoYSgpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gUmgoYSwgYikgewogICAgdmFyIGMgPSBwOwogICAgcCAmPSAtMjsKICAgIHAgfD0gWWU7CiAgICB0cnkgewogICAgICByZXR1cm4gYShiKTsKICAgIH0gZmluYWxseSB7CiAgICAgIChwID0gYyksIHAgPT09IEggJiYgaGEoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uICRhKGEsIGIpIHsKICAgIGEuZmluaXNoZWRXb3JrID0gbnVsbDsKICAgIGEuZmluaXNoZWRFeHBpcmF0aW9uVGltZSA9IDA7CiAgICB2YXIgYyA9IGEudGltZW91dEhhbmRsZTsKICAgIC0xICE9PSBjICYmICgoYS50aW1lb3V0SGFuZGxlID0gLTEpLCB2aihjKSk7CiAgICBpZiAobnVsbCAhPT0gdCkKICAgICAgZm9yIChjID0gdC5yZXR1cm47IG51bGwgIT09IGM7ICkgewogICAgICAgIHZhciBkID0gYzsKICAgICAgICBzd2l0Y2ggKGQudGFnKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGQgPSBkLnR5cGUuY2hpbGRDb250ZXh0VHlwZXM7CiAgICAgICAgICAgIG51bGwgIT09IGQgJiYgdm9pZCAwICE9PSBkICYmIChxKEcpLCBxKEIpKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHRiKCk7CiAgICAgICAgICAgIHEoRyk7CiAgICAgICAgICAgIHEoQik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICB0ZShkKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHRiKCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgcShEKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBxKEQpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIG1lKGQpOwogICAgICAgIH0KICAgICAgICBjID0gYy5yZXR1cm47CiAgICAgIH0KICAgIFUgPSBhOwogICAgdCA9IFNhKGEuY3VycmVudCwgbnVsbCk7CiAgICBQID0gYjsKICAgIEYgPSBYYTsKICAgIGlkID0gbnVsbDsKICAgIFliID0gdGEgPSAxMDczNzQxODIzOwogICAga2QgPSBudWxsOwogICAgWGIgPSAwOwogICAgamQgPSAhMTsKICB9CgogIGZ1bmN0aW9uIE5oKGEsIGIpIHsKICAgIGRvIHsKICAgICAgdHJ5IHsKICAgICAgICBsZSgpOwogICAgICAgIFNjLmN1cnJlbnQgPSBUYzsKICAgICAgICBpZiAoVWMpCiAgICAgICAgICBmb3IgKHZhciBjID0gei5tZW1vaXplZFN0YXRlOyBudWxsICE9PSBjOyApIHsKICAgICAgICAgICAgdmFyIGQgPSBjLnF1ZXVlOwogICAgICAgICAgICBudWxsICE9PSBkICYmIChkLnBlbmRpbmcgPSBudWxsKTsKICAgICAgICAgICAgYyA9IGMubmV4dDsKICAgICAgICAgIH0KICAgICAgICBJYSA9IDA7CiAgICAgICAgSiA9IEsgPSB6ID0gbnVsbDsKICAgICAgICBVYyA9ICExOwogICAgICAgIGlmIChudWxsID09PSB0IHx8IG51bGwgPT09IHQucmV0dXJuKQogICAgICAgICAgcmV0dXJuIChGID0gaGQpLCAoaWQgPSBiKSwgKHQgPSBudWxsKTsKICAgICAgICBhOiB7CiAgICAgICAgICB2YXIgZSA9IGEsCiAgICAgICAgICAgIGYgPSB0LnJldHVybiwKICAgICAgICAgICAgZyA9IHQsCiAgICAgICAgICAgIGggPSBiOwogICAgICAgICAgYiA9IFA7CiAgICAgICAgICBnLmVmZmVjdFRhZyB8PSAyMDQ4OwogICAgICAgICAgZy5maXJzdEVmZmVjdCA9IGcubGFzdEVmZmVjdCA9IG51bGw7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIG51bGwgIT09IGggJiYKICAgICAgICAgICAgIm9iamVjdCIgPT09IHR5cGVvZiBoICYmCiAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBoLnRoZW4KICAgICAgICAgICkgewogICAgICAgICAgICB2YXIgbSA9IGg7CiAgICAgICAgICAgIGlmICgwID09PSAoZy5tb2RlICYgMikpIHsKICAgICAgICAgICAgICB2YXIgbiA9IGcuYWx0ZXJuYXRlOwogICAgICAgICAgICAgIG4KICAgICAgICAgICAgICAgID8gKChnLnVwZGF0ZVF1ZXVlID0gbi51cGRhdGVRdWV1ZSksCiAgICAgICAgICAgICAgICAgIChnLm1lbW9pemVkU3RhdGUgPSBuLm1lbW9pemVkU3RhdGUpLAogICAgICAgICAgICAgICAgICAoZy5leHBpcmF0aW9uVGltZSA9IG4uZXhwaXJhdGlvblRpbWUpKQogICAgICAgICAgICAgICAgOiAoKGcudXBkYXRlUXVldWUgPSBudWxsKSwgKGcubWVtb2l6ZWRTdGF0ZSA9IG51bGwpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbCA9IDAgIT09IChELmN1cnJlbnQgJiAxKSwKICAgICAgICAgICAgICBrID0gZjsKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIHZhciBwOwogICAgICAgICAgICAgIGlmICgocCA9IDEzID09PSBrLnRhZykpIHsKICAgICAgICAgICAgICAgIHZhciBxID0gay5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHEpIHAgPSBudWxsICE9PSBxLmRlaHlkcmF0ZWQgPyAhMCA6ICExOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIHZhciB3ID0gay5tZW1vaXplZFByb3BzOwogICAgICAgICAgICAgICAgICBwID0KICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHcuZmFsbGJhY2sKICAgICAgICAgICAgICAgICAgICAgID8gITEKICAgICAgICAgICAgICAgICAgICAgIDogITAgIT09IHcudW5zdGFibGVfYXZvaWRUaGlzRmFsbGJhY2sKICAgICAgICAgICAgICAgICAgICAgID8gITAKICAgICAgICAgICAgICAgICAgICAgIDogbAogICAgICAgICAgICAgICAgICAgICAgPyAhMQogICAgICAgICAgICAgICAgICAgICAgOiAhMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHApIHsKICAgICAgICAgICAgICAgIHZhciB5ID0gay51cGRhdGVRdWV1ZTsKICAgICAgICAgICAgICAgIGlmIChudWxsID09PSB5KSB7CiAgICAgICAgICAgICAgICAgIHZhciByID0gbmV3IFNldCgpOwogICAgICAgICAgICAgICAgICByLmFkZChtKTsKICAgICAgICAgICAgICAgICAgay51cGRhdGVRdWV1ZSA9IHI7CiAgICAgICAgICAgICAgICB9IGVsc2UgeS5hZGQobSk7CiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gKGsubW9kZSAmIDIpKSB7CiAgICAgICAgICAgICAgICAgIGsuZWZmZWN0VGFnIHw9IDY0OwogICAgICAgICAgICAgICAgICBnLmVmZmVjdFRhZyAmPSAtMjk4MTsKICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IGcudGFnKQogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBnLmFsdGVybmF0ZSkgZy50YWcgPSAxNzsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBPID0gRWEoMTA3Mzc0MTgyMywgbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICBPLnRhZyA9IEpjOwogICAgICAgICAgICAgICAgICAgICAgRmEoZywgTyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBnLmV4cGlyYXRpb25UaW1lID0gMTA3Mzc0MTgyMzsKICAgICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGggPSB2b2lkIDA7CiAgICAgICAgICAgICAgICBnID0gYjsKICAgICAgICAgICAgICAgIHZhciB2ID0gZS5waW5nQ2FjaGU7CiAgICAgICAgICAgICAgICBudWxsID09PSB2CiAgICAgICAgICAgICAgICAgID8gKCh2ID0gZS5waW5nQ2FjaGUgPSBuZXcgd2ooKSksIChoID0gbmV3IFNldCgpKSwgdi5zZXQobSwgaCkpCiAgICAgICAgICAgICAgICAgIDogKChoID0gdi5nZXQobSkpLAogICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gaCAmJiAoKGggPSBuZXcgU2V0KCkpLCB2LnNldChtLCBoKSkpOwogICAgICAgICAgICAgICAgaWYgKCFoLmhhcyhnKSkgewogICAgICAgICAgICAgICAgICBoLmFkZChnKTsKICAgICAgICAgICAgICAgICAgdmFyIHggPSB4ai5iaW5kKG51bGwsIGUsIG0sIGcpOwogICAgICAgICAgICAgICAgICBtLnRoZW4oeCwgeCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBrLmVmZmVjdFRhZyB8PSA0MDk2OwogICAgICAgICAgICAgICAgay5leHBpcmF0aW9uVGltZSA9IGI7CiAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBrID0gay5yZXR1cm47CiAgICAgICAgICAgIH0gd2hpbGUgKG51bGwgIT09IGspOwogICAgICAgICAgICBoID0gRXJyb3IoCiAgICAgICAgICAgICAgKG5hKGcudHlwZSkgfHwgIkEgUmVhY3QgY29tcG9uZW50IikgKwogICAgICAgICAgICAgICAgIiBzdXNwZW5kZWQgd2hpbGUgcmVuZGVyaW5nLCBidXQgbm8gZmFsbGJhY2sgVUkgd2FzIHNwZWNpZmllZC5cblxuQWRkIGEgPFN1c3BlbnNlIGZhbGxiYWNrPS4uLj4gY29tcG9uZW50IGhpZ2hlciBpbiB0aGUgdHJlZSB0byBwcm92aWRlIGEgbG9hZGluZyBpbmRpY2F0b3Igb3IgcGxhY2Vob2xkZXIgdG8gZGlzcGxheS4iICsKICAgICAgICAgICAgICAgIEJkKGcpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBGICE9PSBYZSAmJiAoRiA9IE9oKTsKICAgICAgICAgIGggPSBMZShoLCBnKTsKICAgICAgICAgIGsgPSBmOwogICAgICAgICAgZG8gewogICAgICAgICAgICBzd2l0Y2ggKGsudGFnKSB7CiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgbSA9IGg7CiAgICAgICAgICAgICAgICBrLmVmZmVjdFRhZyB8PSA0MDk2OwogICAgICAgICAgICAgICAgay5leHBpcmF0aW9uVGltZSA9IGI7CiAgICAgICAgICAgICAgICB2YXIgQSA9IEloKGssIG0sIGIpOwogICAgICAgICAgICAgICAgVWcoaywgQSk7CiAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIG0gPSBoOwogICAgICAgICAgICAgICAgdmFyIHUgPSBrLnR5cGUsCiAgICAgICAgICAgICAgICAgIEIgPSBrLnN0YXRlTm9kZTsKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgMCA9PT0gKGsuZWZmZWN0VGFnICYgNjQpICYmCiAgICAgICAgICAgICAgICAgICgiZnVuY3Rpb24iID09PSB0eXBlb2YgdS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IgfHwKICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gQiAmJgogICAgICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIEIuY29tcG9uZW50RGlkQ2F0Y2ggJiYKICAgICAgICAgICAgICAgICAgICAgIChudWxsID09PSBMYSB8fCAhTGEuaGFzKEIpKSkpCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgay5lZmZlY3RUYWcgfD0gNDA5NjsKICAgICAgICAgICAgICAgICAgay5leHBpcmF0aW9uVGltZSA9IGI7CiAgICAgICAgICAgICAgICAgIHZhciBIID0gSmgoaywgbSwgYik7CiAgICAgICAgICAgICAgICAgIFVnKGssIEgpOwogICAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGsgPSBrLnJldHVybjsKICAgICAgICAgIH0gd2hpbGUgKG51bGwgIT09IGspOwogICAgICAgIH0KICAgICAgICB0ID0gU2godCk7CiAgICAgIH0gY2F0Y2ggKGNqKSB7CiAgICAgICAgYiA9IGNqOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgfSB3aGlsZSAoMSk7CiAgfQoKICBmdW5jdGlvbiBNaChhKSB7CiAgICBhID0gZ2QuY3VycmVudDsKICAgIGdkLmN1cnJlbnQgPSBUYzsKICAgIHJldHVybiBudWxsID09PSBhID8gVGMgOiBhOwogIH0KCiAgZnVuY3Rpb24gVmcoYSwgYikgewogICAgYSA8IHRhICYmIDIgPCBhICYmICh0YSA9IGEpOwogICAgbnVsbCAhPT0gYiAmJiBhIDwgWWIgJiYgMiA8IGEgJiYgKChZYiA9IGEpLCAoa2QgPSBiKSk7CiAgfQoKICBmdW5jdGlvbiBLYyhhKSB7CiAgICBhID4gWGIgJiYgKFhiID0gYSk7CiAgfQoKICBmdW5jdGlvbiB0aigpIHsKICAgIGZvciAoOyBudWxsICE9PSB0OyApIHQgPSBUaCh0KTsKICB9CgogIGZ1bmN0aW9uIHJqKCkgewogICAgZm9yICg7IG51bGwgIT09IHQgJiYgIXlqKCk7ICkgdCA9IFRoKHQpOwogIH0KCiAgZnVuY3Rpb24gVGgoYSkgewogICAgdmFyIGIgPSB6aihhLmFsdGVybmF0ZSwgYSwgUCk7CiAgICBhLm1lbW9pemVkUHJvcHMgPSBhLnBlbmRpbmdQcm9wczsKICAgIG51bGwgPT09IGIgJiYgKGIgPSBTaChhKSk7CiAgICBVaC5jdXJyZW50ID0gbnVsbDsKICAgIHJldHVybiBiOwogIH0KCiAgZnVuY3Rpb24gU2goYSkgewogICAgdCA9IGE7CiAgICBkbyB7CiAgICAgIHZhciBiID0gdC5hbHRlcm5hdGU7CiAgICAgIGEgPSB0LnJldHVybjsKICAgICAgaWYgKDAgPT09ICh0LmVmZmVjdFRhZyAmIDIwNDgpKSB7CiAgICAgICAgYiA9IGhqKGIsIHQsIFApOwogICAgICAgIGlmICgxID09PSBQIHx8IDEgIT09IHQuY2hpbGRFeHBpcmF0aW9uVGltZSkgewogICAgICAgICAgZm9yICh2YXIgYyA9IDAsIGQgPSB0LmNoaWxkOyBudWxsICE9PSBkOyApIHsKICAgICAgICAgICAgdmFyIGUgPSBkLmV4cGlyYXRpb25UaW1lLAogICAgICAgICAgICAgIGYgPSBkLmNoaWxkRXhwaXJhdGlvblRpbWU7CiAgICAgICAgICAgIGUgPiBjICYmIChjID0gZSk7CiAgICAgICAgICAgIGYgPiBjICYmIChjID0gZik7CiAgICAgICAgICAgIGQgPSBkLnNpYmxpbmc7CiAgICAgICAgICB9CiAgICAgICAgICB0LmNoaWxkRXhwaXJhdGlvblRpbWUgPSBjOwogICAgICAgIH0KICAgICAgICBpZiAobnVsbCAhPT0gYikgcmV0dXJuIGI7CiAgICAgICAgbnVsbCAhPT0gYSAmJgogICAgICAgICAgMCA9PT0gKGEuZWZmZWN0VGFnICYgMjA0OCkgJiYKICAgICAgICAgIChudWxsID09PSBhLmZpcnN0RWZmZWN0ICYmIChhLmZpcnN0RWZmZWN0ID0gdC5maXJzdEVmZmVjdCksCiAgICAgICAgICBudWxsICE9PSB0Lmxhc3RFZmZlY3QgJiYKICAgICAgICAgICAgKG51bGwgIT09IGEubGFzdEVmZmVjdCAmJiAoYS5sYXN0RWZmZWN0Lm5leHRFZmZlY3QgPSB0LmZpcnN0RWZmZWN0KSwKICAgICAgICAgICAgKGEubGFzdEVmZmVjdCA9IHQubGFzdEVmZmVjdCkpLAogICAgICAgICAgMSA8IHQuZWZmZWN0VGFnICYmCiAgICAgICAgICAgIChudWxsICE9PSBhLmxhc3RFZmZlY3QKICAgICAgICAgICAgICA/IChhLmxhc3RFZmZlY3QubmV4dEVmZmVjdCA9IHQpCiAgICAgICAgICAgICAgOiAoYS5maXJzdEVmZmVjdCA9IHQpLAogICAgICAgICAgICAoYS5sYXN0RWZmZWN0ID0gdCkpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiID0gbGoodCk7CiAgICAgICAgaWYgKG51bGwgIT09IGIpIHJldHVybiAoYi5lZmZlY3RUYWcgJj0gMjA0NyksIGI7CiAgICAgICAgbnVsbCAhPT0gYSAmJgogICAgICAgICAgKChhLmZpcnN0RWZmZWN0ID0gYS5sYXN0RWZmZWN0ID0gbnVsbCksIChhLmVmZmVjdFRhZyB8PSAyMDQ4KSk7CiAgICAgIH0KICAgICAgYiA9IHQuc2libGluZzsKICAgICAgaWYgKG51bGwgIT09IGIpIHJldHVybiBiOwogICAgICB0ID0gYTsKICAgIH0gd2hpbGUgKG51bGwgIT09IHQpOwogICAgRiA9PT0gWGEgJiYgKEYgPSBYZSk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIFZlKGEpIHsKICAgIHZhciBiID0gYS5leHBpcmF0aW9uVGltZTsKICAgIGEgPSBhLmNoaWxkRXhwaXJhdGlvblRpbWU7CiAgICByZXR1cm4gYiA+IGEgPyBiIDogYTsKICB9CgogIGZ1bmN0aW9uIGFiKGEpIHsKICAgIHZhciBiID0gQ2MoKTsKICAgIERhKDk5LCBBai5iaW5kKG51bGwsIGEsIGIpKTsKICAgIHJldHVybiBudWxsOwogIH0KCiAgZnVuY3Rpb24gQWooYSwgYikgewogICAgZG8geGIoKTsKICAgIHdoaWxlIChudWxsICE9PSBaYik7CiAgICBpZiAoKHAgJiAoY2EgfCBtYSkpICE9PSBIKSB0aHJvdyBFcnJvcihrKDMyNykpOwogICAgdmFyIGMgPSBhLmZpbmlzaGVkV29yaywKICAgICAgZCA9IGEuZmluaXNoZWRFeHBpcmF0aW9uVGltZTsKICAgIGlmIChudWxsID09PSBjKSByZXR1cm4gbnVsbDsKICAgIGEuZmluaXNoZWRXb3JrID0gbnVsbDsKICAgIGEuZmluaXNoZWRFeHBpcmF0aW9uVGltZSA9IDA7CiAgICBpZiAoYyA9PT0gYS5jdXJyZW50KSB0aHJvdyBFcnJvcihrKDE3NykpOwogICAgYS5jYWxsYmFja05vZGUgPSBudWxsOwogICAgYS5jYWxsYmFja0V4cGlyYXRpb25UaW1lID0gMDsKICAgIGEuY2FsbGJhY2tQcmlvcml0eSA9IDkwOwogICAgYS5uZXh0S25vd25QZW5kaW5nTGV2ZWwgPSAwOwogICAgdmFyIGUgPSBWZShjKTsKICAgIGEuZmlyc3RQZW5kaW5nVGltZSA9IGU7CiAgICBkIDw9IGEubGFzdFN1c3BlbmRlZFRpbWUKICAgICAgPyAoYS5maXJzdFN1c3BlbmRlZFRpbWUgPQogICAgICAgICAgYS5sYXN0U3VzcGVuZGVkVGltZSA9CiAgICAgICAgICBhLm5leHRLbm93blBlbmRpbmdMZXZlbCA9CiAgICAgICAgICAgIDApCiAgICAgIDogZCA8PSBhLmZpcnN0U3VzcGVuZGVkVGltZSAmJiAoYS5maXJzdFN1c3BlbmRlZFRpbWUgPSBkIC0gMSk7CiAgICBkIDw9IGEubGFzdFBpbmdlZFRpbWUgJiYgKGEubGFzdFBpbmdlZFRpbWUgPSAwKTsKICAgIGQgPD0gYS5sYXN0RXhwaXJlZFRpbWUgJiYgKGEubGFzdEV4cGlyZWRUaW1lID0gMCk7CiAgICBhID09PSBVICYmICgodCA9IFUgPSBudWxsKSwgKFAgPSAwKSk7CiAgICAxIDwgYy5lZmZlY3RUYWcKICAgICAgPyBudWxsICE9PSBjLmxhc3RFZmZlY3QKICAgICAgICA/ICgoYy5sYXN0RWZmZWN0Lm5leHRFZmZlY3QgPSBjKSwgKGUgPSBjLmZpcnN0RWZmZWN0KSkKICAgICAgICA6IChlID0gYykKICAgICAgOiAoZSA9IGMuZmlyc3RFZmZlY3QpOwogICAgaWYgKG51bGwgIT09IGUpIHsKICAgICAgdmFyIGYgPSBwOwogICAgICBwIHw9IG1hOwogICAgICBVaC5jdXJyZW50ID0gbnVsbDsKICAgICAgWmUgPSB0YzsKICAgICAgdmFyIGcgPSBrZygpOwogICAgICBpZiAoWGQoZykpIHsKICAgICAgICBpZiAoInNlbGVjdGlvblN0YXJ0IiBpbiBnKQogICAgICAgICAgdmFyIGggPSB7IHN0YXJ0OiBnLnNlbGVjdGlvblN0YXJ0LCBlbmQ6IGcuc2VsZWN0aW9uRW5kIH07CiAgICAgICAgZWxzZQogICAgICAgICAgYTogewogICAgICAgICAgICBoID0gKChoID0gZy5vd25lckRvY3VtZW50KSAmJiBoLmRlZmF1bHRWaWV3KSB8fCB3aW5kb3c7CiAgICAgICAgICAgIHZhciBtID0gaC5nZXRTZWxlY3Rpb24gJiYgaC5nZXRTZWxlY3Rpb24oKTsKICAgICAgICAgICAgaWYgKG0gJiYgMCAhPT0gbS5yYW5nZUNvdW50KSB7CiAgICAgICAgICAgICAgaCA9IG0uYW5jaG9yTm9kZTsKICAgICAgICAgICAgICB2YXIgbiA9IG0uYW5jaG9yT2Zmc2V0LAogICAgICAgICAgICAgICAgcSA9IG0uZm9jdXNOb2RlOwogICAgICAgICAgICAgIG0gPSBtLmZvY3VzT2Zmc2V0OwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBoLm5vZGVUeXBlLCBxLm5vZGVUeXBlOwogICAgICAgICAgICAgIH0gY2F0Y2ggKHNiKSB7CiAgICAgICAgICAgICAgICBoID0gbnVsbDsKICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHZhciBiYSA9IDAsCiAgICAgICAgICAgICAgICB3ID0gLTEsCiAgICAgICAgICAgICAgICB5ID0gLTEsCiAgICAgICAgICAgICAgICBCID0gMCwKICAgICAgICAgICAgICAgIEQgPSAwLAogICAgICAgICAgICAgICAgciA9IGcsCiAgICAgICAgICAgICAgICB6ID0gbnVsbDsKICAgICAgICAgICAgICBiOiBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB2OyA7ICkgewogICAgICAgICAgICAgICAgICByICE9PSBoIHx8ICgwICE9PSBuICYmIDMgIT09IHIubm9kZVR5cGUpIHx8ICh3ID0gYmEgKyBuKTsKICAgICAgICAgICAgICAgICAgciAhPT0gcSB8fCAoMCAhPT0gbSAmJiAzICE9PSByLm5vZGVUeXBlKSB8fCAoeSA9IGJhICsgbSk7CiAgICAgICAgICAgICAgICAgIDMgPT09IHIubm9kZVR5cGUgJiYgKGJhICs9IHIubm9kZVZhbHVlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSAodiA9IHIuZmlyc3RDaGlsZCkpIGJyZWFrOwogICAgICAgICAgICAgICAgICB6ID0gcjsKICAgICAgICAgICAgICAgICAgciA9IHY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICAgIGlmIChyID09PSBnKSBicmVhayBiOwogICAgICAgICAgICAgICAgICB6ID09PSBoICYmICsrQiA9PT0gbiAmJiAodyA9IGJhKTsKICAgICAgICAgICAgICAgICAgeiA9PT0gcSAmJiArK0QgPT09IG0gJiYgKHkgPSBiYSk7CiAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAodiA9IHIubmV4dFNpYmxpbmcpKSBicmVhazsKICAgICAgICAgICAgICAgICAgciA9IHo7CiAgICAgICAgICAgICAgICAgIHogPSByLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByID0gdjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaCA9IC0xID09PSB3IHx8IC0xID09PSB5ID8gbnVsbCA6IHsgc3RhcnQ6IHcsIGVuZDogeSB9OwogICAgICAgICAgICB9IGVsc2UgaCA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgaCA9IGggfHwgeyBzdGFydDogMCwgZW5kOiAwIH07CiAgICAgIH0gZWxzZSBoID0gbnVsbDsKICAgICAgJGUgPSB7IGFjdGl2ZUVsZW1lbnREZXRhY2hlZDogbnVsbCwgZm9jdXNlZEVsZW06IGcsIHNlbGVjdGlvblJhbmdlOiBoIH07CiAgICAgIHRjID0gITE7CiAgICAgIGwgPSBlOwogICAgICBkbwogICAgICAgIHRyeSB7CiAgICAgICAgICBCaigpOwogICAgICAgIH0gY2F0Y2ggKHNiKSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gbCkgdGhyb3cgRXJyb3IoaygzMzApKTsKICAgICAgICAgIFphKGwsIHNiKTsKICAgICAgICAgIGwgPSBsLm5leHRFZmZlY3Q7CiAgICAgICAgfQogICAgICB3aGlsZSAobnVsbCAhPT0gbCk7CiAgICAgIGwgPSBlOwogICAgICBkbwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKGcgPSBhLCBoID0gYjsgbnVsbCAhPT0gbDsgKSB7CiAgICAgICAgICAgIHZhciB4ID0gbC5lZmZlY3RUYWc7CiAgICAgICAgICAgIHggJiAxNiAmJiBXYihsLnN0YXRlTm9kZSwgIiIpOwogICAgICAgICAgICBpZiAoeCAmIDEyOCkgewogICAgICAgICAgICAgIHZhciBBID0gbC5hbHRlcm5hdGU7CiAgICAgICAgICAgICAgaWYgKG51bGwgIT09IEEpIHsKICAgICAgICAgICAgICAgIHZhciB1ID0gQS5yZWY7CiAgICAgICAgICAgICAgICBudWxsICE9PSB1ICYmCiAgICAgICAgICAgICAgICAgICgiZnVuY3Rpb24iID09PSB0eXBlb2YgdSA/IHUobnVsbCkgOiAodS5jdXJyZW50ID0gbnVsbCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBzd2l0Y2ggKHggJiAxMDM4KSB7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgR2gobCk7CiAgICAgICAgICAgICAgICBsLmVmZmVjdFRhZyAmPSAtMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIEdoKGwpOwogICAgICAgICAgICAgICAgbC5lZmZlY3RUYWcgJj0gLTM7CiAgICAgICAgICAgICAgICBRZShsLmFsdGVybmF0ZSwgbCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDEwMjQ6CiAgICAgICAgICAgICAgICBsLmVmZmVjdFRhZyAmPSAtMTAyNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMTAyODoKICAgICAgICAgICAgICAgIGwuZWZmZWN0VGFnICY9IC0xMDI1OwogICAgICAgICAgICAgICAgUWUobC5hbHRlcm5hdGUsIGwpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgUWUobC5hbHRlcm5hdGUsIGwpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgKG4gPSBsKSwgRGgoZywgbiwgaCksIEVoKG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGwgPSBsLm5leHRFZmZlY3Q7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoc2IpIHsKICAgICAgICAgIGlmIChudWxsID09PSBsKSB0aHJvdyBFcnJvcihrKDMzMCkpOwogICAgICAgICAgWmEobCwgc2IpOwogICAgICAgICAgbCA9IGwubmV4dEVmZmVjdDsKICAgICAgICB9CiAgICAgIHdoaWxlIChudWxsICE9PSBsKTsKICAgICAgdSA9ICRlOwogICAgICBBID0ga2coKTsKICAgICAgeCA9IHUuZm9jdXNlZEVsZW07CiAgICAgIGggPSB1LnNlbGVjdGlvblJhbmdlOwogICAgICBpZiAoCiAgICAgICAgQSAhPT0geCAmJgogICAgICAgIHggJiYKICAgICAgICB4Lm93bmVyRG9jdW1lbnQgJiYKICAgICAgICBqZyh4Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB4KQogICAgICApIHsKICAgICAgICBudWxsICE9PSBoICYmCiAgICAgICAgICBYZCh4KSAmJgogICAgICAgICAgKChBID0gaC5zdGFydCksCiAgICAgICAgICAodSA9IGguZW5kKSwKICAgICAgICAgIHZvaWQgMCA9PT0gdSAmJiAodSA9IEEpLAogICAgICAgICAgInNlbGVjdGlvblN0YXJ0IiBpbiB4CiAgICAgICAgICAgID8gKCh4LnNlbGVjdGlvblN0YXJ0ID0gQSksCiAgICAgICAgICAgICAgKHguc2VsZWN0aW9uRW5kID0gTWF0aC5taW4odSwgeC52YWx1ZS5sZW5ndGgpKSkKICAgICAgICAgICAgOiAoKHUgPQogICAgICAgICAgICAgICAgKChBID0geC5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50KSAmJiBBLmRlZmF1bHRWaWV3KSB8fCB3aW5kb3cpLAogICAgICAgICAgICAgIHUuZ2V0U2VsZWN0aW9uICYmCiAgICAgICAgICAgICAgICAoKHUgPSB1LmdldFNlbGVjdGlvbigpKSwKICAgICAgICAgICAgICAgIChuID0geC50ZXh0Q29udGVudC5sZW5ndGgpLAogICAgICAgICAgICAgICAgKGcgPSBNYXRoLm1pbihoLnN0YXJ0LCBuKSksCiAgICAgICAgICAgICAgICAoaCA9IHZvaWQgMCA9PT0gaC5lbmQgPyBnIDogTWF0aC5taW4oaC5lbmQsIG4pKSwKICAgICAgICAgICAgICAgICF1LmV4dGVuZCAmJiBnID4gaCAmJiAoKG4gPSBoKSwgKGggPSBnKSwgKGcgPSBuKSksCiAgICAgICAgICAgICAgICAobiA9IGlnKHgsIGcpKSwKICAgICAgICAgICAgICAgIChxID0gaWcoeCwgaCkpLAogICAgICAgICAgICAgICAgbiAmJgogICAgICAgICAgICAgICAgICBxICYmCiAgICAgICAgICAgICAgICAgICgxICE9PSB1LnJhbmdlQ291bnQgfHwKICAgICAgICAgICAgICAgICAgICB1LmFuY2hvck5vZGUgIT09IG4ubm9kZSB8fAogICAgICAgICAgICAgICAgICAgIHUuYW5jaG9yT2Zmc2V0ICE9PSBuLm9mZnNldCB8fAogICAgICAgICAgICAgICAgICAgIHUuZm9jdXNOb2RlICE9PSBxLm5vZGUgfHwKICAgICAgICAgICAgICAgICAgICB1LmZvY3VzT2Zmc2V0ICE9PSBxLm9mZnNldCkgJiYKICAgICAgICAgICAgICAgICAgKChBID0gQS5jcmVhdGVSYW5nZSgpKSwKICAgICAgICAgICAgICAgICAgQS5zZXRTdGFydChuLm5vZGUsIG4ub2Zmc2V0KSwKICAgICAgICAgICAgICAgICAgdS5yZW1vdmVBbGxSYW5nZXMoKSwKICAgICAgICAgICAgICAgICAgZyA+IGgKICAgICAgICAgICAgICAgICAgICA/ICh1LmFkZFJhbmdlKEEpLCB1LmV4dGVuZChxLm5vZGUsIHEub2Zmc2V0KSkKICAgICAgICAgICAgICAgICAgICA6IChBLnNldEVuZChxLm5vZGUsIHEub2Zmc2V0KSwgdS5hZGRSYW5nZShBKSkpKSkpOwogICAgICAgIEEgPSBbXTsKICAgICAgICBmb3IgKHUgPSB4OyAodSA9IHUucGFyZW50Tm9kZSk7ICkKICAgICAgICAgIDEgPT09IHUubm9kZVR5cGUgJiYKICAgICAgICAgICAgQS5wdXNoKHsgZWxlbWVudDogdSwgbGVmdDogdS5zY3JvbGxMZWZ0LCB0b3A6IHUuc2Nyb2xsVG9wIH0pOwogICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiB4LmZvY3VzICYmIHguZm9jdXMoKTsKICAgICAgICBmb3IgKHggPSAwOyB4IDwgQS5sZW5ndGg7IHgrKykKICAgICAgICAgICh1ID0gQVt4XSksCiAgICAgICAgICAgICh1LmVsZW1lbnQuc2Nyb2xsTGVmdCA9IHUubGVmdCksCiAgICAgICAgICAgICh1LmVsZW1lbnQuc2Nyb2xsVG9wID0gdS50b3ApOwogICAgICB9CiAgICAgIHRjID0gISFaZTsKICAgICAgJGUgPSBaZSA9IG51bGw7CiAgICAgIGEuY3VycmVudCA9IGM7CiAgICAgIGwgPSBlOwogICAgICBkbwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKHggPSBhOyBudWxsICE9PSBsOyApIHsKICAgICAgICAgICAgdmFyIEYgPSBsLmVmZmVjdFRhZzsKICAgICAgICAgICAgRiAmIDM2ICYmIG9qKHgsIGwuYWx0ZXJuYXRlLCBsKTsKICAgICAgICAgICAgaWYgKEYgJiAxMjgpIHsKICAgICAgICAgICAgICBBID0gdm9pZCAwOwogICAgICAgICAgICAgIHZhciBFID0gbC5yZWY7CiAgICAgICAgICAgICAgaWYgKG51bGwgIT09IEUpIHsKICAgICAgICAgICAgICAgIHZhciBHID0gbC5zdGF0ZU5vZGU7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGwudGFnKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICBBID0gRzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBBID0gRzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBFID8gRShBKSA6IChFLmN1cnJlbnQgPSBBKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbCA9IGwubmV4dEVmZmVjdDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChzYikgewogICAgICAgICAgaWYgKG51bGwgPT09IGwpIHRocm93IEVycm9yKGsoMzMwKSk7CiAgICAgICAgICBaYShsLCBzYik7CiAgICAgICAgICBsID0gbC5uZXh0RWZmZWN0OwogICAgICAgIH0KICAgICAgd2hpbGUgKG51bGwgIT09IGwpOwogICAgICBsID0gbnVsbDsKICAgICAgQ2ooKTsKICAgICAgcCA9IGY7CiAgICB9IGVsc2UgYS5jdXJyZW50ID0gYzsKICAgIGlmIChsZCkgKGxkID0gITEpLCAoWmIgPSBhKSwgKCRiID0gYik7CiAgICBlbHNlCiAgICAgIGZvciAobCA9IGU7IG51bGwgIT09IGw7ICkKICAgICAgICAoYiA9IGwubmV4dEVmZmVjdCksIChsLm5leHRFZmZlY3QgPSBudWxsKSwgKGwgPSBiKTsKICAgIGIgPSBhLmZpcnN0UGVuZGluZ1RpbWU7CiAgICAwID09PSBiICYmIChMYSA9IG51bGwpOwogICAgMTA3Mzc0MTgyMyA9PT0gYiA/IChhID09PSBhZiA/IGFjKysgOiAoKGFjID0gMCksIChhZiA9IGEpKSkgOiAoYWMgPSAwKTsKICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBiZiAmJiBiZihjLnN0YXRlTm9kZSwgZCk7CiAgICBWKGEpOwogICAgaWYgKGNkKSB0aHJvdyAoKGNkID0gITEpLCAoYSA9IFNlKSwgKFNlID0gbnVsbCksIGEpOwogICAgaWYgKChwICYgWWUpICE9PSBIKSByZXR1cm4gbnVsbDsKICAgIGhhKCk7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIEJqKCkgewogICAgZm9yICg7IG51bGwgIT09IGw7ICkgewogICAgICB2YXIgYSA9IGwuZWZmZWN0VGFnOwogICAgICAwICE9PSAoYSAmIDI1NikgJiYgbmoobC5hbHRlcm5hdGUsIGwpOwogICAgICAwID09PSAoYSAmIDUxMikgfHwKICAgICAgICBsZCB8fAogICAgICAgICgobGQgPSAhMCksCiAgICAgICAgTmcoOTcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHhiKCk7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9KSk7CiAgICAgIGwgPSBsLm5leHRFZmZlY3Q7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB4YigpIHsKICAgIGlmICg5MCAhPT0gJGIpIHsKICAgICAgdmFyIGEgPSA5NyA8ICRiID8gOTcgOiAkYjsKICAgICAgJGIgPSA5MDsKICAgICAgcmV0dXJuIERhKGEsIERqKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIERqKCkgewogICAgaWYgKG51bGwgPT09IFpiKSByZXR1cm4gITE7CiAgICB2YXIgYSA9IFpiOwogICAgWmIgPSBudWxsOwogICAgaWYgKChwICYgKGNhIHwgbWEpKSAhPT0gSCkgdGhyb3cgRXJyb3IoaygzMzEpKTsKICAgIHZhciBiID0gcDsKICAgIHAgfD0gbWE7CiAgICBmb3IgKGEgPSBhLmN1cnJlbnQuZmlyc3RFZmZlY3Q7IG51bGwgIT09IGE7ICkgewogICAgICB0cnkgewogICAgICAgIHZhciBjID0gYTsKICAgICAgICBpZiAoMCAhPT0gKGMuZWZmZWN0VGFnICYgNTEyKSkKICAgICAgICAgIHN3aXRjaCAoYy50YWcpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIEFoKDUsIGMpLCBCaCg1LCBjKTsKICAgICAgICAgIH0KICAgICAgfSBjYXRjaCAoZCkgewogICAgICAgIGlmIChudWxsID09PSBhKSB0aHJvdyBFcnJvcihrKDMzMCkpOwogICAgICAgIFphKGEsIGQpOwogICAgICB9CiAgICAgIGMgPSBhLm5leHRFZmZlY3Q7CiAgICAgIGEubmV4dEVmZmVjdCA9IG51bGw7CiAgICAgIGEgPSBjOwogICAgfQogICAgcCA9IGI7CiAgICBoYSgpOwogICAgcmV0dXJuICEwOwogIH0KCiAgZnVuY3Rpb24gVmgoYSwgYiwgYykgewogICAgYiA9IExlKGMsIGIpOwogICAgYiA9IEloKGEsIGIsIDEwNzM3NDE4MjMpOwogICAgRmEoYSwgYik7CiAgICBhID0gZWQoYSwgMTA3Mzc0MTgyMyk7CiAgICBudWxsICE9PSBhICYmIFYoYSk7CiAgfQoKICBmdW5jdGlvbiBaYShhLCBiKSB7CiAgICBpZiAoMyA9PT0gYS50YWcpIFZoKGEsIGEsIGIpOwogICAgZWxzZQogICAgICBmb3IgKHZhciBjID0gYS5yZXR1cm47IG51bGwgIT09IGM7ICkgewogICAgICAgIGlmICgzID09PSBjLnRhZykgewogICAgICAgICAgVmgoYywgYSwgYik7CiAgICAgICAgICBicmVhazsKICAgICAgICB9IGVsc2UgaWYgKDEgPT09IGMudGFnKSB7CiAgICAgICAgICB2YXIgZCA9IGMuc3RhdGVOb2RlOwogICAgICAgICAgaWYgKAogICAgICAgICAgICAiZnVuY3Rpb24iID09PSB0eXBlb2YgYy50eXBlLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvciB8fAogICAgICAgICAgICAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGQuY29tcG9uZW50RGlkQ2F0Y2ggJiYKICAgICAgICAgICAgICAobnVsbCA9PT0gTGEgfHwgIUxhLmhhcyhkKSkpCiAgICAgICAgICApIHsKICAgICAgICAgICAgYSA9IExlKGIsIGEpOwogICAgICAgICAgICBhID0gSmgoYywgYSwgMTA3Mzc0MTgyMyk7CiAgICAgICAgICAgIEZhKGMsIGEpOwogICAgICAgICAgICBjID0gZWQoYywgMTA3Mzc0MTgyMyk7CiAgICAgICAgICAgIG51bGwgIT09IGMgJiYgVihjKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGMgPSBjLnJldHVybjsKICAgICAgfQogIH0KCiAgZnVuY3Rpb24geGooYSwgYiwgYykgewogICAgdmFyIGQgPSBhLnBpbmdDYWNoZTsKICAgIG51bGwgIT09IGQgJiYgZC5kZWxldGUoYik7CiAgICBVID09PSBhICYmIFAgPT09IGMKICAgICAgPyBGID09PSBiZCB8fCAoRiA9PT0gYWQgJiYgMTA3Mzc0MTgyMyA9PT0gdGEgJiYgWSgpIC0gUmUgPCBQaCkKICAgICAgICA/ICRhKGEsIFApCiAgICAgICAgOiAoamQgPSAhMCkKICAgICAgOiBLaChhLCBjKSAmJgogICAgICAgICgoYiA9IGEubGFzdFBpbmdlZFRpbWUpLAogICAgICAgICgwICE9PSBiICYmIGIgPCBjKSB8fCAoKGEubGFzdFBpbmdlZFRpbWUgPSBjKSwgVihhKSkpOwogIH0KCiAgZnVuY3Rpb24gcWooYSwgYikgewogICAgdmFyIGMgPSBhLnN0YXRlTm9kZTsKICAgIG51bGwgIT09IGMgJiYgYy5kZWxldGUoYik7CiAgICBiID0gMDsKICAgIDAgPT09IGIgJiYgKChiID0ga2EoKSksIChiID0gVmEoYiwgYSwgbnVsbCkpKTsKICAgIGEgPSBlZChhLCBiKTsKICAgIG51bGwgIT09IGEgJiYgVihhKTsKICB9CgogIGZ1bmN0aW9uIEVqKGEpIHsKICAgIGlmICgidW5kZWZpbmVkIiA9PT0gdHlwZW9mIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXykgcmV0dXJuICExOwogICAgdmFyIGIgPSBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX187CiAgICBpZiAoYi5pc0Rpc2FibGVkIHx8ICFiLnN1cHBvcnRzRmliZXIpIHJldHVybiAhMDsKICAgIHRyeSB7CiAgICAgIHZhciBjID0gYi5pbmplY3QoYSk7CiAgICAgIGJmID0gZnVuY3Rpb24gKGEsIGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgYi5vbkNvbW1pdEZpYmVyUm9vdChjLCBhLCB2b2lkIDAsIDY0ID09PSAoYS5jdXJyZW50LmVmZmVjdFRhZyAmIDY0KSk7CiAgICAgICAgfSBjYXRjaCAoZikge30KICAgICAgfTsKICAgICAgTmUgPSBmdW5jdGlvbiAoYSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBiLm9uQ29tbWl0RmliZXJVbm1vdW50KGMsIGEpOwogICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgIH07CiAgICB9IGNhdGNoIChkKSB7fQogICAgcmV0dXJuICEwOwogIH0KCiAgZnVuY3Rpb24gRmooYSwgYiwgYywgZCkgewogICAgdGhpcy50YWcgPSBhOwogICAgdGhpcy5rZXkgPSBjOwogICAgdGhpcy5zaWJsaW5nID0KICAgICAgdGhpcy5jaGlsZCA9CiAgICAgIHRoaXMucmV0dXJuID0KICAgICAgdGhpcy5zdGF0ZU5vZGUgPQogICAgICB0aGlzLnR5cGUgPQogICAgICB0aGlzLmVsZW1lbnRUeXBlID0KICAgICAgICBudWxsOwogICAgdGhpcy5pbmRleCA9IDA7CiAgICB0aGlzLnJlZiA9IG51bGw7CiAgICB0aGlzLnBlbmRpbmdQcm9wcyA9IGI7CiAgICB0aGlzLmRlcGVuZGVuY2llcyA9CiAgICAgIHRoaXMubWVtb2l6ZWRTdGF0ZSA9CiAgICAgIHRoaXMudXBkYXRlUXVldWUgPQogICAgICB0aGlzLm1lbW9pemVkUHJvcHMgPQogICAgICAgIG51bGw7CiAgICB0aGlzLm1vZGUgPSBkOwogICAgdGhpcy5lZmZlY3RUYWcgPSAwOwogICAgdGhpcy5sYXN0RWZmZWN0ID0gdGhpcy5maXJzdEVmZmVjdCA9IHRoaXMubmV4dEVmZmVjdCA9IG51bGw7CiAgICB0aGlzLmNoaWxkRXhwaXJhdGlvblRpbWUgPSB0aGlzLmV4cGlyYXRpb25UaW1lID0gMDsKICAgIHRoaXMuYWx0ZXJuYXRlID0gbnVsbDsKICB9CgogIGZ1bmN0aW9uIEdlKGEpIHsKICAgIGEgPSBhLnByb3RvdHlwZTsKICAgIHJldHVybiAhKCFhIHx8ICFhLmlzUmVhY3RDb21wb25lbnQpOwogIH0KCiAgZnVuY3Rpb24gR2ooYSkgewogICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBhKSByZXR1cm4gR2UoYSkgPyAxIDogMDsKICAgIGlmICh2b2lkIDAgIT09IGEgJiYgbnVsbCAhPT0gYSkgewogICAgICBhID0gYS4kJHR5cGVvZjsKICAgICAgaWYgKGEgPT09IHpkKSByZXR1cm4gMTE7CiAgICAgIGlmIChhID09PSBBZCkgcmV0dXJuIDE0OwogICAgfQogICAgcmV0dXJuIDI7CiAgfQoKICBmdW5jdGlvbiBTYShhLCBiKSB7CiAgICB2YXIgYyA9IGEuYWx0ZXJuYXRlOwogICAgbnVsbCA9PT0gYwogICAgICA/ICgoYyA9IGxhKGEudGFnLCBiLCBhLmtleSwgYS5tb2RlKSksCiAgICAgICAgKGMuZWxlbWVudFR5cGUgPSBhLmVsZW1lbnRUeXBlKSwKICAgICAgICAoYy50eXBlID0gYS50eXBlKSwKICAgICAgICAoYy5zdGF0ZU5vZGUgPSBhLnN0YXRlTm9kZSksCiAgICAgICAgKGMuYWx0ZXJuYXRlID0gYSksCiAgICAgICAgKGEuYWx0ZXJuYXRlID0gYykpCiAgICAgIDogKChjLnBlbmRpbmdQcm9wcyA9IGIpLAogICAgICAgIChjLmVmZmVjdFRhZyA9IDApLAogICAgICAgIChjLm5leHRFZmZlY3QgPSBudWxsKSwKICAgICAgICAoYy5maXJzdEVmZmVjdCA9IG51bGwpLAogICAgICAgIChjLmxhc3RFZmZlY3QgPSBudWxsKSk7CiAgICBjLmNoaWxkRXhwaXJhdGlvblRpbWUgPSBhLmNoaWxkRXhwaXJhdGlvblRpbWU7CiAgICBjLmV4cGlyYXRpb25UaW1lID0gYS5leHBpcmF0aW9uVGltZTsKICAgIGMuY2hpbGQgPSBhLmNoaWxkOwogICAgYy5tZW1vaXplZFByb3BzID0gYS5tZW1vaXplZFByb3BzOwogICAgYy5tZW1vaXplZFN0YXRlID0gYS5tZW1vaXplZFN0YXRlOwogICAgYy51cGRhdGVRdWV1ZSA9IGEudXBkYXRlUXVldWU7CiAgICBiID0gYS5kZXBlbmRlbmNpZXM7CiAgICBjLmRlcGVuZGVuY2llcyA9CiAgICAgIG51bGwgPT09IGIKICAgICAgICA/IG51bGwKICAgICAgICA6IHsKICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IGIuZXhwaXJhdGlvblRpbWUsCiAgICAgICAgICAgIGZpcnN0Q29udGV4dDogYi5maXJzdENvbnRleHQsCiAgICAgICAgICAgIHJlc3BvbmRlcnM6IGIucmVzcG9uZGVycywKICAgICAgICAgIH07CiAgICBjLnNpYmxpbmcgPSBhLnNpYmxpbmc7CiAgICBjLmluZGV4ID0gYS5pbmRleDsKICAgIGMucmVmID0gYS5yZWY7CiAgICByZXR1cm4gYzsKICB9CgogIGZ1bmN0aW9uIE9jKGEsIGIsIGMsIGQsIGUsIGYpIHsKICAgIHZhciBnID0gMjsKICAgIGQgPSBhOwogICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBhKSBHZShhKSAmJiAoZyA9IDEpOwogICAgZWxzZSBpZiAoInN0cmluZyIgPT09IHR5cGVvZiBhKSBnID0gNTsKICAgIGVsc2UKICAgICAgYTogc3dpdGNoIChhKSB7CiAgICAgICAgY2FzZSBNYToKICAgICAgICAgIHJldHVybiBIYShjLmNoaWxkcmVuLCBlLCBmLCBiKTsKICAgICAgICBjYXNlIEhqOgogICAgICAgICAgZyA9IDg7CiAgICAgICAgICBlIHw9IDc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIEFmOgogICAgICAgICAgZyA9IDg7CiAgICAgICAgICBlIHw9IDE7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIGtjOgogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKGEgPSBsYSgxMiwgYywgYiwgZSB8IDgpKSwKICAgICAgICAgICAgKGEuZWxlbWVudFR5cGUgPSBrYyksCiAgICAgICAgICAgIChhLnR5cGUgPSBrYyksCiAgICAgICAgICAgIChhLmV4cGlyYXRpb25UaW1lID0gZiksCiAgICAgICAgICAgIGEKICAgICAgICAgICk7CiAgICAgICAgY2FzZSBsYzoKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIChhID0gbGEoMTMsIGMsIGIsIGUpKSwKICAgICAgICAgICAgKGEudHlwZSA9IGxjKSwKICAgICAgICAgICAgKGEuZWxlbWVudFR5cGUgPSBsYyksCiAgICAgICAgICAgIChhLmV4cGlyYXRpb25UaW1lID0gZiksCiAgICAgICAgICAgIGEKICAgICAgICAgICk7CiAgICAgICAgY2FzZSB5ZDoKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIChhID0gbGEoMTksIGMsIGIsIGUpKSwKICAgICAgICAgICAgKGEuZWxlbWVudFR5cGUgPSB5ZCksCiAgICAgICAgICAgIChhLmV4cGlyYXRpb25UaW1lID0gZiksCiAgICAgICAgICAgIGEKICAgICAgICAgICk7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGlmICgib2JqZWN0IiA9PT0gdHlwZW9mIGEgJiYgbnVsbCAhPT0gYSkKICAgICAgICAgICAgc3dpdGNoIChhLiQkdHlwZW9mKSB7CiAgICAgICAgICAgICAgY2FzZSBDZjoKICAgICAgICAgICAgICAgIGcgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgY2FzZSBCZjoKICAgICAgICAgICAgICAgIGcgPSA5OwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICBjYXNlIHpkOgogICAgICAgICAgICAgICAgZyA9IDExOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICBjYXNlIEFkOgogICAgICAgICAgICAgICAgZyA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICBjYXNlIEVmOgogICAgICAgICAgICAgICAgZyA9IDE2OwogICAgICAgICAgICAgICAgZCA9IG51bGw7CiAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgIGNhc2UgRGY6CiAgICAgICAgICAgICAgICBnID0gMjI7CiAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICB9CiAgICAgICAgICB0aHJvdyBFcnJvcihrKDEzMCwgbnVsbCA9PSBhID8gYSA6IHR5cGVvZiBhLCAiIikpOwogICAgICB9CiAgICBiID0gbGEoZywgYywgYiwgZSk7CiAgICBiLmVsZW1lbnRUeXBlID0gYTsKICAgIGIudHlwZSA9IGQ7CiAgICBiLmV4cGlyYXRpb25UaW1lID0gZjsKICAgIHJldHVybiBiOwogIH0KCiAgZnVuY3Rpb24gSGEoYSwgYiwgYywgZCkgewogICAgYSA9IGxhKDcsIGEsIGQsIGIpOwogICAgYS5leHBpcmF0aW9uVGltZSA9IGM7CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIHFlKGEsIGIsIGMpIHsKICAgIGEgPSBsYSg2LCBhLCBudWxsLCBiKTsKICAgIGEuZXhwaXJhdGlvblRpbWUgPSBjOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiByZShhLCBiLCBjKSB7CiAgICBiID0gbGEoNCwgbnVsbCAhPT0gYS5jaGlsZHJlbiA/IGEuY2hpbGRyZW4gOiBbXSwgYS5rZXksIGIpOwogICAgYi5leHBpcmF0aW9uVGltZSA9IGM7CiAgICBiLnN0YXRlTm9kZSA9IHsKICAgICAgY29udGFpbmVySW5mbzogYS5jb250YWluZXJJbmZvLAogICAgICBwZW5kaW5nQ2hpbGRyZW46IG51bGwsCiAgICAgIGltcGxlbWVudGF0aW9uOiBhLmltcGxlbWVudGF0aW9uLAogICAgfTsKICAgIHJldHVybiBiOwogIH0KCiAgZnVuY3Rpb24gSWooYSwgYiwgYykgewogICAgdGhpcy50YWcgPSBiOwogICAgdGhpcy5jdXJyZW50ID0gbnVsbDsKICAgIHRoaXMuY29udGFpbmVySW5mbyA9IGE7CiAgICB0aGlzLnBpbmdDYWNoZSA9IHRoaXMucGVuZGluZ0NoaWxkcmVuID0gbnVsbDsKICAgIHRoaXMuZmluaXNoZWRFeHBpcmF0aW9uVGltZSA9IDA7CiAgICB0aGlzLmZpbmlzaGVkV29yayA9IG51bGw7CiAgICB0aGlzLnRpbWVvdXRIYW5kbGUgPSAtMTsKICAgIHRoaXMucGVuZGluZ0NvbnRleHQgPSB0aGlzLmNvbnRleHQgPSBudWxsOwogICAgdGhpcy5oeWRyYXRlID0gYzsKICAgIHRoaXMuY2FsbGJhY2tOb2RlID0gbnVsbDsKICAgIHRoaXMuY2FsbGJhY2tQcmlvcml0eSA9IDkwOwogICAgdGhpcy5sYXN0RXhwaXJlZFRpbWUgPQogICAgICB0aGlzLmxhc3RQaW5nZWRUaW1lID0KICAgICAgdGhpcy5uZXh0S25vd25QZW5kaW5nTGV2ZWwgPQogICAgICB0aGlzLmxhc3RTdXNwZW5kZWRUaW1lID0KICAgICAgdGhpcy5maXJzdFN1c3BlbmRlZFRpbWUgPQogICAgICB0aGlzLmZpcnN0UGVuZGluZ1RpbWUgPQogICAgICAgIDA7CiAgfQoKICBmdW5jdGlvbiBLaChhLCBiKSB7CiAgICB2YXIgYyA9IGEuZmlyc3RTdXNwZW5kZWRUaW1lOwogICAgYSA9IGEubGFzdFN1c3BlbmRlZFRpbWU7CiAgICByZXR1cm4gMCAhPT0gYyAmJiBjID49IGIgJiYgYSA8PSBiOwogIH0KCiAgZnVuY3Rpb24gWWEoYSwgYikgewogICAgdmFyIGMgPSBhLmZpcnN0U3VzcGVuZGVkVGltZSwKICAgICAgZCA9IGEubGFzdFN1c3BlbmRlZFRpbWU7CiAgICBjIDwgYiAmJiAoYS5maXJzdFN1c3BlbmRlZFRpbWUgPSBiKTsKICAgIGlmIChkID4gYiB8fCAwID09PSBjKSBhLmxhc3RTdXNwZW5kZWRUaW1lID0gYjsKICAgIGIgPD0gYS5sYXN0UGluZ2VkVGltZSAmJiAoYS5sYXN0UGluZ2VkVGltZSA9IDApOwogICAgYiA8PSBhLmxhc3RFeHBpcmVkVGltZSAmJiAoYS5sYXN0RXhwaXJlZFRpbWUgPSAwKTsKICB9CgogIGZ1bmN0aW9uIHloKGEsIGIpIHsKICAgIGIgPiBhLmZpcnN0UGVuZGluZ1RpbWUgJiYgKGEuZmlyc3RQZW5kaW5nVGltZSA9IGIpOwogICAgdmFyIGMgPSBhLmZpcnN0U3VzcGVuZGVkVGltZTsKICAgIDAgIT09IGMgJiYKICAgICAgKGIgPj0gYwogICAgICAgID8gKGEuZmlyc3RTdXNwZW5kZWRUaW1lID0KICAgICAgICAgICAgYS5sYXN0U3VzcGVuZGVkVGltZSA9CiAgICAgICAgICAgIGEubmV4dEtub3duUGVuZGluZ0xldmVsID0KICAgICAgICAgICAgICAwKQogICAgICAgIDogYiA+PSBhLmxhc3RTdXNwZW5kZWRUaW1lICYmIChhLmxhc3RTdXNwZW5kZWRUaW1lID0gYiArIDEpLAogICAgICBiID4gYS5uZXh0S25vd25QZW5kaW5nTGV2ZWwgJiYgKGEubmV4dEtub3duUGVuZGluZ0xldmVsID0gYikpOwogIH0KCiAgZnVuY3Rpb24gVWUoYSwgYikgewogICAgdmFyIGMgPSBhLmxhc3RFeHBpcmVkVGltZTsKICAgIGlmICgwID09PSBjIHx8IGMgPiBiKSBhLmxhc3RFeHBpcmVkVGltZSA9IGI7CiAgfQoKICBmdW5jdGlvbiBtZChhLCBiLCBjLCBkKSB7CiAgICB2YXIgZSA9IGIuY3VycmVudCwKICAgICAgZiA9IGthKCksCiAgICAgIGcgPSBWYi5zdXNwZW5zZTsKICAgIGYgPSBWYShmLCBlLCBnKTsKICAgIGE6IGlmIChjKSB7CiAgICAgIGMgPSBjLl9yZWFjdEludGVybmFsRmliZXI7CiAgICAgIGI6IHsKICAgICAgICBpZiAoTmEoYykgIT09IGMgfHwgMSAhPT0gYy50YWcpIHRocm93IEVycm9yKGsoMTcwKSk7CiAgICAgICAgdmFyIGggPSBjOwogICAgICAgIGRvIHsKICAgICAgICAgIHN3aXRjaCAoaC50YWcpIHsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGggPSBoLnN0YXRlTm9kZS5jb250ZXh0OwogICAgICAgICAgICAgIGJyZWFrIGI7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBpZiAoTihoLnR5cGUpKSB7CiAgICAgICAgICAgICAgICBoID0gaC5zdGF0ZU5vZGUuX19yZWFjdEludGVybmFsTWVtb2l6ZWRNZXJnZWRDaGlsZENvbnRleHQ7CiAgICAgICAgICAgICAgICBicmVhayBiOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGggPSBoLnJldHVybjsKICAgICAgICB9IHdoaWxlIChudWxsICE9PSBoKTsKICAgICAgICB0aHJvdyBFcnJvcihrKDE3MSkpOwogICAgICB9CiAgICAgIGlmICgxID09PSBjLnRhZykgewogICAgICAgIHZhciBtID0gYy50eXBlOwogICAgICAgIGlmIChOKG0pKSB7CiAgICAgICAgICBjID0gR2coYywgbSwgaCk7CiAgICAgICAgICBicmVhayBhOwogICAgICAgIH0KICAgICAgfQogICAgICBjID0gaDsKICAgIH0gZWxzZSBjID0gQ2E7CiAgICBudWxsID09PSBiLmNvbnRleHQgPyAoYi5jb250ZXh0ID0gYykgOiAoYi5wZW5kaW5nQ29udGV4dCA9IGMpOwogICAgYiA9IEVhKGYsIGcpOwogICAgYi5wYXlsb2FkID0geyBlbGVtZW50OiBhIH07CiAgICBkID0gdm9pZCAwID09PSBkID8gbnVsbCA6IGQ7CiAgICBudWxsICE9PSBkICYmIChiLmNhbGxiYWNrID0gZCk7CiAgICBGYShlLCBiKTsKICAgIEphKGUsIGYpOwogICAgcmV0dXJuIGY7CiAgfQoKICBmdW5jdGlvbiBjZihhKSB7CiAgICBhID0gYS5jdXJyZW50OwogICAgaWYgKCFhLmNoaWxkKSByZXR1cm4gbnVsbDsKICAgIHN3aXRjaCAoYS5jaGlsZC50YWcpIHsKICAgICAgY2FzZSA1OgogICAgICAgIHJldHVybiBhLmNoaWxkLnN0YXRlTm9kZTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gYS5jaGlsZC5zdGF0ZU5vZGU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBXaChhLCBiKSB7CiAgICBhID0gYS5tZW1vaXplZFN0YXRlOwogICAgbnVsbCAhPT0gYSAmJiBudWxsICE9PSBhLmRlaHlkcmF0ZWQgJiYgYS5yZXRyeVRpbWUgPCBiICYmIChhLnJldHJ5VGltZSA9IGIpOwogIH0KCiAgZnVuY3Rpb24gZGYoYSwgYikgewogICAgV2goYSwgYik7CiAgICAoYSA9IGEuYWx0ZXJuYXRlKSAmJiBXaChhLCBiKTsKICB9CgogIGZ1bmN0aW9uIGVmKGEsIGIsIGMpIHsKICAgIGMgPSBudWxsICE9IGMgJiYgITAgPT09IGMuaHlkcmF0ZTsKICAgIHZhciBkID0gbmV3IElqKGEsIGIsIGMpLAogICAgICBlID0gbGEoMywgbnVsbCwgbnVsbCwgMiA9PT0gYiA/IDcgOiAxID09PSBiID8gMyA6IDApOwogICAgZC5jdXJyZW50ID0gZTsKICAgIGUuc3RhdGVOb2RlID0gZDsKICAgIG5lKGUpOwogICAgYVtMYl0gPSBkLmN1cnJlbnQ7CiAgICBjICYmIDAgIT09IGIgJiYgeGkoYSwgOSA9PT0gYS5ub2RlVHlwZSA/IGEgOiBhLm93bmVyRG9jdW1lbnQpOwogICAgdGhpcy5faW50ZXJuYWxSb290ID0gZDsKICB9CgogIGZ1bmN0aW9uIGJjKGEpIHsKICAgIHJldHVybiAhKAogICAgICAhYSB8fAogICAgICAoMSAhPT0gYS5ub2RlVHlwZSAmJgogICAgICAgIDkgIT09IGEubm9kZVR5cGUgJiYKICAgICAgICAxMSAhPT0gYS5ub2RlVHlwZSAmJgogICAgICAgICg4ICE9PSBhLm5vZGVUeXBlIHx8ICIgcmVhY3QtbW91bnQtcG9pbnQtdW5zdGFibGUgIiAhPT0gYS5ub2RlVmFsdWUpKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIEpqKGEsIGIpIHsKICAgIGIgfHwKICAgICAgKChiID0gYSA/ICg5ID09PSBhLm5vZGVUeXBlID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLmZpcnN0Q2hpbGQpIDogbnVsbCksCiAgICAgIChiID0gISghYiB8fCAxICE9PSBiLm5vZGVUeXBlIHx8ICFiLmhhc0F0dHJpYnV0ZSgiZGF0YS1yZWFjdHJvb3QiKSkpKTsKICAgIGlmICghYikgZm9yICh2YXIgYzsgKGMgPSBhLmxhc3RDaGlsZCk7ICkgYS5yZW1vdmVDaGlsZChjKTsKICAgIHJldHVybiBuZXcgZWYoYSwgMCwgYiA/IHsgaHlkcmF0ZTogITAgfSA6IHZvaWQgMCk7CiAgfQoKICBmdW5jdGlvbiBuZChhLCBiLCBjLCBkLCBlKSB7CiAgICB2YXIgZiA9IGMuX3JlYWN0Um9vdENvbnRhaW5lcjsKICAgIGlmIChmKSB7CiAgICAgIHZhciBnID0gZi5faW50ZXJuYWxSb290OwogICAgICBpZiAoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGUpIHsKICAgICAgICB2YXIgaCA9IGU7CiAgICAgICAgZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBhID0gY2YoZyk7CiAgICAgICAgICBoLmNhbGwoYSk7CiAgICAgICAgfTsKICAgICAgfQogICAgICBtZChiLCBnLCBhLCBlKTsKICAgIH0gZWxzZSB7CiAgICAgIGYgPSBjLl9yZWFjdFJvb3RDb250YWluZXIgPSBKaihjLCBkKTsKICAgICAgZyA9IGYuX2ludGVybmFsUm9vdDsKICAgICAgaWYgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBlKSB7CiAgICAgICAgdmFyIG0gPSBlOwogICAgICAgIGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgYSA9IGNmKGcpOwogICAgICAgICAgbS5jYWxsKGEpOwogICAgICAgIH07CiAgICAgIH0KICAgICAgUmgoZnVuY3Rpb24gKCkgewogICAgICAgIG1kKGIsIGcsIGEsIGUpOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBjZihnKTsKICB9CgogIGZ1bmN0aW9uIEtqKGEsIGIsIGMpIHsKICAgIHZhciBkID0KICAgICAgMyA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbM10gPyBhcmd1bWVudHNbM10gOiBudWxsOwogICAgcmV0dXJuIHsKICAgICAgJCR0eXBlb2Y6IGdiLAogICAgICBrZXk6IG51bGwgPT0gZCA/IG51bGwgOiAiIiArIGQsCiAgICAgIGNoaWxkcmVuOiBhLAogICAgICBjb250YWluZXJJbmZvOiBiLAogICAgICBpbXBsZW1lbnRhdGlvbjogYywKICAgIH07CiAgfQoKICBmdW5jdGlvbiBYaChhLCBiKSB7CiAgICB2YXIgYyA9CiAgICAgIDIgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdID8gYXJndW1lbnRzWzJdIDogbnVsbDsKICAgIGlmICghYmMoYikpIHRocm93IEVycm9yKGsoMjAwKSk7CiAgICByZXR1cm4gS2ooYSwgYiwgbnVsbCwgYyk7CiAgfQoKICBpZiAoIWVhKSB0aHJvdyBFcnJvcihrKDIyNykpOwogIHZhciBraSA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBtKSB7CiAgICAgIHZhciBuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAzKTsKICAgICAgdHJ5IHsKICAgICAgICBiLmFwcGx5KGMsIG4pOwogICAgICB9IGNhdGNoIChDKSB7CiAgICAgICAgdGhpcy5vbkVycm9yKEMpOwogICAgICB9CiAgICB9LAogICAgeWIgPSAhMSwKICAgIGdjID0gbnVsbCwKICAgIGhjID0gITEsCiAgICBwZCA9IG51bGwsCiAgICBsaSA9IHsKICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGEpIHsKICAgICAgICB5YiA9ICEwOwogICAgICAgIGdjID0gYTsKICAgICAgfSwKICAgIH0sCiAgICB0ZCA9IG51bGwsCiAgICByZiA9IG51bGwsCiAgICBtZiA9IG51bGwsCiAgICBpYyA9IG51bGwsCiAgICBjYiA9IHt9LAogICAgamMgPSBbXSwKICAgIHFkID0ge30sCiAgICBkYiA9IHt9LAogICAgcmQgPSB7fSwKICAgIHdhID0gISgKICAgICAgInVuZGVmaW5lZCIgPT09IHR5cGVvZiB3aW5kb3cgfHwKICAgICAgInVuZGVmaW5lZCIgPT09IHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgfHwKICAgICAgInVuZGVmaW5lZCIgPT09IHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudAogICAgKSwKICAgIE0gPSBlYS5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRC5hc3NpZ24sCiAgICBzZCA9IG51bGwsCiAgICBlYiA9IG51bGwsCiAgICBmYiA9IG51bGwsCiAgICBlZSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBhKGIpOwogICAgfSwKICAgIGVnID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKICAgICAgcmV0dXJuIGEoYiwgYywgZCwgZSk7CiAgICB9LAogICAgdmQgPSBmdW5jdGlvbiAoKSB7fSwKICAgIHZmID0gZWUsCiAgICBPYSA9ICExLAogICAgd2QgPSAhMSwKICAgIFogPSBlYS5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRC5TY2hlZHVsZXIsCiAgICBMaiA9IFoudW5zdGFibGVfY2FuY2VsQ2FsbGJhY2ssCiAgICBmZiA9IFoudW5zdGFibGVfbm93LAogICAgJGYgPSBaLnVuc3RhYmxlX3NjaGVkdWxlQ2FsbGJhY2ssCiAgICBNaiA9IFoudW5zdGFibGVfc2hvdWxkWWllbGQsCiAgICBZaCA9IFoudW5zdGFibGVfcmVxdWVzdFBhaW50LAogICAgUGQgPSBaLnVuc3RhYmxlX3J1bldpdGhQcmlvcml0eSwKICAgIE5qID0gWi51bnN0YWJsZV9nZXRDdXJyZW50UHJpb3JpdHlMZXZlbCwKICAgIE9qID0gWi51bnN0YWJsZV9JbW1lZGlhdGVQcmlvcml0eSwKICAgIFpoID0gWi51bnN0YWJsZV9Vc2VyQmxvY2tpbmdQcmlvcml0eSwKICAgIGFnID0gWi51bnN0YWJsZV9Ob3JtYWxQcmlvcml0eSwKICAgIFBqID0gWi51bnN0YWJsZV9Mb3dQcmlvcml0eSwKICAgIFFqID0gWi51bnN0YWJsZV9JZGxlUHJpb3JpdHksCiAgICBvaSA9CiAgICAgIC9eWzpBLVpfYS16XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMkZGXHUwMzcwLVx1MDM3RFx1MDM3Ri1cdTFGRkZcdTIwMEMtXHUyMDBEXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkRdWzpBLVpfYS16XHUwMEMwLVx1MDBENlx1MDBEOC1cdTAwRjZcdTAwRjgtXHUwMkZGXHUwMzcwLVx1MDM3RFx1MDM3Ri1cdTFGRkZcdTIwMEMtXHUyMDBEXHUyMDcwLVx1MjE4Rlx1MkMwMC1cdTJGRUZcdTMwMDEtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRkRcLS4wLTlcdTAwQjdcdTAzMDAtXHUwMzZGXHUyMDNGLVx1MjA0MF0qJC8sCiAgICB3ZiA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksCiAgICB5ZiA9IHt9LAogICAgeGYgPSB7fSwKICAgIEUgPSB7fTsKICAiY2hpbGRyZW4gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgZGVmYXVsdFZhbHVlIGRlZmF1bHRDaGVja2VkIGlubmVySFRNTCBzdXBwcmVzc0NvbnRlbnRFZGl0YWJsZVdhcm5pbmcgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIHN0eWxlIgogICAgLnNwbGl0KCIgIikKICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICAgIEVbYV0gPSBuZXcgTChhLCAwLCAhMSwgYSwgbnVsbCwgITEpOwogICAgfSk7CiAgWwogICAgWyJhY2NlcHRDaGFyc2V0IiwgImFjY2VwdC1jaGFyc2V0Il0sCiAgICBbImNsYXNzTmFtZSIsICJjbGFzcyJdLAogICAgWyJodG1sRm9yIiwgImZvciJdLAogICAgWyJodHRwRXF1aXYiLCAiaHR0cC1lcXVpdiJdLAogIF0uZm9yRWFjaChmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSBhWzBdOwogICAgRVtiXSA9IG5ldyBMKGIsIDEsICExLCBhWzFdLCBudWxsLCAhMSk7CiAgfSk7CiAgWyJjb250ZW50RWRpdGFibGUiLCAiZHJhZ2dhYmxlIiwgInNwZWxsQ2hlY2siLCAidmFsdWUiXS5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICBFW2FdID0gbmV3IEwoYSwgMiwgITEsIGEudG9Mb3dlckNhc2UoKSwgbnVsbCwgITEpOwogIH0pOwogIFsKICAgICJhdXRvUmV2ZXJzZSIsCiAgICAiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZCIsCiAgICAiZm9jdXNhYmxlIiwKICAgICJwcmVzZXJ2ZUFscGhhIiwKICBdLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgIEVbYV0gPSBuZXcgTChhLCAyLCAhMSwgYSwgbnVsbCwgITEpOwogIH0pOwogICJhbGxvd0Z1bGxTY3JlZW4gYXN5bmMgYXV0b0ZvY3VzIGF1dG9QbGF5IGNvbnRyb2xzIGRlZmF1bHQgZGVmZXIgZGlzYWJsZWQgZGlzYWJsZVBpY3R1cmVJblBpY3R1cmUgZm9ybU5vVmFsaWRhdGUgaGlkZGVuIGxvb3Agbm9Nb2R1bGUgbm9WYWxpZGF0ZSBvcGVuIHBsYXlzSW5saW5lIHJlYWRPbmx5IHJlcXVpcmVkIHJldmVyc2VkIHNjb3BlZCBzZWFtbGVzcyBpdGVtU2NvcGUiCiAgICAuc3BsaXQoIiAiKQogICAgLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgRVthXSA9IG5ldyBMKGEsIDMsICExLCBhLnRvTG93ZXJDYXNlKCksIG51bGwsICExKTsKICAgIH0pOwogIFsiY2hlY2tlZCIsICJtdWx0aXBsZSIsICJtdXRlZCIsICJzZWxlY3RlZCJdLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgIEVbYV0gPSBuZXcgTChhLCAzLCAhMCwgYSwgbnVsbCwgITEpOwogIH0pOwogIFsiY2FwdHVyZSIsICJkb3dubG9hZCJdLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgIEVbYV0gPSBuZXcgTChhLCA0LCAhMSwgYSwgbnVsbCwgITEpOwogIH0pOwogIFsiY29scyIsICJyb3dzIiwgInNpemUiLCAic3BhbiJdLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgIEVbYV0gPSBuZXcgTChhLCA2LCAhMSwgYSwgbnVsbCwgITEpOwogIH0pOwogIFsicm93U3BhbiIsICJzdGFydCJdLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgIEVbYV0gPSBuZXcgTChhLCA1LCAhMSwgYS50b0xvd2VyQ2FzZSgpLCBudWxsLCAhMSk7CiAgfSk7CiAgdmFyIGdmID0gL1tcLTpdKFthLXpdKS9nLAogICAgaGYgPSBmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gYVsxXS50b1VwcGVyQ2FzZSgpOwogICAgfTsKICAiYWNjZW50LWhlaWdodCBhbGlnbm1lbnQtYmFzZWxpbmUgYXJhYmljLWZvcm0gYmFzZWxpbmUtc2hpZnQgY2FwLWhlaWdodCBjbGlwLXBhdGggY2xpcC1ydWxlIGNvbG9yLWludGVycG9sYXRpb24gY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzIGNvbG9yLXByb2ZpbGUgY29sb3ItcmVuZGVyaW5nIGRvbWluYW50LWJhc2VsaW5lIGVuYWJsZS1iYWNrZ3JvdW5kIGZpbGwtb3BhY2l0eSBmaWxsLXJ1bGUgZmxvb2QtY29sb3IgZmxvb2Qtb3BhY2l0eSBmb250LWZhbWlseSBmb250LXNpemUgZm9udC1zaXplLWFkanVzdCBmb250LXN0cmV0Y2ggZm9udC1zdHlsZSBmb250LXZhcmlhbnQgZm9udC13ZWlnaHQgZ2x5cGgtbmFtZSBnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsIGdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsIGhvcml6LWFkdi14IGhvcml6LW9yaWdpbi14IGltYWdlLXJlbmRlcmluZyBsZXR0ZXItc3BhY2luZyBsaWdodGluZy1jb2xvciBtYXJrZXItZW5kIG1hcmtlci1taWQgbWFya2VyLXN0YXJ0IG92ZXJsaW5lLXBvc2l0aW9uIG92ZXJsaW5lLXRoaWNrbmVzcyBwYWludC1vcmRlciBwYW5vc2UtMSBwb2ludGVyLWV2ZW50cyByZW5kZXJpbmctaW50ZW50IHNoYXBlLXJlbmRlcmluZyBzdG9wLWNvbG9yIHN0b3Atb3BhY2l0eSBzdHJpa2V0aHJvdWdoLXBvc2l0aW9uIHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzIHN0cm9rZS1kYXNoYXJyYXkgc3Ryb2tlLWRhc2hvZmZzZXQgc3Ryb2tlLWxpbmVjYXAgc3Ryb2tlLWxpbmVqb2luIHN0cm9rZS1taXRlcmxpbWl0IHN0cm9rZS1vcGFjaXR5IHN0cm9rZS13aWR0aCB0ZXh0LWFuY2hvciB0ZXh0LWRlY29yYXRpb24gdGV4dC1yZW5kZXJpbmcgdW5kZXJsaW5lLXBvc2l0aW9uIHVuZGVybGluZS10aGlja25lc3MgdW5pY29kZS1iaWRpIHVuaWNvZGUtcmFuZ2UgdW5pdHMtcGVyLWVtIHYtYWxwaGFiZXRpYyB2LWhhbmdpbmcgdi1pZGVvZ3JhcGhpYyB2LW1hdGhlbWF0aWNhbCB2ZWN0b3ItZWZmZWN0IHZlcnQtYWR2LXkgdmVydC1vcmlnaW4teCB2ZXJ0LW9yaWdpbi15IHdvcmQtc3BhY2luZyB3cml0aW5nLW1vZGUgeG1sbnM6eGxpbmsgeC1oZWlnaHQiCiAgICAuc3BsaXQoIiAiKQogICAgLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgdmFyIGIgPSBhLnJlcGxhY2UoZ2YsIGhmKTsKICAgICAgRVtiXSA9IG5ldyBMKGIsIDEsICExLCBhLCBudWxsLCAhMSk7CiAgICB9KTsKICAieGxpbms6YWN0dWF0ZSB4bGluazphcmNyb2xlIHhsaW5rOnJvbGUgeGxpbms6c2hvdyB4bGluazp0aXRsZSB4bGluazp0eXBlIgogICAgLnNwbGl0KCIgIikKICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICAgIHZhciBiID0gYS5yZXBsYWNlKGdmLCBoZik7CiAgICAgIEVbYl0gPSBuZXcgTChiLCAxLCAhMSwgYSwgImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLCAhMSk7CiAgICB9KTsKICBbInhtbDpiYXNlIiwgInhtbDpsYW5nIiwgInhtbDpzcGFjZSJdLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gYS5yZXBsYWNlKGdmLCBoZik7CiAgICBFW2JdID0gbmV3IEwoYiwgMSwgITEsIGEsICJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2UiLCAhMSk7CiAgfSk7CiAgWyJ0YWJJbmRleCIsICJjcm9zc09yaWdpbiJdLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgIEVbYV0gPSBuZXcgTChhLCAxLCAhMSwgYS50b0xvd2VyQ2FzZSgpLCBudWxsLCAhMSk7CiAgfSk7CiAgRS54bGlua0hyZWYgPSBuZXcgTCgKICAgICJ4bGlua0hyZWYiLAogICAgMSwKICAgICExLAogICAgInhsaW5rOmhyZWYiLAogICAgImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLAogICAgITAKICApOwogIFsic3JjIiwgImhyZWYiLCAiYWN0aW9uIiwgImZvcm1BY3Rpb24iXS5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7CiAgICBFW2FdID0gbmV3IEwoYSwgMSwgITEsIGEudG9Mb3dlckNhc2UoKSwgbnVsbCwgITApOwogIH0pOwogIHZhciBkYSA9IGVhLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEOwogIGRhLmhhc093blByb3BlcnR5KCJSZWFjdEN1cnJlbnREaXNwYXRjaGVyIikgfHwKICAgIChkYS5SZWFjdEN1cnJlbnREaXNwYXRjaGVyID0geyBjdXJyZW50OiBudWxsIH0pOwogIGRhLmhhc093blByb3BlcnR5KCJSZWFjdEN1cnJlbnRCYXRjaENvbmZpZyIpIHx8CiAgICAoZGEuUmVhY3RDdXJyZW50QmF0Y2hDb25maWcgPSB7IHN1c3BlbnNlOiBudWxsIH0pOwogIHZhciBzaSA9IC9eKC4qKVtcXFwvXS8sCiAgICBRID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wuZm9yLAogICAgUGMgPSBRID8gU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpIDogNjAxMDMsCiAgICBnYiA9IFEgPyBTeW1ib2wuZm9yKCJyZWFjdC5wb3J0YWwiKSA6IDYwMTA2LAogICAgTWEgPSBRID8gU3ltYm9sLmZvcigicmVhY3QuZnJhZ21lbnQiKSA6IDYwMTA3LAogICAgQWYgPSBRID8gU3ltYm9sLmZvcigicmVhY3Quc3RyaWN0X21vZGUiKSA6IDYwMTA4LAogICAga2MgPSBRID8gU3ltYm9sLmZvcigicmVhY3QucHJvZmlsZXIiKSA6IDYwMTE0LAogICAgQ2YgPSBRID8gU3ltYm9sLmZvcigicmVhY3QucHJvdmlkZXIiKSA6IDYwMTA5LAogICAgQmYgPSBRID8gU3ltYm9sLmZvcigicmVhY3QuY29udGV4dCIpIDogNjAxMTAsCiAgICBIaiA9IFEgPyBTeW1ib2wuZm9yKCJyZWFjdC5jb25jdXJyZW50X21vZGUiKSA6IDYwMTExLAogICAgemQgPSBRID8gU3ltYm9sLmZvcigicmVhY3QuZm9yd2FyZF9yZWYiKSA6IDYwMTEyLAogICAgbGMgPSBRID8gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2UiKSA6IDYwMTEzLAogICAgeWQgPSBRID8gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2VfbGlzdCIpIDogNjAxMjAsCiAgICBBZCA9IFEgPyBTeW1ib2wuZm9yKCJyZWFjdC5tZW1vIikgOiA2MDExNSwKICAgIEVmID0gUSA/IFN5bWJvbC5mb3IoInJlYWN0LmxhenkiKSA6IDYwMTE2LAogICAgRGYgPSBRID8gU3ltYm9sLmZvcigicmVhY3QuYmxvY2siKSA6IDYwMTIxLAogICAgemYgPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvciwKICAgIG9kLAogICAgeGggPSAoZnVuY3Rpb24gKGEpIHsKICAgICAgcmV0dXJuICJ1bmRlZmluZWQiICE9PSB0eXBlb2YgTVNBcHAgJiYgTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24KICAgICAgICA/IGZ1bmN0aW9uIChiLCBjLCBkLCBlKSB7CiAgICAgICAgICAgIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYShiLCBjLCBkLCBlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgOiBhOwogICAgfSkoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgaWYgKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgIT09IGEubmFtZXNwYWNlVVJJIHx8ICJpbm5lckhUTUwiIGluIGEpCiAgICAgICAgYS5pbm5lckhUTUwgPSBiOwogICAgICBlbHNlIHsKICAgICAgICBvZCA9IG9kIHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgIG9kLmlubmVySFRNTCA9ICI8c3ZnPiIgKyBiLnZhbHVlT2YoKS50b1N0cmluZygpICsgIjwvc3ZnPiI7CiAgICAgICAgZm9yIChiID0gb2QuZmlyc3RDaGlsZDsgYS5maXJzdENoaWxkOyApIGEucmVtb3ZlQ2hpbGQoYS5maXJzdENoaWxkKTsKICAgICAgICBmb3IgKDsgYi5maXJzdENoaWxkOyApIGEuYXBwZW5kQ2hpbGQoYi5maXJzdENoaWxkKTsKICAgICAgfQogICAgfSksCiAgICBXYiA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIGlmIChiKSB7CiAgICAgICAgdmFyIGMgPSBhLmZpcnN0Q2hpbGQ7CiAgICAgICAgaWYgKGMgJiYgYyA9PT0gYS5sYXN0Q2hpbGQgJiYgMyA9PT0gYy5ub2RlVHlwZSkgewogICAgICAgICAgYy5ub2RlVmFsdWUgPSBiOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICBhLnRleHRDb250ZW50ID0gYjsKICAgIH0sCiAgICBpYiA9IHsKICAgICAgYW5pbWF0aW9uZW5kOiBuYygiQW5pbWF0aW9uIiwgIkFuaW1hdGlvbkVuZCIpLAogICAgICBhbmltYXRpb25pdGVyYXRpb246IG5jKCJBbmltYXRpb24iLCAiQW5pbWF0aW9uSXRlcmF0aW9uIiksCiAgICAgIGFuaW1hdGlvbnN0YXJ0OiBuYygiQW5pbWF0aW9uIiwgIkFuaW1hdGlvblN0YXJ0IiksCiAgICAgIHRyYW5zaXRpb25lbmQ6IG5jKCJUcmFuc2l0aW9uIiwgIlRyYW5zaXRpb25FbmQiKSwKICAgIH0sCiAgICBJZCA9IHt9LAogICAgT2YgPSB7fTsKICB3YSAmJgogICAgKChPZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLnN0eWxlKSwKICAgICJBbmltYXRpb25FdmVudCIgaW4gd2luZG93IHx8CiAgICAgIChkZWxldGUgaWIuYW5pbWF0aW9uZW5kLmFuaW1hdGlvbiwKICAgICAgZGVsZXRlIGliLmFuaW1hdGlvbml0ZXJhdGlvbi5hbmltYXRpb24sCiAgICAgIGRlbGV0ZSBpYi5hbmltYXRpb25zdGFydC5hbmltYXRpb24pLAogICAgIlRyYW5zaXRpb25FdmVudCIgaW4gd2luZG93IHx8IGRlbGV0ZSBpYi50cmFuc2l0aW9uZW5kLnRyYW5zaXRpb24pOwogIHZhciAkaCA9IG9jKCJhbmltYXRpb25lbmQiKSwKICAgIGFpID0gb2MoImFuaW1hdGlvbml0ZXJhdGlvbiIpLAogICAgYmkgPSBvYygiYW5pbWF0aW9uc3RhcnQiKSwKICAgIGNpID0gb2MoInRyYW5zaXRpb25lbmQiKSwKICAgIERiID0KICAgICAgImFib3J0IGNhbnBsYXkgY2FucGxheXRocm91Z2ggZHVyYXRpb25jaGFuZ2UgZW1wdGllZCBlbmNyeXB0ZWQgZW5kZWQgZXJyb3IgbG9hZGVkZGF0YSBsb2FkZWRtZXRhZGF0YSBsb2Fkc3RhcnQgcGF1c2UgcGxheSBwbGF5aW5nIHByb2dyZXNzIHJhdGVjaGFuZ2Ugc2Vla2VkIHNlZWtpbmcgc3RhbGxlZCBzdXNwZW5kIHRpbWV1cGRhdGUgdm9sdW1lY2hhbmdlIHdhaXRpbmciLnNwbGl0KAogICAgICAgICIgIgogICAgICApLAogICAgUGYgPSBuZXcgKCJmdW5jdGlvbiIgPT09IHR5cGVvZiBXZWFrTWFwID8gV2Vha01hcCA6IE1hcCkoKSwKICAgIEFiID0gbnVsbCwKICAgIHdpID0gZnVuY3Rpb24gKGEpIHsKICAgICAgaWYgKGEpIHsKICAgICAgICB2YXIgYiA9IGEuX2Rpc3BhdGNoTGlzdGVuZXJzLAogICAgICAgICAgYyA9IGEuX2Rpc3BhdGNoSW5zdGFuY2VzOwogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGIpKQogICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBiLmxlbmd0aCAmJiAhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpOyBkKyspCiAgICAgICAgICAgIGxmKGEsIGJbZF0sIGNbZF0pOwogICAgICAgIGVsc2UgYiAmJiBsZihhLCBiLCBjKTsKICAgICAgICBhLl9kaXNwYXRjaExpc3RlbmVycyA9IG51bGw7CiAgICAgICAgYS5fZGlzcGF0Y2hJbnN0YW5jZXMgPSBudWxsOwogICAgICAgIGEuaXNQZXJzaXN0ZW50KCkgfHwgYS5jb25zdHJ1Y3Rvci5yZWxlYXNlKGEpOwogICAgICB9CiAgICB9LAogICAgcWMgPSBbXSwKICAgIFJkID0gITEsCiAgICBmYSA9IFtdLAogICAgeGEgPSBudWxsLAogICAgeWEgPSBudWxsLAogICAgemEgPSBudWxsLAogICAgRWIgPSBuZXcgTWFwKCksCiAgICBGYiA9IG5ldyBNYXAoKSwKICAgIEpiID0gW10sCiAgICBOZCA9CiAgICAgICJtb3VzZWRvd24gbW91c2V1cCB0b3VjaGNhbmNlbCB0b3VjaGVuZCB0b3VjaHN0YXJ0IGF1eGNsaWNrIGRibGNsaWNrIHBvaW50ZXJjYW5jZWwgcG9pbnRlcmRvd24gcG9pbnRlcnVwIGRyYWdlbmQgZHJhZ3N0YXJ0IGRyb3AgY29tcG9zaXRpb25lbmQgY29tcG9zaXRpb25zdGFydCBrZXlkb3duIGtleXByZXNzIGtleXVwIGlucHV0IHRleHRJbnB1dCBjbG9zZSBjYW5jZWwgY29weSBjdXQgcGFzdGUgY2xpY2sgY2hhbmdlIGNvbnRleHRtZW51IHJlc2V0IHN1Ym1pdCIuc3BsaXQoCiAgICAgICAgIiAiCiAgICAgICksCiAgICB5aSA9CiAgICAgICJmb2N1cyBibHVyIGRyYWdlbnRlciBkcmFnbGVhdmUgbW91c2VvdmVyIG1vdXNlb3V0IHBvaW50ZXJvdmVyIHBvaW50ZXJvdXQgZ290cG9pbnRlcmNhcHR1cmUgbG9zdHBvaW50ZXJjYXB0dXJlIi5zcGxpdCgKICAgICAgICAiICIKICAgICAgKSwKICAgIGRnID0ge30sCiAgICBjZyA9IG5ldyBNYXAoKSwKICAgIFRkID0gbmV3IE1hcCgpLAogICAgUmogPSBbCiAgICAgICJhYm9ydCIsCiAgICAgICJhYm9ydCIsCiAgICAgICRoLAogICAgICAiYW5pbWF0aW9uRW5kIiwKICAgICAgYWksCiAgICAgICJhbmltYXRpb25JdGVyYXRpb24iLAogICAgICBiaSwKICAgICAgImFuaW1hdGlvblN0YXJ0IiwKICAgICAgImNhbnBsYXkiLAogICAgICAiY2FuUGxheSIsCiAgICAgICJjYW5wbGF5dGhyb3VnaCIsCiAgICAgICJjYW5QbGF5VGhyb3VnaCIsCiAgICAgICJkdXJhdGlvbmNoYW5nZSIsCiAgICAgICJkdXJhdGlvbkNoYW5nZSIsCiAgICAgICJlbXB0aWVkIiwKICAgICAgImVtcHRpZWQiLAogICAgICAiZW5jcnlwdGVkIiwKICAgICAgImVuY3J5cHRlZCIsCiAgICAgICJlbmRlZCIsCiAgICAgICJlbmRlZCIsCiAgICAgICJlcnJvciIsCiAgICAgICJlcnJvciIsCiAgICAgICJnb3Rwb2ludGVyY2FwdHVyZSIsCiAgICAgICJnb3RQb2ludGVyQ2FwdHVyZSIsCiAgICAgICJsb2FkIiwKICAgICAgImxvYWQiLAogICAgICAibG9hZGVkZGF0YSIsCiAgICAgICJsb2FkZWREYXRhIiwKICAgICAgImxvYWRlZG1ldGFkYXRhIiwKICAgICAgImxvYWRlZE1ldGFkYXRhIiwKICAgICAgImxvYWRzdGFydCIsCiAgICAgICJsb2FkU3RhcnQiLAogICAgICAibG9zdHBvaW50ZXJjYXB0dXJlIiwKICAgICAgImxvc3RQb2ludGVyQ2FwdHVyZSIsCiAgICAgICJwbGF5aW5nIiwKICAgICAgInBsYXlpbmciLAogICAgICAicHJvZ3Jlc3MiLAogICAgICAicHJvZ3Jlc3MiLAogICAgICAic2Vla2luZyIsCiAgICAgICJzZWVraW5nIiwKICAgICAgInN0YWxsZWQiLAogICAgICAic3RhbGxlZCIsCiAgICAgICJzdXNwZW5kIiwKICAgICAgInN1c3BlbmQiLAogICAgICAidGltZXVwZGF0ZSIsCiAgICAgICJ0aW1lVXBkYXRlIiwKICAgICAgY2ksCiAgICAgICJ0cmFuc2l0aW9uRW5kIiwKICAgICAgIndhaXRpbmciLAogICAgICAid2FpdGluZyIsCiAgICBdOwogIFNkKAogICAgImJsdXIgYmx1ciBjYW5jZWwgY2FuY2VsIGNsaWNrIGNsaWNrIGNsb3NlIGNsb3NlIGNvbnRleHRtZW51IGNvbnRleHRNZW51IGNvcHkgY29weSBjdXQgY3V0IGF1eGNsaWNrIGF1eENsaWNrIGRibGNsaWNrIGRvdWJsZUNsaWNrIGRyYWdlbmQgZHJhZ0VuZCBkcmFnc3RhcnQgZHJhZ1N0YXJ0IGRyb3AgZHJvcCBmb2N1cyBmb2N1cyBpbnB1dCBpbnB1dCBpbnZhbGlkIGludmFsaWQga2V5ZG93biBrZXlEb3duIGtleXByZXNzIGtleVByZXNzIGtleXVwIGtleVVwIG1vdXNlZG93biBtb3VzZURvd24gbW91c2V1cCBtb3VzZVVwIHBhc3RlIHBhc3RlIHBhdXNlIHBhdXNlIHBsYXkgcGxheSBwb2ludGVyY2FuY2VsIHBvaW50ZXJDYW5jZWwgcG9pbnRlcmRvd24gcG9pbnRlckRvd24gcG9pbnRlcnVwIHBvaW50ZXJVcCByYXRlY2hhbmdlIHJhdGVDaGFuZ2UgcmVzZXQgcmVzZXQgc2Vla2VkIHNlZWtlZCBzdWJtaXQgc3VibWl0IHRvdWNoY2FuY2VsIHRvdWNoQ2FuY2VsIHRvdWNoZW5kIHRvdWNoRW5kIHRvdWNoc3RhcnQgdG91Y2hTdGFydCB2b2x1bWVjaGFuZ2Ugdm9sdW1lQ2hhbmdlIi5zcGxpdCgKICAgICAgIiAiCiAgICApLAogICAgMAogICk7CiAgU2QoCiAgICAiZHJhZyBkcmFnIGRyYWdlbnRlciBkcmFnRW50ZXIgZHJhZ2V4aXQgZHJhZ0V4aXQgZHJhZ2xlYXZlIGRyYWdMZWF2ZSBkcmFnb3ZlciBkcmFnT3ZlciBtb3VzZW1vdmUgbW91c2VNb3ZlIG1vdXNlb3V0IG1vdXNlT3V0IG1vdXNlb3ZlciBtb3VzZU92ZXIgcG9pbnRlcm1vdmUgcG9pbnRlck1vdmUgcG9pbnRlcm91dCBwb2ludGVyT3V0IHBvaW50ZXJvdmVyIHBvaW50ZXJPdmVyIHNjcm9sbCBzY3JvbGwgdG9nZ2xlIHRvZ2dsZSB0b3VjaG1vdmUgdG91Y2hNb3ZlIHdoZWVsIHdoZWVsIi5zcGxpdCgKICAgICAgIiAiCiAgICApLAogICAgMQogICk7CiAgU2QoUmosIDIpOwogIChmdW5jdGlvbiAoYSwgYikgewogICAgZm9yICh2YXIgYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKSBUZC5zZXQoYVtjXSwgYik7CiAgfSkoCiAgICAiY2hhbmdlIHNlbGVjdGlvbmNoYW5nZSB0ZXh0SW5wdXQgY29tcG9zaXRpb25zdGFydCBjb21wb3NpdGlvbmVuZCBjb21wb3NpdGlvbnVwZGF0ZSIuc3BsaXQoCiAgICAgICIgIgogICAgKSwKICAgIDAKICApOwogIHZhciBIaSA9IFpoLAogICAgR2kgPSBQZCwKICAgIHRjID0gITAsCiAgICBLYiA9IHsKICAgICAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ICEwLAogICAgICBib3JkZXJJbWFnZU91dHNldDogITAsCiAgICAgIGJvcmRlckltYWdlU2xpY2U6ICEwLAogICAgICBib3JkZXJJbWFnZVdpZHRoOiAhMCwKICAgICAgYm94RmxleDogITAsCiAgICAgIGJveEZsZXhHcm91cDogITAsCiAgICAgIGJveE9yZGluYWxHcm91cDogITAsCiAgICAgIGNvbHVtbkNvdW50OiAhMCwKICAgICAgY29sdW1uczogITAsCiAgICAgIGZsZXg6ICEwLAogICAgICBmbGV4R3JvdzogITAsCiAgICAgIGZsZXhQb3NpdGl2ZTogITAsCiAgICAgIGZsZXhTaHJpbms6ICEwLAogICAgICBmbGV4TmVnYXRpdmU6ICEwLAogICAgICBmbGV4T3JkZXI6ICEwLAogICAgICBncmlkQXJlYTogITAsCiAgICAgIGdyaWRSb3c6ICEwLAogICAgICBncmlkUm93RW5kOiAhMCwKICAgICAgZ3JpZFJvd1NwYW46ICEwLAogICAgICBncmlkUm93U3RhcnQ6ICEwLAogICAgICBncmlkQ29sdW1uOiAhMCwKICAgICAgZ3JpZENvbHVtbkVuZDogITAsCiAgICAgIGdyaWRDb2x1bW5TcGFuOiAhMCwKICAgICAgZ3JpZENvbHVtblN0YXJ0OiAhMCwKICAgICAgZm9udFdlaWdodDogITAsCiAgICAgIGxpbmVDbGFtcDogITAsCiAgICAgIGxpbmVIZWlnaHQ6ICEwLAogICAgICBvcGFjaXR5OiAhMCwKICAgICAgb3JkZXI6ICEwLAogICAgICBvcnBoYW5zOiAhMCwKICAgICAgdGFiU2l6ZTogITAsCiAgICAgIHdpZG93czogITAsCiAgICAgIHpJbmRleDogITAsCiAgICAgIHpvb206ICEwLAogICAgICBmaWxsT3BhY2l0eTogITAsCiAgICAgIGZsb29kT3BhY2l0eTogITAsCiAgICAgIHN0b3BPcGFjaXR5OiAhMCwKICAgICAgc3Ryb2tlRGFzaGFycmF5OiAhMCwKICAgICAgc3Ryb2tlRGFzaG9mZnNldDogITAsCiAgICAgIHN0cm9rZU1pdGVybGltaXQ6ICEwLAogICAgICBzdHJva2VPcGFjaXR5OiAhMCwKICAgICAgc3Ryb2tlV2lkdGg6ICEwLAogICAgfSwKICAgIFNqID0gWyJXZWJraXQiLCAibXMiLCAiTW96IiwgIk8iXTsKICBPYmplY3Qua2V5cyhLYikuZm9yRWFjaChmdW5jdGlvbiAoYSkgewogICAgU2ouZm9yRWFjaChmdW5jdGlvbiAoYikgewogICAgICBiID0gYiArIGEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBhLnN1YnN0cmluZygxKTsKICAgICAgS2JbYl0gPSBLYlthXTsKICAgIH0pOwogIH0pOwogIHZhciBJaSA9IE0oCiAgICAgIHsgbWVudWl0ZW06ICEwIH0sCiAgICAgIHsKICAgICAgICBhcmVhOiAhMCwKICAgICAgICBiYXNlOiAhMCwKICAgICAgICBicjogITAsCiAgICAgICAgY29sOiAhMCwKICAgICAgICBlbWJlZDogITAsCiAgICAgICAgaHI6ICEwLAogICAgICAgIGltZzogITAsCiAgICAgICAgaW5wdXQ6ICEwLAogICAgICAgIGtleWdlbjogITAsCiAgICAgICAgbGluazogITAsCiAgICAgICAgbWV0YTogITAsCiAgICAgICAgcGFyYW06ICEwLAogICAgICAgIHNvdXJjZTogITAsCiAgICAgICAgdHJhY2s6ICEwLAogICAgICAgIHdicjogITAsCiAgICAgIH0KICAgICksCiAgICBuZyA9ICIkIiwKICAgIG9nID0gIi8kIiwKICAgICRkID0gIiQ/IiwKICAgIFpkID0gIiQhIiwKICAgIFplID0gbnVsbCwKICAgICRlID0gbnVsbCwKICAgIFdlID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIHNldFRpbWVvdXQgPyBzZXRUaW1lb3V0IDogdm9pZCAwLAogICAgdmogPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgY2xlYXJUaW1lb3V0ID8gY2xlYXJUaW1lb3V0IDogdm9pZCAwLAogICAgamYgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSwKICAgIEFhID0gIl9fcmVhY3RJbnRlcm5hbEluc3RhbmNlJCIgKyBqZiwKICAgIHZjID0gIl9fcmVhY3RFdmVudEhhbmRsZXJzJCIgKyBqZiwKICAgIExiID0gIl9fcmVhY3RDb250YWluZXJlJCIgKyBqZiwKICAgIEJhID0gbnVsbCwKICAgIGNlID0gbnVsbCwKICAgIHdjID0gbnVsbDsKICBNKFIucHJvdG90eXBlLCB7CiAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSAhMDsKICAgICAgdmFyIGEgPSB0aGlzLm5hdGl2ZUV2ZW50OwogICAgICBhICYmCiAgICAgICAgKGEucHJldmVudERlZmF1bHQKICAgICAgICAgID8gYS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICA6ICJ1bmtub3duIiAhPT0gdHlwZW9mIGEucmV0dXJuVmFsdWUgJiYgKGEucmV0dXJuVmFsdWUgPSAhMSksCiAgICAgICAgKHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0geGMpKTsKICAgIH0sCiAgICBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGEgPSB0aGlzLm5hdGl2ZUV2ZW50OwogICAgICBhICYmCiAgICAgICAgKGEuc3RvcFByb3BhZ2F0aW9uCiAgICAgICAgICA/IGEuc3RvcFByb3BhZ2F0aW9uKCkKICAgICAgICAgIDogInVua25vd24iICE9PSB0eXBlb2YgYS5jYW5jZWxCdWJibGUgJiYgKGEuY2FuY2VsQnViYmxlID0gITApLAogICAgICAgICh0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0geGMpKTsKICAgIH0sCiAgICBwZXJzaXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuaXNQZXJzaXN0ZW50ID0geGM7CiAgICB9LAogICAgaXNQZXJzaXN0ZW50OiB5YywKICAgIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGEgPSB0aGlzLmNvbnN0cnVjdG9yLkludGVyZmFjZSwKICAgICAgICBiOwogICAgICBmb3IgKGIgaW4gYSkgdGhpc1tiXSA9IG51bGw7CiAgICAgIHRoaXMubmF0aXZlRXZlbnQgPSB0aGlzLl90YXJnZXRJbnN0ID0gdGhpcy5kaXNwYXRjaENvbmZpZyA9IG51bGw7CiAgICAgIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHljOwogICAgICB0aGlzLl9kaXNwYXRjaEluc3RhbmNlcyA9IHRoaXMuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDsKICAgIH0sCiAgfSk7CiAgUi5JbnRlcmZhY2UgPSB7CiAgICB0eXBlOiBudWxsLAogICAgdGFyZ2V0OiBudWxsLAogICAgY3VycmVudFRhcmdldDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICBldmVudFBoYXNlOiBudWxsLAogICAgYnViYmxlczogbnVsbCwKICAgIGNhbmNlbGFibGU6IG51bGwsCiAgICB0aW1lU3RhbXA6IGZ1bmN0aW9uIChhKSB7CiAgICAgIHJldHVybiBhLnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpOwogICAgfSwKICAgIGRlZmF1bHRQcmV2ZW50ZWQ6IG51bGwsCiAgICBpc1RydXN0ZWQ6IG51bGwsCiAgfTsKICBSLmV4dGVuZCA9IGZ1bmN0aW9uIChhKSB7CiAgICBmdW5jdGlvbiBiKCkgewogICAgICByZXR1cm4gYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHZhciBjID0gdGhpcywKICAgICAgZCA9IGZ1bmN0aW9uICgpIHt9OwogICAgZC5wcm90b3R5cGUgPSBjLnByb3RvdHlwZTsKICAgIGQgPSBuZXcgZCgpOwogICAgTShkLCBiLnByb3RvdHlwZSk7CiAgICBiLnByb3RvdHlwZSA9IGQ7CiAgICBiLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGI7CiAgICBiLkludGVyZmFjZSA9IE0oe30sIGMuSW50ZXJmYWNlLCBhKTsKICAgIGIuZXh0ZW5kID0gYy5leHRlbmQ7CiAgICBzZyhiKTsKICAgIHJldHVybiBiOwogIH07CiAgc2coUik7CiAgdmFyIFRqID0gUi5leHRlbmQoeyBkYXRhOiBudWxsIH0pLAogICAgVWogPSBSLmV4dGVuZCh7IGRhdGE6IG51bGwgfSksCiAgICBOaSA9IFs5LCAxMywgMjcsIDMyXSwKICAgIGRlID0gd2EgJiYgIkNvbXBvc2l0aW9uRXZlbnQiIGluIHdpbmRvdywKICAgIGNjID0gbnVsbDsKICB3YSAmJiAiZG9jdW1lbnRNb2RlIiBpbiBkb2N1bWVudCAmJiAoY2MgPSBkb2N1bWVudC5kb2N1bWVudE1vZGUpOwogIHZhciBWaiA9IHdhICYmICJUZXh0RXZlbnQiIGluIHdpbmRvdyAmJiAhY2MsCiAgICB4ZyA9IHdhICYmICghZGUgfHwgKGNjICYmIDggPCBjYyAmJiAxMSA+PSBjYykpLAogICAgd2cgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDMyKSwKICAgIHVhID0gewogICAgICBiZWZvcmVJbnB1dDogewogICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7CiAgICAgICAgICBidWJibGVkOiAib25CZWZvcmVJbnB1dCIsCiAgICAgICAgICBjYXB0dXJlZDogIm9uQmVmb3JlSW5wdXRDYXB0dXJlIiwKICAgICAgICB9LAogICAgICAgIGRlcGVuZGVuY2llczogWyJjb21wb3NpdGlvbmVuZCIsICJrZXlwcmVzcyIsICJ0ZXh0SW5wdXQiLCAicGFzdGUiXSwKICAgICAgfSwKICAgICAgY29tcG9zaXRpb25FbmQ6IHsKICAgICAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczogewogICAgICAgICAgYnViYmxlZDogIm9uQ29tcG9zaXRpb25FbmQiLAogICAgICAgICAgY2FwdHVyZWQ6ICJvbkNvbXBvc2l0aW9uRW5kQ2FwdHVyZSIsCiAgICAgICAgfSwKICAgICAgICBkZXBlbmRlbmNpZXM6CiAgICAgICAgICAiYmx1ciBjb21wb3NpdGlvbmVuZCBrZXlkb3duIGtleXByZXNzIGtleXVwIG1vdXNlZG93biIuc3BsaXQoIiAiKSwKICAgICAgfSwKICAgICAgY29tcG9zaXRpb25TdGFydDogewogICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7CiAgICAgICAgICBidWJibGVkOiAib25Db21wb3NpdGlvblN0YXJ0IiwKICAgICAgICAgIGNhcHR1cmVkOiAib25Db21wb3NpdGlvblN0YXJ0Q2FwdHVyZSIsCiAgICAgICAgfSwKICAgICAgICBkZXBlbmRlbmNpZXM6CiAgICAgICAgICAiYmx1ciBjb21wb3NpdGlvbnN0YXJ0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgbW91c2Vkb3duIi5zcGxpdCgiICIpLAogICAgICB9LAogICAgICBjb21wb3NpdGlvblVwZGF0ZTogewogICAgICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7CiAgICAgICAgICBidWJibGVkOiAib25Db21wb3NpdGlvblVwZGF0ZSIsCiAgICAgICAgICBjYXB0dXJlZDogIm9uQ29tcG9zaXRpb25VcGRhdGVDYXB0dXJlIiwKICAgICAgICB9LAogICAgICAgIGRlcGVuZGVuY2llczoKICAgICAgICAgICJibHVyIGNvbXBvc2l0aW9udXBkYXRlIGtleWRvd24ga2V5cHJlc3Mga2V5dXAgbW91c2Vkb3duIi5zcGxpdCgiICIpLAogICAgICB9LAogICAgfSwKICAgIHZnID0gITEsCiAgICBtYiA9ICExLAogICAgV2ogPSB7CiAgICAgIGV2ZW50VHlwZXM6IHVhLAogICAgICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSkgewogICAgICAgIHZhciBmOwogICAgICAgIGlmIChkZSkKICAgICAgICAgIGI6IHsKICAgICAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICAgICAgY2FzZSAiY29tcG9zaXRpb25zdGFydCI6CiAgICAgICAgICAgICAgICB2YXIgZyA9IHVhLmNvbXBvc2l0aW9uU3RhcnQ7CiAgICAgICAgICAgICAgICBicmVhayBiOwogICAgICAgICAgICAgIGNhc2UgImNvbXBvc2l0aW9uZW5kIjoKICAgICAgICAgICAgICAgIGcgPSB1YS5jb21wb3NpdGlvbkVuZDsKICAgICAgICAgICAgICAgIGJyZWFrIGI7CiAgICAgICAgICAgICAgY2FzZSAiY29tcG9zaXRpb251cGRhdGUiOgogICAgICAgICAgICAgICAgZyA9IHVhLmNvbXBvc2l0aW9uVXBkYXRlOwogICAgICAgICAgICAgICAgYnJlYWsgYjsKICAgICAgICAgICAgfQogICAgICAgICAgICBnID0gdm9pZCAwOwogICAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICAgIG1iCiAgICAgICAgICAgID8gdGcoYSwgYykgJiYgKGcgPSB1YS5jb21wb3NpdGlvbkVuZCkKICAgICAgICAgICAgOiAia2V5ZG93biIgPT09IGEgJiYgMjI5ID09PSBjLmtleUNvZGUgJiYgKGcgPSB1YS5jb21wb3NpdGlvblN0YXJ0KTsKICAgICAgICBnCiAgICAgICAgICA/ICh4ZyAmJgogICAgICAgICAgICAgICJrbyIgIT09IGMubG9jYWxlICYmCiAgICAgICAgICAgICAgKG1iIHx8IGcgIT09IHVhLmNvbXBvc2l0aW9uU3RhcnQKICAgICAgICAgICAgICAgID8gZyA9PT0gdWEuY29tcG9zaXRpb25FbmQgJiYgbWIgJiYgKGYgPSByZygpKQogICAgICAgICAgICAgICAgOiAoKEJhID0gZCksCiAgICAgICAgICAgICAgICAgIChjZSA9ICJ2YWx1ZSIgaW4gQmEgPyBCYS52YWx1ZSA6IEJhLnRleHRDb250ZW50KSwKICAgICAgICAgICAgICAgICAgKG1iID0gITApKSksCiAgICAgICAgICAgIChlID0gVGouZ2V0UG9vbGVkKGcsIGIsIGMsIGQpKSwKICAgICAgICAgICAgZiA/IChlLmRhdGEgPSBmKSA6ICgoZiA9IHVnKGMpKSwgbnVsbCAhPT0gZiAmJiAoZS5kYXRhID0gZikpLAogICAgICAgICAgICBsYihlKSwKICAgICAgICAgICAgKGYgPSBlKSkKICAgICAgICAgIDogKGYgPSBudWxsKTsKICAgICAgICAoYSA9IFZqID8gT2koYSwgYykgOiBQaShhLCBjKSkKICAgICAgICAgID8gKChiID0gVWouZ2V0UG9vbGVkKHVhLmJlZm9yZUlucHV0LCBiLCBjLCBkKSksIChiLmRhdGEgPSBhKSwgbGIoYikpCiAgICAgICAgICA6IChiID0gbnVsbCk7CiAgICAgICAgcmV0dXJuIG51bGwgPT09IGYgPyBiIDogbnVsbCA9PT0gYiA/IGYgOiBbZiwgYl07CiAgICAgIH0sCiAgICB9LAogICAgUWkgPSB7CiAgICAgIGNvbG9yOiAhMCwKICAgICAgZGF0ZTogITAsCiAgICAgIGRhdGV0aW1lOiAhMCwKICAgICAgImRhdGV0aW1lLWxvY2FsIjogITAsCiAgICAgIGVtYWlsOiAhMCwKICAgICAgbW9udGg6ICEwLAogICAgICBudW1iZXI6ICEwLAogICAgICBwYXNzd29yZDogITAsCiAgICAgIHJhbmdlOiAhMCwKICAgICAgc2VhcmNoOiAhMCwKICAgICAgdGVsOiAhMCwKICAgICAgdGV4dDogITAsCiAgICAgIHRpbWU6ICEwLAogICAgICB1cmw6ICEwLAogICAgICB3ZWVrOiAhMCwKICAgIH0sCiAgICBBZyA9IHsKICAgICAgY2hhbmdlOiB7CiAgICAgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHsKICAgICAgICAgIGJ1YmJsZWQ6ICJvbkNoYW5nZSIsCiAgICAgICAgICBjYXB0dXJlZDogIm9uQ2hhbmdlQ2FwdHVyZSIsCiAgICAgICAgfSwKICAgICAgICBkZXBlbmRlbmNpZXM6CiAgICAgICAgICAiYmx1ciBjaGFuZ2UgY2xpY2sgZm9jdXMgaW5wdXQga2V5ZG93biBrZXl1cCBzZWxlY3Rpb25jaGFuZ2UiLnNwbGl0KAogICAgICAgICAgICAiICIKICAgICAgICAgICksCiAgICAgIH0sCiAgICB9LAogICAgTWIgPSBudWxsLAogICAgTmIgPSBudWxsLAogICAga2YgPSAhMTsKICB3YSAmJgogICAgKGtmID0gVGYoImlucHV0IikgJiYgKCFkb2N1bWVudC5kb2N1bWVudE1vZGUgfHwgOSA8IGRvY3VtZW50LmRvY3VtZW50TW9kZSkpOwogIHZhciBYaiA9IHsKICAgICAgZXZlbnRUeXBlczogQWcsCiAgICAgIF9pc0lucHV0RXZlbnRTdXBwb3J0ZWQ6IGtmLAogICAgICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSkgewogICAgICAgIGUgPSBiID8gUGEoYikgOiB3aW5kb3c7CiAgICAgICAgdmFyIGYgPSBlLm5vZGVOYW1lICYmIGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoInNlbGVjdCIgPT09IGYgfHwgKCJpbnB1dCIgPT09IGYgJiYgImZpbGUiID09PSBlLnR5cGUpKSB2YXIgZyA9IFNpOwogICAgICAgIGVsc2UgaWYgKHlnKGUpKQogICAgICAgICAgaWYgKGtmKSBnID0gV2k7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgZyA9IFVpOwogICAgICAgICAgICB2YXIgaCA9IFRpOwogICAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICAgIChmID0gZS5ub2RlTmFtZSkgJiYKICAgICAgICAgICAgImlucHV0IiA9PT0gZi50b0xvd2VyQ2FzZSgpICYmCiAgICAgICAgICAgICgiY2hlY2tib3giID09PSBlLnR5cGUgfHwgInJhZGlvIiA9PT0gZS50eXBlKSAmJgogICAgICAgICAgICAoZyA9IFZpKTsKICAgICAgICBpZiAoZyAmJiAoZyA9IGcoYSwgYikpKSByZXR1cm4gemcoZywgYywgZCk7CiAgICAgICAgaCAmJiBoKGEsIGUsIGIpOwogICAgICAgICJibHVyIiA9PT0gYSAmJgogICAgICAgICAgKGEgPSBlLl93cmFwcGVyU3RhdGUpICYmCiAgICAgICAgICBhLmNvbnRyb2xsZWQgJiYKICAgICAgICAgICJudW1iZXIiID09PSBlLnR5cGUgJiYKICAgICAgICAgIEVkKGUsICJudW1iZXIiLCBlLnZhbHVlKTsKICAgICAgfSwKICAgIH0sCiAgICBkYyA9IFIuZXh0ZW5kKHsgdmlldzogbnVsbCwgZGV0YWlsOiBudWxsIH0pLAogICAgWWkgPSB7CiAgICAgIEFsdDogImFsdEtleSIsCiAgICAgIENvbnRyb2w6ICJjdHJsS2V5IiwKICAgICAgTWV0YTogIm1ldGFLZXkiLAogICAgICBTaGlmdDogInNoaWZ0S2V5IiwKICAgIH0sCiAgICBkaSA9IDAsCiAgICBlaSA9IDAsCiAgICBmaSA9ICExLAogICAgZ2kgPSAhMSwKICAgIGVjID0gZGMuZXh0ZW5kKHsKICAgICAgc2NyZWVuWDogbnVsbCwKICAgICAgc2NyZWVuWTogbnVsbCwKICAgICAgY2xpZW50WDogbnVsbCwKICAgICAgY2xpZW50WTogbnVsbCwKICAgICAgcGFnZVg6IG51bGwsCiAgICAgIHBhZ2VZOiBudWxsLAogICAgICBjdHJsS2V5OiBudWxsLAogICAgICBzaGlmdEtleTogbnVsbCwKICAgICAgYWx0S2V5OiBudWxsLAogICAgICBtZXRhS2V5OiBudWxsLAogICAgICBnZXRNb2RpZmllclN0YXRlOiBmZSwKICAgICAgYnV0dG9uOiBudWxsLAogICAgICBidXR0b25zOiBudWxsLAogICAgICByZWxhdGVkVGFyZ2V0OiBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICBhLnJlbGF0ZWRUYXJnZXQgfHwKICAgICAgICAgIChhLmZyb21FbGVtZW50ID09PSBhLnNyY0VsZW1lbnQgPyBhLnRvRWxlbWVudCA6IGEuZnJvbUVsZW1lbnQpCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgbW92ZW1lbnRYOiBmdW5jdGlvbiAoYSkgewogICAgICAgIGlmICgibW92ZW1lbnRYIiBpbiBhKSByZXR1cm4gYS5tb3ZlbWVudFg7CiAgICAgICAgdmFyIGIgPSBkaTsKICAgICAgICBkaSA9IGEuc2NyZWVuWDsKICAgICAgICByZXR1cm4gZmkKICAgICAgICAgID8gIm1vdXNlbW92ZSIgPT09IGEudHlwZQogICAgICAgICAgICA/IGEuc2NyZWVuWCAtIGIKICAgICAgICAgICAgOiAwCiAgICAgICAgICA6ICgoZmkgPSAhMCksIDApOwogICAgICB9LAogICAgICBtb3ZlbWVudFk6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgaWYgKCJtb3ZlbWVudFkiIGluIGEpIHJldHVybiBhLm1vdmVtZW50WTsKICAgICAgICB2YXIgYiA9IGVpOwogICAgICAgIGVpID0gYS5zY3JlZW5ZOwogICAgICAgIHJldHVybiBnaQogICAgICAgICAgPyAibW91c2Vtb3ZlIiA9PT0gYS50eXBlCiAgICAgICAgICAgID8gYS5zY3JlZW5ZIC0gYgogICAgICAgICAgICA6IDAKICAgICAgICAgIDogKChnaSA9ICEwKSwgMCk7CiAgICAgIH0sCiAgICB9KSwKICAgIGhpID0gZWMuZXh0ZW5kKHsKICAgICAgcG9pbnRlcklkOiBudWxsLAogICAgICB3aWR0aDogbnVsbCwKICAgICAgaGVpZ2h0OiBudWxsLAogICAgICBwcmVzc3VyZTogbnVsbCwKICAgICAgdGFuZ2VudGlhbFByZXNzdXJlOiBudWxsLAogICAgICB0aWx0WDogbnVsbCwKICAgICAgdGlsdFk6IG51bGwsCiAgICAgIHR3aXN0OiBudWxsLAogICAgICBwb2ludGVyVHlwZTogbnVsbCwKICAgICAgaXNQcmltYXJ5OiBudWxsLAogICAgfSksCiAgICBmYyA9IHsKICAgICAgbW91c2VFbnRlcjogewogICAgICAgIHJlZ2lzdHJhdGlvbk5hbWU6ICJvbk1vdXNlRW50ZXIiLAogICAgICAgIGRlcGVuZGVuY2llczogWyJtb3VzZW91dCIsICJtb3VzZW92ZXIiXSwKICAgICAgfSwKICAgICAgbW91c2VMZWF2ZTogewogICAgICAgIHJlZ2lzdHJhdGlvbk5hbWU6ICJvbk1vdXNlTGVhdmUiLAogICAgICAgIGRlcGVuZGVuY2llczogWyJtb3VzZW91dCIsICJtb3VzZW92ZXIiXSwKICAgICAgfSwKICAgICAgcG9pbnRlckVudGVyOiB7CiAgICAgICAgcmVnaXN0cmF0aW9uTmFtZTogIm9uUG9pbnRlckVudGVyIiwKICAgICAgICBkZXBlbmRlbmNpZXM6IFsicG9pbnRlcm91dCIsICJwb2ludGVyb3ZlciJdLAogICAgICB9LAogICAgICBwb2ludGVyTGVhdmU6IHsKICAgICAgICByZWdpc3RyYXRpb25OYW1lOiAib25Qb2ludGVyTGVhdmUiLAogICAgICAgIGRlcGVuZGVuY2llczogWyJwb2ludGVyb3V0IiwgInBvaW50ZXJvdmVyIl0sCiAgICAgIH0sCiAgICB9LAogICAgWWogPSB7CiAgICAgIGV2ZW50VHlwZXM6IGZjLAogICAgICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSkgewogICAgICAgIHZhciBmID0gIm1vdXNlb3ZlciIgPT09IGEgfHwgInBvaW50ZXJvdmVyIiA9PT0gYSwKICAgICAgICAgIGcgPSAibW91c2VvdXQiID09PSBhIHx8ICJwb2ludGVyb3V0IiA9PT0gYTsKICAgICAgICBpZiAoCiAgICAgICAgICAoZiAmJiAwID09PSAoZSAmIDMyKSAmJiAoYy5yZWxhdGVkVGFyZ2V0IHx8IGMuZnJvbUVsZW1lbnQpKSB8fAogICAgICAgICAgKCFnICYmICFmKQogICAgICAgICkKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGYgPQogICAgICAgICAgZC53aW5kb3cgPT09IGQKICAgICAgICAgICAgPyBkCiAgICAgICAgICAgIDogKGYgPSBkLm93bmVyRG9jdW1lbnQpCiAgICAgICAgICAgID8gZi5kZWZhdWx0VmlldyB8fCBmLnBhcmVudFdpbmRvdwogICAgICAgICAgICA6IHdpbmRvdzsKICAgICAgICBpZiAoZykgewogICAgICAgICAgaWYgKAogICAgICAgICAgICAoKGcgPSBiKSwKICAgICAgICAgICAgKGIgPSAoYiA9IGMucmVsYXRlZFRhcmdldCB8fCBjLnRvRWxlbWVudCkgPyBCYihiKSA6IG51bGwpLAogICAgICAgICAgICBudWxsICE9PSBiKQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHZhciBoID0gTmEoYik7CiAgICAgICAgICAgIGlmIChiICE9PSBoIHx8ICg1ICE9PSBiLnRhZyAmJiA2ICE9PSBiLnRhZykpIGIgPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBnID0gbnVsbDsKICAgICAgICBpZiAoZyA9PT0gYikgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKCJtb3VzZW91dCIgPT09IGEgfHwgIm1vdXNlb3ZlciIgPT09IGEpIHsKICAgICAgICAgIHZhciBtID0gZWM7CiAgICAgICAgICB2YXIgbiA9IGZjLm1vdXNlTGVhdmU7CiAgICAgICAgICB2YXIgbCA9IGZjLm1vdXNlRW50ZXI7CiAgICAgICAgICB2YXIgayA9ICJtb3VzZSI7CiAgICAgICAgfSBlbHNlIGlmICgicG9pbnRlcm91dCIgPT09IGEgfHwgInBvaW50ZXJvdmVyIiA9PT0gYSkKICAgICAgICAgIChtID0gaGkpLAogICAgICAgICAgICAobiA9IGZjLnBvaW50ZXJMZWF2ZSksCiAgICAgICAgICAgIChsID0gZmMucG9pbnRlckVudGVyKSwKICAgICAgICAgICAgKGsgPSAicG9pbnRlciIpOwogICAgICAgIGEgPSBudWxsID09IGcgPyBmIDogUGEoZyk7CiAgICAgICAgZiA9IG51bGwgPT0gYiA/IGYgOiBQYShiKTsKICAgICAgICBuID0gbS5nZXRQb29sZWQobiwgZywgYywgZCk7CiAgICAgICAgbi50eXBlID0gayArICJsZWF2ZSI7CiAgICAgICAgbi50YXJnZXQgPSBhOwogICAgICAgIG4ucmVsYXRlZFRhcmdldCA9IGY7CiAgICAgICAgYyA9IG0uZ2V0UG9vbGVkKGwsIGIsIGMsIGQpOwogICAgICAgIGMudHlwZSA9IGsgKyAiZW50ZXIiOwogICAgICAgIGMudGFyZ2V0ID0gZjsKICAgICAgICBjLnJlbGF0ZWRUYXJnZXQgPSBhOwogICAgICAgIGQgPSBnOwogICAgICAgIGsgPSBiOwogICAgICAgIGlmIChkICYmIGspCiAgICAgICAgICBhOiB7CiAgICAgICAgICAgIG0gPSBkOwogICAgICAgICAgICBsID0gazsKICAgICAgICAgICAgZyA9IDA7CiAgICAgICAgICAgIGZvciAoYSA9IG07IGE7IGEgPSBwYShhKSkgZysrOwogICAgICAgICAgICBhID0gMDsKICAgICAgICAgICAgZm9yIChiID0gbDsgYjsgYiA9IHBhKGIpKSBhKys7CiAgICAgICAgICAgIGZvciAoOyAwIDwgZyAtIGE7ICkgKG0gPSBwYShtKSksIGctLTsKICAgICAgICAgICAgZm9yICg7IDAgPCBhIC0gZzsgKSAobCA9IHBhKGwpKSwgYS0tOwogICAgICAgICAgICBmb3IgKDsgZy0tOyApIHsKICAgICAgICAgICAgICBpZiAobSA9PT0gbCB8fCBtID09PSBsLmFsdGVybmF0ZSkgYnJlYWsgYTsKICAgICAgICAgICAgICBtID0gcGEobSk7CiAgICAgICAgICAgICAgbCA9IHBhKGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG0gPSBudWxsOwogICAgICAgICAgfQogICAgICAgIGVsc2UgbSA9IG51bGw7CiAgICAgICAgbCA9IG07CiAgICAgICAgZm9yIChtID0gW107IGQgJiYgZCAhPT0gbDsgKSB7CiAgICAgICAgICBnID0gZC5hbHRlcm5hdGU7CiAgICAgICAgICBpZiAobnVsbCAhPT0gZyAmJiBnID09PSBsKSBicmVhazsKICAgICAgICAgIG0ucHVzaChkKTsKICAgICAgICAgIGQgPSBwYShkKTsKICAgICAgICB9CiAgICAgICAgZm9yIChkID0gW107IGsgJiYgayAhPT0gbDsgKSB7CiAgICAgICAgICBnID0gay5hbHRlcm5hdGU7CiAgICAgICAgICBpZiAobnVsbCAhPT0gZyAmJiBnID09PSBsKSBicmVhazsKICAgICAgICAgIGQucHVzaChrKTsKICAgICAgICAgIGsgPSBwYShrKTsKICAgICAgICB9CiAgICAgICAgZm9yIChrID0gMDsgayA8IG0ubGVuZ3RoOyBrKyspIGJlKG1ba10sICJidWJibGVkIiwgbik7CiAgICAgICAgZm9yIChrID0gZC5sZW5ndGg7IDAgPCBrLS07ICkgYmUoZFtrXSwgImNhcHR1cmVkIiwgYyk7CiAgICAgICAgcmV0dXJuIDAgPT09IChlICYgNjQpID8gW25dIDogW24sIGNdOwogICAgICB9LAogICAgfSwKICAgIFFhID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIE9iamVjdC5pcyA/IE9iamVjdC5pcyA6IFppLAogICAgJGkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LAogICAgWmogPSB3YSAmJiAiZG9jdW1lbnRNb2RlIiBpbiBkb2N1bWVudCAmJiAxMSA+PSBkb2N1bWVudC5kb2N1bWVudE1vZGUsCiAgICBFZyA9IHsKICAgICAgc2VsZWN0OiB7CiAgICAgICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHsKICAgICAgICAgIGJ1YmJsZWQ6ICJvblNlbGVjdCIsCiAgICAgICAgICBjYXB0dXJlZDogIm9uU2VsZWN0Q2FwdHVyZSIsCiAgICAgICAgfSwKICAgICAgICBkZXBlbmRlbmNpZXM6CiAgICAgICAgICAiYmx1ciBjb250ZXh0bWVudSBkcmFnZW5kIGZvY3VzIGtleWRvd24ga2V5dXAgbW91c2Vkb3duIG1vdXNldXAgc2VsZWN0aW9uY2hhbmdlIi5zcGxpdCgKICAgICAgICAgICAgIiAiCiAgICAgICAgICApLAogICAgICB9LAogICAgfSwKICAgIG5iID0gbnVsbCwKICAgIGhlID0gbnVsbCwKICAgIFBiID0gbnVsbCwKICAgIGdlID0gITEsCiAgICBhayA9IHsKICAgICAgZXZlbnRUeXBlczogRWcsCiAgICAgIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmKSB7CiAgICAgICAgZSA9CiAgICAgICAgICBmIHx8CiAgICAgICAgICAoZC53aW5kb3cgPT09IGQKICAgICAgICAgICAgPyBkLmRvY3VtZW50CiAgICAgICAgICAgIDogOSA9PT0gZC5ub2RlVHlwZQogICAgICAgICAgICA/IGQKICAgICAgICAgICAgOiBkLm93bmVyRG9jdW1lbnQpOwogICAgICAgIGlmICghKGYgPSAhZSkpIHsKICAgICAgICAgIGE6IHsKICAgICAgICAgICAgZSA9IEpkKGUpOwogICAgICAgICAgICBmID0gcmQub25TZWxlY3Q7CiAgICAgICAgICAgIGZvciAodmFyIGcgPSAwOyBnIDwgZi5sZW5ndGg7IGcrKykKICAgICAgICAgICAgICBpZiAoIWUuaGFzKGZbZ10pKSB7CiAgICAgICAgICAgICAgICBlID0gITE7CiAgICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZSA9ICEwOwogICAgICAgICAgfQogICAgICAgICAgZiA9ICFlOwogICAgICAgIH0KICAgICAgICBpZiAoZikgcmV0dXJuIG51bGw7CiAgICAgICAgZSA9IGIgPyBQYShiKSA6IHdpbmRvdzsKICAgICAgICBzd2l0Y2ggKGEpIHsKICAgICAgICAgIGNhc2UgImZvY3VzIjoKICAgICAgICAgICAgaWYgKHlnKGUpIHx8ICJ0cnVlIiA9PT0gZS5jb250ZW50RWRpdGFibGUpCiAgICAgICAgICAgICAgKG5iID0gZSksIChoZSA9IGIpLCAoUGIgPSBudWxsKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJibHVyIjoKICAgICAgICAgICAgUGIgPSBoZSA9IG5iID0gbnVsbDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJtb3VzZWRvd24iOgogICAgICAgICAgICBnZSA9ICEwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImNvbnRleHRtZW51IjoKICAgICAgICAgIGNhc2UgIm1vdXNldXAiOgogICAgICAgICAgY2FzZSAiZHJhZ2VuZCI6CiAgICAgICAgICAgIHJldHVybiAoZ2UgPSAhMSksIERnKGMsIGQpOwogICAgICAgICAgY2FzZSAic2VsZWN0aW9uY2hhbmdlIjoKICAgICAgICAgICAgaWYgKFpqKSBicmVhazsKICAgICAgICAgIGNhc2UgImtleWRvd24iOgogICAgICAgICAgY2FzZSAia2V5dXAiOgogICAgICAgICAgICByZXR1cm4gRGcoYywgZCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LAogICAgfSwKICAgIGJrID0gUi5leHRlbmQoewogICAgICBhbmltYXRpb25OYW1lOiBudWxsLAogICAgICBlbGFwc2VkVGltZTogbnVsbCwKICAgICAgcHNldWRvRWxlbWVudDogbnVsbCwKICAgIH0pLAogICAgY2sgPSBSLmV4dGVuZCh7CiAgICAgIGNsaXBib2FyZERhdGE6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuICJjbGlwYm9hcmREYXRhIiBpbiBhID8gYS5jbGlwYm9hcmREYXRhIDogd2luZG93LmNsaXBib2FyZERhdGE7CiAgICAgIH0sCiAgICB9KSwKICAgIGRrID0gZGMuZXh0ZW5kKHsgcmVsYXRlZFRhcmdldDogbnVsbCB9KSwKICAgIGVrID0gewogICAgICBFc2M6ICJFc2NhcGUiLAogICAgICBTcGFjZWJhcjogIiAiLAogICAgICBMZWZ0OiAiQXJyb3dMZWZ0IiwKICAgICAgVXA6ICJBcnJvd1VwIiwKICAgICAgUmlnaHQ6ICJBcnJvd1JpZ2h0IiwKICAgICAgRG93bjogIkFycm93RG93biIsCiAgICAgIERlbDogIkRlbGV0ZSIsCiAgICAgIFdpbjogIk9TIiwKICAgICAgTWVudTogIkNvbnRleHRNZW51IiwKICAgICAgQXBwczogIkNvbnRleHRNZW51IiwKICAgICAgU2Nyb2xsOiAiU2Nyb2xsTG9jayIsCiAgICAgIE1velByaW50YWJsZUtleTogIlVuaWRlbnRpZmllZCIsCiAgICB9LAogICAgZmsgPSB7CiAgICAgIDg6ICJCYWNrc3BhY2UiLAogICAgICA5OiAiVGFiIiwKICAgICAgMTI6ICJDbGVhciIsCiAgICAgIDEzOiAiRW50ZXIiLAogICAgICAxNjogIlNoaWZ0IiwKICAgICAgMTc6ICJDb250cm9sIiwKICAgICAgMTg6ICJBbHQiLAogICAgICAxOTogIlBhdXNlIiwKICAgICAgMjA6ICJDYXBzTG9jayIsCiAgICAgIDI3OiAiRXNjYXBlIiwKICAgICAgMzI6ICIgIiwKICAgICAgMzM6ICJQYWdlVXAiLAogICAgICAzNDogIlBhZ2VEb3duIiwKICAgICAgMzU6ICJFbmQiLAogICAgICAzNjogIkhvbWUiLAogICAgICAzNzogIkFycm93TGVmdCIsCiAgICAgIDM4OiAiQXJyb3dVcCIsCiAgICAgIDM5OiAiQXJyb3dSaWdodCIsCiAgICAgIDQwOiAiQXJyb3dEb3duIiwKICAgICAgNDU6ICJJbnNlcnQiLAogICAgICA0NjogIkRlbGV0ZSIsCiAgICAgIDExMjogIkYxIiwKICAgICAgMTEzOiAiRjIiLAogICAgICAxMTQ6ICJGMyIsCiAgICAgIDExNTogIkY0IiwKICAgICAgMTE2OiAiRjUiLAogICAgICAxMTc6ICJGNiIsCiAgICAgIDExODogIkY3IiwKICAgICAgMTE5OiAiRjgiLAogICAgICAxMjA6ICJGOSIsCiAgICAgIDEyMTogIkYxMCIsCiAgICAgIDEyMjogIkYxMSIsCiAgICAgIDEyMzogIkYxMiIsCiAgICAgIDE0NDogIk51bUxvY2siLAogICAgICAxNDU6ICJTY3JvbGxMb2NrIiwKICAgICAgMjI0OiAiTWV0YSIsCiAgICB9LAogICAgZ2sgPSBkYy5leHRlbmQoewogICAgICBrZXk6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgaWYgKGEua2V5KSB7CiAgICAgICAgICB2YXIgYiA9IGVrW2Eua2V5XSB8fCBhLmtleTsKICAgICAgICAgIGlmICgiVW5pZGVudGlmaWVkIiAhPT0gYikgcmV0dXJuIGI7CiAgICAgICAgfQogICAgICAgIHJldHVybiAia2V5cHJlc3MiID09PSBhLnR5cGUKICAgICAgICAgID8gKChhID0gQWMoYSkpLCAxMyA9PT0gYSA/ICJFbnRlciIgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKGEpKQogICAgICAgICAgOiAia2V5ZG93biIgPT09IGEudHlwZSB8fCAia2V5dXAiID09PSBhLnR5cGUKICAgICAgICAgID8gZmtbYS5rZXlDb2RlXSB8fCAiVW5pZGVudGlmaWVkIgogICAgICAgICAgOiAiIjsKICAgICAgfSwKICAgICAgbG9jYXRpb246IG51bGwsCiAgICAgIGN0cmxLZXk6IG51bGwsCiAgICAgIHNoaWZ0S2V5OiBudWxsLAogICAgICBhbHRLZXk6IG51bGwsCiAgICAgIG1ldGFLZXk6IG51bGwsCiAgICAgIHJlcGVhdDogbnVsbCwKICAgICAgbG9jYWxlOiBudWxsLAogICAgICBnZXRNb2RpZmllclN0YXRlOiBmZSwKICAgICAgY2hhckNvZGU6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuICJrZXlwcmVzcyIgPT09IGEudHlwZSA/IEFjKGEpIDogMDsKICAgICAgfSwKICAgICAga2V5Q29kZTogZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gImtleWRvd24iID09PSBhLnR5cGUgfHwgImtleXVwIiA9PT0gYS50eXBlID8gYS5rZXlDb2RlIDogMDsKICAgICAgfSwKICAgICAgd2hpY2g6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuICJrZXlwcmVzcyIgPT09IGEudHlwZQogICAgICAgICAgPyBBYyhhKQogICAgICAgICAgOiAia2V5ZG93biIgPT09IGEudHlwZSB8fCAia2V5dXAiID09PSBhLnR5cGUKICAgICAgICAgID8gYS5rZXlDb2RlCiAgICAgICAgICA6IDA7CiAgICAgIH0sCiAgICB9KSwKICAgIGhrID0gZWMuZXh0ZW5kKHsgZGF0YVRyYW5zZmVyOiBudWxsIH0pLAogICAgaWsgPSBkYy5leHRlbmQoewogICAgICB0b3VjaGVzOiBudWxsLAogICAgICB0YXJnZXRUb3VjaGVzOiBudWxsLAogICAgICBjaGFuZ2VkVG91Y2hlczogbnVsbCwKICAgICAgYWx0S2V5OiBudWxsLAogICAgICBtZXRhS2V5OiBudWxsLAogICAgICBjdHJsS2V5OiBudWxsLAogICAgICBzaGlmdEtleTogbnVsbCwKICAgICAgZ2V0TW9kaWZpZXJTdGF0ZTogZmUsCiAgICB9KSwKICAgIGprID0gUi5leHRlbmQoewogICAgICBwcm9wZXJ0eU5hbWU6IG51bGwsCiAgICAgIGVsYXBzZWRUaW1lOiBudWxsLAogICAgICBwc2V1ZG9FbGVtZW50OiBudWxsLAogICAgfSksCiAgICBrayA9IGVjLmV4dGVuZCh7CiAgICAgIGRlbHRhWDogZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gImRlbHRhWCIgaW4gYQogICAgICAgICAgPyBhLmRlbHRhWAogICAgICAgICAgOiAid2hlZWxEZWx0YVgiIGluIGEKICAgICAgICAgID8gLWEud2hlZWxEZWx0YVgKICAgICAgICAgIDogMDsKICAgICAgfSwKICAgICAgZGVsdGFZOiBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiAiZGVsdGFZIiBpbiBhCiAgICAgICAgICA/IGEuZGVsdGFZCiAgICAgICAgICA6ICJ3aGVlbERlbHRhWSIgaW4gYQogICAgICAgICAgPyAtYS53aGVlbERlbHRhWQogICAgICAgICAgOiAid2hlZWxEZWx0YSIgaW4gYQogICAgICAgICAgPyAtYS53aGVlbERlbHRhCiAgICAgICAgICA6IDA7CiAgICAgIH0sCiAgICAgIGRlbHRhWjogbnVsbCwKICAgICAgZGVsdGFNb2RlOiBudWxsLAogICAgfSksCiAgICBsayA9IHsKICAgICAgZXZlbnRUeXBlczogZGcsCiAgICAgIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CiAgICAgICAgZSA9IGNnLmdldChhKTsKICAgICAgICBpZiAoIWUpIHJldHVybiBudWxsOwogICAgICAgIHN3aXRjaCAoYSkgewogICAgICAgICAgY2FzZSAia2V5cHJlc3MiOgogICAgICAgICAgICBpZiAoMCA9PT0gQWMoYykpIHJldHVybiBudWxsOwogICAgICAgICAgY2FzZSAia2V5ZG93biI6CiAgICAgICAgICBjYXNlICJrZXl1cCI6CiAgICAgICAgICAgIGEgPSBnazsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJibHVyIjoKICAgICAgICAgIGNhc2UgImZvY3VzIjoKICAgICAgICAgICAgYSA9IGRrOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgImNsaWNrIjoKICAgICAgICAgICAgaWYgKDIgPT09IGMuYnV0dG9uKSByZXR1cm4gbnVsbDsKICAgICAgICAgIGNhc2UgImF1eGNsaWNrIjoKICAgICAgICAgIGNhc2UgImRibGNsaWNrIjoKICAgICAgICAgIGNhc2UgIm1vdXNlZG93biI6CiAgICAgICAgICBjYXNlICJtb3VzZW1vdmUiOgogICAgICAgICAgY2FzZSAibW91c2V1cCI6CiAgICAgICAgICBjYXNlICJtb3VzZW91dCI6CiAgICAgICAgICBjYXNlICJtb3VzZW92ZXIiOgogICAgICAgICAgY2FzZSAiY29udGV4dG1lbnUiOgogICAgICAgICAgICBhID0gZWM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAiZHJhZyI6CiAgICAgICAgICBjYXNlICJkcmFnZW5kIjoKICAgICAgICAgIGNhc2UgImRyYWdlbnRlciI6CiAgICAgICAgICBjYXNlICJkcmFnZXhpdCI6CiAgICAgICAgICBjYXNlICJkcmFnbGVhdmUiOgogICAgICAgICAgY2FzZSAiZHJhZ292ZXIiOgogICAgICAgICAgY2FzZSAiZHJhZ3N0YXJ0IjoKICAgICAgICAgIGNhc2UgImRyb3AiOgogICAgICAgICAgICBhID0gaGs7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAidG91Y2hjYW5jZWwiOgogICAgICAgICAgY2FzZSAidG91Y2hlbmQiOgogICAgICAgICAgY2FzZSAidG91Y2htb3ZlIjoKICAgICAgICAgIGNhc2UgInRvdWNoc3RhcnQiOgogICAgICAgICAgICBhID0gaWs7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAkaDoKICAgICAgICAgIGNhc2UgYWk6CiAgICAgICAgICBjYXNlIGJpOgogICAgICAgICAgICBhID0gYms7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBjaToKICAgICAgICAgICAgYSA9IGprOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgInNjcm9sbCI6CiAgICAgICAgICAgIGEgPSBkYzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJ3aGVlbCI6CiAgICAgICAgICAgIGEgPSBrazsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJjb3B5IjoKICAgICAgICAgIGNhc2UgImN1dCI6CiAgICAgICAgICBjYXNlICJwYXN0ZSI6CiAgICAgICAgICAgIGEgPSBjazsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICJnb3Rwb2ludGVyY2FwdHVyZSI6CiAgICAgICAgICBjYXNlICJsb3N0cG9pbnRlcmNhcHR1cmUiOgogICAgICAgICAgY2FzZSAicG9pbnRlcmNhbmNlbCI6CiAgICAgICAgICBjYXNlICJwb2ludGVyZG93biI6CiAgICAgICAgICBjYXNlICJwb2ludGVybW92ZSI6CiAgICAgICAgICBjYXNlICJwb2ludGVyb3V0IjoKICAgICAgICAgIGNhc2UgInBvaW50ZXJvdmVyIjoKICAgICAgICAgIGNhc2UgInBvaW50ZXJ1cCI6CiAgICAgICAgICAgIGEgPSBoaTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBhID0gUjsKICAgICAgICB9CiAgICAgICAgYiA9IGEuZ2V0UG9vbGVkKGUsIGIsIGMsIGQpOwogICAgICAgIGxiKGIpOwogICAgICAgIHJldHVybiBiOwogICAgICB9LAogICAgfTsKICAoZnVuY3Rpb24gKGEpIHsKICAgIGlmIChpYykgdGhyb3cgRXJyb3IoaygxMDEpKTsKICAgIGljID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSk7CiAgICBuZigpOwogIH0pKAogICAgIlJlc3BvbmRlckV2ZW50UGx1Z2luIFNpbXBsZUV2ZW50UGx1Z2luIEVudGVyTGVhdmVFdmVudFBsdWdpbiBDaGFuZ2VFdmVudFBsdWdpbiBTZWxlY3RFdmVudFBsdWdpbiBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luIi5zcGxpdCgKICAgICAgIiAiCiAgICApCiAgKTsKICAoZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgIHRkID0gYTsKICAgIHJmID0gYjsKICAgIG1mID0gYzsKICB9KShhZSwgSGIsIFBhKTsKICBwZih7CiAgICBTaW1wbGVFdmVudFBsdWdpbjogbGssCiAgICBFbnRlckxlYXZlRXZlbnRQbHVnaW46IFlqLAogICAgQ2hhbmdlRXZlbnRQbHVnaW46IFhqLAogICAgU2VsZWN0RXZlbnRQbHVnaW46IGFrLAogICAgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogV2osCiAgfSk7CiAgdmFyIGllID0gW10sCiAgICBvYiA9IC0xLAogICAgQ2EgPSB7fSwKICAgIEIgPSB7IGN1cnJlbnQ6IENhIH0sCiAgICBHID0geyBjdXJyZW50OiAhMSB9LAogICAgUmEgPSBDYSwKICAgIGJqID0gUGQsCiAgICBqZSA9ICRmLAogICAgUmcgPSBMaiwKICAgIGFqID0gTmosCiAgICBEYyA9IE9qLAogICAgSWcgPSBaaCwKICAgIEpnID0gYWcsCiAgICBLZyA9IFBqLAogICAgTGcgPSBRaiwKICAgIFFnID0ge30sCiAgICB5aiA9IE1qLAogICAgQ2ogPSB2b2lkIDAgIT09IFloID8gWWggOiBmdW5jdGlvbiAoKSB7fSwKICAgIHFhID0gbnVsbCwKICAgIEVjID0gbnVsbCwKICAgIGtlID0gITEsCiAgICBpaSA9IGZmKCksCiAgICBZID0KICAgICAgMWU0ID4gaWkKICAgICAgICA/IGZmCiAgICAgICAgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmZigpIC0gaWk7CiAgICAgICAgICB9LAogICAgSWMgPSB7IGN1cnJlbnQ6IG51bGwgfSwKICAgIEhjID0gbnVsbCwKICAgIHFiID0gbnVsbCwKICAgIEdjID0gbnVsbCwKICAgIFRnID0gMCwKICAgIEpjID0gMiwKICAgIEdhID0gITEsCiAgICBWYiA9IGRhLlJlYWN0Q3VycmVudEJhdGNoQ29uZmlnLAogICAgJGcgPSBuZXcgZWEuQ29tcG9uZW50KCkucmVmcywKICAgIE1jID0gewogICAgICBpc01vdW50ZWQ6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIChhID0gYS5fcmVhY3RJbnRlcm5hbEZpYmVyKSA/IE5hKGEpID09PSBhIDogITE7CiAgICAgIH0sCiAgICAgIGVucXVldWVTZXRTdGF0ZTogZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICBhID0gYS5fcmVhY3RJbnRlcm5hbEZpYmVyOwogICAgICAgIHZhciBkID0ga2EoKSwKICAgICAgICAgIGUgPSBWYi5zdXNwZW5zZTsKICAgICAgICBkID0gVmEoZCwgYSwgZSk7CiAgICAgICAgZSA9IEVhKGQsIGUpOwogICAgICAgIGUucGF5bG9hZCA9IGI7CiAgICAgICAgdm9pZCAwICE9PSBjICYmIG51bGwgIT09IGMgJiYgKGUuY2FsbGJhY2sgPSBjKTsKICAgICAgICBGYShhLCBlKTsKICAgICAgICBKYShhLCBkKTsKICAgICAgfSwKICAgICAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICBhID0gYS5fcmVhY3RJbnRlcm5hbEZpYmVyOwogICAgICAgIHZhciBkID0ga2EoKSwKICAgICAgICAgIGUgPSBWYi5zdXNwZW5zZTsKICAgICAgICBkID0gVmEoZCwgYSwgZSk7CiAgICAgICAgZSA9IEVhKGQsIGUpOwogICAgICAgIGUudGFnID0gMTsKICAgICAgICBlLnBheWxvYWQgPSBiOwogICAgICAgIHZvaWQgMCAhPT0gYyAmJiBudWxsICE9PSBjICYmIChlLmNhbGxiYWNrID0gYyk7CiAgICAgICAgRmEoYSwgZSk7CiAgICAgICAgSmEoYSwgZCk7CiAgICAgIH0sCiAgICAgIGVucXVldWVGb3JjZVVwZGF0ZTogZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICBhID0gYS5fcmVhY3RJbnRlcm5hbEZpYmVyOwogICAgICAgIHZhciBjID0ga2EoKSwKICAgICAgICAgIGQgPSBWYi5zdXNwZW5zZTsKICAgICAgICBjID0gVmEoYywgYSwgZCk7CiAgICAgICAgZCA9IEVhKGMsIGQpOwogICAgICAgIGQudGFnID0gSmM7CiAgICAgICAgdm9pZCAwICE9PSBiICYmIG51bGwgIT09IGIgJiYgKGQuY2FsbGJhY2sgPSBiKTsKICAgICAgICBGYShhLCBkKTsKICAgICAgICBKYShhLCBjKTsKICAgICAgfSwKICAgIH0sCiAgICBRYyA9IEFycmF5LmlzQXJyYXksCiAgICB3YiA9IGFoKCEwKSwKICAgIEZlID0gYWgoITEpLAogICAgU2IgPSB7fSwKICAgIGphID0geyBjdXJyZW50OiBTYiB9LAogICAgVWIgPSB7IGN1cnJlbnQ6IFNiIH0sCiAgICBUYiA9IHsgY3VycmVudDogU2IgfSwKICAgIEQgPSB7IGN1cnJlbnQ6IDAgfSwKICAgIFNjID0gZGEuUmVhY3RDdXJyZW50RGlzcGF0Y2hlciwKICAgIFggPSBkYS5SZWFjdEN1cnJlbnRCYXRjaENvbmZpZywKICAgIElhID0gMCwKICAgIHogPSBudWxsLAogICAgSyA9IG51bGwsCiAgICBKID0gbnVsbCwKICAgIFVjID0gITEsCiAgICBUYyA9IHsKICAgICAgcmVhZENvbnRleHQ6IFcsCiAgICAgIHVzZUNhbGxiYWNrOiBTLAogICAgICB1c2VDb250ZXh0OiBTLAogICAgICB1c2VFZmZlY3Q6IFMsCiAgICAgIHVzZUltcGVyYXRpdmVIYW5kbGU6IFMsCiAgICAgIHVzZUxheW91dEVmZmVjdDogUywKICAgICAgdXNlTWVtbzogUywKICAgICAgdXNlUmVkdWNlcjogUywKICAgICAgdXNlUmVmOiBTLAogICAgICB1c2VTdGF0ZTogUywKICAgICAgdXNlRGVidWdWYWx1ZTogUywKICAgICAgdXNlUmVzcG9uZGVyOiBTLAogICAgICB1c2VEZWZlcnJlZFZhbHVlOiBTLAogICAgICB1c2VUcmFuc2l0aW9uOiBTLAogICAgfSwKICAgIGRqID0gewogICAgICByZWFkQ29udGV4dDogVywKICAgICAgdXNlQ2FsbGJhY2s6IGloLAogICAgICB1c2VDb250ZXh0OiBXLAogICAgICB1c2VFZmZlY3Q6IGVoLAogICAgICB1c2VJbXBlcmF0aXZlSGFuZGxlOiBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgIGMgPSBudWxsICE9PSBjICYmIHZvaWQgMCAhPT0gYyA/IGMuY29uY2F0KFthXSkgOiBudWxsOwogICAgICAgIHJldHVybiB6ZSg0LCAyLCBnaC5iaW5kKG51bGwsIGIsIGEpLCBjKTsKICAgICAgfSwKICAgICAgdXNlTGF5b3V0RWZmZWN0OiBmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiB6ZSg0LCAyLCBhLCBiKTsKICAgICAgfSwKICAgICAgdXNlTWVtbzogZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICB2YXIgYyA9IHViKCk7CiAgICAgICAgYiA9IHZvaWQgMCA9PT0gYiA/IG51bGwgOiBiOwogICAgICAgIGEgPSBhKCk7CiAgICAgICAgYy5tZW1vaXplZFN0YXRlID0gW2EsIGJdOwogICAgICAgIHJldHVybiBhOwogICAgICB9LAogICAgICB1c2VSZWR1Y2VyOiBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgIHZhciBkID0gdWIoKTsKICAgICAgICBiID0gdm9pZCAwICE9PSBjID8gYyhiKSA6IGI7CiAgICAgICAgZC5tZW1vaXplZFN0YXRlID0gZC5iYXNlU3RhdGUgPSBiOwogICAgICAgIGEgPSBkLnF1ZXVlID0gewogICAgICAgICAgcGVuZGluZzogbnVsbCwKICAgICAgICAgIGRpc3BhdGNoOiBudWxsLAogICAgICAgICAgbGFzdFJlbmRlcmVkUmVkdWNlcjogYSwKICAgICAgICAgIGxhc3RSZW5kZXJlZFN0YXRlOiBiLAogICAgICAgIH07CiAgICAgICAgYSA9IGEuZGlzcGF0Y2ggPSBjaC5iaW5kKG51bGwsIHosIGEpOwogICAgICAgIHJldHVybiBbZC5tZW1vaXplZFN0YXRlLCBhXTsKICAgICAgfSwKICAgICAgdXNlUmVmOiBmdW5jdGlvbiAoYSkgewogICAgICAgIHZhciBiID0gdWIoKTsKICAgICAgICBhID0geyBjdXJyZW50OiBhIH07CiAgICAgICAgcmV0dXJuIChiLm1lbW9pemVkU3RhdGUgPSBhKTsKICAgICAgfSwKICAgICAgdXNlU3RhdGU6IHhlLAogICAgICB1c2VEZWJ1Z1ZhbHVlOiBCZSwKICAgICAgdXNlUmVzcG9uZGVyOiB1ZSwKICAgICAgdXNlRGVmZXJyZWRWYWx1ZTogZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICB2YXIgYyA9IHhlKGEpLAogICAgICAgICAgZCA9IGNbMF0sCiAgICAgICAgICBlID0gY1sxXTsKICAgICAgICBlaCgKICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGMgPSBYLnN1c3BlbnNlOwogICAgICAgICAgICBYLnN1c3BlbnNlID0gdm9pZCAwID09PSBiID8gbnVsbCA6IGI7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgZShhKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBYLnN1c3BlbnNlID0gYzsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIFthLCBiXQogICAgICAgICk7CiAgICAgICAgcmV0dXJuIGQ7CiAgICAgIH0sCiAgICAgIHVzZVRyYW5zaXRpb246IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgdmFyIGIgPSB4ZSghMSksCiAgICAgICAgICBjID0gYlswXTsKICAgICAgICBiID0gYlsxXTsKICAgICAgICByZXR1cm4gW2loKENlLmJpbmQobnVsbCwgYiwgYSksIFtiLCBhXSksIGNdOwogICAgICB9LAogICAgfSwKICAgIGVqID0gewogICAgICByZWFkQ29udGV4dDogVywKICAgICAgdXNlQ2FsbGJhY2s6IFljLAogICAgICB1c2VDb250ZXh0OiBXLAogICAgICB1c2VFZmZlY3Q6IFhjLAogICAgICB1c2VJbXBlcmF0aXZlSGFuZGxlOiBoaCwKICAgICAgdXNlTGF5b3V0RWZmZWN0OiBmaCwKICAgICAgdXNlTWVtbzogamgsCiAgICAgIHVzZVJlZHVjZXI6IFZjLAogICAgICB1c2VSZWY6IGRoLAogICAgICB1c2VTdGF0ZTogZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gVmMoVWEpOwogICAgICB9LAogICAgICB1c2VEZWJ1Z1ZhbHVlOiBCZSwKICAgICAgdXNlUmVzcG9uZGVyOiB1ZSwKICAgICAgdXNlRGVmZXJyZWRWYWx1ZTogZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICB2YXIgYyA9IFZjKFVhKSwKICAgICAgICAgIGQgPSBjWzBdLAogICAgICAgICAgZSA9IGNbMV07CiAgICAgICAgWGMoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjID0gWC5zdXNwZW5zZTsKICAgICAgICAgICAgWC5zdXNwZW5zZSA9IHZvaWQgMCA9PT0gYiA/IG51bGwgOiBiOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGUoYSk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgWC5zdXNwZW5zZSA9IGM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBbYSwgYl0KICAgICAgICApOwogICAgICAgIHJldHVybiBkOwogICAgICB9LAogICAgICB1c2VUcmFuc2l0aW9uOiBmdW5jdGlvbiAoYSkgewogICAgICAgIHZhciBiID0gVmMoVWEpLAogICAgICAgICAgYyA9IGJbMF07CiAgICAgICAgYiA9IGJbMV07CiAgICAgICAgcmV0dXJuIFtZYyhDZS5iaW5kKG51bGwsIGIsIGEpLCBbYiwgYV0pLCBjXTsKICAgICAgfSwKICAgIH0sCiAgICBmaiA9IHsKICAgICAgcmVhZENvbnRleHQ6IFcsCiAgICAgIHVzZUNhbGxiYWNrOiBZYywKICAgICAgdXNlQ29udGV4dDogVywKICAgICAgdXNlRWZmZWN0OiBYYywKICAgICAgdXNlSW1wZXJhdGl2ZUhhbmRsZTogaGgsCiAgICAgIHVzZUxheW91dEVmZmVjdDogZmgsCiAgICAgIHVzZU1lbW86IGpoLAogICAgICB1c2VSZWR1Y2VyOiBXYywKICAgICAgdXNlUmVmOiBkaCwKICAgICAgdXNlU3RhdGU6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIFdjKFVhKTsKICAgICAgfSwKICAgICAgdXNlRGVidWdWYWx1ZTogQmUsCiAgICAgIHVzZVJlc3BvbmRlcjogdWUsCiAgICAgIHVzZURlZmVycmVkVmFsdWU6IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgdmFyIGMgPSBXYyhVYSksCiAgICAgICAgICBkID0gY1swXSwKICAgICAgICAgIGUgPSBjWzFdOwogICAgICAgIFhjKAogICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYyA9IFguc3VzcGVuc2U7CiAgICAgICAgICAgIFguc3VzcGVuc2UgPSB2b2lkIDAgPT09IGIgPyBudWxsIDogYjsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBlKGEpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIFguc3VzcGVuc2UgPSBjOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgW2EsIGJdCiAgICAgICAgKTsKICAgICAgICByZXR1cm4gZDsKICAgICAgfSwKICAgICAgdXNlVHJhbnNpdGlvbjogZnVuY3Rpb24gKGEpIHsKICAgICAgICB2YXIgYiA9IFdjKFVhKSwKICAgICAgICAgIGMgPSBiWzBdOwogICAgICAgIGIgPSBiWzFdOwogICAgICAgIHJldHVybiBbWWMoQ2UuYmluZChudWxsLCBiLCBhKSwgW2IsIGFdKSwgY107CiAgICAgIH0sCiAgICB9LAogICAgcmEgPSBudWxsLAogICAgS2EgPSBudWxsLAogICAgV2EgPSAhMSwKICAgIGdqID0gZGEuUmVhY3RDdXJyZW50T3duZXIsCiAgICBpYSA9ICExLAogICAgSmUgPSB7IGRlaHlkcmF0ZWQ6IG51bGwsIHJldHJ5VGltZTogMCB9OwogIHZhciBqaiA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CiAgICBmb3IgKGMgPSBiLmNoaWxkOyBudWxsICE9PSBjOyApIHsKICAgICAgaWYgKDUgPT09IGMudGFnIHx8IDYgPT09IGMudGFnKSBhLmFwcGVuZENoaWxkKGMuc3RhdGVOb2RlKTsKICAgICAgZWxzZSBpZiAoNCAhPT0gYy50YWcgJiYgbnVsbCAhPT0gYy5jaGlsZCkgewogICAgICAgIGMuY2hpbGQucmV0dXJuID0gYzsKICAgICAgICBjID0gYy5jaGlsZDsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoYyA9PT0gYikgYnJlYWs7CiAgICAgIGZvciAoOyBudWxsID09PSBjLnNpYmxpbmc7ICkgewogICAgICAgIGlmIChudWxsID09PSBjLnJldHVybiB8fCBjLnJldHVybiA9PT0gYikgcmV0dXJuOwogICAgICAgIGMgPSBjLnJldHVybjsKICAgICAgfQogICAgICBjLnNpYmxpbmcucmV0dXJuID0gYy5yZXR1cm47CiAgICAgIGMgPSBjLnNpYmxpbmc7CiAgICB9CiAgfTsKICB2YXIgd2ggPSBmdW5jdGlvbiAoYSkge307CiAgdmFyIGlqID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKICAgIHZhciBmID0gYS5tZW1vaXplZFByb3BzOwogICAgaWYgKGYgIT09IGQpIHsKICAgICAgdmFyIGcgPSBiLnN0YXRlTm9kZTsKICAgICAgVGEoamEuY3VycmVudCk7CiAgICAgIGEgPSBudWxsOwogICAgICBzd2l0Y2ggKGMpIHsKICAgICAgICBjYXNlICJpbnB1dCI6CiAgICAgICAgICBmID0gQ2QoZywgZik7CiAgICAgICAgICBkID0gQ2QoZywgZCk7CiAgICAgICAgICBhID0gW107CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJvcHRpb24iOgogICAgICAgICAgZiA9IEZkKGcsIGYpOwogICAgICAgICAgZCA9IEZkKGcsIGQpOwogICAgICAgICAgYSA9IFtdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAic2VsZWN0IjoKICAgICAgICAgIGYgPSBNKHt9LCBmLCB7IHZhbHVlOiB2b2lkIDAgfSk7CiAgICAgICAgICBkID0gTSh7fSwgZCwgeyB2YWx1ZTogdm9pZCAwIH0pOwogICAgICAgICAgYSA9IFtdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAidGV4dGFyZWEiOgogICAgICAgICAgZiA9IEdkKGcsIGYpOwogICAgICAgICAgZCA9IEdkKGcsIGQpOwogICAgICAgICAgYSA9IFtdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICJmdW5jdGlvbiIgIT09IHR5cGVvZiBmLm9uQ2xpY2sgJiYKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGQub25DbGljayAmJgogICAgICAgICAgICAoZy5vbmNsaWNrID0gdWMpOwogICAgICB9CiAgICAgIFVkKGMsIGQpOwogICAgICB2YXIgaCwgbTsKICAgICAgYyA9IG51bGw7CiAgICAgIGZvciAoaCBpbiBmKQogICAgICAgIGlmICghZC5oYXNPd25Qcm9wZXJ0eShoKSAmJiBmLmhhc093blByb3BlcnR5KGgpICYmIG51bGwgIT0gZltoXSkKICAgICAgICAgIGlmICgic3R5bGUiID09PSBoKQogICAgICAgICAgICBmb3IgKG0gaW4gKChnID0gZltoXSksIGcpKQogICAgICAgICAgICAgIGcuaGFzT3duUHJvcGVydHkobSkgJiYgKGMgfHwgKGMgPSB7fSksIChjW21dID0gIiIpKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiAhPT0gaCAmJgogICAgICAgICAgICAgICJjaGlsZHJlbiIgIT09IGggJiYKICAgICAgICAgICAgICAic3VwcHJlc3NDb250ZW50RWRpdGFibGVXYXJuaW5nIiAhPT0gaCAmJgogICAgICAgICAgICAgICJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciICE9PSBoICYmCiAgICAgICAgICAgICAgImF1dG9Gb2N1cyIgIT09IGggJiYKICAgICAgICAgICAgICAoZGIuaGFzT3duUHJvcGVydHkoaCkKICAgICAgICAgICAgICAgID8gYSB8fCAoYSA9IFtdKQogICAgICAgICAgICAgICAgOiAoYSA9IGEgfHwgW10pLnB1c2goaCwgbnVsbCkpOwogICAgICBmb3IgKGggaW4gZCkgewogICAgICAgIHZhciBrID0gZFtoXTsKICAgICAgICBnID0gbnVsbCAhPSBmID8gZltoXSA6IHZvaWQgMDsKICAgICAgICBpZiAoZC5oYXNPd25Qcm9wZXJ0eShoKSAmJiBrICE9PSBnICYmIChudWxsICE9IGsgfHwgbnVsbCAhPSBnKSkKICAgICAgICAgIGlmICgic3R5bGUiID09PSBoKQogICAgICAgICAgICBpZiAoZykgewogICAgICAgICAgICAgIGZvciAobSBpbiBnKQogICAgICAgICAgICAgICAgIWcuaGFzT3duUHJvcGVydHkobSkgfHwKICAgICAgICAgICAgICAgICAgKGsgJiYgay5oYXNPd25Qcm9wZXJ0eShtKSkgfHwKICAgICAgICAgICAgICAgICAgKGMgfHwgKGMgPSB7fSksIChjW21dID0gIiIpKTsKICAgICAgICAgICAgICBmb3IgKG0gaW4gaykKICAgICAgICAgICAgICAgIGsuaGFzT3duUHJvcGVydHkobSkgJiYKICAgICAgICAgICAgICAgICAgZ1ttXSAhPT0ga1ttXSAmJgogICAgICAgICAgICAgICAgICAoYyB8fCAoYyA9IHt9KSwgKGNbbV0gPSBrW21dKSk7CiAgICAgICAgICAgIH0gZWxzZSBjIHx8IChhIHx8IChhID0gW10pLCBhLnB1c2goaCwgYykpLCAoYyA9IGspOwogICAgICAgICAgZWxzZQogICAgICAgICAgICAiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiID09PSBoCiAgICAgICAgICAgICAgPyAoKGsgPSBrID8gay5fX2h0bWwgOiB2b2lkIDApLAogICAgICAgICAgICAgICAgKGcgPSBnID8gZy5fX2h0bWwgOiB2b2lkIDApLAogICAgICAgICAgICAgICAgbnVsbCAhPSBrICYmIGcgIT09IGsgJiYgKGEgPSBhIHx8IFtdKS5wdXNoKGgsIGspKQogICAgICAgICAgICAgIDogImNoaWxkcmVuIiA9PT0gaAogICAgICAgICAgICAgID8gZyA9PT0gayB8fAogICAgICAgICAgICAgICAgKCJzdHJpbmciICE9PSB0eXBlb2YgayAmJiAibnVtYmVyIiAhPT0gdHlwZW9mIGspIHx8CiAgICAgICAgICAgICAgICAoYSA9IGEgfHwgW10pLnB1c2goaCwgIiIgKyBrKQogICAgICAgICAgICAgIDogInN1cHByZXNzQ29udGVudEVkaXRhYmxlV2FybmluZyIgIT09IGggJiYKICAgICAgICAgICAgICAgICJzdXBwcmVzc0h5ZHJhdGlvbldhcm5pbmciICE9PSBoICYmCiAgICAgICAgICAgICAgICAoZGIuaGFzT3duUHJvcGVydHkoaCkKICAgICAgICAgICAgICAgICAgPyAobnVsbCAhPSBrICYmIG9hKGUsIGgpLCBhIHx8IGcgPT09IGsgfHwgKGEgPSBbXSkpCiAgICAgICAgICAgICAgICAgIDogKGEgPSBhIHx8IFtdKS5wdXNoKGgsIGspKTsKICAgICAgfQogICAgICBjICYmIChhID0gYSB8fCBbXSkucHVzaCgic3R5bGUiLCBjKTsKICAgICAgZSA9IGE7CiAgICAgIGlmICgoYi51cGRhdGVRdWV1ZSA9IGUpKSBiLmVmZmVjdFRhZyB8PSA0OwogICAgfQogIH07CiAgdmFyIGtqID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsKICAgIGMgIT09IGQgJiYgKGIuZWZmZWN0VGFnIHw9IDQpOwogIH07CiAgdmFyIHBqID0gImZ1bmN0aW9uIiA9PT0gdHlwZW9mIFdlYWtTZXQgPyBXZWFrU2V0IDogU2V0LAogICAgd2ogPSAiZnVuY3Rpb24iID09PSB0eXBlb2YgV2Vha01hcCA/IFdlYWtNYXAgOiBNYXAsCiAgICBzaiA9IE1hdGguY2VpbCwKICAgIGdkID0gZGEuUmVhY3RDdXJyZW50RGlzcGF0Y2hlciwKICAgIFVoID0gZGEuUmVhY3RDdXJyZW50T3duZXIsCiAgICBIID0gMCwKICAgIFllID0gOCwKICAgIGNhID0gMTYsCiAgICBtYSA9IDMyLAogICAgWGEgPSAwLAogICAgaGQgPSAxLAogICAgT2ggPSAyLAogICAgYWQgPSAzLAogICAgYmQgPSA0LAogICAgWGUgPSA1LAogICAgcCA9IEgsCiAgICBVID0gbnVsbCwKICAgIHQgPSBudWxsLAogICAgUCA9IDAsCiAgICBGID0gWGEsCiAgICBpZCA9IG51bGwsCiAgICB0YSA9IDEwNzM3NDE4MjMsCiAgICBZYiA9IDEwNzM3NDE4MjMsCiAgICBrZCA9IG51bGwsCiAgICBYYiA9IDAsCiAgICBqZCA9ICExLAogICAgUmUgPSAwLAogICAgUGggPSA1MDAsCiAgICBsID0gbnVsbCwKICAgIGNkID0gITEsCiAgICBTZSA9IG51bGwsCiAgICBMYSA9IG51bGwsCiAgICBsZCA9ICExLAogICAgWmIgPSBudWxsLAogICAgJGIgPSA5MCwKICAgIGJiID0gbnVsbCwKICAgIGFjID0gMCwKICAgIGFmID0gbnVsbCwKICAgIGRkID0gMCwKICAgIEphID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgaWYgKDUwIDwgYWMpIHRocm93ICgoYWMgPSAwKSwgKGFmID0gbnVsbCksIEVycm9yKGsoMTg1KSkpOwogICAgICBhID0gZWQoYSwgYik7CiAgICAgIGlmIChudWxsICE9PSBhKSB7CiAgICAgICAgdmFyIGMgPSBDYygpOwogICAgICAgIDEwNzM3NDE4MjMgPT09IGIKICAgICAgICAgID8gKHAgJiBZZSkgIT09IEggJiYgKHAgJiAoY2EgfCBtYSkpID09PSBICiAgICAgICAgICAgID8gVGUoYSkKICAgICAgICAgICAgOiAoVihhKSwgcCA9PT0gSCAmJiBoYSgpKQogICAgICAgICAgOiBWKGEpOwogICAgICAgIChwICYgNCkgPT09IEggfHwKICAgICAgICAgICg5OCAhPT0gYyAmJiA5OSAhPT0gYykgfHwKICAgICAgICAgIChudWxsID09PSBiYgogICAgICAgICAgICA/IChiYiA9IG5ldyBNYXAoW1thLCBiXV0pKQogICAgICAgICAgICA6ICgoYyA9IGJiLmdldChhKSksICh2b2lkIDAgPT09IGMgfHwgYyA+IGIpICYmIGJiLnNldChhLCBiKSkpOwogICAgICB9CiAgICB9OwogIHZhciB6aiA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICB2YXIgZCA9IGIuZXhwaXJhdGlvblRpbWU7CiAgICBpZiAobnVsbCAhPT0gYSkgewogICAgICB2YXIgZSA9IGIucGVuZGluZ1Byb3BzOwogICAgICBpZiAoYS5tZW1vaXplZFByb3BzICE9PSBlIHx8IEcuY3VycmVudCkgaWEgPSAhMDsKICAgICAgZWxzZSB7CiAgICAgICAgaWYgKGQgPCBjKSB7CiAgICAgICAgICBpYSA9ICExOwogICAgICAgICAgc3dpdGNoIChiLnRhZykgewogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgc2goYik7CiAgICAgICAgICAgICAgRWUoKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGJoKGIpOwogICAgICAgICAgICAgIGlmIChiLm1vZGUgJiA0ICYmIDEgIT09IGMgJiYgZS5oaWRkZW4pCiAgICAgICAgICAgICAgICByZXR1cm4gKGIuZXhwaXJhdGlvblRpbWUgPSBiLmNoaWxkRXhwaXJhdGlvblRpbWUgPSAxKSwgbnVsbDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIE4oYi50eXBlKSAmJiBCYyhiKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHNlKGIsIGIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8pOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGQgPSBiLm1lbW9pemVkUHJvcHMudmFsdWU7CiAgICAgICAgICAgICAgZSA9IGIudHlwZS5fY29udGV4dDsKICAgICAgICAgICAgICB5KEljLCBlLl9jdXJyZW50VmFsdWUpOwogICAgICAgICAgICAgIGUuX2N1cnJlbnRWYWx1ZSA9IGQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGIubWVtb2l6ZWRTdGF0ZSkgewogICAgICAgICAgICAgICAgZCA9IGIuY2hpbGQuY2hpbGRFeHBpcmF0aW9uVGltZTsKICAgICAgICAgICAgICAgIGlmICgwICE9PSBkICYmIGQgPj0gYykgcmV0dXJuIHRoKGEsIGIsIGMpOwogICAgICAgICAgICAgICAgeShELCBELmN1cnJlbnQgJiAxKTsKICAgICAgICAgICAgICAgIGIgPSBzYShhLCBiLCBjKTsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9PSBiID8gYi5zaWJsaW5nIDogbnVsbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgeShELCBELmN1cnJlbnQgJiAxKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBkID0gYi5jaGlsZEV4cGlyYXRpb25UaW1lID49IGM7CiAgICAgICAgICAgICAgaWYgKDAgIT09IChhLmVmZmVjdFRhZyAmIDY0KSkgewogICAgICAgICAgICAgICAgaWYgKGQpIHJldHVybiB2aChhLCBiLCBjKTsKICAgICAgICAgICAgICAgIGIuZWZmZWN0VGFnIHw9IDY0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlID0gYi5tZW1vaXplZFN0YXRlOwogICAgICAgICAgICAgIG51bGwgIT09IGUgJiYgKChlLnJlbmRlcmluZyA9IG51bGwpLCAoZS50YWlsID0gbnVsbCkpOwogICAgICAgICAgICAgIHkoRCwgRC5jdXJyZW50KTsKICAgICAgICAgICAgICBpZiAoIWQpIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHNhKGEsIGIsIGMpOwogICAgICAgIH0KICAgICAgICBpYSA9ICExOwogICAgICB9CiAgICB9IGVsc2UgaWEgPSAhMTsKICAgIGIuZXhwaXJhdGlvblRpbWUgPSAwOwogICAgc3dpdGNoIChiLnRhZykgewogICAgICBjYXNlIDI6CiAgICAgICAgZCA9IGIudHlwZTsKICAgICAgICBudWxsICE9PSBhICYmCiAgICAgICAgICAoKGEuYWx0ZXJuYXRlID0gbnVsbCksIChiLmFsdGVybmF0ZSA9IG51bGwpLCAoYi5lZmZlY3RUYWcgfD0gMikpOwogICAgICAgIGEgPSBiLnBlbmRpbmdQcm9wczsKICAgICAgICBlID0gcGIoYiwgQi5jdXJyZW50KTsKICAgICAgICByYihiLCBjKTsKICAgICAgICBlID0gd2UobnVsbCwgYiwgZCwgYSwgZSwgYyk7CiAgICAgICAgYi5lZmZlY3RUYWcgfD0gMTsKICAgICAgICBpZiAoCiAgICAgICAgICAib2JqZWN0IiA9PT0gdHlwZW9mIGUgJiYKICAgICAgICAgIG51bGwgIT09IGUgJiYKICAgICAgICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBlLnJlbmRlciAmJgogICAgICAgICAgdm9pZCAwID09PSBlLiQkdHlwZW9mCiAgICAgICAgKSB7CiAgICAgICAgICBiLnRhZyA9IDE7CiAgICAgICAgICBiLm1lbW9pemVkU3RhdGUgPSBudWxsOwogICAgICAgICAgYi51cGRhdGVRdWV1ZSA9IG51bGw7CiAgICAgICAgICBpZiAoTihkKSkgewogICAgICAgICAgICB2YXIgZiA9ICEwOwogICAgICAgICAgICBCYyhiKTsKICAgICAgICAgIH0gZWxzZSBmID0gITE7CiAgICAgICAgICBiLm1lbW9pemVkU3RhdGUgPQogICAgICAgICAgICBudWxsICE9PSBlLnN0YXRlICYmIHZvaWQgMCAhPT0gZS5zdGF0ZSA/IGUuc3RhdGUgOiBudWxsOwogICAgICAgICAgbmUoYik7CiAgICAgICAgICB2YXIgZyA9IGQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzOwogICAgICAgICAgImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGcgJiYgTGMoYiwgZCwgZywgYSk7CiAgICAgICAgICBlLnVwZGF0ZXIgPSBNYzsKICAgICAgICAgIGIuc3RhdGVOb2RlID0gZTsKICAgICAgICAgIGUuX3JlYWN0SW50ZXJuYWxGaWJlciA9IGI7CiAgICAgICAgICBwZShiLCBkLCBhLCBjKTsKICAgICAgICAgIGIgPSBJZShudWxsLCBiLCBkLCAhMCwgZiwgYyk7CiAgICAgICAgfSBlbHNlIChiLnRhZyA9IDApLCBUKG51bGwsIGIsIGUsIGMpLCAoYiA9IGIuY2hpbGQpOwogICAgICAgIHJldHVybiBiOwogICAgICBjYXNlIDE2OgogICAgICAgIGE6IHsKICAgICAgICAgIGUgPSBiLmVsZW1lbnRUeXBlOwogICAgICAgICAgbnVsbCAhPT0gYSAmJgogICAgICAgICAgICAoKGEuYWx0ZXJuYXRlID0gbnVsbCksIChiLmFsdGVybmF0ZSA9IG51bGwpLCAoYi5lZmZlY3RUYWcgfD0gMikpOwogICAgICAgICAgYSA9IGIucGVuZGluZ1Byb3BzOwogICAgICAgICAgcmkoZSk7CiAgICAgICAgICBpZiAoMSAhPT0gZS5fc3RhdHVzKSB0aHJvdyBlLl9yZXN1bHQ7CiAgICAgICAgICBlID0gZS5fcmVzdWx0OwogICAgICAgICAgYi50eXBlID0gZTsKICAgICAgICAgIGYgPSBiLnRhZyA9IEdqKGUpOwogICAgICAgICAgYSA9IGFhKGUsIGEpOwogICAgICAgICAgc3dpdGNoIChmKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBiID0gSGUobnVsbCwgYiwgZSwgYSwgYyk7CiAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGIgPSByaChudWxsLCBiLCBlLCBhLCBjKTsKICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGIgPSBuaChudWxsLCBiLCBlLCBhLCBjKTsKICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGIgPSBvaChudWxsLCBiLCBlLCBhYShlLnR5cGUsIGEpLCBkLCBjKTsKICAgICAgICAgICAgICBicmVhayBhOwogICAgICAgICAgfQogICAgICAgICAgdGhyb3cgRXJyb3IoaygzMDYsIGUsICIiKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiOwogICAgICBjYXNlIDA6CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIChkID0gYi50eXBlKSwKICAgICAgICAgIChlID0gYi5wZW5kaW5nUHJvcHMpLAogICAgICAgICAgKGUgPSBiLmVsZW1lbnRUeXBlID09PSBkID8gZSA6IGFhKGQsIGUpKSwKICAgICAgICAgIEhlKGEsIGIsIGQsIGUsIGMpCiAgICAgICAgKTsKICAgICAgY2FzZSAxOgogICAgICAgIHJldHVybiAoCiAgICAgICAgICAoZCA9IGIudHlwZSksCiAgICAgICAgICAoZSA9IGIucGVuZGluZ1Byb3BzKSwKICAgICAgICAgIChlID0gYi5lbGVtZW50VHlwZSA9PT0gZCA/IGUgOiBhYShkLCBlKSksCiAgICAgICAgICByaChhLCBiLCBkLCBlLCBjKQogICAgICAgICk7CiAgICAgIGNhc2UgMzoKICAgICAgICBzaChiKTsKICAgICAgICBkID0gYi51cGRhdGVRdWV1ZTsKICAgICAgICBpZiAobnVsbCA9PT0gYSB8fCBudWxsID09PSBkKSB0aHJvdyBFcnJvcihrKDI4MikpOwogICAgICAgIGQgPSBiLnBlbmRpbmdQcm9wczsKICAgICAgICBlID0gYi5tZW1vaXplZFN0YXRlOwogICAgICAgIGUgPSBudWxsICE9PSBlID8gZS5lbGVtZW50IDogbnVsbDsKICAgICAgICBvZShhLCBiKTsKICAgICAgICBRYihiLCBkLCBudWxsLCBjKTsKICAgICAgICBkID0gYi5tZW1vaXplZFN0YXRlLmVsZW1lbnQ7CiAgICAgICAgaWYgKGQgPT09IGUpIEVlKCksIChiID0gc2EoYSwgYiwgYykpOwogICAgICAgIGVsc2UgewogICAgICAgICAgaWYgKChlID0gYi5zdGF0ZU5vZGUuaHlkcmF0ZSkpCiAgICAgICAgICAgIChLYSA9IGtiKGIuc3RhdGVOb2RlLmNvbnRhaW5lckluZm8uZmlyc3RDaGlsZCkpLAogICAgICAgICAgICAgIChyYSA9IGIpLAogICAgICAgICAgICAgIChlID0gV2EgPSAhMCk7CiAgICAgICAgICBpZiAoZSkKICAgICAgICAgICAgZm9yIChjID0gRmUoYiwgbnVsbCwgZCwgYyksIGIuY2hpbGQgPSBjOyBjOyApCiAgICAgICAgICAgICAgKGMuZWZmZWN0VGFnID0gKGMuZWZmZWN0VGFnICYgLTMpIHwgMTAyNCksIChjID0gYy5zaWJsaW5nKTsKICAgICAgICAgIGVsc2UgVChhLCBiLCBkLCBjKSwgRWUoKTsKICAgICAgICAgIGIgPSBiLmNoaWxkOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYjsKICAgICAgY2FzZSA1OgogICAgICAgIHJldHVybiAoCiAgICAgICAgICBiaChiKSwKICAgICAgICAgIG51bGwgPT09IGEgJiYgRGUoYiksCiAgICAgICAgICAoZCA9IGIudHlwZSksCiAgICAgICAgICAoZSA9IGIucGVuZGluZ1Byb3BzKSwKICAgICAgICAgIChmID0gbnVsbCAhPT0gYSA/IGEubWVtb2l6ZWRQcm9wcyA6IG51bGwpLAogICAgICAgICAgKGcgPSBlLmNoaWxkcmVuKSwKICAgICAgICAgIFlkKGQsIGUpID8gKGcgPSBudWxsKSA6IG51bGwgIT09IGYgJiYgWWQoZCwgZikgJiYgKGIuZWZmZWN0VGFnIHw9IDE2KSwKICAgICAgICAgIHFoKGEsIGIpLAogICAgICAgICAgYi5tb2RlICYgNCAmJiAxICE9PSBjICYmIGUuaGlkZGVuCiAgICAgICAgICAgID8gKChiLmV4cGlyYXRpb25UaW1lID0gYi5jaGlsZEV4cGlyYXRpb25UaW1lID0gMSksIChiID0gbnVsbCkpCiAgICAgICAgICAgIDogKFQoYSwgYiwgZywgYyksIChiID0gYi5jaGlsZCkpLAogICAgICAgICAgYgogICAgICAgICk7CiAgICAgIGNhc2UgNjoKICAgICAgICByZXR1cm4gbnVsbCA9PT0gYSAmJiBEZShiKSwgbnVsbDsKICAgICAgY2FzZSAxMzoKICAgICAgICByZXR1cm4gdGgoYSwgYiwgYyk7CiAgICAgIGNhc2UgNDoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgc2UoYiwgYi5zdGF0ZU5vZGUuY29udGFpbmVySW5mbyksCiAgICAgICAgICAoZCA9IGIucGVuZGluZ1Byb3BzKSwKICAgICAgICAgIG51bGwgPT09IGEgPyAoYi5jaGlsZCA9IHdiKGIsIG51bGwsIGQsIGMpKSA6IFQoYSwgYiwgZCwgYyksCiAgICAgICAgICBiLmNoaWxkCiAgICAgICAgKTsKICAgICAgY2FzZSAxMToKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKGQgPSBiLnR5cGUpLAogICAgICAgICAgKGUgPSBiLnBlbmRpbmdQcm9wcyksCiAgICAgICAgICAoZSA9IGIuZWxlbWVudFR5cGUgPT09IGQgPyBlIDogYWEoZCwgZSkpLAogICAgICAgICAgbmgoYSwgYiwgZCwgZSwgYykKICAgICAgICApOwogICAgICBjYXNlIDc6CiAgICAgICAgcmV0dXJuIFQoYSwgYiwgYi5wZW5kaW5nUHJvcHMsIGMpLCBiLmNoaWxkOwogICAgICBjYXNlIDg6CiAgICAgICAgcmV0dXJuIFQoYSwgYiwgYi5wZW5kaW5nUHJvcHMuY2hpbGRyZW4sIGMpLCBiLmNoaWxkOwogICAgICBjYXNlIDEyOgogICAgICAgIHJldHVybiBUKGEsIGIsIGIucGVuZGluZ1Byb3BzLmNoaWxkcmVuLCBjKSwgYi5jaGlsZDsKICAgICAgY2FzZSAxMDoKICAgICAgICBhOiB7CiAgICAgICAgICBkID0gYi50eXBlLl9jb250ZXh0OwogICAgICAgICAgZSA9IGIucGVuZGluZ1Byb3BzOwogICAgICAgICAgZyA9IGIubWVtb2l6ZWRQcm9wczsKICAgICAgICAgIGYgPSBlLnZhbHVlOwogICAgICAgICAgdmFyIGggPSBiLnR5cGUuX2NvbnRleHQ7CiAgICAgICAgICB5KEljLCBoLl9jdXJyZW50VmFsdWUpOwogICAgICAgICAgaC5fY3VycmVudFZhbHVlID0gZjsKICAgICAgICAgIGlmIChudWxsICE9PSBnKQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgKChoID0gZy52YWx1ZSksCiAgICAgICAgICAgICAgKGYgPSBRYShoLCBmKQogICAgICAgICAgICAgICAgPyAwCiAgICAgICAgICAgICAgICA6ICgiZnVuY3Rpb24iID09PSB0eXBlb2YgZC5fY2FsY3VsYXRlQ2hhbmdlZEJpdHMKICAgICAgICAgICAgICAgICAgICA/IGQuX2NhbGN1bGF0ZUNoYW5nZWRCaXRzKGgsIGYpCiAgICAgICAgICAgICAgICAgICAgOiAxMDczNzQxODIzKSB8IDApLAogICAgICAgICAgICAgIDAgPT09IGYpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlmIChnLmNoaWxkcmVuID09PSBlLmNoaWxkcmVuICYmICFHLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIGIgPSBzYShhLCBiLCBjKTsKICAgICAgICAgICAgICAgIGJyZWFrIGE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICBmb3IgKGggPSBiLmNoaWxkLCBudWxsICE9PSBoICYmIChoLnJldHVybiA9IGIpOyBudWxsICE9PSBoOyApIHsKICAgICAgICAgICAgICAgIHZhciBtID0gaC5kZXBlbmRlbmNpZXM7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbSkgewogICAgICAgICAgICAgICAgICBnID0gaC5jaGlsZDsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IG0uZmlyc3RDb250ZXh0OyBudWxsICE9PSBsOyApIHsKICAgICAgICAgICAgICAgICAgICBpZiAobC5jb250ZXh0ID09PSBkICYmIDAgIT09IChsLm9ic2VydmVkQml0cyAmIGYpKSB7CiAgICAgICAgICAgICAgICAgICAgICAxID09PSBoLnRhZyAmJgogICAgICAgICAgICAgICAgICAgICAgICAoKGwgPSBFYShjLCBudWxsKSksIChsLnRhZyA9IEpjKSwgRmEoaCwgbCkpOwogICAgICAgICAgICAgICAgICAgICAgaC5leHBpcmF0aW9uVGltZSA8IGMgJiYgKGguZXhwaXJhdGlvblRpbWUgPSBjKTsKICAgICAgICAgICAgICAgICAgICAgIGwgPSBoLmFsdGVybmF0ZTsKICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IGwgJiYKICAgICAgICAgICAgICAgICAgICAgICAgbC5leHBpcmF0aW9uVGltZSA8IGMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKGwuZXhwaXJhdGlvblRpbWUgPSBjKTsKICAgICAgICAgICAgICAgICAgICAgIFNnKGgucmV0dXJuLCBjKTsKICAgICAgICAgICAgICAgICAgICAgIG0uZXhwaXJhdGlvblRpbWUgPCBjICYmIChtLmV4cGlyYXRpb25UaW1lID0gYyk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbCA9IGwubmV4dDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgIGcgPQogICAgICAgICAgICAgICAgICAgIDEwID09PSBoLnRhZwogICAgICAgICAgICAgICAgICAgICAgPyBoLnR5cGUgPT09IGIudHlwZQogICAgICAgICAgICAgICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgOiBoLmNoaWxkCiAgICAgICAgICAgICAgICAgICAgICA6IGguY2hpbGQ7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZykgZy5yZXR1cm4gPSBoOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICBmb3IgKGcgPSBoOyBudWxsICE9PSBnOyApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZyA9PT0gYikgewogICAgICAgICAgICAgICAgICAgICAgZyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaCA9IGcuc2libGluZzsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gaCkgewogICAgICAgICAgICAgICAgICAgICAgaC5yZXR1cm4gPSBnLnJldHVybjsKICAgICAgICAgICAgICAgICAgICAgIGcgPSBoOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGcgPSBnLnJldHVybjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaCA9IGc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgVChhLCBiLCBlLmNoaWxkcmVuLCBjKTsKICAgICAgICAgIGIgPSBiLmNoaWxkOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYjsKICAgICAgY2FzZSA5OgogICAgICAgIHJldHVybiAoCiAgICAgICAgICAoZSA9IGIudHlwZSksCiAgICAgICAgICAoZiA9IGIucGVuZGluZ1Byb3BzKSwKICAgICAgICAgIChkID0gZi5jaGlsZHJlbiksCiAgICAgICAgICByYihiLCBjKSwKICAgICAgICAgIChlID0gVyhlLCBmLnVuc3RhYmxlX29ic2VydmVkQml0cykpLAogICAgICAgICAgKGQgPSBkKGUpKSwKICAgICAgICAgIChiLmVmZmVjdFRhZyB8PSAxKSwKICAgICAgICAgIFQoYSwgYiwgZCwgYyksCiAgICAgICAgICBiLmNoaWxkCiAgICAgICAgKTsKICAgICAgY2FzZSAxNDoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKGUgPSBiLnR5cGUpLAogICAgICAgICAgKGYgPSBhYShlLCBiLnBlbmRpbmdQcm9wcykpLAogICAgICAgICAgKGYgPSBhYShlLnR5cGUsIGYpKSwKICAgICAgICAgIG9oKGEsIGIsIGUsIGYsIGQsIGMpCiAgICAgICAgKTsKICAgICAgY2FzZSAxNToKICAgICAgICByZXR1cm4gcGgoYSwgYiwgYi50eXBlLCBiLnBlbmRpbmdQcm9wcywgZCwgYyk7CiAgICAgIGNhc2UgMTc6CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIChkID0gYi50eXBlKSwKICAgICAgICAgIChlID0gYi5wZW5kaW5nUHJvcHMpLAogICAgICAgICAgKGUgPSBiLmVsZW1lbnRUeXBlID09PSBkID8gZSA6IGFhKGQsIGUpKSwKICAgICAgICAgIG51bGwgIT09IGEgJiYKICAgICAgICAgICAgKChhLmFsdGVybmF0ZSA9IG51bGwpLCAoYi5hbHRlcm5hdGUgPSBudWxsKSwgKGIuZWZmZWN0VGFnIHw9IDIpKSwKICAgICAgICAgIChiLnRhZyA9IDEpLAogICAgICAgICAgTihkKSA/ICgoYSA9ICEwKSwgQmMoYikpIDogKGEgPSAhMSksCiAgICAgICAgICByYihiLCBjKSwKICAgICAgICAgIFlnKGIsIGQsIGUpLAogICAgICAgICAgcGUoYiwgZCwgZSwgYyksCiAgICAgICAgICBJZShudWxsLCBiLCBkLCAhMCwgYSwgYykKICAgICAgICApOwogICAgICBjYXNlIDE5OgogICAgICAgIHJldHVybiB2aChhLCBiLCBjKTsKICAgIH0KICAgIHRocm93IEVycm9yKGsoMTU2LCBiLnRhZykpOwogIH07CiAgdmFyIGJmID0gbnVsbCwKICAgIE5lID0gbnVsbCwKICAgIGxhID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsKICAgICAgcmV0dXJuIG5ldyBGaihhLCBiLCBjLCBkKTsKICAgIH07CiAgZWYucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChhKSB7CiAgICBtZChhLCB0aGlzLl9pbnRlcm5hbFJvb3QsIG51bGwsIG51bGwpOwogIH07CiAgZWYucHJvdG90eXBlLnVubW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYSA9IHRoaXMuX2ludGVybmFsUm9vdCwKICAgICAgYiA9IGEuY29udGFpbmVySW5mbzsKICAgIG1kKG51bGwsIGEsIG51bGwsIGZ1bmN0aW9uICgpIHsKICAgICAgYltMYl0gPSBudWxsOwogICAgfSk7CiAgfTsKICB2YXIgRGkgPSBmdW5jdGlvbiAoYSkgewogICAgaWYgKDEzID09PSBhLnRhZykgewogICAgICB2YXIgYiA9IEZjKGthKCksIDE1MCwgMTAwKTsKICAgICAgSmEoYSwgYik7CiAgICAgIGRmKGEsIGIpOwogICAgfQogIH07CiAgdmFyIFlmID0gZnVuY3Rpb24gKGEpIHsKICAgIDEzID09PSBhLnRhZyAmJiAoSmEoYSwgMyksIGRmKGEsIDMpKTsKICB9OwogIHZhciBCaSA9IGZ1bmN0aW9uIChhKSB7CiAgICBpZiAoMTMgPT09IGEudGFnKSB7CiAgICAgIHZhciBiID0ga2EoKTsKICAgICAgYiA9IFZhKGIsIGEsIG51bGwpOwogICAgICBKYShhLCBiKTsKICAgICAgZGYoYSwgYik7CiAgICB9CiAgfTsKICBzZCA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICBzd2l0Y2ggKGIpIHsKICAgICAgY2FzZSAiaW5wdXQiOgogICAgICAgIERkKGEsIGMpOwogICAgICAgIGIgPSBjLm5hbWU7CiAgICAgICAgaWYgKCJyYWRpbyIgPT09IGMudHlwZSAmJiBudWxsICE9IGIpIHsKICAgICAgICAgIGZvciAoYyA9IGE7IGMucGFyZW50Tm9kZTsgKSBjID0gYy5wYXJlbnROb2RlOwogICAgICAgICAgYyA9IGMucXVlcnlTZWxlY3RvckFsbCgKICAgICAgICAgICAgImlucHV0W25hbWU9IiArIEpTT04uc3RyaW5naWZ5KCIiICsgYikgKyAnXVt0eXBlPSJyYWRpbyJdJwogICAgICAgICAgKTsKICAgICAgICAgIGZvciAoYiA9IDA7IGIgPCBjLmxlbmd0aDsgYisrKSB7CiAgICAgICAgICAgIHZhciBkID0gY1tiXTsKICAgICAgICAgICAgaWYgKGQgIT09IGEgJiYgZC5mb3JtID09PSBhLmZvcm0pIHsKICAgICAgICAgICAgICB2YXIgZSA9IGFlKGQpOwogICAgICAgICAgICAgIGlmICghZSkgdGhyb3cgRXJyb3Ioayg5MCkpOwogICAgICAgICAgICAgIEdmKGQpOwogICAgICAgICAgICAgIERkKGQsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGJyZWFrOwogICAgICBjYXNlICJ0ZXh0YXJlYSI6CiAgICAgICAgTGYoYSwgYyk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgKGIgPSBjLnZhbHVlKSwgbnVsbCAhPSBiICYmIGhiKGEsICEhYy5tdWx0aXBsZSwgYiwgITEpOwogICAgfQogIH07CiAgKGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CiAgICBlZSA9IGE7CiAgICBlZyA9IGI7CiAgICB2ZCA9IGM7CiAgICB2ZiA9IGQ7CiAgfSkoCiAgICBRaCwKICAgIGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CiAgICAgIHZhciBmID0gcDsKICAgICAgcCB8PSA0OwogICAgICB0cnkgewogICAgICAgIHJldHVybiBEYSg5OCwgYS5iaW5kKG51bGwsIGIsIGMsIGQsIGUpKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAocCA9IGYpLCBwID09PSBIICYmIGhhKCk7CiAgICAgIH0KICAgIH0sCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIChwICYgKDEgfCBjYSB8IG1hKSkgPT09IEggJiYgKHVqKCksIHhiKCkpOwogICAgfSwKICAgIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHZhciBjID0gcDsKICAgICAgcCB8PSAyOwogICAgICB0cnkgewogICAgICAgIHJldHVybiBhKGIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIChwID0gYyksIHAgPT09IEggJiYgaGEoKTsKICAgICAgfQogICAgfQogICk7CiAgdmFyIG1rID0gewogICAgRXZlbnRzOiBbCiAgICAgIEhiLAogICAgICBQYSwKICAgICAgYWUsCiAgICAgIHBmLAogICAgICBxZCwKICAgICAgbGIsCiAgICAgIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgS2QoYSwgS2kpOwogICAgICB9LAogICAgICBzZiwKICAgICAgdGYsCiAgICAgIHNjLAogICAgICBwYywKICAgICAgeGIsCiAgICAgIHsgY3VycmVudDogITEgfSwKICAgIF0sCiAgfTsKICAoZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gYS5maW5kRmliZXJCeUhvc3RJbnN0YW5jZTsKICAgIHJldHVybiBFaigKICAgICAgTSh7fSwgYSwgewogICAgICAgIG92ZXJyaWRlSG9va1N0YXRlOiBudWxsLAogICAgICAgIG92ZXJyaWRlUHJvcHM6IG51bGwsCiAgICAgICAgc2V0U3VzcGVuc2VIYW5kbGVyOiBudWxsLAogICAgICAgIHNjaGVkdWxlVXBkYXRlOiBudWxsLAogICAgICAgIGN1cnJlbnREaXNwYXRjaGVyUmVmOiBkYS5SZWFjdEN1cnJlbnREaXNwYXRjaGVyLAogICAgICAgIGZpbmRIb3N0SW5zdGFuY2VCeUZpYmVyOiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgYSA9IFNmKGEpOwogICAgICAgICAgcmV0dXJuIG51bGwgPT09IGEgPyBudWxsIDogYS5zdGF0ZU5vZGU7CiAgICAgICAgfSwKICAgICAgICBmaW5kRmliZXJCeUhvc3RJbnN0YW5jZTogZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHJldHVybiBiID8gYihhKSA6IG51bGw7CiAgICAgICAgfSwKICAgICAgICBmaW5kSG9zdEluc3RhbmNlc0ZvclJlZnJlc2g6IG51bGwsCiAgICAgICAgc2NoZWR1bGVSZWZyZXNoOiBudWxsLAogICAgICAgIHNjaGVkdWxlUm9vdDogbnVsbCwKICAgICAgICBzZXRSZWZyZXNoSGFuZGxlcjogbnVsbCwKICAgICAgICBnZXRDdXJyZW50RmliZXI6IG51bGwsCiAgICAgIH0pCiAgICApOwogIH0pKHsKICAgIGZpbmRGaWJlckJ5SG9zdEluc3RhbmNlOiBCYiwKICAgIGJ1bmRsZVR5cGU6IDAsCiAgICB2ZXJzaW9uOiAiMTYuMTQuMCIsCiAgICByZW5kZXJlclBhY2thZ2VOYW1lOiAicmVhY3QtZG9tIiwKICB9KTsKICBJLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID0gbWs7CiAgSS5jcmVhdGVQb3J0YWwgPSBYaDsKICBJLmZpbmRET01Ob2RlID0gZnVuY3Rpb24gKGEpIHsKICAgIGlmIChudWxsID09IGEpIHJldHVybiBudWxsOwogICAgaWYgKDEgPT09IGEubm9kZVR5cGUpIHJldHVybiBhOwogICAgdmFyIGIgPSBhLl9yZWFjdEludGVybmFsRmliZXI7CiAgICBpZiAodm9pZCAwID09PSBiKSB7CiAgICAgIGlmICgiZnVuY3Rpb24iID09PSB0eXBlb2YgYS5yZW5kZXIpIHRocm93IEVycm9yKGsoMTg4KSk7CiAgICAgIHRocm93IEVycm9yKGsoMjY4LCBPYmplY3Qua2V5cyhhKSkpOwogICAgfQogICAgYSA9IFNmKGIpOwogICAgYSA9IG51bGwgPT09IGEgPyBudWxsIDogYS5zdGF0ZU5vZGU7CiAgICByZXR1cm4gYTsKICB9OwogIEkuZmx1c2hTeW5jID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGlmICgocCAmIChjYSB8IG1hKSkgIT09IEgpIHRocm93IEVycm9yKGsoMTg3KSk7CiAgICB2YXIgYyA9IHA7CiAgICBwIHw9IDE7CiAgICB0cnkgewogICAgICByZXR1cm4gRGEoOTksIGEuYmluZChudWxsLCBiKSk7CiAgICB9IGZpbmFsbHkgewogICAgICAocCA9IGMpLCBoYSgpOwogICAgfQogIH07CiAgSS5oeWRyYXRlID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgIGlmICghYmMoYikpIHRocm93IEVycm9yKGsoMjAwKSk7CiAgICByZXR1cm4gbmQobnVsbCwgYSwgYiwgITAsIGMpOwogIH07CiAgSS5yZW5kZXIgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgaWYgKCFiYyhiKSkgdGhyb3cgRXJyb3IoaygyMDApKTsKICAgIHJldHVybiBuZChudWxsLCBhLCBiLCAhMSwgYyk7CiAgfTsKICBJLnVubW91bnRDb21wb25lbnRBdE5vZGUgPSBmdW5jdGlvbiAoYSkgewogICAgaWYgKCFiYyhhKSkgdGhyb3cgRXJyb3Ioayg0MCkpOwogICAgcmV0dXJuIGEuX3JlYWN0Um9vdENvbnRhaW5lcgogICAgICA/IChSaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBuZChudWxsLCBudWxsLCBhLCAhMSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBhLl9yZWFjdFJvb3RDb250YWluZXIgPSBudWxsOwogICAgICAgICAgICBhW0xiXSA9IG51bGw7CiAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAhMCkKICAgICAgOiAhMTsKICB9OwogIEkudW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXMgPSBRaDsKICBJLnVuc3RhYmxlX2NyZWF0ZVBvcnRhbCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gWGgoCiAgICAgIGEsCiAgICAgIGIsCiAgICAgIDIgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdID8gYXJndW1lbnRzWzJdIDogbnVsbAogICAgKTsKICB9OwogIEkudW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIgPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgewogICAgaWYgKCFiYyhjKSkgdGhyb3cgRXJyb3IoaygyMDApKTsKICAgIGlmIChudWxsID09IGEgfHwgdm9pZCAwID09PSBhLl9yZWFjdEludGVybmFsRmliZXIpIHRocm93IEVycm9yKGsoMzgpKTsKICAgIHJldHVybiBuZChhLCBiLCBjLCAhMSwgZCk7CiAgfTsKICBJLnZlcnNpb24gPSAiMTYuMTQuMCI7Cn0pOwoKIShmdW5jdGlvbiAoKSB7CiAgInVzZSBzdHJpY3QiOwogIHZhciBmID0ge30uaGFzT3duUHJvcGVydHk7CgogIGZ1bmN0aW9uIHMoKSB7CiAgICBmb3IgKHZhciBlID0gW10sIHQgPSAwOyB0IDwgYXJndW1lbnRzLmxlbmd0aDsgdCsrKSB7CiAgICAgIHZhciBuID0gYXJndW1lbnRzW3RdOwogICAgICBpZiAobikgewogICAgICAgIHZhciByLAogICAgICAgICAgbyA9IHR5cGVvZiBuOwogICAgICAgIGlmICgic3RyaW5nIiA9PSBvIHx8ICJudW1iZXIiID09IG8pIGUucHVzaChuKTsKICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG4pKQogICAgICAgICAgIW4ubGVuZ3RoIHx8ICgociA9IHMuYXBwbHkobnVsbCwgbikpICYmIGUucHVzaChyKSk7CiAgICAgICAgZWxzZSBpZiAoIm9iamVjdCIgPT0gbykKICAgICAgICAgIGlmIChuLnRvU3RyaW5nID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKQogICAgICAgICAgICBmb3IgKHZhciBpIGluIG4pIGYuY2FsbChuLCBpKSAmJiBuW2ldICYmIGUucHVzaChpKTsKICAgICAgICAgIGVsc2UgZS5wdXNoKG4udG9TdHJpbmcoKSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBlLmpvaW4oIiAiKTsKICB9CgogICJ1bmRlZmluZWQiICE9IHR5cGVvZiBtb2R1bGUgJiYgbW9kdWxlLmV4cG9ydHMKICAgID8gKG1vZHVsZS5leHBvcnRzID0gcy5kZWZhdWx0ID0gcykKICAgIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmICJvYmplY3QiID09IHR5cGVvZiBkZWZpbmUuYW1kICYmIGRlZmluZS5hbWQKICAgID8gZGVmaW5lKCJjbGFzc25hbWVzIiwgW10sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gczsKICAgICAgfSkKICAgIDogKHdpbmRvdy5jbGFzc05hbWVzID0gcyk7Cn0pKCk7CiEoZnVuY3Rpb24gKGYpIHsKICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIGV4cG9ydHMgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIG1vZHVsZSkKICAgIG1vZHVsZS5leHBvcnRzID0gZigpOwogIGVsc2UgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kKSBkZWZpbmUoW10sIGYpOwogIGVsc2UgewogICAgdmFyIGc7CiAgICAoZyA9CiAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cKICAgICAgICA/IHdpbmRvdwogICAgICAgIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIGdsb2JhbAogICAgICAgID8gZ2xvYmFsCiAgICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygc2VsZgogICAgICAgID8gc2VsZgogICAgICAgIDogdGhpcyksCiAgICAgIChnLlByb3BUeXBlcyA9IGYoKSk7CiAgfQp9KShmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIChmdW5jdGlvbiBlKHQsIG4sIHIpIHsKICAgIGZ1bmN0aW9uIHMobywgdSkgewogICAgICBpZiAoIW5bb10pIHsKICAgICAgICBpZiAoIXRbb10pIHsKICAgICAgICAgIHZhciBhID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgcmVxdWlyZSAmJiByZXF1aXJlOwogICAgICAgICAgaWYgKCF1ICYmIGEpIHJldHVybiBhKG8sICEwKTsKICAgICAgICAgIGlmIChpKSByZXR1cm4gaShvLCAhMCk7CiAgICAgICAgICB2YXIgZiA9IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciICsgbyArICInIik7CiAgICAgICAgICB0aHJvdyAoKGYuY29kZSA9ICJNT0RVTEVfTk9UX0ZPVU5EIiksIGYpOwogICAgICAgIH0KICAgICAgICB2YXIgbCA9IChuW29dID0geyBleHBvcnRzOiB7fSB9KTsKICAgICAgICB0W29dWzBdLmNhbGwoCiAgICAgICAgICBsLmV4cG9ydHMsCiAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgbiA9IHRbb11bMV1bZV07CiAgICAgICAgICAgIHJldHVybiBzKG4gfHwgZSk7CiAgICAgICAgICB9LAogICAgICAgICAgbCwKICAgICAgICAgIGwuZXhwb3J0cywKICAgICAgICAgIGUsCiAgICAgICAgICB0LAogICAgICAgICAgbiwKICAgICAgICAgIHIKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiBuW29dLmV4cG9ydHM7CiAgICB9CgogICAgZm9yICgKICAgICAgdmFyIGkgPSAiZnVuY3Rpb24iID09IHR5cGVvZiByZXF1aXJlICYmIHJlcXVpcmUsIG8gPSAwOwogICAgICBvIDwgci5sZW5ndGg7CiAgICAgIG8rKwogICAgKQogICAgICBzKHJbb10pOwogICAgcmV0dXJuIHM7CiAgfSkoCiAgICB7CiAgICAgIDE6IFsKICAgICAgICBmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICAgICAidXNlIHN0cmljdCI7CgogICAgICAgICAgZnVuY3Rpb24gZW1wdHlGdW5jdGlvbigpIHt9CgogICAgICAgICAgZnVuY3Rpb24gZW1wdHlGdW5jdGlvbldpdGhSZXNldCgpIHt9CgogICAgICAgICAgdmFyIFJlYWN0UHJvcFR5cGVzU2VjcmV0ID0gcmVxdWlyZSgzKTsKICAgICAgICAgIChlbXB0eUZ1bmN0aW9uV2l0aFJlc2V0LnJlc2V0V2FybmluZ0NhY2hlID0gZW1wdHlGdW5jdGlvbiksCiAgICAgICAgICAgIChtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBmdW5jdGlvbiBlKGUsIHQsIG4sIHIsIG8sIHApIHsKICAgICAgICAgICAgICAgIGlmIChwICE9PSBSZWFjdFByb3BUeXBlc1NlY3JldCkgewogICAgICAgICAgICAgICAgICB2YXIgYyA9IG5ldyBFcnJvcigKICAgICAgICAgICAgICAgICAgICAiQ2FsbGluZyBQcm9wVHlwZXMgdmFsaWRhdG9ycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gVXNlIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpIHRvIGNhbGwgdGhlbS4gUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcyIKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgdGhyb3cgKChjLm5hbWUgPSAiSW52YXJpYW50IFZpb2xhdGlvbiIpLCBjKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGUuaXNSZXF1aXJlZCA9IGU7CiAgICAgICAgICAgICAgdmFyIG4gPSB7CiAgICAgICAgICAgICAgICBhcnJheTogZSwKICAgICAgICAgICAgICAgIGJvb2w6IGUsCiAgICAgICAgICAgICAgICBmdW5jOiBlLAogICAgICAgICAgICAgICAgbnVtYmVyOiBlLAogICAgICAgICAgICAgICAgb2JqZWN0OiBlLAogICAgICAgICAgICAgICAgc3RyaW5nOiBlLAogICAgICAgICAgICAgICAgc3ltYm9sOiBlLAogICAgICAgICAgICAgICAgYW55OiBlLAogICAgICAgICAgICAgICAgYXJyYXlPZjogdCwKICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUsCiAgICAgICAgICAgICAgICBlbGVtZW50VHlwZTogZSwKICAgICAgICAgICAgICAgIGluc3RhbmNlT2Y6IHQsCiAgICAgICAgICAgICAgICBub2RlOiBlLAogICAgICAgICAgICAgICAgb2JqZWN0T2Y6IHQsCiAgICAgICAgICAgICAgICBvbmVPZjogdCwKICAgICAgICAgICAgICAgIG9uZU9mVHlwZTogdCwKICAgICAgICAgICAgICAgIHNoYXBlOiB0LAogICAgICAgICAgICAgICAgZXhhY3Q6IHQsCiAgICAgICAgICAgICAgICBjaGVja1Byb3BUeXBlczogZW1wdHlGdW5jdGlvbldpdGhSZXNldCwKICAgICAgICAgICAgICAgIHJlc2V0V2FybmluZ0NhY2hlOiBlbXB0eUZ1bmN0aW9uLAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmV0dXJuIChuLlByb3BUeXBlcyA9IG4pLCBuOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHsgMzogMyB9LAogICAgICBdLAogICAgICAyOiBbCiAgICAgICAgZnVuY3Rpb24gKHJlcXVpcmUsIG1vZHVsZSwgZXhwb3J0cykgewogICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKDEpKCk7CiAgICAgICAgfSwKICAgICAgICB7IDE6IDEgfSwKICAgICAgXSwKICAgICAgMzogWwogICAgICAgIGZ1bmN0aW9uIChyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gIlNFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEIjsKICAgICAgICB9LAogICAgICAgIHt9LAogICAgICBdLAogICAgfSwKICAgIHt9LAogICAgWzJdCiAgKSgyKTsKfSk7CiEoZnVuY3Rpb24gKHIsIHQpIHsKICAib2JqZWN0IiA9PSB0eXBlb2YgZXhwb3J0cyAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbW9kdWxlCiAgICA/IHQoZXhwb3J0cykKICAgIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQKICAgID8gZGVmaW5lKFsiZXhwb3J0cyJdLCB0KQogICAgOiB0KAogICAgICAgICgociA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWxUaGlzID8gZ2xvYmFsVGhpcyA6IHIgfHwgc2VsZikuUmVkdXggPQogICAgICAgICAge30pCiAgICAgICk7Cn0pKHRoaXMsIGZ1bmN0aW9uIChyKSB7CiAgInVzZSBzdHJpY3QiOwoKICBmdW5jdGlvbiB0KHIpIHsKICAgIHJldHVybiAoCiAgICAgICJNaW5pZmllZCBSZWR1eCBlcnJvciAjIiArCiAgICAgIHIgKwogICAgICAiOyB2aXNpdCBodHRwczovL3JlZHV4LmpzLm9yZy9FcnJvcnM/Y29kZT0iICsKICAgICAgciArCiAgICAgICIgZm9yIHRoZSBmdWxsIG1lc3NhZ2Ugb3IgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50IGZvciBmdWxsIGVycm9ycy4gIgogICAgKTsKICB9CgogIHZhciBlID0gKCJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiBTeW1ib2wub2JzZXJ2YWJsZSkgfHwgIkBAb2JzZXJ2YWJsZSIsCiAgICBuID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpLnNwbGl0KCIiKS5qb2luKCIuIik7CiAgICB9LAogICAgbyA9IHsKICAgICAgSU5JVDogIkBAcmVkdXgvSU5JVCIgKyBuKCksCiAgICAgIFJFUExBQ0U6ICJAQHJlZHV4L1JFUExBQ0UiICsgbigpLAogICAgICBQUk9CRV9VTktOT1dOX0FDVElPTjogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAiQEByZWR1eC9QUk9CRV9VTktOT1dOX0FDVElPTiIgKyBuKCk7CiAgICAgIH0sCiAgICB9OwoKICBmdW5jdGlvbiBpKHIpIHsKICAgIGlmICgib2JqZWN0IiAhPSB0eXBlb2YgciB8fCBudWxsID09PSByKSByZXR1cm4gITE7CiAgICBmb3IgKHZhciB0ID0gcjsgbnVsbCAhPT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpOyApCiAgICAgIHQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7CiAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHIpID09PSB0OwogIH0KCiAgZnVuY3Rpb24gZihyLCB0KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdChyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHUociwgdCwgZSkgewogICAgcmV0dXJuICgKICAgICAgdCBpbiByCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgdCwgewogICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgIH0pCiAgICAgICAgOiAoclt0XSA9IGUpLAogICAgICByCiAgICApOwogIH0KCiAgZnVuY3Rpb24gYyhyLCB0KSB7CiAgICB2YXIgZSA9IE9iamVjdC5rZXlzKHIpOwogICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgdmFyIG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHIpOwogICAgICB0ICYmCiAgICAgICAgKG4gPSBuLmZpbHRlcihmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IociwgdCkuZW51bWVyYWJsZTsKICAgICAgICB9KSksCiAgICAgICAgZS5wdXNoLmFwcGx5KGUsIG4pOwogICAgfQogICAgcmV0dXJuIGU7CiAgfQoKICBmdW5jdGlvbiBwKHIpIHsKICAgIGZvciAodmFyIHQgPSAxOyBhcmd1bWVudHMubGVuZ3RoID4gdDsgdCsrKSB7CiAgICAgIHZhciBlID0gbnVsbCAhPSBhcmd1bWVudHNbdF0gPyBhcmd1bWVudHNbdF0gOiB7fTsKICAgICAgdCAlIDIKICAgICAgICA/IGMoT2JqZWN0KGUpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICB1KHIsIHQsIGVbdF0pOwogICAgICAgICAgfSkKICAgICAgICA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhyLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhlKSkKICAgICAgICA6IGMoT2JqZWN0KGUpKS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCB0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpKTsKICAgICAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIHI7CiAgfQoKICBmdW5jdGlvbiBhKCkgewogICAgZm9yICh2YXIgciA9IGFyZ3VtZW50cy5sZW5ndGgsIHQgPSBBcnJheShyKSwgZSA9IDA7IHIgPiBlOyBlKyspCiAgICAgIHRbZV0gPSBhcmd1bWVudHNbZV07CiAgICByZXR1cm4gMCA9PT0gdC5sZW5ndGgKICAgICAgPyBmdW5jdGlvbiAocikgewogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICA6IDEgPT09IHQubGVuZ3RoCiAgICAgID8gdFswXQogICAgICA6IHQucmVkdWNlKGZ1bmN0aW9uIChyLCB0KSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcih0LmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKSk7CiAgICAgICAgICB9OwogICAgICAgIH0pOwogIH0KCiAgKHIuX19ET19OT1RfVVNFX19BY3Rpb25UeXBlcyA9IG8pLAogICAgKHIuYXBwbHlNaWRkbGV3YXJlID0gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciByID0gYXJndW1lbnRzLmxlbmd0aCwgZSA9IEFycmF5KHIpLCBuID0gMDsgciA+IG47IG4rKykKICAgICAgICBlW25dID0gYXJndW1lbnRzW25dOwogICAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIG4gPSByLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKSwKICAgICAgICAgICAgbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB0aHJvdyBFcnJvcih0KDE1KSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGkgPSB7CiAgICAgICAgICAgICAgZ2V0U3RhdGU6IG4uZ2V0U3RhdGUsCiAgICAgICAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBvLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBmID0gZS5tYXAoZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICByZXR1cm4gcihpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAobyA9IGEuYXBwbHkodm9pZCAwLCBmKShuLmRpc3BhdGNoKSksCiAgICAgICAgICAgIHAocCh7fSwgbiksIHt9LCB7IGRpc3BhdGNoOiBvIH0pCiAgICAgICAgICApOwogICAgICAgIH07CiAgICAgIH07CiAgICB9KSwKICAgIChyLmJpbmRBY3Rpb25DcmVhdG9ycyA9IGZ1bmN0aW9uIChyLCBlKSB7CiAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiByKSByZXR1cm4gZihyLCBlKTsKICAgICAgaWYgKCJvYmplY3QiICE9IHR5cGVvZiByIHx8IG51bGwgPT09IHIpIHRocm93IEVycm9yKHQoMTYpKTsKICAgICAgdmFyIG4gPSB7fTsKICAgICAgZm9yICh2YXIgbyBpbiByKSB7CiAgICAgICAgdmFyIGkgPSByW29dOwogICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGkgJiYgKG5bb10gPSBmKGksIGUpKTsKICAgICAgfQogICAgICByZXR1cm4gbjsKICAgIH0pLAogICAgKHIuY29tYmluZVJlZHVjZXJzID0gZnVuY3Rpb24gKHIpIHsKICAgICAgZm9yICh2YXIgZSA9IE9iamVjdC5rZXlzKHIpLCBuID0ge30sIGkgPSAwOyBlLmxlbmd0aCA+IGk7IGkrKykgewogICAgICAgIHZhciBmID0gZVtpXTsKICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiByW2ZdICYmIChuW2ZdID0gcltmXSk7CiAgICAgIH0KICAgICAgdmFyIHUsCiAgICAgICAgYyA9IE9iamVjdC5rZXlzKG4pOwogICAgICB0cnkgewogICAgICAgICEoZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIE9iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIG4gPSByW2VdOwogICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKHZvaWQgMCwgeyB0eXBlOiBvLklOSVQgfSkpIHRocm93IEVycm9yKHQoMTIpKTsKICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbih2b2lkIDAsIHsgdHlwZTogby5QUk9CRV9VTktOT1dOX0FDVElPTigpIH0pKQogICAgICAgICAgICAgIHRocm93IEVycm9yKHQoMTMpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pKG4pOwogICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgdSA9IHI7CiAgICAgIH0KICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyLCBlKSB7CiAgICAgICAgaWYgKCh2b2lkIDAgPT09IHIgJiYgKHIgPSB7fSksIHUpKSB0aHJvdyB1OwogICAgICAgIGZvciAodmFyIG8gPSAhMSwgaSA9IHt9LCBmID0gMDsgYy5sZW5ndGggPiBmOyBmKyspIHsKICAgICAgICAgIHZhciBwID0gY1tmXSwKICAgICAgICAgICAgYSA9IHJbcF0sCiAgICAgICAgICAgIGwgPSAoMCwgbltwXSkoYSwgZSk7CiAgICAgICAgICBpZiAodm9pZCAwID09PSBsKSB0aHJvdyBFcnJvcih0KDE0KSk7CiAgICAgICAgICAoaVtwXSA9IGwpLCAobyA9IG8gfHwgbCAhPT0gYSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAobyA9IG8gfHwgYy5sZW5ndGggIT09IE9iamVjdC5rZXlzKHIpLmxlbmd0aCkgPyBpIDogcjsKICAgICAgfTsKICAgIH0pLAogICAgKHIuY29tcG9zZSA9IGEpLAogICAgKHIuY3JlYXRlU3RvcmUgPSBmdW5jdGlvbiByKG4sIGYsIHUpIHsKICAgICAgdmFyIGM7CiAgICAgIGlmICgKICAgICAgICAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgZiAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiB1KSB8fAogICAgICAgICgiZnVuY3Rpb24iID09IHR5cGVvZiB1ICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGFyZ3VtZW50c1szXSkKICAgICAgKQogICAgICAgIHRocm93IEVycm9yKHQoMCkpOwogICAgICBpZiAoCiAgICAgICAgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGYgJiYgdm9pZCAwID09PSB1ICYmICgodSA9IGYpLCAoZiA9IHZvaWQgMCkpLAogICAgICAgIHZvaWQgMCAhPT0gdSkKICAgICAgKSB7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHUpIHRocm93IEVycm9yKHQoMSkpOwogICAgICAgIHJldHVybiB1KHIpKG4sIGYpOwogICAgICB9CiAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBuKSB0aHJvdyBFcnJvcih0KDIpKTsKICAgICAgdmFyIHAgPSBuLAogICAgICAgIGEgPSBmLAogICAgICAgIGwgPSBbXSwKICAgICAgICB5ID0gbCwKICAgICAgICBzID0gITE7CgogICAgICBmdW5jdGlvbiBkKCkgewogICAgICAgIHkgPT09IGwgJiYgKHkgPSBsLnNsaWNlKCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBiKCkgewogICAgICAgIGlmIChzKSB0aHJvdyBFcnJvcih0KDMpKTsKICAgICAgICByZXR1cm4gYTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gaChyKSB7CiAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIHIpIHRocm93IEVycm9yKHQoNCkpOwogICAgICAgIGlmIChzKSB0aHJvdyBFcnJvcih0KDUpKTsKICAgICAgICB2YXIgZSA9ICEwOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICBkKCksCiAgICAgICAgICB5LnB1c2gociksCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgaWYgKHMpIHRocm93IEVycm9yKHQoNikpOwogICAgICAgICAgICAgIChlID0gITEpLCBkKCk7CiAgICAgICAgICAgICAgdmFyIG4gPSB5LmluZGV4T2Yocik7CiAgICAgICAgICAgICAgeS5zcGxpY2UobiwgMSksIChsID0gbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApOwogICAgICB9CgogICAgICBmdW5jdGlvbiB2KHIpIHsKICAgICAgICBpZiAoIWkocikpIHRocm93IEVycm9yKHQoNykpOwogICAgICAgIGlmICh2b2lkIDAgPT09IHIudHlwZSkgdGhyb3cgRXJyb3IodCg4KSk7CiAgICAgICAgaWYgKHMpIHRocm93IEVycm9yKHQoOSkpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAocyA9ICEwKSwgKGEgPSBwKGEsIHIpKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgcyA9ICExOwogICAgICAgIH0KICAgICAgICBmb3IgKHZhciBlID0gKGwgPSB5KSwgbiA9IDA7IGUubGVuZ3RoID4gbjsgbisrKSB7CiAgICAgICAgICAoMCwgZVtuXSkoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHI7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIE8ocikgewogICAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiByKSB0aHJvdyBFcnJvcih0KDEwKSk7CiAgICAgICAgKHAgPSByKSwgdih7IHR5cGU6IG8uUkVQTEFDRSB9KTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gRSgpIHsKICAgICAgICB2YXIgciwKICAgICAgICAgIG4gPSBoOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICAoKHIgPSB7CiAgICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICBpZiAoIm9iamVjdCIgIT0gdHlwZW9mIHIgfHwgbnVsbCA9PT0gcikgdGhyb3cgRXJyb3IodCgxMSkpOwoKICAgICAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgICAgICAgci5uZXh0ICYmIHIubmV4dChiKCkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIGUoKSwgeyB1bnN1YnNjcmliZTogbihlKSB9OwogICAgICAgICAgICB9LAogICAgICAgICAgfSlbZV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgfSksCiAgICAgICAgICByCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgcmV0dXJuICgKICAgICAgICB2KHsgdHlwZTogby5JTklUIH0pLAogICAgICAgICgoYyA9IHsgZGlzcGF0Y2g6IHYsIHN1YnNjcmliZTogaCwgZ2V0U3RhdGU6IGIsIHJlcGxhY2VSZWR1Y2VyOiBPIH0pWwogICAgICAgICAgZQogICAgICAgIF0gPSBFKSwKICAgICAgICBjCiAgICAgICk7CiAgICB9KSwKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6ICEwIH0pOwp9KTsKCiEoZnVuY3Rpb24gKGUsIHQpIHsKICAib2JqZWN0IiA9PSB0eXBlb2YgZXhwb3J0cyAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbW9kdWxlCiAgICA/IHQoZXhwb3J0cywgcmVxdWlyZSgicmVhY3QiKSwgcmVxdWlyZSgicmVhY3QtZG9tIikpCiAgICA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICA/IGRlZmluZShbImV4cG9ydHMiLCAicmVhY3QiLCAicmVhY3QtZG9tIl0sIHQpCiAgICA6IHQoCiAgICAgICAgKChlID0KICAgICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWxUaGlzCiAgICAgICAgICAgID8gZ2xvYmFsVGhpcwogICAgICAgICAgICA6IGUgfHwgc2VsZikuUmVhY3RSZWR1eCA9IHt9KSwKICAgICAgICBlLlJlYWN0LAogICAgICAgIGUuUmVhY3RET00KICAgICAgKTsKfSkodGhpcywgZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIG4oZSkgewogICAgcmV0dXJuIGUgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgImRlZmF1bHQiIGluIGUgPyBlIDogeyBkZWZhdWx0OiBlIH07CiAgfQoKICB2YXIgbyA9IG4odCk7CgogIGZ1bmN0aW9uIHUoZSwgdCwgcikgewogICAgcmV0dXJuICgKICAgICAgZSgKICAgICAgICAociA9IHsKICAgICAgICAgIHBhdGg6IHQsCiAgICAgICAgICBleHBvcnRzOiB7fSwKICAgICAgICAgIHJlcXVpcmU6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHRocm93IEVycm9yKAogICAgICAgICAgICAgICAgIkR5bmFtaWMgcmVxdWlyZXMgYXJlIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IEByb2xsdXAvcGx1Z2luLWNvbW1vbmpzIgogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9LAogICAgICAgIH0pLAogICAgICAgIHIuZXhwb3J0cwogICAgICApLAogICAgICByLmV4cG9ydHMKICAgICk7CiAgfQoKICBmdW5jdGlvbiBhKCkge30KCiAgZnVuY3Rpb24gaSgpIHt9CgogIGkucmVzZXRXYXJuaW5nQ2FjaGUgPSBhOwogIHUoZnVuY3Rpb24gKGUpIHsKICAgIGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7CiAgICAgIGZ1bmN0aW9uIGUoZSwgdCwgciwgbiwgbywgdSkgewogICAgICAgIGlmICgiU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQiICE9PSB1KSB7CiAgICAgICAgICB2YXIgYSA9IEVycm9yKAogICAgICAgICAgICAiQ2FsbGluZyBQcm9wVHlwZXMgdmFsaWRhdG9ycyBkaXJlY3RseSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBgcHJvcC10eXBlc2AgcGFja2FnZS4gVXNlIFByb3BUeXBlcy5jaGVja1Byb3BUeXBlcygpIHRvIGNhbGwgdGhlbS4gUmVhZCBtb3JlIGF0IGh0dHA6Ly9mYi5tZS91c2UtY2hlY2stcHJvcC10eXBlcyIKICAgICAgICAgICk7CiAgICAgICAgICB0aHJvdyAoKGEubmFtZSA9ICJJbnZhcmlhbnQgVmlvbGF0aW9uIiksIGEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gdCgpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfQoKICAgICAgZS5pc1JlcXVpcmVkID0gZTsKICAgICAgdmFyIHIgPSB7CiAgICAgICAgYXJyYXk6IGUsCiAgICAgICAgYm9vbDogZSwKICAgICAgICBmdW5jOiBlLAogICAgICAgIG51bWJlcjogZSwKICAgICAgICBvYmplY3Q6IGUsCiAgICAgICAgc3RyaW5nOiBlLAogICAgICAgIHN5bWJvbDogZSwKICAgICAgICBhbnk6IGUsCiAgICAgICAgYXJyYXlPZjogdCwKICAgICAgICBlbGVtZW50OiBlLAogICAgICAgIGVsZW1lbnRUeXBlOiBlLAogICAgICAgIGluc3RhbmNlT2Y6IHQsCiAgICAgICAgbm9kZTogZSwKICAgICAgICBvYmplY3RPZjogdCwKICAgICAgICBvbmVPZjogdCwKICAgICAgICBvbmVPZlR5cGU6IHQsCiAgICAgICAgc2hhcGU6IHQsCiAgICAgICAgZXhhY3Q6IHQsCiAgICAgICAgY2hlY2tQcm9wVHlwZXM6IGksCiAgICAgICAgcmVzZXRXYXJuaW5nQ2FjaGU6IGEsCiAgICAgIH07CiAgICAgIHJldHVybiAoci5Qcm9wVHlwZXMgPSByKSwgcjsKICAgIH0pKCk7CiAgfSk7CiAgdmFyIGMgPSBvLmRlZmF1bHQuY3JlYXRlQ29udGV4dChudWxsKTsKICB2YXIgcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGUoKTsKICAgIH0sCiAgICBmID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gczsKICAgIH0sCiAgICBwID0gewogICAgICBub3RpZnk6IGZ1bmN0aW9uICgpIHt9LAogICAgfTsKICB2YXIgbCA9IChmdW5jdGlvbiAoKSB7CiAgICAgIGZ1bmN0aW9uIGUoZSwgdCkgewogICAgICAgICh0aGlzLnN0b3JlID0gZSksCiAgICAgICAgICAodGhpcy5wYXJlbnRTdWIgPSB0KSwKICAgICAgICAgICh0aGlzLnVuc3Vic2NyaWJlID0gbnVsbCksCiAgICAgICAgICAodGhpcy5saXN0ZW5lcnMgPSBwKSwKICAgICAgICAgICh0aGlzLmhhbmRsZUNoYW5nZVdyYXBwZXIgPSB0aGlzLmhhbmRsZUNoYW5nZVdyYXBwZXIuYmluZCh0aGlzKSk7CiAgICAgIH0KCiAgICAgIHZhciB0ID0gZS5wcm90b3R5cGU7CiAgICAgIHJldHVybiAoCiAgICAgICAgKHQuYWRkTmVzdGVkU3ViID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnRyeVN1YnNjcmliZSgpLCB0aGlzLmxpc3RlbmVycy5zdWJzY3JpYmUoZSk7CiAgICAgICAgfSksCiAgICAgICAgKHQubm90aWZ5TmVzdGVkU3VicyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMubGlzdGVuZXJzLm5vdGlmeSgpOwogICAgICAgIH0pLAogICAgICAgICh0LmhhbmRsZUNoYW5nZVdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UgJiYgdGhpcy5vblN0YXRlQ2hhbmdlKCk7CiAgICAgICAgfSksCiAgICAgICAgKHQuaXNTdWJzY3JpYmVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuICEhdGhpcy51bnN1YnNjcmliZTsKICAgICAgICB9KSwKICAgICAgICAodC50cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlIHx8CiAgICAgICAgICAgICgodGhpcy51bnN1YnNjcmliZSA9IHRoaXMucGFyZW50U3ViCiAgICAgICAgICAgICAgPyB0aGlzLnBhcmVudFN1Yi5hZGROZXN0ZWRTdWIodGhpcy5oYW5kbGVDaGFuZ2VXcmFwcGVyKQogICAgICAgICAgICAgIDogdGhpcy5zdG9yZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVDaGFuZ2VXcmFwcGVyKSksCiAgICAgICAgICAgICh0aGlzLmxpc3RlbmVycyA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGUgPSBmKCksCiAgICAgICAgICAgICAgICB0ID0gbnVsbCwKICAgICAgICAgICAgICAgIHIgPSBudWxsOwogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAodCA9IG51bGwpLCAociA9IG51bGwpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5vdGlmeTogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBlKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdDsgZTsgKSBlLmNhbGxiYWNrKCksIChlID0gZS5uZXh0KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgciA9IHQ7IHI7ICkgZS5wdXNoKHIpLCAociA9IHIubmV4dCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgdmFyIG4gPSAhMCwKICAgICAgICAgICAgICAgICAgICBvID0gKHIgPSB7IGNhbGxiYWNrOiBlLCBuZXh0OiBudWxsLCBwcmV2OiByIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIG8ucHJldiA/IChvLnByZXYubmV4dCA9IG8pIDogKHQgPSBvKSwKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBuICYmCiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgKChuID0gITEpLAogICAgICAgICAgICAgICAgICAgICAgICBvLm5leHQgPyAoby5uZXh0LnByZXYgPSBvLnByZXYpIDogKHIgPSBvLnByZXYpLAogICAgICAgICAgICAgICAgICAgICAgICBvLnByZXYgPyAoby5wcmV2Lm5leHQgPSBvLm5leHQpIDogKHQgPSBvLm5leHQpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pKCkpKTsKICAgICAgICB9KSwKICAgICAgICAodC50cnlVbnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUgJiYKICAgICAgICAgICAgKHRoaXMudW5zdWJzY3JpYmUoKSwKICAgICAgICAgICAgKHRoaXMudW5zdWJzY3JpYmUgPSBudWxsKSwKICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuY2xlYXIoKSwKICAgICAgICAgICAgKHRoaXMubGlzdGVuZXJzID0gcCkpOwogICAgICAgIH0pLAogICAgICAgIGUKICAgICAgKTsKICAgIH0pKCksCiAgICBkID0KICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJgogICAgICB2b2lkIDAgIT09IHdpbmRvdy5kb2N1bWVudCAmJgogICAgICB2b2lkIDAgIT09IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50CiAgICAgICAgPyB0LnVzZUxheW91dEVmZmVjdAogICAgICAgIDogdC51c2VFZmZlY3Q7CgogIGZ1bmN0aW9uIHkoKSB7CiAgICByZXR1cm4gKHkgPQogICAgICBPYmplY3QuYXNzaWduIHx8CiAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IDE7IGFyZ3VtZW50cy5sZW5ndGggPiB0OyB0KyspIHsKICAgICAgICAgIHZhciByID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgZm9yICh2YXIgbiBpbiByKQogICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwociwgbikgJiYgKGVbbl0gPSByW25dKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH0pLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICBmdW5jdGlvbiB2KGUsIHQpIHsKICAgIGlmIChudWxsID09IGUpIHJldHVybiB7fTsKICAgIHZhciByLAogICAgICBuLAogICAgICBvID0ge30sCiAgICAgIHUgPSBPYmplY3Qua2V5cyhlKTsKICAgIGZvciAobiA9IDA7IHUubGVuZ3RoID4gbjsgbisrKSAwID4gdC5pbmRleE9mKChyID0gdVtuXSkpICYmIChvW3JdID0gZVtyXSk7CiAgICByZXR1cm4gbzsKICB9CgogIC8qKiBAbGljZW5zZSBSZWFjdCB2MTYuMTMuMQogICAqIHJlYWN0LWlzLnByb2R1Y3Rpb24ubWluLmpzCiAgICoKICAgKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy4KICAgKgogICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4KICAgKi8gdmFyIG0gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmZvciwKICAgIGIgPSBtID8gU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpIDogNjAxMDMsCiAgICBoID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0LnBvcnRhbCIpIDogNjAxMDYsCiAgICBTID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50IikgOiA2MDEwNywKICAgIFAgPSBtID8gU3ltYm9sLmZvcigicmVhY3Quc3RyaWN0X21vZGUiKSA6IDYwMTA4LAogICAgZyA9IG0gPyBTeW1ib2wuZm9yKCJyZWFjdC5wcm9maWxlciIpIDogNjAxMTQsCiAgICBPID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0LnByb3ZpZGVyIikgOiA2MDEwOSwKICAgIHcgPSBtID8gU3ltYm9sLmZvcigicmVhY3QuY29udGV4dCIpIDogNjAxMTAsCiAgICBDID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0LmFzeW5jX21vZGUiKSA6IDYwMTExLAogICAgeCA9IG0gPyBTeW1ib2wuZm9yKCJyZWFjdC5jb25jdXJyZW50X21vZGUiKSA6IDYwMTExLAogICAgRSA9IG0gPyBTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpIDogNjAxMTIsCiAgICBUID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0LnN1c3BlbnNlIikgOiA2MDExMywKICAgIE0gPSBtID8gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2VfbGlzdCIpIDogNjAxMjAsCiAgICBSID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0Lm1lbW8iKSA6IDYwMTE1LAogICAgJCA9IG0gPyBTeW1ib2wuZm9yKCJyZWFjdC5sYXp5IikgOiA2MDExNiwKICAgIE4gPSBtID8gU3ltYm9sLmZvcigicmVhY3QuYmxvY2siKSA6IDYwMTIxLAogICAgaiA9IG0gPyBTeW1ib2wuZm9yKCJyZWFjdC5mdW5kYW1lbnRhbCIpIDogNjAxMTcsCiAgICBxID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0LnJlc3BvbmRlciIpIDogNjAxMTgsCiAgICBEID0gbSA/IFN5bWJvbC5mb3IoInJlYWN0LnNjb3BlIikgOiA2MDExOTsKCiAgZnVuY3Rpb24gXyhlKSB7CiAgICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSkgewogICAgICB2YXIgdCA9IGUuJCR0eXBlb2Y7CiAgICAgIHN3aXRjaCAodCkgewogICAgICAgIGNhc2UgYjoKICAgICAgICAgIHN3aXRjaCAoKGUgPSBlLnR5cGUpKSB7CiAgICAgICAgICAgIGNhc2UgQzoKICAgICAgICAgICAgY2FzZSB4OgogICAgICAgICAgICBjYXNlIFM6CiAgICAgICAgICAgIGNhc2UgZzoKICAgICAgICAgICAgY2FzZSBQOgogICAgICAgICAgICBjYXNlIFQ6CiAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgc3dpdGNoICgoZSA9IGUgJiYgZS4kJHR5cGVvZikpIHsKICAgICAgICAgICAgICAgIGNhc2UgdzoKICAgICAgICAgICAgICAgIGNhc2UgRToKICAgICAgICAgICAgICAgIGNhc2UgJDoKICAgICAgICAgICAgICAgIGNhc2UgUjoKICAgICAgICAgICAgICAgIGNhc2UgTzoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgY2FzZSBoOgogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIEYoZSkgewogICAgcmV0dXJuIF8oZSkgPT09IHg7CiAgfQoKICB2YXIgayA9IHsKICAgICAgQXN5bmNNb2RlOiBDLAogICAgICBDb25jdXJyZW50TW9kZTogeCwKICAgICAgQ29udGV4dENvbnN1bWVyOiB3LAogICAgICBDb250ZXh0UHJvdmlkZXI6IE8sCiAgICAgIEVsZW1lbnQ6IGIsCiAgICAgIEZvcndhcmRSZWY6IEUsCiAgICAgIEZyYWdtZW50OiBTLAogICAgICBMYXp5OiAkLAogICAgICBNZW1vOiBSLAogICAgICBQb3J0YWw6IGgsCiAgICAgIFByb2ZpbGVyOiBnLAogICAgICBTdHJpY3RNb2RlOiBQLAogICAgICBTdXNwZW5zZTogVCwKICAgICAgaXNBc3luY01vZGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIEYoZSkgfHwgXyhlKSA9PT0gQzsKICAgICAgfSwKICAgICAgaXNDb25jdXJyZW50TW9kZTogRiwKICAgICAgaXNDb250ZXh0Q29uc3VtZXI6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF8oZSkgPT09IHc7CiAgICAgIH0sCiAgICAgIGlzQ29udGV4dFByb3ZpZGVyOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfKGUpID09PSBPOwogICAgICB9LAogICAgICBpc0VsZW1lbnQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiBlICYmIG51bGwgIT09IGUgJiYgZS4kJHR5cGVvZiA9PT0gYjsKICAgICAgfSwKICAgICAgaXNGb3J3YXJkUmVmOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfKGUpID09PSBFOwogICAgICB9LAogICAgICBpc0ZyYWdtZW50OiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBfKGUpID09PSBTOwogICAgICB9LAogICAgICBpc0xhenk6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF8oZSkgPT09ICQ7CiAgICAgIH0sCiAgICAgIGlzTWVtbzogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gXyhlKSA9PT0gUjsKICAgICAgfSwKICAgICAgaXNQb3J0YWw6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF8oZSkgPT09IGg7CiAgICAgIH0sCiAgICAgIGlzUHJvZmlsZXI6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIF8oZSkgPT09IGc7CiAgICAgIH0sCiAgICAgIGlzU3RyaWN0TW9kZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gXyhlKSA9PT0gUDsKICAgICAgfSwKICAgICAgaXNTdXNwZW5zZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gXyhlKSA9PT0gVDsKICAgICAgfSwKICAgICAgaXNWYWxpZEVsZW1lbnRUeXBlOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YgZSB8fAogICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSB8fAogICAgICAgICAgZSA9PT0gUyB8fAogICAgICAgICAgZSA9PT0geCB8fAogICAgICAgICAgZSA9PT0gZyB8fAogICAgICAgICAgZSA9PT0gUCB8fAogICAgICAgICAgZSA9PT0gVCB8fAogICAgICAgICAgZSA9PT0gTSB8fAogICAgICAgICAgKCJvYmplY3QiID09IHR5cGVvZiBlICYmCiAgICAgICAgICAgIG51bGwgIT09IGUgJiYKICAgICAgICAgICAgKGUuJCR0eXBlb2YgPT09ICQgfHwKICAgICAgICAgICAgICBlLiQkdHlwZW9mID09PSBSIHx8CiAgICAgICAgICAgICAgZS4kJHR5cGVvZiA9PT0gTyB8fAogICAgICAgICAgICAgIGUuJCR0eXBlb2YgPT09IHcgfHwKICAgICAgICAgICAgICBlLiQkdHlwZW9mID09PSBFIHx8CiAgICAgICAgICAgICAgZS4kJHR5cGVvZiA9PT0gaiB8fAogICAgICAgICAgICAgIGUuJCR0eXBlb2YgPT09IHEgfHwKICAgICAgICAgICAgICBlLiQkdHlwZW9mID09PSBEIHx8CiAgICAgICAgICAgICAgZS4kJHR5cGVvZiA9PT0gTikpCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgdHlwZU9mOiBfLAogICAgfSwKICAgIFcgPSB1KGZ1bmN0aW9uIChlKSB7CiAgICAgIGUuZXhwb3J0cyA9IGs7CiAgICB9KSwKICAgIEggPSB7CiAgICAgIGNoaWxkQ29udGV4dFR5cGVzOiAhMCwKICAgICAgY29udGV4dFR5cGU6ICEwLAogICAgICBjb250ZXh0VHlwZXM6ICEwLAogICAgICBkZWZhdWx0UHJvcHM6ICEwLAogICAgICBkaXNwbGF5TmFtZTogITAsCiAgICAgIGdldERlZmF1bHRQcm9wczogITAsCiAgICAgIGdldERlcml2ZWRTdGF0ZUZyb21FcnJvcjogITAsCiAgICAgIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczogITAsCiAgICAgIG1peGluczogITAsCiAgICAgIHByb3BUeXBlczogITAsCiAgICAgIHR5cGU6ICEwLAogICAgfSwKICAgIFUgPSB7CiAgICAgIG5hbWU6ICEwLAogICAgICBsZW5ndGg6ICEwLAogICAgICBwcm90b3R5cGU6ICEwLAogICAgICBjYWxsZXI6ICEwLAogICAgICBjYWxsZWU6ICEwLAogICAgICBhcmd1bWVudHM6ICEwLAogICAgICBhcml0eTogITAsCiAgICB9LAogICAgQSA9IHsKICAgICAgJCR0eXBlb2Y6ICEwLAogICAgICBjb21wYXJlOiAhMCwKICAgICAgZGVmYXVsdFByb3BzOiAhMCwKICAgICAgZGlzcGxheU5hbWU6ICEwLAogICAgICBwcm9wVHlwZXM6ICEwLAogICAgICB0eXBlOiAhMCwKICAgIH0sCiAgICBJID0ge307CgogIGZ1bmN0aW9uIEwoZSkgewogICAgcmV0dXJuIFcuaXNNZW1vKGUpID8gQSA6IElbZS4kJHR5cGVvZl0gfHwgSDsKICB9CgogIChJW1cuRm9yd2FyZFJlZl0gPSB7CiAgICAkJHR5cGVvZjogITAsCiAgICByZW5kZXI6ICEwLAogICAgZGVmYXVsdFByb3BzOiAhMCwKICAgIGRpc3BsYXlOYW1lOiAhMCwKICAgIHByb3BUeXBlczogITAsCiAgfSksCiAgICAoSVtXLk1lbW9dID0gQSk7CiAgdmFyIHogPSBPYmplY3QuZGVmaW5lUHJvcGVydHksCiAgICBLID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsCiAgICBWID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scywKICAgIEIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLAogICAgWSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiwKICAgIEcgPSBPYmplY3QucHJvdG90eXBlOwogIHZhciBKID0gZnVuY3Rpb24gZSh0LCByLCBuKSB7CiAgICAgIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgcikgewogICAgICAgIGlmIChHKSB7CiAgICAgICAgICB2YXIgbyA9IFkocik7CiAgICAgICAgICBvICYmIG8gIT09IEcgJiYgZSh0LCBvLCBuKTsKICAgICAgICB9CiAgICAgICAgdmFyIHUgPSBLKHIpOwogICAgICAgIFYgJiYgKHUgPSB1LmNvbmNhdChWKHIpKSk7CiAgICAgICAgZm9yICh2YXIgYSA9IEwodCksIGkgPSBMKHIpLCBjID0gMDsgdS5sZW5ndGggPiBjOyArK2MpIHsKICAgICAgICAgIHZhciBzID0gdVtjXTsKICAgICAgICAgIGlmICghKFVbc10gfHwgKG4gJiYgbltzXSkgfHwgKGkgJiYgaVtzXSkgfHwgKGEgJiYgYVtzXSkpKSB7CiAgICAgICAgICAgIHZhciBmID0gQihyLCBzKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICB6KHQsIHMsIGYpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdDsKICAgIH0sCiAgICBRID0gW10sCiAgICBYID0gW251bGwsIG51bGxdOwoKICBmdW5jdGlvbiBaKGUsIHQpIHsKICAgIHJldHVybiBbdC5wYXlsb2FkLCBlWzFdICsgMV07CiAgfQoKICBmdW5jdGlvbiBlZShlLCB0LCByKSB7CiAgICBkKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGUuYXBwbHkodm9pZCAwLCB0KTsKICAgIH0sIHIpOwogIH0KCiAgZnVuY3Rpb24gdGUoZSwgdCwgciwgbiwgbywgdSwgYSkgewogICAgKGUuY3VycmVudCA9IG4pLAogICAgICAodC5jdXJyZW50ID0gbyksCiAgICAgIChyLmN1cnJlbnQgPSAhMSksCiAgICAgIHUuY3VycmVudCAmJiAoKHUuY3VycmVudCA9IG51bGwpLCBhKCkpOwogIH0KCiAgZnVuY3Rpb24gcmUoZSwgdCwgciwgbiwgbywgdSwgYSwgaSwgYywgcykgewogICAgaWYgKGUpIHsKICAgICAgdmFyIGYgPSAhMSwKICAgICAgICBwID0gbnVsbCwKICAgICAgICBsID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKCFmKSB7CiAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgIHIsCiAgICAgICAgICAgICAgbCA9IHQuZ2V0U3RhdGUoKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBlID0gbihsLCBvLmN1cnJlbnQpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgKHIgPSBlKSwgKHAgPSBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByIHx8IChwID0gbnVsbCksCiAgICAgICAgICAgICAgZSA9PT0gdS5jdXJyZW50CiAgICAgICAgICAgICAgICA/IGEuY3VycmVudCB8fCBjKCkKICAgICAgICAgICAgICAgIDogKCh1LmN1cnJlbnQgPSBlKSwKICAgICAgICAgICAgICAgICAgKGkuY3VycmVudCA9IGUpLAogICAgICAgICAgICAgICAgICAoYS5jdXJyZW50ID0gITApLAogICAgICAgICAgICAgICAgICBzKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAiU1RPUkVfVVBEQVRFRCIsCiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogeyBlcnJvcjogciB9LAogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgKHIub25TdGF0ZUNoYW5nZSA9IGwpLCByLnRyeVN1YnNjcmliZSgpLCBsKCk7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCgoZiA9ICEwKSwgci50cnlVbnN1YnNjcmliZSgpLCAoci5vblN0YXRlQ2hhbmdlID0gbnVsbCksIHApKQogICAgICAgICAgdGhyb3cgcDsKICAgICAgfTsKICAgIH0KICB9CgogIHZhciBuZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBbbnVsbCwgMF07CiAgfTsKCiAgZnVuY3Rpb24gb2UoZSwgcikgewogICAgdm9pZCAwID09PSByICYmIChyID0ge30pOwogICAgdmFyIG4gPSByLmdldERpc3BsYXlOYW1lLAogICAgICB1ID0KICAgICAgICB2b2lkIDAgPT09IG4KICAgICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gIkNvbm5lY3RBZHZhbmNlZCgiICsgZSArICIpIjsKICAgICAgICAgICAgfQogICAgICAgICAgOiBuLAogICAgICBhID0gci5tZXRob2ROYW1lLAogICAgICBpID0gdm9pZCAwID09PSBhID8gImNvbm5lY3RBZHZhbmNlZCIgOiBhLAogICAgICBzID0gci5yZW5kZXJDb3VudFByb3AsCiAgICAgIGYgPSB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLAogICAgICBwID0gci5zaG91bGRIYW5kbGVTdGF0ZUNoYW5nZXMsCiAgICAgIGQgPSB2b2lkIDAgPT09IHAgfHwgcCwKICAgICAgbSA9IHIuc3RvcmVLZXksCiAgICAgIGIgPSB2b2lkIDAgPT09IG0gPyAic3RvcmUiIDogbSwKICAgICAgaCA9IHIuZm9yd2FyZFJlZiwKICAgICAgUyA9IHZvaWQgMCAhPT0gaCAmJiBoLAogICAgICBQID0gci5jb250ZXh0LAogICAgICBnID0gdm9pZCAwID09PSBQID8gYyA6IFAsCiAgICAgIE8gPSB2KHIsIFsKICAgICAgICAiZ2V0RGlzcGxheU5hbWUiLAogICAgICAgICJtZXRob2ROYW1lIiwKICAgICAgICAicmVuZGVyQ291bnRQcm9wIiwKICAgICAgICAic2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VzIiwKICAgICAgICAic3RvcmVLZXkiLAogICAgICAgICJ3aXRoUmVmIiwKICAgICAgICAiZm9yd2FyZFJlZiIsCiAgICAgICAgImNvbnRleHQiLAogICAgICBdKSwKICAgICAgdyA9IGc7CiAgICByZXR1cm4gZnVuY3Rpb24gKHIpIHsKICAgICAgdmFyIG4gPSByLmRpc3BsYXlOYW1lIHx8IHIubmFtZSB8fCAiQ29tcG9uZW50IiwKICAgICAgICBhID0gdShuKSwKICAgICAgICBjID0geSh7fSwgTywgewogICAgICAgICAgZ2V0RGlzcGxheU5hbWU6IHUsCiAgICAgICAgICBtZXRob2ROYW1lOiBpLAogICAgICAgICAgcmVuZGVyQ291bnRQcm9wOiBmLAogICAgICAgICAgc2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VzOiBkLAogICAgICAgICAgc3RvcmVLZXk6IGIsCiAgICAgICAgICBkaXNwbGF5TmFtZTogYSwKICAgICAgICAgIHdyYXBwZWRDb21wb25lbnROYW1lOiBuLAogICAgICAgICAgV3JhcHBlZENvbXBvbmVudDogciwKICAgICAgICB9KSwKICAgICAgICBzID0gTy5wdXJlOwogICAgICB2YXIgcCA9IHMKICAgICAgICA/IHQudXNlTWVtbwogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUoKTsKICAgICAgICAgIH07CgogICAgICBmdW5jdGlvbiBtKG4pIHsKICAgICAgICB2YXIgdSA9IHQudXNlTWVtbygKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBlID0gbi5yZWFjdFJlZHV4Rm9yd2FyZGVkUmVmLAogICAgICAgICAgICAgICAgdCA9IHYobiwgWyJyZWFjdFJlZHV4Rm9yd2FyZGVkUmVmIl0pOwogICAgICAgICAgICAgIHJldHVybiBbbi5jb250ZXh0LCBlLCB0XTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgW25dCiAgICAgICAgICApLAogICAgICAgICAgYSA9IHVbMF0sCiAgICAgICAgICBpID0gdVsxXSwKICAgICAgICAgIHMgPSB1WzJdLAogICAgICAgICAgZiA9IHQudXNlTWVtbygKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBhICYmCiAgICAgICAgICAgICAgICBhLkNvbnN1bWVyICYmCiAgICAgICAgICAgICAgICBXLmlzQ29udGV4dENvbnN1bWVyKG8uZGVmYXVsdC5jcmVhdGVFbGVtZW50KGEuQ29uc3VtZXIsIG51bGwpKQogICAgICAgICAgICAgICAgPyBhCiAgICAgICAgICAgICAgICA6IHc7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFthLCB3XQogICAgICAgICAgKSwKICAgICAgICAgIG0gPSB0LnVzZUNvbnRleHQoZiksCiAgICAgICAgICBiID0gISFuLnN0b3JlICYmICEhbi5zdG9yZS5nZXRTdGF0ZSAmJiAhIW4uc3RvcmUuZGlzcGF0Y2gsCiAgICAgICAgICBoID0gYiA/IG4uc3RvcmUgOiBtLnN0b3JlLAogICAgICAgICAgUyA9IHQudXNlTWVtbygKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlKHQuZGlzcGF0Y2gsIGMpOwogICAgICAgICAgICAgIH0pKGgpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBbaF0KICAgICAgICAgICksCiAgICAgICAgICBQID0gdC51c2VNZW1vKAogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKCFkKSByZXR1cm4gWDsKICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBsKGgsIGIgPyBudWxsIDogbS5zdWJzY3JpcHRpb24pLAogICAgICAgICAgICAgICAgdCA9IGUubm90aWZ5TmVzdGVkU3Vicy5iaW5kKGUpOwogICAgICAgICAgICAgIHJldHVybiBbZSwgdF07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFtoLCBiLCBtXQogICAgICAgICAgKSwKICAgICAgICAgIGcgPSBQWzBdLAogICAgICAgICAgTyA9IFBbMV0sCiAgICAgICAgICBDID0gdC51c2VNZW1vKAogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGIgPyBtIDogeSh7fSwgbSwgeyBzdWJzY3JpcHRpb246IGcgfSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFtiLCBtLCBnXQogICAgICAgICAgKSwKICAgICAgICAgIHggPSB0LnVzZVJlZHVjZXIoWiwgUSwgbmUpLAogICAgICAgICAgRSA9IHhbMF1bMF0sCiAgICAgICAgICBUID0geFsxXTsKICAgICAgICBpZiAoRSAmJiBFLmVycm9yKSB0aHJvdyBFLmVycm9yOwogICAgICAgIHZhciBNID0gdC51c2VSZWYoKSwKICAgICAgICAgIFIgPSB0LnVzZVJlZihzKSwKICAgICAgICAgICQgPSB0LnVzZVJlZigpLAogICAgICAgICAgTiA9IHQudXNlUmVmKCExKSwKICAgICAgICAgIGogPSBwKAogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuICQuY3VycmVudCAmJiBzID09PSBSLmN1cnJlbnQKICAgICAgICAgICAgICAgID8gJC5jdXJyZW50CiAgICAgICAgICAgICAgICA6IFMoaC5nZXRTdGF0ZSgpLCBzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgW2gsIEUsIHNdCiAgICAgICAgICApOwogICAgICAgIGVlKHRlLCBbUiwgTSwgTiwgcywgaiwgJCwgT10pLAogICAgICAgICAgZWUocmUsIFtkLCBoLCBnLCBTLCBSLCBNLCBOLCAkLCBPLCBUXSwgW2gsIGcsIFNdKTsKICAgICAgICB2YXIgcSA9IHQudXNlTWVtbygKICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG8uZGVmYXVsdC5jcmVhdGVFbGVtZW50KHIsIHkoe30sIGosIHsgcmVmOiBpIH0pKTsKICAgICAgICAgIH0sCiAgICAgICAgICBbaSwgciwgal0KICAgICAgICApOwogICAgICAgIHJldHVybiB0LnVzZU1lbW8oCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBkID8gby5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZi5Qcm92aWRlciwgeyB2YWx1ZTogQyB9LCBxKSA6IHE7CiAgICAgICAgICB9LAogICAgICAgICAgW2YsIHEsIENdCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgdmFyIGggPSBzID8gby5kZWZhdWx0Lm1lbW8obSkgOiBtOwogICAgICBpZiAoKChoLldyYXBwZWRDb21wb25lbnQgPSByKSwgKGguZGlzcGxheU5hbWUgPSBtLmRpc3BsYXlOYW1lID0gYSksIFMpKSB7CiAgICAgICAgdmFyIFAgPSBvLmRlZmF1bHQuZm9yd2FyZFJlZihmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIG8uZGVmYXVsdC5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICBoLAogICAgICAgICAgICB5KHt9LCBlLCB7IHJlYWN0UmVkdXhGb3J3YXJkZWRSZWY6IHQgfSkKICAgICAgICAgICk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIChQLmRpc3BsYXlOYW1lID0gYSksIChQLldyYXBwZWRDb21wb25lbnQgPSByKSwgSihQLCByKTsKICAgICAgfQogICAgICByZXR1cm4gSihoLCByKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB1ZShlLCB0KSB7CiAgICByZXR1cm4gZSA9PT0gdCA/IDAgIT09IGUgfHwgMCAhPT0gdCB8fCAxIC8gZSA9PSAxIC8gdCA6IGUgIT0gZSAmJiB0ICE9IHQ7CiAgfQoKICBmdW5jdGlvbiBhZShlLCB0KSB7CiAgICBpZiAodWUoZSwgdCkpIHJldHVybiAhMDsKICAgIGlmICgKICAgICAgIm9iamVjdCIgIT0gdHlwZW9mIGUgfHwKICAgICAgbnVsbCA9PT0gZSB8fAogICAgICAib2JqZWN0IiAhPSB0eXBlb2YgdCB8fAogICAgICBudWxsID09PSB0CiAgICApCiAgICAgIHJldHVybiAhMTsKICAgIHZhciByID0gT2JqZWN0LmtleXMoZSk7CiAgICBpZiAoci5sZW5ndGggIT09IE9iamVjdC5rZXlzKHQpLmxlbmd0aCkgcmV0dXJuICExOwogICAgZm9yICh2YXIgbiA9IDA7IHIubGVuZ3RoID4gbjsgbisrKQogICAgICBpZiAoCiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCByW25dKSB8fAogICAgICAgICF1ZShlW3Jbbl1dLCB0W3Jbbl1dKQogICAgICApCiAgICAgICAgcmV0dXJuICExOwogICAgcmV0dXJuICEwOwogIH0KCiAgZnVuY3Rpb24gaWUoZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0LCByKSB7CiAgICAgIHZhciBuID0gZSh0LCByKTsKCiAgICAgIGZ1bmN0aW9uIG8oKSB7CiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0KCiAgICAgIHJldHVybiAoby5kZXBlbmRzT25Pd25Qcm9wcyA9ICExKSwgbzsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBjZShlKSB7CiAgICByZXR1cm4gbnVsbCAhPSBlLmRlcGVuZHNPbk93blByb3BzID8gISFlLmRlcGVuZHNPbk93blByb3BzIDogMSAhPT0gZS5sZW5ndGg7CiAgfQoKICBmdW5jdGlvbiBzZShlLCB0KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHQsIHIpIHsKICAgICAgdmFyIG4gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHJldHVybiBuLmRlcGVuZHNPbk93blByb3BzID8gbi5tYXBUb1Byb3BzKGUsIHQpIDogbi5tYXBUb1Byb3BzKGUpOwogICAgICB9OwogICAgICByZXR1cm4gKAogICAgICAgIChuLmRlcGVuZHNPbk93blByb3BzID0gITApLAogICAgICAgIChuLm1hcFRvUHJvcHMgPSBmdW5jdGlvbiAodCwgcikgewogICAgICAgICAgKG4ubWFwVG9Qcm9wcyA9IGUpLCAobi5kZXBlbmRzT25Pd25Qcm9wcyA9IGNlKGUpKTsKICAgICAgICAgIHZhciBvID0gbih0LCByKTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIG8gJiYKICAgICAgICAgICAgICAoKG4ubWFwVG9Qcm9wcyA9IG8pLAogICAgICAgICAgICAgIChuLmRlcGVuZHNPbk93blByb3BzID0gY2UobykpLAogICAgICAgICAgICAgIChvID0gbih0LCByKSkpLAogICAgICAgICAgICBvCiAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIG4KICAgICAgKTsKICAgIH07CiAgfQoKICB2YXIgZmUgPSBbCiAgICBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSA/IHNlKGUpIDogdm9pZCAwOwogICAgfSwKICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlCiAgICAgICAgPyB2b2lkIDAKICAgICAgICA6IGllKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB7IGRpc3BhdGNoOiBlIH07CiAgICAgICAgICB9KTsKICAgIH0sCiAgICBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZQogICAgICAgID8gaWUoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgcmV0dXJuIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgIHZhciByID0ge30sCiAgICAgICAgICAgICAgICBuID0gZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlW25dOwogICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBvICYmCiAgICAgICAgICAgICAgICAgICAgKHJbbl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdChvLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGZvciAodmFyIG8gaW4gZSkgbihvKTsKICAgICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgICAgfSkoZSwgdCk7CiAgICAgICAgICB9KQogICAgICAgIDogdm9pZCAwOwogICAgfSwKICBdOwogIHZhciBwZSA9IFsKICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlID8gc2UoZSkgOiB2b2lkIDA7CiAgICB9LAogICAgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUKICAgICAgICA/IHZvaWQgMAogICAgICAgIDogaWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgICB9KTsKICAgIH0sCiAgXTsKCiAgZnVuY3Rpb24gbGUoZSwgdCwgcikgewogICAgcmV0dXJuIHkoe30sIHIsIGUsIHQpOwogIH0KCiAgdmFyIGRlID0gWwogICAgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUKICAgICAgICA/IChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQsIHIpIHsKICAgICAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgICAgIG8gPSByLnB1cmUsCiAgICAgICAgICAgICAgICB1ID0gci5hcmVNZXJnZWRQcm9wc0VxdWFsLAogICAgICAgICAgICAgICAgYSA9ICExOwogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCwgciwgaSkgewogICAgICAgICAgICAgICAgdmFyIGMgPSBlKHQsIHIsIGkpOwogICAgICAgICAgICAgICAgcmV0dXJuIGEgPyAobyAmJiB1KGMsIG4pKSB8fCAobiA9IGMpIDogKChhID0gITApLCAobiA9IGMpKSwgbjsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9OwogICAgICAgICAgfSkoZSkKICAgICAgICA6IHZvaWQgMDsKICAgIH0sCiAgICBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZQogICAgICAgID8gdm9pZCAwCiAgICAgICAgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBsZTsKICAgICAgICAgIH07CiAgICB9LAogIF07CgogIGZ1bmN0aW9uIHllKGUsIHQsIHIsIG4pIHsKICAgIHJldHVybiBmdW5jdGlvbiAobywgdSkgewogICAgICByZXR1cm4gcihlKG8sIHUpLCB0KG4sIHUpLCB1KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB2ZShlLCB0LCByLCBuLCBvKSB7CiAgICB2YXIgdSwKICAgICAgYSwKICAgICAgaSwKICAgICAgYywKICAgICAgcywKICAgICAgZiA9IG8uYXJlU3RhdGVzRXF1YWwsCiAgICAgIHAgPSBvLmFyZU93blByb3BzRXF1YWwsCiAgICAgIGwgPSBvLmFyZVN0YXRlUHJvcHNFcXVhbCwKICAgICAgZCA9ICExOwoKICAgIGZ1bmN0aW9uIHkobywgZCkgewogICAgICB2YXIgeSwKICAgICAgICB2LAogICAgICAgIG0gPSAhcChkLCBhKSwKICAgICAgICBiID0gIWYobywgdSk7CiAgICAgIHJldHVybiAoCiAgICAgICAgKHUgPSBvKSwKICAgICAgICAoYSA9IGQpLAogICAgICAgIG0gJiYgYgogICAgICAgICAgPyAoKGkgPSBlKHUsIGEpKSwKICAgICAgICAgICAgdC5kZXBlbmRzT25Pd25Qcm9wcyAmJiAoYyA9IHQobiwgYSkpLAogICAgICAgICAgICAocyA9IHIoaSwgYywgYSkpKQogICAgICAgICAgOiBtCiAgICAgICAgICA/IChlLmRlcGVuZHNPbk93blByb3BzICYmIChpID0gZSh1LCBhKSksCiAgICAgICAgICAgIHQuZGVwZW5kc09uT3duUHJvcHMgJiYgKGMgPSB0KG4sIGEpKSwKICAgICAgICAgICAgKHMgPSByKGksIGMsIGEpKSkKICAgICAgICAgIDogYgogICAgICAgICAgPyAoKHkgPSBlKHUsIGEpKSwgKHYgPSAhbCh5LCBpKSksIChpID0geSksIHYgJiYgKHMgPSByKGksIGMsIGEpKSwgcykKICAgICAgICAgIDogcwogICAgICApOwogICAgfQoKICAgIHJldHVybiBmdW5jdGlvbiAobywgZikgewogICAgICByZXR1cm4gZAogICAgICAgID8geShvLCBmKQogICAgICAgIDogKChpID0gZSgodSA9IG8pLCAoYSA9IGYpKSksCiAgICAgICAgICAoYyA9IHQobiwgYSkpLAogICAgICAgICAgKHMgPSByKGksIGMsIGEpKSwKICAgICAgICAgIChkID0gITApLAogICAgICAgICAgcyk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbWUoZSwgdCkgewogICAgdmFyIHIgPSB0LmluaXRNYXBTdGF0ZVRvUHJvcHMsCiAgICAgIG4gPSB0LmluaXRNYXBEaXNwYXRjaFRvUHJvcHMsCiAgICAgIG8gPSB0LmluaXRNZXJnZVByb3BzLAogICAgICB1ID0gdih0LCBbCiAgICAgICAgImluaXRNYXBTdGF0ZVRvUHJvcHMiLAogICAgICAgICJpbml0TWFwRGlzcGF0Y2hUb1Byb3BzIiwKICAgICAgICAiaW5pdE1lcmdlUHJvcHMiLAogICAgICBdKSwKICAgICAgYSA9IHIoZSwgdSksCiAgICAgIGkgPSBuKGUsIHUpLAogICAgICBjID0gbyhlLCB1KTsKICAgIHJldHVybiAodS5wdXJlID8gdmUgOiB5ZSkoYSwgaSwgYywgZSwgdSk7CiAgfQoKICBmdW5jdGlvbiBiZShlLCB0LCByKSB7CiAgICBmb3IgKHZhciBuID0gdC5sZW5ndGggLSAxOyBuID49IDA7IG4tLSkgewogICAgICB2YXIgbyA9IHRbbl0oZSk7CiAgICAgIGlmIChvKSByZXR1cm4gbzsKICAgIH0KICAgIHJldHVybiBmdW5jdGlvbiAodCwgbikgewogICAgICB0aHJvdyBFcnJvcigKICAgICAgICAiSW52YWxpZCB2YWx1ZSBvZiB0eXBlICIgKwogICAgICAgICAgdHlwZW9mIGUgKwogICAgICAgICAgIiBmb3IgIiArCiAgICAgICAgICByICsKICAgICAgICAgICIgYXJndW1lbnQgd2hlbiBjb25uZWN0aW5nIGNvbXBvbmVudCAiICsKICAgICAgICAgIG4ud3JhcHBlZENvbXBvbmVudE5hbWUgKwogICAgICAgICAgIi4iCiAgICAgICk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaGUoZSwgdCkgewogICAgcmV0dXJuIGUgPT09IHQ7CiAgfQoKICBmdW5jdGlvbiBTZShlKSB7CiAgICB2YXIgdCA9IHZvaWQgMCA9PT0gZSA/IHt9IDogZSwKICAgICAgciA9IHQuY29ubmVjdEhPQywKICAgICAgbiA9IHZvaWQgMCA9PT0gciA/IG9lIDogciwKICAgICAgbyA9IHQubWFwU3RhdGVUb1Byb3BzRmFjdG9yaWVzLAogICAgICB1ID0gdm9pZCAwID09PSBvID8gcGUgOiBvLAogICAgICBhID0gdC5tYXBEaXNwYXRjaFRvUHJvcHNGYWN0b3JpZXMsCiAgICAgIGkgPSB2b2lkIDAgPT09IGEgPyBmZSA6IGEsCiAgICAgIGMgPSB0Lm1lcmdlUHJvcHNGYWN0b3JpZXMsCiAgICAgIHMgPSB2b2lkIDAgPT09IGMgPyBkZSA6IGMsCiAgICAgIGYgPSB0LnNlbGVjdG9yRmFjdG9yeSwKICAgICAgcCA9IHZvaWQgMCA9PT0gZiA/IG1lIDogZjsKICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCwgciwgbykgewogICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSB7fSk7CiAgICAgIHZhciBhID0gby5wdXJlLAogICAgICAgIGMgPSB2b2lkIDAgPT09IGEgfHwgYSwKICAgICAgICBmID0gby5hcmVTdGF0ZXNFcXVhbCwKICAgICAgICBsID0gdm9pZCAwID09PSBmID8gaGUgOiBmLAogICAgICAgIGQgPSBvLmFyZU93blByb3BzRXF1YWwsCiAgICAgICAgbSA9IHZvaWQgMCA9PT0gZCA/IGFlIDogZCwKICAgICAgICBiID0gby5hcmVTdGF0ZVByb3BzRXF1YWwsCiAgICAgICAgaCA9IHZvaWQgMCA9PT0gYiA/IGFlIDogYiwKICAgICAgICBTID0gby5hcmVNZXJnZWRQcm9wc0VxdWFsLAogICAgICAgIFAgPSB2b2lkIDAgPT09IFMgPyBhZSA6IFMsCiAgICAgICAgZyA9IHYobywgWwogICAgICAgICAgInB1cmUiLAogICAgICAgICAgImFyZVN0YXRlc0VxdWFsIiwKICAgICAgICAgICJhcmVPd25Qcm9wc0VxdWFsIiwKICAgICAgICAgICJhcmVTdGF0ZVByb3BzRXF1YWwiLAogICAgICAgICAgImFyZU1lcmdlZFByb3BzRXF1YWwiLAogICAgICAgIF0pLAogICAgICAgIE8gPSBiZShlLCB1LCAibWFwU3RhdGVUb1Byb3BzIiksCiAgICAgICAgdyA9IGJlKHQsIGksICJtYXBEaXNwYXRjaFRvUHJvcHMiKSwKICAgICAgICBDID0gYmUociwgcywgIm1lcmdlUHJvcHMiKTsKICAgICAgcmV0dXJuIG4oCiAgICAgICAgcCwKICAgICAgICB5KAogICAgICAgICAgewogICAgICAgICAgICBtZXRob2ROYW1lOiAiY29ubmVjdCIsCiAgICAgICAgICAgIGdldERpc3BsYXlOYW1lOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiAiQ29ubmVjdCgiICsgZSArICIpIjsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvdWxkSGFuZGxlU3RhdGVDaGFuZ2VzOiAhIWUsCiAgICAgICAgICAgIGluaXRNYXBTdGF0ZVRvUHJvcHM6IE8sCiAgICAgICAgICAgIGluaXRNYXBEaXNwYXRjaFRvUHJvcHM6IHcsCiAgICAgICAgICAgIGluaXRNZXJnZVByb3BzOiBDLAogICAgICAgICAgICBwdXJlOiBjLAogICAgICAgICAgICBhcmVTdGF0ZXNFcXVhbDogbCwKICAgICAgICAgICAgYXJlT3duUHJvcHNFcXVhbDogbSwKICAgICAgICAgICAgYXJlU3RhdGVQcm9wc0VxdWFsOiBoLAogICAgICAgICAgICBhcmVNZXJnZWRQcm9wc0VxdWFsOiBQLAogICAgICAgICAgfSwKICAgICAgICAgIGcKICAgICAgICApCiAgICAgICk7CiAgICB9OwogIH0KCiAgdmFyIFBlID0gU2UoKTsKCiAgZnVuY3Rpb24gZ2UoKSB7CiAgICByZXR1cm4gdC51c2VDb250ZXh0KGMpOwogIH0KCiAgZnVuY3Rpb24gT2UoZSkgewogICAgdm9pZCAwID09PSBlICYmIChlID0gYyk7CiAgICB2YXIgciA9CiAgICAgIGUgPT09IGMKICAgICAgICA/IGdlCiAgICAgICAgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0LnVzZUNvbnRleHQoZSk7CiAgICAgICAgICB9OwogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHIoKS5zdG9yZTsKICAgIH07CiAgfQoKICB2YXIgd2UgPSBPZSgpOwoKICBmdW5jdGlvbiBDZShlKSB7CiAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBjKTsKICAgIHZhciB0ID0gZSA9PT0gYyA/IHdlIDogT2UoZSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdCgpLmRpc3BhdGNoOwogICAgfTsKICB9CgogIHZhciB4ZSA9IENlKCksCiAgICBFZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiBlID09PSB0OwogICAgfTsKCiAgZnVuY3Rpb24gVGUoZSkgewogICAgdm9pZCAwID09PSBlICYmIChlID0gYyk7CiAgICB2YXIgciA9CiAgICAgIGUgPT09IGMKICAgICAgICA/IGdlCiAgICAgICAgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0LnVzZUNvbnRleHQoZSk7CiAgICAgICAgICB9OwogICAgcmV0dXJuIGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9IEVlKTsKICAgICAgdmFyIG8gPSByKCksCiAgICAgICAgdSA9IChmdW5jdGlvbiAoZSwgciwgbiwgbykgewogICAgICAgICAgdmFyIHUsCiAgICAgICAgICAgIGEgPSB0LnVzZVJlZHVjZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gZSArIDE7CiAgICAgICAgICAgIH0sIDApWzFdLAogICAgICAgICAgICBpID0gdC51c2VNZW1vKAogICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbChuLCBvKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFtuLCBvXQogICAgICAgICAgICApLAogICAgICAgICAgICBjID0gdC51c2VSZWYoKSwKICAgICAgICAgICAgcyA9IHQudXNlUmVmKCksCiAgICAgICAgICAgIGYgPSB0LnVzZVJlZigpLAogICAgICAgICAgICBwID0gdC51c2VSZWYoKSwKICAgICAgICAgICAgeSA9IG4uZ2V0U3RhdGUoKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmIChlICE9PSBzLmN1cnJlbnQgfHwgeSAhPT0gZi5jdXJyZW50IHx8IGMuY3VycmVudCkgewogICAgICAgICAgICAgIHZhciB2ID0gZSh5KTsKICAgICAgICAgICAgICB1ID0gdm9pZCAwICE9PSBwLmN1cnJlbnQgJiYgcih2LCBwLmN1cnJlbnQpID8gcC5jdXJyZW50IDogdjsKICAgICAgICAgICAgfSBlbHNlIHUgPSBwLmN1cnJlbnQ7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRocm93ICgKICAgICAgICAgICAgICAoYy5jdXJyZW50ICYmCiAgICAgICAgICAgICAgICAoZS5tZXNzYWdlICs9CiAgICAgICAgICAgICAgICAgICJcblRoZSBlcnJvciBtYXkgYmUgY29ycmVsYXRlZCB3aXRoIHRoaXMgcHJldmlvdXMgZXJyb3I6XG4iICsKICAgICAgICAgICAgICAgICAgYy5jdXJyZW50LnN0YWNrICsKICAgICAgICAgICAgICAgICAgIlxuXG4iKSwKICAgICAgICAgICAgICBlKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgKHMuY3VycmVudCA9IGUpLAogICAgICAgICAgICAgICAgKGYuY3VycmVudCA9IHkpLAogICAgICAgICAgICAgICAgKHAuY3VycmVudCA9IHUpLAogICAgICAgICAgICAgICAgKGMuY3VycmVudCA9IHZvaWQgMCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBkKAogICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBuLmdldFN0YXRlKCksCiAgICAgICAgICAgICAgICAgICAgICB0ID0gcy5jdXJyZW50KGUpOwogICAgICAgICAgICAgICAgICAgIGlmIChyKHQsIHAuY3VycmVudCkpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAocC5jdXJyZW50ID0gdCksIChmLmN1cnJlbnQgPSBlKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGMuY3VycmVudCA9IGU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgYSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIChpLm9uU3RhdGVDaGFuZ2UgPSBlKSwKICAgICAgICAgICAgICAgICAgaS50cnlTdWJzY3JpYmUoKSwKICAgICAgICAgICAgICAgICAgZSgpLAogICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkudHJ5VW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIFtuLCBpXQogICAgICAgICAgICApLAogICAgICAgICAgICB1CiAgICAgICAgICApOwogICAgICAgIH0pKGUsIG4sIG8uc3RvcmUsIG8uc3Vic2NyaXB0aW9uKTsKICAgICAgcmV0dXJuIHQudXNlRGVidWdWYWx1ZSh1KSwgdTsKICAgIH07CiAgfQoKICB2YXIgTWUgPSBUZSgpOwogIChzID0gci51bnN0YWJsZV9iYXRjaGVkVXBkYXRlcyksCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgImJhdGNoIiwgewogICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHIudW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXM7CiAgICAgIH0sCiAgICB9KSwKICAgIChlLlByb3ZpZGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHIgPSBlLnN0b3JlLAogICAgICAgIG4gPSBlLmNvbnRleHQsCiAgICAgICAgdSA9IGUuY2hpbGRyZW4sCiAgICAgICAgYSA9IHQudXNlTWVtbygKICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGUgPSBuZXcgbChyKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoZS5vblN0YXRlQ2hhbmdlID0gZS5ub3RpZnlOZXN0ZWRTdWJzKSwKICAgICAgICAgICAgICB7IHN0b3JlOiByLCBzdWJzY3JpcHRpb246IGUgfQogICAgICAgICAgICApOwogICAgICAgICAgfSwKICAgICAgICAgIFtyXQogICAgICAgICksCiAgICAgICAgaSA9IHQudXNlTWVtbygKICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHIuZ2V0U3RhdGUoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBbcl0KICAgICAgICApOwogICAgICByZXR1cm4gKAogICAgICAgIGQoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBlID0gYS5zdWJzY3JpcHRpb247CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgZS50cnlTdWJzY3JpYmUoKSwKICAgICAgICAgICAgICBpICE9PSByLmdldFN0YXRlKCkgJiYgZS5ub3RpZnlOZXN0ZWRTdWJzKCksCiAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZS50cnlVbnN1YnNjcmliZSgpLCAoZS5vblN0YXRlQ2hhbmdlID0gbnVsbCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgfSwKICAgICAgICAgIFthLCBpXQogICAgICAgICksCiAgICAgICAgby5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoKG4gfHwgYykuUHJvdmlkZXIsIHsgdmFsdWU6IGEgfSwgdSkKICAgICAgKTsKICAgIH0pLAogICAgKGUuUmVhY3RSZWR1eENvbnRleHQgPSBjKSwKICAgIChlLmNvbm5lY3QgPSBQZSksCiAgICAoZS5jb25uZWN0QWR2YW5jZWQgPSBvZSksCiAgICAoZS5jcmVhdGVEaXNwYXRjaEhvb2sgPSBDZSksCiAgICAoZS5jcmVhdGVTZWxlY3Rvckhvb2sgPSBUZSksCiAgICAoZS5jcmVhdGVTdG9yZUhvb2sgPSBPZSksCiAgICAoZS5zaGFsbG93RXF1YWwgPSBhZSksCiAgICAoZS51c2VEaXNwYXRjaCA9IHhlKSwKICAgIChlLnVzZVNlbGVjdG9yID0gTWUpLAogICAgKGUudXNlU3RvcmUgPSB3ZSksCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiAhMCB9KTsKfSk7CgohKGZ1bmN0aW9uICh0LCBlKSB7CiAgIm9iamVjdCIgPT0gdHlwZW9mIGV4cG9ydHMgJiYgIm9iamVjdCIgPT0gdHlwZW9mIG1vZHVsZQogICAgPyAobW9kdWxlLmV4cG9ydHMgPSBlKCkpCiAgICA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICA/IGRlZmluZShbXSwgZSkKICAgIDogIm9iamVjdCIgPT0gdHlwZW9mIGV4cG9ydHMKICAgID8gKGV4cG9ydHMuUmVkdXhUaHVuayA9IGUoKSkKICAgIDogKHQuUmVkdXhUaHVuayA9IGUoKSk7Cn0pKHRoaXMsIGZ1bmN0aW9uICgpIHsKICByZXR1cm4gKGZ1bmN0aW9uICh0KSB7CiAgICBmdW5jdGlvbiBlKG8pIHsKICAgICAgaWYgKG5bb10pIHJldHVybiBuW29dLmV4cG9ydHM7CiAgICAgIHZhciByID0gKG5bb10gPSB7IGV4cG9ydHM6IHt9LCBpZDogbywgbG9hZGVkOiAhMSB9KTsKICAgICAgcmV0dXJuIHRbb10uY2FsbChyLmV4cG9ydHMsIHIsIHIuZXhwb3J0cywgZSksIChyLmxvYWRlZCA9ICEwKSwgci5leHBvcnRzOwogICAgfQoKICAgIHZhciBuID0ge307CiAgICByZXR1cm4gKGUubSA9IHQpLCAoZS5jID0gbiksIChlLnAgPSAiIiksIGUoMCk7CiAgfSkoWwogICAgZnVuY3Rpb24gKHQsIGUsIG4pIHsKICAgICAgdC5leHBvcnRzID0gbigxKTsKICAgIH0sCiAgICBmdW5jdGlvbiAodCwgZSkgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBmdW5jdGlvbiBuKHQpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBuID0gZS5kaXNwYXRjaCwKICAgICAgICAgICAgbyA9IGUuZ2V0U3RhdGU7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIgPyByKG4sIG8sIHQpIDogZShyKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZS5fX2VzTW9kdWxlID0gITA7CiAgICAgIHZhciBvID0gbigpOwogICAgICAoby53aXRoRXh0cmFBcmd1bWVudCA9IG4pLCAoZS5kZWZhdWx0ID0gbyk7CiAgICB9LAogIF0pOwp9KTsKIShmdW5jdGlvbiAobiwgZSkgewogICJvYmplY3QiID09IHR5cGVvZiBleHBvcnRzICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBtb2R1bGUKICAgID8gKG1vZHVsZS5leHBvcnRzID0gZSgpKQogICAgOiAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgPyBkZWZpbmUoZSkKICAgIDogKG4uYXV0b2R1eCA9IGUoKSk7Cn0pKHRoaXMsIGZ1bmN0aW9uICgpIHsKICAidXNlIHN0cmljdCI7CiAgdmFyIGUsCiAgICBiID0gZnVuY3Rpb24gKG4sIGUsIHQpIHsKICAgICAgcmV0dXJuIG4KICAgICAgICAuc3BsaXQoIi4iKQogICAgICAgIC5maWx0ZXIoQm9vbGVhbikKICAgICAgICAuZXZlcnkoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IChlID0gZVtuXSk7CiAgICAgICAgfSkKICAgICAgICA/IGUKICAgICAgICA6IHQ7CiAgICB9LAogICAgdCA9IGZ1bmN0aW9uIChuKSB7CiAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgbiAmJiBuCiAgICAgICAgPyBuLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbi5zbGljZSgxKQogICAgICAgIDogIiI7CiAgICB9LAogICAgZyA9IGZ1bmN0aW9uIChuKSB7CiAgICAgIHJldHVybiBuOwogICAgfSwKICAgIGogPQogICAgICAoKGUgPSBmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBuOwogICAgICB9KSwKICAgICAgZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gZShuKSAmJiBuOwogICAgICB9KSwKICAgIE8gPSBmdW5jdGlvbiAobikgewogICAgICByZXR1cm4gImdldCIgKyB0KG4pOwogICAgfSwKICAgIGwgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gdChuW2VdLCBuKTsKICAgICAgfTsKICAgIH0sCiAgICBzID0gZnVuY3Rpb24gKG4pIHsKICAgICAgcmV0dXJuICJzZXQiICsgdChuKTsKICAgIH0sCiAgICBhID0gZnVuY3Rpb24gKG4sIGUsIHIsIHQpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBuICsgIi8iICsgZSksCiAgICAgICAgewogICAgICAgICAgY3JlYXRlOiBPYmplY3QuYXNzaWduKAogICAgICAgICAgICBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgICB9LAogICAgICAgICAgICB7IHR5cGU6IHQgfQogICAgICAgICAgKSwKICAgICAgICAgIHJlZHVjZXI6IGZ1bmN0aW9uIChuLCBlKSB7CiAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgbiwgciA/ICgoKHQgPSB7fSlbcl0gPSBlKSwgdCkgOiBlKTsKICAgICAgICAgIH0sCiAgICAgICAgfQogICAgICApOwogICAgfSwKICAgIHkgPSBmdW5jdGlvbiAobiwgZSwgdCkgewogICAgICB2YXIgciwKICAgICAgICBpLAogICAgICAgIHUsCiAgICAgICAgYyA9CiAgICAgICAgICAoKGkgPSBuKSwKICAgICAgICAgICh1ID0gZSksCiAgICAgICAgICBPYmplY3Qua2V5cyh1KS5yZWR1Y2UoZnVuY3Rpb24gKG4sIGUpIHsKICAgICAgICAgICAgdmFyIHQsCiAgICAgICAgICAgICAgciA9IHMoZSk7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG4sICgoKHQgPSB7fSlbcl0gPSBhKGksIHIsIGUpKSwgdCkpOwogICAgICAgICAgfSwge30pKSwKICAgICAgICBvID0gcyhuKTsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sICgoKHIgPSB7fSlbb10gPSBhKG4sIG8pKSwgciksIGMsIHQpOwogICAgfTsKICByZXR1cm4gT2JqZWN0LmFzc2lnbigKICAgIGZ1bmN0aW9uIChuKSB7CiAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9IHt9KTsKICAgICAgdmFyIGEgPSBuLmluaXRpYWw7CiAgICAgIHZvaWQgMCA9PT0gYSAmJiAoYSA9ICIiKTsKICAgICAgdmFyIGYgPSBuLmFjdGlvbnM7CiAgICAgIHZvaWQgMCA9PT0gZiAmJiAoZiA9IHt9KTsKICAgICAgdmFyIGUgPSBuLnNlbGVjdG9yczsKICAgICAgdm9pZCAwID09PSBlICYmIChlID0ge30pOwogICAgICB2YXIgZCA9IG4uc2xpY2U7CiAgICAgIHZvaWQgMCA9PT0gZCAmJiAoZCA9ICIiKTsKICAgICAgdmFyIGksCiAgICAgICAgdSwKICAgICAgICB0LAogICAgICAgIGMsCiAgICAgICAgciwKICAgICAgICBvLAogICAgICAgIHMsCiAgICAgICAgdiA9IE9iamVjdC5hc3NpZ24oCiAgICAgICAgICB7fSwKICAgICAgICAgICgoYyA9IGQpLAogICAgICAgICAgKHIgPSBhKSwKICAgICAgICAgIE9iamVjdC5rZXlzKHIpLnJlZHVjZShmdW5jdGlvbiAobiwgZSkgewogICAgICAgICAgICB2YXIgdCwgcjsKICAgICAgICAgICAgcmV0dXJuIGMKICAgICAgICAgICAgICA/IE9iamVjdC5hc3NpZ24oCiAgICAgICAgICAgICAgICAgIG4sCiAgICAgICAgICAgICAgICAgICgoKHQgPSB7fSlbTyhlKV0gPSBsKGMsIGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIoZSwgbik7CiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgdCkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICA6IE9iamVjdC5hc3NpZ24oCiAgICAgICAgICAgICAgICAgIG4sCiAgICAgICAgICAgICAgICAgICgoKHIgPSB7fSlbTyhlKV0gPSBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBiKGUsIG4pOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgcikKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICB9LCB7fSkpLAogICAgICAgICAgKChpID0gZCksCiAgICAgICAgICAodSA9IGUpLAogICAgICAgICAgT2JqZWN0LmFzc2lnbigKICAgICAgICAgICAgT2JqZWN0LmtleXModSkucmVkdWNlKGZ1bmN0aW9uIChuLCBlKSB7CiAgICAgICAgICAgICAgdmFyIHQsIHI7CiAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgID8gT2JqZWN0LmFzc2lnbihuLCAoKCh0ID0ge30pW2VdID0gbChpLCB1W2VdKSksIHQpKQogICAgICAgICAgICAgICAgOiBPYmplY3QuYXNzaWduKG4sICgoKHIgPSB7fSlbZV0gPSB1W2VdKSwgcikpOwogICAgICAgICAgICB9LCB7fSksCiAgICAgICAgICAgICgoKHQgPSB7fSlbTyhpKV0gPSBsKGksIGcpKSwgdCkKICAgICAgICAgICkpCiAgICAgICAgKSwKICAgICAgICBwID0KICAgICAgICAgICgocyA9IHkoKG8gPSBkKSwgYSwgZikpLAogICAgICAgICAgT2JqZWN0LmtleXMocykucmVkdWNlKGZ1bmN0aW9uIChuLCByKSB7CiAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbigKICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICgoKGUgPSB7fSlbcl0gPSBPYmplY3QuYXNzaWduKAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBuLCBlID0gW10sIHQgPSBhcmd1bWVudHMubGVuZ3RoOyB0LS07ICkKICAgICAgICAgICAgICAgICAgICBlW3RdID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHR5cGU6IG8gKyAiLyIgKyByLAogICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6CiAgICAgICAgICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBzW3JdLmNyZWF0ZQogICAgICAgICAgICAgICAgICAgICAgICA/IChuID0gc1tyXSkuY3JlYXRlLmFwcGx5KG4sIGUpCiAgICAgICAgICAgICAgICAgICAgICAgIDogZVswXSwKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7IHR5cGU6IG8gKyAiLyIgKyByIH0KICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICBlKQogICAgICAgICAgICApOwogICAgICAgICAgfSwge30pKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpbml0aWFsOiBhLAogICAgICAgIHJlZHVjZXI6IGZ1bmN0aW9uIChuLCBlKSB7CiAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSBhKSwgdm9pZCAwID09PSBlICYmIChlID0ge30pOwogICAgICAgICAgdmFyIHQgPSBlLnR5cGUsCiAgICAgICAgICAgIHIgPSBlLnBheWxvYWQsCiAgICAgICAgICAgIGkgPSB0ID8gdC5zcGxpdCgiLyIpIDogInVua25vd24vdW5rbm93biIuc3BsaXQoIi8iKSwKICAgICAgICAgICAgdSA9IGlbMF0sCiAgICAgICAgICAgIGMgPSBpWzFdLAogICAgICAgICAgICBvID0geShkLCBhLCB7fSksCiAgICAgICAgICAgIHMgPSBbYihjICsgIi5yZWR1Y2VyIiwgZiksIGZbY10sIGIoYyArICIucmVkdWNlciIsIG8pXS5yZWR1Y2VSaWdodCgKICAgICAgICAgICAgICBmdW5jdGlvbiAobiwgZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGooZSkgfHwgbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4gdSA9PT0gZCAmJiAoZltjXSB8fCBvW2NdKQogICAgICAgICAgICA/IHMKICAgICAgICAgICAgICA/IHMobiwgcikKICAgICAgICAgICAgICA6IE9iamVjdC5hc3NpZ24oe30sIG4sIHIpCiAgICAgICAgICAgIDogbjsKICAgICAgICB9LAogICAgICAgIHNsaWNlOiBkLAogICAgICAgIHNlbGVjdG9yczogdiwKICAgICAgICBhY3Rpb25zOiBwLAogICAgICB9OwogICAgfSwKICAgIHsKICAgICAgaWQ6IGcsCiAgICAgIGFzc2lnbjogZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG4sIGUpIHsKICAgICAgICAgIHZhciB0OwogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG4sICgoKHQgPSB7fSlbcl0gPSBlKSwgdCkpOwogICAgICAgIH07CiAgICAgIH0sCiAgICB9CiAgKTsKfSk7CiEoZnVuY3Rpb24gKGUsIHQpIHsKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgPyBkZWZpbmUoIlJlc2VsZWN0IiwgWyJleHBvcnRzIl0sIHQpCiAgICA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBleHBvcnRzCiAgICA/IHQoZXhwb3J0cykKICAgIDogKHQoKHQgPSB7fSkpLCAoZS5SZXNlbGVjdCA9IHQpKTsKfSkodGhpcywgZnVuY3Rpb24gKGUpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIG8oZSwgdCkgewogICAgcmV0dXJuIGUgPT09IHQ7CiAgfQoKICBmdW5jdGlvbiBhKGUpIHsKICAgIHZhciB0ID0gMSA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiBvLAogICAgICByID0gbnVsbCwKICAgICAgbiA9IG51bGw7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gKAogICAgICAgIChmdW5jdGlvbiAoZSwgdCwgcikgewogICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgbnVsbCAhPT0gciAmJiB0Lmxlbmd0aCA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQubGVuZ3RoLCBvID0gMDsgbyA8IG47IG8rKykKICAgICAgICAgICAgICBpZiAoIWUodFtvXSwgcltvXSkpIHJldHVybjsKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgICB9CiAgICAgICAgfSkodCwgciwgYXJndW1lbnRzKSB8fCAobiA9IGUuYXBwbHkobnVsbCwgYXJndW1lbnRzKSksCiAgICAgICAgKHIgPSBhcmd1bWVudHMpLAogICAgICAgIG4KICAgICAgKTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiB0KGwpIHsKICAgIGZvciAoCiAgICAgIHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCwgZiA9IEFycmF5KDEgPCBlID8gZSAtIDEgOiAwKSwgdCA9IDE7CiAgICAgIHQgPCBlOwogICAgICB0KysKICAgICkKICAgICAgZlt0IC0gMV0gPSBhcmd1bWVudHNbdF07CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICBmb3IgKHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCwgdCA9IEFycmF5KGUpLCByID0gMDsgciA8IGU7IHIrKykKICAgICAgICB0W3JdID0gYXJndW1lbnRzW3JdOwogICAgICB2YXIgbiA9IDAsCiAgICAgICAgbyA9IHQucG9wKCksCiAgICAgICAgdSA9IChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKAogICAgICAgICAgICAoZSA9IEFycmF5LmlzQXJyYXkoZVswXSkgPyBlWzBdIDogZSkuZXZlcnkoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZTsKICAgICAgICAgICAgfSkKICAgICAgICAgICkKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICB0aHJvdyAoCiAgICAgICAgICAgICgoZSA9IGUKICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGU7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuam9pbigiLCAiKSksCiAgICAgICAgICAgIG5ldyBFcnJvcigKICAgICAgICAgICAgICAiU2VsZWN0b3IgY3JlYXRvcnMgZXhwZWN0IGFsbCBpbnB1dC1zZWxlY3RvcnMgdG8gYmUgZnVuY3Rpb25zLCBpbnN0ZWFkIHJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgdHlwZXM6IFsiICsKICAgICAgICAgICAgICAgIGUgKwogICAgICAgICAgICAgICAgIl0iCiAgICAgICAgICAgICkpCiAgICAgICAgICApOwogICAgICAgIH0pKHQpLAogICAgICAgIGMgPSBsLmFwcGx5KAogICAgICAgICAgdm9pZCAwLAogICAgICAgICAgWwogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4rKywgby5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9LAogICAgICAgICAgXS5jb25jYXQoZikKICAgICAgICApLAogICAgICAgIGkgPSBhKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IHUubGVuZ3RoLCByID0gMDsgciA8IHQ7IHIrKykKICAgICAgICAgICAgZS5wdXNoKHVbcl0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7CiAgICAgICAgICByZXR1cm4gYy5hcHBseShudWxsLCBlKTsKICAgICAgICB9KTsKICAgICAgcmV0dXJuICgKICAgICAgICAoaS5yZXN1bHRGdW5jID0gbyksCiAgICAgICAgKGkucmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9KSwKICAgICAgICAoaS5yZXNldFJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIChuID0gMCk7CiAgICAgICAgfSksCiAgICAgICAgaQogICAgICApOwogICAgfTsKICB9CgogIChlLl9fZXNNb2R1bGUgPSAhMCksCiAgICAoZS5kZWZhdWx0TWVtb2l6ZSA9IGEpLAogICAgKGUuY3JlYXRlU2VsZWN0b3JDcmVhdG9yID0gdCksCiAgICAoZS5jcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZSA9CiAgICAgICAgMSA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiByOwogICAgICBpZiAoIm9iamVjdCIgIT0gdHlwZW9mIHQpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgImNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvciBleHBlY3RzIGZpcnN0IGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCB3aGVyZSBlYWNoIHByb3BlcnR5IGlzIGEgc2VsZWN0b3IsIGluc3RlYWQgcmVjZWl2ZWQgYSAiICsKICAgICAgICAgICAgdHlwZW9mIHQKICAgICAgICApOwogICAgICB2YXIgbiA9IE9iamVjdC5rZXlzKHQpOwogICAgICByZXR1cm4gZSgKICAgICAgICBuLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHRbZV07CiAgICAgICAgfSksCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgZm9yICh2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGgsIHQgPSBBcnJheShlKSwgciA9IDA7IHIgPCBlOyByKyspCiAgICAgICAgICAgIHRbcl0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgICByZXR1cm4gdC5yZWR1Y2UoZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgcmV0dXJuIChlW25bcl1dID0gdCksIGU7CiAgICAgICAgICB9LCB7fSk7CiAgICAgICAgfQogICAgICApOwogICAgfSk7CiAgdmFyIHIgPSAoZS5jcmVhdGVTZWxlY3RvciA9IHQoYSkpOwp9KTsKLyogRm9udCBGYWNlIE9ic2VydmVyIHYyLjEuMCAtIMKpIEJyYW0gU3RlaW4uIExpY2Vuc2U6IEJTRC0zLUNsYXVzZSAqLwooZnVuY3Rpb24gKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgZiwKICAgIGcgPSBbXTsKCiAgZnVuY3Rpb24gbChhKSB7CiAgICBnLnB1c2goYSk7CiAgICAxID09IGcubGVuZ3RoICYmIGYoKTsKICB9CgogIGZ1bmN0aW9uIG0oKSB7CiAgICBmb3IgKDsgZy5sZW5ndGg7ICkgZ1swXSgpLCBnLnNoaWZ0KCk7CiAgfQoKICBmID0gZnVuY3Rpb24gKCkgewogICAgc2V0VGltZW91dChtKTsKICB9OwoKICBmdW5jdGlvbiBuKGEpIHsKICAgIHRoaXMuYSA9IHA7CiAgICB0aGlzLmIgPSB2b2lkIDA7CiAgICB0aGlzLmYgPSBbXTsKICAgIHZhciBiID0gdGhpczsKICAgIHRyeSB7CiAgICAgIGEoCiAgICAgICAgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHEoYiwgYSk7CiAgICAgICAgfSwKICAgICAgICBmdW5jdGlvbiAoYSkgewogICAgICAgICAgcihiLCBhKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9IGNhdGNoIChjKSB7CiAgICAgIHIoYiwgYyk7CiAgICB9CiAgfQoKICB2YXIgcCA9IDI7CgogIGZ1bmN0aW9uIHQoYSkgewogICAgcmV0dXJuIG5ldyBuKGZ1bmN0aW9uIChiLCBjKSB7CiAgICAgIGMoYSk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHUoYSkgewogICAgcmV0dXJuIG5ldyBuKGZ1bmN0aW9uIChiKSB7CiAgICAgIGIoYSk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHEoYSwgYikgewogICAgaWYgKGEuYSA9PSBwKSB7CiAgICAgIGlmIChiID09IGEpIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICAgICAgdmFyIGMgPSAhMTsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgZCA9IGIgJiYgYi50aGVuOwogICAgICAgIGlmIChudWxsICE9IGIgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGIgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZCkgewogICAgICAgICAgZC5jYWxsKAogICAgICAgICAgICBiLAogICAgICAgICAgICBmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgIGMgfHwgcShhLCBiKTsKICAgICAgICAgICAgICBjID0gITA7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgYyB8fCByKGEsIGIpOwogICAgICAgICAgICAgIGMgPSAhMDsKICAgICAgICAgICAgfQogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjIHx8IHIoYSwgZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGEuYSA9IDA7CiAgICAgIGEuYiA9IGI7CiAgICAgIHYoYSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiByKGEsIGIpIHsKICAgIGlmIChhLmEgPT0gcCkgewogICAgICBpZiAoYiA9PSBhKSB0aHJvdyBuZXcgVHlwZUVycm9yKCk7CiAgICAgIGEuYSA9IDE7CiAgICAgIGEuYiA9IGI7CiAgICAgIHYoYSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB2KGEpIHsKICAgIGwoZnVuY3Rpb24gKCkgewogICAgICBpZiAoYS5hICE9IHApCiAgICAgICAgZm9yICg7IGEuZi5sZW5ndGg7ICkgewogICAgICAgICAgdmFyIGIgPSBhLmYuc2hpZnQoKSwKICAgICAgICAgICAgYyA9IGJbMF0sCiAgICAgICAgICAgIGQgPSBiWzFdLAogICAgICAgICAgICBlID0gYlsyXSwKICAgICAgICAgICAgYiA9IGJbM107CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAwID09IGEuYQogICAgICAgICAgICAgID8gImZ1bmN0aW9uIiA9PSB0eXBlb2YgYwogICAgICAgICAgICAgICAgPyBlKGMuY2FsbCh2b2lkIDAsIGEuYikpCiAgICAgICAgICAgICAgICA6IGUoYS5iKQogICAgICAgICAgICAgIDogMSA9PSBhLmEgJiYKICAgICAgICAgICAgICAgICgiZnVuY3Rpb24iID09IHR5cGVvZiBkID8gZShkLmNhbGwodm9pZCAwLCBhLmIpKSA6IGIoYS5iKSk7CiAgICAgICAgICB9IGNhdGNoIChoKSB7CiAgICAgICAgICAgIGIoaCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CiAgfQoKICBuLnByb3RvdHlwZS5nID0gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiB0aGlzLmModm9pZCAwLCBhKTsKICB9OwogIG4ucHJvdG90eXBlLmMgPSBmdW5jdGlvbiAoYSwgYikgewogICAgdmFyIGMgPSB0aGlzOwogICAgcmV0dXJuIG5ldyBuKGZ1bmN0aW9uIChkLCBlKSB7CiAgICAgIGMuZi5wdXNoKFthLCBiLCBkLCBlXSk7CiAgICAgIHYoYyk7CiAgICB9KTsKICB9OwoKICBmdW5jdGlvbiB3KGEpIHsKICAgIHJldHVybiBuZXcgbihmdW5jdGlvbiAoYiwgYykgewogICAgICBmdW5jdGlvbiBkKGMpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIGhbY10gPSBkOwogICAgICAgICAgZSArPSAxOwogICAgICAgICAgZSA9PSBhLmxlbmd0aCAmJiBiKGgpOwogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBlID0gMCwKICAgICAgICBoID0gW107CiAgICAgIDAgPT0gYS5sZW5ndGggJiYgYihoKTsKICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhLmxlbmd0aDsgayArPSAxKSB1KGFba10pLmMoZChrKSwgYyk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHgoYSkgewogICAgcmV0dXJuIG5ldyBuKGZ1bmN0aW9uIChiLCBjKSB7CiAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgYS5sZW5ndGg7IGQgKz0gMSkgdShhW2RdKS5jKGIsIGMpOwogICAgfSk7CiAgfQogIHdpbmRvdy5Qcm9taXNlIHx8CiAgICAoKHdpbmRvdy5Qcm9taXNlID0gbiksCiAgICAod2luZG93LlByb21pc2UucmVzb2x2ZSA9IHUpLAogICAgKHdpbmRvdy5Qcm9taXNlLnJlamVjdCA9IHQpLAogICAgKHdpbmRvdy5Qcm9taXNlLnJhY2UgPSB4KSwKICAgICh3aW5kb3cuUHJvbWlzZS5hbGwgPSB3KSwKICAgICh3aW5kb3cuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IG4ucHJvdG90eXBlLmMpLAogICAgKHdpbmRvdy5Qcm9taXNlLnByb3RvdHlwZVsiY2F0Y2giXSA9IG4ucHJvdG90eXBlLmcpKTsKfSkoKTsKCihmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gbChhLCBiKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyCiAgICAgID8gYS5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBiLCAhMSkKICAgICAgOiBhLmF0dGFjaEV2ZW50KCJzY3JvbGwiLCBiKTsKICB9CgogIGZ1bmN0aW9uIG0oYSkgewogICAgZG9jdW1lbnQuYm9keQogICAgICA/IGEoKQogICAgICA6IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIKICAgICAgPyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZnVuY3Rpb24gYygpIHsKICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBjKTsKICAgICAgICAgIGEoKTsKICAgICAgICB9KQogICAgICA6IGRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBmdW5jdGlvbiBrKCkgewogICAgICAgICAgaWYgKAogICAgICAgICAgICAiaW50ZXJhY3RpdmUiID09IGRvY3VtZW50LnJlYWR5U3RhdGUgfHwKICAgICAgICAgICAgImNvbXBsZXRlIiA9PSBkb2N1bWVudC5yZWFkeVN0YXRlCiAgICAgICAgICApCiAgICAgICAgICAgIGRvY3VtZW50LmRldGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBrKSwgYSgpOwogICAgICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gdChhKSB7CiAgICB0aGlzLmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHRoaXMuYS5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwgInRydWUiKTsKICAgIHRoaXMuYS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhKSk7CiAgICB0aGlzLmIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB0aGlzLmMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB0aGlzLmggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB0aGlzLmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CiAgICB0aGlzLmcgPSAtMTsKICAgIHRoaXMuYi5zdHlsZS5jc3NUZXh0ID0KICAgICAgIm1heC13aWR0aDpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7b3ZlcmZsb3c6c2Nyb2xsO2ZvbnQtc2l6ZToxNnB4OyI7CiAgICB0aGlzLmMuc3R5bGUuY3NzVGV4dCA9CiAgICAgICJtYXgtd2lkdGg6bm9uZTtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO292ZXJmbG93OnNjcm9sbDtmb250LXNpemU6MTZweDsiOwogICAgdGhpcy5mLnN0eWxlLmNzc1RleHQgPQogICAgICAibWF4LXdpZHRoOm5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtvdmVyZmxvdzpzY3JvbGw7Zm9udC1zaXplOjE2cHg7IjsKICAgIHRoaXMuaC5zdHlsZS5jc3NUZXh0ID0KICAgICAgImRpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjIwMCU7aGVpZ2h0OjIwMCU7Zm9udC1zaXplOjE2cHg7bWF4LXdpZHRoOm5vbmU7IjsKICAgIHRoaXMuYi5hcHBlbmRDaGlsZCh0aGlzLmgpOwogICAgdGhpcy5jLmFwcGVuZENoaWxkKHRoaXMuZik7CiAgICB0aGlzLmEuYXBwZW5kQ2hpbGQodGhpcy5iKTsKICAgIHRoaXMuYS5hcHBlbmRDaGlsZCh0aGlzLmMpOwogIH0KCiAgZnVuY3Rpb24gdShhLCBiKSB7CiAgICBhLmEuc3R5bGUuY3NzVGV4dCA9CiAgICAgICJtYXgtd2lkdGg6bm9uZTttaW4td2lkdGg6MjBweDttaW4taGVpZ2h0OjIwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7b3ZlcmZsb3c6aGlkZGVuO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOmF1dG87bWFyZ2luOjA7cGFkZGluZzowO3RvcDotOTk5cHg7d2hpdGUtc3BhY2U6bm93cmFwO2ZvbnQtc3ludGhlc2lzOm5vbmU7Zm9udDoiICsKICAgICAgYiArCiAgICAgICI7IjsKICB9CgogIGZ1bmN0aW9uIHooYSkgewogICAgdmFyIGIgPSBhLmEub2Zmc2V0V2lkdGgsCiAgICAgIGMgPSBiICsgMTAwOwogICAgYS5mLnN0eWxlLndpZHRoID0gYyArICJweCI7CiAgICBhLmMuc2Nyb2xsTGVmdCA9IGM7CiAgICBhLmIuc2Nyb2xsTGVmdCA9IGEuYi5zY3JvbGxXaWR0aCArIDEwMDsKICAgIHJldHVybiBhLmcgIT09IGIgPyAoKGEuZyA9IGIpLCAhMCkgOiAhMTsKICB9CgogIGZ1bmN0aW9uIEEoYSwgYikgewogICAgZnVuY3Rpb24gYygpIHsKICAgICAgdmFyIGEgPSBrOwogICAgICB6KGEpICYmIGEuYS5wYXJlbnROb2RlICYmIGIoYS5nKTsKICAgIH0KCiAgICB2YXIgayA9IGE7CiAgICBsKGEuYiwgYyk7CiAgICBsKGEuYywgYyk7CiAgICB6KGEpOwogIH0KCiAgZnVuY3Rpb24gQihhLCBiKSB7CiAgICB2YXIgYyA9IGIgfHwge307CiAgICB0aGlzLmZhbWlseSA9IGE7CiAgICB0aGlzLnN0eWxlID0gYy5zdHlsZSB8fCAibm9ybWFsIjsKICAgIHRoaXMud2VpZ2h0ID0gYy53ZWlnaHQgfHwgIm5vcm1hbCI7CiAgICB0aGlzLnN0cmV0Y2ggPSBjLnN0cmV0Y2ggfHwgIm5vcm1hbCI7CiAgfQoKICB2YXIgQyA9IG51bGwsCiAgICBEID0gbnVsbCwKICAgIEUgPSBudWxsLAogICAgRiA9IG51bGw7CgogIGZ1bmN0aW9uIEcoKSB7CiAgICBpZiAobnVsbCA9PT0gRCkKICAgICAgaWYgKEooKSAmJiAvQXBwbGUvLnRlc3Qod2luZG93Lm5hdmlnYXRvci52ZW5kb3IpKSB7CiAgICAgICAgdmFyIGEgPSAvQXBwbGVXZWJLaXRcLyhbMC05XSspKD86XC4oWzAtOV0rKSkoPzpcLihbMC05XSspKS8uZXhlYygKICAgICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50CiAgICAgICAgKTsKICAgICAgICBEID0gISFhICYmIDYwMyA+IHBhcnNlSW50KGFbMV0sIDEwKTsKICAgICAgfSBlbHNlIEQgPSAhMTsKICAgIHJldHVybiBEOwogIH0KCiAgZnVuY3Rpb24gSigpIHsKICAgIG51bGwgPT09IEYgJiYgKEYgPSAhIWRvY3VtZW50LmZvbnRzKTsKICAgIHJldHVybiBGOwogIH0KCiAgZnVuY3Rpb24gSygpIHsKICAgIGlmIChudWxsID09PSBFKSB7CiAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICAgIHRyeSB7CiAgICAgICAgYS5zdHlsZS5mb250ID0gImNvbmRlbnNlZCAxMDBweCBzYW5zLXNlcmlmIjsKICAgICAgfSBjYXRjaCAoYikge30KICAgICAgRSA9ICIiICE9PSBhLnN0eWxlLmZvbnQ7CiAgICB9CiAgICByZXR1cm4gRTsKICB9CgogIGZ1bmN0aW9uIEwoYSwgYikgewogICAgcmV0dXJuIFthLnN0eWxlLCBhLndlaWdodCwgSygpID8gYS5zdHJldGNoIDogIiIsICIxMDBweCIsIGJdLmpvaW4oIiAiKTsKICB9CgogIEIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoYSwgYikgewogICAgdmFyIGMgPSB0aGlzLAogICAgICBrID0gYSB8fCAiQkVTYnN3eSIsCiAgICAgIHIgPSAwLAogICAgICBuID0gYiB8fCAzZTMsCiAgICAgIEggPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgewogICAgICBpZiAoSigpICYmICFHKCkpIHsKICAgICAgICB2YXIgTSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBIID49IG4KICAgICAgICAgICAgICAgID8gYihFcnJvcigiIiArIG4gKyAibXMgdGltZW91dCBleGNlZWRlZCIpKQogICAgICAgICAgICAgICAgOiBkb2N1bWVudC5mb250cwogICAgICAgICAgICAgICAgICAgIC5sb2FkKEwoYywgJyInICsgYy5mYW1pbHkgKyAnIicpLCBrKQogICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAxIDw9IGMubGVuZ3RoID8gYSgpIDogc2V0VGltZW91dChlLCAyNSk7CiAgICAgICAgICAgICAgICAgICAgfSwgYik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGUoKTsKICAgICAgICAgIH0pLAogICAgICAgICAgTiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBjKSB7CiAgICAgICAgICAgIHIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBjKEVycm9yKCIiICsgbiArICJtcyB0aW1lb3V0IGV4Y2VlZGVkIikpOwogICAgICAgICAgICB9LCBuKTsKICAgICAgICAgIH0pOwogICAgICAgIFByb21pc2UucmFjZShbTiwgTV0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHIpOwogICAgICAgICAgYShjKTsKICAgICAgICB9LCBiKTsKICAgICAgfSBlbHNlCiAgICAgICAgbShmdW5jdGlvbiAoKSB7CiAgICAgICAgICBmdW5jdGlvbiB2KCkgewogICAgICAgICAgICB2YXIgYjsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIChiID0KICAgICAgICAgICAgICAgICgtMSAhPSBmICYmIC0xICE9IGcpIHx8CiAgICAgICAgICAgICAgICAoLTEgIT0gZiAmJiAtMSAhPSBoKSB8fAogICAgICAgICAgICAgICAgKC0xICE9IGcgJiYgLTEgIT0gaCkpCiAgICAgICAgICAgICkKICAgICAgICAgICAgICAoYiA9IGYgIT0gZyAmJiBmICE9IGggJiYgZyAhPSBoKSB8fAogICAgICAgICAgICAgICAgKG51bGwgPT09IEMgJiYKICAgICAgICAgICAgICAgICAgKChiID0gL0FwcGxlV2ViS2l0XC8oWzAtOV0rKSg/OlwuKFswLTldKykpLy5leGVjKAogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50CiAgICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgICAoQyA9CiAgICAgICAgICAgICAgICAgICAgISFiICYmCiAgICAgICAgICAgICAgICAgICAgKDUzNiA+IHBhcnNlSW50KGJbMV0sIDEwKSB8fAogICAgICAgICAgICAgICAgICAgICAgKDUzNiA9PT0gcGFyc2VJbnQoYlsxXSwgMTApICYmCiAgICAgICAgICAgICAgICAgICAgICAgIDExID49IHBhcnNlSW50KGJbMl0sIDEwKSkpKSksCiAgICAgICAgICAgICAgICAoYiA9CiAgICAgICAgICAgICAgICAgIEMgJiYKICAgICAgICAgICAgICAgICAgKChmID09IHcgJiYgZyA9PSB3ICYmIGggPT0gdykgfHwKICAgICAgICAgICAgICAgICAgICAoZiA9PSB4ICYmIGcgPT0geCAmJiBoID09IHgpIHx8CiAgICAgICAgICAgICAgICAgICAgKGYgPT0geSAmJiBnID09IHkgJiYgaCA9PSB5KSkpKSwKICAgICAgICAgICAgICAgIChiID0gIWIpOwogICAgICAgICAgICBiICYmCiAgICAgICAgICAgICAgKGQucGFyZW50Tm9kZSAmJiBkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCksCiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHIpLAogICAgICAgICAgICAgIGEoYykpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIEkoKSB7CiAgICAgICAgICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIEggPj0gbikKICAgICAgICAgICAgICBkLnBhcmVudE5vZGUgJiYgZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpLAogICAgICAgICAgICAgICAgYihFcnJvcigiIiArIG4gKyAibXMgdGltZW91dCBleGNlZWRlZCIpKTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5oaWRkZW47CiAgICAgICAgICAgICAgaWYgKCEwID09PSBhIHx8IHZvaWQgMCA9PT0gYSkKICAgICAgICAgICAgICAgIChmID0gZS5hLm9mZnNldFdpZHRoKSwKICAgICAgICAgICAgICAgICAgKGcgPSBwLmEub2Zmc2V0V2lkdGgpLAogICAgICAgICAgICAgICAgICAoaCA9IHEuYS5vZmZzZXRXaWR0aCksCiAgICAgICAgICAgICAgICAgIHYoKTsKICAgICAgICAgICAgICByID0gc2V0VGltZW91dChJLCA1MCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZSA9IG5ldyB0KGspLAogICAgICAgICAgICBwID0gbmV3IHQoayksCiAgICAgICAgICAgIHEgPSBuZXcgdChrKSwKICAgICAgICAgICAgZiA9IC0xLAogICAgICAgICAgICBnID0gLTEsCiAgICAgICAgICAgIGggPSAtMSwKICAgICAgICAgICAgdyA9IC0xLAogICAgICAgICAgICB4ID0gLTEsCiAgICAgICAgICAgIHkgPSAtMSwKICAgICAgICAgICAgZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgZC5kaXIgPSAibHRyIjsKICAgICAgICAgIHUoZSwgTChjLCAic2Fucy1zZXJpZiIpKTsKICAgICAgICAgIHUocCwgTChjLCAic2VyaWYiKSk7CiAgICAgICAgICB1KHEsIEwoYywgIm1vbm9zcGFjZSIpKTsKICAgICAgICAgIGQuYXBwZW5kQ2hpbGQoZS5hKTsKICAgICAgICAgIGQuYXBwZW5kQ2hpbGQocC5hKTsKICAgICAgICAgIGQuYXBwZW5kQ2hpbGQocS5hKTsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZCk7CiAgICAgICAgICB3ID0gZS5hLm9mZnNldFdpZHRoOwogICAgICAgICAgeCA9IHAuYS5vZmZzZXRXaWR0aDsKICAgICAgICAgIHkgPSBxLmEub2Zmc2V0V2lkdGg7CiAgICAgICAgICBJKCk7CiAgICAgICAgICBBKGUsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIGYgPSBhOwogICAgICAgICAgICB2KCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHUoZSwgTChjLCAnIicgKyBjLmZhbWlseSArICciLHNhbnMtc2VyaWYnKSk7CiAgICAgICAgICBBKHAsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIGcgPSBhOwogICAgICAgICAgICB2KCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHUocCwgTChjLCAnIicgKyBjLmZhbWlseSArICciLHNlcmlmJykpOwogICAgICAgICAgQShxLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICBoID0gYTsKICAgICAgICAgICAgdigpOwogICAgICAgICAgfSk7CiAgICAgICAgICB1KHEsIEwoYywgJyInICsgYy5mYW1pbHkgKyAnIixtb25vc3BhY2UnKSk7CiAgICAgICAgfSk7CiAgICB9KTsKICB9OwogICJvYmplY3QiID09PSB0eXBlb2YgbW9kdWxlCiAgICA/IChtb2R1bGUuZXhwb3J0cyA9IEIpCiAgICA6ICgod2luZG93LkZvbnRGYWNlT2JzZXJ2ZXIgPSBCKSwKICAgICAgKHdpbmRvdy5Gb250RmFjZU9ic2VydmVyLnByb3RvdHlwZS5sb2FkID0gQi5wcm90b3R5cGUubG9hZCkpOwp9KSgpOwoKLyohCiAgICBsb2NhbEZvcmFnZSAtLSBPZmZsaW5lIFN0b3JhZ2UsIEltcHJvdmVkCiAgICBWZXJzaW9uIDEuOS4wCiAgICBodHRwczovL2xvY2FsZm9yYWdlLmdpdGh1Yi5pby9sb2NhbEZvcmFnZQogICAgKGMpIDIwMTMtMjAxNyBNb3ppbGxhLCBBcGFjaGUgTGljZW5zZSAyLjAKKi8KIShmdW5jdGlvbiAoYSkgewogIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgZXhwb3J0cyAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbW9kdWxlKQogICAgbW9kdWxlLmV4cG9ydHMgPSBhKCk7CiAgZWxzZSBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQpIGRlZmluZShbXSwgYSk7CiAgZWxzZSB7CiAgICB2YXIgYjsKICAgIChiID0KICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdwogICAgICAgID8gd2luZG93CiAgICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZ2xvYmFsCiAgICAgICAgPyBnbG9iYWwKICAgICAgICA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBzZWxmCiAgICAgICAgPyBzZWxmCiAgICAgICAgOiB0aGlzKSwKICAgICAgKGIubG9jYWxmb3JhZ2UgPSBhKCkpOwogIH0KfSkoZnVuY3Rpb24gKCkgewogIHJldHVybiAoZnVuY3Rpb24gYShiLCBjLCBkKSB7CiAgICBmdW5jdGlvbiBlKGcsIGgpIHsKICAgICAgaWYgKCFjW2ddKSB7CiAgICAgICAgaWYgKCFiW2ddKSB7CiAgICAgICAgICB2YXIgaSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHJlcXVpcmUgJiYgcmVxdWlyZTsKICAgICAgICAgIGlmICghaCAmJiBpKSByZXR1cm4gaShnLCAhMCk7CiAgICAgICAgICBpZiAoZikgcmV0dXJuIGYoZywgITApOwogICAgICAgICAgdmFyIGogPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIiArIGcgKyAiJyIpOwogICAgICAgICAgdGhyb3cgKChqLmNvZGUgPSAiTU9EVUxFX05PVF9GT1VORCIpLCBqKTsKICAgICAgICB9CiAgICAgICAgdmFyIGsgPSAoY1tnXSA9IHsgZXhwb3J0czoge30gfSk7CiAgICAgICAgYltnXVswXS5jYWxsKAogICAgICAgICAgay5leHBvcnRzLAogICAgICAgICAgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgdmFyIGMgPSBiW2ddWzFdW2FdOwogICAgICAgICAgICByZXR1cm4gZShjIHx8IGEpOwogICAgICAgICAgfSwKICAgICAgICAgIGssCiAgICAgICAgICBrLmV4cG9ydHMsCiAgICAgICAgICBhLAogICAgICAgICAgYiwKICAgICAgICAgIGMsCiAgICAgICAgICBkCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gY1tnXS5leHBvcnRzOwogICAgfQoKICAgIGZvciAoCiAgICAgIHZhciBmID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgcmVxdWlyZSAmJiByZXF1aXJlLCBnID0gMDsKICAgICAgZyA8IGQubGVuZ3RoOwogICAgICBnKysKICAgICkKICAgICAgZShkW2ddKTsKICAgIHJldHVybiBlOwogIH0pKAogICAgewogICAgICAxOiBbCiAgICAgICAgZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICAgIChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAidXNlIHN0cmljdCI7CgogICAgICAgICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgICAgICAgIGsgPSAhMDsKICAgICAgICAgICAgICBmb3IgKHZhciBhLCBiLCBjID0gbC5sZW5ndGg7IGM7ICkgewogICAgICAgICAgICAgICAgZm9yIChiID0gbCwgbCA9IFtdLCBhID0gLTE7ICsrYSA8IGM7ICkgYlthXSgpOwogICAgICAgICAgICAgICAgYyA9IGwubGVuZ3RoOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBrID0gITE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGQoYSkgewogICAgICAgICAgICAgIDEgIT09IGwucHVzaChhKSB8fCBrIHx8IGUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgZiA9IGEuTXV0YXRpb25PYnNlcnZlciB8fCBhLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7CiAgICAgICAgICAgIGlmIChmKSB7CiAgICAgICAgICAgICAgdmFyIGcgPSAwLAogICAgICAgICAgICAgICAgaCA9IG5ldyBmKGMpLAogICAgICAgICAgICAgICAgaSA9IGEuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiIpOwogICAgICAgICAgICAgIGgub2JzZXJ2ZShpLCB7IGNoYXJhY3RlckRhdGE6ICEwIH0pLAogICAgICAgICAgICAgICAgKGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGkuZGF0YSA9IGcgPSArK2cgJSAyOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5zZXRJbW1lZGlhdGUgfHwgdm9pZCAwID09PSBhLk1lc3NhZ2VDaGFubmVsKQogICAgICAgICAgICAgIGUgPQogICAgICAgICAgICAgICAgImRvY3VtZW50IiBpbiBhICYmCiAgICAgICAgICAgICAgICAib25yZWFkeXN0YXRlY2hhbmdlIiBpbiBhLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpCiAgICAgICAgICAgICAgICAgID8gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBhLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgICAgICAgICAgICAgICAgKGIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBjKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChiID0gbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgYS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoYik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYywgMCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgdmFyIGogPSBuZXcgYS5NZXNzYWdlQ2hhbm5lbCgpOwogICAgICAgICAgICAgIChqLnBvcnQxLm9ubWVzc2FnZSA9IGMpLAogICAgICAgICAgICAgICAgKGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGoucG9ydDIucG9zdE1lc3NhZ2UoMCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaywKICAgICAgICAgICAgICBsID0gW107CiAgICAgICAgICAgIGIuZXhwb3J0cyA9IGQ7CiAgICAgICAgICB9LmNhbGwoCiAgICAgICAgICAgIHRoaXMsCiAgICAgICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWwKICAgICAgICAgICAgICA/IGdsb2JhbAogICAgICAgICAgICAgIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIHNlbGYKICAgICAgICAgICAgICA/IHNlbGYKICAgICAgICAgICAgICA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cKICAgICAgICAgICAgICA/IHdpbmRvdwogICAgICAgICAgICAgIDoge30KICAgICAgICAgICkpOwogICAgICAgIH0sCiAgICAgICAge30sCiAgICAgIF0sCiAgICAgIDI6IFsKICAgICAgICBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgICAgIGZ1bmN0aW9uIGQoKSB7fQoKICAgICAgICAgIGZ1bmN0aW9uIGUoYSkgewogICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgYSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb24iKTsKICAgICAgICAgICAgKHRoaXMuc3RhdGUgPSBzKSwKICAgICAgICAgICAgICAodGhpcy5xdWV1ZSA9IFtdKSwKICAgICAgICAgICAgICAodGhpcy5vdXRjb21lID0gdm9pZCAwKSwKICAgICAgICAgICAgICBhICE9PSBkICYmIGkodGhpcywgYSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gZihhLCBiLCBjKSB7CiAgICAgICAgICAgICh0aGlzLnByb21pc2UgPSBhKSwKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBiICYmCiAgICAgICAgICAgICAgICAoKHRoaXMub25GdWxmaWxsZWQgPSBiKSwKICAgICAgICAgICAgICAgICh0aGlzLmNhbGxGdWxmaWxsZWQgPSB0aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZCkpLAogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGMgJiYKICAgICAgICAgICAgICAgICgodGhpcy5vblJlamVjdGVkID0gYyksCiAgICAgICAgICAgICAgICAodGhpcy5jYWxsUmVqZWN0ZWQgPSB0aGlzLm90aGVyQ2FsbFJlamVjdGVkKSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gZyhhLCBiLCBjKSB7CiAgICAgICAgICAgIG8oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBkOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBkID0gYihjKTsKICAgICAgICAgICAgICB9IGNhdGNoIChiKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QoYSwgYik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGQgPT09IGEKICAgICAgICAgICAgICAgID8gcC5yZWplY3QoCiAgICAgICAgICAgICAgICAgICAgYSwKICAgICAgICAgICAgICAgICAgICBuZXcgVHlwZUVycm9yKCJDYW5ub3QgcmVzb2x2ZSBwcm9taXNlIHdpdGggaXRzZWxmIikKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgOiBwLnJlc29sdmUoYSwgZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGgoYSkgewogICAgICAgICAgICB2YXIgYiA9IGEgJiYgYS50aGVuOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgYSAmJgogICAgICAgICAgICAgICgib2JqZWN0IiA9PSB0eXBlb2YgYSB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiBhKSAmJgogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGIKICAgICAgICAgICAgKQogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBiLmFwcGx5KGEsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBpKGEsIGIpIHsKICAgICAgICAgICAgZnVuY3Rpb24gYyhiKSB7CiAgICAgICAgICAgICAgZiB8fCAoKGYgPSAhMCksIHAucmVqZWN0KGEsIGIpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZChiKSB7CiAgICAgICAgICAgICAgZiB8fCAoKGYgPSAhMCksIHAucmVzb2x2ZShhLCBiKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICAgICAgYihkLCBjKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGYgPSAhMSwKICAgICAgICAgICAgICBnID0gaihlKTsKICAgICAgICAgICAgImVycm9yIiA9PT0gZy5zdGF0dXMgJiYgYyhnLnZhbHVlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBqKGEsIGIpIHsKICAgICAgICAgICAgdmFyIGMgPSB7fTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAoYy52YWx1ZSA9IGEoYikpLCAoYy5zdGF0dXMgPSAic3VjY2VzcyIpOwogICAgICAgICAgICB9IGNhdGNoIChhKSB7CiAgICAgICAgICAgICAgKGMuc3RhdHVzID0gImVycm9yIiksIChjLnZhbHVlID0gYSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gayhhKSB7CiAgICAgICAgICAgIHJldHVybiBhIGluc3RhbmNlb2YgdGhpcyA/IGEgOiBwLnJlc29sdmUobmV3IHRoaXMoZCksIGEpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGwoYSkgewogICAgICAgICAgICB2YXIgYiA9IG5ldyB0aGlzKGQpOwogICAgICAgICAgICByZXR1cm4gcC5yZWplY3QoYiwgYSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gbShhKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGIoYSwgYikgewogICAgICAgICAgICAgIGZ1bmN0aW9uIGQoYSkgewogICAgICAgICAgICAgICAgKGdbYl0gPSBhKSwgKytoICE9PSBlIHx8IGYgfHwgKChmID0gITApLCBwLnJlc29sdmUoaiwgZykpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYy5yZXNvbHZlKGEpLnRoZW4oZCwgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgIGYgfHwgKChmID0gITApLCBwLnJlamVjdChqLCBhKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBjID0gdGhpczsKICAgICAgICAgICAgaWYgKCJbb2JqZWN0IEFycmF5XSIgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSkKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcigibXVzdCBiZSBhbiBhcnJheSIpKTsKICAgICAgICAgICAgdmFyIGUgPSBhLmxlbmd0aCwKICAgICAgICAgICAgICBmID0gITE7CiAgICAgICAgICAgIGlmICghZSkgcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgdmFyIGcgPSBuZXcgQXJyYXkoZSksIGggPSAwLCBpID0gLTEsIGogPSBuZXcgdGhpcyhkKTsKICAgICAgICAgICAgICArK2kgPCBlOwoKICAgICAgICAgICAgKQogICAgICAgICAgICAgIGIoYVtpXSwgaSk7CiAgICAgICAgICAgIHJldHVybiBqOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIG4oYSkgewogICAgICAgICAgICBmdW5jdGlvbiBiKGEpIHsKICAgICAgICAgICAgICBjLnJlc29sdmUoYSkudGhlbigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgIGYgfHwgKChmID0gITApLCBwLnJlc29sdmUoaCwgYSkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgIGYgfHwgKChmID0gITApLCBwLnJlamVjdChoLCBhKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGMgPSB0aGlzOwogICAgICAgICAgICBpZiAoIltvYmplY3QgQXJyYXldIiAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKQogICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKCJtdXN0IGJlIGFuIGFycmF5IikpOwogICAgICAgICAgICB2YXIgZSA9IGEubGVuZ3RoLAogICAgICAgICAgICAgIGYgPSAhMTsKICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTsKICAgICAgICAgICAgZm9yICh2YXIgZyA9IC0xLCBoID0gbmV3IHRoaXMoZCk7ICsrZyA8IGU7ICkgYihhW2ddKTsKICAgICAgICAgICAgcmV0dXJuIGg7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG8gPSBhKDEpLAogICAgICAgICAgICBwID0ge30sCiAgICAgICAgICAgIHEgPSBbIlJFSkVDVEVEIl0sCiAgICAgICAgICAgIHIgPSBbIkZVTEZJTExFRCJdLAogICAgICAgICAgICBzID0gWyJQRU5ESU5HIl07CiAgICAgICAgICAoYi5leHBvcnRzID0gZSksCiAgICAgICAgICAgIChlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBhKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgYSAmJiB0aGlzLnN0YXRlID09PSByKSB8fAogICAgICAgICAgICAgICAgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGIgJiYgdGhpcy5zdGF0ZSA9PT0gcSkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgICB2YXIgYyA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGQpOwogICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBzKSB7CiAgICAgICAgICAgICAgICBnKGMsIHRoaXMuc3RhdGUgPT09IHIgPyBhIDogYiwgdGhpcy5vdXRjb21lKTsKICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5xdWV1ZS5wdXNoKG5ldyBmKGMsIGEsIGIpKTsKICAgICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChmLnByb3RvdHlwZS5jYWxsRnVsZmlsbGVkID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICBwLnJlc29sdmUodGhpcy5wcm9taXNlLCBhKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChmLnByb3RvdHlwZS5vdGhlckNhbGxGdWxmaWxsZWQgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIGcodGhpcy5wcm9taXNlLCB0aGlzLm9uRnVsZmlsbGVkLCBhKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChmLnByb3RvdHlwZS5jYWxsUmVqZWN0ZWQgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIHAucmVqZWN0KHRoaXMucHJvbWlzZSwgYSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoZi5wcm90b3R5cGUub3RoZXJDYWxsUmVqZWN0ZWQgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIGcodGhpcy5wcm9taXNlLCB0aGlzLm9uUmVqZWN0ZWQsIGEpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKHAucmVzb2x2ZSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgdmFyIGMgPSBqKGgsIGIpOwogICAgICAgICAgICAgIGlmICgiZXJyb3IiID09PSBjLnN0YXR1cykgcmV0dXJuIHAucmVqZWN0KGEsIGMudmFsdWUpOwogICAgICAgICAgICAgIHZhciBkID0gYy52YWx1ZTsKICAgICAgICAgICAgICBpZiAoZCkgaShhLCBkKTsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIChhLnN0YXRlID0gciksIChhLm91dGNvbWUgPSBiKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAtMSwgZiA9IGEucXVldWUubGVuZ3RoOyArK2UgPCBmOyApCiAgICAgICAgICAgICAgICAgIGEucXVldWVbZV0uY2FsbEZ1bGZpbGxlZChiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAocC5yZWplY3QgPSBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgIChhLnN0YXRlID0gcSksIChhLm91dGNvbWUgPSBiKTsKICAgICAgICAgICAgICBmb3IgKHZhciBjID0gLTEsIGQgPSBhLnF1ZXVlLmxlbmd0aDsgKytjIDwgZDsgKQogICAgICAgICAgICAgICAgYS5xdWV1ZVtjXS5jYWxsUmVqZWN0ZWQoYik7CiAgICAgICAgICAgICAgcmV0dXJuIGE7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAoZS5yZXNvbHZlID0gayksCiAgICAgICAgICAgIChlLnJlamVjdCA9IGwpLAogICAgICAgICAgICAoZS5hbGwgPSBtKSwKICAgICAgICAgICAgKGUucmFjZSA9IG4pOwogICAgICAgIH0sCiAgICAgICAgeyAxOiAxIH0sCiAgICAgIF0sCiAgICAgIDM6IFsKICAgICAgICBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgICAgKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICJ1c2Ugc3RyaWN0IjsKICAgICAgICAgICAgImZ1bmN0aW9uIiAhPSB0eXBlb2YgYi5Qcm9taXNlICYmIChiLlByb21pc2UgPSBhKDIpKTsKICAgICAgICAgIH0uY2FsbCgKICAgICAgICAgICAgdGhpcywKICAgICAgICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGdsb2JhbAogICAgICAgICAgICAgID8gZ2xvYmFsCiAgICAgICAgICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygc2VsZgogICAgICAgICAgICAgID8gc2VsZgogICAgICAgICAgICAgIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdwogICAgICAgICAgICAgID8gd2luZG93CiAgICAgICAgICAgICAgOiB7fQogICAgICAgICAgKSk7CiAgICAgICAgfSwKICAgICAgICB7IDI6IDIgfSwKICAgICAgXSwKICAgICAgNDogWwogICAgICAgIGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICAgICAgICAidXNlIHN0cmljdCI7CgogICAgICAgICAgZnVuY3Rpb24gZChhLCBiKSB7CiAgICAgICAgICAgIGlmICghKGEgaW5zdGFuY2VvZiBiKSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgaW5kZXhlZERCKSByZXR1cm4gaW5kZXhlZERCOwogICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2Via2l0SW5kZXhlZERCKSByZXR1cm4gd2Via2l0SW5kZXhlZERCOwogICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgbW96SW5kZXhlZERCKSByZXR1cm4gbW96SW5kZXhlZERCOwogICAgICAgICAgICAgIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgT0luZGV4ZWREQikgcmV0dXJuIE9JbmRleGVkREI7CiAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBtc0luZGV4ZWREQikgcmV0dXJuIG1zSW5kZXhlZERCOwogICAgICAgICAgICB9IGNhdGNoIChhKSB7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gZigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoIXVhIHx8ICF1YS5vcGVuKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgdmFyIGEgPQogICAgICAgICAgICAgICAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygb3BlbkRhdGFiYXNlICYmCiAgICAgICAgICAgICAgICAgIC8oU2FmYXJpfGlQaG9uZXxpUGFkfGlQb2QpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmCiAgICAgICAgICAgICAgICAgICEvQ2hyb21lLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmCiAgICAgICAgICAgICAgICAgICEvQmxhY2tCZXJyeS8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pLAogICAgICAgICAgICAgICAgYiA9CiAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGZldGNoICYmCiAgICAgICAgICAgICAgICAgIC0xICE9PSBmZXRjaC50b1N0cmluZygpLmluZGV4T2YoIltuYXRpdmUgY29kZSIpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoIWEgfHwgYikgJiYKICAgICAgICAgICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBpbmRleGVkREIgJiYKICAgICAgICAgICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBJREJLZXlSYW5nZQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBnKGEsIGIpIHsKICAgICAgICAgICAgKGEgPSBhIHx8IFtdKSwgKGIgPSBiIHx8IHt9KTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IEJsb2IoYSwgYik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGYpIHsKICAgICAgICAgICAgICBpZiAoIlR5cGVFcnJvciIgIT09IGYubmFtZSkgdGhyb3cgZjsKICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgdmFyIGMgPQogICAgICAgICAgICAgICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBCbG9iQnVpbGRlcgogICAgICAgICAgICAgICAgICAgICAgPyBCbG9iQnVpbGRlcgogICAgICAgICAgICAgICAgICAgICAgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgTVNCbG9iQnVpbGRlcgogICAgICAgICAgICAgICAgICAgICAgPyBNU0Jsb2JCdWlsZGVyCiAgICAgICAgICAgICAgICAgICAgICA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBNb3pCbG9iQnVpbGRlcgogICAgICAgICAgICAgICAgICAgICAgPyBNb3pCbG9iQnVpbGRlcgogICAgICAgICAgICAgICAgICAgICAgOiBXZWJLaXRCbG9iQnVpbGRlciwKICAgICAgICAgICAgICAgICAgZCA9IG5ldyBjKCksCiAgICAgICAgICAgICAgICAgIGUgPSAwOwogICAgICAgICAgICAgICAgZSA8IGEubGVuZ3RoOwogICAgICAgICAgICAgICAgZSArPSAxCiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZC5hcHBlbmQoYVtlXSk7CiAgICAgICAgICAgICAgcmV0dXJuIGQuZ2V0QmxvYihiLnR5cGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaChhLCBiKSB7CiAgICAgICAgICAgIGIgJiYKICAgICAgICAgICAgICBhLnRoZW4oCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICBiKG51bGwsIGEpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgIGIoYSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBpKGEsIGIsIGMpIHsKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYiAmJiBhLnRoZW4oYiksCiAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYyAmJiBhLmNhdGNoKGMpOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGooYSkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICJzdHJpbmciICE9IHR5cGVvZiBhICYmCiAgICAgICAgICAgICAgICAoY29uc29sZS53YXJuKGEgKyAiIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuIiksCiAgICAgICAgICAgICAgICAoYSA9IFN0cmluZyhhKSkpLAogICAgICAgICAgICAgIGEKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBrKCkgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCAmJgogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0KICAgICAgICAgICAgKQogICAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGwoYSkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIHZhciBiID0gYS5sZW5ndGgsCiAgICAgICAgICAgICAgICBjID0gbmV3IEFycmF5QnVmZmVyKGIpLAogICAgICAgICAgICAgICAgZCA9IG5ldyBVaW50OEFycmF5KGMpLAogICAgICAgICAgICAgICAgZSA9IDA7CiAgICAgICAgICAgICAgZSA8IGI7CiAgICAgICAgICAgICAgZSsrCiAgICAgICAgICAgICkKICAgICAgICAgICAgICBkW2VdID0gYS5jaGFyQ29kZUF0KGUpOwogICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBtKGEpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB2YShmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgIHZhciBjID0gYS50cmFuc2FjdGlvbih3YSwgQmEpLAogICAgICAgICAgICAgICAgZCA9IGcoWyIiXSk7CiAgICAgICAgICAgICAgYy5vYmplY3RTdG9yZSh3YSkucHV0KGQsICJrZXkiKSwKICAgICAgICAgICAgICAgIChjLm9uYWJvcnQgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICBhLnByZXZlbnREZWZhdWx0KCksIGEuc3RvcFByb3BhZ2F0aW9uKCksIGIoITEpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAoYy5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgYSA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tZVwvKFxkKykvKSwKICAgICAgICAgICAgICAgICAgICBjID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVwvLyk7CiAgICAgICAgICAgICAgICAgIGIoYyB8fCAhYSB8fCBwYXJzZUludChhWzFdLCAxMCkgPj0gNDMpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIG4oYSkgewogICAgICAgICAgICByZXR1cm4gImJvb2xlYW4iID09IHR5cGVvZiB4YQogICAgICAgICAgICAgID8gdmEucmVzb2x2ZSh4YSkKICAgICAgICAgICAgICA6IG0oYSkudGhlbihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gKHhhID0gYSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBvKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSB5YVthLm5hbWVdLAogICAgICAgICAgICAgIGMgPSB7fTsKICAgICAgICAgICAgKGMucHJvbWlzZSA9IG5ldyB2YShmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgIChjLnJlc29sdmUgPSBhKSwgKGMucmVqZWN0ID0gYik7CiAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICBiLmRlZmVycmVkT3BlcmF0aW9ucy5wdXNoKGMpLAogICAgICAgICAgICAgIGIuZGJSZWFkeQogICAgICAgICAgICAgICAgPyAoYi5kYlJlYWR5ID0gYi5kYlJlYWR5LnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnByb21pc2U7CiAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgOiAoYi5kYlJlYWR5ID0gYy5wcm9taXNlKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBwKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSB5YVthLm5hbWVdLAogICAgICAgICAgICAgIGMgPSBiLmRlZmVycmVkT3BlcmF0aW9ucy5wb3AoKTsKICAgICAgICAgICAgaWYgKGMpIHJldHVybiBjLnJlc29sdmUoKSwgYy5wcm9taXNlOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHEoYSwgYikgewogICAgICAgICAgICB2YXIgYyA9IHlhW2EubmFtZV0sCiAgICAgICAgICAgICAgZCA9IGMuZGVmZXJyZWRPcGVyYXRpb25zLnBvcCgpOwogICAgICAgICAgICBpZiAoZCkgcmV0dXJuIGQucmVqZWN0KGIpLCBkLnByb21pc2U7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gcihhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgdmEoZnVuY3Rpb24gKGMsIGQpIHsKICAgICAgICAgICAgICBpZiAoKCh5YVthLm5hbWVdID0geWFbYS5uYW1lXSB8fCBCKCkpLCBhLmRiKSkgewogICAgICAgICAgICAgICAgaWYgKCFiKSByZXR1cm4gYyhhLmRiKTsKICAgICAgICAgICAgICAgIG8oYSksIGEuZGIuY2xvc2UoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdmFyIGUgPSBbYS5uYW1lXTsKICAgICAgICAgICAgICBiICYmIGUucHVzaChhLnZlcnNpb24pOwogICAgICAgICAgICAgIHZhciBmID0gdWEub3Blbi5hcHBseSh1YSwgZSk7CiAgICAgICAgICAgICAgYiAmJgogICAgICAgICAgICAgICAgKGYub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgdmFyIGMgPSBmLnJlc3VsdDsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjLmNyZWF0ZU9iamVjdFN0b3JlKGEuc3RvcmVOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgIGIub2xkVmVyc2lvbiA8PSAxICYmIGMuY3JlYXRlT2JqZWN0U3RvcmUod2EpOwogICAgICAgICAgICAgICAgICB9IGNhdGNoIChjKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJDb25zdHJhaW50RXJyb3IiICE9PSBjLm5hbWUpIHRocm93IGM7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKAogICAgICAgICAgICAgICAgICAgICAgJ1RoZSBkYXRhYmFzZSAiJyArCiAgICAgICAgICAgICAgICAgICAgICAgIGEubmFtZSArCiAgICAgICAgICAgICAgICAgICAgICAgICciIGhhcyBiZWVuIHVwZ3JhZGVkIGZyb20gdmVyc2lvbiAnICsKICAgICAgICAgICAgICAgICAgICAgICAgYi5vbGRWZXJzaW9uICsKICAgICAgICAgICAgICAgICAgICAgICAgIiB0byB2ZXJzaW9uICIgKwogICAgICAgICAgICAgICAgICAgICAgICBiLm5ld1ZlcnNpb24gKwogICAgICAgICAgICAgICAgICAgICAgICAnLCBidXQgdGhlIHN0b3JhZ2UgIicgKwogICAgICAgICAgICAgICAgICAgICAgICBhLnN0b3JlTmFtZSArCiAgICAgICAgICAgICAgICAgICAgICAgICciIGFscmVhZHkgZXhpc3RzLicKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChmLm9uZXJyb3IgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICBhLnByZXZlbnREZWZhdWx0KCksIGQoZi5lcnJvcik7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChmLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgYyhmLnJlc3VsdCksIHAoYSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gcyhhKSB7CiAgICAgICAgICAgIHJldHVybiByKGEsICExKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB0KGEpIHsKICAgICAgICAgICAgcmV0dXJuIHIoYSwgITApOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHUoYSwgYikgewogICAgICAgICAgICBpZiAoIWEuZGIpIHJldHVybiAhMDsKICAgICAgICAgICAgdmFyIGMgPSAhYS5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGEuc3RvcmVOYW1lKSwKICAgICAgICAgICAgICBkID0gYS52ZXJzaW9uIDwgYS5kYi52ZXJzaW9uLAogICAgICAgICAgICAgIGUgPSBhLnZlcnNpb24gPiBhLmRiLnZlcnNpb247CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoZCAmJgogICAgICAgICAgICAgICAgKGEudmVyc2lvbiAhPT0gYiAmJgogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oCiAgICAgICAgICAgICAgICAgICAgJ1RoZSBkYXRhYmFzZSAiJyArCiAgICAgICAgICAgICAgICAgICAgICBhLm5hbWUgKwogICAgICAgICAgICAgICAgICAgICAgIlwiIGNhbid0IGJlIGRvd25ncmFkZWQgZnJvbSB2ZXJzaW9uICIgKwogICAgICAgICAgICAgICAgICAgICAgYS5kYi52ZXJzaW9uICsKICAgICAgICAgICAgICAgICAgICAgICIgdG8gdmVyc2lvbiAiICsKICAgICAgICAgICAgICAgICAgICAgIGEudmVyc2lvbiArCiAgICAgICAgICAgICAgICAgICAgICAiLiIKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIChhLnZlcnNpb24gPSBhLmRiLnZlcnNpb24pKSwKICAgICAgICAgICAgICBlIHx8IGMpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlmIChjKSB7CiAgICAgICAgICAgICAgICB2YXIgZiA9IGEuZGIudmVyc2lvbiArIDE7CiAgICAgICAgICAgICAgICBmID4gYS52ZXJzaW9uICYmIChhLnZlcnNpb24gPSBmKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiB2KGEpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB2YShmdW5jdGlvbiAoYiwgYykgewogICAgICAgICAgICAgIHZhciBkID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAoZC5vbmVycm9yID0gYyksCiAgICAgICAgICAgICAgICAoZC5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICB2YXIgZCA9IGJ0b2EoYy50YXJnZXQucmVzdWx0IHx8ICIiKTsKICAgICAgICAgICAgICAgICAgYih7IF9fbG9jYWxfZm9yYWdlX2VuY29kZWRfYmxvYjogITAsIGRhdGE6IGQsIHR5cGU6IGEudHlwZSB9KTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgZC5yZWFkQXNCaW5hcnlTdHJpbmcoYSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHcoYSkgewogICAgICAgICAgICByZXR1cm4gZyhbbChhdG9iKGEuZGF0YSkpXSwgeyB0eXBlOiBhLnR5cGUgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24geChhKSB7CiAgICAgICAgICAgIHJldHVybiBhICYmIGEuX19sb2NhbF9mb3JhZ2VfZW5jb2RlZF9ibG9iOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHkoYSkgewogICAgICAgICAgICB2YXIgYiA9IHRoaXMsCiAgICAgICAgICAgICAgYyA9IGIuX2luaXRSZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGEgPSB5YVtiLl9kYkluZm8ubmFtZV07CiAgICAgICAgICAgICAgICBpZiAoYSAmJiBhLmRiUmVhZHkpIHJldHVybiBhLmRiUmVhZHk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBpKGMsIGEsIGEpLCBjOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHooYSkgewogICAgICAgICAgICBvKGEpOwogICAgICAgICAgICBmb3IgKHZhciBiID0geWFbYS5uYW1lXSwgYyA9IGIuZm9yYWdlcywgZCA9IDA7IGQgPCBjLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgICAgICAgdmFyIGUgPSBjW2RdOwogICAgICAgICAgICAgIGUuX2RiSW5mby5kYiAmJiAoZS5fZGJJbmZvLmRiLmNsb3NlKCksIChlLl9kYkluZm8uZGIgPSBudWxsKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoYS5kYiA9IG51bGwpLAogICAgICAgICAgICAgIHMoYSkKICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAoYS5kYiA9IGIpLCB1KGEpID8gdChhKSA6IGI7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgYS5kYiA9IGIuZGIgPSBkOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IGMubGVuZ3RoOyBlKyspIGNbZV0uX2RiSW5mby5kYiA9IGQ7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgIHRocm93IChxKGEsIGIpLCBiKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gQShhLCBiLCBjLCBkKSB7CiAgICAgICAgICAgIHZvaWQgMCA9PT0gZCAmJiAoZCA9IDEpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHZhciBlID0gYS5kYi50cmFuc2FjdGlvbihhLnN0b3JlTmFtZSwgYik7CiAgICAgICAgICAgICAgYyhudWxsLCBlKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGQgPiAwICYmCiAgICAgICAgICAgICAgICAoIWEuZGIgfHwKICAgICAgICAgICAgICAgICAgIkludmFsaWRTdGF0ZUVycm9yIiA9PT0gZS5uYW1lIHx8CiAgICAgICAgICAgICAgICAgICJOb3RGb3VuZEVycm9yIiA9PT0gZS5uYW1lKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHJldHVybiB2YQogICAgICAgICAgICAgICAgICAucmVzb2x2ZSgpCiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAhYS5kYiB8fAogICAgICAgICAgICAgICAgICAgICAgKCJOb3RGb3VuZEVycm9yIiA9PT0gZS5uYW1lICYmCiAgICAgICAgICAgICAgICAgICAgICAgICFhLmRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoYS5zdG9yZU5hbWUpICYmCiAgICAgICAgICAgICAgICAgICAgICAgIGEudmVyc2lvbiA8PSBhLmRiLnZlcnNpb24pCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZGIgJiYgKGEudmVyc2lvbiA9IGEuZGIudmVyc2lvbiArIDEpLCB0KGEpOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHooYSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBBKGEsIGIsIGMsIGQgLSAxKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmNhdGNoKGMpOwogICAgICAgICAgICAgIGMoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBCKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGZvcmFnZXM6IFtdLAogICAgICAgICAgICAgIGRiOiBudWxsLAogICAgICAgICAgICAgIGRiUmVhZHk6IG51bGwsCiAgICAgICAgICAgICAgZGVmZXJyZWRPcGVyYXRpb25zOiBbXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBDKGEpIHsKICAgICAgICAgICAgZnVuY3Rpb24gYigpIHsKICAgICAgICAgICAgICByZXR1cm4gdmEucmVzb2x2ZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgYyA9IHRoaXMsCiAgICAgICAgICAgICAgZCA9IHsgZGI6IG51bGwgfTsKICAgICAgICAgICAgaWYgKGEpIGZvciAodmFyIGUgaW4gYSkgZFtlXSA9IGFbZV07CiAgICAgICAgICAgIHZhciBmID0geWFbZC5uYW1lXTsKICAgICAgICAgICAgZiB8fCAoKGYgPSBCKCkpLCAoeWFbZC5uYW1lXSA9IGYpKSwKICAgICAgICAgICAgICBmLmZvcmFnZXMucHVzaChjKSwKICAgICAgICAgICAgICBjLl9pbml0UmVhZHkgfHwgKChjLl9pbml0UmVhZHkgPSBjLnJlYWR5KSwgKGMucmVhZHkgPSB5KSk7CiAgICAgICAgICAgIGZvciAodmFyIGcgPSBbXSwgaCA9IDA7IGggPCBmLmZvcmFnZXMubGVuZ3RoOyBoKyspIHsKICAgICAgICAgICAgICB2YXIgaSA9IGYuZm9yYWdlc1toXTsKICAgICAgICAgICAgICBpICE9PSBjICYmIGcucHVzaChpLl9pbml0UmVhZHkoKS5jYXRjaChiKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGogPSBmLmZvcmFnZXMuc2xpY2UoMCk7CiAgICAgICAgICAgIHJldHVybiB2YQogICAgICAgICAgICAgIC5hbGwoZykKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGQuZGIgPSBmLmRiKSwgcyhkKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKGQuZGIgPSBhKSwgdShkLCBjLl9kZWZhdWx0Q29uZmlnLnZlcnNpb24pID8gdChkKSA6IGE7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgKGQuZGIgPSBmLmRiID0gYSksIChjLl9kYkluZm8gPSBkKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgai5sZW5ndGg7IGIrKykgewogICAgICAgICAgICAgICAgICB2YXIgZSA9IGpbYl07CiAgICAgICAgICAgICAgICAgIGUgIT09IGMgJiYKICAgICAgICAgICAgICAgICAgICAoKGUuX2RiSW5mby5kYiA9IGQuZGIpLCAoZS5fZGJJbmZvLnZlcnNpb24gPSBkLnZlcnNpb24pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBEKGEsIGIpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzOwogICAgICAgICAgICBhID0gaihhKTsKICAgICAgICAgICAgdmFyIGQgPSBuZXcgdmEoZnVuY3Rpb24gKGIsIGQpIHsKICAgICAgICAgICAgICBjLnJlYWR5KCkKICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgQShjLl9kYkluZm8sIEFhLCBmdW5jdGlvbiAoZSwgZikgewogICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZChlKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBmLm9iamVjdFN0b3JlKGMuX2RiSW5mby5zdG9yZU5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICBoID0gZy5nZXQoYSk7CiAgICAgICAgICAgICAgICAgICAgICAoaC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaC5yZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gYSAmJiAoYSA9IG51bGwpLCB4KGEpICYmIChhID0gdyhhKSksIGIoYSk7CiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgKGgub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkKGguZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICBkKGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoZCwgYiksIGQ7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gRShhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpcywKICAgICAgICAgICAgICBkID0gbmV3IHZhKGZ1bmN0aW9uIChiLCBkKSB7CiAgICAgICAgICAgICAgICBjLnJlYWR5KCkKICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIEEoYy5fZGJJbmZvLCBBYSwgZnVuY3Rpb24gKGUsIGYpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZChlKTsKICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gZi5vYmplY3RTdG9yZShjLl9kYkluZm8uc3RvcmVOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gZy5vcGVuQ3Vyc29yKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIChoLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGgucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGMudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4KGQpICYmIChkID0gdyhkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGEoZCwgYy5rZXksIGkrKyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGUgPyBiKGUpIDogYy5jb250aW51ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBiKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChoLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKGguZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBkKGEpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuY2F0Y2goZCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGQsIGIpLCBkOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIEYoYSwgYiwgYykgewogICAgICAgICAgICB2YXIgZCA9IHRoaXM7CiAgICAgICAgICAgIGEgPSBqKGEpOwogICAgICAgICAgICB2YXIgZSA9IG5ldyB2YShmdW5jdGlvbiAoYywgZSkgewogICAgICAgICAgICAgIHZhciBmOwogICAgICAgICAgICAgIGQucmVhZHkoKQogICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIChmID0gZC5fZGJJbmZvKSwKICAgICAgICAgICAgICAgICAgICAiW29iamVjdCBCbG9iXSIgPT09IHphLmNhbGwoYikKICAgICAgICAgICAgICAgICAgICAgID8gbihmLmRiKS50aGVuKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPyBiIDogdihiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgIDogYgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgIEEoZC5fZGJJbmZvLCBCYSwgZnVuY3Rpb24gKGYsIGcpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZikgcmV0dXJuIGUoZik7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gZy5vYmplY3RTdG9yZShkLl9kYkluZm8uc3RvcmVOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IGIgJiYgKGIgPSB2b2lkIDApOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBoLnB1dChiLCBhKTsKICAgICAgICAgICAgICAgICAgICAgIChnLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gYiAmJiAoYiA9IG51bGwpLCBjKGIpOwogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIChnLm9uYWJvcnQgPSBnLm9uZXJyb3IgPQogICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaS5lcnJvciA/IGkuZXJyb3IgOiBpLnRyYW5zYWN0aW9uLmVycm9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZShhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICBlKGEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoZSwgYyksIGU7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gRyhhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpczsKICAgICAgICAgICAgYSA9IGooYSk7CiAgICAgICAgICAgIHZhciBkID0gbmV3IHZhKGZ1bmN0aW9uIChiLCBkKSB7CiAgICAgICAgICAgICAgYy5yZWFkeSgpCiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIEEoYy5fZGJJbmZvLCBCYSwgZnVuY3Rpb24gKGUsIGYpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIGQoZSk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gZi5vYmplY3RTdG9yZShjLl9kYkluZm8uc3RvcmVOYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGcuZGVsZXRlKGEpOwogICAgICAgICAgICAgICAgICAgICAgKGYub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYigpOwogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIChmLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZChoLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIChmLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBoLmVycm9yID8gaC5lcnJvciA6IGgudHJhbnNhY3Rpb24uZXJyb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgICAgICAgICAgZChhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGQsIGIpLCBkOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIEgoYSkgewogICAgICAgICAgICB2YXIgYiA9IHRoaXMsCiAgICAgICAgICAgICAgYyA9IG5ldyB2YShmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICAgICAgYi5yZWFkeSgpCiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBBKGIuX2RiSW5mbywgQmEsIGZ1bmN0aW9uIChkLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZCkgcmV0dXJuIGMoZCk7CiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGUub2JqZWN0U3RvcmUoYi5fZGJJbmZvLnN0b3JlTmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGYuY2xlYXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgKGUub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChlLm9uYWJvcnQgPSBlLm9uZXJyb3IgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGcuZXJyb3IgPyBnLmVycm9yIDogZy50cmFuc2FjdGlvbi5lcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBjKGEpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuY2F0Y2goYyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGMsIGEpLCBjOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIEkoYSkgewogICAgICAgICAgICB2YXIgYiA9IHRoaXMsCiAgICAgICAgICAgICAgYyA9IG5ldyB2YShmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICAgICAgYi5yZWFkeSgpCiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBBKGIuX2RiSW5mbywgQWEsIGZ1bmN0aW9uIChkLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZCkgcmV0dXJuIGMoZCk7CiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGUub2JqZWN0U3RvcmUoYi5fZGJJbmZvLnN0b3JlTmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGYuY291bnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgKGcub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGEoZy5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZy5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhnLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYyhhKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmNhdGNoKGMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaChjLCBhKSwgYzsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBKKGEsIGIpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzLAogICAgICAgICAgICAgIGQgPSBuZXcgdmEoZnVuY3Rpb24gKGIsIGQpIHsKICAgICAgICAgICAgICAgIGlmIChhIDwgMCkgcmV0dXJuIHZvaWQgYihudWxsKTsKICAgICAgICAgICAgICAgIGMucmVhZHkoKQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgQShjLl9kYkluZm8sIEFhLCBmdW5jdGlvbiAoZSwgZikgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiBkKGUpOwogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBmLm9iamVjdFN0b3JlKGMuX2RiSW5mby5zdG9yZU5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGggPSAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZy5vcGVuS2V5Q3Vyc29yKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIChpLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGkucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYykgcmV0dXJuIHZvaWQgYihudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAwID09PSBhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGIoYy5rZXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYihjLmtleSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKChoID0gITApLCBjLmFkdmFuY2UoYSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZChpLmVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZChhKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmNhdGNoKGQpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaChkLCBiKSwgZDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBLKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSB0aGlzLAogICAgICAgICAgICAgIGMgPSBuZXcgdmEoZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgIGIucmVhZHkoKQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgQShiLl9kYkluZm8sIEFhLCBmdW5jdGlvbiAoZCwgZSkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKGQpIHJldHVybiBjKGQpOwogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBlLm9iamVjdFN0b3JlKGIuX2RiSW5mby5zdG9yZU5hbWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBmLm9wZW5LZXlDdXJzb3IoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIChnLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGcucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYikgcmV0dXJuIHZvaWQgYShoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBoLnB1c2goYi5rZXkpLCBiLmNvbnRpbnVlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChnLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGcuZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBjKGEpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuY2F0Y2goYyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGMsIGEpLCBjOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIEwoYSwgYikgewogICAgICAgICAgICBiID0gay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB2YXIgYyA9IHRoaXMuY29uZmlnKCk7CiAgICAgICAgICAgIChhID0gKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGEgJiYgYSkgfHwge30pLAogICAgICAgICAgICAgIGEubmFtZSB8fAogICAgICAgICAgICAgICAgKChhLm5hbWUgPSBhLm5hbWUgfHwgYy5uYW1lKSwKICAgICAgICAgICAgICAgIChhLnN0b3JlTmFtZSA9IGEuc3RvcmVOYW1lIHx8IGMuc3RvcmVOYW1lKSk7CiAgICAgICAgICAgIHZhciBkLAogICAgICAgICAgICAgIGUgPSB0aGlzOwogICAgICAgICAgICBpZiAoYS5uYW1lKSB7CiAgICAgICAgICAgICAgdmFyIGYgPSBhLm5hbWUgPT09IGMubmFtZSAmJiBlLl9kYkluZm8uZGIsCiAgICAgICAgICAgICAgICBnID0gZgogICAgICAgICAgICAgICAgICA/IHZhLnJlc29sdmUoZS5fZGJJbmZvLmRiKQogICAgICAgICAgICAgICAgICA6IHMoYSkudGhlbihmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB5YVthLm5hbWVdLAogICAgICAgICAgICAgICAgICAgICAgICBkID0gYy5mb3JhZ2VzOwogICAgICAgICAgICAgICAgICAgICAgYy5kYiA9IGI7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IGQubGVuZ3RoOyBlKyspIGRbZV0uX2RiSW5mby5kYiA9IGI7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYjsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBkID0gYS5zdG9yZU5hbWUKICAgICAgICAgICAgICAgID8gZy50aGVuKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhhLnN0b3JlTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gYi52ZXJzaW9uICsgMTsKICAgICAgICAgICAgICAgICAgICAgIG8oYSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHlhW2EubmFtZV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBkLmZvcmFnZXM7CiAgICAgICAgICAgICAgICAgICAgICBiLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGUubGVuZ3RoOyBmKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBlW2ZdOwogICAgICAgICAgICAgICAgICAgICAgICAoZy5fZGJJbmZvLmRiID0gbnVsbCksIChnLl9kYkluZm8udmVyc2lvbiA9IGMpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB2YShmdW5jdGlvbiAoYiwgZCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHVhLm9wZW4oYS5uYW1lLCBjKTsKICAgICAgICAgICAgICAgICAgICAgICAgKGUub25lcnJvciA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXN1bHQuY2xvc2UoKSwgZChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGUub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXN1bHQuZGVsZXRlT2JqZWN0U3RvcmUoYS5zdG9yZU5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIChlLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZS5yZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmNsb3NlKCksIGIoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGQuZGIgPSBhOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgZS5sZW5ndGg7IGIrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBlW2JdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGMuX2RiSW5mby5kYiA9IGEpLCBwKGMuX2RiSW5mbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHEoYSwgYikgfHwgdmEucmVzb2x2ZSgpKS5jYXRjaChmdW5jdGlvbiAoKSB7fSksIGIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiBnLnRoZW4oZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICBvKGEpOwogICAgICAgICAgICAgICAgICAgIHZhciBjID0geWFbYS5uYW1lXSwKICAgICAgICAgICAgICAgICAgICAgIGQgPSBjLmZvcmFnZXM7CiAgICAgICAgICAgICAgICAgICAgYi5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgZC5sZW5ndGg7IGUrKykgewogICAgICAgICAgICAgICAgICAgICAgZFtlXS5fZGJJbmZvLmRiID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB2YShmdW5jdGlvbiAoYiwgYykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSB1YS5kZWxldGVEYXRhYmFzZShhLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgKGQub25lcnJvciA9IGQub25ibG9ja2VkID0KICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGQucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICAgIGIgJiYgYi5jbG9zZSgpLCBjKGEpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgKGQub25zdWNjZXNzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZC5yZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYSAmJiBhLmNsb3NlKCksIGIoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICBjLmRiID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBkLmxlbmd0aDsgYisrKSBwKGRbYl0uX2RiSW5mbyk7CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAoKHEoYSwgYikgfHwgdmEucmVzb2x2ZSgpKS5jYXRjaChmdW5jdGlvbiAoKSB7fSksIGIpCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBkID0gdmEucmVqZWN0KCJJbnZhbGlkIGFyZ3VtZW50cyIpOwogICAgICAgICAgICByZXR1cm4gaChkLCBiKSwgZDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBNKCkgewogICAgICAgICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2Ygb3BlbkRhdGFiYXNlOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIE4oYSkgewogICAgICAgICAgICB2YXIgYiwKICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgIGQsCiAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICBmLAogICAgICAgICAgICAgIGcgPSAwLjc1ICogYS5sZW5ndGgsCiAgICAgICAgICAgICAgaCA9IGEubGVuZ3RoLAogICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAiPSIgPT09IGFbYS5sZW5ndGggLSAxXSAmJiAoZy0tLCAiPSIgPT09IGFbYS5sZW5ndGggLSAyXSAmJiBnLS0pOwogICAgICAgICAgICB2YXIgaiA9IG5ldyBBcnJheUJ1ZmZlcihnKSwKICAgICAgICAgICAgICBrID0gbmV3IFVpbnQ4QXJyYXkoaik7CiAgICAgICAgICAgIGZvciAoYiA9IDA7IGIgPCBoOyBiICs9IDQpCiAgICAgICAgICAgICAgKGMgPSBEYS5pbmRleE9mKGFbYl0pKSwKICAgICAgICAgICAgICAgIChkID0gRGEuaW5kZXhPZihhW2IgKyAxXSkpLAogICAgICAgICAgICAgICAgKGUgPSBEYS5pbmRleE9mKGFbYiArIDJdKSksCiAgICAgICAgICAgICAgICAoZiA9IERhLmluZGV4T2YoYVtiICsgM10pKSwKICAgICAgICAgICAgICAgIChrW2krK10gPSAoYyA8PCAyKSB8IChkID4+IDQpKSwKICAgICAgICAgICAgICAgIChrW2krK10gPSAoKDE1ICYgZCkgPDwgNCkgfCAoZSA+PiAyKSksCiAgICAgICAgICAgICAgICAoa1tpKytdID0gKCgzICYgZSkgPDwgNikgfCAoNjMgJiBmKSk7CiAgICAgICAgICAgIHJldHVybiBqOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIE8oYSkgewogICAgICAgICAgICB2YXIgYiwKICAgICAgICAgICAgICBjID0gbmV3IFVpbnQ4QXJyYXkoYSksCiAgICAgICAgICAgICAgZCA9ICIiOwogICAgICAgICAgICBmb3IgKGIgPSAwOyBiIDwgYy5sZW5ndGg7IGIgKz0gMykKICAgICAgICAgICAgICAoZCArPSBEYVtjW2JdID4+IDJdKSwKICAgICAgICAgICAgICAgIChkICs9IERhWygoMyAmIGNbYl0pIDw8IDQpIHwgKGNbYiArIDFdID4+IDQpXSksCiAgICAgICAgICAgICAgICAoZCArPSBEYVsoKDE1ICYgY1tiICsgMV0pIDw8IDIpIHwgKGNbYiArIDJdID4+IDYpXSksCiAgICAgICAgICAgICAgICAoZCArPSBEYVs2MyAmIGNbYiArIDJdXSk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgYy5sZW5ndGggJSAzID09IDIKICAgICAgICAgICAgICAgID8gKGQgPSBkLnN1YnN0cmluZygwLCBkLmxlbmd0aCAtIDEpICsgIj0iKQogICAgICAgICAgICAgICAgOiBjLmxlbmd0aCAlIDMgPT0gMSAmJgogICAgICAgICAgICAgICAgICAoZCA9IGQuc3Vic3RyaW5nKDAsIGQubGVuZ3RoIC0gMikgKyAiPT0iKSwKICAgICAgICAgICAgICBkCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gUChhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gIiI7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoYSAmJiAoYyA9IFVhLmNhbGwoYSkpLAogICAgICAgICAgICAgIGEgJiYKICAgICAgICAgICAgICAgICgiW29iamVjdCBBcnJheUJ1ZmZlcl0iID09PSBjIHx8CiAgICAgICAgICAgICAgICAgIChhLmJ1ZmZlciAmJiAiW29iamVjdCBBcnJheUJ1ZmZlcl0iID09PSBVYS5jYWxsKGEuYnVmZmVyKSkpKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB2YXIgZCwKICAgICAgICAgICAgICAgIGUgPSBHYTsKICAgICAgICAgICAgICBhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIKICAgICAgICAgICAgICAgID8gKChkID0gYSksIChlICs9IElhKSkKICAgICAgICAgICAgICAgIDogKChkID0gYS5idWZmZXIpLAogICAgICAgICAgICAgICAgICAiW29iamVjdCBJbnQ4QXJyYXldIiA9PT0gYwogICAgICAgICAgICAgICAgICAgID8gKGUgKz0gS2EpCiAgICAgICAgICAgICAgICAgICAgOiAiW29iamVjdCBVaW50OEFycmF5XSIgPT09IGMKICAgICAgICAgICAgICAgICAgICA/IChlICs9IExhKQogICAgICAgICAgICAgICAgICAgIDogIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIiA9PT0gYwogICAgICAgICAgICAgICAgICAgID8gKGUgKz0gTWEpCiAgICAgICAgICAgICAgICAgICAgOiAiW29iamVjdCBJbnQxNkFycmF5XSIgPT09IGMKICAgICAgICAgICAgICAgICAgICA/IChlICs9IE5hKQogICAgICAgICAgICAgICAgICAgIDogIltvYmplY3QgVWludDE2QXJyYXldIiA9PT0gYwogICAgICAgICAgICAgICAgICAgID8gKGUgKz0gUGEpCiAgICAgICAgICAgICAgICAgICAgOiAiW29iamVjdCBJbnQzMkFycmF5XSIgPT09IGMKICAgICAgICAgICAgICAgICAgICA/IChlICs9IE9hKQogICAgICAgICAgICAgICAgICAgIDogIltvYmplY3QgVWludDMyQXJyYXldIiA9PT0gYwogICAgICAgICAgICAgICAgICAgID8gKGUgKz0gUWEpCiAgICAgICAgICAgICAgICAgICAgOiAiW29iamVjdCBGbG9hdDMyQXJyYXldIiA9PT0gYwogICAgICAgICAgICAgICAgICAgID8gKGUgKz0gUmEpCiAgICAgICAgICAgICAgICAgICAgOiAiW29iamVjdCBGbG9hdDY0QXJyYXldIiA9PT0gYwogICAgICAgICAgICAgICAgICAgID8gKGUgKz0gU2EpCiAgICAgICAgICAgICAgICAgICAgOiBiKG5ldyBFcnJvcigiRmFpbGVkIHRvIGdldCB0eXBlIGZvciBCaW5hcnlBcnJheSIpKSksCiAgICAgICAgICAgICAgICBiKGUgKyBPKGQpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICgiW29iamVjdCBCbG9iXSIgPT09IGMpIHsKICAgICAgICAgICAgICB2YXIgZiA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgKGYub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGMgPSBFYSArIGEudHlwZSArICJ+IiArIE8odGhpcy5yZXN1bHQpOwogICAgICAgICAgICAgICAgYihHYSArIEphICsgYyk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBmLnJlYWRBc0FycmF5QnVmZmVyKGEpOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYihKU09OLnN0cmluZ2lmeShhKSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoYykgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiQ291bGRuJ3QgY29udmVydCB2YWx1ZSBpbnRvIGEgSlNPTiBzdHJpbmc6ICIsIGEpLAogICAgICAgICAgICAgICAgICBiKG51bGwsIGMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBRKGEpIHsKICAgICAgICAgICAgaWYgKGEuc3Vic3RyaW5nKDAsIEhhKSAhPT0gR2EpIHJldHVybiBKU09OLnBhcnNlKGEpOwogICAgICAgICAgICB2YXIgYiwKICAgICAgICAgICAgICBjID0gYS5zdWJzdHJpbmcoVGEpLAogICAgICAgICAgICAgIGQgPSBhLnN1YnN0cmluZyhIYSwgVGEpOwogICAgICAgICAgICBpZiAoZCA9PT0gSmEgJiYgRmEudGVzdChjKSkgewogICAgICAgICAgICAgIHZhciBlID0gYy5tYXRjaChGYSk7CiAgICAgICAgICAgICAgKGIgPSBlWzFdKSwgKGMgPSBjLnN1YnN0cmluZyhlWzBdLmxlbmd0aCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBmID0gTihjKTsKICAgICAgICAgICAgc3dpdGNoIChkKSB7CiAgICAgICAgICAgICAgY2FzZSBJYToKICAgICAgICAgICAgICAgIHJldHVybiBmOwogICAgICAgICAgICAgIGNhc2UgSmE6CiAgICAgICAgICAgICAgICByZXR1cm4gZyhbZl0sIHsgdHlwZTogYiB9KTsKICAgICAgICAgICAgICBjYXNlIEthOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQ4QXJyYXkoZik7CiAgICAgICAgICAgICAgY2FzZSBMYToKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShmKTsKICAgICAgICAgICAgICBjYXNlIE1hOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OENsYW1wZWRBcnJheShmKTsKICAgICAgICAgICAgICBjYXNlIE5hOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQxNkFycmF5KGYpOwogICAgICAgICAgICAgIGNhc2UgUGE6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KGYpOwogICAgICAgICAgICAgIGNhc2UgT2E6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludDMyQXJyYXkoZik7CiAgICAgICAgICAgICAgY2FzZSBRYToKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkoZik7CiAgICAgICAgICAgICAgY2FzZSBSYToKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KGYpOwogICAgICAgICAgICAgIGNhc2UgU2E6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0NjRBcnJheShmKTsKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJVbmtvd24gdHlwZTogIiArIGQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gUihhLCBiLCBjLCBkKSB7CiAgICAgICAgICAgIGEuZXhlY3V0ZVNxbCgKICAgICAgICAgICAgICAiQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgIiArCiAgICAgICAgICAgICAgICBiLnN0b3JlTmFtZSArCiAgICAgICAgICAgICAgICAiIChpZCBJTlRFR0VSIFBSSU1BUlkgS0VZLCBrZXkgdW5pcXVlLCB2YWx1ZSkiLAogICAgICAgICAgICAgIFtdLAogICAgICAgICAgICAgIGMsCiAgICAgICAgICAgICAgZAogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIFMoYSkgewogICAgICAgICAgICB2YXIgYiA9IHRoaXMsCiAgICAgICAgICAgICAgYyA9IHsgZGI6IG51bGwgfTsKICAgICAgICAgICAgaWYgKGEpCiAgICAgICAgICAgICAgZm9yICh2YXIgZCBpbiBhKQogICAgICAgICAgICAgICAgY1tkXSA9ICJzdHJpbmciICE9IHR5cGVvZiBhW2RdID8gYVtkXS50b1N0cmluZygpIDogYVtkXTsKICAgICAgICAgICAgdmFyIGUgPSBuZXcgdmEoZnVuY3Rpb24gKGEsIGQpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYy5kYiA9IG9wZW5EYXRhYmFzZSgKICAgICAgICAgICAgICAgICAgYy5uYW1lLAogICAgICAgICAgICAgICAgICBTdHJpbmcoYy52ZXJzaW9uKSwKICAgICAgICAgICAgICAgICAgYy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgYy5zaXplCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkKGEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBSKAogICAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgKGIuX2RiSW5mbyA9IGMpLCBhKCk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgZChiKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9LCBkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiAoYy5zZXJpYWxpemVyID0gVmEpLCBlOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIFQoYSwgYiwgYywgZCwgZSwgZikgewogICAgICAgICAgICBhLmV4ZWN1dGVTcWwoCiAgICAgICAgICAgICAgYywKICAgICAgICAgICAgICBkLAogICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgZnVuY3Rpb24gKGEsIGcpIHsKICAgICAgICAgICAgICAgIGcuY29kZSA9PT0gZy5TWU5UQVhfRVJSCiAgICAgICAgICAgICAgICAgID8gYS5leGVjdXRlU3FsKAogICAgICAgICAgICAgICAgICAgICAgIlNFTEVDVCBuYW1lIEZST00gc3FsaXRlX21hc3RlciBXSEVSRSB0eXBlPSd0YWJsZScgQU5EIG5hbWUgPSA/IiwKICAgICAgICAgICAgICAgICAgICAgIFtiLnN0b3JlTmFtZV0sCiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSwgaCkgewogICAgICAgICAgICAgICAgICAgICAgICBoLnJvd3MubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBmKGEsIGcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBSKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5leGVjdXRlU3FsKGMsIGQsIGUsIGYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGYKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgIDogZihhLCBnKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGYKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBVKGEsIGIpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzOwogICAgICAgICAgICBhID0gaihhKTsKICAgICAgICAgICAgdmFyIGQgPSBuZXcgdmEoZnVuY3Rpb24gKGIsIGQpIHsKICAgICAgICAgICAgICBjLnJlYWR5KCkKICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIGUgPSBjLl9kYkluZm87CiAgICAgICAgICAgICAgICAgIGUuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICBUKAogICAgICAgICAgICAgICAgICAgICAgYywKICAgICAgICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgICAgICAgICAiU0VMRUNUICogRlJPTSAiICsgZS5zdG9yZU5hbWUgKyAiIFdIRVJFIGtleSA9ID8gTElNSVQgMSIsCiAgICAgICAgICAgICAgICAgICAgICBbYV0sCiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGMucm93cy5sZW5ndGggPyBjLnJvd3MuaXRlbSgwKS52YWx1ZSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGQgJiYgKGQgPSBlLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZCkpLCBiKGQpOwogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQoYik7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoZCwgYiksIGQ7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gVihhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpcywKICAgICAgICAgICAgICBkID0gbmV3IHZhKGZ1bmN0aW9uIChiLCBkKSB7CiAgICAgICAgICAgICAgICBjLnJlYWR5KCkKICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gYy5fZGJJbmZvOwogICAgICAgICAgICAgICAgICAgIGUuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICAgIFQoCiAgICAgICAgICAgICAgICAgICAgICAgIGMsCiAgICAgICAgICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICJTRUxFQ1QgKiBGUk9NICIgKyBlLnN0b3JlTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChjLCBkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gZC5yb3dzLCBnID0gZi5sZW5ndGgsIGggPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA8IGc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKysKICAgICAgICAgICAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZi5pdGVtKGgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqID0gaS52YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGogJiYgKGogPSBlLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoaikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IChqID0gYShqLCBpLmtleSwgaCArIDEpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgYihqKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgYigpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGQoYik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC5jYXRjaChkKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoZCwgYiksIGQ7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gVyhhLCBiLCBjLCBkKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpczsKICAgICAgICAgICAgYSA9IGooYSk7CiAgICAgICAgICAgIHZhciBmID0gbmV3IHZhKGZ1bmN0aW9uIChmLCBnKSB7CiAgICAgICAgICAgICAgZS5yZWFkeSgpCiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gYiAmJiAoYiA9IG51bGwpOwogICAgICAgICAgICAgICAgICB2YXIgaCA9IGIsCiAgICAgICAgICAgICAgICAgICAgaSA9IGUuX2RiSW5mbzsKICAgICAgICAgICAgICAgICAgaS5zZXJpYWxpemVyLnNlcmlhbGl6ZShiLCBmdW5jdGlvbiAoYiwgaikgewogICAgICAgICAgICAgICAgICAgIGoKICAgICAgICAgICAgICAgICAgICAgID8gZyhqKQogICAgICAgICAgICAgICAgICAgICAgOiBpLmRiLnRyYW5zYWN0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiSU5TRVJUIE9SIFJFUExBQ0UgSU5UTyAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnN0b3JlTmFtZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiAoa2V5LCB2YWx1ZSkgVkFMVUVTICg/LCA/KSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFthLCBiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYoaCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyhiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYi5jb2RlID09PSBiLlFVT1RBX0VSUikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA+IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgZihXLmFwcGx5KGUsIFthLCBoLCBjLCBkIC0gMV0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyhiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGYsIGMpLCBmOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIFgoYSwgYiwgYykgewogICAgICAgICAgICByZXR1cm4gVy5hcHBseSh0aGlzLCBbYSwgYiwgYywgMV0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIFkoYSwgYikgewogICAgICAgICAgICB2YXIgYyA9IHRoaXM7CiAgICAgICAgICAgIGEgPSBqKGEpOwogICAgICAgICAgICB2YXIgZCA9IG5ldyB2YShmdW5jdGlvbiAoYiwgZCkgewogICAgICAgICAgICAgIGMucmVhZHkoKQogICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgZSA9IGMuX2RiSW5mbzsKICAgICAgICAgICAgICAgICAgZS5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICAgIFQoCiAgICAgICAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgICAgICAgICJERUxFVEUgRlJPTSAiICsgZS5zdG9yZU5hbWUgKyAiIFdIRVJFIGtleSA9ID8iLAogICAgICAgICAgICAgICAgICAgICAgW2FdLAogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBiKCk7CiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZChiKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2F0Y2goZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaChkLCBiKSwgZDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBaKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSB0aGlzLAogICAgICAgICAgICAgIGMgPSBuZXcgdmEoZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgIGIucmVhZHkoKQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBiLl9kYkluZm87CiAgICAgICAgICAgICAgICAgICAgZC5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICAgICAgVCgKICAgICAgICAgICAgICAgICAgICAgICAgYiwKICAgICAgICAgICAgICAgICAgICAgICAgZCwKICAgICAgICAgICAgICAgICAgICAgICAgIkRFTEVURSBGUk9NICIgKyBkLnN0b3JlTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBhKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYyhiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLmNhdGNoKGMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaChjLCBhKSwgYzsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiAkKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSB0aGlzLAogICAgICAgICAgICAgIGMgPSBuZXcgdmEoZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgIGIucmVhZHkoKQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBiLl9kYkluZm87CiAgICAgICAgICAgICAgICAgICAgZC5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICAgICAgVCgKICAgICAgICAgICAgICAgICAgICAgICAgYiwKICAgICAgICAgICAgICAgICAgICAgICAgZCwKICAgICAgICAgICAgICAgICAgICAgICAgIlNFTEVDVCBDT1VOVChrZXkpIGFzIGMgRlJPTSAiICsgZC5zdG9yZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIFtdLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYiwgYykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYy5yb3dzLml0ZW0oMCkuYzsKICAgICAgICAgICAgICAgICAgICAgICAgICBhKGQpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGMoYik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC5jYXRjaChjKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoYywgYSksIGM7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gXyhhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpcywKICAgICAgICAgICAgICBkID0gbmV3IHZhKGZ1bmN0aW9uIChiLCBkKSB7CiAgICAgICAgICAgICAgICBjLnJlYWR5KCkKICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gYy5fZGJJbmZvOwogICAgICAgICAgICAgICAgICAgIGUuZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICAgIFQoCiAgICAgICAgICAgICAgICAgICAgICAgIGMsCiAgICAgICAgICAgICAgICAgICAgICAgIGUsCiAgICAgICAgICAgICAgICAgICAgICAgICJTRUxFQ1Qga2V5IEZST00gIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9yZU5hbWUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICIgV0hFUkUgaWQgPSA/IExJTUlUIDEiLAogICAgICAgICAgICAgICAgICAgICAgICBbYSArIDFdLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSwgYykgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gYy5yb3dzLmxlbmd0aCA/IGMucm93cy5pdGVtKDApLmtleSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYihkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkKGIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuY2F0Y2goZCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGQsIGIpLCBkOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGFhKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSB0aGlzLAogICAgICAgICAgICAgIGMgPSBuZXcgdmEoZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICAgICAgICAgIGIucmVhZHkoKQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBiLl9kYkluZm87CiAgICAgICAgICAgICAgICAgICAgZC5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICAgICAgVCgKICAgICAgICAgICAgICAgICAgICAgICAgYiwKICAgICAgICAgICAgICAgICAgICAgICAgZCwKICAgICAgICAgICAgICAgICAgICAgICAgIlNFTEVDVCBrZXkgRlJPTSAiICsgZC5zdG9yZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIFtdLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYiwgYykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGQgPSBbXSwgZSA9IDA7IGUgPCBjLnJvd3MubGVuZ3RoOyBlKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnB1c2goYy5yb3dzLml0ZW0oZSkua2V5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBhKGQpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgICAgICAgIGMoYik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIC5jYXRjaChjKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoYywgYSksIGM7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gYmEoYSkgewogICAgICAgICAgICByZXR1cm4gbmV3IHZhKGZ1bmN0aW9uIChiLCBjKSB7CiAgICAgICAgICAgICAgYS50cmFuc2FjdGlvbigKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIGQuZXhlY3V0ZVNxbCgKICAgICAgICAgICAgICAgICAgICAiU0VMRUNUIG5hbWUgRlJPTSBzcWxpdGVfbWFzdGVyIFdIRVJFIHR5cGU9J3RhYmxlJyBBTkQgbmFtZSA8PiAnX19XZWJLaXREYXRhYmFzZUluZm9UYWJsZV9fJyIsCiAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGMsIGQpIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgZiA9IDA7IGYgPCBkLnJvd3MubGVuZ3RoOyBmKyspCiAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaChkLnJvd3MuaXRlbShmKS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICAgIGIoeyBkYjogYSwgc3RvcmVOYW1lczogZSB9KTsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgICBjKGIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICBjKGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGNhKGEsIGIpIHsKICAgICAgICAgICAgYiA9IGsuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmNvbmZpZygpOwogICAgICAgICAgICAoYSA9ICgiZnVuY3Rpb24iICE9IHR5cGVvZiBhICYmIGEpIHx8IHt9KSwKICAgICAgICAgICAgICBhLm5hbWUgfHwKICAgICAgICAgICAgICAgICgoYS5uYW1lID0gYS5uYW1lIHx8IGMubmFtZSksCiAgICAgICAgICAgICAgICAoYS5zdG9yZU5hbWUgPSBhLnN0b3JlTmFtZSB8fCBjLnN0b3JlTmFtZSkpOwogICAgICAgICAgICB2YXIgZCwKICAgICAgICAgICAgICBlID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoZCA9IGEubmFtZQogICAgICAgICAgICAgICAgPyBuZXcgdmEoZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZDsKICAgICAgICAgICAgICAgICAgICAoZCA9CiAgICAgICAgICAgICAgICAgICAgICBhLm5hbWUgPT09IGMubmFtZQogICAgICAgICAgICAgICAgICAgICAgICA/IGUuX2RiSW5mby5kYgogICAgICAgICAgICAgICAgICAgICAgICA6IG9wZW5EYXRhYmFzZShhLm5hbWUsICIiLCAiIiwgMCkpLAogICAgICAgICAgICAgICAgICAgICAgYigKICAgICAgICAgICAgICAgICAgICAgICAgYS5zdG9yZU5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGI6IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlTmFtZXM6IFthLnN0b3JlTmFtZV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBiYShkKQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgdmEoZnVuY3Rpb24gKGIsIGMpIHsKICAgICAgICAgICAgICAgICAgICAgIGEuZGIudHJhbnNhY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZShhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHZhKGZ1bmN0aW9uIChiLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuZXhlY3V0ZVNxbCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRFJPUCBUQUJMRSBJRiBFWElTVFMgIiArIGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMoYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBbXSwgZyA9IDAsIGggPSBhLnN0b3JlTmFtZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA8IGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKysKICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLnB1c2goZShhLnN0b3JlTmFtZXNbZ10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YS5hbGwoZikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYyhhKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogdmEucmVqZWN0KCJJbnZhbGlkIGFyZ3VtZW50cyIpKSwKICAgICAgICAgICAgICBoKGQsIGIpLAogICAgICAgICAgICAgIGQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBkYSgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGxvY2FsU3RvcmFnZSAmJgogICAgICAgICAgICAgICAgInNldEl0ZW0iIGluIGxvY2FsU3RvcmFnZSAmJgogICAgICAgICAgICAgICAgISFsb2NhbFN0b3JhZ2Uuc2V0SXRlbQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBlYShhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gYS5uYW1lICsgIi8iOwogICAgICAgICAgICByZXR1cm4gYS5zdG9yZU5hbWUgIT09IGIuc3RvcmVOYW1lICYmIChjICs9IGEuc3RvcmVOYW1lICsgIi8iKSwgYzsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBmYSgpIHsKICAgICAgICAgICAgdmFyIGEgPSAiX2xvY2FsZm9yYWdlX3N1cHBvcnRfdGVzdCI7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGEsICEwKSwgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYSksICExCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIGdhKCkgewogICAgICAgICAgICByZXR1cm4gIWZhKCkgfHwgbG9jYWxTdG9yYWdlLmxlbmd0aCA+IDA7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaGEoYSkgewogICAgICAgICAgICB2YXIgYiA9IHRoaXMsCiAgICAgICAgICAgICAgYyA9IHt9OwogICAgICAgICAgICBpZiAoYSkgZm9yICh2YXIgZCBpbiBhKSBjW2RdID0gYVtkXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoYy5rZXlQcmVmaXggPSBlYShhLCBiLl9kZWZhdWx0Q29uZmlnKSksCiAgICAgICAgICAgICAgZ2EoKQogICAgICAgICAgICAgICAgPyAoKGIuX2RiSW5mbyA9IGMpLCAoYy5zZXJpYWxpemVyID0gVmEpLCB2YS5yZXNvbHZlKCkpCiAgICAgICAgICAgICAgICA6IHZhLnJlamVjdCgpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gaWEoYSkgewogICAgICAgICAgICB2YXIgYiA9IHRoaXMsCiAgICAgICAgICAgICAgYyA9IGIucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgIHZhciBhID0gYi5fZGJJbmZvLmtleVByZWZpeCwgYyA9IGxvY2FsU3RvcmFnZS5sZW5ndGggLSAxOwogICAgICAgICAgICAgICAgICBjID49IDA7CiAgICAgICAgICAgICAgICAgIGMtLQogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIHZhciBkID0gbG9jYWxTdG9yYWdlLmtleShjKTsKICAgICAgICAgICAgICAgICAgMCA9PT0gZC5pbmRleE9mKGEpICYmIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaChjLCBhKSwgYzsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBqYShhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpczsKICAgICAgICAgICAgYSA9IGooYSk7CiAgICAgICAgICAgIHZhciBkID0gYy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBiID0gYy5fZGJJbmZvLAogICAgICAgICAgICAgICAgZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGIua2V5UHJlZml4ICsgYSk7CiAgICAgICAgICAgICAgcmV0dXJuIGQgJiYgKGQgPSBiLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZCkpLCBkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGgoZCwgYiksIGQ7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24ga2EoYSwgYikgewogICAgICAgICAgICB2YXIgYyA9IHRoaXMsCiAgICAgICAgICAgICAgZCA9IGMucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICAgIHZhciBiID0gYy5fZGJJbmZvLAogICAgICAgICAgICAgICAgICAgIGQgPSBiLmtleVByZWZpeCwKICAgICAgICAgICAgICAgICAgICBlID0gZC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgZiA9IGxvY2FsU3RvcmFnZS5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgZyA9IDEsCiAgICAgICAgICAgICAgICAgICAgaCA9IDA7CiAgICAgICAgICAgICAgICAgIGggPCBmOwogICAgICAgICAgICAgICAgICBoKysKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB2YXIgaSA9IGxvY2FsU3RvcmFnZS5rZXkoaCk7CiAgICAgICAgICAgICAgICAgIGlmICgwID09PSBpLmluZGV4T2YoZCkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGkpOwogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgIChqICYmIChqID0gYi5zZXJpYWxpemVyLmRlc2VyaWFsaXplKGopKSwKICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gKGogPSBhKGosIGkuc3Vic3RyaW5nKGUpLCBnKyspKSkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gajsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaChkLCBiKSwgZDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBsYShhLCBiKSB7CiAgICAgICAgICAgIHZhciBjID0gdGhpcywKICAgICAgICAgICAgICBkID0gYy5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIGIsCiAgICAgICAgICAgICAgICAgIGQgPSBjLl9kYkluZm87CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBiID0gbG9jYWxTdG9yYWdlLmtleShhKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICAgICAgYiA9IG51bGw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gYiAmJiAoYiA9IGIuc3Vic3RyaW5nKGQua2V5UHJlZml4Lmxlbmd0aCkpLCBiOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gaChkLCBiKSwgZDsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBtYShhKSB7CiAgICAgICAgICAgIHZhciBiID0gdGhpcywKICAgICAgICAgICAgICBjID0gYi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgdmFyIGEgPSBiLl9kYkluZm8sIGMgPSBsb2NhbFN0b3JhZ2UubGVuZ3RoLCBkID0gW10sIGUgPSAwOwogICAgICAgICAgICAgICAgICBlIDwgYzsKICAgICAgICAgICAgICAgICAgZSsrCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgdmFyIGYgPSBsb2NhbFN0b3JhZ2Uua2V5KGUpOwogICAgICAgICAgICAgICAgICAwID09PSBmLmluZGV4T2YoYS5rZXlQcmVmaXgpICYmCiAgICAgICAgICAgICAgICAgICAgZC5wdXNoKGYuc3Vic3RyaW5nKGEua2V5UHJlZml4Lmxlbmd0aCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGMsIGEpLCBjOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIG5hKGEpIHsKICAgICAgICAgICAgdmFyIGIgPSB0aGlzLAogICAgICAgICAgICAgIGMgPSBiLmtleXMoKS50aGVuKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYS5sZW5ndGg7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGMsIGEpLCBjOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIG9hKGEsIGIpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzOwogICAgICAgICAgICBhID0gaihhKTsKICAgICAgICAgICAgdmFyIGQgPSBjLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGIgPSBjLl9kYkluZm87CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYi5rZXlQcmVmaXggKyBhKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGQsIGIpLCBkOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHBhKGEsIGIsIGMpIHsKICAgICAgICAgICAgdmFyIGQgPSB0aGlzOwogICAgICAgICAgICBhID0gaihhKTsKICAgICAgICAgICAgdmFyIGUgPSBkLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdm9pZCAwID09PSBiICYmIChiID0gbnVsbCk7CiAgICAgICAgICAgICAgdmFyIGMgPSBiOwogICAgICAgICAgICAgIHJldHVybiBuZXcgdmEoZnVuY3Rpb24gKGUsIGYpIHsKICAgICAgICAgICAgICAgIHZhciBnID0gZC5fZGJJbmZvOwogICAgICAgICAgICAgICAgZy5zZXJpYWxpemVyLnNlcmlhbGl6ZShiLCBmdW5jdGlvbiAoYiwgZCkgewogICAgICAgICAgICAgICAgICBpZiAoZCkgZihkKTsKICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShnLmtleVByZWZpeCArIGEsIGIpLCBlKGMpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICgiUXVvdGFFeGNlZWRlZEVycm9yIiAhPT0gYS5uYW1lICYmCiAgICAgICAgICAgICAgICAgICAgICAgICJOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRCIgIT09IGEubmFtZSkgfHwKICAgICAgICAgICAgICAgICAgICAgICAgZihhKSwKICAgICAgICAgICAgICAgICAgICAgICAgZihhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBoKGUsIGMpLCBlOwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHFhKGEsIGIpIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgoYiA9IGsuYXBwbHkodGhpcywgYXJndW1lbnRzKSksCiAgICAgICAgICAgICAgKGEgPSAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgYSAmJiBhKSB8fCB7fSksCiAgICAgICAgICAgICAgIWEubmFtZSkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmNvbmZpZygpOwogICAgICAgICAgICAgIChhLm5hbWUgPSBhLm5hbWUgfHwgYy5uYW1lKSwKICAgICAgICAgICAgICAgIChhLnN0b3JlTmFtZSA9IGEuc3RvcmVOYW1lIHx8IGMuc3RvcmVOYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZCwKICAgICAgICAgICAgICBlID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoZCA9IGEubmFtZQogICAgICAgICAgICAgICAgPyBuZXcgdmEoZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgICAgICAgICBiKGEuc3RvcmVOYW1lID8gZWEoYSwgZS5fZGVmYXVsdENvbmZpZykgOiBhLm5hbWUgKyAiLyIpOwogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiA9IGxvY2FsU3RvcmFnZS5sZW5ndGggLSAxOyBiID49IDA7IGItLSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBsb2NhbFN0b3JhZ2Uua2V5KGIpOwogICAgICAgICAgICAgICAgICAgICAgMCA9PT0gYy5pbmRleE9mKGEpICYmIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogdmEucmVqZWN0KCJJbnZhbGlkIGFyZ3VtZW50cyIpKSwKICAgICAgICAgICAgICBoKGQsIGIpLAogICAgICAgICAgICAgIGQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiByYShhLCBiKSB7CiAgICAgICAgICAgIGFbYl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIGMgPSBhcmd1bWVudHM7CiAgICAgICAgICAgICAgcmV0dXJuIGEucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhW2JdLmFwcGx5KGEsIGMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgIGZ1bmN0aW9uIHNhKCkgewogICAgICAgICAgICBmb3IgKHZhciBhID0gMTsgYSA8IGFyZ3VtZW50cy5sZW5ndGg7IGErKykgewogICAgICAgICAgICAgIHZhciBiID0gYXJndW1lbnRzW2FdOwogICAgICAgICAgICAgIGlmIChiKQogICAgICAgICAgICAgICAgZm9yICh2YXIgYyBpbiBiKQogICAgICAgICAgICAgICAgICBiLmhhc093blByb3BlcnR5KGMpICYmCiAgICAgICAgICAgICAgICAgICAgKCRhKGJbY10pCiAgICAgICAgICAgICAgICAgICAgICA/IChhcmd1bWVudHNbMF1bY10gPSBiW2NdLnNsaWNlKCkpCiAgICAgICAgICAgICAgICAgICAgICA6IChhcmd1bWVudHNbMF1bY10gPSBiW2NdKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgdGEgPQogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yCiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgJiYKICAgICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJgogICAgICAgICAgICAgICAgICAgICAgYS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmCiAgICAgICAgICAgICAgICAgICAgICBhICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgICAgICAgICA/ICJzeW1ib2wiCiAgICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBhOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB1YSA9IGUoKTsKICAgICAgICAgICJ1bmRlZmluZWQiID09IHR5cGVvZiBQcm9taXNlICYmIGEoMyk7CiAgICAgICAgICB2YXIgdmEgPSBQcm9taXNlLAogICAgICAgICAgICB3YSA9ICJsb2NhbC1mb3JhZ2UtZGV0ZWN0LWJsb2Itc3VwcG9ydCIsCiAgICAgICAgICAgIHhhID0gdm9pZCAwLAogICAgICAgICAgICB5YSA9IHt9LAogICAgICAgICAgICB6YSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgICAgIEFhID0gInJlYWRvbmx5IiwKICAgICAgICAgICAgQmEgPSAicmVhZHdyaXRlIiwKICAgICAgICAgICAgQ2EgPSB7CiAgICAgICAgICAgICAgX2RyaXZlcjogImFzeW5jU3RvcmFnZSIsCiAgICAgICAgICAgICAgX2luaXRTdG9yYWdlOiBDLAogICAgICAgICAgICAgIF9zdXBwb3J0OiBmKCksCiAgICAgICAgICAgICAgaXRlcmF0ZTogRSwKICAgICAgICAgICAgICBnZXRJdGVtOiBELAogICAgICAgICAgICAgIHNldEl0ZW06IEYsCiAgICAgICAgICAgICAgcmVtb3ZlSXRlbTogRywKICAgICAgICAgICAgICBjbGVhcjogSCwKICAgICAgICAgICAgICBsZW5ndGg6IEksCiAgICAgICAgICAgICAga2V5OiBKLAogICAgICAgICAgICAgIGtleXM6IEssCiAgICAgICAgICAgICAgZHJvcEluc3RhbmNlOiBMLAogICAgICAgICAgICB9LAogICAgICAgICAgICBEYSA9CiAgICAgICAgICAgICAgIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iLAogICAgICAgICAgICBFYSA9ICJ+fmxvY2FsX2ZvcmFnZV90eXBlfiIsCiAgICAgICAgICAgIEZhID0gL15+fmxvY2FsX2ZvcmFnZV90eXBlfihbXn5dKyl+LywKICAgICAgICAgICAgR2EgPSAiX19sZnNjX186IiwKICAgICAgICAgICAgSGEgPSBHYS5sZW5ndGgsCiAgICAgICAgICAgIElhID0gImFyYmYiLAogICAgICAgICAgICBKYSA9ICJibG9iIiwKICAgICAgICAgICAgS2EgPSAic2kwOCIsCiAgICAgICAgICAgIExhID0gInVpMDgiLAogICAgICAgICAgICBNYSA9ICJ1aWM4IiwKICAgICAgICAgICAgTmEgPSAic2kxNiIsCiAgICAgICAgICAgIE9hID0gInNpMzIiLAogICAgICAgICAgICBQYSA9ICJ1cjE2IiwKICAgICAgICAgICAgUWEgPSAidWkzMiIsCiAgICAgICAgICAgIFJhID0gImZsMzIiLAogICAgICAgICAgICBTYSA9ICJmbDY0IiwKICAgICAgICAgICAgVGEgPSBIYSArIElhLmxlbmd0aCwKICAgICAgICAgICAgVWEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLAogICAgICAgICAgICBWYSA9IHsKICAgICAgICAgICAgICBzZXJpYWxpemU6IFAsCiAgICAgICAgICAgICAgZGVzZXJpYWxpemU6IFEsCiAgICAgICAgICAgICAgc3RyaW5nVG9CdWZmZXI6IE4sCiAgICAgICAgICAgICAgYnVmZmVyVG9TdHJpbmc6IE8sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFdhID0gewogICAgICAgICAgICAgIF9kcml2ZXI6ICJ3ZWJTUUxTdG9yYWdlIiwKICAgICAgICAgICAgICBfaW5pdFN0b3JhZ2U6IFMsCiAgICAgICAgICAgICAgX3N1cHBvcnQ6IE0oKSwKICAgICAgICAgICAgICBpdGVyYXRlOiBWLAogICAgICAgICAgICAgIGdldEl0ZW06IFUsCiAgICAgICAgICAgICAgc2V0SXRlbTogWCwKICAgICAgICAgICAgICByZW1vdmVJdGVtOiBZLAogICAgICAgICAgICAgIGNsZWFyOiBaLAogICAgICAgICAgICAgIGxlbmd0aDogJCwKICAgICAgICAgICAgICBrZXk6IF8sCiAgICAgICAgICAgICAga2V5czogYWEsCiAgICAgICAgICAgICAgZHJvcEluc3RhbmNlOiBjYSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgWGEgPSB7CiAgICAgICAgICAgICAgX2RyaXZlcjogImxvY2FsU3RvcmFnZVdyYXBwZXIiLAogICAgICAgICAgICAgIF9pbml0U3RvcmFnZTogaGEsCiAgICAgICAgICAgICAgX3N1cHBvcnQ6IGRhKCksCiAgICAgICAgICAgICAgaXRlcmF0ZToga2EsCiAgICAgICAgICAgICAgZ2V0SXRlbTogamEsCiAgICAgICAgICAgICAgc2V0SXRlbTogcGEsCiAgICAgICAgICAgICAgcmVtb3ZlSXRlbTogb2EsCiAgICAgICAgICAgICAgY2xlYXI6IGlhLAogICAgICAgICAgICAgIGxlbmd0aDogbmEsCiAgICAgICAgICAgICAga2V5OiBsYSwKICAgICAgICAgICAgICBrZXlzOiBtYSwKICAgICAgICAgICAgICBkcm9wSW5zdGFuY2U6IHFhLAogICAgICAgICAgICB9LAogICAgICAgICAgICBZYSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIGEgPT09IGIgfHwKICAgICAgICAgICAgICAgICgibnVtYmVyIiA9PSB0eXBlb2YgYSAmJgogICAgICAgICAgICAgICAgICAibnVtYmVyIiA9PSB0eXBlb2YgYiAmJgogICAgICAgICAgICAgICAgICBpc05hTihhKSAmJgogICAgICAgICAgICAgICAgICBpc05hTihiKSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBaYSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IGEubGVuZ3RoLCBkID0gMDsgZCA8IGM7ICkgewogICAgICAgICAgICAgICAgaWYgKFlhKGFbZF0sIGIpKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgICBkKys7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJGEgPQogICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkgfHwKICAgICAgICAgICAgICBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgcmV0dXJuICJbb2JqZWN0IEFycmF5XSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICBfYSA9IHt9LAogICAgICAgICAgICBhYiA9IHt9LAogICAgICAgICAgICBiYiA9IHsgSU5ERVhFRERCOiBDYSwgV0VCU1FMOiBXYSwgTE9DQUxTVE9SQUdFOiBYYSB9LAogICAgICAgICAgICBjYiA9IFsKICAgICAgICAgICAgICBiYi5JTkRFWEVEREIuX2RyaXZlciwKICAgICAgICAgICAgICBiYi5XRUJTUUwuX2RyaXZlciwKICAgICAgICAgICAgICBiYi5MT0NBTFNUT1JBR0UuX2RyaXZlciwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgZGIgPSBbImRyb3BJbnN0YW5jZSJdLAogICAgICAgICAgICBlYiA9IFsKICAgICAgICAgICAgICAiY2xlYXIiLAogICAgICAgICAgICAgICJnZXRJdGVtIiwKICAgICAgICAgICAgICAiaXRlcmF0ZSIsCiAgICAgICAgICAgICAgImtleSIsCiAgICAgICAgICAgICAgImtleXMiLAogICAgICAgICAgICAgICJsZW5ndGgiLAogICAgICAgICAgICAgICJyZW1vdmVJdGVtIiwKICAgICAgICAgICAgICAic2V0SXRlbSIsCiAgICAgICAgICAgIF0uY29uY2F0KGRiKSwKICAgICAgICAgICAgZmIgPSB7CiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICAgICAgICAgIGRyaXZlcjogY2Iuc2xpY2UoKSwKICAgICAgICAgICAgICBuYW1lOiAibG9jYWxmb3JhZ2UiLAogICAgICAgICAgICAgIHNpemU6IDQ5ODA3MzYsCiAgICAgICAgICAgICAgc3RvcmVOYW1lOiAia2V5dmFsdWVwYWlycyIsCiAgICAgICAgICAgICAgdmVyc2lvbjogMSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2IgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZ1bmN0aW9uIGEoYikgewogICAgICAgICAgICAgICAgZCh0aGlzLCBhKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGMgaW4gYmIpCiAgICAgICAgICAgICAgICAgIGlmIChiYi5oYXNPd25Qcm9wZXJ0eShjKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gYmJbY10sCiAgICAgICAgICAgICAgICAgICAgICBmID0gZS5fZHJpdmVyOwogICAgICAgICAgICAgICAgICAgICh0aGlzW2NdID0gZiksIF9hW2ZdIHx8IHRoaXMuZGVmaW5lRHJpdmVyKGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAodGhpcy5fZGVmYXVsdENvbmZpZyA9IHNhKHt9LCBmYikpLAogICAgICAgICAgICAgICAgICAodGhpcy5fY29uZmlnID0gc2Eoe30sIHRoaXMuX2RlZmF1bHRDb25maWcsIGIpKSwKICAgICAgICAgICAgICAgICAgKHRoaXMuX2RyaXZlclNldCA9IG51bGwpLAogICAgICAgICAgICAgICAgICAodGhpcy5faW5pdERyaXZlciA9IG51bGwpLAogICAgICAgICAgICAgICAgICAodGhpcy5fcmVhZHkgPSAhMSksCiAgICAgICAgICAgICAgICAgICh0aGlzLl9kYkluZm8gPSBudWxsKSwKICAgICAgICAgICAgICAgICAgdGhpcy5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5KCksCiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RHJpdmVyKHRoaXMuX2NvbmZpZy5kcml2ZXIpLmNhdGNoKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoYS5wcm90b3R5cGUuY29uZmlnID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgaWYgKCJvYmplY3QiID09PSAodm9pZCAwID09PSBhID8gInVuZGVmaW5lZCIgOiB0YShhKSkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcmVhZHkpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKAogICAgICAgICAgICAgICAgICAgICAgICAiQ2FuJ3QgY2FsbCBjb25maWcoKSBhZnRlciBsb2NhbGZvcmFnZSBoYXMgYmVlbiB1c2VkLiIKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiBhKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICgic3RvcmVOYW1lIiA9PT0gYiAmJiAoYVtiXSA9IGFbYl0ucmVwbGFjZSgvXFcvZywgIl8iKSksCiAgICAgICAgICAgICAgICAgICAgICAgICJ2ZXJzaW9uIiA9PT0gYiAmJiAibnVtYmVyIiAhPSB0eXBlb2YgYVtiXSkKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcigiRGF0YWJhc2UgdmVyc2lvbiBtdXN0IGJlIGEgbnVtYmVyLiIpOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnW2JdID0gYVtiXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICEoImRyaXZlciIgaW4gYSAmJiBhLmRyaXZlcikgfHwKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RHJpdmVyKHRoaXMuX2NvbmZpZy5kcml2ZXIpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICByZXR1cm4gInN0cmluZyIgPT0gdHlwZW9mIGEgPyB0aGlzLl9jb25maWdbYV0gOiB0aGlzLl9jb25maWc7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChhLnByb3RvdHlwZS5kZWZpbmVEcml2ZXIgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgICAgICAgICAgICB2YXIgZCA9IG5ldyB2YShmdW5jdGlvbiAoYiwgYykgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGEuX2RyaXZlciwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IG5ldyBFcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAiQ3VzdG9tIGRyaXZlciBub3QgY29tcGxpYW50OyBzZWUgaHR0cHM6Ly9tb3ppbGxhLmdpdGh1Yi5pby9sb2NhbEZvcmFnZS8jZGVmaW5lZHJpdmVyIgogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCFhLl9kcml2ZXIpIHJldHVybiB2b2lkIGMoZSk7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGViLmNvbmNhdCgiX2luaXRTdG9yYWdlIiksIGcgPSAwLCBpID0gZi5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGcgPCBpOwogICAgICAgICAgICAgICAgICAgICAgICBnKysKICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IGZbZ107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoIVphKGRiLCBqKSB8fCBhW2pdKSAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiBhW2pdKQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIGMoZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IG5ldyBFcnJvcigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIk1ldGhvZCAiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIGlzIG5vdCBpbXBsZW1lbnRlZCBieSB0aGUgY3VycmVudCBkcml2ZXIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHZhLnJlamVjdChiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaChjLCBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdKSwgYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBkYi5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYyA8IGQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYysrCiAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gZGJbY107CiAgICAgICAgICAgICAgICAgICAgICAgICAgYVtlXSB8fCAoYVtlXSA9IGIoZSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGsgPSBmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICBfYVtkXSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygiUmVkZWZpbmluZyBMb2NhbEZvcmFnZSBkcml2ZXI6ICIgKyBkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoX2FbZF0gPSBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoYWJbZF0gPSBjKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBiKCk7CiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgIl9zdXBwb3J0IiBpbiBhCiAgICAgICAgICAgICAgICAgICAgICAgID8gYS5fc3VwcG9ydCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBhLl9zdXBwb3J0CiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhLl9zdXBwb3J0KCkudGhlbihrLCBjKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogayghIWEuX3N1cHBvcnQpCiAgICAgICAgICAgICAgICAgICAgICAgIDogayghMCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgICAgICAgICAgYyhhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gaShkLCBiLCBjKSwgZDsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgKGEucHJvdG90eXBlLmRyaXZlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RyaXZlciB8fCBudWxsOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAoYS5wcm90b3R5cGUuZ2V0RHJpdmVyID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgICAgICAgICAgICAgICAgdmFyIGQgPSBfYVthXQogICAgICAgICAgICAgICAgICAgID8gdmEucmVzb2x2ZShfYVthXSkKICAgICAgICAgICAgICAgICAgICA6IHZhLnJlamVjdChuZXcgRXJyb3IoIkRyaXZlciBub3QgZm91bmQuIikpOwogICAgICAgICAgICAgICAgICByZXR1cm4gaShkLCBiLCBjKSwgZDsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgKGEucHJvdG90eXBlLmdldFNlcmlhbGl6ZXIgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICB2YXIgYiA9IHZhLnJlc29sdmUoVmEpOwogICAgICAgICAgICAgICAgICByZXR1cm4gaShiLCBhKSwgYjsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgKGEucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGIgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIGMgPSBiLl9kcml2ZXJTZXQudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSBiLl9yZWFkeSAmJiAoYi5fcmVhZHkgPSBiLl9pbml0RHJpdmVyKCkpLAogICAgICAgICAgICAgICAgICAgICAgICBiLl9yZWFkeQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGkoYywgYSwgYSksIGM7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChhLnByb3RvdHlwZS5zZXREcml2ZXIgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkKCkgewogICAgICAgICAgICAgICAgICAgIGcuX2NvbmZpZy5kcml2ZXIgPSBnLmRyaXZlcigpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgZy5fZXh0ZW5kKGEpLAogICAgICAgICAgICAgICAgICAgICAgZCgpLAogICAgICAgICAgICAgICAgICAgICAgKGcuX3JlYWR5ID0gZy5faW5pdFN0b3JhZ2UoZy5fY29uZmlnKSksCiAgICAgICAgICAgICAgICAgICAgICBnLl9yZWFkeQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGYoYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBiKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgYyA8IGEubGVuZ3RoOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGFbY107CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMrKywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChnLl9kYkluZm8gPSBudWxsKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChnLl9yZWFkeSA9IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5nZXREcml2ZXIoZikudGhlbihlKS5jYXRjaChiKQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IG5ldyBFcnJvcigiTm8gYXZhaWxhYmxlIHN0b3JhZ2UgbWV0aG9kIGZvdW5kLiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGcuX2RyaXZlclNldCA9IHZhLnJlamVjdChoKSksIGcuX2RyaXZlclNldDsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYigpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHZhciBnID0gdGhpczsKICAgICAgICAgICAgICAgICAgJGEoYSkgfHwgKGEgPSBbYV0pOwogICAgICAgICAgICAgICAgICB2YXIgaCA9IHRoaXMuX2dldFN1cHBvcnRlZERyaXZlcnMoYSksCiAgICAgICAgICAgICAgICAgICAgaiA9CiAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLl9kcml2ZXJTZXQKICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9kcml2ZXJTZXQuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICA6IHZhLnJlc29sdmUoKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAodGhpcy5fZHJpdmVyU2V0ID0gagogICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGhbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGcuX2RiSW5mbyA9IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChnLl9yZWFkeSA9IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgIGcuZ2V0RHJpdmVyKGEpLnRoZW4oZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChnLl9kcml2ZXIgPSBhLl9kcml2ZXIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcuX3dyYXBMaWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZy5faW5pdERyaXZlciA9IGYoaCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZCgpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG5ldyBFcnJvcigiTm8gYXZhaWxhYmxlIHN0b3JhZ2UgbWV0aG9kIGZvdW5kLiIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGcuX2RyaXZlclNldCA9IHZhLnJlamVjdChhKSksIGcuX2RyaXZlclNldDsKICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICBpKHRoaXMuX2RyaXZlclNldCwgYiwgYyksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHJpdmVyU2V0CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChhLnByb3RvdHlwZS5zdXBwb3J0cyA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhIWFiW2FdOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAoYS5wcm90b3R5cGUuX2V4dGVuZCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgIHNhKHRoaXMsIGEpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAoYS5wcm90b3R5cGUuX2dldFN1cHBvcnRlZERyaXZlcnMgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBiID0gW10sIGMgPSAwLCBkID0gYS5sZW5ndGg7IGMgPCBkOyBjKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGFbY107CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXBwb3J0cyhlKSAmJiBiLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIGI7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChhLnByb3RvdHlwZS5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gMCwgYiA9IGViLmxlbmd0aDsgYSA8IGI7IGErKykgcmEodGhpcywgZWJbYV0pOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAoYS5wcm90b3R5cGUuY3JlYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiAoYikgewogICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGEoYik7CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGEKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSgpLAogICAgICAgICAgICBoYiA9IG5ldyBnYigpOwogICAgICAgICAgYi5leHBvcnRzID0gaGI7CiAgICAgICAgfSwKICAgICAgICB7IDM6IDMgfSwKICAgICAgXSwKICAgIH0sCiAgICB7fSwKICAgIFs0XQogICkoNCk7Cn0pOwohKGZ1bmN0aW9uIChlLCBuKSB7CiAgIm9iamVjdCIgPT0gdHlwZW9mIGV4cG9ydHMgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIG1vZHVsZQogICAgPyAobW9kdWxlLmV4cG9ydHMgPSBuKCkpCiAgICA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kCiAgICA/IGRlZmluZShuKQogICAgOiAoKGUgPSBlIHx8IHNlbGYpLm1pdHQgPSBuKCkpOwp9KSh0aGlzLCBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gewogICAgICBhbGw6IChlID0gZSB8fCBuZXcgTWFwKCkpLAogICAgICBvbjogZnVuY3Rpb24gKG4sIHQpIHsKICAgICAgICB2YXIgZiA9IGUuZ2V0KG4pOwogICAgICAgIGYgPyBmLnB1c2godCkgOiBlLnNldChuLCBbdF0pOwogICAgICB9LAogICAgICBvZmY6IGZ1bmN0aW9uIChuLCB0KSB7CiAgICAgICAgdmFyIGYgPSBlLmdldChuKTsKICAgICAgICBmICYmICh0ID8gZi5zcGxpY2UoZi5pbmRleE9mKHQpID4+PiAwLCAxKSA6IGUuc2V0KG4sIFtdKSk7CiAgICAgIH0sCiAgICAgIGVtaXQ6IGZ1bmN0aW9uIChuLCB0KSB7CiAgICAgICAgdmFyIGYgPSBlLmdldChuKTsKICAgICAgICBmICYmCiAgICAgICAgICBmLnNsaWNlKCkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGUodCk7CiAgICAgICAgICB9KSwKICAgICAgICAgIChmID0gZS5nZXQoIioiKSkgJiYKICAgICAgICAgICAgZi5zbGljZSgpLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUobiwgdCk7CiAgICAgICAgICAgIH0pOwogICAgICB9LAogICAgfTsKICB9Owp9KTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWl0dC51bWQuanMubWFwCgohKGZ1bmN0aW9uIChlLCB0KSB7CiAgIm9iamVjdCIgPT0gdHlwZW9mIGV4cG9ydHMgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIG1vZHVsZQogICAgPyB0KGV4cG9ydHMsIHJlcXVpcmUoInJlYWN0IiksIHJlcXVpcmUoInJlYWN0LWRvbSIpKQogICAgOiAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZAogICAgPyBkZWZpbmUoWyJleHBvcnRzIiwgInJlYWN0IiwgInJlYWN0LWRvbSJdLCB0KQogICAgOiB0KCgoZSA9IGUgfHwgc2VsZikuUmVhY3RUcmFuc2l0aW9uR3JvdXAgPSB7fSksIGUuUmVhY3QsIGUuUmVhY3RET00pOwp9KSh0aGlzLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgciA9ICJkZWZhdWx0IiBpbiB0ID8gdC5kZWZhdWx0IDogdDsKCiAgZnVuY3Rpb24gbygpIHsKICAgIHJldHVybiAobyA9CiAgICAgIE9iamVjdC5hc3NpZ24gfHwKICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgdmFyIG4gPSBhcmd1bWVudHNbdF07CiAgICAgICAgICBmb3IgKHZhciByIGluIG4pCiAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLCByKSAmJiAoZVtyXSA9IG5bcl0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZTsKICAgICAgfSkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CgogIGZ1bmN0aW9uIGkoZSwgdCkgewogICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIHt9OwogICAgdmFyIG4sCiAgICAgIHIsCiAgICAgIG8gPSB7fSwKICAgICAgaSA9IE9iamVjdC5rZXlzKGUpOwogICAgZm9yIChyID0gMDsgciA8IGkubGVuZ3RoOyByKyspCiAgICAgIChuID0gaVtyXSksIHQuaW5kZXhPZihuKSA+PSAwIHx8IChvW25dID0gZVtuXSk7CiAgICByZXR1cm4gbzsKICB9CgogIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgKGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSkpLAogICAgICAoZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBlKSwKICAgICAgKGUuX19wcm90b19fID0gdCk7CiAgfQoKICBmdW5jdGlvbiBzKGUsIHQpIHsKICAgIHJldHVybiBlKCh0ID0geyBleHBvcnRzOiB7fSB9KSwgdC5leHBvcnRzKSwgdC5leHBvcnRzOwogICAgLyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xMy4xCiAgICAgKiByZWFjdC1pcy5wcm9kdWN0aW9uLm1pbi5qcwogICAgICoKICAgICAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLgogICAgICoKICAgICAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZQogICAgICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLgogICAgICovCiAgfQoKICBuID0gbiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwgImRlZmF1bHQiKSA/IG4uZGVmYXVsdCA6IG47CiAgdmFyIGMgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmZvciwKICAgIGwgPSBjID8gU3ltYm9sLmZvcigicmVhY3QuZWxlbWVudCIpIDogNjAxMDMsCiAgICB1ID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0LnBvcnRhbCIpIDogNjAxMDYsCiAgICBwID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0LmZyYWdtZW50IikgOiA2MDEwNywKICAgIGQgPSBjID8gU3ltYm9sLmZvcigicmVhY3Quc3RyaWN0X21vZGUiKSA6IDYwMTA4LAogICAgZiA9IGMgPyBTeW1ib2wuZm9yKCJyZWFjdC5wcm9maWxlciIpIDogNjAxMTQsCiAgICBoID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0LnByb3ZpZGVyIikgOiA2MDEwOSwKICAgIG0gPSBjID8gU3ltYm9sLmZvcigicmVhY3QuY29udGV4dCIpIDogNjAxMTAsCiAgICBFID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0LmFzeW5jX21vZGUiKSA6IDYwMTExLAogICAgeSA9IGMgPyBTeW1ib2wuZm9yKCJyZWFjdC5jb25jdXJyZW50X21vZGUiKSA6IDYwMTExLAogICAgeCA9IGMgPyBTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpIDogNjAxMTIsCiAgICB2ID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0LnN1c3BlbnNlIikgOiA2MDExMywKICAgIGcgPSBjID8gU3ltYm9sLmZvcigicmVhY3Quc3VzcGVuc2VfbGlzdCIpIDogNjAxMjAsCiAgICBiID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0Lm1lbW8iKSA6IDYwMTE1LAogICAgQyA9IGMgPyBTeW1ib2wuZm9yKCJyZWFjdC5sYXp5IikgOiA2MDExNiwKICAgIFMgPSBjID8gU3ltYm9sLmZvcigicmVhY3QuYmxvY2siKSA6IDYwMTIxLAogICAgTyA9IGMgPyBTeW1ib2wuZm9yKCJyZWFjdC5mdW5kYW1lbnRhbCIpIDogNjAxMTcsCiAgICBOID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0LnJlc3BvbmRlciIpIDogNjAxMTgsCiAgICBUID0gYyA/IFN5bWJvbC5mb3IoInJlYWN0LnNjb3BlIikgOiA2MDExOTsKCiAgZnVuY3Rpb24gayhlKSB7CiAgICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgbnVsbCAhPT0gZSkgewogICAgICB2YXIgdCA9IGUuJCR0eXBlb2Y7CiAgICAgIHN3aXRjaCAodCkgewogICAgICAgIGNhc2UgbDoKICAgICAgICAgIHN3aXRjaCAoKGUgPSBlLnR5cGUpKSB7CiAgICAgICAgICAgIGNhc2UgRToKICAgICAgICAgICAgY2FzZSB5OgogICAgICAgICAgICBjYXNlIHA6CiAgICAgICAgICAgIGNhc2UgZjoKICAgICAgICAgICAgY2FzZSBkOgogICAgICAgICAgICBjYXNlIHY6CiAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgc3dpdGNoICgoZSA9IGUgJiYgZS4kJHR5cGVvZikpIHsKICAgICAgICAgICAgICAgIGNhc2UgbToKICAgICAgICAgICAgICAgIGNhc2UgeDoKICAgICAgICAgICAgICAgIGNhc2UgQzoKICAgICAgICAgICAgICAgIGNhc2UgYjoKICAgICAgICAgICAgICAgIGNhc2UgaDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgY2FzZSB1OgogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIFAoZSkgewogICAgcmV0dXJuIGsoZSkgPT09IHk7CiAgfQoKICB2YXIgdyA9IHsKICAgICAgQXN5bmNNb2RlOiBFLAogICAgICBDb25jdXJyZW50TW9kZTogeSwKICAgICAgQ29udGV4dENvbnN1bWVyOiBtLAogICAgICBDb250ZXh0UHJvdmlkZXI6IGgsCiAgICAgIEVsZW1lbnQ6IGwsCiAgICAgIEZvcndhcmRSZWY6IHgsCiAgICAgIEZyYWdtZW50OiBwLAogICAgICBMYXp5OiBDLAogICAgICBNZW1vOiBiLAogICAgICBQb3J0YWw6IHUsCiAgICAgIFByb2ZpbGVyOiBmLAogICAgICBTdHJpY3RNb2RlOiBkLAogICAgICBTdXNwZW5zZTogdiwKICAgICAgaXNBc3luY01vZGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIFAoZSkgfHwgayhlKSA9PT0gRTsKICAgICAgfSwKICAgICAgaXNDb25jdXJyZW50TW9kZTogUCwKICAgICAgaXNDb250ZXh0Q29uc3VtZXI6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGsoZSkgPT09IG07CiAgICAgIH0sCiAgICAgIGlzQ29udGV4dFByb3ZpZGVyOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBrKGUpID09PSBoOwogICAgICB9LAogICAgICBpc0VsZW1lbnQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiBlICYmIG51bGwgIT09IGUgJiYgZS4kJHR5cGVvZiA9PT0gbDsKICAgICAgfSwKICAgICAgaXNGb3J3YXJkUmVmOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBrKGUpID09PSB4OwogICAgICB9LAogICAgICBpc0ZyYWdtZW50OiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBrKGUpID09PSBwOwogICAgICB9LAogICAgICBpc0xhenk6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGsoZSkgPT09IEM7CiAgICAgIH0sCiAgICAgIGlzTWVtbzogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gayhlKSA9PT0gYjsKICAgICAgfSwKICAgICAgaXNQb3J0YWw6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGsoZSkgPT09IHU7CiAgICAgIH0sCiAgICAgIGlzUHJvZmlsZXI6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGsoZSkgPT09IGY7CiAgICAgIH0sCiAgICAgIGlzU3RyaWN0TW9kZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gayhlKSA9PT0gZDsKICAgICAgfSwKICAgICAgaXNTdXNwZW5zZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gayhlKSA9PT0gdjsKICAgICAgfSwKICAgICAgaXNWYWxpZEVsZW1lbnRUeXBlOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICAic3RyaW5nIiA9PSB0eXBlb2YgZSB8fAogICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSB8fAogICAgICAgICAgZSA9PT0gcCB8fAogICAgICAgICAgZSA9PT0geSB8fAogICAgICAgICAgZSA9PT0gZiB8fAogICAgICAgICAgZSA9PT0gZCB8fAogICAgICAgICAgZSA9PT0gdiB8fAogICAgICAgICAgZSA9PT0gZyB8fAogICAgICAgICAgKCJvYmplY3QiID09IHR5cGVvZiBlICYmCiAgICAgICAgICAgIG51bGwgIT09IGUgJiYKICAgICAgICAgICAgKGUuJCR0eXBlb2YgPT09IEMgfHwKICAgICAgICAgICAgICBlLiQkdHlwZW9mID09PSBiIHx8CiAgICAgICAgICAgICAgZS4kJHR5cGVvZiA9PT0gaCB8fAogICAgICAgICAgICAgIGUuJCR0eXBlb2YgPT09IG0gfHwKICAgICAgICAgICAgICBlLiQkdHlwZW9mID09PSB4IHx8CiAgICAgICAgICAgICAgZS4kJHR5cGVvZiA9PT0gTyB8fAogICAgICAgICAgICAgIGUuJCR0eXBlb2YgPT09IE4gfHwKICAgICAgICAgICAgICBlLiQkdHlwZW9mID09PSBUIHx8CiAgICAgICAgICAgICAgZS4kJHR5cGVvZiA9PT0gUykpCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgdHlwZU9mOiBrLAogICAgfSwKICAgIGogPSBzKGZ1bmN0aW9uIChlLCB0KSB7fSksCiAgICBNID0KICAgICAgKGouQXN5bmNNb2RlLAogICAgICBqLkNvbmN1cnJlbnRNb2RlLAogICAgICBqLkNvbnRleHRDb25zdW1lciwKICAgICAgai5Db250ZXh0UHJvdmlkZXIsCiAgICAgIGouRWxlbWVudCwKICAgICAgai5Gb3J3YXJkUmVmLAogICAgICBqLkZyYWdtZW50LAogICAgICBqLkxhenksCiAgICAgIGouTWVtbywKICAgICAgai5Qb3J0YWwsCiAgICAgIGouUHJvZmlsZXIsCiAgICAgIGouU3RyaWN0TW9kZSwKICAgICAgai5TdXNwZW5zZSwKICAgICAgai5pc0FzeW5jTW9kZSwKICAgICAgai5pc0NvbmN1cnJlbnRNb2RlLAogICAgICBqLmlzQ29udGV4dENvbnN1bWVyLAogICAgICBqLmlzQ29udGV4dFByb3ZpZGVyLAogICAgICBqLmlzRWxlbWVudCwKICAgICAgai5pc0ZvcndhcmRSZWYsCiAgICAgIGouaXNGcmFnbWVudCwKICAgICAgai5pc0xhenksCiAgICAgIGouaXNNZW1vLAogICAgICBqLmlzUG9ydGFsLAogICAgICBqLmlzUHJvZmlsZXIsCiAgICAgIGouaXNTdHJpY3RNb2RlLAogICAgICBqLmlzU3VzcGVuc2UsCiAgICAgIGouaXNWYWxpZEVsZW1lbnRUeXBlLAogICAgICBqLnR5cGVPZiwKICAgICAgcyhmdW5jdGlvbiAoZSkgewogICAgICAgIGUuZXhwb3J0cyA9IHc7CiAgICAgIH0pLAogICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSwKICAgIFIgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LAogICAgJCA9IE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGU7CgogIGZ1bmN0aW9uIEEoZSkgewogICAgaWYgKG51bGwgPT0gZSkKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAiT2JqZWN0LmFzc2lnbiBjYW5ub3QgYmUgY2FsbGVkIHdpdGggbnVsbCBvciB1bmRlZmluZWQiCiAgICAgICk7CiAgICByZXR1cm4gT2JqZWN0KGUpOwogIH0KCiAgKGZ1bmN0aW9uICgpIHsKICAgIHRyeSB7CiAgICAgIGlmICghT2JqZWN0LmFzc2lnbikgcmV0dXJuICExOwogICAgICB2YXIgZSA9IG5ldyBTdHJpbmcoImFiYyIpOwogICAgICBpZiAoKChlWzVdID0gImRlIiksICI1IiA9PT0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSlbMF0pKSByZXR1cm4gITE7CiAgICAgIGZvciAodmFyIHQgPSB7fSwgbiA9IDA7IG4gPCAxMDsgbisrKSB0WyJfIiArIFN0cmluZy5mcm9tQ2hhckNvZGUobildID0gbjsKICAgICAgaWYgKAogICAgICAgICIwMTIzNDU2Nzg5IiAhPT0KICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KQogICAgICAgICAgLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gdFtlXTsKICAgICAgICAgIH0pCiAgICAgICAgICAuam9pbigiIikKICAgICAgKQogICAgICAgIHJldHVybiAhMTsKICAgICAgdmFyIHIgPSB7fTsKICAgICAgcmV0dXJuICgKICAgICAgICAiYWJjZGVmZ2hpamtsbW5vcHFyc3QiLnNwbGl0KCIiKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByW2VdID0gZTsKICAgICAgICB9KSwKICAgICAgICAiYWJjZGVmZ2hpamtsbW5vcHFyc3QiID09PSBPYmplY3Qua2V5cyhPYmplY3QuYXNzaWduKHt9LCByKSkuam9pbigiIikKICAgICAgKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuICExOwogICAgfQogIH0pKCkgJiYgT2JqZWN0LmFzc2lnbiwKICAgIEZ1bmN0aW9uLmNhbGwuYmluZChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTsKCiAgZnVuY3Rpb24gTCgpIHt9CgogIGZ1bmN0aW9uIF8oKSB7fQoKICBfLnJlc2V0V2FybmluZ0NhY2hlID0gTDsKICB2YXIgRCA9IHMoZnVuY3Rpb24gKGUpIHsKICAgIGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7CiAgICAgIGZ1bmN0aW9uIGUoZSwgdCwgbiwgciwgbywgaSkgewogICAgICAgIGlmICgiU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQiICE9PSBpKSB7CiAgICAgICAgICB2YXIgYSA9IG5ldyBFcnJvcigKICAgICAgICAgICAgIkNhbGxpbmcgUHJvcFR5cGVzIHZhbGlkYXRvcnMgZGlyZWN0bHkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYHByb3AtdHlwZXNgIHBhY2thZ2UuIFVzZSBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoKSB0byBjYWxsIHRoZW0uIFJlYWQgbW9yZSBhdCBodHRwOi8vZmIubWUvdXNlLWNoZWNrLXByb3AtdHlwZXMiCiAgICAgICAgICApOwogICAgICAgICAgdGhyb3cgKChhLm5hbWUgPSAiSW52YXJpYW50IFZpb2xhdGlvbiIpLCBhKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH0KCiAgICAgIGUuaXNSZXF1aXJlZCA9IGU7CiAgICAgIHZhciBuID0gewogICAgICAgIGFycmF5OiBlLAogICAgICAgIGJvb2w6IGUsCiAgICAgICAgZnVuYzogZSwKICAgICAgICBudW1iZXI6IGUsCiAgICAgICAgb2JqZWN0OiBlLAogICAgICAgIHN0cmluZzogZSwKICAgICAgICBzeW1ib2w6IGUsCiAgICAgICAgYW55OiBlLAogICAgICAgIGFycmF5T2Y6IHQsCiAgICAgICAgZWxlbWVudDogZSwKICAgICAgICBlbGVtZW50VHlwZTogZSwKICAgICAgICBpbnN0YW5jZU9mOiB0LAogICAgICAgIG5vZGU6IGUsCiAgICAgICAgb2JqZWN0T2Y6IHQsCiAgICAgICAgb25lT2Y6IHQsCiAgICAgICAgb25lT2ZUeXBlOiB0LAogICAgICAgIHNoYXBlOiB0LAogICAgICAgIGV4YWN0OiB0LAogICAgICAgIGNoZWNrUHJvcFR5cGVzOiBfLAogICAgICAgIHJlc2V0V2FybmluZ0NhY2hlOiBMLAogICAgICB9OwogICAgICByZXR1cm4gKG4uUHJvcFR5cGVzID0gbiksIG47CiAgICB9KSgpOwogIH0pOwogIEQub2JqZWN0LCBELm9uZU9mVHlwZSwgRC5lbGVtZW50LCBELmJvb2wsIEQuZnVuYzsKCiAgZnVuY3Rpb24gRihlLCB0KSB7CiAgICByZXR1cm4gZQogICAgICAucmVwbGFjZShuZXcgUmVnRXhwKCIoXnxcXHMpIiArIHQgKyAiKD86XFxzfCQpIiwgImciKSwgIiQxIikKICAgICAgLnJlcGxhY2UoL1xzKy9nLCAiICIpCiAgICAgIC5yZXBsYWNlKC9eXHMqfFxzKiQvZywgIiIpOwogIH0KCiAgdmFyIFYgPSB7IGRpc2FibGVkOiAhMSB9LAogICAgSSA9IHIuY3JlYXRlQ29udGV4dChudWxsKSwKICAgIFUgPSAiZW50ZXJpbmciLAogICAgcSA9ICJlbnRlcmVkIiwKICAgIHogPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgZnVuY3Rpb24gdCh0LCBuKSB7CiAgICAgICAgdmFyIHI7CiAgICAgICAgciA9IGUuY2FsbCh0aGlzLCB0LCBuKSB8fCB0aGlzOwogICAgICAgIHZhciBvLAogICAgICAgICAgaSA9IG4gJiYgIW4uaXNNb3VudGluZyA/IHQuZW50ZXIgOiB0LmFwcGVhcjsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKHIuYXBwZWFyU3RhdHVzID0gbnVsbCksCiAgICAgICAgICB0LmluCiAgICAgICAgICAgID8gaQogICAgICAgICAgICAgID8gKChvID0gImV4aXRlZCIpLCAoci5hcHBlYXJTdGF0dXMgPSBVKSkKICAgICAgICAgICAgICA6IChvID0gcSkKICAgICAgICAgICAgOiAobyA9IHQudW5tb3VudE9uRXhpdCB8fCB0Lm1vdW50T25FbnRlciA/ICJ1bm1vdW50ZWQiIDogImV4aXRlZCIpLAogICAgICAgICAgKHIuc3RhdGUgPSB7IHN0YXR1czogbyB9KSwKICAgICAgICAgIChyLm5leHRDYWxsYmFjayA9IG51bGwpLAogICAgICAgICAgcgogICAgICAgICk7CiAgICAgIH0KCiAgICAgIGEodCwgZSksCiAgICAgICAgKHQuZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBlLmluICYmICJ1bm1vdW50ZWQiID09PSB0LnN0YXR1cyA/IHsgc3RhdHVzOiAiZXhpdGVkIiB9IDogbnVsbDsKICAgICAgICB9KTsKICAgICAgdmFyIG8gPSB0LnByb3RvdHlwZTsKICAgICAgcmV0dXJuICgKICAgICAgICAoby5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCEwLCB0aGlzLmFwcGVhclN0YXR1cyk7CiAgICAgICAgfSksCiAgICAgICAgKG8uY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gbnVsbDsKICAgICAgICAgIGlmIChlICE9PSB0aGlzLnByb3BzKSB7CiAgICAgICAgICAgIHZhciBuID0gdGhpcy5zdGF0ZS5zdGF0dXM7CiAgICAgICAgICAgIHRoaXMucHJvcHMuaW4KICAgICAgICAgICAgICA/IG4gIT09IFUgJiYgbiAhPT0gcSAmJiAodCA9IFUpCiAgICAgICAgICAgICAgOiAobiAhPT0gVSAmJiBuICE9PSBxKSB8fCAodCA9ICJleGl0aW5nIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1cyghMSwgdCk7CiAgICAgICAgfSksCiAgICAgICAgKG8uY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLmNhbmNlbE5leHRDYWxsYmFjaygpOwogICAgICAgIH0pLAogICAgICAgIChvLmdldFRpbWVvdXRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgIHQsCiAgICAgICAgICAgIG4sCiAgICAgICAgICAgIHIgPSB0aGlzLnByb3BzLnRpbWVvdXQ7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoZSA9IHQgPSBuID0gciksCiAgICAgICAgICAgIG51bGwgIT0gciAmJgogICAgICAgICAgICAgICJudW1iZXIiICE9IHR5cGVvZiByICYmCiAgICAgICAgICAgICAgKChlID0gci5leGl0KSwKICAgICAgICAgICAgICAodCA9IHIuZW50ZXIpLAogICAgICAgICAgICAgIChuID0gdm9pZCAwICE9PSByLmFwcGVhciA/IHIuYXBwZWFyIDogdCkpLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZXhpdDogZSwKICAgICAgICAgICAgICBlbnRlcjogdCwKICAgICAgICAgICAgICBhcHBlYXI6IG4sCiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgKG8udXBkYXRlU3RhdHVzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICExKSwKICAgICAgICAgICAgbnVsbCAhPT0gdAogICAgICAgICAgICAgID8gKHRoaXMuY2FuY2VsTmV4dENhbGxiYWNrKCksCiAgICAgICAgICAgICAgICB0ID09PSBVID8gdGhpcy5wZXJmb3JtRW50ZXIoZSkgOiB0aGlzLnBlcmZvcm1FeGl0KCkpCiAgICAgICAgICAgICAgOiB0aGlzLnByb3BzLnVubW91bnRPbkV4aXQgJiYKICAgICAgICAgICAgICAgICJleGl0ZWQiID09PSB0aGlzLnN0YXRlLnN0YXR1cyAmJgogICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHN0YXR1czogInVubW91bnRlZCIgfSk7CiAgICAgICAgfSksCiAgICAgICAgKG8ucGVyZm9ybUVudGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgciA9IHRoaXMucHJvcHMuZW50ZXIsCiAgICAgICAgICAgIG8gPSB0aGlzLmNvbnRleHQgPyB0aGlzLmNvbnRleHQuaXNNb3VudGluZyA6IGUsCiAgICAgICAgICAgIGkgPSB0aGlzLnByb3BzLm5vZGVSZWYgPyBbb10gOiBbbi5maW5kRE9NTm9kZSh0aGlzKSwgb10sCiAgICAgICAgICAgIGEgPSBpWzBdLAogICAgICAgICAgICBzID0gaVsxXSwKICAgICAgICAgICAgYyA9IHRoaXMuZ2V0VGltZW91dHMoKSwKICAgICAgICAgICAgbCA9IG8gPyBjLmFwcGVhciA6IGMuZW50ZXI7CiAgICAgICAgICAoIWUgJiYgIXIpIHx8IFYuZGlzYWJsZWQKICAgICAgICAgICAgPyB0aGlzLnNhZmVTZXRTdGF0ZSh7IHN0YXR1czogcSB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0LnByb3BzLm9uRW50ZXJlZChhKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICA6ICh0aGlzLnByb3BzLm9uRW50ZXIoYSwgcyksCiAgICAgICAgICAgICAgdGhpcy5zYWZlU2V0U3RhdGUoeyBzdGF0dXM6IFUgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdC5wcm9wcy5vbkVudGVyaW5nKGEsIHMpLAogICAgICAgICAgICAgICAgICB0Lm9uVHJhbnNpdGlvbkVuZChsLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdC5zYWZlU2V0U3RhdGUoeyBzdGF0dXM6IHEgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgdC5wcm9wcy5vbkVudGVyZWQoYSwgcyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pKTsKICAgICAgICB9KSwKICAgICAgICAoby5wZXJmb3JtRXhpdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlID0gdGhpcywKICAgICAgICAgICAgdCA9IHRoaXMucHJvcHMuZXhpdCwKICAgICAgICAgICAgciA9IHRoaXMuZ2V0VGltZW91dHMoKSwKICAgICAgICAgICAgbyA9IHRoaXMucHJvcHMubm9kZVJlZiA/IHZvaWQgMCA6IG4uZmluZERPTU5vZGUodGhpcyk7CiAgICAgICAgICB0ICYmICFWLmRpc2FibGVkCiAgICAgICAgICAgID8gKHRoaXMucHJvcHMub25FeGl0KG8pLAogICAgICAgICAgICAgIHRoaXMuc2FmZVNldFN0YXRlKHsgc3RhdHVzOiAiZXhpdGluZyIgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZS5wcm9wcy5vbkV4aXRpbmcobyksCiAgICAgICAgICAgICAgICAgIGUub25UcmFuc2l0aW9uRW5kKHIuZXhpdCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGUuc2FmZVNldFN0YXRlKHsgc3RhdHVzOiAiZXhpdGVkIiB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICBlLnByb3BzLm9uRXhpdGVkKG8pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSkKICAgICAgICAgICAgOiB0aGlzLnNhZmVTZXRTdGF0ZSh7IHN0YXR1czogImV4aXRlZCIgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZS5wcm9wcy5vbkV4aXRlZChvKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICAoby5jYW5jZWxOZXh0Q2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBudWxsICE9PSB0aGlzLm5leHRDYWxsYmFjayAmJgogICAgICAgICAgICAodGhpcy5uZXh0Q2FsbGJhY2suY2FuY2VsKCksICh0aGlzLm5leHRDYWxsYmFjayA9IG51bGwpKTsKICAgICAgICB9KSwKICAgICAgICAoby5zYWZlU2V0U3RhdGUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgKHQgPSB0aGlzLnNldE5leHRDYWxsYmFjayh0KSksIHRoaXMuc2V0U3RhdGUoZSwgdCk7CiAgICAgICAgfSksCiAgICAgICAgKG8uc2V0TmV4dENhbGxiYWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgICAgbiA9ICEwOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHRoaXMubmV4dENhbGxiYWNrID0gZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICBuICYmICgobiA9ICExKSwgKHQubmV4dENhbGxiYWNrID0gbnVsbCksIGUocikpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKHRoaXMubmV4dENhbGxiYWNrLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBuID0gITE7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjawogICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICAoby5vblRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdGhpcy5zZXROZXh0Q2FsbGJhY2sodCk7CiAgICAgICAgICB2YXIgciA9IHRoaXMucHJvcHMubm9kZVJlZgogICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5ub2RlUmVmLmN1cnJlbnQKICAgICAgICAgICAgICA6IG4uZmluZERPTU5vZGUodGhpcyksCiAgICAgICAgICAgIG8gPSBudWxsID09IGUgJiYgIXRoaXMucHJvcHMuYWRkRW5kTGlzdGVuZXI7CiAgICAgICAgICBpZiAociAmJiAhbykgewogICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5hZGRFbmRMaXN0ZW5lcikgewogICAgICAgICAgICAgIHZhciBpID0gdGhpcy5wcm9wcy5ub2RlUmVmCiAgICAgICAgICAgICAgICAgID8gW3RoaXMubmV4dENhbGxiYWNrXQogICAgICAgICAgICAgICAgICA6IFtyLCB0aGlzLm5leHRDYWxsYmFja10sCiAgICAgICAgICAgICAgICBhID0gaVswXSwKICAgICAgICAgICAgICAgIHMgPSBpWzFdOwogICAgICAgICAgICAgIHRoaXMucHJvcHMuYWRkRW5kTGlzdGVuZXIoYSwgcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbnVsbCAhPSBlICYmIHNldFRpbWVvdXQodGhpcy5uZXh0Q2FsbGJhY2ssIGUpOwogICAgICAgICAgfSBlbHNlIHNldFRpbWVvdXQodGhpcy5uZXh0Q2FsbGJhY2ssIDApOwogICAgICAgIH0pLAogICAgICAgIChvLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlID0gdGhpcy5zdGF0ZS5zdGF0dXM7CiAgICAgICAgICBpZiAoInVubW91bnRlZCIgPT09IGUpIHJldHVybiBudWxsOwogICAgICAgICAgdmFyIHQgPSB0aGlzLnByb3BzLAogICAgICAgICAgICBuID0gdC5jaGlsZHJlbiwKICAgICAgICAgICAgbyA9CiAgICAgICAgICAgICAgKHQuaW4sCiAgICAgICAgICAgICAgdC5tb3VudE9uRW50ZXIsCiAgICAgICAgICAgICAgdC51bm1vdW50T25FeGl0LAogICAgICAgICAgICAgIHQuYXBwZWFyLAogICAgICAgICAgICAgIHQuZW50ZXIsCiAgICAgICAgICAgICAgdC5leGl0LAogICAgICAgICAgICAgIHQudGltZW91dCwKICAgICAgICAgICAgICB0LmFkZEVuZExpc3RlbmVyLAogICAgICAgICAgICAgIHQub25FbnRlciwKICAgICAgICAgICAgICB0Lm9uRW50ZXJpbmcsCiAgICAgICAgICAgICAgdC5vbkVudGVyZWQsCiAgICAgICAgICAgICAgdC5vbkV4aXQsCiAgICAgICAgICAgICAgdC5vbkV4aXRpbmcsCiAgICAgICAgICAgICAgdC5vbkV4aXRlZCwKICAgICAgICAgICAgICB0Lm5vZGVSZWYsCiAgICAgICAgICAgICAgaSh0LCBbCiAgICAgICAgICAgICAgICAiY2hpbGRyZW4iLAogICAgICAgICAgICAgICAgImluIiwKICAgICAgICAgICAgICAgICJtb3VudE9uRW50ZXIiLAogICAgICAgICAgICAgICAgInVubW91bnRPbkV4aXQiLAogICAgICAgICAgICAgICAgImFwcGVhciIsCiAgICAgICAgICAgICAgICAiZW50ZXIiLAogICAgICAgICAgICAgICAgImV4aXQiLAogICAgICAgICAgICAgICAgInRpbWVvdXQiLAogICAgICAgICAgICAgICAgImFkZEVuZExpc3RlbmVyIiwKICAgICAgICAgICAgICAgICJvbkVudGVyIiwKICAgICAgICAgICAgICAgICJvbkVudGVyaW5nIiwKICAgICAgICAgICAgICAgICJvbkVudGVyZWQiLAogICAgICAgICAgICAgICAgIm9uRXhpdCIsCiAgICAgICAgICAgICAgICAib25FeGl0aW5nIiwKICAgICAgICAgICAgICAgICJvbkV4aXRlZCIsCiAgICAgICAgICAgICAgICAibm9kZVJlZiIsCiAgICAgICAgICAgICAgXSkpOwogICAgICAgICAgcmV0dXJuIHIuY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgSS5Qcm92aWRlciwKICAgICAgICAgICAgeyB2YWx1ZTogbnVsbCB9LAogICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBuCiAgICAgICAgICAgICAgPyBuKGUsIG8pCiAgICAgICAgICAgICAgOiByLmNsb25lRWxlbWVudChyLkNoaWxkcmVuLm9ubHkobiksIG8pCiAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIHQKICAgICAgKTsKICAgIH0pKHIuQ29tcG9uZW50KTsKCiAgZnVuY3Rpb24gVygpIHt9CgogICh6LmNvbnRleHRUeXBlID0gSSksCiAgICAoei5wcm9wVHlwZXMgPSB7fSksCiAgICAoei5kZWZhdWx0UHJvcHMgPSB7CiAgICAgIGluOiAhMSwKICAgICAgbW91bnRPbkVudGVyOiAhMSwKICAgICAgdW5tb3VudE9uRXhpdDogITEsCiAgICAgIGFwcGVhcjogITEsCiAgICAgIGVudGVyOiAhMCwKICAgICAgZXhpdDogITAsCiAgICAgIG9uRW50ZXI6IFcsCiAgICAgIG9uRW50ZXJpbmc6IFcsCiAgICAgIG9uRW50ZXJlZDogVywKICAgICAgb25FeGl0OiBXLAogICAgICBvbkV4aXRpbmc6IFcsCiAgICAgIG9uRXhpdGVkOiBXLAogICAgfSksCiAgICAoei5VTk1PVU5URUQgPSAidW5tb3VudGVkIiksCiAgICAoei5FWElURUQgPSAiZXhpdGVkIiksCiAgICAoei5FTlRFUklORyA9IFUpLAogICAgKHouRU5URVJFRCA9IHEpLAogICAgKHouRVhJVElORyA9ICJleGl0aW5nIik7CiAgdmFyIEcgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICByZXR1cm4gKAogICAgICAgIGUgJiYKICAgICAgICB0ICYmCiAgICAgICAgdC5zcGxpdCgiICIpLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIChyID0gdCksCiAgICAgICAgICAgIHZvaWQgKChuID0gZSkuY2xhc3NMaXN0CiAgICAgICAgICAgICAgPyBuLmNsYXNzTGlzdC5hZGQocikKICAgICAgICAgICAgICA6IChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QKICAgICAgICAgICAgICAgICAgICA/ICEhdCAmJiBlLmNsYXNzTGlzdC5jb250YWlucyh0KQogICAgICAgICAgICAgICAgICAgIDogLTEgIT09CiAgICAgICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgICAiICIgKwogICAgICAgICAgICAgICAgICAgICAgICAgIChlLmNsYXNzTmFtZS5iYXNlVmFsIHx8IGUuY2xhc3NOYW1lKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgIiAiCiAgICAgICAgICAgICAgICAgICAgICAgICkuaW5kZXhPZigiICIgKyB0ICsgIiAiKTsKICAgICAgICAgICAgICAgIH0pKG4sIHIpIHx8CiAgICAgICAgICAgICAgICAoInN0cmluZyIgPT0gdHlwZW9mIG4uY2xhc3NOYW1lCiAgICAgICAgICAgICAgICAgID8gKG4uY2xhc3NOYW1lID0gbi5jbGFzc05hbWUgKyAiICIgKyByKQogICAgICAgICAgICAgICAgICA6IG4uc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAgICAgImNsYXNzIiwKICAgICAgICAgICAgICAgICAgICAgICgobi5jbGFzc05hbWUgJiYgbi5jbGFzc05hbWUuYmFzZVZhbCkgfHwgIiIpICsgIiAiICsgcgogICAgICAgICAgICAgICAgICAgICkpKQogICAgICAgICAgKTsKICAgICAgICAgIHZhciBuLCByOwogICAgICAgIH0pCiAgICAgICk7CiAgICB9LAogICAgWCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgZSAmJgogICAgICAgIHQgJiYKICAgICAgICB0LnNwbGl0KCIgIikuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHIgPSB0KSwKICAgICAgICAgICAgdm9pZCAoKG4gPSBlKS5jbGFzc0xpc3QKICAgICAgICAgICAgICA/IG4uY2xhc3NMaXN0LnJlbW92ZShyKQogICAgICAgICAgICAgIDogInN0cmluZyIgPT0gdHlwZW9mIG4uY2xhc3NOYW1lCiAgICAgICAgICAgICAgPyAobi5jbGFzc05hbWUgPSBGKG4uY2xhc3NOYW1lLCByKSkKICAgICAgICAgICAgICA6IG4uc2V0QXR0cmlidXRlKAogICAgICAgICAgICAgICAgICAiY2xhc3MiLAogICAgICAgICAgICAgICAgICBGKChuLmNsYXNzTmFtZSAmJiBuLmNsYXNzTmFtZS5iYXNlVmFsKSB8fCAiIiwgcikKICAgICAgICAgICAgICAgICkpCiAgICAgICAgICApOwogICAgICAgICAgdmFyIG4sIHI7CiAgICAgICAgfSkKICAgICAgKTsKICAgIH0sCiAgICBCID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgZm9yICh2YXIgdCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBuZXcgQXJyYXkobiksIG8gPSAwOyBvIDwgbjsgbysrKQogICAgICAgICAgcltvXSA9IGFyZ3VtZW50c1tvXTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKCh0ID0gZS5jYWxsLmFwcGx5KGUsIFt0aGlzXS5jb25jYXQocikpIHx8IHRoaXMpLmFwcGxpZWRDbGFzc2VzID0gewogICAgICAgICAgICBhcHBlYXI6IHt9LAogICAgICAgICAgICBlbnRlcjoge30sCiAgICAgICAgICAgIGV4aXQ6IHt9LAogICAgICAgICAgfSksCiAgICAgICAgICAodC5vbkVudGVyID0gZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICAgICAgdmFyIHIgPSB0LnJlc29sdmVBcmd1bWVudHMoZSwgbiksCiAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgaSA9IHJbMV07CiAgICAgICAgICAgIHQucmVtb3ZlQ2xhc3NlcyhvLCAiZXhpdCIpLAogICAgICAgICAgICAgIHQuYWRkQ2xhc3MobywgaSA/ICJhcHBlYXIiIDogImVudGVyIiwgImJhc2UiKSwKICAgICAgICAgICAgICB0LnByb3BzLm9uRW50ZXIgJiYgdC5wcm9wcy5vbkVudGVyKGUsIG4pOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5vbkVudGVyaW5nID0gZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICAgICAgdmFyIHIgPSB0LnJlc29sdmVBcmd1bWVudHMoZSwgbiksCiAgICAgICAgICAgICAgbyA9IHJbMF0sCiAgICAgICAgICAgICAgaSA9IHJbMV0gPyAiYXBwZWFyIiA6ICJlbnRlciI7CiAgICAgICAgICAgIHQuYWRkQ2xhc3MobywgaSwgImFjdGl2ZSIpLAogICAgICAgICAgICAgIHQucHJvcHMub25FbnRlcmluZyAmJiB0LnByb3BzLm9uRW50ZXJpbmcoZSwgbik7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0Lm9uRW50ZXJlZCA9IGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgICAgICAgIHZhciByID0gdC5yZXNvbHZlQXJndW1lbnRzKGUsIG4pLAogICAgICAgICAgICAgIG8gPSByWzBdLAogICAgICAgICAgICAgIGkgPSByWzFdID8gImFwcGVhciIgOiAiZW50ZXIiOwogICAgICAgICAgICB0LnJlbW92ZUNsYXNzZXMobywgaSksCiAgICAgICAgICAgICAgdC5hZGRDbGFzcyhvLCBpLCAiZG9uZSIpLAogICAgICAgICAgICAgIHQucHJvcHMub25FbnRlcmVkICYmIHQucHJvcHMub25FbnRlcmVkKGUsIG4pOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5vbkV4aXQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgbiA9IHQucmVzb2x2ZUFyZ3VtZW50cyhlKVswXTsKICAgICAgICAgICAgdC5yZW1vdmVDbGFzc2VzKG4sICJhcHBlYXIiKSwKICAgICAgICAgICAgICB0LnJlbW92ZUNsYXNzZXMobiwgImVudGVyIiksCiAgICAgICAgICAgICAgdC5hZGRDbGFzcyhuLCAiZXhpdCIsICJiYXNlIiksCiAgICAgICAgICAgICAgdC5wcm9wcy5vbkV4aXQgJiYgdC5wcm9wcy5vbkV4aXQoZSk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0Lm9uRXhpdGluZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBuID0gdC5yZXNvbHZlQXJndW1lbnRzKGUpWzBdOwogICAgICAgICAgICB0LmFkZENsYXNzKG4sICJleGl0IiwgImFjdGl2ZSIpLAogICAgICAgICAgICAgIHQucHJvcHMub25FeGl0aW5nICYmIHQucHJvcHMub25FeGl0aW5nKGUpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5vbkV4aXRlZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBuID0gdC5yZXNvbHZlQXJndW1lbnRzKGUpWzBdOwogICAgICAgICAgICB0LnJlbW92ZUNsYXNzZXMobiwgImV4aXQiKSwKICAgICAgICAgICAgICB0LmFkZENsYXNzKG4sICJleGl0IiwgImRvbmUiKSwKICAgICAgICAgICAgICB0LnByb3BzLm9uRXhpdGVkICYmIHQucHJvcHMub25FeGl0ZWQoZSk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LnJlc29sdmVBcmd1bWVudHMgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICByZXR1cm4gdC5wcm9wcy5ub2RlUmVmID8gW3QucHJvcHMubm9kZVJlZi5jdXJyZW50LCBlXSA6IFtlLCBuXTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZ2V0Q2xhc3NOYW1lcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBuID0gdC5wcm9wcy5jbGFzc05hbWVzLAogICAgICAgICAgICAgIHIgPSAic3RyaW5nIiA9PSB0eXBlb2YgbiwKICAgICAgICAgICAgICBvID0gciA/ICIiICsgKHIgJiYgbiA/IG4gKyAiLSIgOiAiIikgKyBlIDogbltlXTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBiYXNlQ2xhc3NOYW1lOiBvLAogICAgICAgICAgICAgIGFjdGl2ZUNsYXNzTmFtZTogciA/IG8gKyAiLWFjdGl2ZSIgOiBuW2UgKyAiQWN0aXZlIl0sCiAgICAgICAgICAgICAgZG9uZUNsYXNzTmFtZTogciA/IG8gKyAiLWRvbmUiIDogbltlICsgIkRvbmUiXSwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pLAogICAgICAgICAgdAogICAgICAgICk7CiAgICAgIH0KCiAgICAgIGEodCwgZSk7CiAgICAgIHZhciBuID0gdC5wcm90b3R5cGU7CiAgICAgIHJldHVybiAoCiAgICAgICAgKG4uYWRkQ2xhc3MgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgdmFyIHIgPSB0aGlzLmdldENsYXNzTmFtZXModClbbiArICJDbGFzc05hbWUiXSwKICAgICAgICAgICAgbyA9IHRoaXMuZ2V0Q2xhc3NOYW1lcygiZW50ZXIiKS5kb25lQ2xhc3NOYW1lOwogICAgICAgICAgImFwcGVhciIgPT09IHQgJiYgImRvbmUiID09PSBuICYmIG8gJiYgKHIgKz0gIiAiICsgbyksCiAgICAgICAgICAgICJhY3RpdmUiID09PSBuICYmIGUgJiYgZS5zY3JvbGxUb3AsCiAgICAgICAgICAgIHIgJiYgKCh0aGlzLmFwcGxpZWRDbGFzc2VzW3RdW25dID0gciksIEcoZSwgcikpOwogICAgICAgIH0pLAogICAgICAgIChuLnJlbW92ZUNsYXNzZXMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdmFyIG4gPSB0aGlzLmFwcGxpZWRDbGFzc2VzW3RdLAogICAgICAgICAgICByID0gbi5iYXNlLAogICAgICAgICAgICBvID0gbi5hY3RpdmUsCiAgICAgICAgICAgIGkgPSBuLmRvbmU7CiAgICAgICAgICAodGhpcy5hcHBsaWVkQ2xhc3Nlc1t0XSA9IHt9KSwKICAgICAgICAgICAgciAmJiBYKGUsIHIpLAogICAgICAgICAgICBvICYmIFgoZSwgbyksCiAgICAgICAgICAgIGkgJiYgWChlLCBpKTsKICAgICAgICB9KSwKICAgICAgICAobi5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZSA9IHRoaXMucHJvcHMsCiAgICAgICAgICAgIHQgPSAoZS5jbGFzc05hbWVzLCBpKGUsIFsiY2xhc3NOYW1lcyJdKSk7CiAgICAgICAgICByZXR1cm4gci5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICB6LAogICAgICAgICAgICBvKHt9LCB0LCB7CiAgICAgICAgICAgICAgb25FbnRlcjogdGhpcy5vbkVudGVyLAogICAgICAgICAgICAgIG9uRW50ZXJlZDogdGhpcy5vbkVudGVyZWQsCiAgICAgICAgICAgICAgb25FbnRlcmluZzogdGhpcy5vbkVudGVyaW5nLAogICAgICAgICAgICAgIG9uRXhpdDogdGhpcy5vbkV4aXQsCiAgICAgICAgICAgICAgb25FeGl0aW5nOiB0aGlzLm9uRXhpdGluZywKICAgICAgICAgICAgICBvbkV4aXRlZDogdGhpcy5vbkV4aXRlZCwKICAgICAgICAgICAgfSkKICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgdAogICAgICApOwogICAgfSkoci5Db21wb25lbnQpOwoKICBmdW5jdGlvbiBIKGUsIG4pIHsKICAgIHZhciByID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgIHJldHVybiAoCiAgICAgIGUgJiYKICAgICAgICB0LkNoaWxkcmVuLm1hcChlLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcltlLmtleV0gPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG4gJiYgdC5pc1ZhbGlkRWxlbWVudChlKSA/IG4oZSkgOiBlOwogICAgICAgICAgfSkoZSk7CiAgICAgICAgfSksCiAgICAgIHIKICAgICk7CiAgfQoKICBmdW5jdGlvbiBZKGUsIHQsIG4pIHsKICAgIHJldHVybiBudWxsICE9IG5bdF0gPyBuW3RdIDogZS5wcm9wc1t0XTsKICB9CgogIGZ1bmN0aW9uIEooZSwgbiwgcikgewogICAgdmFyIG8gPSBIKGUuY2hpbGRyZW4pLAogICAgICBpID0gKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgZnVuY3Rpb24gbihuKSB7CiAgICAgICAgICByZXR1cm4gbiBpbiB0ID8gdFtuXSA6IGVbbl07CiAgICAgICAgfQoKICAgICAgICAoZSA9IGUgfHwge30pLCAodCA9IHQgfHwge30pOwogICAgICAgIHZhciByLAogICAgICAgICAgbyA9IE9iamVjdC5jcmVhdGUobnVsbCksCiAgICAgICAgICBpID0gW107CiAgICAgICAgZm9yICh2YXIgYSBpbiBlKQogICAgICAgICAgYSBpbiB0ID8gaS5sZW5ndGggJiYgKChvW2FdID0gaSksIChpID0gW10pKSA6IGkucHVzaChhKTsKICAgICAgICB2YXIgcyA9IHt9OwogICAgICAgIGZvciAodmFyIGMgaW4gdCkgewogICAgICAgICAgaWYgKG9bY10pCiAgICAgICAgICAgIGZvciAociA9IDA7IHIgPCBvW2NdLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgdmFyIGwgPSBvW2NdW3JdOwogICAgICAgICAgICAgIHNbb1tjXVtyXV0gPSBuKGwpOwogICAgICAgICAgICB9CiAgICAgICAgICBzW2NdID0gbihjKTsKICAgICAgICB9CiAgICAgICAgZm9yIChyID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHNbaVtyXV0gPSBuKGlbcl0pOwogICAgICAgIHJldHVybiBzOwogICAgICB9KShuLCBvKTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24gKGEpIHsKICAgICAgICB2YXIgcyA9IGlbYV07CiAgICAgICAgaWYgKHQuaXNWYWxpZEVsZW1lbnQocykpIHsKICAgICAgICAgIHZhciBjID0gYSBpbiBuLAogICAgICAgICAgICBsID0gYSBpbiBvLAogICAgICAgICAgICB1ID0gblthXSwKICAgICAgICAgICAgcCA9IHQuaXNWYWxpZEVsZW1lbnQodSkgJiYgIXUucHJvcHMuaW47CiAgICAgICAgICAhbCB8fCAoYyAmJiAhcCkKICAgICAgICAgICAgPyBsIHx8ICFjIHx8IHAKICAgICAgICAgICAgICA/IGwgJiYKICAgICAgICAgICAgICAgIGMgJiYKICAgICAgICAgICAgICAgIHQuaXNWYWxpZEVsZW1lbnQodSkgJiYKICAgICAgICAgICAgICAgIChpW2FdID0gdC5jbG9uZUVsZW1lbnQocywgewogICAgICAgICAgICAgICAgICBvbkV4aXRlZDogci5iaW5kKG51bGwsIHMpLAogICAgICAgICAgICAgICAgICBpbjogdS5wcm9wcy5pbiwKICAgICAgICAgICAgICAgICAgZXhpdDogWShzLCAiZXhpdCIsIGUpLAogICAgICAgICAgICAgICAgICBlbnRlcjogWShzLCAiZW50ZXIiLCBlKSwKICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgIDogKGlbYV0gPSB0LmNsb25lRWxlbWVudChzLCB7IGluOiAhMSB9KSkKICAgICAgICAgICAgOiAoaVthXSA9IHQuY2xvbmVFbGVtZW50KHMsIHsKICAgICAgICAgICAgICAgIG9uRXhpdGVkOiByLmJpbmQobnVsbCwgcyksCiAgICAgICAgICAgICAgICBpbjogITAsCiAgICAgICAgICAgICAgICBleGl0OiBZKHMsICJleGl0IiwgZSksCiAgICAgICAgICAgICAgICBlbnRlcjogWShzLCAiZW50ZXIiLCBlKSwKICAgICAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICB9KSwKICAgICAgaQogICAgKTsKICB9CgogIChCLmRlZmF1bHRQcm9wcyA9IHsgY2xhc3NOYW1lczogIiIgfSksIChCLnByb3BUeXBlcyA9IHt9KTsKICB2YXIgSyA9CiAgICAgIE9iamVjdC52YWx1ZXMgfHwKICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZSkubWFwKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICByZXR1cm4gZVt0XTsKICAgICAgICB9KTsKICAgICAgfSwKICAgIFEgPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgZnVuY3Rpb24gbih0LCBuKSB7CiAgICAgICAgdmFyIHIsCiAgICAgICAgICBvID0gKHIgPSBlLmNhbGwodGhpcywgdCwgbikgfHwgdGhpcykuaGFuZGxlRXhpdGVkLmJpbmQoCiAgICAgICAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoCiAgICAgICAgICAgICAgICAgICJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICB9KShyKQogICAgICAgICAgKTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKHIuc3RhdGUgPSB7CiAgICAgICAgICAgIGNvbnRleHRWYWx1ZTogeyBpc01vdW50aW5nOiAhMCB9LAogICAgICAgICAgICBoYW5kbGVFeGl0ZWQ6IG8sCiAgICAgICAgICAgIGZpcnN0UmVuZGVyOiAhMCwKICAgICAgICAgIH0pLAogICAgICAgICAgcgogICAgICAgICk7CiAgICAgIH0KCiAgICAgIGEobiwgZSk7CiAgICAgIHZhciBzID0gbi5wcm90b3R5cGU7CiAgICAgIHJldHVybiAoCiAgICAgICAgKHMuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAodGhpcy5tb3VudGVkID0gITApLAogICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgY29udGV4dFZhbHVlOiB7IGlzTW91bnRpbmc6ICExIH0gfSk7CiAgICAgICAgfSksCiAgICAgICAgKHMuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLm1vdW50ZWQgPSAhMTsKICAgICAgICB9KSwKICAgICAgICAobi5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgdmFyIHIsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIGkgPSBuLmNoaWxkcmVuLAogICAgICAgICAgICBhID0gbi5oYW5kbGVFeGl0ZWQ7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjaGlsZHJlbjogbi5maXJzdFJlbmRlcgogICAgICAgICAgICAgID8gKChyID0gZSksCiAgICAgICAgICAgICAgICAobyA9IGEpLAogICAgICAgICAgICAgICAgSChyLmNoaWxkcmVuLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdC5jbG9uZUVsZW1lbnQoZSwgewogICAgICAgICAgICAgICAgICAgIG9uRXhpdGVkOiBvLmJpbmQobnVsbCwgZSksCiAgICAgICAgICAgICAgICAgICAgaW46ICEwLAogICAgICAgICAgICAgICAgICAgIGFwcGVhcjogWShlLCAiYXBwZWFyIiwgciksCiAgICAgICAgICAgICAgICAgICAgZW50ZXI6IFkoZSwgImVudGVyIiwgciksCiAgICAgICAgICAgICAgICAgICAgZXhpdDogWShlLCAiZXhpdCIsIHIpLAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgIDogSihlLCBpLCBhKSwKICAgICAgICAgICAgZmlyc3RSZW5kZXI6ICExLAogICAgICAgICAgfTsKICAgICAgICB9KSwKICAgICAgICAocy5oYW5kbGVFeGl0ZWQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdmFyIG4gPSBIKHRoaXMucHJvcHMuY2hpbGRyZW4pOwogICAgICAgICAgZS5rZXkgaW4gbiB8fAogICAgICAgICAgICAoZS5wcm9wcy5vbkV4aXRlZCAmJiBlLnByb3BzLm9uRXhpdGVkKHQpLAogICAgICAgICAgICB0aGlzLm1vdW50ZWQgJiYKICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IG8oe30sIHQuY2hpbGRyZW4pOwogICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZSBuW2Uua2V5XSwgeyBjaGlsZHJlbjogbiB9OwogICAgICAgICAgICAgIH0pKTsKICAgICAgICB9KSwKICAgICAgICAocy5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZSA9IHRoaXMucHJvcHMsCiAgICAgICAgICAgIHQgPSBlLmNvbXBvbmVudCwKICAgICAgICAgICAgbiA9IGUuY2hpbGRGYWN0b3J5LAogICAgICAgICAgICBvID0gaShlLCBbImNvbXBvbmVudCIsICJjaGlsZEZhY3RvcnkiXSksCiAgICAgICAgICAgIGEgPSB0aGlzLnN0YXRlLmNvbnRleHRWYWx1ZSwKICAgICAgICAgICAgcyA9IEsodGhpcy5zdGF0ZS5jaGlsZHJlbikubWFwKG4pOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgZGVsZXRlIG8uYXBwZWFyLAogICAgICAgICAgICBkZWxldGUgby5lbnRlciwKICAgICAgICAgICAgZGVsZXRlIG8uZXhpdCwKICAgICAgICAgICAgbnVsbCA9PT0gdAogICAgICAgICAgICAgID8gci5jcmVhdGVFbGVtZW50KEkuUHJvdmlkZXIsIHsgdmFsdWU6IGEgfSwgcykKICAgICAgICAgICAgICA6IHIuY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICAgSS5Qcm92aWRlciwKICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogYSB9LAogICAgICAgICAgICAgICAgICByLmNyZWF0ZUVsZW1lbnQodCwgbywgcykKICAgICAgICAgICAgICAgICkKICAgICAgICAgICk7CiAgICAgICAgfSksCiAgICAgICAgbgogICAgICApOwogICAgfSkoci5Db21wb25lbnQpOwogIChRLnByb3BUeXBlcyA9IHt9KSwKICAgIChRLmRlZmF1bHRQcm9wcyA9IHsKICAgICAgY29tcG9uZW50OiAiZGl2IiwKICAgICAgY2hpbGRGYWN0b3J5OiBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlOwogICAgICB9LAogICAgfSk7CiAgdmFyIFosCiAgICBlZSwKICAgIHRlID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgZm9yICh2YXIgdCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBuZXcgQXJyYXkobiksIG8gPSAwOyBvIDwgbjsgbysrKQogICAgICAgICAgcltvXSA9IGFyZ3VtZW50c1tvXTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKCh0ID0gZS5jYWxsLmFwcGx5KGUsIFt0aGlzXS5jb25jYXQocikpIHx8IHRoaXMpLmhhbmRsZUVudGVyID0KICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGgsIG4gPSBuZXcgQXJyYXkoZSksIHIgPSAwOwogICAgICAgICAgICAgICAgciA8IGU7CiAgICAgICAgICAgICAgICByKysKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBuW3JdID0gYXJndW1lbnRzW3JdOwogICAgICAgICAgICAgIHJldHVybiB0LmhhbmRsZUxpZmVjeWNsZSgib25FbnRlciIsIDAsIG4pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICh0LmhhbmRsZUVudGVyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3IgKHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCwgbiA9IG5ldyBBcnJheShlKSwgciA9IDA7IHIgPCBlOyByKyspCiAgICAgICAgICAgICAgbltyXSA9IGFyZ3VtZW50c1tyXTsKICAgICAgICAgICAgcmV0dXJuIHQuaGFuZGxlTGlmZWN5Y2xlKCJvbkVudGVyaW5nIiwgMCwgbik7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmhhbmRsZUVudGVyZWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZvciAodmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoLCBuID0gbmV3IEFycmF5KGUpLCByID0gMDsgciA8IGU7IHIrKykKICAgICAgICAgICAgICBuW3JdID0gYXJndW1lbnRzW3JdOwogICAgICAgICAgICByZXR1cm4gdC5oYW5kbGVMaWZlY3ljbGUoIm9uRW50ZXJlZCIsIDAsIG4pOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5oYW5kbGVFeGl0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBmb3IgKHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCwgbiA9IG5ldyBBcnJheShlKSwgciA9IDA7IHIgPCBlOyByKyspCiAgICAgICAgICAgICAgbltyXSA9IGFyZ3VtZW50c1tyXTsKICAgICAgICAgICAgcmV0dXJuIHQuaGFuZGxlTGlmZWN5Y2xlKCJvbkV4aXQiLCAxLCBuKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuaGFuZGxlRXhpdGluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm9yICh2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGgsIG4gPSBuZXcgQXJyYXkoZSksIHIgPSAwOyByIDwgZTsgcisrKQogICAgICAgICAgICAgIG5bcl0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgICAgIHJldHVybiB0LmhhbmRsZUxpZmVjeWNsZSgib25FeGl0aW5nIiwgMSwgbik7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmhhbmRsZUV4aXRlZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZm9yICh2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGgsIG4gPSBuZXcgQXJyYXkoZSksIHIgPSAwOyByIDwgZTsgcisrKQogICAgICAgICAgICAgIG5bcl0gPSBhcmd1bWVudHNbcl07CiAgICAgICAgICAgIHJldHVybiB0LmhhbmRsZUxpZmVjeWNsZSgib25FeGl0ZWQiLCAxLCBuKTsKICAgICAgICAgIH0pLAogICAgICAgICAgdAogICAgICAgICk7CiAgICAgIH0KCiAgICAgIGEodCwgZSk7CiAgICAgIHZhciBvID0gdC5wcm90b3R5cGU7CiAgICAgIHJldHVybiAoCiAgICAgICAgKG8uaGFuZGxlTGlmZWN5Y2xlID0gZnVuY3Rpb24gKGUsIHQsIG8pIHsKICAgICAgICAgIHZhciBpLAogICAgICAgICAgICBhID0gdGhpcy5wcm9wcy5jaGlsZHJlbiwKICAgICAgICAgICAgcyA9IHIuQ2hpbGRyZW4udG9BcnJheShhKVt0XTsKICAgICAgICAgIGlmICgocy5wcm9wc1tlXSAmJiAoaSA9IHMucHJvcHMpW2VdLmFwcGx5KGksIG8pLCB0aGlzLnByb3BzW2VdKSkgewogICAgICAgICAgICB2YXIgYyA9IHMucHJvcHMubm9kZVJlZiA/IHZvaWQgMCA6IG4uZmluZERPTU5vZGUodGhpcyk7CiAgICAgICAgICAgIHRoaXMucHJvcHNbZV0oYyk7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgKG8ucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGUgPSB0aGlzLnByb3BzLAogICAgICAgICAgICB0ID0gZS5jaGlsZHJlbiwKICAgICAgICAgICAgbiA9IGUuaW4sCiAgICAgICAgICAgIG8gPSBpKGUsIFsiY2hpbGRyZW4iLCAiaW4iXSksCiAgICAgICAgICAgIGEgPSByLkNoaWxkcmVuLnRvQXJyYXkodCksCiAgICAgICAgICAgIHMgPSBhWzBdLAogICAgICAgICAgICBjID0gYVsxXTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIGRlbGV0ZSBvLm9uRW50ZXIsCiAgICAgICAgICAgIGRlbGV0ZSBvLm9uRW50ZXJpbmcsCiAgICAgICAgICAgIGRlbGV0ZSBvLm9uRW50ZXJlZCwKICAgICAgICAgICAgZGVsZXRlIG8ub25FeGl0LAogICAgICAgICAgICBkZWxldGUgby5vbkV4aXRpbmcsCiAgICAgICAgICAgIGRlbGV0ZSBvLm9uRXhpdGVkLAogICAgICAgICAgICByLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgUSwKICAgICAgICAgICAgICBvLAogICAgICAgICAgICAgIG4KICAgICAgICAgICAgICAgID8gci5jbG9uZUVsZW1lbnQocywgewogICAgICAgICAgICAgICAgICAgIGtleTogImZpcnN0IiwKICAgICAgICAgICAgICAgICAgICBvbkVudGVyOiB0aGlzLmhhbmRsZUVudGVyLAogICAgICAgICAgICAgICAgICAgIG9uRW50ZXJpbmc6IHRoaXMuaGFuZGxlRW50ZXJpbmcsCiAgICAgICAgICAgICAgICAgICAgb25FbnRlcmVkOiB0aGlzLmhhbmRsZUVudGVyZWQsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6IHIuY2xvbmVFbGVtZW50KGMsIHsKICAgICAgICAgICAgICAgICAgICBrZXk6ICJzZWNvbmQiLAogICAgICAgICAgICAgICAgICAgIG9uRW50ZXI6IHRoaXMuaGFuZGxlRXhpdCwKICAgICAgICAgICAgICAgICAgICBvbkVudGVyaW5nOiB0aGlzLmhhbmRsZUV4aXRpbmcsCiAgICAgICAgICAgICAgICAgICAgb25FbnRlcmVkOiB0aGlzLmhhbmRsZUV4aXRlZCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKQogICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICB0CiAgICAgICk7CiAgICB9KShyLkNvbXBvbmVudCk7CiAgdGUucHJvcFR5cGVzID0ge307CiAgdmFyIG5lID0gIm91dC1pbiIsCiAgICByZSA9ICJpbi1vdXQiLAogICAgb2UgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciByOwogICAgICAgIGUucHJvcHNbdF0gJiYgKHIgPSBlLnByb3BzKVt0XS5hcHBseShyLCBhcmd1bWVudHMpLCBuKCk7CiAgICAgIH07CiAgICB9LAogICAgaWUgPQogICAgICAoKChaID0ge30pW25lXSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSBlLmN1cnJlbnQsCiAgICAgICAgICBuID0gZS5jaGFuZ2VTdGF0ZTsKICAgICAgICByZXR1cm4gci5jbG9uZUVsZW1lbnQodCwgewogICAgICAgICAgaW46ICExLAogICAgICAgICAgb25FeGl0ZWQ6IG9lKHQsICJvbkV4aXRlZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbihVLCBudWxsKTsKICAgICAgICAgIH0pLAogICAgICAgIH0pOwogICAgICB9KSwKICAgICAgKFpbcmVdID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IGUuY3VycmVudCwKICAgICAgICAgIG4gPSBlLmNoYW5nZVN0YXRlLAogICAgICAgICAgbyA9IGUuY2hpbGRyZW47CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgIHQsCiAgICAgICAgICByLmNsb25lRWxlbWVudChvLCB7CiAgICAgICAgICAgIGluOiAhMCwKICAgICAgICAgICAgb25FbnRlcmVkOiBvZShvLCAib25FbnRlcmVkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIG4oVSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgfSksCiAgICAgICAgXTsKICAgICAgfSksCiAgICAgIFopLAogICAgYWUgPQogICAgICAoKChlZSA9IHt9KVtuZV0gPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gZS5jaGlsZHJlbiwKICAgICAgICAgIG4gPSBlLmNoYW5nZVN0YXRlOwogICAgICAgIHJldHVybiByLmNsb25lRWxlbWVudCh0LCB7CiAgICAgICAgICBpbjogITAsCiAgICAgICAgICBvbkVudGVyZWQ6IG9lKHQsICJvbkVudGVyZWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG4ocSwgci5jbG9uZUVsZW1lbnQodCwgeyBpbjogITAgfSkpOwogICAgICAgICAgfSksCiAgICAgICAgfSk7CiAgICAgIH0pLAogICAgICAoZWVbcmVdID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IGUuY3VycmVudCwKICAgICAgICAgIG4gPSBlLmNoaWxkcmVuLAogICAgICAgICAgbyA9IGUuY2hhbmdlU3RhdGU7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgIHIuY2xvbmVFbGVtZW50KHQsIHsKICAgICAgICAgICAgaW46ICExLAogICAgICAgICAgICBvbkV4aXRlZDogb2UodCwgIm9uRXhpdGVkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIG8ocSwgci5jbG9uZUVsZW1lbnQobiwgeyBpbjogITAgfSkpOwogICAgICAgICAgICB9KSwKICAgICAgICAgIH0pLAogICAgICAgICAgci5jbG9uZUVsZW1lbnQobiwgeyBpbjogITAgfSksCiAgICAgICAgXTsKICAgICAgfSksCiAgICAgIGVlKSwKICAgIHNlID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgZm9yICh2YXIgdCwgbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBuZXcgQXJyYXkobiksIG8gPSAwOyBvIDwgbjsgbysrKQogICAgICAgICAgcltvXSA9IGFyZ3VtZW50c1tvXTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKCh0ID0gZS5jYWxsLmFwcGx5KGUsIFt0aGlzXS5jb25jYXQocikpIHx8IHRoaXMpLnN0YXRlID0gewogICAgICAgICAgICBzdGF0dXM6IHEsCiAgICAgICAgICAgIGN1cnJlbnQ6IG51bGwsCiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmFwcGVhcmVkID0gITEpLAogICAgICAgICAgKHQuY2hhbmdlU3RhdGUgPSBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSB0LnN0YXRlLmN1cnJlbnQpLAogICAgICAgICAgICAgIHQuc2V0U3RhdGUoeyBzdGF0dXM6IGUsIGN1cnJlbnQ6IG4gfSk7CiAgICAgICAgICB9KSwKICAgICAgICAgIHQKICAgICAgICApOwogICAgICB9CgogICAgICBhKHQsIGUpOwogICAgICB2YXIgbiA9IHQucHJvdG90eXBlOwogICAgICByZXR1cm4gKAogICAgICAgIChuLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhpcy5hcHBlYXJlZCA9ICEwOwogICAgICAgIH0pLAogICAgICAgICh0LmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlLmNoaWxkcmVuCiAgICAgICAgICAgID8geyBjdXJyZW50OiBudWxsIH0KICAgICAgICAgICAgOiB0LnN0YXR1cyA9PT0gVSAmJiBlLm1vZGUgPT09IHJlCiAgICAgICAgICAgID8geyBzdGF0dXM6IFUgfQogICAgICAgICAgICA6ICF0LmN1cnJlbnQgfHwKICAgICAgICAgICAgICAoKG4gPSB0LmN1cnJlbnQpLAogICAgICAgICAgICAgIChvID0gZS5jaGlsZHJlbiksCiAgICAgICAgICAgICAgbiA9PT0gbyB8fAogICAgICAgICAgICAgICAgKHIuaXNWYWxpZEVsZW1lbnQobikgJiYKICAgICAgICAgICAgICAgICAgci5pc1ZhbGlkRWxlbWVudChvKSAmJgogICAgICAgICAgICAgICAgICBudWxsICE9IG4ua2V5ICYmCiAgICAgICAgICAgICAgICAgIG4ua2V5ID09PSBvLmtleSkpCiAgICAgICAgICAgID8geyBjdXJyZW50OiByLmNsb25lRWxlbWVudChlLmNoaWxkcmVuLCB7IGluOiAhMCB9KSB9CiAgICAgICAgICAgIDogeyBzdGF0dXM6ICJleGl0aW5nIiB9OwogICAgICAgICAgdmFyIG4sIG87CiAgICAgICAgfSksCiAgICAgICAgKG4ucmVuZGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgIHQgPSB0aGlzLnByb3BzLAogICAgICAgICAgICBuID0gdC5jaGlsZHJlbiwKICAgICAgICAgICAgbyA9IHQubW9kZSwKICAgICAgICAgICAgaSA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgIGEgPSBpLnN0YXR1cywKICAgICAgICAgICAgcyA9IGkuY3VycmVudCwKICAgICAgICAgICAgYyA9IHsKICAgICAgICAgICAgICBjaGlsZHJlbjogbiwKICAgICAgICAgICAgICBjdXJyZW50OiBzLAogICAgICAgICAgICAgIGNoYW5nZVN0YXRlOiB0aGlzLmNoYW5nZVN0YXRlLAogICAgICAgICAgICAgIHN0YXR1czogYSwKICAgICAgICAgICAgfTsKICAgICAgICAgIHN3aXRjaCAoYSkgewogICAgICAgICAgICBjYXNlIFU6CiAgICAgICAgICAgICAgZSA9IGFlW29dKGMpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJleGl0aW5nIjoKICAgICAgICAgICAgICBlID0gaWVbb10oYyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgcToKICAgICAgICAgICAgICBlID0gczsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgIEkuUHJvdmlkZXIsCiAgICAgICAgICAgIHsgdmFsdWU6IHsgaXNNb3VudGluZzogIXRoaXMuYXBwZWFyZWQgfSB9LAogICAgICAgICAgICBlCiAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgIHQKICAgICAgKTsKICAgIH0pKHIuQ29tcG9uZW50KTsKICAoc2UucHJvcFR5cGVzID0ge30pLAogICAgKHNlLmRlZmF1bHRQcm9wcyA9IHsgbW9kZTogbmUgfSksCiAgICAoZS5DU1NUcmFuc2l0aW9uID0gQiksCiAgICAoZS5SZXBsYWNlVHJhbnNpdGlvbiA9IHRlKSwKICAgIChlLlN3aXRjaFRyYW5zaXRpb24gPSBzZSksCiAgICAoZS5UcmFuc2l0aW9uID0geiksCiAgICAoZS5UcmFuc2l0aW9uR3JvdXAgPSBRKSwKICAgIChlLmNvbmZpZyA9IFYpLAogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogITAgfSk7Cn0pOwo="
    ></script>
    <script
      defer=""
      type="text/javascript"
      src="data:text/javascript;base64,IShmdW5jdGlvbiAoZSwgdCkgewogICJvYmplY3QiID09IHR5cGVvZiBleHBvcnRzICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBtb2R1bGUKICAgID8gdCgKICAgICAgICByZXF1aXJlKCJyZWFjdCIpLAogICAgICAgIHJlcXVpcmUoInJlYWN0LWRvbSIpLAogICAgICAgIHJlcXVpcmUoInJlYWN0LXJlZHV4IiksCiAgICAgICAgcmVxdWlyZSgic3JjL2ZvdW5kYXRpb24iKSwKICAgICAgICByZXF1aXJlKCJyZWFjdC10cmFuc2l0aW9uLWdyb3VwIiksCiAgICAgICAgcmVxdWlyZSgicmVzZWxlY3QiKSwKICAgICAgICByZXF1aXJlKCJjbGFzc25hbWVzIiksCiAgICAgICAgcmVxdWlyZSgicmVkdXgiKSwKICAgICAgICByZXF1aXJlKCJyZWR1eC10aHVuayIpCiAgICAgICkKICAgIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQKICAgID8gZGVmaW5lKAogICAgICAgIFsKICAgICAgICAgICJyZWFjdCIsCiAgICAgICAgICAicmVhY3QtZG9tIiwKICAgICAgICAgICJyZWFjdC1yZWR1eCIsCiAgICAgICAgICAic3JjL2ZvdW5kYXRpb24iLAogICAgICAgICAgInJlYWN0LXRyYW5zaXRpb24tZ3JvdXAiLAogICAgICAgICAgInJlc2VsZWN0IiwKICAgICAgICAgICJjbGFzc25hbWVzIiwKICAgICAgICAgICJyZWR1eCIsCiAgICAgICAgICAicmVkdXgtdGh1bmsiLAogICAgICAgIF0sCiAgICAgICAgdAogICAgICApCiAgICA6IHQoCiAgICAgICAgKGUgPSBlIHx8IHNlbGYpLlJlYWN0LAogICAgICAgIGUuUmVhY3RET00sCiAgICAgICAgZS5SZWFjdFJlZHV4LAogICAgICAgIGUuRm91bmRhdGlvbiwKICAgICAgICBlLlJlYWN0VHJhbnNpdGlvbkdyb3VwLAogICAgICAgIGUuUmVzZWxlY3QsCiAgICAgICAgZS5jbGFzc05hbWVzLAogICAgICAgIGUuUmVkdXgsCiAgICAgICAgZS5SZWR1eFRodW5rCiAgICAgICk7Cn0pKHRoaXMsIGZ1bmN0aW9uIChnLCBlLCB0LCB2LCBzLCBuLCBwLCBhLCBvKSB7CiAgInVzZSBzdHJpY3QiOwogIHZhciBfID0gImRlZmF1bHQiIGluIGcgPyBnLmRlZmF1bHQgOiBnOwogIChlID0gZSAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgImRlZmF1bHQiKSA/IGUuZGVmYXVsdCA6IGUpLAogICAgKHAgPQogICAgICBwICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwLCAiZGVmYXVsdCIpID8gcC5kZWZhdWx0IDogcCksCiAgICAobyA9CiAgICAgIG8gJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sICJkZWZhdWx0IikgPyBvLmRlZmF1bHQgOiBvKTsKCiAgZnVuY3Rpb24gcigpIHsKICAgIGZ1bmN0aW9uIGUoZSkgewogICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAodC5zcmMgPSBlKSwgKHQuYXN5bmMgPSAhMCksIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCk7CiAgICB9CgogICAgcmV0dXJuIHdpbmRvdy5pc0h5YnJpZFdlYlZpZXcgfHwgKGUoIiIpLCBlKHdpbmRvdy5lbnYuZ3RtKSksIG51bGw7CiAgfQoKICB2YXIgaSA9IGcuY3JlYXRlQ29udGV4dCh7CiAgICBnZXRWYXJpYW50OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIHJlcG9ydEV4cG9zdXJlOiBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICB0ZXN0czoge30sCiAgICBoYXNBYnJhTG9hZGVkOiAhMSwKICB9KTsKCiAgZnVuY3Rpb24gbCh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgYSA9IE9iamVjdC5rZXlzKHQpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICgobiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpLAogICAgICAgIGUgJiYKICAgICAgICAgIChuID0gbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgZSkuZW51bWVyYWJsZTsKICAgICAgICAgIH0pKSwKICAgICAgICBhLnB1c2guYXBwbHkoYSwgbikpLAogICAgICBhCiAgICApOwogIH0KCiAgZnVuY3Rpb24gYyhhKSB7CiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgewogICAgICB2YXIgbyA9IG51bGwgIT0gYXJndW1lbnRzW2VdID8gYXJndW1lbnRzW2VdIDoge307CiAgICAgIGUgJSAyCiAgICAgICAgPyBsKE9iamVjdChvKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICh0ID0gYSksCiAgICAgICAgICAgICAgKGUgPSBvWyhuID0gZSldKSwKICAgICAgICAgICAgICBuIGluIHQKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKHRbbl0gPSBlKTsKICAgICAgICAgIH0pCiAgICAgICAgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycwogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobykpCiAgICAgICAgOiBsKE9iamVjdChvKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0KICAgICAgICAgIG51bGwgPT0gZQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICAgICAgZVsiQEBpdGVyYXRvciJdOwogICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgIHZhciBhLAogICAgICAgICAgICBvLAogICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgIHMgPSAhMCwKICAgICAgICAgICAgaSA9ICExOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBuID0gbi5jYWxsKGUpOwogICAgICAgICAgICAgICEocyA9IChhID0gbi5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKHIucHVzaChhLnZhbHVlKSwgIXQgfHwgci5sZW5ndGggIT09IHQpOwogICAgICAgICAgICAgIHMgPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAoaSA9ICEwKSwgKG8gPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcyB8fCBudWxsID09IG4ucmV0dXJuIHx8IG4ucmV0dXJuKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKGkpIHRocm93IG87CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIGQoZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBkKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBkKGUsIHQpIHsKICAgIChudWxsID09IHQgfHwgdCA+IGUubGVuZ3RoKSAmJiAodCA9IGUubGVuZ3RoKTsKICAgIGZvciAodmFyIG4gPSAwLCBhID0gbmV3IEFycmF5KHQpOyBuIDwgdDsgbisrKSBhW25dID0gZVtuXTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gbShlKSB7CiAgICB2YXIgdCA9IGUuY2hpbGRyZW4sCiAgICAgIGEgPSBlLnJlZ2lJZCwKICAgICAgbiA9IChlID0gdShnLnVzZVN0YXRlKHt9KSwgMikpWzBdLAogICAgICBvID0gZVsxXSwKICAgICAgciA9IChlID0gdShnLnVzZVN0YXRlKCExKSwgMikpWzBdLAogICAgICBzID0gZVsxXTsKICAgIHJldHVybiAoCiAgICAgIGcudXNlRWZmZWN0KAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlLAogICAgICAgICAgICB0LAogICAgICAgICAgICBuID0KICAgICAgICAgICAgICAobnVsbCA9PT0gKGUgPSB3aW5kb3cuY29uZmlnKSB8fCB2b2lkIDAgPT09IGUKICAgICAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgICAgICA6IGUuQWJyYUNvbmZpZykgfHwge307CiAgICAgICAgICB2LmFicmEuaW5pdCgKICAgICAgICAgICAgd2luZG93LmFicmEuY29uZmlnLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgYWdlbnRfaWQ6CiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKGUgPSB3aW5kb3cuY29uZmlnKSB8fAogICAgICAgICAgICAgICAgdm9pZCAwID09PSBlIHx8CiAgICAgICAgICAgICAgICBudWxsID09PSAodCA9IGUudXNlckluZm8pIHx8CiAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHQKICAgICAgICAgICAgICAgICAgPyB2b2lkIDAKICAgICAgICAgICAgICAgICAgOiB0LmFnZW50SUQpIHx8IHYuYWdlbnRJZENvb2tpZSwKICAgICAgICAgICAgICByZWdpX2lkOiBhLAogICAgICAgICAgICB9LAogICAgICAgICAgICBuCiAgICAgICAgICApLAogICAgICAgICAgICBvKGMoe30sIHYuYWJyYS5nZXRUZXN0cygpKSksCiAgICAgICAgICAgIHMoITApOwogICAgICAgIH0sCiAgICAgICAgW2FdCiAgICAgICksCiAgICAgIChlID0gZy51c2VNZW1vKAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRlc3RzOiBuLAogICAgICAgICAgICBnZXRWYXJpYW50OiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiBuW2VdOwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXBvcnRFeHBvc3VyZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdi5hYnJhLnJlcG9ydEV4cG9zdXJlKGUpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBoYXNBYnJhTG9hZGVkOiByLAogICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIFtuLCByXQogICAgICApKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KGkuUHJvdmlkZXIsIHsgdmFsdWU6IGUgfSwgdCkKICAgICk7CiAgfQoKICB2YXIgeSwKICAgIGYgPSAibnl0LXdvcmRsZS1yZWZyZXNoIiwKICAgIGggPSB3aW5kb3cubG9jYWxTdG9yYWdlLAogICAgYiA9IDQzMmU1OwoKICBmdW5jdGlvbiB3KCkgewogICAgcmV0dXJuICh5ID0KICAgICAgeSB8fAogICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgaC5nZXRJdGVtKGYpICYmIChoLnJlbW92ZUl0ZW0oZiksIHdpbmRvdy5pc0h5YnJpZFdlYlZpZXcpOwogICAgICB9LCBiKSk7CiAgfQoKICBmdW5jdGlvbiBrKGUsIHQpIHsKICAgIHZhciBuLAogICAgICBhID0gKHQgPSB2b2lkIDAgPT09IHQgPyB7fSA6IHQpLmluc2VydEF0OwogICAgZSAmJgogICAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZG9jdW1lbnQgJiYKICAgICAgKChuID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdKSwKICAgICAgKCh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSkudHlwZSA9ICJ0ZXh0L2NzcyIpLAogICAgICAidG9wIiA9PT0gYSAmJiBuLmZpcnN0Q2hpbGQKICAgICAgICA/IG4uaW5zZXJ0QmVmb3JlKHQsIG4uZmlyc3RDaGlsZCkKICAgICAgICA6IG4uYXBwZW5kQ2hpbGQodCksCiAgICAgIHQuc3R5bGVTaGVldAogICAgICAgID8gKHQuc3R5bGVTaGVldC5jc3NUZXh0ID0gZSkKICAgICAgICA6IHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSkpKTsKICB9CgogIHZhciB4ID0gewogICAgbW9tZW50OiAiTW9tZW50U3lzdGVtLW1vZHVsZV9tb21lbnRfXzk0d09MIiwKICAgIG1vbWVudEV4aXQ6ICJNb21lbnRTeXN0ZW0tbW9kdWxlX21vbWVudEV4aXRfX1poaW1lIiwKICAgIG1vbWVudEV4aXRBY3RpdmU6ICJNb21lbnRTeXN0ZW0tbW9kdWxlX21vbWVudEV4aXRBY3RpdmVfX01QQlg5IiwKICAgIG1vbWVudEVudGVyOiAiTW9tZW50U3lzdGVtLW1vZHVsZV9tb21lbnRFbnRlcl9fdHh3RXoiLAogICAgbW9tZW50RW50ZXJBY3RpdmU6ICJNb21lbnRTeXN0ZW0tbW9kdWxlX21vbWVudEVudGVyQWN0aXZlX19UaWtweCIsCiAgfTsKCiAgZnVuY3Rpb24gUyh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgYSA9IE9iamVjdC5rZXlzKHQpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICgobiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpLAogICAgICAgIGUgJiYKICAgICAgICAgIChuID0gbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgZSkuZW51bWVyYWJsZTsKICAgICAgICAgIH0pKSwKICAgICAgICBhLnB1c2guYXBwbHkoYSwgbikpLAogICAgICBhCiAgICApOwogIH0KCiAgZnVuY3Rpb24gRShhKSB7CiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgewogICAgICB2YXIgbyA9IG51bGwgIT0gYXJndW1lbnRzW2VdID8gYXJndW1lbnRzW2VdIDoge307CiAgICAgIGUgJSAyCiAgICAgICAgPyBTKE9iamVjdChvKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICh0ID0gYSksCiAgICAgICAgICAgICAgKGUgPSBvWyhuID0gZSldKSwKICAgICAgICAgICAgICBuIGluIHQKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKHRbbl0gPSBlKTsKICAgICAgICAgIH0pCiAgICAgICAgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycwogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobykpCiAgICAgICAgOiBTKE9iamVjdChvKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gaihlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0KICAgICAgICAgIG51bGwgPT0gZQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICAgICAgZVsiQEBpdGVyYXRvciJdOwogICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgIHZhciBhLAogICAgICAgICAgICBvLAogICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgIHMgPSAhMCwKICAgICAgICAgICAgaSA9ICExOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBuID0gbi5jYWxsKGUpOwogICAgICAgICAgICAgICEocyA9IChhID0gbi5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKHIucHVzaChhLnZhbHVlKSwgIXQgfHwgci5sZW5ndGggIT09IHQpOwogICAgICAgICAgICAgIHMgPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAoaSA9ICEwKSwgKG8gPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcyB8fCBudWxsID09IG4ucmV0dXJuIHx8IG4ucmV0dXJuKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKGkpIHRocm93IG87CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIHooZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyB6KGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiB6KGUsIHQpIHsKICAgIChudWxsID09IHQgfHwgdCA+IGUubGVuZ3RoKSAmJiAodCA9IGUubGVuZ3RoKTsKICAgIGZvciAodmFyIG4gPSAwLCBhID0gbmV3IEFycmF5KHQpOyBuIDwgdDsgbisrKSBhW25dID0gZVtuXTsKICAgIHJldHVybiBhOwogIH0KCiAgaygKICAgICIuTW9tZW50U3lzdGVtLW1vZHVsZV9tb21lbnRfXzk0d09MIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG59XG5cbi5Nb21lbnRTeXN0ZW0tbW9kdWxlX21vbWVudEV4aXRfX1poaW1lIHtcbiAgb3BhY2l0eTogMTtcbn1cblxuLk1vbWVudFN5c3RlbS1tb2R1bGVfbW9tZW50RXhpdEFjdGl2ZV9fTVBCWDkge1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDQwMG1zO1xufVxuXG4uTW9tZW50U3lzdGVtLW1vZHVsZV9tb21lbnRFbnRlcl9fdHh3RXoge1xuICBvcGFjaXR5OiAwO1xufVxuXG4uTW9tZW50U3lzdGVtLW1vZHVsZV9tb21lbnRFbnRlckFjdGl2ZV9fVGlrcHgge1xuICBvcGFjaXR5OiAxO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDQwMG1zO1xufSIKICApOwogIHZhciBOID0gNDAwOwoKICBmdW5jdGlvbiBDKGUpIHsKICAgIHZhciB0ID0gZS5oYXNMb2FkZWQsCiAgICAgIG4gPSBlLmNvbmZpZywKICAgICAgYSA9IGUuaW5pdGlhbE1vbWVudCwKICAgICAgbyA9IGooXy51c2VTdGF0ZShhKSwgMiksCiAgICAgIHIgPSBvWzBdLAogICAgICBlID0gb1sxXSwKICAgICAgYSA9IG5bcl0sCiAgICAgIG8gPSB7IGV4aXQ6IHgubW9tZW50RXhpdCwgZXhpdEFjdGl2ZTogeC5tb21lbnRFeGl0QWN0aXZlIH0sCiAgICAgIG4gPSB7IGVudGVyOiB4Lm1vbWVudEVudGVyLCBlbnRlckFjdGl2ZTogeC5tb21lbnRFbnRlckFjdGl2ZSB9LAogICAgICBvID0gRShFKHt9LCBhLmFuaW1hdGVJbiA/IG4gOiB7fSksIGEuYW5pbWF0ZU91dCA/IG8gOiB7fSk7CiAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICBzLlRyYW5zaXRpb25Hcm91cCwKICAgICAgbnVsbCwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgIHMuQ1NTVHJhbnNpdGlvbiwKICAgICAgICB7CiAgICAgICAgICBrZXk6IHIsCiAgICAgICAgICB0aW1lb3V0OiB7IGVudGVyOiBhLmFuaW1hdGVJbiA/IE4gOiAwLCBleGl0OiBhLmFuaW1hdGVPdXQgPyBOIDogMCB9LAogICAgICAgICAgY2xhc3NOYW1lczogbywKICAgICAgICB9LAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBjbGFzc05hbWU6IHgubW9tZW50IH0sCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoYS5jb21wb25lbnQsIHsgaGFzTG9hZGVkOiB0LCB0cmFuc2l0aW9uOiBlIH0pCiAgICAgICAgKQogICAgICApCiAgICApOwogIH0KCiAgdmFyIEEgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5wZXJzaXN0LnNldHRpbmdzOwogICAgfSwKICAgIE8gPSBuLmNyZWF0ZVNlbGVjdG9yKEEsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmhhcmRNb2RlOwogICAgfSksCiAgICBJID0gbi5jcmVhdGVTZWxlY3RvcihBLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5kYXJrTW9kZTsKICAgIH0pLAogICAgTCA9IG4uY3JlYXRlU2VsZWN0b3IoQSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUuY29sb3JibGluZE1vZGU7CiAgICB9KSwKICAgIFQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0LnVzZURpc3BhdGNoKCk7CiAgICB9LAogICAgUCA9IHQudXNlU2VsZWN0b3I7CgogIGZ1bmN0aW9uIE0odCwgZSkgewogICAgdmFyIG4sCiAgICAgIGEgPSBPYmplY3Qua2V5cyh0KTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYKICAgICAgICAoKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSwKICAgICAgICBlICYmCiAgICAgICAgICAobiA9IG4uZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIGUpLmVudW1lcmFibGU7CiAgICAgICAgICB9KSksCiAgICAgICAgYS5wdXNoLmFwcGx5KGEsIG4pKSwKICAgICAgYQogICAgKTsKICB9CgogIGZ1bmN0aW9uIEIoYSkgewogICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHsKICAgICAgdmFyIG8gPSBudWxsICE9IGFyZ3VtZW50c1tlXSA/IGFyZ3VtZW50c1tlXSA6IHt9OwogICAgICBlICUgMgogICAgICAgID8gTShPYmplY3QobyksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciB0LCBuOwogICAgICAgICAgICAodCA9IGEpLAogICAgICAgICAgICAgIChlID0gb1sobiA9IGUpXSksCiAgICAgICAgICAgICAgbiBpbiB0CiAgICAgICAgICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBuLCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGUsCiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogITAsCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA6ICh0W25dID0gZSk7CiAgICAgICAgICB9KQogICAgICAgIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMKICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG8pKQogICAgICAgIDogTShPYmplY3QobykpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobywgZSkpOwogICAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIFIoZSkgewogICAgcmV0dXJuIHsgdHlwZTogWSwgcGF5bG9hZDogeyBlcnJvcjogZSB9IH07CiAgfQoKICBmdW5jdGlvbiBXKGUsIHQsIG4sIGEpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6IFgsCiAgICAgIHBheWxvYWQ6IHsgbmFtZTogZSwgbGFiZWw6IHQsIHVzZUJlYWNvbjogbiwgY29udGV4dDogYSB9LAogICAgfTsKICB9CgogIGZ1bmN0aW9uIEgoZSwgdCkgewogICAgcmV0dXJuIHsgdHlwZTogSiwgcGF5bG9hZDogeyB0ZXh0OiBlLCB0aW1lc3RhbXA6IHQgfSB9OwogIH0KCiAgdmFyIEQgPSAid29yZGxlL292ZXJsYXlzL09QRU5fTU9EQUwiLAogICAgcSA9ICJ3b3JkbGUvb3ZlcmxheXMvQ0xPU0VfTU9EQUwiLAogICAgRyA9ICJ3b3JkbGUvb3ZlcmxheXMvT1BFTl9QQUdFIiwKICAgIEYgPSAid29yZGxlL292ZXJsYXlzL0NMT1NFX1BBR0UiLAogICAgViA9ICJ3b3JkbGUvb3ZlcmxheXMvV0lMTF9DTE9TRV9QQUdFIiwKICAgIFkgPSAid29yZGxlL292ZXJsYXlzL09QRU5fRVJST1IiLAogICAgVSA9ICJ3b3JkbGUvb3ZlcmxheXMvT1BFTl9OQVZfTU9EQUwiLAogICAgWiA9ICJ3b3JkbGUvb3ZlcmxheXMvQ0xPU0VfTkFWX01PREFMIiwKICAgIFggPSAid29yZGxlL292ZXJsYXlzL1RSQUNLX05BVl9NT0RBTF9JVEVNIiwKICAgIEsgPSAid29yZGxlL292ZXJsYXlzL0FERF9UT0FTVCIsCiAgICBKID0gIndvcmRsZS9vdmVybGF5cy9SRU1PVkVfVE9BU1QiLAogICAgUSA9ICJ3b3JkbGUvb3ZlcmxheXMvVFJBQ0tfQVVUSF9DTElDSyIsCiAgICAkID0gIndvcmRsZS9vdmVybGF5cy9UUkFDS19BVVRIX0lNUFJFU1NJT04iLAogICAgZWUgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gewogICAgICAgIHR5cGU6IEQsCiAgICAgICAgcGF5bG9hZDogewogICAgICAgICAgbW9kYWw6IGUsCiAgICAgICAgICBpc0NsaWNrZWQ6CiAgICAgICAgICAgIDEgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdICYmIGFyZ3VtZW50c1sxXSwKICAgICAgICB9LAogICAgICB9OwogICAgfSwKICAgIHRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIHsgdHlwZTogRywgcGF5bG9hZDogeyBwYWdlOiBlIH0gfTsKICAgIH0sCiAgICBuZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsgdHlwZTogcSB9OwogICAgfSwKICAgIGFlID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4geyB0eXBlOiBGIH07CiAgICB9LAogICAgb2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7IHR5cGU6IFUgfTsKICAgIH0sCiAgICByZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsgdHlwZTogWiB9OwogICAgfSwKICAgIHNlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIHsgdHlwZTogSywgcGF5bG9hZDogQihCKHt9LCBlKSwge30sIHsgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pIH07CiAgICB9LAogICAgaWUgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICByZXR1cm4geyB0eXBlOiBRLCBwYXlsb2FkOiB7IGxhYmVsOiBlLCBzZW5kQ29udGV4dDogdCwgZWxlbWVudDogbiB9IH07CiAgICB9LAogICAgbGUgPQogICAgICAobnVsbCA9PT0gKHBlID0gd2luZG93LmVudikgfHwgdm9pZCAwID09PSBwZSA/IHZvaWQgMCA6IHBlLm5hbWUpIHx8ICJkZXYiLAogICAgY2UgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZVtsZV0gfHwgZS5kZXY7CiAgICB9LAogICAgdWUgPSBjZSh7CiAgICAgIHByb2Q6ICIiLAogICAgICBzdGc6ICIiLAogICAgICBkZXY6ICIiLAogICAgfSksCiAgICBkZSA9IGNlKHsKICAgICAgcHJvZDogIiIsCiAgICAgIHN0ZzogIiIsCiAgICAgIGRldjogIiIsCiAgICB9KSwKICAgIG1lID0gIiIuY29uY2F0KHVlLCAiL3N2Yy9hdXRoL3YxL3Byb2ZpbGVpbmZvIiksCiAgICBBID0gY2UoewogICAgICBwcm9kOiAiIiwKICAgICAgc3RnOiAiIiwKICAgICAgZGV2OiAiIiwKICAgIH0pLAogICAgcGUgPSBjZSh7CiAgICAgIHByb2Q6ICIiLAogICAgICBzdGc6ICIiLAogICAgICBkZXY6ICIiLAogICAgfSksCiAgICBBID0gZW5jb2RlVVJJQ29tcG9uZW50KEEpLAogICAgcGUgPSBlbmNvZGVVUklDb21wb25lbnQocGUpLAogICAgeWUgPSAiIgogICAgICAuY29uY2F0KAogICAgICAgIHVlLAogICAgICAgICIvYXV0aC9lbnRlci1lbWFpbD9yZXNwb25zZV90eXBlPWNvb2tpZSZjbGllbnRfaWQ9Z2FtZXMmYXBwbGljYXRpb249bnl0LWxpcmUmYXNzZXQ9d29yZGxlJnJlZGlyZWN0X3VyaT0iCiAgICAgICkKICAgICAgLmNvbmNhdChwZSksCiAgICBnZSA9ICIiCiAgICAgIC5jb25jYXQoCiAgICAgICAgdWUsCiAgICAgICAgIi9hdXRoL2VudGVyLWVtYWlsP3Jlc3BvbnNlX3R5cGU9Y29va2llJmNsaWVudF9pZD1nYW1lcyZhcHBsaWNhdGlvbj1ueXQtbGlyZXMmcmVkaXJlY3RfdXJpPSIKICAgICAgKQogICAgICAuY29uY2F0KEEpLAogICAgQSA9IGNlKHsKICAgICAgcHJvZDogIiIsCiAgICAgIHN0ZzogIiIsCiAgICAgIGRldjogIiIsCiAgICB9KSwKICAgIGZlID0gIiIuY29uY2F0KHVlLCAiL2F1dGgvbG9nb3V0P3JlZGlyZWN0X3VyaT0iKS5jb25jYXQoQSksCiAgICBoZSA9IFsKICAgICAgImNpZ2FyIiwKICAgICAgInJlYnV0IiwKICAgICAgInNpc3N5IiwKICAgICAgImh1bXBoIiwKICAgICAgImF3YWtlIiwKICAgICAgImJsdXNoIiwKICAgICAgImZvY2FsIiwKICAgICAgImV2YWRlIiwKICAgICAgIm5hdmFsIiwKICAgICAgInNlcnZlIiwKICAgICAgImhlYXRoIiwKICAgICAgImR3YXJmIiwKICAgICAgIm1vZGVsIiwKICAgICAgImthcm1hIiwKICAgICAgInN0aW5rIiwKICAgICAgImdyYWRlIiwKICAgICAgInF1aWV0IiwKICAgICAgImJlbmNoIiwKICAgICAgImFiYXRlIiwKICAgICAgImZlaWduIiwKICAgICAgIm1ham9yIiwKICAgICAgImRlYXRoIiwKICAgICAgImZyZXNoIiwKICAgICAgImNydXN0IiwKICAgICAgInN0b29sIiwKICAgICAgImNvbG9uIiwKICAgICAgImFiYXNlIiwKICAgICAgIm1hcnJ5IiwKICAgICAgInJlYWN0IiwKICAgICAgImJhdHR5IiwKICAgICAgInByaWRlIiwKICAgICAgImZsb3NzIiwKICAgICAgImhlbGl4IiwKICAgICAgImNyb2FrIiwKICAgICAgInN0YWZmIiwKICAgICAgInBhcGVyIiwKICAgICAgInVuZmVkIiwKICAgICAgIndoZWxwIiwKICAgICAgInRyYXdsIiwKICAgICAgIm91dGRvIiwKICAgICAgImFkb2JlIiwKICAgICAgImNyYXp5IiwKICAgICAgInNvd2VyIiwKICAgICAgInJlcGF5IiwKICAgICAgImRpZ2l0IiwKICAgICAgImNyYXRlIiwKICAgICAgImNsdWNrIiwKICAgICAgInNwaWtlIiwKICAgICAgIm1pbWljIiwKICAgICAgInBvdW5kIiwKICAgICAgIm1heGltIiwKICAgICAgImxpbmVuIiwKICAgICAgInVubWV0IiwKICAgICAgImZsZXNoIiwKICAgICAgImJvb2J5IiwKICAgICAgImZvcnRoIiwKICAgICAgImZpcnN0IiwKICAgICAgInN0YW5kIiwKICAgICAgImJlbGx5IiwKICAgICAgIml2b3J5IiwKICAgICAgInNlZWR5IiwKICAgICAgInByaW50IiwKICAgICAgInllYXJuIiwKICAgICAgImRyYWluIiwKICAgICAgImJyaWJlIiwKICAgICAgInN0b3V0IiwKICAgICAgInBhbmVsIiwKICAgICAgImNyYXNzIiwKICAgICAgImZsdW1lIiwKICAgICAgIm9mZmFsIiwKICAgICAgImFncmVlIiwKICAgICAgImVycm9yIiwKICAgICAgInN3aXJsIiwKICAgICAgImFyZ3VlIiwKICAgICAgImJsZWVkIiwKICAgICAgImRlbHRhIiwKICAgICAgImZsaWNrIiwKICAgICAgInRvdGVtIiwKICAgICAgIndvb2VyIiwKICAgICAgImZyb250IiwKICAgICAgInNocnViIiwKICAgICAgInBhcnJ5IiwKICAgICAgImJpb21lIiwKICAgICAgImxhcGVsIiwKICAgICAgInN0YXJ0IiwKICAgICAgImdyZWV0IiwKICAgICAgImdvbmVyIiwKICAgICAgImdvbGVtIiwKICAgICAgImx1c3R5IiwKICAgICAgImxvb3B5IiwKICAgICAgInJvdW5kIiwKICAgICAgImF1ZGl0IiwKICAgICAgImx5aW5nIiwKICAgICAgImdhbW1hIiwKICAgICAgImxhYm9yIiwKICAgICAgImlzbGV0IiwKICAgICAgImNpdmljIiwKICAgICAgImZvcmdlIiwKICAgICAgImNvcm55IiwKICAgICAgIm1vdWx0IiwKICAgICAgImJhc2ljIiwKICAgICAgInNhbGFkIiwKICAgICAgImFnYXRlIiwKICAgICAgInNwaWN5IiwKICAgICAgInNwcmF5IiwKICAgICAgImVzc2F5IiwKICAgICAgImZqb3JkIiwKICAgICAgInNwZW5kIiwKICAgICAgImtlYmFiIiwKICAgICAgImd1aWxkIiwKICAgICAgImFiYWNrIiwKICAgICAgIm1vdG9yIiwKICAgICAgImFsb25lIiwKICAgICAgImhhdGNoIiwKICAgICAgImh5cGVyIiwKICAgICAgInRodW1iIiwKICAgICAgImRvd3J5IiwKICAgICAgIm91Z2h0IiwKICAgICAgImJlbGNoIiwKICAgICAgImR1dGNoIiwKICAgICAgInBpbG90IiwKICAgICAgInR3ZWVkIiwKICAgICAgImNvbWV0IiwKICAgICAgImphdW50IiwKICAgICAgImVuZW1hIiwKICAgICAgInN0ZWVkIiwKICAgICAgImFieXNzIiwKICAgICAgImdyb3dsIiwKICAgICAgImZsaW5nIiwKICAgICAgImRvemVuIiwKICAgICAgImJvb3p5IiwKICAgICAgImVyb2RlIiwKICAgICAgIndvcmxkIiwKICAgICAgImdvdWdlIiwKICAgICAgImNsaWNrIiwKICAgICAgImJyaWFyIiwKICAgICAgImdyZWF0IiwKICAgICAgImFsdGFyIiwKICAgICAgInB1bHB5IiwKICAgICAgImJsdXJ0IiwKICAgICAgImNvYXN0IiwKICAgICAgImR1Y2h5IiwKICAgICAgImdyb2luIiwKICAgICAgImZpeGVyIiwKICAgICAgImdyb3VwIiwKICAgICAgInJvZ3VlIiwKICAgICAgImJhZGx5IiwKICAgICAgInNtYXJ0IiwKICAgICAgInBpdGh5IiwKICAgICAgImdhdWR5IiwKICAgICAgImNoaWxsIiwKICAgICAgImhlcm9uIiwKICAgICAgInZvZGthIiwKICAgICAgImZpbmVyIiwKICAgICAgInN1cmVyIiwKICAgICAgInJhZGlvIiwKICAgICAgInJvdWdlIiwKICAgICAgInBlcmNoIiwKICAgICAgInJldGNoIiwKICAgICAgIndyb3RlIiwKICAgICAgImNsb2NrIiwKICAgICAgInRpbGRlIiwKICAgICAgInN0b3JlIiwKICAgICAgInByb3ZlIiwKICAgICAgImJyaW5nIiwKICAgICAgInNvbHZlIiwKICAgICAgImNoZWF0IiwKICAgICAgImdyaW1lIiwKICAgICAgImV4dWx0IiwKICAgICAgInVzaGVyIiwKICAgICAgImVwb2NoIiwKICAgICAgInRyaWFkIiwKICAgICAgImJyZWFrIiwKICAgICAgInJoaW5vIiwKICAgICAgInZpcmFsIiwKICAgICAgImNvbmljIiwKICAgICAgIm1hc3NlIiwKICAgICAgInNvbmljIiwKICAgICAgInZpdGFsIiwKICAgICAgInRyYWNlIiwKICAgICAgInVzaW5nIiwKICAgICAgInBlYWNoIiwKICAgICAgImNoYW1wIiwKICAgICAgImJhdG9uIiwKICAgICAgImJyYWtlIiwKICAgICAgInBsdWNrIiwKICAgICAgImNyYXplIiwKICAgICAgImdyaXBlIiwKICAgICAgIndlYXJ5IiwKICAgICAgInBpY2t5IiwKICAgICAgImFjdXRlIiwKICAgICAgImZlcnJ5IiwKICAgICAgImFzaWRlIiwKICAgICAgInRhcGlyIiwKICAgICAgInRyb2xsIiwKICAgICAgInVuaWZ5IiwKICAgICAgInJlYnVzIiwKICAgICAgImJvb3N0IiwKICAgICAgInRydXNzIiwKICAgICAgInNpZWdlIiwKICAgICAgInRpZ2VyIiwKICAgICAgImJhbmFsIiwKICAgICAgInNsdW1wIiwKICAgICAgImNyYW5rIiwKICAgICAgImdvcmdlIiwKICAgICAgInF1ZXJ5IiwKICAgICAgImRyaW5rIiwKICAgICAgImZhdm9yIiwKICAgICAgImFiYmV5IiwKICAgICAgInRhbmd5IiwKICAgICAgInBhbmljIiwKICAgICAgInNvbGFyIiwKICAgICAgInNoaXJlIiwKICAgICAgInByb3h5IiwKICAgICAgInBvaW50IiwKICAgICAgInJvYm90IiwKICAgICAgInByaWNrIiwKICAgICAgIndpbmNlIiwKICAgICAgImNyaW1wIiwKICAgICAgImtub2xsIiwKICAgICAgInN1Z2FyIiwKICAgICAgIndoYWNrIiwKICAgICAgIm1vdW50IiwKICAgICAgInBlcmt5IiwKICAgICAgImNvdWxkIiwKICAgICAgIndydW5nIiwKICAgICAgImxpZ2h0IiwKICAgICAgInRob3NlIiwKICAgICAgIm1vaXN0IiwKICAgICAgInNoYXJkIiwKICAgICAgInBsZWF0IiwKICAgICAgImFsb2Z0IiwKICAgICAgInNraWxsIiwKICAgICAgImVsZGVyIiwKICAgICAgImZyYW1lIiwKICAgICAgImh1bW9yIiwKICAgICAgInBhdXNlIiwKICAgICAgInVsY2VyIiwKICAgICAgInVsdHJhIiwKICAgICAgInJvYmluIiwKICAgICAgImN5bmljIiwKICAgICAgImFyb21hIiwKICAgICAgImNhdWxrIiwKICAgICAgInNoYWtlIiwKICAgICAgImRvZGdlIiwKICAgICAgInN3aWxsIiwKICAgICAgInRhY2l0IiwKICAgICAgIm90aGVyIiwKICAgICAgInRob3JuIiwKICAgICAgInRyb3ZlIiwKICAgICAgImJsb2tlIiwKICAgICAgInZpdmlkIiwKICAgICAgInNwaWxsIiwKICAgICAgImNoYW50IiwKICAgICAgImNob2tlIiwKICAgICAgInJ1cGVlIiwKICAgICAgIm5hc3R5IiwKICAgICAgIm1vdXJuIiwKICAgICAgImFoZWFkIiwKICAgICAgImJyaW5lIiwKICAgICAgImNsb3RoIiwKICAgICAgImhvYXJkIiwKICAgICAgInN3ZWV0IiwKICAgICAgIm1vbnRoIiwKICAgICAgImxhcHNlIiwKICAgICAgIndhdGNoIiwKICAgICAgInRvZGF5IiwKICAgICAgImZvY3VzIiwKICAgICAgInNtZWx0IiwKICAgICAgInRlYXNlIiwKICAgICAgImNhdGVyIiwKICAgICAgIm1vdmllIiwKICAgICAgInNhdXRlIiwKICAgICAgImFsbG93IiwKICAgICAgInJlbmV3IiwKICAgICAgInRoZWlyIiwKICAgICAgInNsb3NoIiwKICAgICAgInB1cmdlIiwKICAgICAgImNoZXN0IiwKICAgICAgImRlcG90IiwKICAgICAgImVwb3h5IiwKICAgICAgIm55bXBoIiwKICAgICAgImZvdW5kIiwKICAgICAgInNoYWxsIiwKICAgICAgInN0b3ZlIiwKICAgICAgImxvd2x5IiwKICAgICAgInNub3V0IiwKICAgICAgInRyb3BlIiwKICAgICAgImZld2VyIiwKICAgICAgInNoYXdsIiwKICAgICAgIm5hdGFsIiwKICAgICAgImNvbW1hIiwKICAgICAgImZvcmF5IiwKICAgICAgInNjYXJlIiwKICAgICAgInN0YWlyIiwKICAgICAgImJsYWNrIiwKICAgICAgInNxdWFkIiwKICAgICAgInJveWFsIiwKICAgICAgImNodW5rIiwKICAgICAgIm1pbmNlIiwKICAgICAgInNoYW1lIiwKICAgICAgImNoZWVrIiwKICAgICAgImFtcGxlIiwKICAgICAgImZsYWlyIiwKICAgICAgImZveWVyIiwKICAgICAgImNhcmdvIiwKICAgICAgIm94aWRlIiwKICAgICAgInBsYW50IiwKICAgICAgIm9saXZlIiwKICAgICAgImluZXJ0IiwKICAgICAgImFza2V3IiwKICAgICAgImhlaXN0IiwKICAgICAgInNob3duIiwKICAgICAgInplc3R5IiwKICAgICAgInRyYXNoIiwKICAgICAgImxhcnZhIiwKICAgICAgImZvcmdvIiwKICAgICAgInN0b3J5IiwKICAgICAgImhhaXJ5IiwKICAgICAgInRyYWluIiwKICAgICAgImhvbWVyIiwKICAgICAgImJhZGdlIiwKICAgICAgIm1pZHN0IiwKICAgICAgImNhbm55IiwKICAgICAgInNoaW5lIiwKICAgICAgImdlY2tvIiwKICAgICAgImZhcmNlIiwKICAgICAgInNsdW5nIiwKICAgICAgInRpcHN5IiwKICAgICAgIm1ldGFsIiwKICAgICAgInlpZWxkIiwKICAgICAgImRlbHZlIiwKICAgICAgImJlaW5nIiwKICAgICAgInNjb3VyIiwKICAgICAgImdsYXNzIiwKICAgICAgImdhbWVyIiwKICAgICAgInNjcmFwIiwKICAgICAgIm1vbmV5IiwKICAgICAgImhpbmdlIiwKICAgICAgImFsYnVtIiwKICAgICAgInZvdWNoIiwKICAgICAgImFzc2V0IiwKICAgICAgInRpYXJhIiwKICAgICAgImNyZXB0IiwKICAgICAgImJheW91IiwKICAgICAgImF0b2xsIiwKICAgICAgIm1hbm9yIiwKICAgICAgImNyZWFrIiwKICAgICAgInNob3d5IiwKICAgICAgInBoYXNlIiwKICAgICAgImZyb3RoIiwKICAgICAgImRlcHRoIiwKICAgICAgImdsb29tIiwKICAgICAgImZsb29kIiwKICAgICAgInRyYWl0IiwKICAgICAgImdpcnRoIiwKICAgICAgInBpZXR5IiwKICAgICAgImdvb3NlIiwKICAgICAgImZsb2F0IiwKICAgICAgImRvbm9yIiwKICAgICAgImF0b25lIiwKICAgICAgInByaW1vIiwKICAgICAgImFwcm9uIiwKICAgICAgImJsb3duIiwKICAgICAgImNhY2FvIiwKICAgICAgImxvc2VyIiwKICAgICAgImlucHV0IiwKICAgICAgImdsb2F0IiwKICAgICAgImF3ZnVsIiwKICAgICAgImJyaW5rIiwKICAgICAgInNtaXRlIiwKICAgICAgImJlYWR5IiwKICAgICAgInJ1c3R5IiwKICAgICAgInJldHJvIiwKICAgICAgImRyb2xsIiwKICAgICAgImdhd2t5IiwKICAgICAgImh1dGNoIiwKICAgICAgInBpbnRvIiwKICAgICAgImVncmV0IiwKICAgICAgImxpbGFjIiwKICAgICAgInNldmVyIiwKICAgICAgImZpZWxkIiwKICAgICAgImZsdWZmIiwKICAgICAgImFnYXBlIiwKICAgICAgInZvaWNlIiwKICAgICAgInN0ZWFkIiwKICAgICAgImJlcnRoIiwKICAgICAgIm1hZGFtIiwKICAgICAgIm5pZ2h0IiwKICAgICAgImJsYW5kIiwKICAgICAgImxpdmVyIiwKICAgICAgIndlZGdlIiwKICAgICAgInJvb215IiwKICAgICAgIndhY2t5IiwKICAgICAgImZsb2NrIiwKICAgICAgImFuZ3J5IiwKICAgICAgInRyaXRlIiwKICAgICAgImFwaGlkIiwKICAgICAgInRyeXN0IiwKICAgICAgIm1pZGdlIiwKICAgICAgInBvd2VyIiwKICAgICAgImVsb3BlIiwKICAgICAgImNpbmNoIiwKICAgICAgIm1vdHRvIiwKICAgICAgInN0b21wIiwKICAgICAgInVwc2V0IiwKICAgICAgImJsdWZmIiwKICAgICAgImNyYW1wIiwKICAgICAgInF1YXJ0IiwKICAgICAgImNveWx5IiwKICAgICAgInlvdXRoIiwKICAgICAgInJoeW1lIiwKICAgICAgImJ1Z2d5IiwKICAgICAgImFsaWVuIiwKICAgICAgInNtZWFyIiwKICAgICAgInVuZml0IiwKICAgICAgInBhdHR5IiwKICAgICAgImNsaW5nIiwKICAgICAgImdsZWFuIiwKICAgICAgImxhYmVsIiwKICAgICAgImh1bmt5IiwKICAgICAgImtoYWtpIiwKICAgICAgInBva2VyIiwKICAgICAgImdydWVsIiwKICAgICAgInR3aWNlIiwKICAgICAgInR3YW5nIiwKICAgICAgInNocnVnIiwKICAgICAgInRyZWF0IiwKICAgICAgIndhc3RlIiwKICAgICAgIm1lcml0IiwKICAgICAgIndvdmVuIiwKICAgICAgIm5lZWR5IiwKICAgICAgImNsb3duIiwKICAgICAgImlyb255IiwKICAgICAgInJ1ZGVyIiwKICAgICAgImdhdXplIiwKICAgICAgImNoaWVmIiwKICAgICAgIm9uc2V0IiwKICAgICAgInByaXplIiwKICAgICAgImZ1bmdpIiwKICAgICAgImNoYXJtIiwKICAgICAgImd1bGx5IiwKICAgICAgImludGVyIiwKICAgICAgIndob29wIiwKICAgICAgInRhdW50IiwKICAgICAgImxlZXJ5IiwKICAgICAgImNsYXNzIiwKICAgICAgInRoZW1lIiwKICAgICAgImxvZnR5IiwKICAgICAgInRpYmlhIiwKICAgICAgImJvb3plIiwKICAgICAgImFscGhhIiwKICAgICAgInRoeW1lIiwKICAgICAgImRvdWJ0IiwKICAgICAgInBhcmVyIiwKICAgICAgImNodXRlIiwKICAgICAgInN0aWNrIiwKICAgICAgInRyaWNlIiwKICAgICAgImFsaWtlIiwKICAgICAgInJlY2FwIiwKICAgICAgInNhaW50IiwKICAgICAgImdsb3J5IiwKICAgICAgImdyYXRlIiwKICAgICAgImFkbWl0IiwKICAgICAgImJyaXNrIiwKICAgICAgInNvZ2d5IiwKICAgICAgInVzdXJwIiwKICAgICAgInNjYWxkIiwKICAgICAgInNjb3JuIiwKICAgICAgImxlYXZlIiwKICAgICAgInR3aW5lIiwKICAgICAgInN0aW5nIiwKICAgICAgImJvdWdoIiwKICAgICAgIm1hcnNoIiwKICAgICAgInNsb3RoIiwKICAgICAgImRhbmR5IiwKICAgICAgInZpZ29yIiwKICAgICAgImhvd2R5IiwKICAgICAgImVuam95IiwKICAgICAgInZhbGlkIiwKICAgICAgImlvbmljIiwKICAgICAgImVxdWFsIiwKICAgICAgImZsb29yIiwKICAgICAgImNhdGNoIiwKICAgICAgInNwYWRlIiwKICAgICAgInN0ZWluIiwKICAgICAgImV4aXN0IiwKICAgICAgInF1aXJrIiwKICAgICAgImRlbmltIiwKICAgICAgImdyb3ZlIiwKICAgICAgInNwaWVsIiwKICAgICAgIm11bW15IiwKICAgICAgImZhdWx0IiwKICAgICAgImZvZ2d5IiwKICAgICAgImZsb3V0IiwKICAgICAgImNhcnJ5IiwKICAgICAgInNuZWFrIiwKICAgICAgImxpYmVsIiwKICAgICAgIndhbHR6IiwKICAgICAgImFwdGx5IiwKICAgICAgInBpbmV5IiwKICAgICAgImluZXB0IiwKICAgICAgImFsb3VkIiwKICAgICAgInBob3RvIiwKICAgICAgImRyZWFtIiwKICAgICAgInN0YWxlIiwKICAgICAgInVuaXRlIiwKICAgICAgInNuYXJsIiwKICAgICAgImJha2VyIiwKICAgICAgInRoZXJlIiwKICAgICAgImdseXBoIiwKICAgICAgInBvb2NoIiwKICAgICAgImhpcHB5IiwKICAgICAgInNwZWxsIiwKICAgICAgImZvbGx5IiwKICAgICAgImxvdXNlIiwKICAgICAgImd1bGNoIiwKICAgICAgInZhdWx0IiwKICAgICAgImdvZGx5IiwKICAgICAgInRocmV3IiwKICAgICAgImZsZWV0IiwKICAgICAgImdyYXZlIiwKICAgICAgImluYW5lIiwKICAgICAgInNob2NrIiwKICAgICAgImNyYXZlIiwKICAgICAgInNwaXRlIiwKICAgICAgInZhbHZlIiwKICAgICAgInNraW1wIiwKICAgICAgImNsYWltIiwKICAgICAgInJhaW55IiwKICAgICAgIm11c3R5IiwKICAgICAgInBpcXVlIiwKICAgICAgImRhZGR5IiwKICAgICAgInF1YXNpIiwKICAgICAgImFyaXNlIiwKICAgICAgImFnaW5nIiwKICAgICAgInZhbGV0IiwKICAgICAgIm9waXVtIiwKICAgICAgImF2ZXJ0IiwKICAgICAgInN0dWNrIiwKICAgICAgInJlY3V0IiwKICAgICAgIm11bGNoIiwKICAgICAgImdlbnJlIiwKICAgICAgInBsdW1lIiwKICAgICAgInJpZmxlIiwKICAgICAgImNvdW50IiwKICAgICAgImluY3VyIiwKICAgICAgInRvdGFsIiwKICAgICAgIndyZXN0IiwKICAgICAgIm1vY2hhIiwKICAgICAgImRldGVyIiwKICAgICAgInN0dWR5IiwKICAgICAgImxvdmVyIiwKICAgICAgInNhZmVyIiwKICAgICAgInJpdmV0IiwKICAgICAgImZ1bm55IiwKICAgICAgInNtb2tlIiwKICAgICAgIm1vdW5kIiwKICAgICAgInVuZHVlIiwKICAgICAgInNlZGFuIiwKICAgICAgInBhZ2FuIiwKICAgICAgInN3aW5lIiwKICAgICAgImd1aWxlIiwKICAgICAgImd1c3R5IiwKICAgICAgImVxdWlwIiwKICAgICAgInRvdWdoIiwKICAgICAgImNhbm9lIiwKICAgICAgImNoYW9zIiwKICAgICAgImNvdmV0IiwKICAgICAgImh1bWFuIiwKICAgICAgInVkZGVyIiwKICAgICAgImx1bmNoIiwKICAgICAgImJsYXN0IiwKICAgICAgInN0cmF5IiwKICAgICAgIm1hbmdhIiwKICAgICAgIm1lbGVlIiwKICAgICAgImxlZnR5IiwKICAgICAgInF1aWNrIiwKICAgICAgInBhc3RlIiwKICAgICAgImdpdmVuIiwKICAgICAgIm9jdGV0IiwKICAgICAgInJpc2VuIiwKICAgICAgImdyb2FuIiwKICAgICAgImxlYWt5IiwKICAgICAgImdyaW5kIiwKICAgICAgImNhcnZlIiwKICAgICAgImxvb3NlIiwKICAgICAgInNhZGx5IiwKICAgICAgInNwaWx0IiwKICAgICAgImFwcGxlIiwKICAgICAgInNsYWNrIiwKICAgICAgImhvbmV5IiwKICAgICAgImZpbmFsIiwKICAgICAgInNoZWVuIiwKICAgICAgImVlcmllIiwKICAgICAgIm1pbnR5IiwKICAgICAgInNsaWNrIiwKICAgICAgImRlcmJ5IiwKICAgICAgIndoYXJmIiwKICAgICAgInNwZWx0IiwKICAgICAgImNvYWNoIiwKICAgICAgImVydXB0IiwKICAgICAgInNpbmdlIiwKICAgICAgInByaWNlIiwKICAgICAgInNwYXduIiwKICAgICAgImZhaXJ5IiwKICAgICAgImppZmZ5IiwKICAgICAgImZpbG15IiwKICAgICAgInN0YWNrIiwKICAgICAgImNob3NlIiwKICAgICAgInNsZWVwIiwKICAgICAgImFyZG9yIiwKICAgICAgIm5hbm55IiwKICAgICAgIm5pZWNlIiwKICAgICAgIndvb3p5IiwKICAgICAgImhhbmR5IiwKICAgICAgImdyYWNlIiwKICAgICAgImRpdHRvIiwKICAgICAgInN0YW5rIiwKICAgICAgImNyZWFtIiwKICAgICAgInVzdWFsIiwKICAgICAgImRpb2RlIiwKICAgICAgInZhbG9yIiwKICAgICAgImFuZ2xlIiwKICAgICAgIm5pbmphIiwKICAgICAgIm11ZGR5IiwKICAgICAgImNoYXNlIiwKICAgICAgInJlcGx5IiwKICAgICAgInByb25lIiwKICAgICAgInNwb2lsIiwKICAgICAgImhlYXJ0IiwKICAgICAgInNoYWRlIiwKICAgICAgImRpbmVyIiwKICAgICAgImFyc29uIiwKICAgICAgIm9uaW9uIiwKICAgICAgInNsZWV0IiwKICAgICAgImRvd2VsIiwKICAgICAgImNvdWNoIiwKICAgICAgInBhbHN5IiwKICAgICAgImJvd2VsIiwKICAgICAgInNtaWxlIiwKICAgICAgImV2b2tlIiwKICAgICAgImNyZWVrIiwKICAgICAgImxhbmNlIiwKICAgICAgImVhZ2xlIiwKICAgICAgImlkaW90IiwKICAgICAgInNpcmVuIiwKICAgICAgImJ1aWx0IiwKICAgICAgImVtYmVkIiwKICAgICAgImF3YXJkIiwKICAgICAgImRyb3NzIiwKICAgICAgImFubnVsIiwKICAgICAgImdvb2R5IiwKICAgICAgImZyb3duIiwKICAgICAgInBhdGlvIiwKICAgICAgImxhZGVuIiwKICAgICAgImh1bWlkIiwKICAgICAgImVsaXRlIiwKICAgICAgImx5bXBoIiwKICAgICAgImVkaWZ5IiwKICAgICAgIm1pZ2h0IiwKICAgICAgInJlc2V0IiwKICAgICAgInZpc2l0IiwKICAgICAgImd1c3RvIiwKICAgICAgInB1cnNlIiwKICAgICAgInZhcG9yIiwKICAgICAgImNyb2NrIiwKICAgICAgIndyaXRlIiwKICAgICAgInN1bm55IiwKICAgICAgImxvYXRoIiwKICAgICAgImNoYWZmIiwKICAgICAgInNsaWRlIiwKICAgICAgInF1ZWVyIiwKICAgICAgInZlbm9tIiwKICAgICAgInN0YW1wIiwKICAgICAgInNvcnJ5IiwKICAgICAgInN0aWxsIiwKICAgICAgImFjb3JuIiwKICAgICAgImFwaW5nIiwKICAgICAgInB1c2h5IiwKICAgICAgInRhbWVyIiwKICAgICAgImhhdGVyIiwKICAgICAgIm1hbmlhIiwKICAgICAgImF3b2tlIiwKICAgICAgImJyYXduIiwKICAgICAgInN3aWZ0IiwKICAgICAgImV4aWxlIiwKICAgICAgImJpcmNoIiwKICAgICAgImx1Y2t5IiwKICAgICAgImZyZWVyIiwKICAgICAgInJpc2t5IiwKICAgICAgImdob3N0IiwKICAgICAgInBsaWVyIiwKICAgICAgImx1bmFyIiwKICAgICAgIndpbmNoIiwKICAgICAgInNuYXJlIiwKICAgICAgIm51cnNlIiwKICAgICAgImhvdXNlIiwKICAgICAgImJvcmF4IiwKICAgICAgIm5pY2VyIiwKICAgICAgImx1cmNoIiwKICAgICAgImV4YWx0IiwKICAgICAgImFib3V0IiwKICAgICAgInNhdnZ5IiwKICAgICAgInRveGluIiwKICAgICAgInR1bmljIiwKICAgICAgInByaWVkIiwKICAgICAgImlubGF5IiwKICAgICAgImNodW1wIiwKICAgICAgImxhbmt5IiwKICAgICAgImNyZXNzIiwKICAgICAgImVhdGVyIiwKICAgICAgImVsdWRlIiwKICAgICAgImN5Y2xlIiwKICAgICAgImtpdHR5IiwKICAgICAgImJvdWxlIiwKICAgICAgIm1vcm9uIiwKICAgICAgInRlbmV0IiwKICAgICAgInBsYWNlIiwKICAgICAgImxvYmJ5IiwKICAgICAgInBsdXNoIiwKICAgICAgInZpZ2lsIiwKICAgICAgImluZGV4IiwKICAgICAgImJsaW5rIiwKICAgICAgImNsdW5nIiwKICAgICAgInF1YWxtIiwKICAgICAgImNyb3VwIiwKICAgICAgImNsaW5rIiwKICAgICAgImp1aWN5IiwKICAgICAgInN0YWdlIiwKICAgICAgImRlY2F5IiwKICAgICAgIm5lcnZlIiwKICAgICAgImZsaWVyIiwKICAgICAgInNoYWZ0IiwKICAgICAgImNyb29rIiwKICAgICAgImNsZWFuIiwKICAgICAgImNoaW5hIiwKICAgICAgInJpZGdlIiwKICAgICAgInZvd2VsIiwKICAgICAgImdub21lIiwKICAgICAgInNudWNrIiwKICAgICAgImljaW5nIiwKICAgICAgInNwaW55IiwKICAgICAgInJpZ29yIiwKICAgICAgInNuYWlsIiwKICAgICAgImZsb3duIiwKICAgICAgInJhYmlkIiwKICAgICAgInByb3NlIiwKICAgICAgInRoYW5rIiwKICAgICAgInBvcHB5IiwKICAgICAgImJ1ZGdlIiwKICAgICAgImZpYmVyIiwKICAgICAgIm1vbGR5IiwKICAgICAgImRvd2R5IiwKICAgICAgImtuZWVsIiwKICAgICAgInRyYWNrIiwKICAgICAgImNhZGR5IiwKICAgICAgInF1ZWxsIiwKICAgICAgImR1bXB5IiwKICAgICAgInBhbGVyIiwKICAgICAgInN3b3JlIiwKICAgICAgInJlYmFyIiwKICAgICAgInNjdWJhIiwKICAgICAgInNwbGF0IiwKICAgICAgImZseWVyIiwKICAgICAgImhvcm55IiwKICAgICAgIm1hc29uIiwKICAgICAgImRvaW5nIiwKICAgICAgIm96b25lIiwKICAgICAgImFtcGx5IiwKICAgICAgIm1vbGFyIiwKICAgICAgIm92YXJ5IiwKICAgICAgImJlc2V0IiwKICAgICAgInF1ZXVlIiwKICAgICAgImNsaWZmIiwKICAgICAgIm1hZ2ljIiwKICAgICAgInRydWNlIiwKICAgICAgInNwb3J0IiwKICAgICAgImZyaXR6IiwKICAgICAgImVkaWN0IiwKICAgICAgInR3aXJsIiwKICAgICAgInZlcnNlIiwKICAgICAgImxsYW1hIiwKICAgICAgImVhdGVuIiwKICAgICAgInJhbmdlIiwKICAgICAgIndoaXNrIiwKICAgICAgImhvdmVsIiwKICAgICAgInJlaGFiIiwKICAgICAgIm1hY2F3IiwKICAgICAgInNpZ21hIiwKICAgICAgInNwb3V0IiwKICAgICAgInZlcnZlIiwKICAgICAgInN1c2hpIiwKICAgICAgImR5aW5nIiwKICAgICAgImZldGlkIiwKICAgICAgImJyYWluIiwKICAgICAgImJ1ZGR5IiwKICAgICAgInRodW1wIiwKICAgICAgInNjaW9uIiwKICAgICAgImNhbmR5IiwKICAgICAgImNob3JkIiwKICAgICAgImJhc2luIiwKICAgICAgIm1hcmNoIiwKICAgICAgImNyb3dkIiwKICAgICAgImFyYm9yIiwKICAgICAgImdheWx5IiwKICAgICAgIm11c2t5IiwKICAgICAgInN0YWluIiwKICAgICAgImRhbGx5IiwKICAgICAgImJsZXNzIiwKICAgICAgImJyYXZvIiwKICAgICAgInN0dW5nIiwKICAgICAgInRpdGxlIiwKICAgICAgInJ1bGVyIiwKICAgICAgImtpb3NrIiwKICAgICAgImJsb25kIiwKICAgICAgImVubnVpIiwKICAgICAgImxheWVyIiwKICAgICAgImZsdWlkIiwKICAgICAgInRhdHR5IiwKICAgICAgInNjb3JlIiwKICAgICAgImN1dGllIiwKICAgICAgInplYnJhIiwKICAgICAgImJhcmdlIiwKICAgICAgIm1hdGV5IiwKICAgICAgImJsdWVyIiwKICAgICAgImFpZGVyIiwKICAgICAgInNob29rIiwKICAgICAgInJpdmVyIiwKICAgICAgInByaXZ5IiwKICAgICAgImJldGVsIiwKICAgICAgImZyaXNrIiwKICAgICAgImJvbmdvIiwKICAgICAgImJlZ3VuIiwKICAgICAgImF6dXJlIiwKICAgICAgIndlYXZlIiwKICAgICAgImdlbmllIiwKICAgICAgInNvdW5kIiwKICAgICAgImdsb3ZlIiwKICAgICAgImJyYWlkIiwKICAgICAgInNjb3BlIiwKICAgICAgIndyeWx5IiwKICAgICAgInJvdmVyIiwKICAgICAgImFzc2F5IiwKICAgICAgIm9jZWFuIiwKICAgICAgImJsb29tIiwKICAgICAgImlyYXRlIiwKICAgICAgImxhdGVyIiwKICAgICAgIndva2VuIiwKICAgICAgInNpbGt5IiwKICAgICAgIndyZWNrIiwKICAgICAgImR3ZWx0IiwKICAgICAgInNsYXRlIiwKICAgICAgInNtYWNrIiwKICAgICAgInNvbGlkIiwKICAgICAgImFtYXplIiwKICAgICAgImhhemVsIiwKICAgICAgIndyaXN0IiwKICAgICAgImpvbGx5IiwKICAgICAgImdsb2JlIiwKICAgICAgImZsaW50IiwKICAgICAgInJvdXNlIiwKICAgICAgImNpdmlsIiwKICAgICAgInZpc3RhIiwKICAgICAgInJlbGF4IiwKICAgICAgImNvdmVyIiwKICAgICAgImFsaXZlIiwKICAgICAgImJlZWNoIiwKICAgICAgImpldHR5IiwKICAgICAgImJsaXNzIiwKICAgICAgInZvY2FsIiwKICAgICAgIm9mdGVuIiwKICAgICAgImRvbGx5IiwKICAgICAgImVpZ2h0IiwKICAgICAgImpva2VyIiwKICAgICAgInNpbmNlIiwKICAgICAgImV2ZW50IiwKICAgICAgImVuc3VlIiwKICAgICAgInNodW50IiwKICAgICAgImRpdmVyIiwKICAgICAgInBvc2VyIiwKICAgICAgIndvcnN0IiwKICAgICAgInN3ZWVwIiwKICAgICAgImFsbGV5IiwKICAgICAgImNyZWVkIiwKICAgICAgImFuaW1lIiwKICAgICAgImxlYWZ5IiwKICAgICAgImJvc29tIiwKICAgICAgImR1bmNlIiwKICAgICAgInN0YXJlIiwKICAgICAgInB1ZGd5IiwKICAgICAgIndhaXZlIiwKICAgICAgImNob2lyIiwKICAgICAgInN0b29kIiwKICAgICAgInNwb2tlIiwKICAgICAgIm91dGdvIiwKICAgICAgImRlbGF5IiwKICAgICAgImJpbGdlIiwKICAgICAgImlkZWFsIiwKICAgICAgImNsYXNwIiwKICAgICAgInNlaXplIiwKICAgICAgImhvdGx5IiwKICAgICAgImxhdWdoIiwKICAgICAgInNpZXZlIiwKICAgICAgImJsb2NrIiwKICAgICAgIm1lYW50IiwKICAgICAgImdyYXBlIiwKICAgICAgIm5vb3NlIiwKICAgICAgImhhcmR5IiwKICAgICAgInNoaWVkIiwKICAgICAgImRyYXdsIiwKICAgICAgImRhaXN5IiwKICAgICAgInB1dHR5IiwKICAgICAgInN0cnV0IiwKICAgICAgImJ1cm50IiwKICAgICAgInR1bGlwIiwKICAgICAgImNyaWNrIiwKICAgICAgImlkeWxsIiwKICAgICAgInZpeGVuIiwKICAgICAgImZ1cm9yIiwKICAgICAgImdlZWt5IiwKICAgICAgImNvdWdoIiwKICAgICAgIm5haXZlIiwKICAgICAgInNob2FsIiwKICAgICAgInN0b3JrIiwKICAgICAgImJhdGhlIiwKICAgICAgImF1bnR5IiwKICAgICAgImNoZWNrIiwKICAgICAgInByaW1lIiwKICAgICAgImJyYXNzIiwKICAgICAgIm91dGVyIiwKICAgICAgImZ1cnJ5IiwKICAgICAgInJhem9yIiwKICAgICAgImVsZWN0IiwKICAgICAgImV2aWN0IiwKICAgICAgImltcGx5IiwKICAgICAgImRlbXVyIiwKICAgICAgInF1b3RhIiwKICAgICAgImhhdmVuIiwKICAgICAgImNhdmlsIiwKICAgICAgInN3ZWFyIiwKICAgICAgImNydW1wIiwKICAgICAgImRvdWdoIiwKICAgICAgImdhdmVsIiwKICAgICAgIndhZ29uIiwKICAgICAgInNhbG9uIiwKICAgICAgIm51ZGdlIiwKICAgICAgImhhcmVtIiwKICAgICAgInBpdGNoIiwKICAgICAgInN3b3JuIiwKICAgICAgInB1cGlsIiwKICAgICAgImV4Y2VsIiwKICAgICAgInN0b255IiwKICAgICAgImNhYmluIiwKICAgICAgInVuemlwIiwKICAgICAgInF1ZWVuIiwKICAgICAgInRyb3V0IiwKICAgICAgInBvbHlwIiwKICAgICAgImVhcnRoIiwKICAgICAgInN0b3JtIiwKICAgICAgInVudGlsIiwKICAgICAgInRhcGVyIiwKICAgICAgImVudGVyIiwKICAgICAgImNoaWxkIiwKICAgICAgImFkb3B0IiwKICAgICAgIm1pbm9yIiwKICAgICAgImZhdHR5IiwKICAgICAgImh1c2t5IiwKICAgICAgImJyYXZlIiwKICAgICAgImZpbGV0IiwKICAgICAgInNsaW1lIiwKICAgICAgImdsaW50IiwKICAgICAgInRyZWFkIiwKICAgICAgInN0ZWFsIiwKICAgICAgInJlZ2FsIiwKICAgICAgImd1ZXN0IiwKICAgICAgImV2ZXJ5IiwKICAgICAgIm11cmt5IiwKICAgICAgInNoYXJlIiwKICAgICAgInNwb3JlIiwKICAgICAgImhvaXN0IiwKICAgICAgImJ1eG9tIiwKICAgICAgImlubmVyIiwKICAgICAgIm90dGVyIiwKICAgICAgImRpbWx5IiwKICAgICAgImxldmVsIiwKICAgICAgInN1bWFjIiwKICAgICAgImRvbnV0IiwKICAgICAgInN0aWx0IiwKICAgICAgImFyZW5hIiwKICAgICAgInNoZWV0IiwKICAgICAgInNjcnViIiwKICAgICAgImZhbmN5IiwKICAgICAgInNsaW15IiwKICAgICAgInBlYXJsIiwKICAgICAgInNpbGx5IiwKICAgICAgInBvcmNoIiwKICAgICAgImRpbmdvIiwKICAgICAgInNlcGlhIiwKICAgICAgImFtYmxlIiwKICAgICAgInNoYWR5IiwKICAgICAgImJyZWFkIiwKICAgICAgImZyaWFyIiwKICAgICAgInJlaWduIiwKICAgICAgImRhaXJ5IiwKICAgICAgInF1aWxsIiwKICAgICAgImNyb3NzIiwKICAgICAgImJyb29kIiwKICAgICAgInR1YmVyIiwKICAgICAgInNoZWFyIiwKICAgICAgInBvc2l0IiwKICAgICAgImJsYW5rIiwKICAgICAgInZpbGxhIiwKICAgICAgInNoYW5rIiwKICAgICAgInBpZ2d5IiwKICAgICAgImZyZWFrIiwKICAgICAgIndoaWNoIiwKICAgICAgImFtb25nIiwKICAgICAgImZlY2FsIiwKICAgICAgInNoZWxsIiwKICAgICAgIndvdWxkIiwKICAgICAgImFsZ2FlIiwKICAgICAgImxhcmdlIiwKICAgICAgInJhYmJpIiwKICAgICAgImFnb255IiwKICAgICAgImFtdXNlIiwKICAgICAgImJ1c2h5IiwKICAgICAgImNvcHNlIiwKICAgICAgInN3b29uIiwKICAgICAgImtuaWZlIiwKICAgICAgInBvdWNoIiwKICAgICAgImFzY290IiwKICAgICAgInBsYW5lIiwKICAgICAgImNyb3duIiwKICAgICAgInVyYmFuIiwKICAgICAgInNuaWRlIiwKICAgICAgInJlbGF5IiwKICAgICAgImFiaWRlIiwKICAgICAgInZpb2xhIiwKICAgICAgInJhamFoIiwKICAgICAgInN0cmF3IiwKICAgICAgImRpbGx5IiwKICAgICAgImNyYXNoIiwKICAgICAgImFtYXNzIiwKICAgICAgInRoaXJkIiwKICAgICAgInRyaWNrIiwKICAgICAgInR1dG9yIiwKICAgICAgIndvb2R5IiwKICAgICAgImJsdXJiIiwKICAgICAgImdyaWVmIiwKICAgICAgImRpc2NvIiwKICAgICAgIndoZXJlIiwKICAgICAgInNhc3N5IiwKICAgICAgImJlYWNoIiwKICAgICAgInNhdW5hIiwKICAgICAgImNvbWljIiwKICAgICAgImNsdWVkIiwKICAgICAgImNyZWVwIiwKICAgICAgImNhc3RlIiwKICAgICAgImdyYXplIiwKICAgICAgInNudWZmIiwKICAgICAgImZyb2NrIiwKICAgICAgImdvbmFkIiwKICAgICAgImRydW5rIiwKICAgICAgInByb25nIiwKICAgICAgImx1cmlkIiwKICAgICAgInN0ZWVsIiwKICAgICAgImhhbHZlIiwKICAgICAgImJ1eWVyIiwKICAgICAgInZpbnlsIiwKICAgICAgInV0aWxlIiwKICAgICAgInNtZWxsIiwKICAgICAgImFkYWdlIiwKICAgICAgIndvcnJ5IiwKICAgICAgInRhc3R5IiwKICAgICAgImxvY2FsIiwKICAgICAgInRyYWRlIiwKICAgICAgImZpbmNoIiwKICAgICAgImFzaGVuIiwKICAgICAgIm1vZGFsIiwKICAgICAgImdhdW50IiwKICAgICAgImNsb3ZlIiwKICAgICAgImVuYWN0IiwKICAgICAgImFkb3JuIiwKICAgICAgInJvYXN0IiwKICAgICAgInNwZWNrIiwKICAgICAgInNoZWlrIiwKICAgICAgIm1pc3N5IiwKICAgICAgImdydW50IiwKICAgICAgInNub29wIiwKICAgICAgInBhcnR5IiwKICAgICAgInRvdWNoIiwKICAgICAgIm1hZmlhIiwKICAgICAgImVtY2VlIiwKICAgICAgImFycmF5IiwKICAgICAgInNvdXRoIiwKICAgICAgInZhcGlkIiwKICAgICAgImplbGx5IiwKICAgICAgInNrdWxrIiwKICAgICAgImFuZ3N0IiwKICAgICAgInR1YmFsIiwKICAgICAgImxvd2VyIiwKICAgICAgImNyZXN0IiwKICAgICAgInN3ZWF0IiwKICAgICAgImN5YmVyIiwKICAgICAgImFkb3JlIiwKICAgICAgInRhcmR5IiwKICAgICAgInN3YW1pIiwKICAgICAgIm5vdGNoIiwKICAgICAgImdyb29tIiwKICAgICAgInJvYWNoIiwKICAgICAgImhpdGNoIiwKICAgICAgInlvdW5nIiwKICAgICAgImFsaWduIiwKICAgICAgInJlYWR5IiwKICAgICAgImZyb25kIiwKICAgICAgInN0cmFwIiwKICAgICAgInB1cmVlIiwKICAgICAgInJlYWxtIiwKICAgICAgInZlbnVlIiwKICAgICAgInN3YXJtIiwKICAgICAgIm9mZmVyIiwKICAgICAgInNldmVuIiwKICAgICAgImRyeWVyIiwKICAgICAgImRpYXJ5IiwKICAgICAgImRyeWx5IiwKICAgICAgImRyYW5rIiwKICAgICAgImFjcmlkIiwKICAgICAgImhlYWR5IiwKICAgICAgInRoZXRhIiwKICAgICAgImp1bnRvIiwKICAgICAgInBpeGllIiwKICAgICAgInF1b3RoIiwKICAgICAgImJvbnVzIiwKICAgICAgInNoYWx0IiwKICAgICAgInBlbm5lIiwKICAgICAgImFtZW5kIiwKICAgICAgImRhdHVtIiwKICAgICAgImJ1aWxkIiwKICAgICAgInBpYW5vIiwKICAgICAgInNoZWxmIiwKICAgICAgImxvZGdlIiwKICAgICAgInN1aW5nIiwKICAgICAgInJlYXJtIiwKICAgICAgImNvcmFsIiwKICAgICAgInJhbWVuIiwKICAgICAgIndvcnRoIiwKICAgICAgInBzYWxtIiwKICAgICAgImluZmVyIiwKICAgICAgIm92ZXJ0IiwKICAgICAgIm1heW9yIiwKICAgICAgIm92b2lkIiwKICAgICAgImdsaWRlIiwKICAgICAgInVzYWdlIiwKICAgICAgInBvaXNlIiwKICAgICAgInJhbmR5IiwKICAgICAgImNodWNrIiwKICAgICAgInByYW5rIiwKICAgICAgImZpc2h5IiwKICAgICAgInRvb3RoIiwKICAgICAgImV0aGVyIiwKICAgICAgImRyb3ZlIiwKICAgICAgImlkbGVyIiwKICAgICAgInN3YXRoIiwKICAgICAgInN0aW50IiwKICAgICAgIndoaWxlIiwKICAgICAgImJlZ2F0IiwKICAgICAgImFwcGx5IiwKICAgICAgInNsYW5nIiwKICAgICAgInRhcm90IiwKICAgICAgInJhZGFyIiwKICAgICAgImNyZWRvIiwKICAgICAgImF3YXJlIiwKICAgICAgImNhbm9uIiwKICAgICAgInNoaWZ0IiwKICAgICAgInRpbWVyIiwKICAgICAgImJ5bGF3IiwKICAgICAgInNlcnVtIiwKICAgICAgInRocmVlIiwKICAgICAgInN0ZWFrIiwKICAgICAgImlsaWFjIiwKICAgICAgInNoaXJrIiwKICAgICAgImJsdW50IiwKICAgICAgInB1cHB5IiwKICAgICAgInBlbmFsIiwKICAgICAgImpvaXN0IiwKICAgICAgImJ1bm55IiwKICAgICAgInNoYXBlIiwKICAgICAgImJlZ2V0IiwKICAgICAgIndoZWVsIiwKICAgICAgImFkZXB0IiwKICAgICAgInN0dW50IiwKICAgICAgInN0b2xlIiwKICAgICAgInRvcGF6IiwKICAgICAgImNob3JlIiwKICAgICAgImZsdWtlIiwKICAgICAgImFmb290IiwKICAgICAgImJsb2F0IiwKICAgICAgImJ1bGx5IiwKICAgICAgImRlbnNlIiwKICAgICAgImNhcGVyIiwKICAgICAgInNuZWVyIiwKICAgICAgImJveGVyIiwKICAgICAgImp1bWJvIiwKICAgICAgImx1bmdlIiwKICAgICAgInNwYWNlIiwKICAgICAgImF2YWlsIiwKICAgICAgInNob3J0IiwKICAgICAgInNsdXJwIiwKICAgICAgImxveWFsIiwKICAgICAgImZsaXJ0IiwKICAgICAgInBpenphIiwKICAgICAgImNvbmNoIiwKICAgICAgInRlbXBvIiwKICAgICAgImRyb29wIiwKICAgICAgInBsYXRlIiwKICAgICAgImJpYmxlIiwKICAgICAgInBsdW5rIiwKICAgICAgImFmb3VsIiwKICAgICAgInNhdm95IiwKICAgICAgInN0ZWVwIiwKICAgICAgImFnaWxlIiwKICAgICAgInN0YWtlIiwKICAgICAgImR3ZWxsIiwKICAgICAgImtuYXZlIiwKICAgICAgImJlYXJkIiwKICAgICAgImFyb3NlIiwKICAgICAgIm1vdGlmIiwKICAgICAgInNtYXNoIiwKICAgICAgImJyb2lsIiwKICAgICAgImdsYXJlIiwKICAgICAgInNob3ZlIiwKICAgICAgImJhZ2d5IiwKICAgICAgIm1hbW15IiwKICAgICAgInN3YW1wIiwKICAgICAgImFsb25nIiwKICAgICAgInJ1Z2J5IiwKICAgICAgIndhZ2VyIiwKICAgICAgInF1YWNrIiwKICAgICAgInNxdWF0IiwKICAgICAgInNuYWt5IiwKICAgICAgImRlYml0IiwKICAgICAgIm1hbmdlIiwKICAgICAgInNrYXRlIiwKICAgICAgIm5pbnRoIiwKICAgICAgImpvdXN0IiwKICAgICAgInRyYW1wIiwKICAgICAgInNwdXJuIiwKICAgICAgIm1lZGFsIiwKICAgICAgIm1pY3JvIiwKICAgICAgInJlYmVsIiwKICAgICAgImZsYW5rIiwKICAgICAgImxlYXJuIiwKICAgICAgIm5hZGlyIiwKICAgICAgIm1hcGxlIiwKICAgICAgImNvbWZ5IiwKICAgICAgInJlbWl0IiwKICAgICAgImdydWZmIiwKICAgICAgImVzdGVyIiwKICAgICAgImxlYXN0IiwKICAgICAgIm1vZ3VsIiwKICAgICAgImZldGNoIiwKICAgICAgImNhdXNlIiwKICAgICAgIm9ha2VuIiwKICAgICAgImFnbG93IiwKICAgICAgIm1lYXR5IiwKICAgICAgImdhZmZlIiwKICAgICAgInNoeWx5IiwKICAgICAgInJhY2VyIiwKICAgICAgInByb3dsIiwKICAgICAgInRoaWVmIiwKICAgICAgInN0ZXJuIiwKICAgICAgInBvZXN5IiwKICAgICAgInJvY2t5IiwKICAgICAgInR3ZWV0IiwKICAgICAgIndhaXN0IiwKICAgICAgInNwaXJlIiwKICAgICAgImdyb3BlIiwKICAgICAgImhhdm9jIiwKICAgICAgInBhdHN5IiwKICAgICAgInRydWx5IiwKICAgICAgImZvcnR5IiwKICAgICAgImRlaXR5IiwKICAgICAgInVuY2xlIiwKICAgICAgInN3aXNoIiwKICAgICAgImdpdmVyIiwKICAgICAgInByZWVuIiwKICAgICAgImJldmVsIiwKICAgICAgImxlbXVyIiwKICAgICAgImRyYWZ0IiwKICAgICAgInNsb3BlIiwKICAgICAgImFubm95IiwKICAgICAgImxpbmdvIiwKICAgICAgImJsZWFrIiwKICAgICAgImRpdHR5IiwKICAgICAgImN1cmx5IiwKICAgICAgImNlZGFyIiwKICAgICAgImRpcmdlIiwKICAgICAgImdyb3duIiwKICAgICAgImhvcmRlIiwKICAgICAgImRyb29sIiwKICAgICAgInNodWNrIiwKICAgICAgImNyeXB0IiwKICAgICAgImN1bWluIiwKICAgICAgInN0b2NrIiwKICAgICAgImdyYXZ5IiwKICAgICAgImxvY3VzIiwKICAgICAgIndpZGVyIiwKICAgICAgImJyZWVkIiwKICAgICAgInF1aXRlIiwKICAgICAgImNoYWZlIiwKICAgICAgImNhY2hlIiwKICAgICAgImJsaW1wIiwKICAgICAgImRlaWduIiwKICAgICAgImZpZW5kIiwKICAgICAgImxvZ2ljIiwKICAgICAgImNoZWFwIiwKICAgICAgImVsaWRlIiwKICAgICAgInJpZ2lkIiwKICAgICAgImZhbHNlIiwKICAgICAgInJlbmFsIiwKICAgICAgInBlbmNlIiwKICAgICAgInJvd2R5IiwKICAgICAgInNob290IiwKICAgICAgImJsYXplIiwKICAgICAgImVudm95IiwKICAgICAgInBvc3NlIiwKICAgICAgImJyaWVmIiwKICAgICAgIm5ldmVyIiwKICAgICAgImFib3J0IiwKICAgICAgIm1vdXNlIiwKICAgICAgIm11Y2t5IiwKICAgICAgInN1bGt5IiwKICAgICAgImZpZXJ5IiwKICAgICAgIm1lZGlhIiwKICAgICAgInRydW5rIiwKICAgICAgInllYXN0IiwKICAgICAgImNsZWFyIiwKICAgICAgInNrdW5rIiwKICAgICAgInNjYWxwIiwKICAgICAgImJpdHR5IiwKICAgICAgImNpZGVyIiwKICAgICAgImtvYWxhIiwKICAgICAgImR1dmV0IiwKICAgICAgInNlZ3VlIiwKICAgICAgImNyZW1lIiwKICAgICAgInN1cGVyIiwKICAgICAgImdyaWxsIiwKICAgICAgImFmdGVyIiwKICAgICAgIm93bmVyIiwKICAgICAgImVtYmVyIiwKICAgICAgInJlYWNoIiwKICAgICAgIm5vYmx5IiwKICAgICAgImVtcHR5IiwKICAgICAgInNwZWVkIiwKICAgICAgImdpcHN5IiwKICAgICAgInJlY3VyIiwKICAgICAgInNtb2NrIiwKICAgICAgImRyZWFkIiwKICAgICAgIm1lcmdlIiwKICAgICAgImJ1cnN0IiwKICAgICAgImthcHBhIiwKICAgICAgImFtaXR5IiwKICAgICAgInNoYWt5IiwKICAgICAgImhvdmVyIiwKICAgICAgImNhcm9sIiwKICAgICAgInNub3J0IiwKICAgICAgInN5bm9kIiwKICAgICAgImZhaW50IiwKICAgICAgImhhdW50IiwKICAgICAgImZsb3VyIiwKICAgICAgImNoYWlyIiwKICAgICAgImRldG94IiwKICAgICAgInNocmV3IiwKICAgICAgInRlbnNlIiwKICAgICAgInBsaWVkIiwKICAgICAgInF1YXJrIiwKICAgICAgImJ1cmx5IiwKICAgICAgIm5vdmVsIiwKICAgICAgIndheGVuIiwKICAgICAgInN0b2ljIiwKICAgICAgImplcmt5IiwKICAgICAgImJsaXR6IiwKICAgICAgImJlZWZ5IiwKICAgICAgImx5cmljIiwKICAgICAgImh1c3N5IiwKICAgICAgInRvd2VsIiwKICAgICAgInF1aWx0IiwKICAgICAgImJlbG93IiwKICAgICAgImJpbmdvIiwKICAgICAgIndpc3B5IiwKICAgICAgImJyYXNoIiwKICAgICAgInNjb25lIiwKICAgICAgInRvYXN0IiwKICAgICAgImVhc2VsIiwKICAgICAgInNhdWN5IiwKICAgICAgInZhbHVlIiwKICAgICAgInNwaWNlIiwKICAgICAgImhvbm9yIiwKICAgICAgInJvdXRlIiwKICAgICAgInNoYXJwIiwKICAgICAgImJhd2R5IiwKICAgICAgInJhZGlpIiwKICAgICAgInNrdWxsIiwKICAgICAgInBob255IiwKICAgICAgImlzc3VlIiwKICAgICAgImxhZ2VyIiwKICAgICAgInN3ZWxsIiwKICAgICAgInVyaW5lIiwKICAgICAgImdhc3N5IiwKICAgICAgInRyaWFsIiwKICAgICAgImZsb3JhIiwKICAgICAgInVwcGVyIiwKICAgICAgImxhdGNoIiwKICAgICAgIndpZ2h0IiwKICAgICAgImJyaWNrIiwKICAgICAgInJldHJ5IiwKICAgICAgImhvbGx5IiwKICAgICAgImRlY2FsIiwKICAgICAgImdyYXNzIiwKICAgICAgInNoYWNrIiwKICAgICAgImRvZ21hIiwKICAgICAgIm1vdmVyIiwKICAgICAgImRlZmVyIiwKICAgICAgInNvYmVyIiwKICAgICAgIm9wdGljIiwKICAgICAgImNyaWVyIiwKICAgICAgInZ5aW5nIiwKICAgICAgIm5vbWFkIiwKICAgICAgImZsdXRlIiwKICAgICAgImhpcHBvIiwKICAgICAgInNoYXJrIiwKICAgICAgImRyaWVyIiwKICAgICAgIm9iZXNlIiwKICAgICAgImJ1Z2xlIiwKICAgICAgInRhd255IiwKICAgICAgImNoYWxrIiwKICAgICAgImZlYXN0IiwKICAgICAgInJ1ZGR5IiwKICAgICAgInBlZGFsIiwKICAgICAgInNjYXJmIiwKICAgICAgImNydWVsIiwKICAgICAgImJsZWF0IiwKICAgICAgInRpZGFsIiwKICAgICAgInNsdXNoIiwKICAgICAgInNlbWVuIiwKICAgICAgIndpbmR5IiwKICAgICAgImR1c3R5IiwKICAgICAgInNhbGx5IiwKICAgICAgImlnbG9vIiwKICAgICAgIm5lcmR5IiwKICAgICAgImpld2VsIiwKICAgICAgInNob25lIiwKICAgICAgIndoYWxlIiwKICAgICAgImh5bWVuIiwKICAgICAgImFidXNlIiwKICAgICAgImZ1Z3VlIiwKICAgICAgImVsYm93IiwKICAgICAgImNydW1iIiwKICAgICAgInBhbnN5IiwKICAgICAgIndlbHNoIiwKICAgICAgInN5cnVwIiwKICAgICAgInRlcnNlIiwKICAgICAgInN1YXZlIiwKICAgICAgImdhbXV0IiwKICAgICAgInN3dW5nIiwKICAgICAgImRyYWtlIiwKICAgICAgImZyZWVkIiwKICAgICAgImFmaXJlIiwKICAgICAgInNoaXJ0IiwKICAgICAgImdyb3V0IiwKICAgICAgIm9kZGx5IiwKICAgICAgInRpdGhlIiwKICAgICAgInBsYWlkIiwKICAgICAgImR1bW15IiwKICAgICAgImJyb29tIiwKICAgICAgImJsaW5kIiwKICAgICAgInRvcmNoIiwKICAgICAgImVuZW15IiwKICAgICAgImFnYWluIiwKICAgICAgInR5aW5nIiwKICAgICAgInBlc2t5IiwKICAgICAgImFsdGVyIiwKICAgICAgImdhemVyIiwKICAgICAgIm5vYmxlIiwKICAgICAgImV0aG9zIiwKICAgICAgImJyaWRlIiwKICAgICAgImV4dG9sIiwKICAgICAgImRlY29yIiwKICAgICAgImhvYmJ5IiwKICAgICAgImJlYXN0IiwKICAgICAgImlkaW9tIiwKICAgICAgInV0dGVyIiwKICAgICAgInRoZXNlIiwKICAgICAgInNpeHRoIiwKICAgICAgImFsYXJtIiwKICAgICAgImVyYXNlIiwKICAgICAgImVsZWd5IiwKICAgICAgInNwdW5rIiwKICAgICAgInBpcGVyIiwKICAgICAgInNjYWx5IiwKICAgICAgInNjb2xkIiwKICAgICAgImhlZnR5IiwKICAgICAgImNoaWNrIiwKICAgICAgInNvb3R5IiwKICAgICAgImNhbmFsIiwKICAgICAgIndoaW55IiwKICAgICAgInNsYXNoIiwKICAgICAgInF1YWtlIiwKICAgICAgImpvaW50IiwKICAgICAgInN3ZXB0IiwKICAgICAgInBydWRlIiwKICAgICAgImhlYXZ5IiwKICAgICAgIndpZWxkIiwKICAgICAgImZlbW1lIiwKICAgICAgImxhc3NvIiwKICAgICAgIm1haXplIiwKICAgICAgInNoYWxlIiwKICAgICAgInNjcmV3IiwKICAgICAgInNwcmVlIiwKICAgICAgInNtb2t5IiwKICAgICAgIndoaWZmIiwKICAgICAgInNjZW50IiwKICAgICAgImdsYWRlIiwKICAgICAgInNwZW50IiwKICAgICAgInByaXNtIiwKICAgICAgInN0b2tlIiwKICAgICAgInJpcGVyIiwKICAgICAgIm9yYml0IiwKICAgICAgImNvY29hIiwKICAgICAgImd1aWx0IiwKICAgICAgImh1bXVzIiwKICAgICAgInNodXNoIiwKICAgICAgInRhYmxlIiwKICAgICAgInNtaXJrIiwKICAgICAgIndyb25nIiwKICAgICAgIm5vaXN5IiwKICAgICAgImFsZXJ0IiwKICAgICAgInNoaW55IiwKICAgICAgImVsYXRlIiwKICAgICAgInJlc2luIiwKICAgICAgIndob2xlIiwKICAgICAgImh1bmNoIiwKICAgICAgInBpeGVsIiwKICAgICAgInBvbGFyIiwKICAgICAgImhvdGVsIiwKICAgICAgInN3b3JkIiwKICAgICAgImNsZWF0IiwKICAgICAgIm1hbmdvIiwKICAgICAgInJ1bWJhIiwKICAgICAgInB1ZmZ5IiwKICAgICAgImZpbGx5IiwKICAgICAgImJpbGx5IiwKICAgICAgImxlYXNoIiwKICAgICAgImNsb3V0IiwKICAgICAgImRhbmNlIiwKICAgICAgIm92YXRlIiwKICAgICAgImZhY2V0IiwKICAgICAgImNoaWxpIiwKICAgICAgInBhaW50IiwKICAgICAgImxpbmVyIiwKICAgICAgImN1cmlvIiwKICAgICAgInNhbHR5IiwKICAgICAgImF1ZGlvIiwKICAgICAgInNuYWtlIiwKICAgICAgImZhYmxlIiwKICAgICAgImNsb2FrIiwKICAgICAgIm5hdmVsIiwKICAgICAgInNwdXJ0IiwKICAgICAgInBlc3RvIiwKICAgICAgImJhbG15IiwKICAgICAgImZsYXNoIiwKICAgICAgInVud2VkIiwKICAgICAgImVhcmx5IiwKICAgICAgImNodXJuIiwKICAgICAgIndlZWR5IiwKICAgICAgInN0dW1wIiwKICAgICAgImxlYXNlIiwKICAgICAgIndpdHR5IiwKICAgICAgIndpbXB5IiwKICAgICAgInNwb29mIiwKICAgICAgInNhbmVyIiwKICAgICAgImJsZW5kIiwKICAgICAgInNhbHNhIiwKICAgICAgInRoaWNrIiwKICAgICAgIndhcnR5IiwKICAgICAgIm1hbmljIiwKICAgICAgImJsYXJlIiwKICAgICAgInNxdWliIiwKICAgICAgInNwb29uIiwKICAgICAgInByb2JlIiwKICAgICAgImNyZXBlIiwKICAgICAgImtuYWNrIiwKICAgICAgImZvcmNlIiwKICAgICAgImRlYnV0IiwKICAgICAgIm9yZGVyIiwKICAgICAgImhhc3RlIiwKICAgICAgInRlZXRoIiwKICAgICAgImFnZW50IiwKICAgICAgIndpZGVuIiwKICAgICAgImljaWx5IiwKICAgICAgInNsaWNlIiwKICAgICAgImluZ290IiwKICAgICAgImNsYXNoIiwKICAgICAgImp1cm9yIiwKICAgICAgImJsb29kIiwKICAgICAgImFib2RlIiwKICAgICAgInRocm93IiwKICAgICAgInVuaXR5IiwKICAgICAgInBpdm90IiwKICAgICAgInNsZXB0IiwKICAgICAgInRyb29wIiwKICAgICAgInNwYXJlIiwKICAgICAgInNld2VyIiwKICAgICAgInBhcnNlIiwKICAgICAgIm1vcnBoIiwKICAgICAgImNhY3RpIiwKICAgICAgInRhY2t5IiwKICAgICAgInNwb29sIiwKICAgICAgImRlbW9uIiwKICAgICAgIm1vb2R5IiwKICAgICAgImFubmV4IiwKICAgICAgImJlZ2luIiwKICAgICAgImZ1enp5IiwKICAgICAgInBhdGNoIiwKICAgICAgIndhdGVyIiwKICAgICAgImx1bXB5IiwKICAgICAgImFkbWluIiwKICAgICAgIm9tZWdhIiwKICAgICAgImxpbWl0IiwKICAgICAgInRhYmJ5IiwKICAgICAgIm1hY2hvIiwKICAgICAgImFpc2xlIiwKICAgICAgInNraWZmIiwKICAgICAgImJhc2lzIiwKICAgICAgInBsYW5rIiwKICAgICAgInZlcmdlIiwKICAgICAgImJvdGNoIiwKICAgICAgImNyYXdsIiwKICAgICAgImxvdXN5IiwKICAgICAgInNsYWluIiwKICAgICAgImN1YmljIiwKICAgICAgInJhaXNlIiwKICAgICAgIndyYWNrIiwKICAgICAgImd1aWRlIiwKICAgICAgImZvaXN0IiwKICAgICAgImNhbWVvIiwKICAgICAgInVuZGVyIiwKICAgICAgImFjdG9yIiwKICAgICAgInJldnVlIiwKICAgICAgImZyYXVkIiwKICAgICAgImhhcnB5IiwKICAgICAgInNjb29wIiwKICAgICAgImNsaW1iIiwKICAgICAgInJlZmVyIiwKICAgICAgIm9sZGVuIiwKICAgICAgImNsZXJrIiwKICAgICAgImRlYmFyIiwKICAgICAgInRhbGx5IiwKICAgICAgImV0aGljIiwKICAgICAgImNhaXJuIiwKICAgICAgInR1bGxlIiwKICAgICAgImdob3VsIiwKICAgICAgImhpbGx5IiwKICAgICAgImNydWRlIiwKICAgICAgImFwYXJ0IiwKICAgICAgInNjYWxlIiwKICAgICAgIm9sZGVyIiwKICAgICAgInBsYWluIiwKICAgICAgInNwZXJtIiwKICAgICAgImJyaW55IiwKICAgICAgImFiYm90IiwKICAgICAgInJlcnVuIiwKICAgICAgInF1ZXN0IiwKICAgICAgImNyaXNwIiwKICAgICAgImJvdW5kIiwKICAgICAgImJlZml0IiwKICAgICAgImRyYXduIiwKICAgICAgInN1aXRlIiwKICAgICAgIml0Y2h5IiwKICAgICAgImNoZWVyIiwKICAgICAgImJhZ2VsIiwKICAgICAgImd1ZXNzIiwKICAgICAgImJyb2FkIiwKICAgICAgImF4aW9tIiwKICAgICAgImNoYXJkIiwKICAgICAgImNhcHV0IiwKICAgICAgImxlYW50IiwKICAgICAgImhhcnNoIiwKICAgICAgImN1cnNlIiwKICAgICAgInByb3VkIiwKICAgICAgInN3aW5nIiwKICAgICAgIm9waW5lIiwKICAgICAgInRhc3RlIiwKICAgICAgImx1cHVzIiwKICAgICAgImd1bWJvIiwKICAgICAgIm1pbmVyIiwKICAgICAgImdyZWVuIiwKICAgICAgImNoYXNtIiwKICAgICAgImxpcGlkIiwKICAgICAgInRvcGljIiwKICAgICAgImFybW9yIiwKICAgICAgImJydXNoIiwKICAgICAgImNyYW5lIiwKICAgICAgIm11cmFsIiwKICAgICAgImFibGVkIiwKICAgICAgImhhYml0IiwKICAgICAgImJvc3N5IiwKICAgICAgIm1ha2VyIiwKICAgICAgImR1c2t5IiwKICAgICAgImRpenp5IiwKICAgICAgImxpdGhlIiwKICAgICAgImJyb29rIiwKICAgICAgImphenp5IiwKICAgICAgImZpZnR5IiwKICAgICAgInNlbnNlIiwKICAgICAgImdpYW50IiwKICAgICAgInN1cmx5IiwKICAgICAgImxlZ2FsIiwKICAgICAgImZhdGFsIiwKICAgICAgImZsdW5rIiwKICAgICAgImJlZ2FuIiwKICAgICAgInBydW5lIiwKICAgICAgInNtYWxsIiwKICAgICAgInNsYW50IiwKICAgICAgInNjb2ZmIiwKICAgICAgInRvcnVzIiwKICAgICAgIm5pbm55IiwKICAgICAgImNvdmV5IiwKICAgICAgInZpcGVyIiwKICAgICAgInRha2VuIiwKICAgICAgIm1vcmFsIiwKICAgICAgInZvZ3VlIiwKICAgICAgIm93aW5nIiwKICAgICAgInRva2VuIiwKICAgICAgImVudHJ5IiwKICAgICAgImJvb3RoIiwKICAgICAgInZvdGVyIiwKICAgICAgImNoaWRlIiwKICAgICAgImVsZmluIiwKICAgICAgImVib255IiwKICAgICAgIm5laWdoIiwKICAgICAgIm1pbmltIiwKICAgICAgIm1lbG9uIiwKICAgICAgImtuZWVkIiwKICAgICAgImRlY295IiwKICAgICAgInZvaWxhIiwKICAgICAgImFua2xlIiwKICAgICAgImFycm93IiwKICAgICAgIm11c2h5IiwKICAgICAgInRyaWJlIiwKICAgICAgImNlYXNlIiwKICAgICAgImVhZ2VyIiwKICAgICAgImJpcnRoIiwKICAgICAgImdyYXBoIiwKICAgICAgIm9kZGVyIiwKICAgICAgInRlcnJhIiwKICAgICAgIndlaXJkIiwKICAgICAgInRyaWVkIiwKICAgICAgImNsYWNrIiwKICAgICAgImNvbG9yIiwKICAgICAgInJvdWdoIiwKICAgICAgIndlaWdoIiwKICAgICAgInVuY3V0IiwKICAgICAgImxhZGxlIiwKICAgICAgInN0cmlwIiwKICAgICAgImNyYWZ0IiwKICAgICAgIm1pbnVzIiwKICAgICAgImRpY2V5IiwKICAgICAgInRpdGFuIiwKICAgICAgImx1Y2lkIiwKICAgICAgInZpY2FyIiwKICAgICAgImRyZXNzIiwKICAgICAgImRpdGNoIiwKICAgICAgImd5cHN5IiwKICAgICAgInBhc3RhIiwKICAgICAgInRhZmZ5IiwKICAgICAgImZsYW1lIiwKICAgICAgInN3b29wIiwKICAgICAgImFsb29mIiwKICAgICAgInNpZ2h0IiwKICAgICAgImJyb2tlIiwKICAgICAgInRlYXJ5IiwKICAgICAgImNoYXJ0IiwKICAgICAgInNpeHR5IiwKICAgICAgIndvcmR5IiwKICAgICAgInNoZWVyIiwKICAgICAgImxlcGVyIiwKICAgICAgIm5vc2V5IiwKICAgICAgImJ1bGdlIiwKICAgICAgInNhdm9yIiwKICAgICAgImNsYW1wIiwKICAgICAgImZ1bmt5IiwKICAgICAgImZvYW15IiwKICAgICAgInRveGljIiwKICAgICAgImJyYW5kIiwKICAgICAgInBsdW1iIiwKICAgICAgImRpbmd5IiwKICAgICAgImJ1dHRlIiwKICAgICAgImRyaWxsIiwKICAgICAgInRyaXBlIiwKICAgICAgImJpY2VwIiwKICAgICAgInRlbm9yIiwKICAgICAgImtyaWxsIiwKICAgICAgIndvcnNlIiwKICAgICAgImRyYW1hIiwKICAgICAgImh5ZW5hIiwKICAgICAgInRoaW5rIiwKICAgICAgInJhdGlvIiwKICAgICAgImNvYnJhIiwKICAgICAgImJhc2lsIiwKICAgICAgInNjcnVtIiwKICAgICAgImJ1c2VkIiwKICAgICAgInBob25lIiwKICAgICAgImNvdXJ0IiwKICAgICAgImNhbWVsIiwKICAgICAgInByb29mIiwKICAgICAgImhlYXJkIiwKICAgICAgImFuZ2VsIiwKICAgICAgInBldGFsIiwKICAgICAgInBvdXR5IiwKICAgICAgInRocm9iIiwKICAgICAgIm1heWJlIiwKICAgICAgImZldGFsIiwKICAgICAgInNwcmlnIiwKICAgICAgInNwaW5lIiwKICAgICAgInNob3V0IiwKICAgICAgImNhZGV0IiwKICAgICAgIm1hY3JvIiwKICAgICAgImRvZGd5IiwKICAgICAgInNhdHlyIiwKICAgICAgInJhcmVyIiwKICAgICAgImJpbmdlIiwKICAgICAgInRyZW5kIiwKICAgICAgIm51dHR5IiwKICAgICAgImxlYXB0IiwKICAgICAgImFtaXNzIiwKICAgICAgInNwbGl0IiwKICAgICAgIm15cnJoIiwKICAgICAgIndpZHRoIiwKICAgICAgInNvbmFyIiwKICAgICAgInRvd2VyIiwKICAgICAgImJhcm9uIiwKICAgICAgImZldmVyIiwKICAgICAgIndhdmVyIiwKICAgICAgInNwYXJrIiwKICAgICAgImJlbGllIiwKICAgICAgInNsb29wIiwKICAgICAgImV4cGVsIiwKICAgICAgInNtb3RlIiwKICAgICAgImJhbGVyIiwKICAgICAgImFib3ZlIiwKICAgICAgIm5vcnRoIiwKICAgICAgIndhZmVyIiwKICAgICAgInNjYW50IiwKICAgICAgImZyaWxsIiwKICAgICAgImF3YXNoIiwKICAgICAgInNuYWNrIiwKICAgICAgInNjb3dsIiwKICAgICAgImZyYWlsIiwKICAgICAgImRyaWZ0IiwKICAgICAgImxpbWJvIiwKICAgICAgImZlbmNlIiwKICAgICAgIm1vdGVsIiwKICAgICAgIm91bmNlIiwKICAgICAgIndyZWFrIiwKICAgICAgInJldmVsIiwKICAgICAgInRhbG9uIiwKICAgICAgInByaW9yIiwKICAgICAgImtuZWx0IiwKICAgICAgImNlbGxvIiwKICAgICAgImZsYWtlIiwKICAgICAgImRlYnVnIiwKICAgICAgImFub2RlIiwKICAgICAgImNyaW1lIiwKICAgICAgInNhbHZlIiwKICAgICAgInNjb3V0IiwKICAgICAgImltYnVlIiwKICAgICAgInBpbmt5IiwKICAgICAgInN0YXZlIiwKICAgICAgInZhZ3VlIiwKICAgICAgImNob2NrIiwKICAgICAgImZpZ2h0IiwKICAgICAgInZpZGVvIiwKICAgICAgInN0b25lIiwKICAgICAgInRlYWNoIiwKICAgICAgImNsZWZ0IiwKICAgICAgImZyb3N0IiwKICAgICAgInByYXduIiwKICAgICAgImJvb3R5IiwKICAgICAgInR3aXN0IiwKICAgICAgImFwbmVhIiwKICAgICAgInN0aWZmIiwKICAgICAgInBsYXphIiwKICAgICAgImxlZGdlIiwKICAgICAgInR3ZWFrIiwKICAgICAgImJvYXJkIiwKICAgICAgImdyYW50IiwKICAgICAgIm1lZGljIiwKICAgICAgImJhY29uIiwKICAgICAgImNhYmxlIiwKICAgICAgImJyYXdsIiwKICAgICAgInNsdW5rIiwKICAgICAgInJhc3B5IiwKICAgICAgImZvcnVtIiwKICAgICAgImRyb25lIiwKICAgICAgIndvbWVuIiwKICAgICAgIm11Y3VzIiwKICAgICAgImJvYXN0IiwKICAgICAgInRvZGR5IiwKICAgICAgImNvdmVuIiwKICAgICAgInR1bW9yIiwKICAgICAgInRydWVyIiwKICAgICAgIndyYXRoIiwKICAgICAgInN0YWxsIiwKICAgICAgInN0ZWFtIiwKICAgICAgImF4aWFsIiwKICAgICAgInB1cmVyIiwKICAgICAgImRhaWx5IiwKICAgICAgInRyYWlsIiwKICAgICAgIm5pY2hlIiwKICAgICAgIm1lYWx5IiwKICAgICAgImp1aWNlIiwKICAgICAgIm55bG9uIiwKICAgICAgInBsdW1wIiwKICAgICAgIm1lcnJ5IiwKICAgICAgImZsYWlsIiwKICAgICAgInBhcGFsIiwKICAgICAgIndoZWF0IiwKICAgICAgImJlcnJ5IiwKICAgICAgImNvd2VyIiwKICAgICAgImVyZWN0IiwKICAgICAgImJydXRlIiwKICAgICAgImxlZ2d5IiwKICAgICAgInNuaXBlIiwKICAgICAgInNpbmV3IiwKICAgICAgInNraWVyIiwKICAgICAgInBlbm55IiwKICAgICAgImp1bXB5IiwKICAgICAgInJhbGx5IiwKICAgICAgInVtYnJhIiwKICAgICAgInNjYXJ5IiwKICAgICAgIm1vZGVtIiwKICAgICAgImdyb3NzIiwKICAgICAgImF2aWFuIiwKICAgICAgImdyZWVkIiwKICAgICAgInNhdGluIiwKICAgICAgInRvbmljIiwKICAgICAgInBhcmthIiwKICAgICAgInNuaWZmIiwKICAgICAgImxpdmlkIiwKICAgICAgInN0YXJrIiwKICAgICAgInRydW1wIiwKICAgICAgImdpZGR5IiwKICAgICAgInJldXNlIiwKICAgICAgInRhYm9vIiwKICAgICAgImF2b2lkIiwKICAgICAgInF1b3RlIiwKICAgICAgImRldmlsIiwKICAgICAgImxpa2VuIiwKICAgICAgImdsb3NzIiwKICAgICAgImdheWVyIiwKICAgICAgImJlcmV0IiwKICAgICAgIm5vaXNlIiwKICAgICAgImdsYW5kIiwKICAgICAgImRlYWx0IiwKICAgICAgInNsaW5nIiwKICAgICAgInJ1bW9yIiwKICAgICAgIm9wZXJhIiwKICAgICAgInRoaWdoIiwKICAgICAgInRvbmdhIiwKICAgICAgImZsYXJlIiwKICAgICAgIndvdW5kIiwKICAgICAgIndoaXRlIiwKICAgICAgImJ1bGt5IiwKICAgICAgImV0dWRlIiwKICAgICAgImhvcnNlIiwKICAgICAgImNpcmNhIiwKICAgICAgInBhZGR5IiwKICAgICAgImluYm94IiwKICAgICAgImZpenp5IiwKICAgICAgImdyYWluIiwKICAgICAgImV4ZXJ0IiwKICAgICAgInN1cmdlIiwKICAgICAgImdsZWFtIiwKICAgICAgImJlbGxlIiwKICAgICAgInNhbHZvIiwKICAgICAgImNydXNoIiwKICAgICAgImZydWl0IiwKICAgICAgInNhcHB5IiwKICAgICAgInRha2VyIiwKICAgICAgInRyYWN0IiwKICAgICAgIm92aW5lIiwKICAgICAgInNwaWt5IiwKICAgICAgImZyYW5rIiwKICAgICAgInJlZWR5IiwKICAgICAgImZpbHRoIiwKICAgICAgInNwYXNtIiwKICAgICAgImhlYXZlIiwKICAgICAgIm1hbWJvIiwKICAgICAgInJpZ2h0IiwKICAgICAgImNsYW5rIiwKICAgICAgInRydXN0IiwKICAgICAgImx1bWVuIiwKICAgICAgImJvcm5lIiwKICAgICAgInNwb29rIiwKICAgICAgInNhdWNlIiwKICAgICAgImFtYmVyIiwKICAgICAgImxhdGhlIiwKICAgICAgImNhcmF0IiwKICAgICAgImNvcmVyIiwKICAgICAgImRpcnR5IiwKICAgICAgInNseWx5IiwKICAgICAgImFmZml4IiwKICAgICAgImFsbG95IiwKICAgICAgInRhaW50IiwKICAgICAgInNoZWVwIiwKICAgICAgImtpbmt5IiwKICAgICAgIndvb2x5IiwKICAgICAgIm1hdXZlIiwKICAgICAgImZsdW5nIiwKICAgICAgInlhY2h0IiwKICAgICAgImZyaWVkIiwKICAgICAgInF1YWlsIiwKICAgICAgImJydW50IiwKICAgICAgImdyaW15IiwKICAgICAgImN1cnZ5IiwKICAgICAgImNhZ2V5IiwKICAgICAgInJpbnNlIiwKICAgICAgImRldWNlIiwKICAgICAgInN0YXRlIiwKICAgICAgImdyYXNwIiwKICAgICAgIm1pbGt5IiwKICAgICAgImJpc29uIiwKICAgICAgImdyYWZ0IiwKICAgICAgInNhbmR5IiwKICAgICAgImJhc3RlIiwKICAgICAgImZsYXNrIiwKICAgICAgImhlZGdlIiwKICAgICAgImdpcmx5IiwKICAgICAgInN3YXNoIiwKICAgICAgImJvbmV5IiwKICAgICAgImNvdXBlIiwKICAgICAgImVuZG93IiwKICAgICAgImFiaG9yIiwKICAgICAgIndlbGNoIiwKICAgICAgImJsYWRlIiwKICAgICAgInRpZ2h0IiwKICAgICAgImdlZXNlIiwKICAgICAgIm1pc2VyIiwKICAgICAgIm1pcnRoIiwKICAgICAgImNsb3VkIiwKICAgICAgImNhYmFsIiwKICAgICAgImxlZWNoIiwKICAgICAgImNsb3NlIiwKICAgICAgInRlbnRoIiwKICAgICAgInBlY2FuIiwKICAgICAgImRyb2l0IiwKICAgICAgImdyYWlsIiwKICAgICAgImNsb25lIiwKICAgICAgImd1aXNlIiwKICAgICAgInJhbHBoIiwKICAgICAgInRhbmdvIiwKICAgICAgImJpZGR5IiwKICAgICAgInNtaXRoIiwKICAgICAgIm1vd2VyIiwKICAgICAgInBheWVlIiwKICAgICAgInNlcmlmIiwKICAgICAgImRyYXBlIiwKICAgICAgImZpZnRoIiwKICAgICAgInNwYW5rIiwKICAgICAgImdsYXplIiwKICAgICAgImFsbG90IiwKICAgICAgInRydWNrIiwKICAgICAgImtheWFrIiwKICAgICAgInZpcnVzIiwKICAgICAgInRlc3R5IiwKICAgICAgInRlcGVlIiwKICAgICAgImZ1bGx5IiwKICAgICAgInpvbmFsIiwKICAgICAgIm1ldHJvIiwKICAgICAgImN1cnJ5IiwKICAgICAgImdyYW5kIiwKICAgICAgImJhbmpvIiwKICAgICAgImF4aW9uIiwKICAgICAgImJlemVsIiwKICAgICAgIm9jY3VyIiwKICAgICAgImNoYWluIiwKICAgICAgIm5hc2FsIiwKICAgICAgImdvb2V5IiwKICAgICAgImZpbGVyIiwKICAgICAgImJyYWNlIiwKICAgICAgImFsbGF5IiwKICAgICAgInB1YmljIiwKICAgICAgInJhdmVuIiwKICAgICAgInBsZWFkIiwKICAgICAgImduYXNoIiwKICAgICAgImZsYWt5IiwKICAgICAgIm11bmNoIiwKICAgICAgImR1bGx5IiwKICAgICAgImVraW5nIiwKICAgICAgInRoaW5nIiwKICAgICAgInNsaW5rIiwKICAgICAgImh1cnJ5IiwKICAgICAgInRoZWZ0IiwKICAgICAgInNob3JuIiwKICAgICAgInB5Z215IiwKICAgICAgInJhbmNoIiwKICAgICAgIndyaW5nIiwKICAgICAgImxlbW9uIiwKICAgICAgInNob3JlIiwKICAgICAgIm1hbW1hIiwKICAgICAgImZyb3plIiwKICAgICAgIm5ld2VyIiwKICAgICAgInN0eWxlIiwKICAgICAgIm1vb3NlIiwKICAgICAgImFudGljIiwKICAgICAgImRyb3duIiwKICAgICAgInZlZ2FuIiwKICAgICAgImNoZXNzIiwKICAgICAgImd1cHB5IiwKICAgICAgInVuaW9uIiwKICAgICAgImxldmVyIiwKICAgICAgImxvcnJ5IiwKICAgICAgImltYWdlIiwKICAgICAgImNhYmJ5IiwKICAgICAgImRydWlkIiwKICAgICAgImV4YWN0IiwKICAgICAgInRydXRoIiwKICAgICAgImRvcGV5IiwKICAgICAgInNwZWFyIiwKICAgICAgImNyaWVkIiwKICAgICAgImNoaW1lIiwKICAgICAgImNyb255IiwKICAgICAgInN0dW5rIiwKICAgICAgInRpbWlkIiwKICAgICAgImJhdGNoIiwKICAgICAgImdhdWdlIiwKICAgICAgInJvdG9yIiwKICAgICAgImNyYWNrIiwKICAgICAgImN1cnZlIiwKICAgICAgImxhdHRlIiwKICAgICAgIndpdGNoIiwKICAgICAgImJ1bmNoIiwKICAgICAgInJlcGVsIiwKICAgICAgImFudmlsIiwKICAgICAgInNvYXB5IiwKICAgICAgIm1ldGVyIiwKICAgICAgImJyb3RoIiwKICAgICAgIm1hZGx5IiwKICAgICAgImRyaWVkIiwKICAgICAgInNjZW5lIiwKICAgICAgImtub3duIiwKICAgICAgIm1hZ21hIiwKICAgICAgInJvb3N0IiwKICAgICAgIndvbWFuIiwKICAgICAgInRob25nIiwKICAgICAgInB1bmNoIiwKICAgICAgInBhc3R5IiwKICAgICAgImRvd255IiwKICAgICAgImtuZWFkIiwKICAgICAgIndoaXJsIiwKICAgICAgInJhcGlkIiwKICAgICAgImNsYW5nIiwKICAgICAgImFuZ2VyIiwKICAgICAgImRyaXZlIiwKICAgICAgImdvb2Z5IiwKICAgICAgImVtYWlsIiwKICAgICAgIm11c2ljIiwKICAgICAgInN0dWZmIiwKICAgICAgImJsZWVwIiwKICAgICAgInJpZGVyIiwKICAgICAgIm1lY2NhIiwKICAgICAgImZvbGlvIiwKICAgICAgInNldHVwIiwKICAgICAgInZlcnNvIiwKICAgICAgInF1YXNoIiwKICAgICAgImZhdW5hIiwKICAgICAgImd1bW15IiwKICAgICAgImhhcHB5IiwKICAgICAgIm5ld2x5IiwKICAgICAgImZ1c3N5IiwKICAgICAgInJlbGljIiwKICAgICAgImd1YXZhIiwKICAgICAgInJhdHR5IiwKICAgICAgImZ1ZGdlIiwKICAgICAgImZlbXVyIiwKICAgICAgImNoaXJwIiwKICAgICAgImZvcnRlIiwKICAgICAgImFsaWJpIiwKICAgICAgIndoaW5lIiwKICAgICAgInBldHR5IiwKICAgICAgImdvbGx5IiwKICAgICAgInBsYWl0IiwKICAgICAgImZsZWNrIiwKICAgICAgImZlbG9uIiwKICAgICAgImdvdXJkIiwKICAgICAgImJyb3duIiwKICAgICAgInRocnVtIiwKICAgICAgImZpY3VzIiwKICAgICAgInN0YXNoIiwKICAgICAgImRlY3J5IiwKICAgICAgIndpc2VyIiwKICAgICAgImp1bnRhIiwKICAgICAgInZpc29yIiwKICAgICAgImRhdW50IiwKICAgICAgInNjcmVlIiwKICAgICAgImltcGVsIiwKICAgICAgImF3YWl0IiwKICAgICAgInByZXNzIiwKICAgICAgIndob3NlIiwKICAgICAgInR1cmJvIiwKICAgICAgInN0b29wIiwKICAgICAgInNwZWFrIiwKICAgICAgIm1hbmd5IiwKICAgICAgImV5aW5nIiwKICAgICAgImlubGV0IiwKICAgICAgImNyb25lIiwKICAgICAgInB1bHNlIiwKICAgICAgIm1vc3N5IiwKICAgICAgInN0YWlkIiwKICAgICAgImhlbmNlIiwKICAgICAgInBpbmNoIiwKICAgICAgInRlZGR5IiwKICAgICAgInN1bGx5IiwKICAgICAgInNub3JlIiwKICAgICAgInJpcGVuIiwKICAgICAgInNub3d5IiwKICAgICAgImF0dGljIiwKICAgICAgImdvaW5nIiwKICAgICAgImxlYWNoIiwKICAgICAgIm1vdXRoIiwKICAgICAgImhvdW5kIiwKICAgICAgImNsdW1wIiwKICAgICAgInRvbmFsIiwKICAgICAgImJpZ290IiwKICAgICAgInBlcmlsIiwKICAgICAgInBpZWNlIiwKICAgICAgImJsYW1lIiwKICAgICAgImhhdXRlIiwKICAgICAgInNwaWVkIiwKICAgICAgInVuZGlkIiwKICAgICAgImludHJvIiwKICAgICAgImJhc2FsIiwKICAgICAgInJvZGVvIiwKICAgICAgImd1YXJkIiwKICAgICAgInN0ZWVyIiwKICAgICAgImxvYW15IiwKICAgICAgInNjYW1wIiwKICAgICAgInNjcmFtIiwKICAgICAgIm1hbmx5IiwKICAgICAgImhlbGxvIiwKICAgICAgInZhdW50IiwKICAgICAgIm9yZ2FuIiwKICAgICAgImZlcmFsIiwKICAgICAgImtub2NrIiwKICAgICAgImV4dHJhIiwKICAgICAgImNvbmRvIiwKICAgICAgImFkYXB0IiwKICAgICAgIndpbGx5IiwKICAgICAgInBvbGthIiwKICAgICAgInJheW9uIiwKICAgICAgInNraXJ0IiwKICAgICAgImZhaXRoIiwKICAgICAgInRvcnNvIiwKICAgICAgIm1hdGNoIiwKICAgICAgIm1lcmN5IiwKICAgICAgInRlcGlkIiwKICAgICAgInNsZWVrIiwKICAgICAgInJpc2VyIiwKICAgICAgInR3aXh0IiwKICAgICAgInBlYWNlIiwKICAgICAgImZsdXNoIiwKICAgICAgImNhdHR5IiwKICAgICAgImxvZ2luIiwKICAgICAgImVqZWN0IiwKICAgICAgInJvZ2VyIiwKICAgICAgInJpdmFsIiwKICAgICAgInVudGllIiwKICAgICAgInJlZml0IiwKICAgICAgImFvcnRhIiwKICAgICAgImFkdWx0IiwKICAgICAgImp1ZGdlIiwKICAgICAgInJvd2VyIiwKICAgICAgImFydHN5IiwKICAgICAgInJ1cmFsIiwKICAgICAgInNoYXZlIiwKICAgICAgImJvYmJ5IiwKICAgICAgImVjbGF0IiwKICAgICAgImZlbGxhIiwKICAgICAgImdhaWx5IiwKICAgICAgImhhcnJ5IiwKICAgICAgImhhc3R5IiwKICAgICAgImh5ZHJvIiwKICAgICAgImxpZWdlIiwKICAgICAgIm9jdGFsIiwKICAgICAgIm9tYnJlIiwKICAgICAgInBheWVyIiwKICAgICAgInNvb3RoIiwKICAgICAgInVuc2V0IiwKICAgICAgInVubGl0IiwKICAgICAgInZvbWl0IiwKICAgICAgImZhbm55IiwKICAgICAgImZldHVzIiwKICAgICAgImJ1dGNoIiwKICAgICAgInN0YWxrIiwKICAgICAgImZsYWNrIiwKICAgICAgIndpZG93IiwKICAgICAgImF1Z3VyIiwKICAgIF0sCiAgICBiZSA9IFsKICAgICAgImFhaGVkIiwKICAgICAgImFhbGlpIiwKICAgICAgImFhcmdoIiwKICAgICAgImFhcnRpIiwKICAgICAgImFiYWNhIiwKICAgICAgImFiYWNpIiwKICAgICAgImFiYWNzIiwKICAgICAgImFiYWZ0IiwKICAgICAgImFiYWthIiwKICAgICAgImFiYW1wIiwKICAgICAgImFiYW5kIiwKICAgICAgImFiYXNoIiwKICAgICAgImFiYXNrIiwKICAgICAgImFiYXlhIiwKICAgICAgImFiYmFzIiwKICAgICAgImFiYmVkIiwKICAgICAgImFiYmVzIiwKICAgICAgImFiY2VlIiwKICAgICAgImFiZWFtIiwKICAgICAgImFiZWFyIiwKICAgICAgImFiZWxlIiwKICAgICAgImFiZXJzIiwKICAgICAgImFiZXRzIiwKICAgICAgImFiaWVzIiwKICAgICAgImFibGVyIiwKICAgICAgImFibGVzIiwKICAgICAgImFibGV0IiwKICAgICAgImFibG93IiwKICAgICAgImFibWhvIiwKICAgICAgImFib2htIiwKICAgICAgImFib2lsIiwKICAgICAgImFib21hIiwKICAgICAgImFib29uIiwKICAgICAgImFib3JkIiwKICAgICAgImFib3JlIiwKICAgICAgImFicmFtIiwKICAgICAgImFicmF5IiwKICAgICAgImFicmltIiwKICAgICAgImFicmluIiwKICAgICAgImFicmlzIiwKICAgICAgImFic2V5IiwKICAgICAgImFic2l0IiwKICAgICAgImFidW5hIiwKICAgICAgImFidW5lIiwKICAgICAgImFidXRzIiwKICAgICAgImFidXp6IiwKICAgICAgImFieWVzIiwKICAgICAgImFieXNtIiwKICAgICAgImFjYWlzIiwKICAgICAgImFjYXJpIiwKICAgICAgImFjY2FzIiwKICAgICAgImFjY295IiwKICAgICAgImFjZXJiIiwKICAgICAgImFjZXJzIiwKICAgICAgImFjZXRhIiwKICAgICAgImFjaGFyIiwKICAgICAgImFjaGVkIiwKICAgICAgImFjaGVzIiwKICAgICAgImFjaG9vIiwKICAgICAgImFjaWRzIiwKICAgICAgImFjaWR5IiwKICAgICAgImFjaW5nIiwKICAgICAgImFjaW5pIiwKICAgICAgImFja2VlIiwKICAgICAgImFja2VyIiwKICAgICAgImFjbWVzIiwKICAgICAgImFjbWljIiwKICAgICAgImFjbmVkIiwKICAgICAgImFjbmVzIiwKICAgICAgImFjb2NrIiwKICAgICAgImFjb2xkIiwKICAgICAgImFjcmVkIiwKICAgICAgImFjcmVzIiwKICAgICAgImFjcm9zIiwKICAgICAgImFjdGVkIiwKICAgICAgImFjdGluIiwKICAgICAgImFjdG9uIiwKICAgICAgImFjeWxzIiwKICAgICAgImFkYXdzIiwKICAgICAgImFkYXlzIiwKICAgICAgImFkYm90IiwKICAgICAgImFkZGF4IiwKICAgICAgImFkZGVkIiwKICAgICAgImFkZGVyIiwKICAgICAgImFkZGlvIiwKICAgICAgImFkZGxlIiwKICAgICAgImFkZWVtIiwKICAgICAgImFkaGFuIiwKICAgICAgImFkaWV1IiwKICAgICAgImFkaW9zIiwKICAgICAgImFkaXRzIiwKICAgICAgImFkbWFuIiwKICAgICAgImFkbWVuIiwKICAgICAgImFkbWl4IiwKICAgICAgImFkb2JvIiwKICAgICAgImFkb3duIiwKICAgICAgImFkb3plIiwKICAgICAgImFkcmFkIiwKICAgICAgImFkcmVkIiwKICAgICAgImFkc3VtIiwKICAgICAgImFkdWtpIiwKICAgICAgImFkdW5jIiwKICAgICAgImFkdXN0IiwKICAgICAgImFkdmV3IiwKICAgICAgImFkeXRhIiwKICAgICAgImFkemVkIiwKICAgICAgImFkemVzIiwKICAgICAgImFlY2lhIiwKICAgICAgImFlZGVzIiwKICAgICAgImFlZ2lzIiwKICAgICAgImFlb25zIiwKICAgICAgImFlcmllIiwKICAgICAgImFlcm9zIiwKICAgICAgImFlc2lyIiwKICAgICAgImFmYWxkIiwKICAgICAgImFmYXJhIiwKICAgICAgImFmYXJzIiwKICAgICAgImFmZWFyIiwKICAgICAgImFmbGFqIiwKICAgICAgImFmb3JlIiwKICAgICAgImFmcml0IiwKICAgICAgImFmcm9zIiwKICAgICAgImFnYW1hIiwKICAgICAgImFnYW1pIiwKICAgICAgImFnYXJzIiwKICAgICAgImFnYXN0IiwKICAgICAgImFnYXZlIiwKICAgICAgImFnYXplIiwKICAgICAgImFnZW5lIiwKICAgICAgImFnZXJzIiwKICAgICAgImFnZ2VyIiwKICAgICAgImFnZ2llIiwKICAgICAgImFnZ3JpIiwKICAgICAgImFnZ3JvIiwKICAgICAgImFnZ3J5IiwKICAgICAgImFnaGFzIiwKICAgICAgImFnaWxhIiwKICAgICAgImFnaW9zIiwKICAgICAgImFnaXNtIiwKICAgICAgImFnaXN0IiwKICAgICAgImFnaXRhIiwKICAgICAgImFnbGVlIiwKICAgICAgImFnbGV0IiwKICAgICAgImFnbGV5IiwKICAgICAgImFnbG9vIiwKICAgICAgImFnbHVzIiwKICAgICAgImFnbWFzIiwKICAgICAgImFnb2dlIiwKICAgICAgImFnb25lIiwKICAgICAgImFnb25zIiwKICAgICAgImFnb29kIiwKICAgICAgImFnb3JhIiwKICAgICAgImFncmlhIiwKICAgICAgImFncmluIiwKICAgICAgImFncm9zIiwKICAgICAgImFndWVkIiwKICAgICAgImFndWVzIiwKICAgICAgImFndW5hIiwKICAgICAgImFndXRpIiwKICAgICAgImFoZWFwIiwKICAgICAgImFoZW50IiwKICAgICAgImFoaWdoIiwKICAgICAgImFoaW5kIiwKICAgICAgImFoaW5nIiwKICAgICAgImFoaW50IiwKICAgICAgImFob2xkIiwKICAgICAgImFodWxsIiwKICAgICAgImFodXJ1IiwKICAgICAgImFpZGFzIiwKICAgICAgImFpZGVkIiwKICAgICAgImFpZGVzIiwKICAgICAgImFpZG9pIiwKICAgICAgImFpZG9zIiwKICAgICAgImFpZXJ5IiwKICAgICAgImFpZ2FzIiwKICAgICAgImFpZ2h0IiwKICAgICAgImFpbGVkIiwKICAgICAgImFpbWVkIiwKICAgICAgImFpbWVyIiwKICAgICAgImFpbmVlIiwKICAgICAgImFpbmdhIiwKICAgICAgImFpb2xpIiwKICAgICAgImFpcmVkIiwKICAgICAgImFpcmVyIiwKICAgICAgImFpcm5zIiwKICAgICAgImFpcnRoIiwKICAgICAgImFpcnRzIiwKICAgICAgImFpdGNoIiwKICAgICAgImFpdHVzIiwKICAgICAgImFpdmVyIiwKICAgICAgImFpeWVlIiwKICAgICAgImFpemxlIiwKICAgICAgImFqaWVzIiwKICAgICAgImFqaXZhIiwKICAgICAgImFqdWdhIiwKICAgICAgImFqd2FuIiwKICAgICAgImFrZWVzIiwKICAgICAgImFrZWxhIiwKICAgICAgImFrZW5lIiwKICAgICAgImFraW5nIiwKICAgICAgImFraXRhIiwKICAgICAgImFra2FzIiwKICAgICAgImFsYWFwIiwKICAgICAgImFsYWNrIiwKICAgICAgImFsYW1vIiwKICAgICAgImFsYW5kIiwKICAgICAgImFsYW5lIiwKICAgICAgImFsYW5nIiwKICAgICAgImFsYW5zIiwKICAgICAgImFsYW50IiwKICAgICAgImFsYXBhIiwKICAgICAgImFsYXBzIiwKICAgICAgImFsYXJ5IiwKICAgICAgImFsYXRlIiwKICAgICAgImFsYXlzIiwKICAgICAgImFsYmFzIiwKICAgICAgImFsYmVlIiwKICAgICAgImFsY2lkIiwKICAgICAgImFsY29zIiwKICAgICAgImFsZGVhIiwKICAgICAgImFsZGVyIiwKICAgICAgImFsZG9sIiwKICAgICAgImFsZWNrIiwKICAgICAgImFsZWNzIiwKICAgICAgImFsZWZzIiwKICAgICAgImFsZWZ0IiwKICAgICAgImFsZXBoIiwKICAgICAgImFsZXdzIiwKICAgICAgImFsZXllIiwKICAgICAgImFsZmFzIiwKICAgICAgImFsZ2FsIiwKICAgICAgImFsZ2FzIiwKICAgICAgImFsZ2lkIiwKICAgICAgImFsZ2luIiwKICAgICAgImFsZ29yIiwKICAgICAgImFsZ3VtIiwKICAgICAgImFsaWFzIiwKICAgICAgImFsaWZzIiwKICAgICAgImFsaW5lIiwKICAgICAgImFsaXN0IiwKICAgICAgImFsaXlhIiwKICAgICAgImFsa2llIiwKICAgICAgImFsa29zIiwKICAgICAgImFsa3lkIiwKICAgICAgImFsa3lsIiwKICAgICAgImFsbGVlIiwKICAgICAgImFsbGVsIiwKICAgICAgImFsbGlzIiwKICAgICAgImFsbG9kIiwKICAgICAgImFsbHlsIiwKICAgICAgImFsbWFoIiwKICAgICAgImFsbWFzIiwKICAgICAgImFsbWVoIiwKICAgICAgImFsbWVzIiwKICAgICAgImFsbXVkIiwKICAgICAgImFsbXVnIiwKICAgICAgImFsb2RzIiwKICAgICAgImFsb2VkIiwKICAgICAgImFsb2VzIiwKICAgICAgImFsb2hhIiwKICAgICAgImFsb2luIiwKICAgICAgImFsb29zIiwKICAgICAgImFsb3dlIiwKICAgICAgImFsdGhvIiwKICAgICAgImFsdG9zIiwKICAgICAgImFsdWxhIiwKICAgICAgImFsdW1zIiwKICAgICAgImFsdXJlIiwKICAgICAgImFsdmFyIiwKICAgICAgImFsd2F5IiwKICAgICAgImFtYWhzIiwKICAgICAgImFtYWluIiwKICAgICAgImFtYXRlIiwKICAgICAgImFtYXV0IiwKICAgICAgImFtYmFuIiwKICAgICAgImFtYml0IiwKICAgICAgImFtYm9zIiwKICAgICAgImFtYnJ5IiwKICAgICAgImFtZWJhIiwKICAgICAgImFtZWVyIiwKICAgICAgImFtZW5lIiwKICAgICAgImFtZW5zIiwKICAgICAgImFtZW50IiwKICAgICAgImFtaWFzIiwKICAgICAgImFtaWNlIiwKICAgICAgImFtaWNpIiwKICAgICAgImFtaWRlIiwKICAgICAgImFtaWRvIiwKICAgICAgImFtaWRzIiwKICAgICAgImFtaWVzIiwKICAgICAgImFtaWdhIiwKICAgICAgImFtaWdvIiwKICAgICAgImFtaW5lIiwKICAgICAgImFtaW5vIiwKICAgICAgImFtaW5zIiwKICAgICAgImFtaXJzIiwKICAgICAgImFtbGFzIiwKICAgICAgImFtbWFuIiwKICAgICAgImFtbW9uIiwKICAgICAgImFtbW9zIiwKICAgICAgImFtbmlhIiwKICAgICAgImFtbmljIiwKICAgICAgImFtbmlvIiwKICAgICAgImFtb2tzIiwKICAgICAgImFtb2xlIiwKICAgICAgImFtb3J0IiwKICAgICAgImFtb3VyIiwKICAgICAgImFtb3ZlIiwKICAgICAgImFtb3d0IiwKICAgICAgImFtcGVkIiwKICAgICAgImFtcHVsIiwKICAgICAgImFtcml0IiwKICAgICAgImFtdWNrIiwKICAgICAgImFteWxzIiwKICAgICAgImFuYW5hIiwKICAgICAgImFuYXRhIiwKICAgICAgImFuY2hvIiwKICAgICAgImFuY2xlIiwKICAgICAgImFuY29uIiwKICAgICAgImFuZHJvIiwKICAgICAgImFuZWFyIiwKICAgICAgImFuZWxlIiwKICAgICAgImFuZW50IiwKICAgICAgImFuZ2FzIiwKICAgICAgImFuZ2xvIiwKICAgICAgImFuaWdoIiwKICAgICAgImFuaWxlIiwKICAgICAgImFuaWxzIiwKICAgICAgImFuaW1hIiwKICAgICAgImFuaW1pIiwKICAgICAgImFuaW9uIiwKICAgICAgImFuaXNlIiwKICAgICAgImFua2VyIiwKICAgICAgImFua2hzIiwKICAgICAgImFua3VzIiwKICAgICAgImFubGFzIiwKICAgICAgImFubmFsIiwKICAgICAgImFubmFzIiwKICAgICAgImFubmF0IiwKICAgICAgImFub2FzIiwKICAgICAgImFub2xlIiwKICAgICAgImFub215IiwKICAgICAgImFuc2FlIiwKICAgICAgImFudGFlIiwKICAgICAgImFudGFyIiwKICAgICAgImFudGFzIiwKICAgICAgImFudGVkIiwKICAgICAgImFudGVzIiwKICAgICAgImFudGlzIiwKICAgICAgImFudHJhIiwKICAgICAgImFudHJlIiwKICAgICAgImFudHN5IiwKICAgICAgImFudXJhIiwKICAgICAgImFueW9uIiwKICAgICAgImFwYWNlIiwKICAgICAgImFwYWdlIiwKICAgICAgImFwYWlkIiwKICAgICAgImFwYXlkIiwKICAgICAgImFwYXlzIiwKICAgICAgImFwZWFrIiwKICAgICAgImFwZWVrIiwKICAgICAgImFwZXJzIiwKICAgICAgImFwZXJ0IiwKICAgICAgImFwZXJ5IiwKICAgICAgImFwZ2FyIiwKICAgICAgImFwaGlzIiwKICAgICAgImFwaWFuIiwKICAgICAgImFwaW9sIiwKICAgICAgImFwaXNoIiwKICAgICAgImFwaXNtIiwKICAgICAgImFwb2RlIiwKICAgICAgImFwb2RzIiwKICAgICAgImFwb29wIiwKICAgICAgImFwb3J0IiwKICAgICAgImFwcGFsIiwKICAgICAgImFwcGF5IiwKICAgICAgImFwcGVsIiwKICAgICAgImFwcHJvIiwKICAgICAgImFwcHVpIiwKICAgICAgImFwcHV5IiwKICAgICAgImFwcmVzIiwKICAgICAgImFwc2VzIiwKICAgICAgImFwc2lzIiwKICAgICAgImFwc29zIiwKICAgICAgImFwdGVkIiwKICAgICAgImFwdGVyIiwKICAgICAgImFxdWFlIiwKICAgICAgImFxdWFzIiwKICAgICAgImFyYWJhIiwKICAgICAgImFyYWtzIiwKICAgICAgImFyYW1lIiwKICAgICAgImFyYXJzIiwKICAgICAgImFyYmFzIiwKICAgICAgImFyY2VkIiwKICAgICAgImFyY2hpIiwKICAgICAgImFyY29zIiwKICAgICAgImFyY3VzIiwKICAgICAgImFyZGViIiwKICAgICAgImFyZHJpIiwKICAgICAgImFyZWFkIiwKICAgICAgImFyZWFlIiwKICAgICAgImFyZWFsIiwKICAgICAgImFyZWFyIiwKICAgICAgImFyZWFzIiwKICAgICAgImFyZWNhIiwKICAgICAgImFyZWRkIiwKICAgICAgImFyZWRlIiwKICAgICAgImFyZWZ5IiwKICAgICAgImFyZWljIiwKICAgICAgImFyZW5lIiwKICAgICAgImFyZXBhIiwKICAgICAgImFyZXJlIiwKICAgICAgImFyZXRlIiwKICAgICAgImFyZXRzIiwKICAgICAgImFyZXR0IiwKICAgICAgImFyZ2FsIiwKICAgICAgImFyZ2FuIiwKICAgICAgImFyZ2lsIiwKICAgICAgImFyZ2xlIiwKICAgICAgImFyZ29sIiwKICAgICAgImFyZ29uIiwKICAgICAgImFyZ290IiwKICAgICAgImFyZ3VzIiwKICAgICAgImFyaGF0IiwKICAgICAgImFyaWFzIiwKICAgICAgImFyaWVsIiwKICAgICAgImFyaWtpIiwKICAgICAgImFyaWxzIiwKICAgICAgImFyaW90IiwKICAgICAgImFyaXNoIiwKICAgICAgImFya2VkIiwKICAgICAgImFybGVkIiwKICAgICAgImFybGVzIiwKICAgICAgImFybWVkIiwKICAgICAgImFybWVyIiwKICAgICAgImFybWV0IiwKICAgICAgImFybWlsIiwKICAgICAgImFybmFzIiwKICAgICAgImFybnV0IiwKICAgICAgImFyb2JhIiwKICAgICAgImFyb2hhIiwKICAgICAgImFyb2lkIiwKICAgICAgImFycGFzIiwKICAgICAgImFycGVuIiwKICAgICAgImFycmFoIiwKICAgICAgImFycmFzIiwKICAgICAgImFycmV0IiwKICAgICAgImFycmlzIiwKICAgICAgImFycm96IiwKICAgICAgImFyc2VkIiwKICAgICAgImFyc2VzIiwKICAgICAgImFyc2V5IiwKICAgICAgImFyc2lzIiwKICAgICAgImFydGFsIiwKICAgICAgImFydGVsIiwKICAgICAgImFydGljIiwKICAgICAgImFydGlzIiwKICAgICAgImFydWhlIiwKICAgICAgImFydW1zIiwKICAgICAgImFydmFsIiwKICAgICAgImFydmVlIiwKICAgICAgImFydm9zIiwKICAgICAgImFyeWxzIiwKICAgICAgImFzYW5hIiwKICAgICAgImFzY29uIiwKICAgICAgImFzY3VzIiwKICAgICAgImFzZGljIiwKICAgICAgImFzaGVkIiwKICAgICAgImFzaGVzIiwKICAgICAgImFzaGV0IiwKICAgICAgImFza2VkIiwKICAgICAgImFza2VyIiwKICAgICAgImFza29pIiwKICAgICAgImFza29zIiwKICAgICAgImFzcGVuIiwKICAgICAgImFzcGVyIiwKICAgICAgImFzcGljIiwKICAgICAgImFzcGllIiwKICAgICAgImFzcGlzIiwKICAgICAgImFzcHJvIiwKICAgICAgImFzc2FpIiwKICAgICAgImFzc2FtIiwKICAgICAgImFzc2VzIiwKICAgICAgImFzc2V6IiwKICAgICAgImFzc290IiwKICAgICAgImFzdGVyIiwKICAgICAgImFzdGlyIiwKICAgICAgImFzdHVuIiwKICAgICAgImFzdXJhIiwKICAgICAgImFzd2F5IiwKICAgICAgImFzd2ltIiwKICAgICAgImFzeWxhIiwKICAgICAgImF0YXBzIiwKICAgICAgImF0YXh5IiwKICAgICAgImF0aWdpIiwKICAgICAgImF0aWx0IiwKICAgICAgImF0aW15IiwKICAgICAgImF0bGFzIiwKICAgICAgImF0bWFuIiwKICAgICAgImF0bWFzIiwKICAgICAgImF0bW9zIiwKICAgICAgImF0b2NzIiwKICAgICAgImF0b2tlIiwKICAgICAgImF0b2tzIiwKICAgICAgImF0b21zIiwKICAgICAgImF0b215IiwKICAgICAgImF0b255IiwKICAgICAgImF0b3B5IiwKICAgICAgImF0cmlhIiwKICAgICAgImF0cmlwIiwKICAgICAgImF0dGFwIiwKICAgICAgImF0dGFyIiwKICAgICAgImF0dWFzIiwKICAgICAgImF1ZGFkIiwKICAgICAgImF1Z2VyIiwKICAgICAgImF1Z2h0IiwKICAgICAgImF1bGFzIiwKICAgICAgImF1bGljIiwKICAgICAgImF1bG9pIiwKICAgICAgImF1bG9zIiwKICAgICAgImF1bWlsIiwKICAgICAgImF1bmVzIiwKICAgICAgImF1bnRzIiwKICAgICAgImF1cmFlIiwKICAgICAgImF1cmFsIiwKICAgICAgImF1cmFyIiwKICAgICAgImF1cmFzIiwKICAgICAgImF1cmVpIiwKICAgICAgImF1cmVzIiwKICAgICAgImF1cmljIiwKICAgICAgImF1cmlzIiwKICAgICAgImF1cnVtIiwKICAgICAgImF1dG9zIiwKICAgICAgImF1eGluIiwKICAgICAgImF2YWxlIiwKICAgICAgImF2YW50IiwKICAgICAgImF2YXN0IiwKICAgICAgImF2ZWxzIiwKICAgICAgImF2ZW5zIiwKICAgICAgImF2ZXJzIiwKICAgICAgImF2Z2FzIiwKICAgICAgImF2aW5lIiwKICAgICAgImF2aW9uIiwKICAgICAgImF2aXNlIiwKICAgICAgImF2aXNvIiwKICAgICAgImF2aXplIiwKICAgICAgImF2b3dzIiwKICAgICAgImF2eXplIiwKICAgICAgImF3YXJuIiwKICAgICAgImF3YXRvIiwKICAgICAgImF3YXZlIiwKICAgICAgImF3YXlzIiwKICAgICAgImF3ZGxzIiwKICAgICAgImF3ZWVsIiwKICAgICAgImF3ZXRvIiwKICAgICAgImF3aW5nIiwKICAgICAgImF3bXJ5IiwKICAgICAgImF3bmVkIiwKICAgICAgImF3bmVyIiwKICAgICAgImF3b2xzIiwKICAgICAgImF3b3JrIiwKICAgICAgImF4ZWxzIiwKICAgICAgImF4aWxlIiwKICAgICAgImF4aWxzIiwKICAgICAgImF4aW5nIiwKICAgICAgImF4aXRlIiwKICAgICAgImF4bGVkIiwKICAgICAgImF4bGVzIiwKICAgICAgImF4bWFuIiwKICAgICAgImF4bWVuIiwKICAgICAgImF4b2lkIiwKICAgICAgImF4b25lIiwKICAgICAgImF4b25zIiwKICAgICAgImF5YWhzIiwKICAgICAgImF5YXlhIiwKICAgICAgImF5ZWxwIiwKICAgICAgImF5Z3JlIiwKICAgICAgImF5aW5zIiwKICAgICAgImF5b250IiwKICAgICAgImF5cmVzIiwKICAgICAgImF5cmllIiwKICAgICAgImF6YW5zIiwKICAgICAgImF6aWRlIiwKICAgICAgImF6aWRvIiwKICAgICAgImF6aW5lIiwKICAgICAgImF6bG9uIiwKICAgICAgImF6b2ljIiwKICAgICAgImF6b2xlIiwKICAgICAgImF6b25zIiwKICAgICAgImF6b3RlIiwKICAgICAgImF6b3RoIiwKICAgICAgImF6dWtpIiwKICAgICAgImF6dXJuIiwKICAgICAgImF6dXJ5IiwKICAgICAgImF6eWd5IiwKICAgICAgImF6eW1lIiwKICAgICAgImF6eW1zIiwKICAgICAgImJhYWVkIiwKICAgICAgImJhYWxzIiwKICAgICAgImJhYmFzIiwKICAgICAgImJhYmVsIiwKICAgICAgImJhYmVzIiwKICAgICAgImJhYmthIiwKICAgICAgImJhYm9vIiwKICAgICAgImJhYnVsIiwKICAgICAgImJhYnVzIiwKICAgICAgImJhY2NhIiwKICAgICAgImJhY2NvIiwKICAgICAgImJhY2N5IiwKICAgICAgImJhY2hhIiwKICAgICAgImJhY2hzIiwKICAgICAgImJhY2tzIiwKICAgICAgImJhZGR5IiwKICAgICAgImJhZWxzIiwKICAgICAgImJhZmZzIiwKICAgICAgImJhZmZ5IiwKICAgICAgImJhZnRzIiwKICAgICAgImJhZ2hzIiwKICAgICAgImJhZ2llIiwKICAgICAgImJhaHRzIiwKICAgICAgImJhaHVzIiwKICAgICAgImJhaHV0IiwKICAgICAgImJhaWxzIiwKICAgICAgImJhaXJuIiwKICAgICAgImJhaXNhIiwKICAgICAgImJhaXRoIiwKICAgICAgImJhaXRzIiwKICAgICAgImJhaXphIiwKICAgICAgImJhaXplIiwKICAgICAgImJhamFuIiwKICAgICAgImJhanJhIiwKICAgICAgImJhanJpIiwKICAgICAgImJhanVzIiwKICAgICAgImJha2VkIiwKICAgICAgImJha2VuIiwKICAgICAgImJha2VzIiwKICAgICAgImJha3JhIiwKICAgICAgImJhbGFzIiwKICAgICAgImJhbGRzIiwKICAgICAgImJhbGR5IiwKICAgICAgImJhbGVkIiwKICAgICAgImJhbGVzIiwKICAgICAgImJhbGtzIiwKICAgICAgImJhbGt5IiwKICAgICAgImJhbGxzIiwKICAgICAgImJhbGx5IiwKICAgICAgImJhbG1zIiwKICAgICAgImJhbG9vIiwKICAgICAgImJhbHNhIiwKICAgICAgImJhbHRpIiwKICAgICAgImJhbHVuIiwKICAgICAgImJhbHVzIiwKICAgICAgImJhbWJpIiwKICAgICAgImJhbmFrIiwKICAgICAgImJhbmNvIiwKICAgICAgImJhbmNzIiwKICAgICAgImJhbmRhIiwKICAgICAgImJhbmRoIiwKICAgICAgImJhbmRzIiwKICAgICAgImJhbmR5IiwKICAgICAgImJhbmVkIiwKICAgICAgImJhbmVzIiwKICAgICAgImJhbmdzIiwKICAgICAgImJhbmlhIiwKICAgICAgImJhbmtzIiwKICAgICAgImJhbm5zIiwKICAgICAgImJhbnRzIiwKICAgICAgImJhbnR1IiwKICAgICAgImJhbnR5IiwKICAgICAgImJhbnlhIiwKICAgICAgImJhcHVzIiwKICAgICAgImJhcmJlIiwKICAgICAgImJhcmJzIiwKICAgICAgImJhcmJ5IiwKICAgICAgImJhcmNhIiwKICAgICAgImJhcmRlIiwKICAgICAgImJhcmRvIiwKICAgICAgImJhcmRzIiwKICAgICAgImJhcmR5IiwKICAgICAgImJhcmVkIiwKICAgICAgImJhcmVyIiwKICAgICAgImJhcmVzIiwKICAgICAgImJhcmZpIiwKICAgICAgImJhcmZzIiwKICAgICAgImJhcmljIiwKICAgICAgImJhcmtzIiwKICAgICAgImJhcmt5IiwKICAgICAgImJhcm1zIiwKICAgICAgImJhcm15IiwKICAgICAgImJhcm5zIiwKICAgICAgImJhcm55IiwKICAgICAgImJhcnBzIiwKICAgICAgImJhcnJhIiwKICAgICAgImJhcnJlIiwKICAgICAgImJhcnJvIiwKICAgICAgImJhcnJ5IiwKICAgICAgImJhcnllIiwKICAgICAgImJhc2FuIiwKICAgICAgImJhc2VkIiwKICAgICAgImJhc2VuIiwKICAgICAgImJhc2VyIiwKICAgICAgImJhc2VzIiwKICAgICAgImJhc2hvIiwKICAgICAgImJhc2lqIiwKICAgICAgImJhc2tzIiwKICAgICAgImJhc29uIiwKICAgICAgImJhc3NlIiwKICAgICAgImJhc3NpIiwKICAgICAgImJhc3NvIiwKICAgICAgImJhc3N5IiwKICAgICAgImJhc3RhIiwKICAgICAgImJhc3RpIiwKICAgICAgImJhc3RvIiwKICAgICAgImJhc3RzIiwKICAgICAgImJhdGVkIiwKICAgICAgImJhdGVzIiwKICAgICAgImJhdGhzIiwKICAgICAgImJhdGlrIiwKICAgICAgImJhdHRhIiwKICAgICAgImJhdHRzIiwKICAgICAgImJhdHR1IiwKICAgICAgImJhdWRzIiwKICAgICAgImJhdWtzIiwKICAgICAgImJhdWxrIiwKICAgICAgImJhdXJzIiwKICAgICAgImJhdmluIiwKICAgICAgImJhd2RzIiwKICAgICAgImJhd2tzIiwKICAgICAgImJhd2xzIiwKICAgICAgImJhd25zIiwKICAgICAgImJhd3JzIiwKICAgICAgImJhd3R5IiwKICAgICAgImJheWVkIiwKICAgICAgImJheWVyIiwKICAgICAgImJheWVzIiwKICAgICAgImJheWxlIiwKICAgICAgImJheXRzIiwKICAgICAgImJhemFyIiwKICAgICAgImJhem9vIiwKICAgICAgImJlYWRzIiwKICAgICAgImJlYWtzIiwKICAgICAgImJlYWt5IiwKICAgICAgImJlYWxzIiwKICAgICAgImJlYW1zIiwKICAgICAgImJlYW15IiwKICAgICAgImJlYW5vIiwKICAgICAgImJlYW5zIiwKICAgICAgImJlYW55IiwKICAgICAgImJlYXJlIiwKICAgICAgImJlYXJzIiwKICAgICAgImJlYXRoIiwKICAgICAgImJlYXRzIiwKICAgICAgImJlYXR5IiwKICAgICAgImJlYXVzIiwKICAgICAgImJlYXV0IiwKICAgICAgImJlYXV4IiwKICAgICAgImJlYm9wIiwKICAgICAgImJlY2FwIiwKICAgICAgImJlY2tlIiwKICAgICAgImJlY2tzIiwKICAgICAgImJlZGFkIiwKICAgICAgImJlZGVsIiwKICAgICAgImJlZGVzIiwKICAgICAgImJlZGV3IiwKICAgICAgImJlZGltIiwKICAgICAgImJlZHllIiwKICAgICAgImJlZWRpIiwKICAgICAgImJlZWZzIiwKICAgICAgImJlZXBzIiwKICAgICAgImJlZXJzIiwKICAgICAgImJlZXJ5IiwKICAgICAgImJlZXRzIiwKICAgICAgImJlZm9nIiwKICAgICAgImJlZ2FkIiwKICAgICAgImJlZ2FyIiwKICAgICAgImJlZ2VtIiwKICAgICAgImJlZ290IiwKICAgICAgImJlZ3VtIiwKICAgICAgImJlaWdlIiwKICAgICAgImJlaWd5IiwKICAgICAgImJlaW5zIiwKICAgICAgImJla2FoIiwKICAgICAgImJlbGFoIiwKICAgICAgImJlbGFyIiwKICAgICAgImJlbGF5IiwKICAgICAgImJlbGVlIiwKICAgICAgImJlbGdhIiwKICAgICAgImJlbGxzIiwKICAgICAgImJlbG9uIiwKICAgICAgImJlbHRzIiwKICAgICAgImJlbWFkIiwKICAgICAgImJlbWFzIiwKICAgICAgImJlbWl4IiwKICAgICAgImJlbXVkIiwKICAgICAgImJlbmRzIiwKICAgICAgImJlbmR5IiwKICAgICAgImJlbmVzIiwKICAgICAgImJlbmV0IiwKICAgICAgImJlbmdhIiwKICAgICAgImJlbmlzIiwKICAgICAgImJlbm5lIiwKICAgICAgImJlbm5pIiwKICAgICAgImJlbm55IiwKICAgICAgImJlbnRvIiwKICAgICAgImJlbnRzIiwKICAgICAgImJlbnR5IiwKICAgICAgImJlcGF0IiwKICAgICAgImJlcmF5IiwKICAgICAgImJlcmVzIiwKICAgICAgImJlcmdzIiwKICAgICAgImJlcmtvIiwKICAgICAgImJlcmtzIiwKICAgICAgImJlcm1lIiwKICAgICAgImJlcm1zIiwKICAgICAgImJlcm9iIiwKICAgICAgImJlcnlsIiwKICAgICAgImJlc2F0IiwKICAgICAgImJlc2F3IiwKICAgICAgImJlc2VlIiwKICAgICAgImJlc2VzIiwKICAgICAgImJlc2l0IiwKICAgICAgImJlc29tIiwKICAgICAgImJlc290IiwKICAgICAgImJlc3RpIiwKICAgICAgImJlc3RzIiwKICAgICAgImJldGFzIiwKICAgICAgImJldGVkIiwKICAgICAgImJldGVzIiwKICAgICAgImJldGhzIiwKICAgICAgImJldGlkIiwKICAgICAgImJldG9uIiwKICAgICAgImJldHRhIiwKICAgICAgImJldHR5IiwKICAgICAgImJldmVyIiwKICAgICAgImJldm9yIiwKICAgICAgImJldnVlIiwKICAgICAgImJldnZ5IiwKICAgICAgImJld2V0IiwKICAgICAgImJld2lnIiwKICAgICAgImJlemVzIiwKICAgICAgImJlemlsIiwKICAgICAgImJlenp5IiwKICAgICAgImJoYWlzIiwKICAgICAgImJoYWppIiwKICAgICAgImJoYW5nIiwKICAgICAgImJoYXRzIiwKICAgICAgImJoZWxzIiwKICAgICAgImJob290IiwKICAgICAgImJodW5hIiwKICAgICAgImJodXRzIiwKICAgICAgImJpYWNoIiwKICAgICAgImJpYWxpIiwKICAgICAgImJpYWx5IiwKICAgICAgImJpYmJzIiwKICAgICAgImJpYmVzIiwKICAgICAgImJpY2N5IiwKICAgICAgImJpY2VzIiwKICAgICAgImJpZGVkIiwKICAgICAgImJpZGVyIiwKICAgICAgImJpZGVzIiwKICAgICAgImJpZGV0IiwKICAgICAgImJpZGlzIiwKICAgICAgImJpZG9uIiwKICAgICAgImJpZWxkIiwKICAgICAgImJpZXJzIiwKICAgICAgImJpZmZvIiwKICAgICAgImJpZmZzIiwKICAgICAgImJpZmZ5IiwKICAgICAgImJpZmlkIiwKICAgICAgImJpZ2FlIiwKICAgICAgImJpZ2dzIiwKICAgICAgImJpZ2d5IiwKICAgICAgImJpZ2hhIiwKICAgICAgImJpZ2h0IiwKICAgICAgImJpZ2x5IiwKICAgICAgImJpZ29zIiwKICAgICAgImJpam91IiwKICAgICAgImJpa2VkIiwKICAgICAgImJpa2VyIiwKICAgICAgImJpa2VzIiwKICAgICAgImJpa2llIiwKICAgICAgImJpbGJvIiwKICAgICAgImJpbGJ5IiwKICAgICAgImJpbGVkIiwKICAgICAgImJpbGVzIiwKICAgICAgImJpbGd5IiwKICAgICAgImJpbGtzIiwKICAgICAgImJpbGxzIiwKICAgICAgImJpbWFoIiwKICAgICAgImJpbWFzIiwKICAgICAgImJpbWJvIiwKICAgICAgImJpbmFsIiwKICAgICAgImJpbmRpIiwKICAgICAgImJpbmRzIiwKICAgICAgImJpbmVyIiwKICAgICAgImJpbmVzIiwKICAgICAgImJpbmdzIiwKICAgICAgImJpbmd5IiwKICAgICAgImJpbml0IiwKICAgICAgImJpbmtzIiwKICAgICAgImJpbnRzIiwKICAgICAgImJpb2dzIiwKICAgICAgImJpb250IiwKICAgICAgImJpb3RhIiwKICAgICAgImJpcGVkIiwKICAgICAgImJpcG9kIiwKICAgICAgImJpcmRzIiwKICAgICAgImJpcmtzIiwKICAgICAgImJpcmxlIiwKICAgICAgImJpcmxzIiwKICAgICAgImJpcm9zIiwKICAgICAgImJpcnJzIiwKICAgICAgImJpcnNlIiwKICAgICAgImJpcnN5IiwKICAgICAgImJpc2VzIiwKICAgICAgImJpc2tzIiwKICAgICAgImJpc29tIiwKICAgICAgImJpdGNoIiwKICAgICAgImJpdGVyIiwKICAgICAgImJpdGVzIiwKICAgICAgImJpdG9zIiwKICAgICAgImJpdG91IiwKICAgICAgImJpdHN5IiwKICAgICAgImJpdHRlIiwKICAgICAgImJpdHRzIiwKICAgICAgImJpdmlhIiwKICAgICAgImJpdnZ5IiwKICAgICAgImJpemVzIiwKICAgICAgImJpenpvIiwKICAgICAgImJpenp5IiwKICAgICAgImJsYWJzIiwKICAgICAgImJsYWRzIiwKICAgICAgImJsYWR5IiwKICAgICAgImJsYWVyIiwKICAgICAgImJsYWVzIiwKICAgICAgImJsYWZmIiwKICAgICAgImJsYWdzIiwKICAgICAgImJsYWhzIiwKICAgICAgImJsYWluIiwKICAgICAgImJsYW1zIiwKICAgICAgImJsYXJ0IiwKICAgICAgImJsYXNlIiwKICAgICAgImJsYXNoIiwKICAgICAgImJsYXRlIiwKICAgICAgImJsYXRzIiwKICAgICAgImJsYXR0IiwKICAgICAgImJsYXVkIiwKICAgICAgImJsYXduIiwKICAgICAgImJsYXdzIiwKICAgICAgImJsYXlzIiwKICAgICAgImJsZWFyIiwKICAgICAgImJsZWJzIiwKICAgICAgImJsZWNoIiwKICAgICAgImJsZWVzIiwKICAgICAgImJsZW50IiwKICAgICAgImJsZXJ0IiwKICAgICAgImJsZXN0IiwKICAgICAgImJsZXRzIiwKICAgICAgImJsZXlzIiwKICAgICAgImJsaW15IiwKICAgICAgImJsaW5nIiwKICAgICAgImJsaW5pIiwKICAgICAgImJsaW5zIiwKICAgICAgImJsaW55IiwKICAgICAgImJsaXBzIiwKICAgICAgImJsaXN0IiwKICAgICAgImJsaXRlIiwKICAgICAgImJsaXRzIiwKICAgICAgImJsaXZlIiwKICAgICAgImJsb2JzIiwKICAgICAgImJsb2NzIiwKICAgICAgImJsb2dzIiwKICAgICAgImJsb29rIiwKICAgICAgImJsb29wIiwKICAgICAgImJsb3JlIiwKICAgICAgImJsb3RzIiwKICAgICAgImJsb3dzIiwKICAgICAgImJsb3d5IiwKICAgICAgImJsdWJzIiwKICAgICAgImJsdWRlIiwKICAgICAgImJsdWRzIiwKICAgICAgImJsdWR5IiwKICAgICAgImJsdWVkIiwKICAgICAgImJsdWVzIiwKICAgICAgImJsdWV0IiwKICAgICAgImJsdWV5IiwKICAgICAgImJsdWlkIiwKICAgICAgImJsdW1lIiwKICAgICAgImJsdW5rIiwKICAgICAgImJsdXJzIiwKICAgICAgImJseXBlIiwKICAgICAgImJvYWJzIiwKICAgICAgImJvYWtzIiwKICAgICAgImJvYXJzIiwKICAgICAgImJvYXJ0IiwKICAgICAgImJvYXRzIiwKICAgICAgImJvYmFjIiwKICAgICAgImJvYmFrIiwKICAgICAgImJvYmFzIiwKICAgICAgImJvYm9sIiwKICAgICAgImJvYm9zIiwKICAgICAgImJvY2NhIiwKICAgICAgImJvY2NlIiwKICAgICAgImJvY2NpIiwKICAgICAgImJvY2hlIiwKICAgICAgImJvY2tzIiwKICAgICAgImJvZGVkIiwKICAgICAgImJvZGVzIiwKICAgICAgImJvZGdlIiwKICAgICAgImJvZGhpIiwKICAgICAgImJvZGxlIiwKICAgICAgImJvZXBzIiwKICAgICAgImJvZXRzIiwKICAgICAgImJvZXVmIiwKICAgICAgImJvZmZvIiwKICAgICAgImJvZmZzIiwKICAgICAgImJvZ2FuIiwKICAgICAgImJvZ2V5IiwKICAgICAgImJvZ2d5IiwKICAgICAgImJvZ2llIiwKICAgICAgImJvZ2xlIiwKICAgICAgImJvZ3VlIiwKICAgICAgImJvZ3VzIiwKICAgICAgImJvaGVhIiwKICAgICAgImJvaG9zIiwKICAgICAgImJvaWxzIiwKICAgICAgImJvaW5nIiwKICAgICAgImJvaW5rIiwKICAgICAgImJvaXRlIiwKICAgICAgImJva2VkIiwKICAgICAgImJva2VoIiwKICAgICAgImJva2VzIiwKICAgICAgImJva29zIiwKICAgICAgImJvbGFyIiwKICAgICAgImJvbGFzIiwKICAgICAgImJvbGRzIiwKICAgICAgImJvbGVzIiwKICAgICAgImJvbGl4IiwKICAgICAgImJvbGxzIiwKICAgICAgImJvbG9zIiwKICAgICAgImJvbHRzIiwKICAgICAgImJvbHVzIiwKICAgICAgImJvbWFzIiwKICAgICAgImJvbWJlIiwKICAgICAgImJvbWJvIiwKICAgICAgImJvbWJzIiwKICAgICAgImJvbmNlIiwKICAgICAgImJvbmRzIiwKICAgICAgImJvbmVkIiwKICAgICAgImJvbmVyIiwKICAgICAgImJvbmVzIiwKICAgICAgImJvbmdzIiwKICAgICAgImJvbmllIiwKICAgICAgImJvbmtzIiwKICAgICAgImJvbm5lIiwKICAgICAgImJvbm55IiwKICAgICAgImJvbnphIiwKICAgICAgImJvbnplIiwKICAgICAgImJvb2FpIiwKICAgICAgImJvb2F5IiwKICAgICAgImJvb2JzIiwKICAgICAgImJvb2R5IiwKICAgICAgImJvb2VkIiwKICAgICAgImJvb2Z5IiwKICAgICAgImJvb2d5IiwKICAgICAgImJvb2hzIiwKICAgICAgImJvb2tzIiwKICAgICAgImJvb2t5IiwKICAgICAgImJvb2xzIiwKICAgICAgImJvb21zIiwKICAgICAgImJvb215IiwKICAgICAgImJvb25nIiwKICAgICAgImJvb25zIiwKICAgICAgImJvb3JkIiwKICAgICAgImJvb3JzIiwKICAgICAgImJvb3NlIiwKICAgICAgImJvb3RzIiwKICAgICAgImJvcHB5IiwKICAgICAgImJvcmFrIiwKICAgICAgImJvcmFsIiwKICAgICAgImJvcmFzIiwKICAgICAgImJvcmRlIiwKICAgICAgImJvcmRzIiwKICAgICAgImJvcmVkIiwKICAgICAgImJvcmVlIiwKICAgICAgImJvcmVsIiwKICAgICAgImJvcmVyIiwKICAgICAgImJvcmVzIiwKICAgICAgImJvcmdvIiwKICAgICAgImJvcmljIiwKICAgICAgImJvcmtzIiwKICAgICAgImJvcm1zIiwKICAgICAgImJvcm5hIiwKICAgICAgImJvcm9uIiwKICAgICAgImJvcnRzIiwKICAgICAgImJvcnR5IiwKICAgICAgImJvcnR6IiwKICAgICAgImJvc2llIiwKICAgICAgImJvc2tzIiwKICAgICAgImJvc2t5IiwKICAgICAgImJvc29uIiwKICAgICAgImJvc3VuIiwKICAgICAgImJvdGFzIiwKICAgICAgImJvdGVsIiwKICAgICAgImJvdGVzIiwKICAgICAgImJvdGh5IiwKICAgICAgImJvdHRlIiwKICAgICAgImJvdHRzIiwKICAgICAgImJvdHR5IiwKICAgICAgImJvdWdlIiwKICAgICAgImJvdWtzIiwKICAgICAgImJvdWx0IiwKICAgICAgImJvdW5zIiwKICAgICAgImJvdXJkIiwKICAgICAgImJvdXJnIiwKICAgICAgImJvdXJuIiwKICAgICAgImJvdXNlIiwKICAgICAgImJvdXN5IiwKICAgICAgImJvdXRzIiwKICAgICAgImJvdmlkIiwKICAgICAgImJvd2F0IiwKICAgICAgImJvd2VkIiwKICAgICAgImJvd2VyIiwKICAgICAgImJvd2VzIiwKICAgICAgImJvd2V0IiwKICAgICAgImJvd2llIiwKICAgICAgImJvd2xzIiwKICAgICAgImJvd25lIiwKICAgICAgImJvd3JzIiwKICAgICAgImJvd3NlIiwKICAgICAgImJveGVkIiwKICAgICAgImJveGVuIiwKICAgICAgImJveGVzIiwKICAgICAgImJveGxhIiwKICAgICAgImJveHR5IiwKICAgICAgImJveWFyIiwKICAgICAgImJveWF1IiwKICAgICAgImJveWVkIiwKICAgICAgImJveWZzIiwKICAgICAgImJveWdzIiwKICAgICAgImJveWxhIiwKICAgICAgImJveW9zIiwKICAgICAgImJveXN5IiwKICAgICAgImJvem9zIiwKICAgICAgImJyYWFpIiwKICAgICAgImJyYWNoIiwKICAgICAgImJyYWNrIiwKICAgICAgImJyYWN0IiwKICAgICAgImJyYWRzIiwKICAgICAgImJyYWVzIiwKICAgICAgImJyYWdzIiwKICAgICAgImJyYWlsIiwKICAgICAgImJyYWtzIiwKICAgICAgImJyYWt5IiwKICAgICAgImJyYW1lIiwKICAgICAgImJyYW5lIiwKICAgICAgImJyYW5rIiwKICAgICAgImJyYW5zIiwKICAgICAgImJyYW50IiwKICAgICAgImJyYXN0IiwKICAgICAgImJyYXRzIiwKICAgICAgImJyYXZhIiwKICAgICAgImJyYXZpIiwKICAgICAgImJyYXdzIiwKICAgICAgImJyYXh5IiwKICAgICAgImJyYXlzIiwKICAgICAgImJyYXphIiwKICAgICAgImJyYXplIiwKICAgICAgImJyZWFtIiwKICAgICAgImJyZWRlIiwKICAgICAgImJyZWRzIiwKICAgICAgImJyZWVtIiwKICAgICAgImJyZWVyIiwKICAgICAgImJyZWVzIiwKICAgICAgImJyZWlkIiwKICAgICAgImJyZWlzIiwKICAgICAgImJyZW1lIiwKICAgICAgImJyZW5zIiwKICAgICAgImJyZW50IiwKICAgICAgImJyZXJlIiwKICAgICAgImJyZXJzIiwKICAgICAgImJyZXZlIiwKICAgICAgImJyZXdzIiwKICAgICAgImJyZXlzIiwKICAgICAgImJyaWVyIiwKICAgICAgImJyaWVzIiwKICAgICAgImJyaWdzIiwKICAgICAgImJyaWtpIiwKICAgICAgImJyaWtzIiwKICAgICAgImJyaWxsIiwKICAgICAgImJyaW1zIiwKICAgICAgImJyaW5zIiwKICAgICAgImJyaW9zIiwKICAgICAgImJyaXNlIiwKICAgICAgImJyaXNzIiwKICAgICAgImJyaXRoIiwKICAgICAgImJyaXRzIiwKICAgICAgImJyaXR0IiwKICAgICAgImJyaXplIiwKICAgICAgImJyb2NoIiwKICAgICAgImJyb2NrIiwKICAgICAgImJyb2RzIiwKICAgICAgImJyb2doIiwKICAgICAgImJyb2dzIiwKICAgICAgImJyb21lIiwKICAgICAgImJyb21vIiwKICAgICAgImJyb25jIiwKICAgICAgImJyb25kIiwKICAgICAgImJyb29sIiwKICAgICAgImJyb29zIiwKICAgICAgImJyb3NlIiwKICAgICAgImJyb3N5IiwKICAgICAgImJyb3dzIiwKICAgICAgImJydWdoIiwKICAgICAgImJydWluIiwKICAgICAgImJydWl0IiwKICAgICAgImJydWxlIiwKICAgICAgImJydW1lIiwKICAgICAgImJydW5nIiwKICAgICAgImJydXNrIiwKICAgICAgImJydXN0IiwKICAgICAgImJydXRzIiwKICAgICAgImJ1YXRzIiwKICAgICAgImJ1YXplIiwKICAgICAgImJ1YmFsIiwKICAgICAgImJ1YmFzIiwKICAgICAgImJ1YmJhIiwKICAgICAgImJ1YmJlIiwKICAgICAgImJ1YmJ5IiwKICAgICAgImJ1YnVzIiwKICAgICAgImJ1Y2h1IiwKICAgICAgImJ1Y2tvIiwKICAgICAgImJ1Y2tzIiwKICAgICAgImJ1Y2t1IiwKICAgICAgImJ1ZGFzIiwKICAgICAgImJ1ZGlzIiwKICAgICAgImJ1ZG9zIiwKICAgICAgImJ1ZmZhIiwKICAgICAgImJ1ZmZlIiwKICAgICAgImJ1ZmZpIiwKICAgICAgImJ1ZmZvIiwKICAgICAgImJ1ZmZzIiwKICAgICAgImJ1ZmZ5IiwKICAgICAgImJ1Zm9zIiwKICAgICAgImJ1ZnR5IiwKICAgICAgImJ1aGxzIiwKICAgICAgImJ1aHJzIiwKICAgICAgImJ1aWtzIiwKICAgICAgImJ1aXN0IiwKICAgICAgImJ1a2VzIiwKICAgICAgImJ1bGJzIiwKICAgICAgImJ1bGd5IiwKICAgICAgImJ1bGtzIiwKICAgICAgImJ1bGxhIiwKICAgICAgImJ1bGxzIiwKICAgICAgImJ1bHNlIiwKICAgICAgImJ1bWJvIiwKICAgICAgImJ1bWZzIiwKICAgICAgImJ1bXBoIiwKICAgICAgImJ1bXBzIiwKICAgICAgImJ1bXB5IiwKICAgICAgImJ1bmFzIiwKICAgICAgImJ1bmNlIiwKICAgICAgImJ1bmNvIiwKICAgICAgImJ1bmRlIiwKICAgICAgImJ1bmRoIiwKICAgICAgImJ1bmRzIiwKICAgICAgImJ1bmR0IiwKICAgICAgImJ1bmR1IiwKICAgICAgImJ1bmR5IiwKICAgICAgImJ1bmdzIiwKICAgICAgImJ1bmd5IiwKICAgICAgImJ1bmlhIiwKICAgICAgImJ1bmplIiwKICAgICAgImJ1bmp5IiwKICAgICAgImJ1bmtvIiwKICAgICAgImJ1bmtzIiwKICAgICAgImJ1bm5zIiwKICAgICAgImJ1bnRzIiwKICAgICAgImJ1bnR5IiwKICAgICAgImJ1bnlhIiwKICAgICAgImJ1b3lzIiwKICAgICAgImJ1cHB5IiwKICAgICAgImJ1cmFuIiwKICAgICAgImJ1cmFzIiwKICAgICAgImJ1cmJzIiwKICAgICAgImJ1cmRzIiwKICAgICAgImJ1cmV0IiwKICAgICAgImJ1cmZpIiwKICAgICAgImJ1cmdoIiwKICAgICAgImJ1cmdzIiwKICAgICAgImJ1cmluIiwKICAgICAgImJ1cmthIiwKICAgICAgImJ1cmtlIiwKICAgICAgImJ1cmtzIiwKICAgICAgImJ1cmxzIiwKICAgICAgImJ1cm5zIiwKICAgICAgImJ1cm9vIiwKICAgICAgImJ1cnBzIiwKICAgICAgImJ1cnFhIiwKICAgICAgImJ1cnJvIiwKICAgICAgImJ1cnJzIiwKICAgICAgImJ1cnJ5IiwKICAgICAgImJ1cnNhIiwKICAgICAgImJ1cnNlIiwKICAgICAgImJ1c2J5IiwKICAgICAgImJ1c2VzIiwKICAgICAgImJ1c2tzIiwKICAgICAgImJ1c2t5IiwKICAgICAgImJ1c3N1IiwKICAgICAgImJ1c3RpIiwKICAgICAgImJ1c3RzIiwKICAgICAgImJ1c3R5IiwKICAgICAgImJ1dGVvIiwKICAgICAgImJ1dGVzIiwKICAgICAgImJ1dGxlIiwKICAgICAgImJ1dG9oIiwKICAgICAgImJ1dHRzIiwKICAgICAgImJ1dHR5IiwKICAgICAgImJ1dHV0IiwKICAgICAgImJ1dHlsIiwKICAgICAgImJ1enp5IiwKICAgICAgImJ3YW5hIiwKICAgICAgImJ3YXppIiwKICAgICAgImJ5ZGVkIiwKICAgICAgImJ5ZGVzIiwKICAgICAgImJ5a2VkIiwKICAgICAgImJ5a2VzIiwKICAgICAgImJ5cmVzIiwKICAgICAgImJ5cmxzIiwKICAgICAgImJ5c3NpIiwKICAgICAgImJ5dGVzIiwKICAgICAgImJ5d2F5IiwKICAgICAgImNhYWVkIiwKICAgICAgImNhYmFzIiwKICAgICAgImNhYmVyIiwKICAgICAgImNhYm9iIiwKICAgICAgImNhYm9jIiwKICAgICAgImNhYnJlIiwKICAgICAgImNhY2FzIiwKICAgICAgImNhY2tzIiwKICAgICAgImNhY2t5IiwKICAgICAgImNhZGVlIiwKICAgICAgImNhZGVzIiwKICAgICAgImNhZGdlIiwKICAgICAgImNhZGd5IiwKICAgICAgImNhZGllIiwKICAgICAgImNhZGlzIiwKICAgICAgImNhZHJlIiwKICAgICAgImNhZWNhIiwKICAgICAgImNhZXNlIiwKICAgICAgImNhZmVzIiwKICAgICAgImNhZmZzIiwKICAgICAgImNhZ2VkIiwKICAgICAgImNhZ2VyIiwKICAgICAgImNhZ2VzIiwKICAgICAgImNhZ290IiwKICAgICAgImNhaG93IiwKICAgICAgImNhaWRzIiwKICAgICAgImNhaW5zIiwKICAgICAgImNhaXJkIiwKICAgICAgImNham9uIiwKICAgICAgImNhanVuIiwKICAgICAgImNha2VkIiwKICAgICAgImNha2VzIiwKICAgICAgImNha2V5IiwKICAgICAgImNhbGZzIiwKICAgICAgImNhbGlkIiwKICAgICAgImNhbGlmIiwKICAgICAgImNhbGl4IiwKICAgICAgImNhbGtzIiwKICAgICAgImNhbGxhIiwKICAgICAgImNhbGxzIiwKICAgICAgImNhbG1zIiwKICAgICAgImNhbG15IiwKICAgICAgImNhbG9zIiwKICAgICAgImNhbHBhIiwKICAgICAgImNhbHBzIiwKICAgICAgImNhbHZlIiwKICAgICAgImNhbHl4IiwKICAgICAgImNhbWFuIiwKICAgICAgImNhbWFzIiwKICAgICAgImNhbWVzIiwKICAgICAgImNhbWlzIiwKICAgICAgImNhbW9zIiwKICAgICAgImNhbXBpIiwKICAgICAgImNhbXBvIiwKICAgICAgImNhbXBzIiwKICAgICAgImNhbXB5IiwKICAgICAgImNhbXVzIiwKICAgICAgImNhbmVkIiwKICAgICAgImNhbmVoIiwKICAgICAgImNhbmVyIiwKICAgICAgImNhbmVzIiwKICAgICAgImNhbmdzIiwKICAgICAgImNhbmlkIiwKICAgICAgImNhbm5hIiwKICAgICAgImNhbm5zIiwKICAgICAgImNhbnNvIiwKICAgICAgImNhbnN0IiwKICAgICAgImNhbnRvIiwKICAgICAgImNhbnRzIiwKICAgICAgImNhbnR5IiwKICAgICAgImNhcGFzIiwKICAgICAgImNhcGVkIiwKICAgICAgImNhcGVzIiwKICAgICAgImNhcGV4IiwKICAgICAgImNhcGhzIiwKICAgICAgImNhcGl6IiwKICAgICAgImNhcGxlIiwKICAgICAgImNhcG9uIiwKICAgICAgImNhcG9zIiwKICAgICAgImNhcG90IiwKICAgICAgImNhcHJpIiwKICAgICAgImNhcHVsIiwKICAgICAgImNhcmFwIiwKICAgICAgImNhcmJvIiwKICAgICAgImNhcmJzIiwKICAgICAgImNhcmJ5IiwKICAgICAgImNhcmRpIiwKICAgICAgImNhcmRzIiwKICAgICAgImNhcmR5IiwKICAgICAgImNhcmVkIiwKICAgICAgImNhcmVyIiwKICAgICAgImNhcmVzIiwKICAgICAgImNhcmV0IiwKICAgICAgImNhcmV4IiwKICAgICAgImNhcmtzIiwKICAgICAgImNhcmxlIiwKICAgICAgImNhcmxzIiwKICAgICAgImNhcm5zIiwKICAgICAgImNhcm55IiwKICAgICAgImNhcm9iIiwKICAgICAgImNhcm9tIiwKICAgICAgImNhcm9uIiwKICAgICAgImNhcnBpIiwKICAgICAgImNhcnBzIiwKICAgICAgImNhcnJzIiwKICAgICAgImNhcnNlIiwKICAgICAgImNhcnRhIiwKICAgICAgImNhcnRlIiwKICAgICAgImNhcnRzIiwKICAgICAgImNhcnZ5IiwKICAgICAgImNhc2FzIiwKICAgICAgImNhc2NvIiwKICAgICAgImNhc2VkIiwKICAgICAgImNhc2VzIiwKICAgICAgImNhc2tzIiwKICAgICAgImNhc2t5IiwKICAgICAgImNhc3RzIiwKICAgICAgImNhc3VzIiwKICAgICAgImNhdGVzIiwKICAgICAgImNhdWRhIiwKICAgICAgImNhdWtzIiwKICAgICAgImNhdWxkIiwKICAgICAgImNhdWxzIiwKICAgICAgImNhdW1zIiwKICAgICAgImNhdXBzIiwKICAgICAgImNhdXJpIiwKICAgICAgImNhdXNhIiwKICAgICAgImNhdmFzIiwKICAgICAgImNhdmVkIiwKICAgICAgImNhdmVsIiwKICAgICAgImNhdmVyIiwKICAgICAgImNhdmVzIiwKICAgICAgImNhdmllIiwKICAgICAgImNhd2VkIiwKICAgICAgImNhd2tzIiwKICAgICAgImNheG9uIiwKICAgICAgImNlYXplIiwKICAgICAgImNlYmlkIiwKICAgICAgImNlY2FsIiwKICAgICAgImNlY3VtIiwKICAgICAgImNlZGVkIiwKICAgICAgImNlZGVyIiwKICAgICAgImNlZGVzIiwKICAgICAgImNlZGlzIiwKICAgICAgImNlaWJhIiwKICAgICAgImNlaWxpIiwKICAgICAgImNlaWxzIiwKICAgICAgImNlbGViIiwKICAgICAgImNlbGxhIiwKICAgICAgImNlbGxpIiwKICAgICAgImNlbGxzIiwKICAgICAgImNlbG9tIiwKICAgICAgImNlbHRzIiwKICAgICAgImNlbnNlIiwKICAgICAgImNlbnRvIiwKICAgICAgImNlbnRzIiwKICAgICAgImNlbnR1IiwKICAgICAgImNlb3JsIiwKICAgICAgImNlcGVzIiwKICAgICAgImNlcmNpIiwKICAgICAgImNlcmVkIiwKICAgICAgImNlcmVzIiwKICAgICAgImNlcmdlIiwKICAgICAgImNlcmlhIiwKICAgICAgImNlcmljIiwKICAgICAgImNlcm5lIiwKICAgICAgImNlcm9jIiwKICAgICAgImNlcm9zIiwKICAgICAgImNlcnRzIiwKICAgICAgImNlcnR5IiwKICAgICAgImNlc3NlIiwKICAgICAgImNlc3RhIiwKICAgICAgImNlc3RpIiwKICAgICAgImNldGVzIiwKICAgICAgImNldHlsIiwKICAgICAgImNlenZlIiwKICAgICAgImNoYWNlIiwKICAgICAgImNoYWNrIiwKICAgICAgImNoYWNvIiwKICAgICAgImNoYWRvIiwKICAgICAgImNoYWRzIiwKICAgICAgImNoYWZ0IiwKICAgICAgImNoYWlzIiwKICAgICAgImNoYWxzIiwKICAgICAgImNoYW1zIiwKICAgICAgImNoYW5hIiwKICAgICAgImNoYW5nIiwKICAgICAgImNoYW5rIiwKICAgICAgImNoYXBlIiwKICAgICAgImNoYXBzIiwKICAgICAgImNoYXB0IiwKICAgICAgImNoYXJhIiwKICAgICAgImNoYXJlIiwKICAgICAgImNoYXJrIiwKICAgICAgImNoYXJyIiwKICAgICAgImNoYXJzIiwKICAgICAgImNoYXJ5IiwKICAgICAgImNoYXRzIiwKICAgICAgImNoYXZlIiwKICAgICAgImNoYXZzIiwKICAgICAgImNoYXdrIiwKICAgICAgImNoYXdzIiwKICAgICAgImNoYXlhIiwKICAgICAgImNoYXlzIiwKICAgICAgImNoZWVwIiwKICAgICAgImNoZWZzIiwKICAgICAgImNoZWthIiwKICAgICAgImNoZWxhIiwKICAgICAgImNoZWxwIiwKICAgICAgImNoZW1vIiwKICAgICAgImNoZW1zIiwKICAgICAgImNoZXJlIiwKICAgICAgImNoZXJ0IiwKICAgICAgImNoZXRoIiwKICAgICAgImNoZXZ5IiwKICAgICAgImNoZXdzIiwKICAgICAgImNoZXd5IiwKICAgICAgImNoaWFvIiwKICAgICAgImNoaWFzIiwKICAgICAgImNoaWJzIiwKICAgICAgImNoaWNhIiwKICAgICAgImNoaWNoIiwKICAgICAgImNoaWNvIiwKICAgICAgImNoaWNzIiwKICAgICAgImNoaWVsIiwKICAgICAgImNoaWtzIiwKICAgICAgImNoaWxlIiwKICAgICAgImNoaW1iIiwKICAgICAgImNoaW1vIiwKICAgICAgImNoaW1wIiwKICAgICAgImNoaW5lIiwKICAgICAgImNoaW5nIiwKICAgICAgImNoaW5rIiwKICAgICAgImNoaW5vIiwKICAgICAgImNoaW5zIiwKICAgICAgImNoaXBzIiwKICAgICAgImNoaXJrIiwKICAgICAgImNoaXJsIiwKICAgICAgImNoaXJtIiwKICAgICAgImNoaXJvIiwKICAgICAgImNoaXJyIiwKICAgICAgImNoaXJ0IiwKICAgICAgImNoaXJ1IiwKICAgICAgImNoaXRzIiwKICAgICAgImNoaXZlIiwKICAgICAgImNoaXZzIiwKICAgICAgImNoaXZ5IiwKICAgICAgImNoaXp6IiwKICAgICAgImNob2NvIiwKICAgICAgImNob2NzIiwKICAgICAgImNob2RlIiwKICAgICAgImNob2dzIiwKICAgICAgImNob2lsIiwKICAgICAgImNob2tvIiwKICAgICAgImNob2t5IiwKICAgICAgImNob2xhIiwKICAgICAgImNob2xpIiwKICAgICAgImNob2xvIiwKICAgICAgImNob21wIiwKICAgICAgImNob25zIiwKICAgICAgImNob29mIiwKICAgICAgImNob29rIiwKICAgICAgImNob29tIiwKICAgICAgImNob29uIiwKICAgICAgImNob3BzIiwKICAgICAgImNob3RhIiwKICAgICAgImNob3R0IiwKICAgICAgImNob3V0IiwKICAgICAgImNob3V4IiwKICAgICAgImNob3drIiwKICAgICAgImNob3dzIiwKICAgICAgImNodWJzIiwKICAgICAgImNodWZhIiwKICAgICAgImNodWZmIiwKICAgICAgImNodWdzIiwKICAgICAgImNodW1zIiwKICAgICAgImNodXJsIiwKICAgICAgImNodXJyIiwKICAgICAgImNodXNlIiwKICAgICAgImNodXRzIiwKICAgICAgImNoeWxlIiwKICAgICAgImNoeW1lIiwKICAgICAgImNoeW5kIiwKICAgICAgImNpYm9sIiwKICAgICAgImNpZGVkIiwKICAgICAgImNpZGVzIiwKICAgICAgImNpZWxzIiwKICAgICAgImNpZ2d5IiwKICAgICAgImNpbGlhIiwKICAgICAgImNpbGxzIiwKICAgICAgImNpbWFyIiwKICAgICAgImNpbWV4IiwKICAgICAgImNpbmN0IiwKICAgICAgImNpbmVzIiwKICAgICAgImNpbnFzIiwKICAgICAgImNpb25zIiwKICAgICAgImNpcHBpIiwKICAgICAgImNpcmNzIiwKICAgICAgImNpcmVzIiwKICAgICAgImNpcmxzIiwKICAgICAgImNpcnJpIiwKICAgICAgImNpc2NvIiwKICAgICAgImNpc3N5IiwKICAgICAgImNpc3RzIiwKICAgICAgImNpdGFsIiwKICAgICAgImNpdGVkIiwKICAgICAgImNpdGVyIiwKICAgICAgImNpdGVzIiwKICAgICAgImNpdmVzIiwKICAgICAgImNpdmV0IiwKICAgICAgImNpdmllIiwKICAgICAgImNpdnZ5IiwKICAgICAgImNsYWNoIiwKICAgICAgImNsYWRlIiwKICAgICAgImNsYWRzIiwKICAgICAgImNsYWVzIiwKICAgICAgImNsYWdzIiwKICAgICAgImNsYW1lIiwKICAgICAgImNsYW1zIiwKICAgICAgImNsYW5zIiwKICAgICAgImNsYXBzIiwKICAgICAgImNsYXB0IiwKICAgICAgImNsYXJvIiwKICAgICAgImNsYXJ0IiwKICAgICAgImNsYXJ5IiwKICAgICAgImNsYXN0IiwKICAgICAgImNsYXRzIiwKICAgICAgImNsYXV0IiwKICAgICAgImNsYXZlIiwKICAgICAgImNsYXZpIiwKICAgICAgImNsYXdzIiwKICAgICAgImNsYXlzIiwKICAgICAgImNsZWNrIiwKICAgICAgImNsZWVrIiwKICAgICAgImNsZWVwIiwKICAgICAgImNsZWZzIiwKICAgICAgImNsZWdzIiwKICAgICAgImNsZWlrIiwKICAgICAgImNsZW1zIiwKICAgICAgImNsZXBlIiwKICAgICAgImNsZXB0IiwKICAgICAgImNsZXZlIiwKICAgICAgImNsZXdzIiwKICAgICAgImNsaWVkIiwKICAgICAgImNsaWVzIiwKICAgICAgImNsaWZ0IiwKICAgICAgImNsaW1lIiwKICAgICAgImNsaW5lIiwKICAgICAgImNsaW50IiwKICAgICAgImNsaXBlIiwKICAgICAgImNsaXBzIiwKICAgICAgImNsaXB0IiwKICAgICAgImNsaXRzIiwKICAgICAgImNsb2FtIiwKICAgICAgImNsb2RzIiwKICAgICAgImNsb2ZmIiwKICAgICAgImNsb2dzIiwKICAgICAgImNsb2tlIiwKICAgICAgImNsb21iIiwKICAgICAgImNsb21wIiwKICAgICAgImNsb25rIiwKICAgICAgImNsb25zIiwKICAgICAgImNsb29wIiwKICAgICAgImNsb290IiwKICAgICAgImNsb3BzIiwKICAgICAgImNsb3RlIiwKICAgICAgImNsb3RzIiwKICAgICAgImNsb3VyIiwKICAgICAgImNsb3VzIiwKICAgICAgImNsb3dzIiwKICAgICAgImNsb3llIiwKICAgICAgImNsb3lzIiwKICAgICAgImNsb3plIiwKICAgICAgImNsdWJzIiwKICAgICAgImNsdWVzIiwKICAgICAgImNsdWV5IiwKICAgICAgImNsdW5rIiwKICAgICAgImNseXBlIiwKICAgICAgImNuaWRhIiwKICAgICAgImNvYWN0IiwKICAgICAgImNvYWR5IiwKICAgICAgImNvYWxhIiwKICAgICAgImNvYWxzIiwKICAgICAgImNvYWx5IiwKICAgICAgImNvYXB0IiwKICAgICAgImNvYXJiIiwKICAgICAgImNvYXRlIiwKICAgICAgImNvYXRpIiwKICAgICAgImNvYXRzIiwKICAgICAgImNvYmJzIiwKICAgICAgImNvYmJ5IiwKICAgICAgImNvYmlhIiwKICAgICAgImNvYmxlIiwKICAgICAgImNvYnphIiwKICAgICAgImNvY2FzIiwKICAgICAgImNvY2NpIiwKICAgICAgImNvY2NvIiwKICAgICAgImNvY2tzIiwKICAgICAgImNvY2t5IiwKICAgICAgImNvY29zIiwKICAgICAgImNvZGFzIiwKICAgICAgImNvZGVjIiwKICAgICAgImNvZGVkIiwKICAgICAgImNvZGVuIiwKICAgICAgImNvZGVyIiwKICAgICAgImNvZGVzIiwKICAgICAgImNvZGV4IiwKICAgICAgImNvZG9uIiwKICAgICAgImNvZWRzIiwKICAgICAgImNvZmZzIiwKICAgICAgImNvZ2llIiwKICAgICAgImNvZ29uIiwKICAgICAgImNvZ3VlIiwKICAgICAgImNvaGFiIiwKICAgICAgImNvaGVuIiwKICAgICAgImNvaG9lIiwKICAgICAgImNvaG9nIiwKICAgICAgImNvaG9zIiwKICAgICAgImNvaWZzIiwKICAgICAgImNvaWduIiwKICAgICAgImNvaWxzIiwKICAgICAgImNvaW5zIiwKICAgICAgImNvaXJzIiwKICAgICAgImNvaXRzIiwKICAgICAgImNva2VkIiwKICAgICAgImNva2VzIiwKICAgICAgImNvbGFzIiwKICAgICAgImNvbGJ5IiwKICAgICAgImNvbGRzIiwKICAgICAgImNvbGVkIiwKICAgICAgImNvbGVzIiwKICAgICAgImNvbGV5IiwKICAgICAgImNvbGljIiwKICAgICAgImNvbGluIiwKICAgICAgImNvbGxzIiwKICAgICAgImNvbGx5IiwKICAgICAgImNvbG9nIiwKICAgICAgImNvbHRzIiwKICAgICAgImNvbHphIiwKICAgICAgImNvbWFlIiwKICAgICAgImNvbWFsIiwKICAgICAgImNvbWFzIiwKICAgICAgImNvbWJlIiwKICAgICAgImNvbWJpIiwKICAgICAgImNvbWJvIiwKICAgICAgImNvbWJzIiwKICAgICAgImNvbWJ5IiwKICAgICAgImNvbWVyIiwKICAgICAgImNvbWVzIiwKICAgICAgImNvbWl4IiwKICAgICAgImNvbW1vIiwKICAgICAgImNvbW1zIiwKICAgICAgImNvbW15IiwKICAgICAgImNvbXBvIiwKICAgICAgImNvbXBzIiwKICAgICAgImNvbXB0IiwKICAgICAgImNvbXRlIiwKICAgICAgImNvbXVzIiwKICAgICAgImNvbmVkIiwKICAgICAgImNvbmVzIiwKICAgICAgImNvbmV5IiwKICAgICAgImNvbmZzIiwKICAgICAgImNvbmdhIiwKICAgICAgImNvbmdlIiwKICAgICAgImNvbmdvIiwKICAgICAgImNvbmlhIiwKICAgICAgImNvbmluIiwKICAgICAgImNvbmtzIiwKICAgICAgImNvbmt5IiwKICAgICAgImNvbm5lIiwKICAgICAgImNvbm5zIiwKICAgICAgImNvbnRlIiwKICAgICAgImNvbnRvIiwKICAgICAgImNvbnVzIiwKICAgICAgImNvbnZvIiwKICAgICAgImNvb2NoIiwKICAgICAgImNvb2VkIiwKICAgICAgImNvb2VlIiwKICAgICAgImNvb2VyIiwKICAgICAgImNvb2V5IiwKICAgICAgImNvb2ZzIiwKICAgICAgImNvb2tzIiwKICAgICAgImNvb2t5IiwKICAgICAgImNvb2xzIiwKICAgICAgImNvb2x5IiwKICAgICAgImNvb21iIiwKICAgICAgImNvb21zIiwKICAgICAgImNvb215IiwKICAgICAgImNvb25zIiwKICAgICAgImNvb3BzIiwKICAgICAgImNvb3B0IiwKICAgICAgImNvb3N0IiwKICAgICAgImNvb3RzIiwKICAgICAgImNvb3plIiwKICAgICAgImNvcGFsIiwKICAgICAgImNvcGF5IiwKICAgICAgImNvcGVkIiwKICAgICAgImNvcGVuIiwKICAgICAgImNvcGVyIiwKICAgICAgImNvcGVzIiwKICAgICAgImNvcHB5IiwKICAgICAgImNvcHJhIiwKICAgICAgImNvcHN5IiwKICAgICAgImNvcXVpIiwKICAgICAgImNvcmFtIiwKICAgICAgImNvcmJlIiwKICAgICAgImNvcmJ5IiwKICAgICAgImNvcmRzIiwKICAgICAgImNvcmVkIiwKICAgICAgImNvcmVzIiwKICAgICAgImNvcmV5IiwKICAgICAgImNvcmdpIiwKICAgICAgImNvcmlhIiwKICAgICAgImNvcmtzIiwKICAgICAgImNvcmt5IiwKICAgICAgImNvcm1zIiwKICAgICAgImNvcm5pIiwKICAgICAgImNvcm5vIiwKICAgICAgImNvcm5zIiwKICAgICAgImNvcm51IiwKICAgICAgImNvcnBzIiwKICAgICAgImNvcnNlIiwKICAgICAgImNvcnNvIiwKICAgICAgImNvc2VjIiwKICAgICAgImNvc2VkIiwKICAgICAgImNvc2VzIiwKICAgICAgImNvc2V0IiwKICAgICAgImNvc2V5IiwKICAgICAgImNvc2llIiwKICAgICAgImNvc3RhIiwKICAgICAgImNvc3RlIiwKICAgICAgImNvc3RzIiwKICAgICAgImNvdGFuIiwKICAgICAgImNvdGVkIiwKICAgICAgImNvdGVzIiwKICAgICAgImNvdGhzIiwKICAgICAgImNvdHRhIiwKICAgICAgImNvdHRzIiwKICAgICAgImNvdWRlIiwKICAgICAgImNvdXBzIiwKICAgICAgImNvdXJiIiwKICAgICAgImNvdXJkIiwKICAgICAgImNvdXJlIiwKICAgICAgImNvdXJzIiwKICAgICAgImNvdXRhIiwKICAgICAgImNvdXRoIiwKICAgICAgImNvdmVkIiwKICAgICAgImNvdmVzIiwKICAgICAgImNvdmluIiwKICAgICAgImNvd2FsIiwKICAgICAgImNvd2FuIiwKICAgICAgImNvd2VkIiwKICAgICAgImNvd2tzIiwKICAgICAgImNvd2xzIiwKICAgICAgImNvd3BzIiwKICAgICAgImNvd3J5IiwKICAgICAgImNveGFlIiwKICAgICAgImNveGFsIiwKICAgICAgImNveGVkIiwKICAgICAgImNveGVzIiwKICAgICAgImNveGliIiwKICAgICAgImNveWF1IiwKICAgICAgImNveWVkIiwKICAgICAgImNveWVyIiwKICAgICAgImNveXB1IiwKICAgICAgImNvemVkIiwKICAgICAgImNvemVuIiwKICAgICAgImNvemVzIiwKICAgICAgImNvemV5IiwKICAgICAgImNvemllIiwKICAgICAgImNyYWFsIiwKICAgICAgImNyYWJzIiwKICAgICAgImNyYWdzIiwKICAgICAgImNyYWljIiwKICAgICAgImNyYWlnIiwKICAgICAgImNyYWtlIiwKICAgICAgImNyYW1lIiwKICAgICAgImNyYW1zIiwKICAgICAgImNyYW5zIiwKICAgICAgImNyYXBlIiwKICAgICAgImNyYXBzIiwKICAgICAgImNyYXB5IiwKICAgICAgImNyYXJlIiwKICAgICAgImNyYXdzIiwKICAgICAgImNyYXlzIiwKICAgICAgImNyZWRzIiwKICAgICAgImNyZWVsIiwKICAgICAgImNyZWVzIiwKICAgICAgImNyZW1zIiwKICAgICAgImNyZW5hIiwKICAgICAgImNyZXBzIiwKICAgICAgImNyZXB5IiwKICAgICAgImNyZXdlIiwKICAgICAgImNyZXdzIiwKICAgICAgImNyaWFzIiwKICAgICAgImNyaWJzIiwKICAgICAgImNyaWVzIiwKICAgICAgImNyaW1zIiwKICAgICAgImNyaW5lIiwKICAgICAgImNyaW9zIiwKICAgICAgImNyaXBlIiwKICAgICAgImNyaXBzIiwKICAgICAgImNyaXNlIiwKICAgICAgImNyaXRoIiwKICAgICAgImNyaXRzIiwKICAgICAgImNyb2NpIiwKICAgICAgImNyb2NzIiwKICAgICAgImNyb2Z0IiwKICAgICAgImNyb2dzIiwKICAgICAgImNyb21iIiwKICAgICAgImNyb21lIiwKICAgICAgImNyb25rIiwKICAgICAgImNyb25zIiwKICAgICAgImNyb29sIiwKICAgICAgImNyb29uIiwKICAgICAgImNyb3BzIiwKICAgICAgImNyb3JlIiwKICAgICAgImNyb3N0IiwKICAgICAgImNyb3V0IiwKICAgICAgImNyb3dzIiwKICAgICAgImNyb3plIiwKICAgICAgImNydWNrIiwKICAgICAgImNydWRvIiwKICAgICAgImNydWRzIiwKICAgICAgImNydWR5IiwKICAgICAgImNydWVzIiwKICAgICAgImNydWV0IiwKICAgICAgImNydWZ0IiwKICAgICAgImNydW5rIiwKICAgICAgImNydW9yIiwKICAgICAgImNydXJhIiwKICAgICAgImNydXNlIiwKICAgICAgImNydXN5IiwKICAgICAgImNydXZlIiwKICAgICAgImNyd3RoIiwKICAgICAgImNyeWVyIiwKICAgICAgImN0ZW5lIiwKICAgICAgImN1YmJ5IiwKICAgICAgImN1YmViIiwKICAgICAgImN1YmVkIiwKICAgICAgImN1YmVyIiwKICAgICAgImN1YmVzIiwKICAgICAgImN1Yml0IiwKICAgICAgImN1ZGR5IiwKICAgICAgImN1ZmZvIiwKICAgICAgImN1ZmZzIiwKICAgICAgImN1aWZzIiwKICAgICAgImN1aW5nIiwKICAgICAgImN1aXNoIiwKICAgICAgImN1aXRzIiwKICAgICAgImN1a2VzIiwKICAgICAgImN1bGNoIiwKICAgICAgImN1bGV0IiwKICAgICAgImN1bGV4IiwKICAgICAgImN1bGxzIiwKICAgICAgImN1bGx5IiwKICAgICAgImN1bG1zIiwKICAgICAgImN1bHBhIiwKICAgICAgImN1bHRpIiwKICAgICAgImN1bHRzIiwKICAgICAgImN1bHR5IiwKICAgICAgImN1bWVjIiwKICAgICAgImN1bmR5IiwKICAgICAgImN1bmVpIiwKICAgICAgImN1bml0IiwKICAgICAgImN1bnRzIiwKICAgICAgImN1cGVsIiwKICAgICAgImN1cGlkIiwKICAgICAgImN1cHBhIiwKICAgICAgImN1cHB5IiwKICAgICAgImN1cmF0IiwKICAgICAgImN1cmJzIiwKICAgICAgImN1cmNoIiwKICAgICAgImN1cmRzIiwKICAgICAgImN1cmR5IiwKICAgICAgImN1cmVkIiwKICAgICAgImN1cmVyIiwKICAgICAgImN1cmVzIiwKICAgICAgImN1cmV0IiwKICAgICAgImN1cmZzIiwKICAgICAgImN1cmlhIiwKICAgICAgImN1cmllIiwKICAgICAgImN1cmxpIiwKICAgICAgImN1cmxzIiwKICAgICAgImN1cm5zIiwKICAgICAgImN1cm55IiwKICAgICAgImN1cnJzIiwKICAgICAgImN1cnNpIiwKICAgICAgImN1cnN0IiwKICAgICAgImN1c2VjIiwKICAgICAgImN1c2h5IiwKICAgICAgImN1c2tzIiwKICAgICAgImN1c3BzIiwKICAgICAgImN1c3B5IiwKICAgICAgImN1c3NvIiwKICAgICAgImN1c3VtIiwKICAgICAgImN1dGNoIiwKICAgICAgImN1dGVyIiwKICAgICAgImN1dGVzIiwKICAgICAgImN1dGV5IiwKICAgICAgImN1dGluIiwKICAgICAgImN1dGlzIiwKICAgICAgImN1dHRvIiwKICAgICAgImN1dHR5IiwKICAgICAgImN1dHVwIiwKICAgICAgImN1dmVlIiwKICAgICAgImN1emVzIiwKICAgICAgImN3dGNoIiwKICAgICAgImN5YW5vIiwKICAgICAgImN5YW5zIiwKICAgICAgImN5Y2FkIiwKICAgICAgImN5Y2FzIiwKICAgICAgImN5Y2xvIiwKICAgICAgImN5ZGVyIiwKICAgICAgImN5bGl4IiwKICAgICAgImN5bWFlIiwKICAgICAgImN5bWFyIiwKICAgICAgImN5bWFzIiwKICAgICAgImN5bWVzIiwKICAgICAgImN5bW9sIiwKICAgICAgImN5c3RzIiwKICAgICAgImN5dGVzIiwKICAgICAgImN5dG9uIiwKICAgICAgImN6YXJzIiwKICAgICAgImRhYWxzIiwKICAgICAgImRhYmJhIiwKICAgICAgImRhY2VzIiwKICAgICAgImRhY2hhIiwKICAgICAgImRhY2tzIiwKICAgICAgImRhZGFoIiwKICAgICAgImRhZGFzIiwKICAgICAgImRhZG9zIiwKICAgICAgImRhZmZzIiwKICAgICAgImRhZmZ5IiwKICAgICAgImRhZ2dhIiwKICAgICAgImRhZ2d5IiwKICAgICAgImRhZ29zIiwKICAgICAgImRhaGxzIiwKICAgICAgImRhaWtvIiwKICAgICAgImRhaW5lIiwKICAgICAgImRhaW50IiwKICAgICAgImRha2VyIiwKICAgICAgImRhbGVkIiwKICAgICAgImRhbGVzIiwKICAgICAgImRhbGlzIiwKICAgICAgImRhbGxlIiwKICAgICAgImRhbHRzIiwKICAgICAgImRhbWFuIiwKICAgICAgImRhbWFyIiwKICAgICAgImRhbWVzIiwKICAgICAgImRhbW1lIiwKICAgICAgImRhbW5zIiwKICAgICAgImRhbXBzIiwKICAgICAgImRhbXB5IiwKICAgICAgImRhbmN5IiwKICAgICAgImRhbmdzIiwKICAgICAgImRhbmlvIiwKICAgICAgImRhbmtzIiwKICAgICAgImRhbm55IiwKICAgICAgImRhbnRzIiwKICAgICAgImRhcmFmIiwKICAgICAgImRhcmJzIiwKICAgICAgImRhcmN5IiwKICAgICAgImRhcmVkIiwKICAgICAgImRhcmVyIiwKICAgICAgImRhcmVzIiwKICAgICAgImRhcmdhIiwKICAgICAgImRhcmdzIiwKICAgICAgImRhcmljIiwKICAgICAgImRhcmlzIiwKICAgICAgImRhcmtzIiwKICAgICAgImRhcmt5IiwKICAgICAgImRhcm5zIiwKICAgICAgImRhcnJlIiwKICAgICAgImRhcnRzIiwKICAgICAgImRhcnppIiwKICAgICAgImRhc2hpIiwKICAgICAgImRhc2h5IiwKICAgICAgImRhdGFsIiwKICAgICAgImRhdGVkIiwKICAgICAgImRhdGVyIiwKICAgICAgImRhdGVzIiwKICAgICAgImRhdG9zIiwKICAgICAgImRhdHRvIiwKICAgICAgImRhdWJlIiwKICAgICAgImRhdWJzIiwKICAgICAgImRhdWJ5IiwKICAgICAgImRhdWRzIiwKICAgICAgImRhdWx0IiwKICAgICAgImRhdXJzIiwKICAgICAgImRhdXRzIiwKICAgICAgImRhdmVuIiwKICAgICAgImRhdml0IiwKICAgICAgImRhd2FoIiwKICAgICAgImRhd2RzIiwKICAgICAgImRhd2VkIiwKICAgICAgImRhd2VuIiwKICAgICAgImRhd2tzIiwKICAgICAgImRhd25zIiwKICAgICAgImRhd3RzIiwKICAgICAgImRheWFuIiwKICAgICAgImRheWNoIiwKICAgICAgImRheW50IiwKICAgICAgImRhemVkIiwKICAgICAgImRhemVyIiwKICAgICAgImRhemVzIiwKICAgICAgImRlYWRzIiwKICAgICAgImRlYWlyIiwKICAgICAgImRlYWxzIiwKICAgICAgImRlYW5zIiwKICAgICAgImRlYXJlIiwKICAgICAgImRlYXJuIiwKICAgICAgImRlYXJzIiwKICAgICAgImRlYXJ5IiwKICAgICAgImRlYXNoIiwKICAgICAgImRlYXZlIiwKICAgICAgImRlYXdzIiwKICAgICAgImRlYXd5IiwKICAgICAgImRlYmFnIiwKICAgICAgImRlYmJ5IiwKICAgICAgImRlYmVsIiwKICAgICAgImRlYmVzIiwKICAgICAgImRlYnRzIiwKICAgICAgImRlYnVkIiwKICAgICAgImRlYnVyIiwKICAgICAgImRlYnVzIiwKICAgICAgImRlYnllIiwKICAgICAgImRlY2FkIiwKICAgICAgImRlY2FmIiwKICAgICAgImRlY2FuIiwKICAgICAgImRlY2tvIiwKICAgICAgImRlY2tzIiwKICAgICAgImRlY29zIiwKICAgICAgImRlZGFsIiwKICAgICAgImRlZWRzIiwKICAgICAgImRlZWR5IiwKICAgICAgImRlZWx5IiwKICAgICAgImRlZW1zIiwKICAgICAgImRlZW5zIiwKICAgICAgImRlZXBzIiwKICAgICAgImRlZXJlIiwKICAgICAgImRlZXJzIiwKICAgICAgImRlZXRzIiwKICAgICAgImRlZXZlIiwKICAgICAgImRlZXZzIiwKICAgICAgImRlZmF0IiwKICAgICAgImRlZmZvIiwKICAgICAgImRlZmlzIiwKICAgICAgImRlZm9nIiwKICAgICAgImRlZ2FzIiwKICAgICAgImRlZ3VtIiwKICAgICAgImRlZ3VzIiwKICAgICAgImRlaWNlIiwKICAgICAgImRlaWRzIiwKICAgICAgImRlaWZ5IiwKICAgICAgImRlaWxzIiwKICAgICAgImRlaXNtIiwKICAgICAgImRlaXN0IiwKICAgICAgImRla2VkIiwKICAgICAgImRla2VzIiwKICAgICAgImRla2tvIiwKICAgICAgImRlbGVkIiwKICAgICAgImRlbGVzIiwKICAgICAgImRlbGZzIiwKICAgICAgImRlbGZ0IiwKICAgICAgImRlbGlzIiwKICAgICAgImRlbGxzIiwKICAgICAgImRlbGx5IiwKICAgICAgImRlbG9zIiwKICAgICAgImRlbHBoIiwKICAgICAgImRlbHRzIiwKICAgICAgImRlbWFuIiwKICAgICAgImRlbWVzIiwKICAgICAgImRlbWljIiwKICAgICAgImRlbWl0IiwKICAgICAgImRlbW9iIiwKICAgICAgImRlbW9pIiwKICAgICAgImRlbW9zIiwKICAgICAgImRlbXB0IiwKICAgICAgImRlbmFyIiwKICAgICAgImRlbmF5IiwKICAgICAgImRlbmNoIiwKICAgICAgImRlbmVzIiwKICAgICAgImRlbmV0IiwKICAgICAgImRlbmlzIiwKICAgICAgImRlbnRzIiwKICAgICAgImRlb3h5IiwKICAgICAgImRlcmF0IiwKICAgICAgImRlcmF5IiwKICAgICAgImRlcmVkIiwKICAgICAgImRlcmVzIiwKICAgICAgImRlcmlnIiwKICAgICAgImRlcm1hIiwKICAgICAgImRlcm1zIiwKICAgICAgImRlcm5zIiwKICAgICAgImRlcm55IiwKICAgICAgImRlcm9zIiwKICAgICAgImRlcnJvIiwKICAgICAgImRlcnJ5IiwKICAgICAgImRlcnRoIiwKICAgICAgImRlcnZzIiwKICAgICAgImRlc2V4IiwKICAgICAgImRlc2hpIiwKICAgICAgImRlc2lzIiwKICAgICAgImRlc2tzIiwKICAgICAgImRlc3NlIiwKICAgICAgImRldmFzIiwKICAgICAgImRldmVsIiwKICAgICAgImRldmlzIiwKICAgICAgImRldm9uIiwKICAgICAgImRldm9zIiwKICAgICAgImRldm90IiwKICAgICAgImRld2FuIiwKICAgICAgImRld2FyIiwKICAgICAgImRld2F4IiwKICAgICAgImRld2VkIiwKICAgICAgImRleGVzIiwKICAgICAgImRleGllIiwKICAgICAgImRoYWJhIiwKICAgICAgImRoYWtzIiwKICAgICAgImRoYWxzIiwKICAgICAgImRoaWtyIiwKICAgICAgImRob2JpIiwKICAgICAgImRob2xlIiwKICAgICAgImRob2xsIiwKICAgICAgImRob2xzIiwKICAgICAgImRob3RpIiwKICAgICAgImRob3dzIiwKICAgICAgImRodXRpIiwKICAgICAgImRpYWN0IiwKICAgICAgImRpYWxzIiwKICAgICAgImRpYW5lIiwKICAgICAgImRpYXpvIiwKICAgICAgImRpYmJzIiwKICAgICAgImRpY2VkIiwKICAgICAgImRpY2VyIiwKICAgICAgImRpY2VzIiwKICAgICAgImRpY2h0IiwKICAgICAgImRpY2tzIiwKICAgICAgImRpY2t5IiwKICAgICAgImRpY290IiwKICAgICAgImRpY3RhIiwKICAgICAgImRpY3RzIiwKICAgICAgImRpY3R5IiwKICAgICAgImRpZGR5IiwKICAgICAgImRpZGllIiwKICAgICAgImRpZG9zIiwKICAgICAgImRpZHN0IiwKICAgICAgImRpZWJzIiwKICAgICAgImRpZWxzIiwKICAgICAgImRpZW5lIiwKICAgICAgImRpZXRzIiwKICAgICAgImRpZmZzIiwKICAgICAgImRpZ2h0IiwKICAgICAgImRpa2FzIiwKICAgICAgImRpa2VkIiwKICAgICAgImRpa2VyIiwKICAgICAgImRpa2VzIiwKICAgICAgImRpa2V5IiwKICAgICAgImRpbGRvIiwKICAgICAgImRpbGxpIiwKICAgICAgImRpbGxzIiwKICAgICAgImRpbWJvIiwKICAgICAgImRpbWVyIiwKICAgICAgImRpbWVzIiwKICAgICAgImRpbXBzIiwKICAgICAgImRpbmFyIiwKICAgICAgImRpbmVkIiwKICAgICAgImRpbmVzIiwKICAgICAgImRpbmdlIiwKICAgICAgImRpbmdzIiwKICAgICAgImRpbmljIiwKICAgICAgImRpbmtzIiwKICAgICAgImRpbmt5IiwKICAgICAgImRpbm5hIiwKICAgICAgImRpbm9zIiwKICAgICAgImRpbnRzIiwKICAgICAgImRpb2xzIiwKICAgICAgImRpb3RhIiwKICAgICAgImRpcHB5IiwKICAgICAgImRpcHNvIiwKICAgICAgImRpcmFtIiwKICAgICAgImRpcmVyIiwKICAgICAgImRpcmtlIiwKICAgICAgImRpcmtzIiwKICAgICAgImRpcmxzIiwKICAgICAgImRpcnRzIiwKICAgICAgImRpc2FzIiwKICAgICAgImRpc2NpIiwKICAgICAgImRpc2NzIiwKICAgICAgImRpc2h5IiwKICAgICAgImRpc2tzIiwKICAgICAgImRpc21lIiwKICAgICAgImRpdGFsIiwKICAgICAgImRpdGFzIiwKICAgICAgImRpdGVkIiwKICAgICAgImRpdGVzIiwKICAgICAgImRpdHN5IiwKICAgICAgImRpdHRzIiwKICAgICAgImRpdHp5IiwKICAgICAgImRpdmFuIiwKICAgICAgImRpdmFzIiwKICAgICAgImRpdmVkIiwKICAgICAgImRpdmVzIiwKICAgICAgImRpdmlzIiwKICAgICAgImRpdm5hIiwKICAgICAgImRpdm9zIiwKICAgICAgImRpdm90IiwKICAgICAgImRpdnZ5IiwKICAgICAgImRpd2FuIiwKICAgICAgImRpeGllIiwKICAgICAgImRpeGl0IiwKICAgICAgImRpeWFzIiwKICAgICAgImRpemVuIiwKICAgICAgImRqaW5uIiwKICAgICAgImRqaW5zIiwKICAgICAgImRvYWJzIiwKICAgICAgImRvYXRzIiwKICAgICAgImRvYmJ5IiwKICAgICAgImRvYmVzIiwKICAgICAgImRvYmllIiwKICAgICAgImRvYmxhIiwKICAgICAgImRvYnJhIiwKICAgICAgImRvYnJvIiwKICAgICAgImRvY2h0IiwKICAgICAgImRvY2tzIiwKICAgICAgImRvY29zIiwKICAgICAgImRvY3VzIiwKICAgICAgImRvZGR5IiwKICAgICAgImRvZG9zIiwKICAgICAgImRvZWtzIiwKICAgICAgImRvZXJzIiwKICAgICAgImRvZXN0IiwKICAgICAgImRvZXRoIiwKICAgICAgImRvZmZzIiwKICAgICAgImRvZ2FuIiwKICAgICAgImRvZ2VzIiwKICAgICAgImRvZ2V5IiwKICAgICAgImRvZ2dvIiwKICAgICAgImRvZ2d5IiwKICAgICAgImRvZ2llIiwKICAgICAgImRvaHlvIiwKICAgICAgImRvaWx0IiwKICAgICAgImRvaWx5IiwKICAgICAgImRvaXRzIiwKICAgICAgImRvam9zIiwKICAgICAgImRvbGNlIiwKICAgICAgImRvbGNpIiwKICAgICAgImRvbGVkIiwKICAgICAgImRvbGVzIiwKICAgICAgImRvbGlhIiwKICAgICAgImRvbGxzIiwKICAgICAgImRvbG1hIiwKICAgICAgImRvbG9yIiwKICAgICAgImRvbG9zIiwKICAgICAgImRvbHRzIiwKICAgICAgImRvbWFsIiwKICAgICAgImRvbWVkIiwKICAgICAgImRvbWVzIiwKICAgICAgImRvbWljIiwKICAgICAgImRvbmFoIiwKICAgICAgImRvbmFzIiwKICAgICAgImRvbmVlIiwKICAgICAgImRvbmVyIiwKICAgICAgImRvbmdhIiwKICAgICAgImRvbmdzIiwKICAgICAgImRvbmtvIiwKICAgICAgImRvbm5hIiwKICAgICAgImRvbm5lIiwKICAgICAgImRvbm55IiwKICAgICAgImRvbnN5IiwKICAgICAgImRvb2JzIiwKICAgICAgImRvb2NlIiwKICAgICAgImRvb2R5IiwKICAgICAgImRvb2tzIiwKICAgICAgImRvb2xlIiwKICAgICAgImRvb2xzIiwKICAgICAgImRvb2x5IiwKICAgICAgImRvb21zIiwKICAgICAgImRvb215IiwKICAgICAgImRvb25hIiwKICAgICAgImRvb3JuIiwKICAgICAgImRvb3JzIiwKICAgICAgImRvb3p5IiwKICAgICAgImRvcGFzIiwKICAgICAgImRvcGVkIiwKICAgICAgImRvcGVyIiwKICAgICAgImRvcGVzIiwKICAgICAgImRvcmFkIiwKICAgICAgImRvcmJhIiwKICAgICAgImRvcmJzIiwKICAgICAgImRvcmVlIiwKICAgICAgImRvcmVzIiwKICAgICAgImRvcmljIiwKICAgICAgImRvcmlzIiwKICAgICAgImRvcmtzIiwKICAgICAgImRvcmt5IiwKICAgICAgImRvcm1zIiwKICAgICAgImRvcm15IiwKICAgICAgImRvcnBzIiwKICAgICAgImRvcnJzIiwKICAgICAgImRvcnNhIiwKICAgICAgImRvcnNlIiwKICAgICAgImRvcnRzIiwKICAgICAgImRvcnR5IiwKICAgICAgImRvc2FpIiwKICAgICAgImRvc2FzIiwKICAgICAgImRvc2VkIiwKICAgICAgImRvc2VoIiwKICAgICAgImRvc2VyIiwKICAgICAgImRvc2VzIiwKICAgICAgImRvc2hhIiwKICAgICAgImRvdGFsIiwKICAgICAgImRvdGVkIiwKICAgICAgImRvdGVyIiwKICAgICAgImRvdGVzIiwKICAgICAgImRvdHR5IiwKICAgICAgImRvdWFyIiwKICAgICAgImRvdWNlIiwKICAgICAgImRvdWNzIiwKICAgICAgImRvdWtzIiwKICAgICAgImRvdWxhIiwKICAgICAgImRvdW1hIiwKICAgICAgImRvdW1zIiwKICAgICAgImRvdXBzIiwKICAgICAgImRvdXJhIiwKICAgICAgImRvdXNlIiwKICAgICAgImRvdXRzIiwKICAgICAgImRvdmVkIiwKICAgICAgImRvdmVuIiwKICAgICAgImRvdmVyIiwKICAgICAgImRvdmVzIiwKICAgICAgImRvdmllIiwKICAgICAgImRvd2FyIiwKICAgICAgImRvd2RzIiwKICAgICAgImRvd2VkIiwKICAgICAgImRvd2VyIiwKICAgICAgImRvd2llIiwKICAgICAgImRvd2xlIiwKICAgICAgImRvd2xzIiwKICAgICAgImRvd2x5IiwKICAgICAgImRvd25hIiwKICAgICAgImRvd25zIiwKICAgICAgImRvd3BzIiwKICAgICAgImRvd3NlIiwKICAgICAgImRvd3RzIiwKICAgICAgImRveGVkIiwKICAgICAgImRveGVzIiwKICAgICAgImRveGllIiwKICAgICAgImRveWVuIiwKICAgICAgImRveWx5IiwKICAgICAgImRvemVkIiwKICAgICAgImRvemVyIiwKICAgICAgImRvemVzIiwKICAgICAgImRyYWJzIiwKICAgICAgImRyYWNrIiwKICAgICAgImRyYWNvIiwKICAgICAgImRyYWZmIiwKICAgICAgImRyYWdzIiwKICAgICAgImRyYWlsIiwKICAgICAgImRyYW1zIiwKICAgICAgImRyYW50IiwKICAgICAgImRyYXBzIiwKICAgICAgImRyYXRzIiwKICAgICAgImRyYXZlIiwKICAgICAgImRyYXdzIiwKICAgICAgImRyYXlzIiwKICAgICAgImRyZWFyIiwKICAgICAgImRyZWNrIiwKICAgICAgImRyZWVkIiwKICAgICAgImRyZWVyIiwKICAgICAgImRyZWVzIiwKICAgICAgImRyZWdzIiwKICAgICAgImRyZWtzIiwKICAgICAgImRyZW50IiwKICAgICAgImRyZXJlIiwKICAgICAgImRyZXN0IiwKICAgICAgImRyZXlzIiwKICAgICAgImRyaWJzIiwKICAgICAgImRyaWNlIiwKICAgICAgImRyaWVzIiwKICAgICAgImRyaWx5IiwKICAgICAgImRyaXBzIiwKICAgICAgImRyaXB0IiwKICAgICAgImRyb2lkIiwKICAgICAgImRyb2lsIiwKICAgICAgImRyb2tlIiwKICAgICAgImRyb2xlIiwKICAgICAgImRyb21lIiwKICAgICAgImRyb255IiwKICAgICAgImRyb29iIiwKICAgICAgImRyb29nIiwKICAgICAgImRyb29rIiwKICAgICAgImRyb3BzIiwKICAgICAgImRyb3B0IiwKICAgICAgImRyb3VrIiwKICAgICAgImRyb3dzIiwKICAgICAgImRydWJzIiwKICAgICAgImRydWdzIiwKICAgICAgImRydW1zIiwKICAgICAgImRydXBlIiwKICAgICAgImRydXNlIiwKICAgICAgImRydXN5IiwKICAgICAgImRydXh5IiwKICAgICAgImRyeWFkIiwKICAgICAgImRyeWFzIiwKICAgICAgImRzb2JvIiwKICAgICAgImRzb21vIiwKICAgICAgImR1YWRzIiwKICAgICAgImR1YWxzIiwKICAgICAgImR1YW5zIiwKICAgICAgImR1YXJzIiwKICAgICAgImR1YmJvIiwKICAgICAgImR1Y2FsIiwKICAgICAgImR1Y2F0IiwKICAgICAgImR1Y2VzIiwKICAgICAgImR1Y2tzIiwKICAgICAgImR1Y2t5IiwKICAgICAgImR1Y3RzIiwKICAgICAgImR1ZGR5IiwKICAgICAgImR1ZGVkIiwKICAgICAgImR1ZGVzIiwKICAgICAgImR1ZWxzIiwKICAgICAgImR1ZXRzIiwKICAgICAgImR1ZXR0IiwKICAgICAgImR1ZmZzIiwKICAgICAgImR1ZnVzIiwKICAgICAgImR1aW5nIiwKICAgICAgImR1aXRzIiwKICAgICAgImR1a2FzIiwKICAgICAgImR1a2VkIiwKICAgICAgImR1a2VzIiwKICAgICAgImR1a2thIiwKICAgICAgImR1bGNlIiwKICAgICAgImR1bGVzIiwKICAgICAgImR1bGlhIiwKICAgICAgImR1bGxzIiwKICAgICAgImR1bHNlIiwKICAgICAgImR1bWFzIiwKICAgICAgImR1bWJvIiwKICAgICAgImR1bWJzIiwKICAgICAgImR1bWthIiwKICAgICAgImR1bWt5IiwKICAgICAgImR1bXBzIiwKICAgICAgImR1bmFtIiwKICAgICAgImR1bmNoIiwKICAgICAgImR1bmVzIiwKICAgICAgImR1bmdzIiwKICAgICAgImR1bmd5IiwKICAgICAgImR1bmtzIiwKICAgICAgImR1bm5vIiwKICAgICAgImR1bm55IiwKICAgICAgImR1bnNoIiwKICAgICAgImR1bnRzIiwKICAgICAgImR1b21pIiwKICAgICAgImR1b21vIiwKICAgICAgImR1cGVkIiwKICAgICAgImR1cGVyIiwKICAgICAgImR1cGVzIiwKICAgICAgImR1cGxlIiwKICAgICAgImR1cGx5IiwKICAgICAgImR1cHB5IiwKICAgICAgImR1cmFsIiwKICAgICAgImR1cmFzIiwKICAgICAgImR1cmVkIiwKICAgICAgImR1cmVzIiwKICAgICAgImR1cmd5IiwKICAgICAgImR1cm5zIiwKICAgICAgImR1cm9jIiwKICAgICAgImR1cm9zIiwKICAgICAgImR1cm95IiwKICAgICAgImR1cnJhIiwKICAgICAgImR1cnJzIiwKICAgICAgImR1cnJ5IiwKICAgICAgImR1cnN0IiwKICAgICAgImR1cnVtIiwKICAgICAgImR1cnppIiwKICAgICAgImR1c2tzIiwKICAgICAgImR1c3RzIiwKICAgICAgImR1eGVzIiwKICAgICAgImR3YWFsIiwKICAgICAgImR3YWxlIiwKICAgICAgImR3YWxtIiwKICAgICAgImR3YW1zIiwKICAgICAgImR3YW5nIiwKICAgICAgImR3YXVtIiwKICAgICAgImR3ZWViIiwKICAgICAgImR3aWxlIiwKICAgICAgImR3aW5lIiwKICAgICAgImR5YWRzIiwKICAgICAgImR5ZXJzIiwKICAgICAgImR5a2VkIiwKICAgICAgImR5a2VzIiwKICAgICAgImR5a2V5IiwKICAgICAgImR5a29uIiwKICAgICAgImR5bmVsIiwKICAgICAgImR5bmVzIiwKICAgICAgImR6aG9zIiwKICAgICAgImVhZ3JlIiwKICAgICAgImVhbGVkIiwKICAgICAgImVhbGVzIiwKICAgICAgImVhbmVkIiwKICAgICAgImVhcmRzIiwKICAgICAgImVhcmVkIiwKICAgICAgImVhcmxzIiwKICAgICAgImVhcm5zIiwKICAgICAgImVhcm50IiwKICAgICAgImVhcnN0IiwKICAgICAgImVhc2VkIiwKICAgICAgImVhc2VyIiwKICAgICAgImVhc2VzIiwKICAgICAgImVhc2xlIiwKICAgICAgImVhc3RzIiwKICAgICAgImVhdGhlIiwKICAgICAgImVhdmVkIiwKICAgICAgImVhdmVzIiwKICAgICAgImViYmVkIiwKICAgICAgImViYmV0IiwKICAgICAgImVib25zIiwKICAgICAgImVib29rIiwKICAgICAgImVjYWRzIiwKICAgICAgImVjaGVkIiwKICAgICAgImVjaGVzIiwKICAgICAgImVjaG9zIiwKICAgICAgImVjcnVzIiwKICAgICAgImVkZW1hIiwKICAgICAgImVkZ2VkIiwKICAgICAgImVkZ2VyIiwKICAgICAgImVkZ2VzIiwKICAgICAgImVkaWxlIiwKICAgICAgImVkaXRzIiwKICAgICAgImVkdWNlIiwKICAgICAgImVkdWN0IiwKICAgICAgImVlaml0IiwKICAgICAgImVlbnN5IiwKICAgICAgImVldmVuIiwKICAgICAgImVldm5zIiwKICAgICAgImVmZmVkIiwKICAgICAgImVnYWRzIiwKICAgICAgImVnZXJzIiwKICAgICAgImVnZXN0IiwKICAgICAgImVnZ2FyIiwKICAgICAgImVnZ2VkIiwKICAgICAgImVnZ2VyIiwKICAgICAgImVnbWFzIiwKICAgICAgImVoaW5nIiwKICAgICAgImVpZGVyIiwKICAgICAgImVpZG9zIiwKICAgICAgImVpZ25lIiwKICAgICAgImVpa2VkIiwKICAgICAgImVpa29uIiwKICAgICAgImVpbGRzIiwKICAgICAgImVpc2VsIiwKICAgICAgImVqaWRvIiwKICAgICAgImVra2FzIiwKICAgICAgImVsYWluIiwKICAgICAgImVsYW5kIiwKICAgICAgImVsYW5zIiwKICAgICAgImVsY2hpIiwKICAgICAgImVsZGluIiwKICAgICAgImVsZW1pIiwKICAgICAgImVsZmVkIiwKICAgICAgImVsaWFkIiwKICAgICAgImVsaW50IiwKICAgICAgImVsbWVuIiwKICAgICAgImVsb2dlIiwKICAgICAgImVsb2d5IiwKICAgICAgImVsb2luIiwKICAgICAgImVsb3BzIiwKICAgICAgImVscGVlIiwKICAgICAgImVsc2luIiwKICAgICAgImVsdXRlIiwKICAgICAgImVsdmFuIiwKICAgICAgImVsdmVuIiwKICAgICAgImVsdmVyIiwKICAgICAgImVsdmVzIiwKICAgICAgImVtYWNzIiwKICAgICAgImVtYmFyIiwKICAgICAgImVtYmF5IiwKICAgICAgImVtYm9nIiwKICAgICAgImVtYm93IiwKICAgICAgImVtYm94IiwKICAgICAgImVtYnVzIiwKICAgICAgImVtZWVyIiwKICAgICAgImVtZW5kIiwKICAgICAgImVtZXJnIiwKICAgICAgImVtZXJ5IiwKICAgICAgImVtZXVzIiwKICAgICAgImVtaWNzIiwKICAgICAgImVtaXJzIiwKICAgICAgImVtaXRzIiwKICAgICAgImVtbWFzIiwKICAgICAgImVtbWVyIiwKICAgICAgImVtbWV0IiwKICAgICAgImVtbWV3IiwKICAgICAgImVtbXlzIiwKICAgICAgImVtb2ppIiwKICAgICAgImVtb25nIiwKICAgICAgImVtb3RlIiwKICAgICAgImVtb3ZlIiwKICAgICAgImVtcHRzIiwKICAgICAgImVtdWxlIiwKICAgICAgImVtdXJlIiwKICAgICAgImVteWRlIiwKICAgICAgImVteWRzIiwKICAgICAgImVuYXJtIiwKICAgICAgImVuYXRlIiwKICAgICAgImVuZGVkIiwKICAgICAgImVuZGVyIiwKICAgICAgImVuZGV3IiwKICAgICAgImVuZHVlIiwKICAgICAgImVuZXdzIiwKICAgICAgImVuZml4IiwKICAgICAgImVuaWFjIiwKICAgICAgImVubGl0IiwKICAgICAgImVubWV3IiwKICAgICAgImVubm9nIiwKICAgICAgImVub2tpIiwKICAgICAgImVub2xzIiwKICAgICAgImVub3JtIiwKICAgICAgImVub3dzIiwKICAgICAgImVucm9sIiwKICAgICAgImVuc2V3IiwKICAgICAgImVuc2t5IiwKICAgICAgImVudGlhIiwKICAgICAgImVudXJlIiwKICAgICAgImVudXJuIiwKICAgICAgImVudm9pIiwKICAgICAgImVuenltIiwKICAgICAgImVvcmxzIiwKICAgICAgImVvc2luIiwKICAgICAgImVwYWN0IiwKICAgICAgImVwZWVzIiwKICAgICAgImVwaGFoIiwKICAgICAgImVwaGFzIiwKICAgICAgImVwaG9kIiwKICAgICAgImVwaG9yIiwKICAgICAgImVwaWNzIiwKICAgICAgImVwb2RlIiwKICAgICAgImVwb3B0IiwKICAgICAgImVwcmlzIiwKICAgICAgImVxdWVzIiwKICAgICAgImVxdWlkIiwKICAgICAgImVyYmlhIiwKICAgICAgImVyZXZzIiwKICAgICAgImVyZ29uIiwKICAgICAgImVyZ29zIiwKICAgICAgImVyZ290IiwKICAgICAgImVyaHVzIiwKICAgICAgImVyaWNhIiwKICAgICAgImVyaWNrIiwKICAgICAgImVyaWNzIiwKICAgICAgImVyaW5nIiwKICAgICAgImVybmVkIiwKICAgICAgImVybmVzIiwKICAgICAgImVyb3NlIiwKICAgICAgImVycmVkIiwKICAgICAgImVyc2VzIiwKICAgICAgImVydWN0IiwKICAgICAgImVydWdvIiwKICAgICAgImVydXZzIiwKICAgICAgImVydmVuIiwKICAgICAgImVydmlsIiwKICAgICAgImVzY2FyIiwKICAgICAgImVzY290IiwKICAgICAgImVzaWxlIiwKICAgICAgImVza2FyIiwKICAgICAgImVza2VyIiwKICAgICAgImVzbmVzIiwKICAgICAgImVzc2VzIiwKICAgICAgImVzdG9jIiwKICAgICAgImVzdG9wIiwKICAgICAgImVzdHJvIiwKICAgICAgImV0YWdlIiwKICAgICAgImV0YXBlIiwKICAgICAgImV0YXRzIiwKICAgICAgImV0ZW5zIiwKICAgICAgImV0aGFsIiwKICAgICAgImV0aG5lIiwKICAgICAgImV0aHlsIiwKICAgICAgImV0aWNzIiwKICAgICAgImV0bmFzIiwKICAgICAgImV0dGluIiwKICAgICAgImV0dGxlIiwKICAgICAgImV0dWlzIiwKICAgICAgImV0d2VlIiwKICAgICAgImV0eW1hIiwKICAgICAgImV1Z2hzIiwKICAgICAgImV1a2VkIiwKICAgICAgImV1cGFkIiwKICAgICAgImV1cm9zIiwKICAgICAgImV1c29sIiwKICAgICAgImV2ZW5zIiwKICAgICAgImV2ZXJ0IiwKICAgICAgImV2ZXRzIiwKICAgICAgImV2aG9lIiwKICAgICAgImV2aWxzIiwKICAgICAgImV2aXRlIiwKICAgICAgImV2b2hlIiwKICAgICAgImV3ZXJzIiwKICAgICAgImV3ZXN0IiwKICAgICAgImV3aG93IiwKICAgICAgImV3a2VkIiwKICAgICAgImV4YW1zIiwKICAgICAgImV4ZWF0IiwKICAgICAgImV4ZWNzIiwKICAgICAgImV4ZWVtIiwKICAgICAgImV4ZW1lIiwKICAgICAgImV4ZmlsIiwKICAgICAgImV4aWVzIiwKICAgICAgImV4aW5lIiwKICAgICAgImV4aW5nIiwKICAgICAgImV4aXRzIiwKICAgICAgImV4b2RlIiwKICAgICAgImV4b21lIiwKICAgICAgImV4b25zIiwKICAgICAgImV4cGF0IiwKICAgICAgImV4cG9zIiwKICAgICAgImV4dWRlIiwKICAgICAgImV4dWxzIiwKICAgICAgImV4dXJiIiwKICAgICAgImV5YXNzIiwKICAgICAgImV5ZXJzIiwKICAgICAgImV5b3RzIiwKICAgICAgImV5cmFzIiwKICAgICAgImV5cmVzIiwKICAgICAgImV5cmllIiwKICAgICAgImV5cmlyIiwKICAgICAgImV6aW5lIiwKICAgICAgImZhYmJ5IiwKICAgICAgImZhY2VkIiwKICAgICAgImZhY2VyIiwKICAgICAgImZhY2VzIiwKICAgICAgImZhY2lhIiwKICAgICAgImZhY3RhIiwKICAgICAgImZhY3RzIiwKICAgICAgImZhZGR5IiwKICAgICAgImZhZGVkIiwKICAgICAgImZhZGVyIiwKICAgICAgImZhZGVzIiwKICAgICAgImZhZGdlIiwKICAgICAgImZhZG9zIiwKICAgICAgImZhZW5hIiwKICAgICAgImZhZXJ5IiwKICAgICAgImZhZmZzIiwKICAgICAgImZhZmZ5IiwKICAgICAgImZhZ2d5IiwKICAgICAgImZhZ2luIiwKICAgICAgImZhZ290IiwKICAgICAgImZhaWtzIiwKICAgICAgImZhaWxzIiwKICAgICAgImZhaW5lIiwKICAgICAgImZhaW5zIiwKICAgICAgImZhaXJzIiwKICAgICAgImZha2VkIiwKICAgICAgImZha2VyIiwKICAgICAgImZha2VzIiwKICAgICAgImZha2V5IiwKICAgICAgImZha2llIiwKICAgICAgImZha2lyIiwKICAgICAgImZhbGFqIiwKICAgICAgImZhbGxzIiwKICAgICAgImZhbWVkIiwKICAgICAgImZhbWVzIiwKICAgICAgImZhbmFsIiwKICAgICAgImZhbmRzIiwKICAgICAgImZhbmVzIiwKICAgICAgImZhbmdhIiwKICAgICAgImZhbmdvIiwKICAgICAgImZhbmdzIiwKICAgICAgImZhbmtzIiwKICAgICAgImZhbm9uIiwKICAgICAgImZhbm9zIiwKICAgICAgImZhbnVtIiwKICAgICAgImZhcWlyIiwKICAgICAgImZhcmFkIiwKICAgICAgImZhcmNpIiwKICAgICAgImZhcmN5IiwKICAgICAgImZhcmRzIiwKICAgICAgImZhcmVkIiwKICAgICAgImZhcmVyIiwKICAgICAgImZhcmVzIiwKICAgICAgImZhcmxlIiwKICAgICAgImZhcmxzIiwKICAgICAgImZhcm1zIiwKICAgICAgImZhcm9zIiwKICAgICAgImZhcnJvIiwKICAgICAgImZhcnNlIiwKICAgICAgImZhcnRzIiwKICAgICAgImZhc2NpIiwKICAgICAgImZhc3RpIiwKICAgICAgImZhc3RzIiwKICAgICAgImZhdGVkIiwKICAgICAgImZhdGVzIiwKICAgICAgImZhdGx5IiwKICAgICAgImZhdHNvIiwKICAgICAgImZhdHdhIiwKICAgICAgImZhdWdoIiwKICAgICAgImZhdWxkIiwKICAgICAgImZhdW5zIiwKICAgICAgImZhdXJkIiwKICAgICAgImZhdXRzIiwKICAgICAgImZhdXZlIiwKICAgICAgImZhdmFzIiwKICAgICAgImZhdmVsIiwKICAgICAgImZhdmVyIiwKICAgICAgImZhdmVzIiwKICAgICAgImZhdnVzIiwKICAgICAgImZhd25zIiwKICAgICAgImZhd255IiwKICAgICAgImZheGVkIiwKICAgICAgImZheGVzIiwKICAgICAgImZheWVkIiwKICAgICAgImZheWVyIiwKICAgICAgImZheW5lIiwKICAgICAgImZheXJlIiwKICAgICAgImZhemVkIiwKICAgICAgImZhemVzIiwKICAgICAgImZlYWxzIiwKICAgICAgImZlYXJlIiwKICAgICAgImZlYXJzIiwKICAgICAgImZlYXJ0IiwKICAgICAgImZlYXNlIiwKICAgICAgImZlYXRzIiwKICAgICAgImZlYXplIiwKICAgICAgImZlY2VzIiwKICAgICAgImZlY2h0IiwKICAgICAgImZlY2l0IiwKICAgICAgImZlY2tzIiwKICAgICAgImZlZGV4IiwKICAgICAgImZlZWJzIiwKICAgICAgImZlZWRzIiwKICAgICAgImZlZWxzIiwKICAgICAgImZlZW5zIiwKICAgICAgImZlZXJzIiwKICAgICAgImZlZXNlIiwKICAgICAgImZlZXplIiwKICAgICAgImZlaG1lIiwKICAgICAgImZlaW50IiwKICAgICAgImZlaXN0IiwKICAgICAgImZlbGNoIiwKICAgICAgImZlbGlkIiwKICAgICAgImZlbGxzIiwKICAgICAgImZlbGx5IiwKICAgICAgImZlbHRzIiwKICAgICAgImZlbHR5IiwKICAgICAgImZlbWFsIiwKICAgICAgImZlbWVzIiwKICAgICAgImZlbW15IiwKICAgICAgImZlbmRzIiwKICAgICAgImZlbmR5IiwKICAgICAgImZlbmlzIiwKICAgICAgImZlbmtzIiwKICAgICAgImZlbm55IiwKICAgICAgImZlbnRzIiwKICAgICAgImZlb2RzIiwKICAgICAgImZlb2ZmIiwKICAgICAgImZlcmVyIiwKICAgICAgImZlcmVzIiwKICAgICAgImZlcmlhIiwKICAgICAgImZlcmx5IiwKICAgICAgImZlcm1pIiwKICAgICAgImZlcm1zIiwKICAgICAgImZlcm5zIiwKICAgICAgImZlcm55IiwKICAgICAgImZlc3NlIiwKICAgICAgImZlc3RhIiwKICAgICAgImZlc3RzIiwKICAgICAgImZlc3R5IiwKICAgICAgImZldGFzIiwKICAgICAgImZldGVkIiwKICAgICAgImZldGVzIiwKICAgICAgImZldG9yIiwKICAgICAgImZldHRhIiwKICAgICAgImZldHRzIiwKICAgICAgImZldHdhIiwKICAgICAgImZldWFyIiwKICAgICAgImZldWRzIiwKICAgICAgImZldWVkIiwKICAgICAgImZleWVkIiwKICAgICAgImZleWVyIiwKICAgICAgImZleWx5IiwKICAgICAgImZlemVzIiwKICAgICAgImZlenp5IiwKICAgICAgImZpYXJzIiwKICAgICAgImZpYXRzIiwKICAgICAgImZpYnJlIiwKICAgICAgImZpYnJvIiwKICAgICAgImZpY2VzIiwKICAgICAgImZpY2hlIiwKICAgICAgImZpY2h1IiwKICAgICAgImZpY2luIiwKICAgICAgImZpY29zIiwKICAgICAgImZpZGVzIiwKICAgICAgImZpZGdlIiwKICAgICAgImZpZG9zIiwKICAgICAgImZpZWZzIiwKICAgICAgImZpZW50IiwKICAgICAgImZpZXJlIiwKICAgICAgImZpZXJzIiwKICAgICAgImZpZXN0IiwKICAgICAgImZpZmVkIiwKICAgICAgImZpZmVyIiwKICAgICAgImZpZmVzIiwKICAgICAgImZpZmlzIiwKICAgICAgImZpZ2d5IiwKICAgICAgImZpZ29zIiwKICAgICAgImZpa2VkIiwKICAgICAgImZpa2VzIiwKICAgICAgImZpbGFyIiwKICAgICAgImZpbGNoIiwKICAgICAgImZpbGVkIiwKICAgICAgImZpbGVzIiwKICAgICAgImZpbGlpIiwKICAgICAgImZpbGtzIiwKICAgICAgImZpbGxlIiwKICAgICAgImZpbGxvIiwKICAgICAgImZpbGxzIiwKICAgICAgImZpbG1pIiwKICAgICAgImZpbG1zIiwKICAgICAgImZpbG9zIiwKICAgICAgImZpbHVtIiwKICAgICAgImZpbmNhIiwKICAgICAgImZpbmRzIiwKICAgICAgImZpbmVkIiwKICAgICAgImZpbmVzIiwKICAgICAgImZpbmlzIiwKICAgICAgImZpbmtzIiwKICAgICAgImZpbm55IiwKICAgICAgImZpbm9zIiwKICAgICAgImZpb3JkIiwKICAgICAgImZpcWhzIiwKICAgICAgImZpcXVlIiwKICAgICAgImZpcmVkIiwKICAgICAgImZpcmVyIiwKICAgICAgImZpcmVzIiwKICAgICAgImZpcmllIiwKICAgICAgImZpcmtzIiwKICAgICAgImZpcm1zIiwKICAgICAgImZpcm5zIiwKICAgICAgImZpcnJ5IiwKICAgICAgImZpcnRoIiwKICAgICAgImZpc2NzIiwKICAgICAgImZpc2tzIiwKICAgICAgImZpc3RzIiwKICAgICAgImZpc3R5IiwKICAgICAgImZpdGNoIiwKICAgICAgImZpdGx5IiwKICAgICAgImZpdG5hIiwKICAgICAgImZpdHRlIiwKICAgICAgImZpdHRzIiwKICAgICAgImZpdmVyIiwKICAgICAgImZpdmVzIiwKICAgICAgImZpeGVkIiwKICAgICAgImZpeGVzIiwKICAgICAgImZpeGl0IiwKICAgICAgImZqZWxkIiwKICAgICAgImZsYWJzIiwKICAgICAgImZsYWZmIiwKICAgICAgImZsYWdzIiwKICAgICAgImZsYWtzIiwKICAgICAgImZsYW1tIiwKICAgICAgImZsYW1zIiwKICAgICAgImZsYW15IiwKICAgICAgImZsYW5lIiwKICAgICAgImZsYW5zIiwKICAgICAgImZsYXBzIiwKICAgICAgImZsYXJ5IiwKICAgICAgImZsYXRzIiwKICAgICAgImZsYXZhIiwKICAgICAgImZsYXduIiwKICAgICAgImZsYXdzIiwKICAgICAgImZsYXd5IiwKICAgICAgImZsYXh5IiwKICAgICAgImZsYXlzIiwKICAgICAgImZsZWFtIiwKICAgICAgImZsZWFzIiwKICAgICAgImZsZWVrIiwKICAgICAgImZsZWVyIiwKICAgICAgImZsZWVzIiwKICAgICAgImZsZWdzIiwKICAgICAgImZsZW1lIiwKICAgICAgImZsZXVyIiwKICAgICAgImZsZXdzIiwKICAgICAgImZsZXhpIiwKICAgICAgImZsZXhvIiwKICAgICAgImZsZXlzIiwKICAgICAgImZsaWNzIiwKICAgICAgImZsaWVkIiwKICAgICAgImZsaWVzIiwKICAgICAgImZsaW1wIiwKICAgICAgImZsaW1zIiwKICAgICAgImZsaXBzIiwKICAgICAgImZsaXJzIiwKICAgICAgImZsaXNrIiwKICAgICAgImZsaXRlIiwKICAgICAgImZsaXRzIiwKICAgICAgImZsaXR0IiwKICAgICAgImZsb2JzIiwKICAgICAgImZsb2NzIiwKICAgICAgImZsb2VzIiwKICAgICAgImZsb2dzIiwKICAgICAgImZsb25nIiwKICAgICAgImZsb3BzIiwKICAgICAgImZsb3JzIiwKICAgICAgImZsb3J5IiwKICAgICAgImZsb3NoIiwKICAgICAgImZsb3RhIiwKICAgICAgImZsb3RlIiwKICAgICAgImZsb3dzIiwKICAgICAgImZsdWJzIiwKICAgICAgImZsdWVkIiwKICAgICAgImZsdWVzIiwKICAgICAgImZsdWV5IiwKICAgICAgImZsdWt5IiwKICAgICAgImZsdW1wIiwKICAgICAgImZsdW9yIiwKICAgICAgImZsdXJyIiwKICAgICAgImZsdXR5IiwKICAgICAgImZsdXl0IiwKICAgICAgImZseWJ5IiwKICAgICAgImZseXBlIiwKICAgICAgImZseXRlIiwKICAgICAgImZvYWxzIiwKICAgICAgImZvYW1zIiwKICAgICAgImZvZWhuIiwKICAgICAgImZvZ2V5IiwKICAgICAgImZvZ2llIiwKICAgICAgImZvZ2xlIiwKICAgICAgImZvZ291IiwKICAgICAgImZvaG5zIiwKICAgICAgImZvaWRzIiwKICAgICAgImZvaWxzIiwKICAgICAgImZvaW5zIiwKICAgICAgImZvbGRzIiwKICAgICAgImZvbGV5IiwKICAgICAgImZvbGlhIiwKICAgICAgImZvbGljIiwKICAgICAgImZvbGllIiwKICAgICAgImZvbGtzIiwKICAgICAgImZvbGt5IiwKICAgICAgImZvbWVzIiwKICAgICAgImZvbmRhIiwKICAgICAgImZvbmRzIiwKICAgICAgImZvbmR1IiwKICAgICAgImZvbmVzIiwKICAgICAgImZvbmx5IiwKICAgICAgImZvbnRzIiwKICAgICAgImZvb2RzIiwKICAgICAgImZvb2R5IiwKICAgICAgImZvb2xzIiwKICAgICAgImZvb3RzIiwKICAgICAgImZvb3R5IiwKICAgICAgImZvcmFtIiwKICAgICAgImZvcmJzIiwKICAgICAgImZvcmJ5IiwKICAgICAgImZvcmRvIiwKICAgICAgImZvcmRzIiwKICAgICAgImZvcmVsIiwKICAgICAgImZvcmVzIiwKICAgICAgImZvcmV4IiwKICAgICAgImZvcmtzIiwKICAgICAgImZvcmt5IiwKICAgICAgImZvcm1lIiwKICAgICAgImZvcm1zIiwKICAgICAgImZvcnRzIiwKICAgICAgImZvcnphIiwKICAgICAgImZvcnplIiwKICAgICAgImZvc3NhIiwKICAgICAgImZvc3NlIiwKICAgICAgImZvdWF0IiwKICAgICAgImZvdWRzIiwKICAgICAgImZvdWVyIiwKICAgICAgImZvdWV0IiwKICAgICAgImZvdWxlIiwKICAgICAgImZvdWxzIiwKICAgICAgImZvdW50IiwKICAgICAgImZvdXJzIiwKICAgICAgImZvdXRoIiwKICAgICAgImZvdmVhIiwKICAgICAgImZvd2xzIiwKICAgICAgImZvd3RoIiwKICAgICAgImZveGVkIiwKICAgICAgImZveGVzIiwKICAgICAgImZveGllIiwKICAgICAgImZveWxlIiwKICAgICAgImZveW5lIiwKICAgICAgImZyYWJzIiwKICAgICAgImZyYWNrIiwKICAgICAgImZyYWN0IiwKICAgICAgImZyYWdzIiwKICAgICAgImZyYWltIiwKICAgICAgImZyYW5jIiwKICAgICAgImZyYXBlIiwKICAgICAgImZyYXBzIiwKICAgICAgImZyYXNzIiwKICAgICAgImZyYXRlIiwKICAgICAgImZyYXRpIiwKICAgICAgImZyYXRzIiwKICAgICAgImZyYXVzIiwKICAgICAgImZyYXlzIiwKICAgICAgImZyZWVzIiwKICAgICAgImZyZWV0IiwKICAgICAgImZyZWl0IiwKICAgICAgImZyZW1kIiwKICAgICAgImZyZW5hIiwKICAgICAgImZyZW9uIiwKICAgICAgImZyZXJlIiwKICAgICAgImZyZXRzIiwKICAgICAgImZyaWJzIiwKICAgICAgImZyaWVyIiwKICAgICAgImZyaWVzIiwKICAgICAgImZyaWdzIiwKICAgICAgImZyaXNlIiwKICAgICAgImZyaXN0IiwKICAgICAgImZyaXRoIiwKICAgICAgImZyaXRzIiwKICAgICAgImZyaXR0IiwKICAgICAgImZyaXplIiwKICAgICAgImZyaXp6IiwKICAgICAgImZyb2VzIiwKICAgICAgImZyb2dzIiwKICAgICAgImZyb25zIiwKICAgICAgImZyb3JlIiwKICAgICAgImZyb3JuIiwKICAgICAgImZyb3J5IiwKICAgICAgImZyb3NoIiwKICAgICAgImZyb3dzIiwKICAgICAgImZyb3d5IiwKICAgICAgImZydWdzIiwKICAgICAgImZydW1wIiwKICAgICAgImZydXNoIiwKICAgICAgImZydXN0IiwKICAgICAgImZyeWVyIiwKICAgICAgImZ1YmFyIiwKICAgICAgImZ1YmJ5IiwKICAgICAgImZ1YnN5IiwKICAgICAgImZ1Y2tzIiwKICAgICAgImZ1Y3VzIiwKICAgICAgImZ1ZGR5IiwKICAgICAgImZ1ZGd5IiwKICAgICAgImZ1ZWxzIiwKICAgICAgImZ1ZXJvIiwKICAgICAgImZ1ZmZzIiwKICAgICAgImZ1ZmZ5IiwKICAgICAgImZ1Z2FsIiwKICAgICAgImZ1Z2d5IiwKICAgICAgImZ1Z2llIiwKICAgICAgImZ1Z2lvIiwKICAgICAgImZ1Z2xlIiwKICAgICAgImZ1Z2x5IiwKICAgICAgImZ1Z3VzIiwKICAgICAgImZ1amlzIiwKICAgICAgImZ1bGxzIiwKICAgICAgImZ1bWVkIiwKICAgICAgImZ1bWVyIiwKICAgICAgImZ1bWVzIiwKICAgICAgImZ1bWV0IiwKICAgICAgImZ1bmRpIiwKICAgICAgImZ1bmRzIiwKICAgICAgImZ1bmR5IiwKICAgICAgImZ1bmdvIiwKICAgICAgImZ1bmdzIiwKICAgICAgImZ1bmtzIiwKICAgICAgImZ1cmFsIiwKICAgICAgImZ1cmFuIiwKICAgICAgImZ1cmNhIiwKICAgICAgImZ1cmxzIiwKICAgICAgImZ1cm9sIiwKICAgICAgImZ1cnJzIiwKICAgICAgImZ1cnRoIiwKICAgICAgImZ1cnplIiwKICAgICAgImZ1cnp5IiwKICAgICAgImZ1c2VkIiwKICAgICAgImZ1c2VlIiwKICAgICAgImZ1c2VsIiwKICAgICAgImZ1c2VzIiwKICAgICAgImZ1c2lsIiwKICAgICAgImZ1c2tzIiwKICAgICAgImZ1c3RzIiwKICAgICAgImZ1c3R5IiwKICAgICAgImZ1dG9uIiwKICAgICAgImZ1emVkIiwKICAgICAgImZ1emVlIiwKICAgICAgImZ1emVzIiwKICAgICAgImZ1emlsIiwKICAgICAgImZ5Y2VzIiwKICAgICAgImZ5a2VkIiwKICAgICAgImZ5a2VzIiwKICAgICAgImZ5bGVzIiwKICAgICAgImZ5cmRzIiwKICAgICAgImZ5dHRlIiwKICAgICAgImdhYmJhIiwKICAgICAgImdhYmJ5IiwKICAgICAgImdhYmxlIiwKICAgICAgImdhZGRpIiwKICAgICAgImdhZGVzIiwKICAgICAgImdhZGdlIiwKICAgICAgImdhZGlkIiwKICAgICAgImdhZGlzIiwKICAgICAgImdhZGplIiwKICAgICAgImdhZGpvIiwKICAgICAgImdhZHNvIiwKICAgICAgImdhZmZzIiwKICAgICAgImdhZ2VkIiwKICAgICAgImdhZ2VyIiwKICAgICAgImdhZ2VzIiwKICAgICAgImdhaWRzIiwKICAgICAgImdhaW5zIiwKICAgICAgImdhaXJzIiwKICAgICAgImdhaXRhIiwKICAgICAgImdhaXRzIiwKICAgICAgImdhaXR0IiwKICAgICAgImdham9zIiwKICAgICAgImdhbGFoIiwKICAgICAgImdhbGFzIiwKICAgICAgImdhbGF4IiwKICAgICAgImdhbGVhIiwKICAgICAgImdhbGVkIiwKICAgICAgImdhbGVzIiwKICAgICAgImdhbGxzIiwKICAgICAgImdhbGx5IiwKICAgICAgImdhbG9wIiwKICAgICAgImdhbHV0IiwKICAgICAgImdhbHZvIiwKICAgICAgImdhbWFzIiwKICAgICAgImdhbWF5IiwKICAgICAgImdhbWJhIiwKICAgICAgImdhbWJlIiwKICAgICAgImdhbWJvIiwKICAgICAgImdhbWJzIiwKICAgICAgImdhbWVkIiwKICAgICAgImdhbWVzIiwKICAgICAgImdhbWV5IiwKICAgICAgImdhbWljIiwKICAgICAgImdhbWluIiwKICAgICAgImdhbW1lIiwKICAgICAgImdhbW15IiwKICAgICAgImdhbXBzIiwKICAgICAgImdhbmNoIiwKICAgICAgImdhbmR5IiwKICAgICAgImdhbmVmIiwKICAgICAgImdhbmV2IiwKICAgICAgImdhbmdzIiwKICAgICAgImdhbmphIiwKICAgICAgImdhbm9mIiwKICAgICAgImdhbnRzIiwKICAgICAgImdhb2xzIiwKICAgICAgImdhcGVkIiwKICAgICAgImdhcGVyIiwKICAgICAgImdhcGVzIiwKICAgICAgImdhcG9zIiwKICAgICAgImdhcHB5IiwKICAgICAgImdhcmJlIiwKICAgICAgImdhcmJvIiwKICAgICAgImdhcmJzIiwKICAgICAgImdhcmRhIiwKICAgICAgImdhcmVzIiwKICAgICAgImdhcmlzIiwKICAgICAgImdhcm1zIiwKICAgICAgImdhcm5pIiwKICAgICAgImdhcnJlIiwKICAgICAgImdhcnRoIiwKICAgICAgImdhcnVtIiwKICAgICAgImdhc2VzIiwKICAgICAgImdhc3BzIiwKICAgICAgImdhc3B5IiwKICAgICAgImdhc3RzIiwKICAgICAgImdhdGNoIiwKICAgICAgImdhdGVkIiwKICAgICAgImdhdGVyIiwKICAgICAgImdhdGVzIiwKICAgICAgImdhdGhzIiwKICAgICAgImdhdG9yIiwKICAgICAgImdhdWNoIiwKICAgICAgImdhdWN5IiwKICAgICAgImdhdWRzIiwKICAgICAgImdhdWplIiwKICAgICAgImdhdWx0IiwKICAgICAgImdhdW1zIiwKICAgICAgImdhdW15IiwKICAgICAgImdhdXBzIiwKICAgICAgImdhdXJzIiwKICAgICAgImdhdXNzIiwKICAgICAgImdhdXp5IiwKICAgICAgImdhdm90IiwKICAgICAgImdhd2N5IiwKICAgICAgImdhd2RzIiwKICAgICAgImdhd2tzIiwKICAgICAgImdhd3BzIiwKICAgICAgImdhd3N5IiwKICAgICAgImdheWFsIiwKICAgICAgImdhemFsIiwKICAgICAgImdhemFyIiwKICAgICAgImdhemVkIiwKICAgICAgImdhemVzIiwKICAgICAgImdhem9uIiwKICAgICAgImdhem9vIiwKICAgICAgImdlYWxzIiwKICAgICAgImdlYW5zIiwKICAgICAgImdlYXJlIiwKICAgICAgImdlYXJzIiwKICAgICAgImdlYXRzIiwKICAgICAgImdlYnVyIiwKICAgICAgImdlY2tzIiwKICAgICAgImdlZWtzIiwKICAgICAgImdlZXBzIiwKICAgICAgImdlZXN0IiwKICAgICAgImdlaXN0IiwKICAgICAgImdlaXRzIiwKICAgICAgImdlbGRzIiwKICAgICAgImdlbGVlIiwKICAgICAgImdlbGlkIiwKICAgICAgImdlbGx5IiwKICAgICAgImdlbHRzIiwKICAgICAgImdlbWVsIiwKICAgICAgImdlbW1hIiwKICAgICAgImdlbW15IiwKICAgICAgImdlbW90IiwKICAgICAgImdlbmFsIiwKICAgICAgImdlbmFzIiwKICAgICAgImdlbmVzIiwKICAgICAgImdlbmV0IiwKICAgICAgImdlbmljIiwKICAgICAgImdlbmlpIiwKICAgICAgImdlbmlwIiwKICAgICAgImdlbm55IiwKICAgICAgImdlbm9hIiwKICAgICAgImdlbm9tIiwKICAgICAgImdlbnJvIiwKICAgICAgImdlbnRzIiwKICAgICAgImdlbnR5IiwKICAgICAgImdlbnVhIiwKICAgICAgImdlbnVzIiwKICAgICAgImdlb2RlIiwKICAgICAgImdlb2lkIiwKICAgICAgImdlcmFoIiwKICAgICAgImdlcmJlIiwKICAgICAgImdlcmVzIiwKICAgICAgImdlcmxlIiwKICAgICAgImdlcm1zIiwKICAgICAgImdlcm15IiwKICAgICAgImdlcm5lIiwKICAgICAgImdlc3NlIiwKICAgICAgImdlc3NvIiwKICAgICAgImdlc3RlIiwKICAgICAgImdlc3RzIiwKICAgICAgImdldGFzIiwKICAgICAgImdldHVwIiwKICAgICAgImdldW1zIiwKICAgICAgImdleWFuIiwKICAgICAgImdleWVyIiwKICAgICAgImdoYXN0IiwKICAgICAgImdoYXRzIiwKICAgICAgImdoYXV0IiwKICAgICAgImdoYXppIiwKICAgICAgImdoZWVzIiwKICAgICAgImdoZXN0IiwKICAgICAgImdoeWxsIiwKICAgICAgImdpYmVkIiwKICAgICAgImdpYmVsIiwKICAgICAgImdpYmVyIiwKICAgICAgImdpYmVzIiwKICAgICAgImdpYmxpIiwKICAgICAgImdpYnVzIiwKICAgICAgImdpZnRzIiwKICAgICAgImdpZ2FzIiwKICAgICAgImdpZ2hlIiwKICAgICAgImdpZ290IiwKICAgICAgImdpZ3VlIiwKICAgICAgImdpbGFzIiwKICAgICAgImdpbGRzIiwKICAgICAgImdpbGV0IiwKICAgICAgImdpbGxzIiwKICAgICAgImdpbGx5IiwKICAgICAgImdpbHB5IiwKICAgICAgImdpbHRzIiwKICAgICAgImdpbWVsIiwKICAgICAgImdpbW1lIiwKICAgICAgImdpbXBzIiwKICAgICAgImdpbXB5IiwKICAgICAgImdpbmNoIiwKICAgICAgImdpbmdlIiwKICAgICAgImdpbmdzIiwKICAgICAgImdpbmtzIiwKICAgICAgImdpbm55IiwKICAgICAgImdpbnpvIiwKICAgICAgImdpcG9uIiwKICAgICAgImdpcHBvIiwKICAgICAgImdpcHB5IiwKICAgICAgImdpcmRzIiwKICAgICAgImdpcmxzIiwKICAgICAgImdpcm5zIiwKICAgICAgImdpcm9uIiwKICAgICAgImdpcm9zIiwKICAgICAgImdpcnJzIiwKICAgICAgImdpcnNoIiwKICAgICAgImdpcnRzIiwKICAgICAgImdpc21vIiwKICAgICAgImdpc21zIiwKICAgICAgImdpc3RzIiwKICAgICAgImdpdGNoIiwKICAgICAgImdpdGVzIiwKICAgICAgImdpdXN0IiwKICAgICAgImdpdmVkIiwKICAgICAgImdpdmVzIiwKICAgICAgImdpem1vIiwKICAgICAgImdsYWNlIiwKICAgICAgImdsYWRzIiwKICAgICAgImdsYWR5IiwKICAgICAgImdsYWlrIiwKICAgICAgImdsYWlyIiwKICAgICAgImdsYW1zIiwKICAgICAgImdsYW5zIiwKICAgICAgImdsYXJ5IiwKICAgICAgImdsYXVtIiwKICAgICAgImdsYXVyIiwKICAgICAgImdsYXp5IiwKICAgICAgImdsZWJhIiwKICAgICAgImdsZWJlIiwKICAgICAgImdsZWJ5IiwKICAgICAgImdsZWRlIiwKICAgICAgImdsZWRzIiwKICAgICAgImdsZWVkIiwKICAgICAgImdsZWVrIiwKICAgICAgImdsZWVzIiwKICAgICAgImdsZWV0IiwKICAgICAgImdsZWlzIiwKICAgICAgImdsZW5zIiwKICAgICAgImdsZW50IiwKICAgICAgImdsZXlzIiwKICAgICAgImdsaWFsIiwKICAgICAgImdsaWFzIiwKICAgICAgImdsaWJzIiwKICAgICAgImdsaWZmIiwKICAgICAgImdsaWZ0IiwKICAgICAgImdsaWtlIiwKICAgICAgImdsaW1lIiwKICAgICAgImdsaW1zIiwKICAgICAgImdsaXNrIiwKICAgICAgImdsaXRzIiwKICAgICAgImdsaXR6IiwKICAgICAgImdsb2FtIiwKICAgICAgImdsb2JpIiwKICAgICAgImdsb2JzIiwKICAgICAgImdsb2J5IiwKICAgICAgImdsb2RlIiwKICAgICAgImdsb2dnIiwKICAgICAgImdsb21zIiwKICAgICAgImdsb29wIiwKICAgICAgImdsb3BzIiwKICAgICAgImdsb3N0IiwKICAgICAgImdsb3V0IiwKICAgICAgImdsb3dzIiwKICAgICAgImdsb3plIiwKICAgICAgImdsdWVkIiwKICAgICAgImdsdWVyIiwKICAgICAgImdsdWVzIiwKICAgICAgImdsdWV5IiwKICAgICAgImdsdWdzIiwKICAgICAgImdsdW1lIiwKICAgICAgImdsdW1zIiwKICAgICAgImdsdW9uIiwKICAgICAgImdsdXRlIiwKICAgICAgImdsdXRzIiwKICAgICAgImduYXJsIiwKICAgICAgImduYXJyIiwKICAgICAgImduYXJzIiwKICAgICAgImduYXRzIiwKICAgICAgImduYXduIiwKICAgICAgImduYXdzIiwKICAgICAgImdub3dzIiwKICAgICAgImdvYWRzIiwKICAgICAgImdvYWZzIiwKICAgICAgImdvYWxzIiwKICAgICAgImdvYXJ5IiwKICAgICAgImdvYXRzIiwKICAgICAgImdvYXR5IiwKICAgICAgImdvYmFuIiwKICAgICAgImdvYmFyIiwKICAgICAgImdvYmJpIiwKICAgICAgImdvYmJvIiwKICAgICAgImdvYmJ5IiwKICAgICAgImdvYmlzIiwKICAgICAgImdvYm9zIiwKICAgICAgImdvZGV0IiwKICAgICAgImdvZHNvIiwKICAgICAgImdvZWxzIiwKICAgICAgImdvZXJzIiwKICAgICAgImdvZXN0IiwKICAgICAgImdvZXRoIiwKICAgICAgImdvZXR5IiwKICAgICAgImdvZmVyIiwKICAgICAgImdvZmZzIiwKICAgICAgImdvZ2dhIiwKICAgICAgImdvZ29zIiwKICAgICAgImdvaWVyIiwKICAgICAgImdvamlzIiwKICAgICAgImdvbGRzIiwKICAgICAgImdvbGR5IiwKICAgICAgImdvbGVzIiwKICAgICAgImdvbGZzIiwKICAgICAgImdvbHBlIiwKICAgICAgImdvbHBzIiwKICAgICAgImdvbWJvIiwKICAgICAgImdvbWVyIiwKICAgICAgImdvbXBhIiwKICAgICAgImdvbmNoIiwKICAgICAgImdvbmVmIiwKICAgICAgImdvbmdzIiwKICAgICAgImdvbmlhIiwKICAgICAgImdvbmlmIiwKICAgICAgImdvbmtzIiwKICAgICAgImdvbm5hIiwKICAgICAgImdvbm9mIiwKICAgICAgImdvbnlzIiwKICAgICAgImdvbnpvIiwKICAgICAgImdvb2J5IiwKICAgICAgImdvb2RzIiwKICAgICAgImdvb2ZzIiwKICAgICAgImdvb2dzIiwKICAgICAgImdvb2tzIiwKICAgICAgImdvb2t5IiwKICAgICAgImdvb2xkIiwKICAgICAgImdvb2xzIiwKICAgICAgImdvb2x5IiwKICAgICAgImdvb25zIiwKICAgICAgImdvb255IiwKICAgICAgImdvb3BzIiwKICAgICAgImdvb3B5IiwKICAgICAgImdvb3JzIiwKICAgICAgImdvb3J5IiwKICAgICAgImdvb3N5IiwKICAgICAgImdvcGFrIiwKICAgICAgImdvcGlrIiwKICAgICAgImdvcmFsIiwKICAgICAgImdvcmFzIiwKICAgICAgImdvcmVkIiwKICAgICAgImdvcmVzIiwKICAgICAgImdvcmlzIiwKICAgICAgImdvcm1zIiwKICAgICAgImdvcm15IiwKICAgICAgImdvcnBzIiwKICAgICAgImdvcnNlIiwKICAgICAgImdvcnN5IiwKICAgICAgImdvc2h0IiwKICAgICAgImdvc3NlIiwKICAgICAgImdvdGNoIiwKICAgICAgImdvdGhzIiwKICAgICAgImdvdGh5IiwKICAgICAgImdvdHRhIiwKICAgICAgImdvdWNoIiwKICAgICAgImdvdWtzIiwKICAgICAgImdvdXJhIiwKICAgICAgImdvdXRzIiwKICAgICAgImdvdXR5IiwKICAgICAgImdvd2FuIiwKICAgICAgImdvd2RzIiwKICAgICAgImdvd2ZzIiwKICAgICAgImdvd2tzIiwKICAgICAgImdvd2xzIiwKICAgICAgImdvd25zIiwKICAgICAgImdveGVzIiwKICAgICAgImdveWltIiwKICAgICAgImdveWxlIiwKICAgICAgImdyYWFsIiwKICAgICAgImdyYWJzIiwKICAgICAgImdyYWRzIiwKICAgICAgImdyYWZmIiwKICAgICAgImdyYWlwIiwKICAgICAgImdyYW1hIiwKICAgICAgImdyYW1lIiwKICAgICAgImdyYW1wIiwKICAgICAgImdyYW1zIiwKICAgICAgImdyYW5hIiwKICAgICAgImdyYW5zIiwKICAgICAgImdyYXB5IiwKICAgICAgImdyYXZzIiwKICAgICAgImdyYXlzIiwKICAgICAgImdyZWJlIiwKICAgICAgImdyZWJvIiwKICAgICAgImdyZWNlIiwKICAgICAgImdyZWVrIiwKICAgICAgImdyZWVzIiwKICAgICAgImdyZWdlIiwKICAgICAgImdyZWdvIiwKICAgICAgImdyZWluIiwKICAgICAgImdyZW5zIiwKICAgICAgImdyZXNlIiwKICAgICAgImdyZXZlIiwKICAgICAgImdyZXdzIiwKICAgICAgImdyZXlzIiwKICAgICAgImdyaWNlIiwKICAgICAgImdyaWRlIiwKICAgICAgImdyaWRzIiwKICAgICAgImdyaWZmIiwKICAgICAgImdyaWZ0IiwKICAgICAgImdyaWdzIiwKICAgICAgImdyaWtlIiwKICAgICAgImdyaW5zIiwKICAgICAgImdyaW90IiwKICAgICAgImdyaXBzIiwKICAgICAgImdyaXB0IiwKICAgICAgImdyaXB5IiwKICAgICAgImdyaXNlIiwKICAgICAgImdyaXN0IiwKICAgICAgImdyaXN5IiwKICAgICAgImdyaXRoIiwKICAgICAgImdyaXRzIiwKICAgICAgImdyaXplIiwKICAgICAgImdyb2F0IiwKICAgICAgImdyb2R5IiwKICAgICAgImdyb2dzIiwKICAgICAgImdyb2tzIiwKICAgICAgImdyb21hIiwKICAgICAgImdyb25lIiwKICAgICAgImdyb29mIiwKICAgICAgImdyb3N6IiwKICAgICAgImdyb3RzIiwKICAgICAgImdyb3VmIiwKICAgICAgImdyb3Z5IiwKICAgICAgImdyb3dzIiwKICAgICAgImdycmxzIiwKICAgICAgImdycnJsIiwKICAgICAgImdydWJzIiwKICAgICAgImdydWVkIiwKICAgICAgImdydWVzIiwKICAgICAgImdydWZlIiwKICAgICAgImdydW1lIiwKICAgICAgImdydW1wIiwKICAgICAgImdydW5kIiwKICAgICAgImdyeWNlIiwKICAgICAgImdyeWRlIiwKICAgICAgImdyeWtlIiwKICAgICAgImdyeXBlIiwKICAgICAgImdyeXB0IiwKICAgICAgImd1YWNvIiwKICAgICAgImd1YW5hIiwKICAgICAgImd1YW5vIiwKICAgICAgImd1YW5zIiwKICAgICAgImd1YXJzIiwKICAgICAgImd1Y2tzIiwKICAgICAgImd1Y2t5IiwKICAgICAgImd1ZGVzIiwKICAgICAgImd1ZmZzIiwKICAgICAgImd1Z2FzIiwKICAgICAgImd1aWRzIiwKICAgICAgImd1aW1wIiwKICAgICAgImd1aXJvIiwKICAgICAgImd1bGFnIiwKICAgICAgImd1bGFyIiwKICAgICAgImd1bGFzIiwKICAgICAgImd1bGVzIiwKICAgICAgImd1bGV0IiwKICAgICAgImd1bGZzIiwKICAgICAgImd1bGZ5IiwKICAgICAgImd1bGxzIiwKICAgICAgImd1bHBoIiwKICAgICAgImd1bHBzIiwKICAgICAgImd1bHB5IiwKICAgICAgImd1bW1hIiwKICAgICAgImd1bW1pIiwKICAgICAgImd1bXBzIiwKICAgICAgImd1bmR5IiwKICAgICAgImd1bmdlIiwKICAgICAgImd1bmd5IiwKICAgICAgImd1bmtzIiwKICAgICAgImd1bmt5IiwKICAgICAgImd1bm55IiwKICAgICAgImd1cWluIiwKICAgICAgImd1cmR5IiwKICAgICAgImd1cmdlIiwKICAgICAgImd1cmxzIiwKICAgICAgImd1cmx5IiwKICAgICAgImd1cm5zIiwKICAgICAgImd1cnJ5IiwKICAgICAgImd1cnNoIiwKICAgICAgImd1cnVzIiwKICAgICAgImd1c2h5IiwKICAgICAgImd1c2xhIiwKICAgICAgImd1c2xlIiwKICAgICAgImd1c2xpIiwKICAgICAgImd1c3N5IiwKICAgICAgImd1c3RzIiwKICAgICAgImd1dHN5IiwKICAgICAgImd1dHRhIiwKICAgICAgImd1dHR5IiwKICAgICAgImd1eWVkIiwKICAgICAgImd1eWxlIiwKICAgICAgImd1eW90IiwKICAgICAgImd1eXNlIiwKICAgICAgImd3aW5lIiwKICAgICAgImd5YWxzIiwKICAgICAgImd5YW5zIiwKICAgICAgImd5YmVkIiwKICAgICAgImd5YmVzIiwKICAgICAgImd5ZWxkIiwKICAgICAgImd5bXBzIiwKICAgICAgImd5bmFlIiwKICAgICAgImd5bmllIiwKICAgICAgImd5bm55IiwKICAgICAgImd5bm9zIiwKICAgICAgImd5b3phIiwKICAgICAgImd5cG9zIiwKICAgICAgImd5cHBvIiwKICAgICAgImd5cHB5IiwKICAgICAgImd5cmFsIiwKICAgICAgImd5cmVkIiwKICAgICAgImd5cmVzIiwKICAgICAgImd5cm9uIiwKICAgICAgImd5cm9zIiwKICAgICAgImd5cnVzIiwKICAgICAgImd5dGVzIiwKICAgICAgImd5dmVkIiwKICAgICAgImd5dmVzIiwKICAgICAgImhhYWZzIiwKICAgICAgImhhYXJzIiwKICAgICAgImhhYmxlIiwKICAgICAgImhhYnVzIiwKICAgICAgImhhY2VrIiwKICAgICAgImhhY2tzIiwKICAgICAgImhhZGFsIiwKICAgICAgImhhZGVkIiwKICAgICAgImhhZGVzIiwKICAgICAgImhhZGppIiwKICAgICAgImhhZHN0IiwKICAgICAgImhhZW1zIiwKICAgICAgImhhZXRzIiwKICAgICAgImhhZmZzIiwKICAgICAgImhhZml6IiwKICAgICAgImhhZnRzIiwKICAgICAgImhhZ2dzIiwKICAgICAgImhhaGFzIiwKICAgICAgImhhaWNrIiwKICAgICAgImhhaWthIiwKICAgICAgImhhaWtzIiwKICAgICAgImhhaWt1IiwKICAgICAgImhhaWxzIiwKICAgICAgImhhaWx5IiwKICAgICAgImhhaW5zIiwKICAgICAgImhhaW50IiwKICAgICAgImhhaXJzIiwKICAgICAgImhhaXRoIiwKICAgICAgImhhamVzIiwKICAgICAgImhhamlzIiwKICAgICAgImhhamppIiwKICAgICAgImhha2FtIiwKICAgICAgImhha2FzIiwKICAgICAgImhha2VhIiwKICAgICAgImhha2VzIiwKICAgICAgImhha2ltIiwKICAgICAgImhha3VzIiwKICAgICAgImhhbGFsIiwKICAgICAgImhhbGVkIiwKICAgICAgImhhbGVyIiwKICAgICAgImhhbGVzIiwKICAgICAgImhhbGZhIiwKICAgICAgImhhbGZzIiwKICAgICAgImhhbGlkIiwKICAgICAgImhhbGxvIiwKICAgICAgImhhbGxzIiwKICAgICAgImhhbG1hIiwKICAgICAgImhhbG1zIiwKICAgICAgImhhbG9uIiwKICAgICAgImhhbG9zIiwKICAgICAgImhhbHNlIiwKICAgICAgImhhbHRzIiwKICAgICAgImhhbHZhIiwKICAgICAgImhhbHdhIiwKICAgICAgImhhbWFsIiwKICAgICAgImhhbWJhIiwKICAgICAgImhhbWVkIiwKICAgICAgImhhbWVzIiwKICAgICAgImhhbW15IiwKICAgICAgImhhbXphIiwKICAgICAgImhhbmFwIiwKICAgICAgImhhbmNlIiwKICAgICAgImhhbmNoIiwKICAgICAgImhhbmRzIiwKICAgICAgImhhbmdpIiwKICAgICAgImhhbmdzIiwKICAgICAgImhhbmtzIiwKICAgICAgImhhbmt5IiwKICAgICAgImhhbnNhIiwKICAgICAgImhhbnNlIiwKICAgICAgImhhbnRzIiwKICAgICAgImhhb2xlIiwKICAgICAgImhhb21hIiwKICAgICAgImhhcGF4IiwKICAgICAgImhhcGx5IiwKICAgICAgImhhcHBpIiwKICAgICAgImhhcHVzIiwKICAgICAgImhhcmFtIiwKICAgICAgImhhcmRzIiwKICAgICAgImhhcmVkIiwKICAgICAgImhhcmVzIiwKICAgICAgImhhcmltIiwKICAgICAgImhhcmtzIiwKICAgICAgImhhcmxzIiwKICAgICAgImhhcm1zIiwKICAgICAgImhhcm5zIiwKICAgICAgImhhcm9zIiwKICAgICAgImhhcnBzIiwKICAgICAgImhhcnRzIiwKICAgICAgImhhc2h5IiwKICAgICAgImhhc2tzIiwKICAgICAgImhhc3BzIiwKICAgICAgImhhc3RhIiwKICAgICAgImhhdGVkIiwKICAgICAgImhhdGVzIiwKICAgICAgImhhdGhhIiwKICAgICAgImhhdWRzIiwKICAgICAgImhhdWZzIiwKICAgICAgImhhdWdoIiwKICAgICAgImhhdWxkIiwKICAgICAgImhhdWxtIiwKICAgICAgImhhdWxzIiwKICAgICAgImhhdWx0IiwKICAgICAgImhhdW5zIiwKICAgICAgImhhdXNlIiwKICAgICAgImhhdmVyIiwKICAgICAgImhhdmVzIiwKICAgICAgImhhd2VkIiwKICAgICAgImhhd2tzIiwKICAgICAgImhhd21zIiwKICAgICAgImhhd3NlIiwKICAgICAgImhheWVkIiwKICAgICAgImhheWVyIiwKICAgICAgImhheWV5IiwKICAgICAgImhheWxlIiwKICAgICAgImhhemFuIiwKICAgICAgImhhemVkIiwKICAgICAgImhhemVyIiwKICAgICAgImhhemVzIiwKICAgICAgImhlYWRzIiwKICAgICAgImhlYWxkIiwKICAgICAgImhlYWxzIiwKICAgICAgImhlYW1lIiwKICAgICAgImhlYXBzIiwKICAgICAgImhlYXB5IiwKICAgICAgImhlYXJlIiwKICAgICAgImhlYXJzIiwKICAgICAgImhlYXN0IiwKICAgICAgImhlYXRzIiwKICAgICAgImhlYmVuIiwKICAgICAgImhlYmVzIiwKICAgICAgImhlY2h0IiwKICAgICAgImhlY2tzIiwKICAgICAgImhlZGVyIiwKICAgICAgImhlZGd5IiwKICAgICAgImhlZWRzIiwKICAgICAgImhlZWR5IiwKICAgICAgImhlZWxzIiwKICAgICAgImhlZXplIiwKICAgICAgImhlZnRlIiwKICAgICAgImhlZnRzIiwKICAgICAgImhlaWRzIiwKICAgICAgImhlaWdoIiwKICAgICAgImhlaWxzIiwKICAgICAgImhlaXJzIiwKICAgICAgImhlamFiIiwKICAgICAgImhlanJhIiwKICAgICAgImhlbGVkIiwKICAgICAgImhlbGVzIiwKICAgICAgImhlbGlvIiwKICAgICAgImhlbGxzIiwKICAgICAgImhlbG1zIiwKICAgICAgImhlbG9zIiwKICAgICAgImhlbG90IiwKICAgICAgImhlbHBzIiwKICAgICAgImhlbHZlIiwKICAgICAgImhlbWFsIiwKICAgICAgImhlbWVzIiwKICAgICAgImhlbWljIiwKICAgICAgImhlbWluIiwKICAgICAgImhlbXBzIiwKICAgICAgImhlbXB5IiwKICAgICAgImhlbmNoIiwKICAgICAgImhlbmRzIiwKICAgICAgImhlbmdlIiwKICAgICAgImhlbm5hIiwKICAgICAgImhlbm55IiwKICAgICAgImhlbnJ5IiwKICAgICAgImhlbnRzIiwKICAgICAgImhlcGFyIiwKICAgICAgImhlcmJzIiwKICAgICAgImhlcmJ5IiwKICAgICAgImhlcmRzIiwKICAgICAgImhlcmVzIiwKICAgICAgImhlcmxzIiwKICAgICAgImhlcm1hIiwKICAgICAgImhlcm1zIiwKICAgICAgImhlcm5zIiwKICAgICAgImhlcm9zIiwKICAgICAgImhlcnJ5IiwKICAgICAgImhlcnNlIiwKICAgICAgImhlcnR6IiwKICAgICAgImhlcnllIiwKICAgICAgImhlc3BzIiwKICAgICAgImhlc3RzIiwKICAgICAgImhldGVzIiwKICAgICAgImhldGhzIiwKICAgICAgImhldWNoIiwKICAgICAgImhldWdoIiwKICAgICAgImhldmVhIiwKICAgICAgImhld2VkIiwKICAgICAgImhld2VyIiwKICAgICAgImhld2doIiwKICAgICAgImhleGFkIiwKICAgICAgImhleGVkIiwKICAgICAgImhleGVyIiwKICAgICAgImhleGVzIiwKICAgICAgImhleHlsIiwKICAgICAgImhleWVkIiwKICAgICAgImhpYW50IiwKICAgICAgImhpY2tzIiwKICAgICAgImhpZGVkIiwKICAgICAgImhpZGVyIiwKICAgICAgImhpZGVzIiwKICAgICAgImhpZW1zIiwKICAgICAgImhpZ2hzIiwKICAgICAgImhpZ2h0IiwKICAgICAgImhpamFiIiwKICAgICAgImhpanJhIiwKICAgICAgImhpa2VkIiwKICAgICAgImhpa2VyIiwKICAgICAgImhpa2VzIiwKICAgICAgImhpa29pIiwKICAgICAgImhpbGFyIiwKICAgICAgImhpbGNoIiwKICAgICAgImhpbGxvIiwKICAgICAgImhpbGxzIiwKICAgICAgImhpbHRzIiwKICAgICAgImhpbHVtIiwKICAgICAgImhpbHVzIiwKICAgICAgImhpbWJvIiwKICAgICAgImhpbmF1IiwKICAgICAgImhpbmRzIiwKICAgICAgImhpbmdzIiwKICAgICAgImhpbmt5IiwKICAgICAgImhpbm55IiwKICAgICAgImhpbnRzIiwKICAgICAgImhpb2lzIiwKICAgICAgImhpcGx5IiwKICAgICAgImhpcmVkIiwKICAgICAgImhpcmVlIiwKICAgICAgImhpcmVyIiwKICAgICAgImhpcmVzIiwKICAgICAgImhpc3N5IiwKICAgICAgImhpc3RzIiwKICAgICAgImhpdGhlIiwKICAgICAgImhpdmVkIiwKICAgICAgImhpdmVyIiwKICAgICAgImhpdmVzIiwKICAgICAgImhpemVuIiwKICAgICAgImhvYWVkIiwKICAgICAgImhvYWd5IiwKICAgICAgImhvYXJzIiwKICAgICAgImhvYXJ5IiwKICAgICAgImhvYXN0IiwKICAgICAgImhvYm9zIiwKICAgICAgImhvY2tzIiwKICAgICAgImhvY3VzIiwKICAgICAgImhvZGFkIiwKICAgICAgImhvZGphIiwKICAgICAgImhvZXJzIiwKICAgICAgImhvZ2FuIiwKICAgICAgImhvZ2VuIiwKICAgICAgImhvZ2dzIiwKICAgICAgImhvZ2hzIiwKICAgICAgImhvaGVkIiwKICAgICAgImhvaWNrIiwKICAgICAgImhvaWVkIiwKICAgICAgImhvaWtzIiwKICAgICAgImhvaW5nIiwKICAgICAgImhvaXNlIiwKICAgICAgImhva2FzIiwKICAgICAgImhva2VkIiwKICAgICAgImhva2VzIiwKICAgICAgImhva2V5IiwKICAgICAgImhva2lzIiwKICAgICAgImhva2t1IiwKICAgICAgImhva3VtIiwKICAgICAgImhvbGRzIiwKICAgICAgImhvbGVkIiwKICAgICAgImhvbGVzIiwKICAgICAgImhvbGV5IiwKICAgICAgImhvbGtzIiwKICAgICAgImhvbGxhIiwKICAgICAgImhvbGxvIiwKICAgICAgImhvbG1lIiwKICAgICAgImhvbG1zIiwKICAgICAgImhvbG9uIiwKICAgICAgImhvbG9zIiwKICAgICAgImhvbHRzIiwKICAgICAgImhvbWFzIiwKICAgICAgImhvbWVkIiwKICAgICAgImhvbWVzIiwKICAgICAgImhvbWV5IiwKICAgICAgImhvbWllIiwKICAgICAgImhvbW1lIiwKICAgICAgImhvbW9zIiwKICAgICAgImhvbmFuIiwKICAgICAgImhvbmRhIiwKICAgICAgImhvbmRzIiwKICAgICAgImhvbmVkIiwKICAgICAgImhvbmVyIiwKICAgICAgImhvbmVzIiwKICAgICAgImhvbmdpIiwKICAgICAgImhvbmdzIiwKICAgICAgImhvbmtzIiwKICAgICAgImhvbmt5IiwKICAgICAgImhvb2NoIiwKICAgICAgImhvb2RzIiwKICAgICAgImhvb2R5IiwKICAgICAgImhvb2V5IiwKICAgICAgImhvb2ZzIiwKICAgICAgImhvb2thIiwKICAgICAgImhvb2tzIiwKICAgICAgImhvb2t5IiwKICAgICAgImhvb2x5IiwKICAgICAgImhvb25zIiwKICAgICAgImhvb3BzIiwKICAgICAgImhvb3JkIiwKICAgICAgImhvb3JzIiwKICAgICAgImhvb3NoIiwKICAgICAgImhvb3RzIiwKICAgICAgImhvb3R5IiwKICAgICAgImhvb3ZlIiwKICAgICAgImhvcGFrIiwKICAgICAgImhvcGVkIiwKICAgICAgImhvcGVyIiwKICAgICAgImhvcGVzIiwKICAgICAgImhvcHB5IiwKICAgICAgImhvcmFoIiwKICAgICAgImhvcmFsIiwKICAgICAgImhvcmFzIiwKICAgICAgImhvcmlzIiwKICAgICAgImhvcmtzIiwKICAgICAgImhvcm1lIiwKICAgICAgImhvcm5zIiwKICAgICAgImhvcnN0IiwKICAgICAgImhvcnN5IiwKICAgICAgImhvc2VkIiwKICAgICAgImhvc2VsIiwKICAgICAgImhvc2VuIiwKICAgICAgImhvc2VyIiwKICAgICAgImhvc2VzIiwKICAgICAgImhvc2V5IiwKICAgICAgImhvc3RhIiwKICAgICAgImhvc3RzIiwKICAgICAgImhvdGNoIiwKICAgICAgImhvdGVuIiwKICAgICAgImhvdHR5IiwKICAgICAgImhvdWZmIiwKICAgICAgImhvdWZzIiwKICAgICAgImhvdWdoIiwKICAgICAgImhvdXJpIiwKICAgICAgImhvdXJzIiwKICAgICAgImhvdXRzIiwKICAgICAgImhvdmVhIiwKICAgICAgImhvdmVkIiwKICAgICAgImhvdmVuIiwKICAgICAgImhvdmVzIiwKICAgICAgImhvd2JlIiwKICAgICAgImhvd2VzIiwKICAgICAgImhvd2ZmIiwKICAgICAgImhvd2ZzIiwKICAgICAgImhvd2tzIiwKICAgICAgImhvd2xzIiwKICAgICAgImhvd3JlIiwKICAgICAgImhvd3NvIiwKICAgICAgImhveGVkIiwKICAgICAgImhveGVzIiwKICAgICAgImhveWFzIiwKICAgICAgImhveWVkIiwKICAgICAgImhveWxlIiwKICAgICAgImh1YmJ5IiwKICAgICAgImh1Y2tzIiwKICAgICAgImh1ZG5hIiwKICAgICAgImh1ZHVkIiwKICAgICAgImh1ZXJzIiwKICAgICAgImh1ZmZzIiwKICAgICAgImh1ZmZ5IiwKICAgICAgImh1Z2VyIiwKICAgICAgImh1Z2d5IiwKICAgICAgImh1aHVzIiwKICAgICAgImh1aWFzIiwKICAgICAgImh1bGFzIiwKICAgICAgImh1bGVzIiwKICAgICAgImh1bGtzIiwKICAgICAgImh1bGt5IiwKICAgICAgImh1bGxvIiwKICAgICAgImh1bGxzIiwKICAgICAgImh1bGx5IiwKICAgICAgImh1bWFzIiwKICAgICAgImh1bWZzIiwKICAgICAgImh1bWljIiwKICAgICAgImh1bXBzIiwKICAgICAgImh1bXB5IiwKICAgICAgImh1bmtzIiwKICAgICAgImh1bnRzIiwKICAgICAgImh1cmRzIiwKICAgICAgImh1cmxzIiwKICAgICAgImh1cmx5IiwKICAgICAgImh1cnJhIiwKICAgICAgImh1cnN0IiwKICAgICAgImh1cnRzIiwKICAgICAgImh1c2h5IiwKICAgICAgImh1c2tzIiwKICAgICAgImh1c29zIiwKICAgICAgImh1dGlhIiwKICAgICAgImh1enphIiwKICAgICAgImh1enp5IiwKICAgICAgImh3eWxzIiwKICAgICAgImh5ZHJhIiwKICAgICAgImh5ZW5zIiwKICAgICAgImh5Z2dlIiwKICAgICAgImh5aW5nIiwKICAgICAgImh5a2VzIiwKICAgICAgImh5bGFzIiwKICAgICAgImh5bGVnIiwKICAgICAgImh5bGVzIiwKICAgICAgImh5bGljIiwKICAgICAgImh5bW5zIiwKICAgICAgImh5bmRlIiwKICAgICAgImh5b2lkIiwKICAgICAgImh5cGVkIiwKICAgICAgImh5cGVzIiwKICAgICAgImh5cGhhIiwKICAgICAgImh5cGh5IiwKICAgICAgImh5cG9zIiwKICAgICAgImh5cmF4IiwKICAgICAgImh5c29uIiwKICAgICAgImh5dGhlIiwKICAgICAgImlhbWJpIiwKICAgICAgImlhbWJzIiwKICAgICAgImlicmlrIiwKICAgICAgImljZXJzIiwKICAgICAgImljaGVkIiwKICAgICAgImljaGVzIiwKICAgICAgImljaG9yIiwKICAgICAgImljaWVyIiwKICAgICAgImlja2VyIiwKICAgICAgImlja2xlIiwKICAgICAgImljb25zIiwKICAgICAgImljdGFsIiwKICAgICAgImljdGljIiwKICAgICAgImljdHVzIiwKICAgICAgImlkYW50IiwKICAgICAgImlkZWFzIiwKICAgICAgImlkZWVzIiwKICAgICAgImlkZW50IiwKICAgICAgImlkbGVkIiwKICAgICAgImlkbGVzIiwKICAgICAgImlkb2xhIiwKICAgICAgImlkb2xzIiwKICAgICAgImlkeWxzIiwKICAgICAgImlmdGFyIiwKICAgICAgImlnYXBvIiwKICAgICAgImlnZ2VkIiwKICAgICAgImlnbHVzIiwKICAgICAgImlocmFtIiwKICAgICAgImlrYW5zIiwKICAgICAgImlrYXRzIiwKICAgICAgImlrb25zIiwKICAgICAgImlsZWFjIiwKICAgICAgImlsZWFsIiwKICAgICAgImlsZXVtIiwKICAgICAgImlsZXVzIiwKICAgICAgImlsaWFkIiwKICAgICAgImlsaWFsIiwKICAgICAgImlsaXVtIiwKICAgICAgImlsbGVyIiwKICAgICAgImlsbHRoIiwKICAgICAgImltYWdvIiwKICAgICAgImltYW1zIiwKICAgICAgImltYXJpIiwKICAgICAgImltYXVtIiwKICAgICAgImltYmFyIiwKICAgICAgImltYmVkIiwKICAgICAgImltaWRlIiwKICAgICAgImltaWRvIiwKICAgICAgImltaWRzIiwKICAgICAgImltaW5lIiwKICAgICAgImltaW5vIiwKICAgICAgImltbWV3IiwKICAgICAgImltbWl0IiwKICAgICAgImltbWl4IiwKICAgICAgImltcGVkIiwKICAgICAgImltcGlzIiwKICAgICAgImltcG90IiwKICAgICAgImltcHJvIiwKICAgICAgImltc2hpIiwKICAgICAgImltc2h5IiwKICAgICAgImluYXB0IiwKICAgICAgImluYXJtIiwKICAgICAgImluYnllIiwKICAgICAgImluY2VsIiwKICAgICAgImluY2xlIiwKICAgICAgImluY29nIiwKICAgICAgImluY3VzIiwKICAgICAgImluY3V0IiwKICAgICAgImluZGV3IiwKICAgICAgImluZGlhIiwKICAgICAgImluZGllIiwKICAgICAgImluZG9sIiwKICAgICAgImluZG93IiwKICAgICAgImluZHJpIiwKICAgICAgImluZHVlIiwKICAgICAgImluZXJtIiwKICAgICAgImluZml4IiwKICAgICAgImluZm9zIiwKICAgICAgImluZnJhIiwKICAgICAgImluZ2FuIiwKICAgICAgImluZ2xlIiwKICAgICAgImluaW9uIiwKICAgICAgImlua2VkIiwKICAgICAgImlua2VyIiwKICAgICAgImlua2xlIiwKICAgICAgImlubmVkIiwKICAgICAgImlubml0IiwKICAgICAgImlub3JiIiwKICAgICAgImlucnVuIiwKICAgICAgImluc2V0IiwKICAgICAgImluc3BvIiwKICAgICAgImludGVsIiwKICAgICAgImludGlsIiwKICAgICAgImludGlzIiwKICAgICAgImludHJhIiwKICAgICAgImludWxhIiwKICAgICAgImludXJlIiwKICAgICAgImludXJuIiwKICAgICAgImludXN0IiwKICAgICAgImludmFyIiwKICAgICAgImlud2l0IiwKICAgICAgImlvZGljIiwKICAgICAgImlvZGlkIiwKICAgICAgImlvZGluIiwKICAgICAgImlvdGFzIiwKICAgICAgImlwcG9uIiwKICAgICAgImlyYWRlIiwKICAgICAgImlyaWRzIiwKICAgICAgImlyaW5nIiwKICAgICAgImlya2VkIiwKICAgICAgImlyb2tvIiwKICAgICAgImlyb25lIiwKICAgICAgImlyb25zIiwKICAgICAgImlzYmFzIiwKICAgICAgImlzaGVzIiwKICAgICAgImlzbGVkIiwKICAgICAgImlzbGVzIiwKICAgICAgImlzbmFlIiwKICAgICAgImlzc2VpIiwKICAgICAgImlzdGxlIiwKICAgICAgIml0ZW1zIiwKICAgICAgIml0aGVyIiwKICAgICAgIml2aWVkIiwKICAgICAgIml2aWVzIiwKICAgICAgIml4aWFzIiwKICAgICAgIml4bmF5IiwKICAgICAgIml4b3JhIiwKICAgICAgIml4dGxlIiwKICAgICAgIml6YXJkIiwKICAgICAgIml6YXJzIiwKICAgICAgIml6emF0IiwKICAgICAgImphYXBzIiwKICAgICAgImphYm90IiwKICAgICAgImphY2FsIiwKICAgICAgImphY2tzIiwKICAgICAgImphY2t5IiwKICAgICAgImphZGVkIiwKICAgICAgImphZGVzIiwKICAgICAgImphZmFzIiwKICAgICAgImphZmZhIiwKICAgICAgImphZ2FzIiwKICAgICAgImphZ2VyIiwKICAgICAgImphZ2dzIiwKICAgICAgImphZ2d5IiwKICAgICAgImphZ2lyIiwKICAgICAgImphZ3JhIiwKICAgICAgImphaWxzIiwKICAgICAgImpha2VyIiwKICAgICAgImpha2VzIiwKICAgICAgImpha2V5IiwKICAgICAgImphbGFwIiwKICAgICAgImphbG9wIiwKICAgICAgImphbWJlIiwKICAgICAgImphbWJvIiwKICAgICAgImphbWJzIiwKICAgICAgImphbWJ1IiwKICAgICAgImphbWVzIiwKICAgICAgImphbW15IiwKICAgICAgImphbW9uIiwKICAgICAgImphbmVzIiwKICAgICAgImphbm5zIiwKICAgICAgImphbm55IiwKICAgICAgImphbnR5IiwKICAgICAgImphcGFuIiwKICAgICAgImphcGVkIiwKICAgICAgImphcGVyIiwKICAgICAgImphcGVzIiwKICAgICAgImphcmtzIiwKICAgICAgImphcmxzIiwKICAgICAgImphcnBzIiwKICAgICAgImphcnRhIiwKICAgICAgImphcnVsIiwKICAgICAgImphc2V5IiwKICAgICAgImphc3BlIiwKICAgICAgImphc3BzIiwKICAgICAgImphdG9zIiwKICAgICAgImphdWtzIiwKICAgICAgImphdXBzIiwKICAgICAgImphdmFzIiwKICAgICAgImphdmVsIiwKICAgICAgImphd2FuIiwKICAgICAgImphd2VkIiwKICAgICAgImpheGllIiwKICAgICAgImplYW5zIiwKICAgICAgImplYXRzIiwKICAgICAgImplYmVsIiwKICAgICAgImplZGlzIiwKICAgICAgImplZWxzIiwKICAgICAgImplZWx5IiwKICAgICAgImplZXBzIiwKICAgICAgImplZXJzIiwKICAgICAgImplZXplIiwKICAgICAgImplZmVzIiwKICAgICAgImplZmZzIiwKICAgICAgImplaGFkIiwKICAgICAgImplaHVzIiwKICAgICAgImplbGFiIiwKICAgICAgImplbGxvIiwKICAgICAgImplbGxzIiwKICAgICAgImplbWJlIiwKICAgICAgImplbW15IiwKICAgICAgImplbm55IiwKICAgICAgImplb25zIiwKICAgICAgImplcmlkIiwKICAgICAgImplcmtzIiwKICAgICAgImplcnJ5IiwKICAgICAgImplc3NlIiwKICAgICAgImplc3RzIiwKICAgICAgImplc3VzIiwKICAgICAgImpldGVzIiwKICAgICAgImpldG9uIiwKICAgICAgImpldW5lIiwKICAgICAgImpld2VkIiwKICAgICAgImpld2llIiwKICAgICAgImpoYWxhIiwKICAgICAgImppYW9zIiwKICAgICAgImppYmJhIiwKICAgICAgImppYmJzIiwKICAgICAgImppYmVkIiwKICAgICAgImppYmVyIiwKICAgICAgImppYmVzIiwKICAgICAgImppZmZzIiwKICAgICAgImppZ2d5IiwKICAgICAgImppZ290IiwKICAgICAgImppaGFkIiwKICAgICAgImppbGxzIiwKICAgICAgImppbHRzIiwKICAgICAgImppbW15IiwKICAgICAgImppbXB5IiwKICAgICAgImppbmdvIiwKICAgICAgImppbmtzIiwKICAgICAgImppbm5lIiwKICAgICAgImppbm5pIiwKICAgICAgImppbm5zIiwKICAgICAgImppcmRzIiwKICAgICAgImppcmdhIiwKICAgICAgImppcnJlIiwKICAgICAgImppc21zIiwKICAgICAgImppdmVkIiwKICAgICAgImppdmVyIiwKICAgICAgImppdmVzIiwKICAgICAgImppdmV5IiwKICAgICAgImpuYW5hIiwKICAgICAgImpvYmVkIiwKICAgICAgImpvYmVzIiwKICAgICAgImpvY2tvIiwKICAgICAgImpvY2tzIiwKICAgICAgImpvY2t5IiwKICAgICAgImpvY29zIiwKICAgICAgImpvZGVsIiwKICAgICAgImpvZXlzIiwKICAgICAgImpvaG5zIiwKICAgICAgImpvaW5zIiwKICAgICAgImpva2VkIiwKICAgICAgImpva2VzIiwKICAgICAgImpva2V5IiwKICAgICAgImpva29sIiwKICAgICAgImpvbGVkIiwKICAgICAgImpvbGVzIiwKICAgICAgImpvbGxzIiwKICAgICAgImpvbHRzIiwKICAgICAgImpvbHR5IiwKICAgICAgImpvbW9uIiwKICAgICAgImpvbW9zIiwKICAgICAgImpvbmVzIiwKICAgICAgImpvbmdzIiwKICAgICAgImpvbnR5IiwKICAgICAgImpvb2tzIiwKICAgICAgImpvcmFtIiwKICAgICAgImpvcnVtIiwKICAgICAgImpvdGFzIiwKICAgICAgImpvdHR5IiwKICAgICAgImpvdHVuIiwKICAgICAgImpvdWFsIiwKICAgICAgImpvdWdzIiwKICAgICAgImpvdWtzIiwKICAgICAgImpvdWxlIiwKICAgICAgImpvdXJzIiwKICAgICAgImpvd2FyIiwKICAgICAgImpvd2VkIiwKICAgICAgImpvd2xzIiwKICAgICAgImpvd2x5IiwKICAgICAgImpveWVkIiwKICAgICAgImp1YmFzIiwKICAgICAgImp1YmVzIiwKICAgICAgImp1Y29zIiwKICAgICAgImp1ZGFzIiwKICAgICAgImp1ZGd5IiwKICAgICAgImp1ZG9zIiwKICAgICAgImp1Z2FsIiwKICAgICAgImp1Z3VtIiwKICAgICAgImp1anVzIiwKICAgICAgImp1a2VkIiwKICAgICAgImp1a2VzIiwKICAgICAgImp1a3VzIiwKICAgICAgImp1bGVwIiwKICAgICAgImp1bWFyIiwKICAgICAgImp1bWJ5IiwKICAgICAgImp1bXBzIiwKICAgICAgImp1bmNvIiwKICAgICAgImp1bmtzIiwKICAgICAgImp1bmt5IiwKICAgICAgImp1cGVzIiwKICAgICAgImp1cG9uIiwKICAgICAgImp1cmFsIiwKICAgICAgImp1cmF0IiwKICAgICAgImp1cmVsIiwKICAgICAgImp1cmVzIiwKICAgICAgImp1c3RzIiwKICAgICAgImp1dGVzIiwKICAgICAgImp1dHR5IiwKICAgICAgImp1dmVzIiwKICAgICAgImp1dmllIiwKICAgICAgImthYW1hIiwKICAgICAgImthYmFiIiwKICAgICAgImthYmFyIiwKICAgICAgImthYm9iIiwKICAgICAgImthY2hhIiwKICAgICAgImthY2tzIiwKICAgICAgImthZGFpIiwKICAgICAgImthZGVzIiwKICAgICAgImthZGlzIiwKICAgICAgImthZmlyIiwKICAgICAgImthZ29zIiwKICAgICAgImthZ3VzIiwKICAgICAgImthaGFsIiwKICAgICAgImthaWFrIiwKICAgICAgImthaWRzIiwKICAgICAgImthaWVzIiwKICAgICAgImthaWZzIiwKICAgICAgImthaWthIiwKICAgICAgImthaWtzIiwKICAgICAgImthaWxzIiwKICAgICAgImthaW1zIiwKICAgICAgImthaW5nIiwKICAgICAgImthaW5zIiwKICAgICAgImtha2FzIiwKICAgICAgImtha2lzIiwKICAgICAgImthbGFtIiwKICAgICAgImthbGVzIiwKICAgICAgImthbGlmIiwKICAgICAgImthbGlzIiwKICAgICAgImthbHBhIiwKICAgICAgImthbWFzIiwKICAgICAgImthbWVzIiwKICAgICAgImthbWlrIiwKICAgICAgImthbWlzIiwKICAgICAgImthbW1lIiwKICAgICAgImthbmFlIiwKICAgICAgImthbmFzIiwKICAgICAgImthbmR5IiwKICAgICAgImthbmVoIiwKICAgICAgImthbmVzIiwKICAgICAgImthbmdhIiwKICAgICAgImthbmdzIiwKICAgICAgImthbmppIiwKICAgICAgImthbnRzIiwKICAgICAgImthbnp1IiwKICAgICAgImthb25zIiwKICAgICAgImthcGFzIiwKICAgICAgImthcGhzIiwKICAgICAgImthcG9rIiwKICAgICAgImthcG93IiwKICAgICAgImthcHVzIiwKICAgICAgImthcHV0IiwKICAgICAgImthcmFzIiwKICAgICAgImthcmF0IiwKICAgICAgImthcmtzIiwKICAgICAgImthcm5zIiwKICAgICAgImthcm9vIiwKICAgICAgImthcm9zIiwKICAgICAgImthcnJpIiwKICAgICAgImthcnN0IiwKICAgICAgImthcnN5IiwKICAgICAgImthcnRzIiwKICAgICAgImthcnp5IiwKICAgICAgImthc2hhIiwKICAgICAgImthc21lIiwKICAgICAgImthdGFsIiwKICAgICAgImthdGFzIiwKICAgICAgImthdGlzIiwKICAgICAgImthdHRpIiwKICAgICAgImthdWdoIiwKICAgICAgImthdXJpIiwKICAgICAgImthdXJ1IiwKICAgICAgImthdXJ5IiwKICAgICAgImthdmFsIiwKICAgICAgImthdmFzIiwKICAgICAgImthd2FzIiwKICAgICAgImthd2F1IiwKICAgICAgImthd2VkIiwKICAgICAgImtheWxlIiwKICAgICAgImtheW9zIiwKICAgICAgImthemlzIiwKICAgICAgImthem9vIiwKICAgICAgImtiYXJzIiwKICAgICAgImtlYmFyIiwKICAgICAgImtlYm9iIiwKICAgICAgImtlY2tzIiwKICAgICAgImtlZGdlIiwKICAgICAgImtlZGd5IiwKICAgICAgImtlZWNoIiwKICAgICAgImtlZWZzIiwKICAgICAgImtlZWtzIiwKICAgICAgImtlZWxzIiwKICAgICAgImtlZW1hIiwKICAgICAgImtlZW5vIiwKICAgICAgImtlZW5zIiwKICAgICAgImtlZXBzIiwKICAgICAgImtlZXRzIiwKICAgICAgImtlZXZlIiwKICAgICAgImtlZmlyIiwKICAgICAgImtlaHVhIiwKICAgICAgImtlaXJzIiwKICAgICAgImtlbGVwIiwKICAgICAgImtlbGltIiwKICAgICAgImtlbGxzIiwKICAgICAgImtlbGx5IiwKICAgICAgImtlbHBzIiwKICAgICAgImtlbHB5IiwKICAgICAgImtlbHRzIiwKICAgICAgImtlbHR5IiwKICAgICAgImtlbWJvIiwKICAgICAgImtlbWJzIiwKICAgICAgImtlbXBzIiwKICAgICAgImtlbXB0IiwKICAgICAgImtlbXB5IiwKICAgICAgImtlbmFmIiwKICAgICAgImtlbmNoIiwKICAgICAgImtlbmRvIiwKICAgICAgImtlbm9zIiwKICAgICAgImtlbnRlIiwKICAgICAgImtlbnRzIiwKICAgICAgImtlcGlzIiwKICAgICAgImtlcmJzIiwKICAgICAgImtlcmVsIiwKICAgICAgImtlcmZzIiwKICAgICAgImtlcmt5IiwKICAgICAgImtlcm1hIiwKICAgICAgImtlcm5lIiwKICAgICAgImtlcm5zIiwKICAgICAgImtlcm9zIiwKICAgICAgImtlcnJ5IiwKICAgICAgImtlcnZlIiwKICAgICAgImtlc2FyIiwKICAgICAgImtlc3RzIiwKICAgICAgImtldGFzIiwKICAgICAgImtldGNoIiwKICAgICAgImtldGVzIiwKICAgICAgImtldG9sIiwKICAgICAgImtldmVsIiwKICAgICAgImtldmlsIiwKICAgICAgImtleGVzIiwKICAgICAgImtleWVkIiwKICAgICAgImtleWVyIiwKICAgICAgImtoYWRpIiwKICAgICAgImtoYWZzIiwKICAgICAgImtoYW5zIiwKICAgICAgImtoYXBoIiwKICAgICAgImtoYXRzIiwKICAgICAgImtoYXlhIiwKICAgICAgImtoYXppIiwKICAgICAgImtoZWRhIiwKICAgICAgImtoZXRoIiwKICAgICAgImtoZXRzIiwKICAgICAgImtob2phIiwKICAgICAgImtob3JzIiwKICAgICAgImtob3VtIiwKICAgICAgImtodWRzIiwKICAgICAgImtpYWF0IiwKICAgICAgImtpYWNrIiwKICAgICAgImtpYW5nIiwKICAgICAgImtpYmJlIiwKICAgICAgImtpYmJpIiwKICAgICAgImtpYmVpIiwKICAgICAgImtpYmVzIiwKICAgICAgImtpYmxhIiwKICAgICAgImtpY2tzIiwKICAgICAgImtpY2t5IiwKICAgICAgImtpZGRvIiwKICAgICAgImtpZGR5IiwKICAgICAgImtpZGVsIiwKICAgICAgImtpZGdlIiwKICAgICAgImtpZWZzIiwKICAgICAgImtpZXJzIiwKICAgICAgImtpZXZlIiwKICAgICAgImtpZXZzIiwKICAgICAgImtpZ2h0IiwKICAgICAgImtpa2VzIiwKICAgICAgImtpa29pIiwKICAgICAgImtpbGV5IiwKICAgICAgImtpbGltIiwKICAgICAgImtpbGxzIiwKICAgICAgImtpbG5zIiwKICAgICAgImtpbG9zIiwKICAgICAgImtpbHBzIiwKICAgICAgImtpbHRzIiwKICAgICAgImtpbHR5IiwKICAgICAgImtpbWJvIiwKICAgICAgImtpbmFzIiwKICAgICAgImtpbmRhIiwKICAgICAgImtpbmRzIiwKICAgICAgImtpbmR5IiwKICAgICAgImtpbmVzIiwKICAgICAgImtpbmdzIiwKICAgICAgImtpbmluIiwKICAgICAgImtpbmtzIiwKICAgICAgImtpbm9zIiwKICAgICAgImtpb3JlIiwKICAgICAgImtpcGVzIiwKICAgICAgImtpcHBhIiwKICAgICAgImtpcHBzIiwKICAgICAgImtpcmJ5IiwKICAgICAgImtpcmtzIiwKICAgICAgImtpcm5zIiwKICAgICAgImtpcnJpIiwKICAgICAgImtpc2FuIiwKICAgICAgImtpc3N5IiwKICAgICAgImtpc3RzIiwKICAgICAgImtpdGVkIiwKICAgICAgImtpdGVyIiwKICAgICAgImtpdGVzIiwKICAgICAgImtpdGhlIiwKICAgICAgImtpdGhzIiwKICAgICAgImtpdHVsIiwKICAgICAgImtpdmFzIiwKICAgICAgImtpd2lzIiwKICAgICAgImtsYW5nIiwKICAgICAgImtsYXBzIiwKICAgICAgImtsZXR0IiwKICAgICAgImtsaWNrIiwKICAgICAgImtsaWVnIiwKICAgICAgImtsaWtzIiwKICAgICAgImtsb25nIiwKICAgICAgImtsb29mIiwKICAgICAgImtsdWdlIiwKICAgICAgImtsdXR6IiwKICAgICAgImtuYWdzIiwKICAgICAgImtuYXBzIiwKICAgICAgImtuYXJsIiwKICAgICAgImtuYXJzIiwKICAgICAgImtuYXVyIiwKICAgICAgImtuYXdlIiwKICAgICAgImtuZWVzIiwKICAgICAgImtuZWxsIiwKICAgICAgImtuaXNoIiwKICAgICAgImtuaXRzIiwKICAgICAgImtuaXZlIiwKICAgICAgImtub2JzIiwKICAgICAgImtub3BzIiwKICAgICAgImtub3NwIiwKICAgICAgImtub3RzIiwKICAgICAgImtub3V0IiwKICAgICAgImtub3dlIiwKICAgICAgImtub3dzIiwKICAgICAgImtudWJzIiwKICAgICAgImtudXJsIiwKICAgICAgImtudXJyIiwKICAgICAgImtudXJzIiwKICAgICAgImtudXRzIiwKICAgICAgImtvYW5zIiwKICAgICAgImtvYXBzIiwKICAgICAgImtvYmFuIiwKICAgICAgImtvYm9zIiwKICAgICAgImtvZWxzIiwKICAgICAgImtvZmZzIiwKICAgICAgImtvZnRhIiwKICAgICAgImtvZ2FsIiwKICAgICAgImtvaGFzIiwKICAgICAgImtvaGVuIiwKICAgICAgImtvaGxzIiwKICAgICAgImtvaW5lIiwKICAgICAgImtvamlzIiwKICAgICAgImtva2FtIiwKICAgICAgImtva2FzIiwKICAgICAgImtva2VyIiwKICAgICAgImtva3JhIiwKICAgICAgImtva3VtIiwKICAgICAgImtvbGFzIiwKICAgICAgImtvbG9zIiwKICAgICAgImtvbWJ1IiwKICAgICAgImtvbmJ1IiwKICAgICAgImtvbmRvIiwKICAgICAgImtvbmtzIiwKICAgICAgImtvb2tzIiwKICAgICAgImtvb2t5IiwKICAgICAgImtvb3JpIiwKICAgICAgImtvcGVrIiwKICAgICAgImtvcGhzIiwKICAgICAgImtvcGplIiwKICAgICAgImtvcHBhIiwKICAgICAgImtvcmFpIiwKICAgICAgImtvcmFuIiwKICAgICAgImtvcmFzIiwKICAgICAgImtvcmF0IiwKICAgICAgImtvcmVzIiwKICAgICAgImtvcm1hIiwKICAgICAgImtvcm9zIiwKICAgICAgImtvcnVuIiwKICAgICAgImtvcnVzIiwKICAgICAgImtvc2VzIiwKICAgICAgImtvdGNoIiwKICAgICAgImtvdG9zIiwKICAgICAgImtvdG93IiwKICAgICAgImtvdXJhIiwKICAgICAgImtyYWFsIiwKICAgICAgImtyYWJzIiwKICAgICAgImtyYWZ0IiwKICAgICAgImtyYWlzIiwKICAgICAgImtyYWl0IiwKICAgICAgImtyYW5nIiwKICAgICAgImtyYW5zIiwKICAgICAgImtyYW56IiwKICAgICAgImtyYXV0IiwKICAgICAgImtyYXlzIiwKICAgICAgImtyZWVwIiwKICAgICAgImtyZW5nIiwKICAgICAgImtyZXdlIiwKICAgICAgImtyb25hIiwKICAgICAgImtyb25lIiwKICAgICAgImtyb29uIiwKICAgICAgImtydWJpIiwKICAgICAgImtydW5rIiwKICAgICAgImtzYXJzIiwKICAgICAgImt1YmllIiwKICAgICAgImt1ZG9zIiwKICAgICAgImt1ZHVzIiwKICAgICAgImt1ZHp1IiwKICAgICAgImt1ZmlzIiwKICAgICAgImt1Z2VsIiwKICAgICAgImt1aWFzIiwKICAgICAgImt1a3JpIiwKICAgICAgImt1a3VzIiwKICAgICAgImt1bGFrIiwKICAgICAgImt1bGFuIiwKICAgICAgImt1bGFzIiwKICAgICAgImt1bGZpIiwKICAgICAgImt1bWlzIiwKICAgICAgImt1bXlzIiwKICAgICAgImt1cmlzIiwKICAgICAgImt1cnJlIiwKICAgICAgImt1cnRhIiwKICAgICAgImt1cnVzIiwKICAgICAgImt1c3NvIiwKICAgICAgImt1dGFzIiwKICAgICAgImt1dGNoIiwKICAgICAgImt1dGlzIiwKICAgICAgImt1dHVzIiwKICAgICAgImt1enVzIiwKICAgICAgImt2YXNzIiwKICAgICAgImt2ZWxsIiwKICAgICAgImt3ZWxhIiwKICAgICAgImt5YWNrIiwKICAgICAgImt5YWtzIiwKICAgICAgImt5YW5nIiwKICAgICAgImt5YXJzIiwKICAgICAgImt5YXRzIiwKICAgICAgImt5Ym9zIiwKICAgICAgImt5ZHN0IiwKICAgICAgImt5bGVzIiwKICAgICAgImt5bGllIiwKICAgICAgImt5bGluIiwKICAgICAgImt5bGl4IiwKICAgICAgImt5bG9lIiwKICAgICAgImt5bmRlIiwKICAgICAgImt5bmRzIiwKICAgICAgImt5cGVzIiwKICAgICAgImt5cmllIiwKICAgICAgImt5dGVzIiwKICAgICAgImt5dGhlIiwKICAgICAgImxhYXJpIiwKICAgICAgImxhYmRhIiwKICAgICAgImxhYmlhIiwKICAgICAgImxhYmlzIiwKICAgICAgImxhYnJhIiwKICAgICAgImxhY2VkIiwKICAgICAgImxhY2VyIiwKICAgICAgImxhY2VzIiwKICAgICAgImxhY2V0IiwKICAgICAgImxhY2V5IiwKICAgICAgImxhY2tzIiwKICAgICAgImxhZGR5IiwKICAgICAgImxhZGVkIiwKICAgICAgImxhZGVyIiwKICAgICAgImxhZGVzIiwKICAgICAgImxhZXJzIiwKICAgICAgImxhZXZvIiwKICAgICAgImxhZ2FuIiwKICAgICAgImxhaGFsIiwKICAgICAgImxhaGFyIiwKICAgICAgImxhaWNoIiwKICAgICAgImxhaWNzIiwKICAgICAgImxhaWRzIiwKICAgICAgImxhaWdoIiwKICAgICAgImxhaWthIiwKICAgICAgImxhaWtzIiwKICAgICAgImxhaXJkIiwKICAgICAgImxhaXJzIiwKICAgICAgImxhaXJ5IiwKICAgICAgImxhaXRoIiwKICAgICAgImxhaXR5IiwKICAgICAgImxha2VkIiwKICAgICAgImxha2VyIiwKICAgICAgImxha2VzIiwKICAgICAgImxha2hzIiwKICAgICAgImxha2luIiwKICAgICAgImxha3NhIiwKICAgICAgImxhbGR5IiwKICAgICAgImxhbGxzIiwKICAgICAgImxhbWFzIiwKICAgICAgImxhbWJzIiwKICAgICAgImxhbWJ5IiwKICAgICAgImxhbWVkIiwKICAgICAgImxhbWVyIiwKICAgICAgImxhbWVzIiwKICAgICAgImxhbWlhIiwKICAgICAgImxhbW15IiwKICAgICAgImxhbXBzIiwKICAgICAgImxhbmFpIiwKICAgICAgImxhbmFzIiwKICAgICAgImxhbmNoIiwKICAgICAgImxhbmRlIiwKICAgICAgImxhbmRzIiwKICAgICAgImxhbmVzIiwKICAgICAgImxhbmtzIiwKICAgICAgImxhbnRzIiwKICAgICAgImxhcGluIiwKICAgICAgImxhcGlzIiwKICAgICAgImxhcGplIiwKICAgICAgImxhcmNoIiwKICAgICAgImxhcmRzIiwKICAgICAgImxhcmR5IiwKICAgICAgImxhcmVlIiwKICAgICAgImxhcmVzIiwKICAgICAgImxhcmdvIiwKICAgICAgImxhcmlzIiwKICAgICAgImxhcmtzIiwKICAgICAgImxhcmt5IiwKICAgICAgImxhcm5zIiwKICAgICAgImxhcm50IiwKICAgICAgImxhcnVtIiwKICAgICAgImxhc2VkIiwKICAgICAgImxhc2VyIiwKICAgICAgImxhc2VzIiwKICAgICAgImxhc3NpIiwKICAgICAgImxhc3N1IiwKICAgICAgImxhc3N5IiwKICAgICAgImxhc3RzIiwKICAgICAgImxhdGFoIiwKICAgICAgImxhdGVkIiwKICAgICAgImxhdGVuIiwKICAgICAgImxhdGV4IiwKICAgICAgImxhdGhpIiwKICAgICAgImxhdGhzIiwKICAgICAgImxhdGh5IiwKICAgICAgImxhdGtlIiwKICAgICAgImxhdHVzIiwKICAgICAgImxhdWFuIiwKICAgICAgImxhdWNoIiwKICAgICAgImxhdWRzIiwKICAgICAgImxhdWZzIiwKICAgICAgImxhdW5kIiwKICAgICAgImxhdXJhIiwKICAgICAgImxhdmFsIiwKICAgICAgImxhdmFzIiwKICAgICAgImxhdmVkIiwKICAgICAgImxhdmVyIiwKICAgICAgImxhdmVzIiwKICAgICAgImxhdnJhIiwKICAgICAgImxhdnZ5IiwKICAgICAgImxhd2VkIiwKICAgICAgImxhd2VyIiwKICAgICAgImxhd2luIiwKICAgICAgImxhd2tzIiwKICAgICAgImxhd25zIiwKICAgICAgImxhd255IiwKICAgICAgImxheGVkIiwKICAgICAgImxheGVyIiwKICAgICAgImxheGVzIiwKICAgICAgImxheGx5IiwKICAgICAgImxheWVkIiwKICAgICAgImxheWluIiwKICAgICAgImxheXVwIiwKICAgICAgImxhemFyIiwKICAgICAgImxhemVkIiwKICAgICAgImxhemVzIiwKICAgICAgImxhem9zIiwKICAgICAgImxhenppIiwKICAgICAgImxhenpvIiwKICAgICAgImxlYWRzIiwKICAgICAgImxlYWR5IiwKICAgICAgImxlYWZzIiwKICAgICAgImxlYWtzIiwKICAgICAgImxlYW1zIiwKICAgICAgImxlYW5zIiwKICAgICAgImxlYW55IiwKICAgICAgImxlYXBzIiwKICAgICAgImxlYXJlIiwKICAgICAgImxlYXJzIiwKICAgICAgImxlYXJ5IiwKICAgICAgImxlYXRzIiwKICAgICAgImxlYXZ5IiwKICAgICAgImxlYXplIiwKICAgICAgImxlYmVuIiwKICAgICAgImxlY2N5IiwKICAgICAgImxlZGVzIiwKICAgICAgImxlZGd5IiwKICAgICAgImxlZHVtIiwKICAgICAgImxlZWFyIiwKICAgICAgImxlZWtzIiwKICAgICAgImxlZXBzIiwKICAgICAgImxlZXJzIiwKICAgICAgImxlZXNlIiwKICAgICAgImxlZXRzIiwKICAgICAgImxlZXplIiwKICAgICAgImxlZnRlIiwKICAgICAgImxlZnRzIiwKICAgICAgImxlZ2VyIiwKICAgICAgImxlZ2VzIiwKICAgICAgImxlZ2dlIiwKICAgICAgImxlZ2dvIiwKICAgICAgImxlZ2l0IiwKICAgICAgImxlaHJzIiwKICAgICAgImxlaHVhIiwKICAgICAgImxlaXJzIiwKICAgICAgImxlaXNoIiwKICAgICAgImxlbWFuIiwKICAgICAgImxlbWVkIiwKICAgICAgImxlbWVsIiwKICAgICAgImxlbWVzIiwKICAgICAgImxlbW1hIiwKICAgICAgImxlbW1lIiwKICAgICAgImxlbmRzIiwKICAgICAgImxlbmVzIiwKICAgICAgImxlbmdzIiwKICAgICAgImxlbmlzIiwKICAgICAgImxlbm9zIiwKICAgICAgImxlbnNlIiwKICAgICAgImxlbnRpIiwKICAgICAgImxlbnRvIiwKICAgICAgImxlb25lIiwKICAgICAgImxlcGlkIiwKICAgICAgImxlcHJhIiwKICAgICAgImxlcHRhIiwKICAgICAgImxlcmVkIiwKICAgICAgImxlcmVzIiwKICAgICAgImxlcnBzIiwKICAgICAgImxlc2JvIiwKICAgICAgImxlc2VzIiwKICAgICAgImxlc3RzIiwKICAgICAgImxldGNoIiwKICAgICAgImxldGhlIiwKICAgICAgImxldHVwIiwKICAgICAgImxldWNoIiwKICAgICAgImxldWNvIiwKICAgICAgImxldWRzIiwKICAgICAgImxldWdoIiwKICAgICAgImxldmFzIiwKICAgICAgImxldmVlIiwKICAgICAgImxldmVzIiwKICAgICAgImxldmluIiwKICAgICAgImxldmlzIiwKICAgICAgImxld2lzIiwKICAgICAgImxleGVzIiwKICAgICAgImxleGlzIiwKICAgICAgImxlemVzIiwKICAgICAgImxlenphIiwKICAgICAgImxlenp5IiwKICAgICAgImxpYW5hIiwKICAgICAgImxpYW5lIiwKICAgICAgImxpYW5nIiwKICAgICAgImxpYXJkIiwKICAgICAgImxpYXJzIiwKICAgICAgImxpYXJ0IiwKICAgICAgImxpYmVyIiwKICAgICAgImxpYnJhIiwKICAgICAgImxpYnJpIiwKICAgICAgImxpY2hpIiwKICAgICAgImxpY2h0IiwKICAgICAgImxpY2l0IiwKICAgICAgImxpY2tzIiwKICAgICAgImxpZGFyIiwKICAgICAgImxpZG9zIiwKICAgICAgImxpZWZzIiwKICAgICAgImxpZW5zIiwKICAgICAgImxpZXJzIiwKICAgICAgImxpZXVzIiwKICAgICAgImxpZXZlIiwKICAgICAgImxpZmVyIiwKICAgICAgImxpZmVzIiwKICAgICAgImxpZnRzIiwKICAgICAgImxpZ2FuIiwKICAgICAgImxpZ2VyIiwKICAgICAgImxpZ2dlIiwKICAgICAgImxpZ25lIiwKICAgICAgImxpa2VkIiwKICAgICAgImxpa2VyIiwKICAgICAgImxpa2VzIiwKICAgICAgImxpa2luIiwKICAgICAgImxpbGxzIiwKICAgICAgImxpbG9zIiwKICAgICAgImxpbHRzIiwKICAgICAgImxpbWFuIiwKICAgICAgImxpbWFzIiwKICAgICAgImxpbWF4IiwKICAgICAgImxpbWJhIiwKICAgICAgImxpbWJpIiwKICAgICAgImxpbWJzIiwKICAgICAgImxpbWJ5IiwKICAgICAgImxpbWVkIiwKICAgICAgImxpbWVuIiwKICAgICAgImxpbWVzIiwKICAgICAgImxpbWV5IiwKICAgICAgImxpbW1hIiwKICAgICAgImxpbW5zIiwKICAgICAgImxpbW9zIiwKICAgICAgImxpbXBhIiwKICAgICAgImxpbXBzIiwKICAgICAgImxpbmFjIiwKICAgICAgImxpbmNoIiwKICAgICAgImxpbmRzIiwKICAgICAgImxpbmR5IiwKICAgICAgImxpbmVkIiwKICAgICAgImxpbmVzIiwKICAgICAgImxpbmV5IiwKICAgICAgImxpbmdhIiwKICAgICAgImxpbmdzIiwKICAgICAgImxpbmd5IiwKICAgICAgImxpbmluIiwKICAgICAgImxpbmtzIiwKICAgICAgImxpbmt5IiwKICAgICAgImxpbm5zIiwKICAgICAgImxpbm55IiwKICAgICAgImxpbm9zIiwKICAgICAgImxpbnRzIiwKICAgICAgImxpbnR5IiwKICAgICAgImxpbnVtIiwKICAgICAgImxpbnV4IiwKICAgICAgImxpb25zIiwKICAgICAgImxpcGFzIiwKICAgICAgImxpcGVzIiwKICAgICAgImxpcGluIiwKICAgICAgImxpcG9zIiwKICAgICAgImxpcHB5IiwKICAgICAgImxpcmFzIiwKICAgICAgImxpcmtzIiwKICAgICAgImxpcm90IiwKICAgICAgImxpc2tzIiwKICAgICAgImxpc2xlIiwKICAgICAgImxpc3BzIiwKICAgICAgImxpc3RzIiwKICAgICAgImxpdGFpIiwKICAgICAgImxpdGFzIiwKICAgICAgImxpdGVkIiwKICAgICAgImxpdGVyIiwKICAgICAgImxpdGVzIiwKICAgICAgImxpdGhvIiwKICAgICAgImxpdGhzIiwKICAgICAgImxpdHJlIiwKICAgICAgImxpdmVkIiwKICAgICAgImxpdmVuIiwKICAgICAgImxpdmVzIiwKICAgICAgImxpdm9yIiwKICAgICAgImxpdnJlIiwKICAgICAgImxsYW5vIiwKICAgICAgImxvYWNoIiwKICAgICAgImxvYWRzIiwKICAgICAgImxvYWZzIiwKICAgICAgImxvYW1zIiwKICAgICAgImxvYW5zIiwKICAgICAgImxvYXN0IiwKICAgICAgImxvYXZlIiwKICAgICAgImxvYmFyIiwKICAgICAgImxvYmVkIiwKICAgICAgImxvYmVzIiwKICAgICAgImxvYm9zIiwKICAgICAgImxvYnVzIiwKICAgICAgImxvY2hlIiwKICAgICAgImxvY2hzIiwKICAgICAgImxvY2llIiwKICAgICAgImxvY2lzIiwKICAgICAgImxvY2tzIiwKICAgICAgImxvY29zIiwKICAgICAgImxvY3VtIiwKICAgICAgImxvZGVuIiwKICAgICAgImxvZGVzIiwKICAgICAgImxvZXNzIiwKICAgICAgImxvZnRzIiwKICAgICAgImxvZ2FuIiwKICAgICAgImxvZ2VzIiwKICAgICAgImxvZ2d5IiwKICAgICAgImxvZ2lhIiwKICAgICAgImxvZ2llIiwKICAgICAgImxvZ29pIiwKICAgICAgImxvZ29uIiwKICAgICAgImxvZ29zIiwKICAgICAgImxvaGFuIiwKICAgICAgImxvaWRzIiwKICAgICAgImxvaW5zIiwKICAgICAgImxvaXBlIiwKICAgICAgImxvaXJzIiwKICAgICAgImxva2VzIiwKICAgICAgImxvbGxzIiwKICAgICAgImxvbGx5IiwKICAgICAgImxvbG9nIiwKICAgICAgImxvbWFzIiwKICAgICAgImxvbWVkIiwKICAgICAgImxvbWVzIiwKICAgICAgImxvbmVyIiwKICAgICAgImxvbmdhIiwKICAgICAgImxvbmdlIiwKICAgICAgImxvbmdzIiwKICAgICAgImxvb2J5IiwKICAgICAgImxvb2VkIiwKICAgICAgImxvb2V5IiwKICAgICAgImxvb2ZhIiwKICAgICAgImxvb2ZzIiwKICAgICAgImxvb2llIiwKICAgICAgImxvb2tzIiwKICAgICAgImxvb2t5IiwKICAgICAgImxvb21zIiwKICAgICAgImxvb25zIiwKICAgICAgImxvb255IiwKICAgICAgImxvb3BzIiwKICAgICAgImxvb3JkIiwKICAgICAgImxvb3RzIiwKICAgICAgImxvcGVkIiwKICAgICAgImxvcGVyIiwKICAgICAgImxvcGVzIiwKICAgICAgImxvcHB5IiwKICAgICAgImxvcmFsIiwKICAgICAgImxvcmFuIiwKICAgICAgImxvcmRzIiwKICAgICAgImxvcmR5IiwKICAgICAgImxvcmVsIiwKICAgICAgImxvcmVzIiwKICAgICAgImxvcmljIiwKICAgICAgImxvcmlzIiwKICAgICAgImxvc2VkIiwKICAgICAgImxvc2VsIiwKICAgICAgImxvc2VuIiwKICAgICAgImxvc2VzIiwKICAgICAgImxvc3N5IiwKICAgICAgImxvdGFoIiwKICAgICAgImxvdGFzIiwKICAgICAgImxvdGVzIiwKICAgICAgImxvdGljIiwKICAgICAgImxvdG9zIiwKICAgICAgImxvdHNhIiwKICAgICAgImxvdHRhIiwKICAgICAgImxvdHRlIiwKICAgICAgImxvdHRvIiwKICAgICAgImxvdHVzIiwKICAgICAgImxvdWVkIiwKICAgICAgImxvdWdoIiwKICAgICAgImxvdWllIiwKICAgICAgImxvdWlzIiwKICAgICAgImxvdW1hIiwKICAgICAgImxvdW5kIiwKICAgICAgImxvdW5zIiwKICAgICAgImxvdXBlIiwKICAgICAgImxvdXBzIiwKICAgICAgImxvdXJlIiwKICAgICAgImxvdXJzIiwKICAgICAgImxvdXJ5IiwKICAgICAgImxvdXRzIiwKICAgICAgImxvdmF0IiwKICAgICAgImxvdmVkIiwKICAgICAgImxvdmVzIiwKICAgICAgImxvdmV5IiwKICAgICAgImxvdmllIiwKICAgICAgImxvd2FuIiwKICAgICAgImxvd2VkIiwKICAgICAgImxvd2VzIiwKICAgICAgImxvd25kIiwKICAgICAgImxvd25lIiwKICAgICAgImxvd25zIiwKICAgICAgImxvd3BzIiwKICAgICAgImxvd3J5IiwKICAgICAgImxvd3NlIiwKICAgICAgImxvd3RzIiwKICAgICAgImxveGVkIiwKICAgICAgImxveGVzIiwKICAgICAgImxvemVuIiwKICAgICAgImx1YWNoIiwKICAgICAgImx1YXVzIiwKICAgICAgImx1YmVkIiwKICAgICAgImx1YmVzIiwKICAgICAgImx1YnJhIiwKICAgICAgImx1Y2VzIiwKICAgICAgImx1Y2tzIiwKICAgICAgImx1Y3JlIiwKICAgICAgImx1ZGVzIiwKICAgICAgImx1ZGljIiwKICAgICAgImx1ZG9zIiwKICAgICAgImx1ZmZhIiwKICAgICAgImx1ZmZzIiwKICAgICAgImx1Z2VkIiwKICAgICAgImx1Z2VyIiwKICAgICAgImx1Z2VzIiwKICAgICAgImx1bGxzIiwKICAgICAgImx1bHVzIiwKICAgICAgImx1bWFzIiwKICAgICAgImx1bWJpIiwKICAgICAgImx1bW1lIiwKICAgICAgImx1bW15IiwKICAgICAgImx1bXBzIiwKICAgICAgImx1bmFzIiwKICAgICAgImx1bmVzIiwKICAgICAgImx1bmV0IiwKICAgICAgImx1bmdpIiwKICAgICAgImx1bmdzIiwKICAgICAgImx1bmtzIiwKICAgICAgImx1bnRzIiwKICAgICAgImx1cGluIiwKICAgICAgImx1cmVkIiwKICAgICAgImx1cmVyIiwKICAgICAgImx1cmVzIiwKICAgICAgImx1cmV4IiwKICAgICAgImx1cmdpIiwKICAgICAgImx1cmd5IiwKICAgICAgImx1cmtzIiwKICAgICAgImx1cnJ5IiwKICAgICAgImx1cnZlIiwKICAgICAgImx1c2VyIiwKICAgICAgImx1c2h5IiwKICAgICAgImx1c2tzIiwKICAgICAgImx1c3RzIiwKICAgICAgImx1c3VzIiwKICAgICAgImx1dGVhIiwKICAgICAgImx1dGVkIiwKICAgICAgImx1dGVyIiwKICAgICAgImx1dGVzIiwKICAgICAgImx1dnZ5IiwKICAgICAgImx1eGVkIiwKICAgICAgImx1eGVyIiwKICAgICAgImx1eGVzIiwKICAgICAgImx3ZWlzIiwKICAgICAgImx5YW1zIiwKICAgICAgImx5YXJkIiwKICAgICAgImx5YXJ0IiwKICAgICAgImx5YXNlIiwKICAgICAgImx5Y2VhIiwKICAgICAgImx5Y2VlIiwKICAgICAgImx5Y3JhIiwKICAgICAgImx5bWVzIiwKICAgICAgImx5bmNoIiwKICAgICAgImx5bmVzIiwKICAgICAgImx5cmVzIiwKICAgICAgImx5c2VkIiwKICAgICAgImx5c2VzIiwKICAgICAgImx5c2luIiwKICAgICAgImx5c2lzIiwKICAgICAgImx5c29sIiwKICAgICAgImx5c3NhIiwKICAgICAgImx5dGVkIiwKICAgICAgImx5dGVzIiwKICAgICAgImx5dGhlIiwKICAgICAgImx5dGljIiwKICAgICAgImx5dHRhIiwKICAgICAgIm1hYWVkIiwKICAgICAgIm1hYXJlIiwKICAgICAgIm1hYXJzIiwKICAgICAgIm1hYmVzIiwKICAgICAgIm1hY2FzIiwKICAgICAgIm1hY2VkIiwKICAgICAgIm1hY2VyIiwKICAgICAgIm1hY2VzIiwKICAgICAgIm1hY2hlIiwKICAgICAgIm1hY2hpIiwKICAgICAgIm1hY2hzIiwKICAgICAgIm1hY2tzIiwKICAgICAgIm1hY2xlIiwKICAgICAgIm1hY29uIiwKICAgICAgIm1hZGdlIiwKICAgICAgIm1hZGlkIiwKICAgICAgIm1hZHJlIiwKICAgICAgIm1hZXJsIiwKICAgICAgIm1hZmljIiwKICAgICAgIm1hZ2VzIiwKICAgICAgIm1hZ2dzIiwKICAgICAgIm1hZ290IiwKICAgICAgIm1hZ3VzIiwKICAgICAgIm1haG9lIiwKICAgICAgIm1haHVhIiwKICAgICAgIm1haHdhIiwKICAgICAgIm1haWRzIiwKICAgICAgIm1haWtvIiwKICAgICAgIm1haWtzIiwKICAgICAgIm1haWxlIiwKICAgICAgIm1haWxsIiwKICAgICAgIm1haWxzIiwKICAgICAgIm1haW1zIiwKICAgICAgIm1haW5zIiwKICAgICAgIm1haXJlIiwKICAgICAgIm1haXJzIiwKICAgICAgIm1haXNlIiwKICAgICAgIm1haXN0IiwKICAgICAgIm1ha2FyIiwKICAgICAgIm1ha2VzIiwKICAgICAgIm1ha2lzIiwKICAgICAgIm1ha29zIiwKICAgICAgIm1hbGFtIiwKICAgICAgIm1hbGFyIiwKICAgICAgIm1hbGFzIiwKICAgICAgIm1hbGF4IiwKICAgICAgIm1hbGVzIiwKICAgICAgIm1hbGljIiwKICAgICAgIm1hbGlrIiwKICAgICAgIm1hbGlzIiwKICAgICAgIm1hbGxzIiwKICAgICAgIm1hbG1zIiwKICAgICAgIm1hbG15IiwKICAgICAgIm1hbHRzIiwKICAgICAgIm1hbHR5IiwKICAgICAgIm1hbHVzIiwKICAgICAgIm1hbHZhIiwKICAgICAgIm1hbHdhIiwKICAgICAgIm1hbWFzIiwKICAgICAgIm1hbWJhIiwKICAgICAgIm1hbWVlIiwKICAgICAgIm1hbWV5IiwKICAgICAgIm1hbWllIiwKICAgICAgIm1hbmFzIiwKICAgICAgIm1hbmF0IiwKICAgICAgIm1hbmRpIiwKICAgICAgIm1hbmViIiwKICAgICAgIm1hbmVkIiwKICAgICAgIm1hbmVoIiwKICAgICAgIm1hbmVzIiwKICAgICAgIm1hbmV0IiwKICAgICAgIm1hbmdzIiwKICAgICAgIm1hbmlzIiwKICAgICAgIm1hbmt5IiwKICAgICAgIm1hbm5hIiwKICAgICAgIm1hbm9zIiwKICAgICAgIm1hbnNlIiwKICAgICAgIm1hbnRhIiwKICAgICAgIm1hbnRvIiwKICAgICAgIm1hbnR5IiwKICAgICAgIm1hbnVsIiwKICAgICAgIm1hbnVzIiwKICAgICAgIm1hcGF1IiwKICAgICAgIm1hcXVpIiwKICAgICAgIm1hcmFlIiwKICAgICAgIm1hcmFoIiwKICAgICAgIm1hcmFzIiwKICAgICAgIm1hcmNzIiwKICAgICAgIm1hcmR5IiwKICAgICAgIm1hcmVzIiwKICAgICAgIm1hcmdlIiwKICAgICAgIm1hcmdzIiwKICAgICAgIm1hcmlhIiwKICAgICAgIm1hcmlkIiwKICAgICAgIm1hcmthIiwKICAgICAgIm1hcmtzIiwKICAgICAgIm1hcmxlIiwKICAgICAgIm1hcmxzIiwKICAgICAgIm1hcmx5IiwKICAgICAgIm1hcm1zIiwKICAgICAgIm1hcm9uIiwKICAgICAgIm1hcm9yIiwKICAgICAgIm1hcnJhIiwKICAgICAgIm1hcnJpIiwKICAgICAgIm1hcnNlIiwKICAgICAgIm1hcnRzIiwKICAgICAgIm1hcnZ5IiwKICAgICAgIm1hc2FzIiwKICAgICAgIm1hc2VkIiwKICAgICAgIm1hc2VyIiwKICAgICAgIm1hc2VzIiwKICAgICAgIm1hc2h5IiwKICAgICAgIm1hc2tzIiwKICAgICAgIm1hc3NhIiwKICAgICAgIm1hc3N5IiwKICAgICAgIm1hc3RzIiwKICAgICAgIm1hc3R5IiwKICAgICAgIm1hc3VzIiwKICAgICAgIm1hdGFpIiwKICAgICAgIm1hdGVkIiwKICAgICAgIm1hdGVyIiwKICAgICAgIm1hdGVzIiwKICAgICAgIm1hdGhzIiwKICAgICAgIm1hdGluIiwKICAgICAgIm1hdGxvIiwKICAgICAgIm1hdHRlIiwKICAgICAgIm1hdHRzIiwKICAgICAgIm1hdHphIiwKICAgICAgIm1hdHpvIiwKICAgICAgIm1hdWJ5IiwKICAgICAgIm1hdWRzIiwKICAgICAgIm1hdWxzIiwKICAgICAgIm1hdW5kIiwKICAgICAgIm1hdXJpIiwKICAgICAgIm1hdXN5IiwKICAgICAgIm1hdXRzIiwKICAgICAgIm1hdXp5IiwKICAgICAgIm1hdmVuIiwKICAgICAgIm1hdmllIiwKICAgICAgIm1hdmluIiwKICAgICAgIm1hdmlzIiwKICAgICAgIm1hd2VkIiwKICAgICAgIm1hd2tzIiwKICAgICAgIm1hd2t5IiwKICAgICAgIm1hd25zIiwKICAgICAgIm1hd3JzIiwKICAgICAgIm1heGVkIiwKICAgICAgIm1heGVzIiwKICAgICAgIm1heGlzIiwKICAgICAgIm1heWFuIiwKICAgICAgIm1heWFzIiwKICAgICAgIm1heWVkIiwKICAgICAgIm1heW9zIiwKICAgICAgIm1heXN0IiwKICAgICAgIm1hemVkIiwKICAgICAgIm1hemVyIiwKICAgICAgIm1hemVzIiwKICAgICAgIm1hemV5IiwKICAgICAgIm1henV0IiwKICAgICAgIm1iaXJhIiwKICAgICAgIm1lYWRzIiwKICAgICAgIm1lYWxzIiwKICAgICAgIm1lYW5lIiwKICAgICAgIm1lYW5zIiwKICAgICAgIm1lYW55IiwKICAgICAgIm1lYXJlIiwKICAgICAgIm1lYXNlIiwKICAgICAgIm1lYXRoIiwKICAgICAgIm1lYXRzIiwKICAgICAgIm1lYm9zIiwKICAgICAgIm1lY2hzIiwKICAgICAgIm1lY2tzIiwKICAgICAgIm1lZGlpIiwKICAgICAgIm1lZGxlIiwKICAgICAgIm1lZWRzIiwKICAgICAgIm1lZXJzIiwKICAgICAgIm1lZXRzIiwKICAgICAgIm1lZmZzIiwKICAgICAgIm1laW5zIiwKICAgICAgIm1laW50IiwKICAgICAgIm1laW55IiwKICAgICAgIm1laXRoIiwKICAgICAgIm1la2thIiwKICAgICAgIm1lbGFzIiwKICAgICAgIm1lbGJhIiwKICAgICAgIm1lbGRzIiwKICAgICAgIm1lbGljIiwKICAgICAgIm1lbGlrIiwKICAgICAgIm1lbGxzIiwKICAgICAgIm1lbHRzIiwKICAgICAgIm1lbHR5IiwKICAgICAgIm1lbWVzIiwKICAgICAgIm1lbW9zIiwKICAgICAgIm1lbmFkIiwKICAgICAgIm1lbmRzIiwKICAgICAgIm1lbmVkIiwKICAgICAgIm1lbmVzIiwKICAgICAgIm1lbmdlIiwKICAgICAgIm1lbmdzIiwKICAgICAgIm1lbnNhIiwKICAgICAgIm1lbnNlIiwKICAgICAgIm1lbnNoIiwKICAgICAgIm1lbnRhIiwKICAgICAgIm1lbnRvIiwKICAgICAgIm1lbnVzIiwKICAgICAgIm1lb3VzIiwKICAgICAgIm1lb3dzIiwKICAgICAgIm1lcmNoIiwKICAgICAgIm1lcmNzIiwKICAgICAgIm1lcmRlIiwKICAgICAgIm1lcmVkIiwKICAgICAgIm1lcmVsIiwKICAgICAgIm1lcmVyIiwKICAgICAgIm1lcmVzIiwKICAgICAgIm1lcmlsIiwKICAgICAgIm1lcmlzIiwKICAgICAgIm1lcmtzIiwKICAgICAgIm1lcmxlIiwKICAgICAgIm1lcmxzIiwKICAgICAgIm1lcnNlIiwKICAgICAgIm1lc2FsIiwKICAgICAgIm1lc2FzIiwKICAgICAgIm1lc2VsIiwKICAgICAgIm1lc2VzIiwKICAgICAgIm1lc2h5IiwKICAgICAgIm1lc2ljIiwKICAgICAgIm1lc25lIiwKICAgICAgIm1lc29uIiwKICAgICAgIm1lc3N5IiwKICAgICAgIm1lc3RvIiwKICAgICAgIm1ldGVkIiwKICAgICAgIm1ldGVzIiwKICAgICAgIm1ldGhvIiwKICAgICAgIm1ldGhzIiwKICAgICAgIm1ldGljIiwKICAgICAgIm1ldGlmIiwKICAgICAgIm1ldGlzIiwKICAgICAgIm1ldG9sIiwKICAgICAgIm1ldHJlIiwKICAgICAgIm1ldXNlIiwKICAgICAgIm1ldmVkIiwKICAgICAgIm1ldmVzIiwKICAgICAgIm1ld2VkIiwKICAgICAgIm1ld2xzIiwKICAgICAgIm1leW50IiwKICAgICAgIm1lemVzIiwKICAgICAgIm1lenplIiwKICAgICAgIm1lenpvIiwKICAgICAgIm1ob3JyIiwKICAgICAgIm1pYW91IiwKICAgICAgIm1pYW93IiwKICAgICAgIm1pYXNtIiwKICAgICAgIm1pYXVsIiwKICAgICAgIm1pY2FzIiwKICAgICAgIm1pY2hlIiwKICAgICAgIm1pY2h0IiwKICAgICAgIm1pY2tzIiwKICAgICAgIm1pY2t5IiwKICAgICAgIm1pY29zIiwKICAgICAgIm1pY3JhIiwKICAgICAgIm1pZGR5IiwKICAgICAgIm1pZGd5IiwKICAgICAgIm1pZGlzIiwKICAgICAgIm1pZW5zIiwKICAgICAgIm1pZXZlIiwKICAgICAgIm1pZmZzIiwKICAgICAgIm1pZmZ5IiwKICAgICAgIm1pZnR5IiwKICAgICAgIm1pZ2dzIiwKICAgICAgIm1paGFzIiwKICAgICAgIm1paGlzIiwKICAgICAgIm1pa2VkIiwKICAgICAgIm1pa2VzIiwKICAgICAgIm1pa3JhIiwKICAgICAgIm1pa3ZhIiwKICAgICAgIm1pbGNoIiwKICAgICAgIm1pbGRzIiwKICAgICAgIm1pbGVyIiwKICAgICAgIm1pbGVzIiwKICAgICAgIm1pbGZzIiwKICAgICAgIm1pbGlhIiwKICAgICAgIm1pbGtvIiwKICAgICAgIm1pbGtzIiwKICAgICAgIm1pbGxlIiwKICAgICAgIm1pbGxzIiwKICAgICAgIm1pbG9yIiwKICAgICAgIm1pbG9zIiwKICAgICAgIm1pbHBhIiwKICAgICAgIm1pbHRzIiwKICAgICAgIm1pbHR5IiwKICAgICAgIm1pbHR6IiwKICAgICAgIm1pbWVkIiwKICAgICAgIm1pbWVvIiwKICAgICAgIm1pbWVyIiwKICAgICAgIm1pbWVzIiwKICAgICAgIm1pbXN5IiwKICAgICAgIm1pbmFlIiwKICAgICAgIm1pbmFyIiwKICAgICAgIm1pbmFzIiwKICAgICAgIm1pbmN5IiwKICAgICAgIm1pbmRzIiwKICAgICAgIm1pbmVkIiwKICAgICAgIm1pbmVzIiwKICAgICAgIm1pbmdlIiwKICAgICAgIm1pbmdzIiwKICAgICAgIm1pbmd5IiwKICAgICAgIm1pbmlzIiwKICAgICAgIm1pbmtlIiwKICAgICAgIm1pbmtzIiwKICAgICAgIm1pbm55IiwKICAgICAgIm1pbm9zIiwKICAgICAgIm1pbnRzIiwKICAgICAgIm1pcmVkIiwKICAgICAgIm1pcmVzIiwKICAgICAgIm1pcmV4IiwKICAgICAgIm1pcmlkIiwKICAgICAgIm1pcmluIiwKICAgICAgIm1pcmtzIiwKICAgICAgIm1pcmt5IiwKICAgICAgIm1pcmx5IiwKICAgICAgIm1pcm9zIiwKICAgICAgIm1pcnZzIiwKICAgICAgIm1pcnphIiwKICAgICAgIm1pc2NoIiwKICAgICAgIm1pc2RvIiwKICAgICAgIm1pc2VzIiwKICAgICAgIm1pc2dvIiwKICAgICAgIm1pc29zIiwKICAgICAgIm1pc3NhIiwKICAgICAgIm1pc3RzIiwKICAgICAgIm1pc3R5IiwKICAgICAgIm1pdGNoIiwKICAgICAgIm1pdGVyIiwKICAgICAgIm1pdGVzIiwKICAgICAgIm1pdGlzIiwKICAgICAgIm1pdHJlIiwKICAgICAgIm1pdHRzIiwKICAgICAgIm1peGVkIiwKICAgICAgIm1peGVuIiwKICAgICAgIm1peGVyIiwKICAgICAgIm1peGVzIiwKICAgICAgIm1peHRlIiwKICAgICAgIm1peHVwIiwKICAgICAgIm1pemVuIiwKICAgICAgIm1penp5IiwKICAgICAgIm1uZW1lIiwKICAgICAgIm1vYW5zIiwKICAgICAgIm1vYXRzIiwKICAgICAgIm1vYmJ5IiwKICAgICAgIm1vYmVzIiwKICAgICAgIm1vYmV5IiwKICAgICAgIm1vYmllIiwKICAgICAgIm1vYmxlIiwKICAgICAgIm1vY2hpIiwKICAgICAgIm1vY2hzIiwKICAgICAgIm1vY2h5IiwKICAgICAgIm1vY2tzIiwKICAgICAgIm1vZGVyIiwKICAgICAgIm1vZGVzIiwKICAgICAgIm1vZGdlIiwKICAgICAgIm1vZGlpIiwKICAgICAgIm1vZHVzIiwKICAgICAgIm1vZXJzIiwKICAgICAgIm1vZm9zIiwKICAgICAgIm1vZ2d5IiwKICAgICAgIm1vaGVsIiwKICAgICAgIm1vaG9zIiwKICAgICAgIm1vaHJzIiwKICAgICAgIm1vaHVhIiwKICAgICAgIm1vaHVyIiwKICAgICAgIm1vaWxlIiwKICAgICAgIm1vaWxzIiwKICAgICAgIm1vaXJhIiwKICAgICAgIm1vaXJlIiwKICAgICAgIm1vaXRzIiwKICAgICAgIm1vam9zIiwKICAgICAgIm1va2VzIiwKICAgICAgIm1va2lzIiwKICAgICAgIm1va29zIiwKICAgICAgIm1vbGFsIiwKICAgICAgIm1vbGFzIiwKICAgICAgIm1vbGRzIiwKICAgICAgIm1vbGVkIiwKICAgICAgIm1vbGVzIiwKICAgICAgIm1vbGxhIiwKICAgICAgIm1vbGxzIiwKICAgICAgIm1vbGx5IiwKICAgICAgIm1vbHRvIiwKICAgICAgIm1vbHRzIiwKICAgICAgIm1vbHlzIiwKICAgICAgIm1vbWVzIiwKICAgICAgIm1vbW1hIiwKICAgICAgIm1vbW15IiwKICAgICAgIm1vbXVzIiwKICAgICAgIm1vbmFkIiwKICAgICAgIm1vbmFsIiwKICAgICAgIm1vbmFzIiwKICAgICAgIm1vbmRlIiwKICAgICAgIm1vbmRvIiwKICAgICAgIm1vbmVyIiwKICAgICAgIm1vbmdvIiwKICAgICAgIm1vbmdzIiwKICAgICAgIm1vbmljIiwKICAgICAgIm1vbmllIiwKICAgICAgIm1vbmtzIiwKICAgICAgIm1vbm9zIiwKICAgICAgIm1vbnRlIiwKICAgICAgIm1vbnR5IiwKICAgICAgIm1vb2JzIiwKICAgICAgIm1vb2NoIiwKICAgICAgIm1vb2RzIiwKICAgICAgIm1vb2VkIiwKICAgICAgIm1vb2tzIiwKICAgICAgIm1vb2xhIiwKICAgICAgIm1vb2xpIiwKICAgICAgIm1vb2xzIiwKICAgICAgIm1vb2x5IiwKICAgICAgIm1vb25nIiwKICAgICAgIm1vb25zIiwKICAgICAgIm1vb255IiwKICAgICAgIm1vb3BzIiwKICAgICAgIm1vb3JzIiwKICAgICAgIm1vb3J5IiwKICAgICAgIm1vb3RzIiwKICAgICAgIm1vb3ZlIiwKICAgICAgIm1vcGVkIiwKICAgICAgIm1vcGVyIiwKICAgICAgIm1vcGVzIiwKICAgICAgIm1vcGV5IiwKICAgICAgIm1vcHB5IiwKICAgICAgIm1vcHN5IiwKICAgICAgIm1vcHVzIiwKICAgICAgIm1vcmFlIiwKICAgICAgIm1vcmFzIiwKICAgICAgIm1vcmF0IiwKICAgICAgIm1vcmF5IiwKICAgICAgIm1vcmVsIiwKICAgICAgIm1vcmVzIiwKICAgICAgIm1vcmlhIiwKICAgICAgIm1vcm5lIiwKICAgICAgIm1vcm5zIiwKICAgICAgIm1vcnJhIiwKICAgICAgIm1vcnJvIiwKICAgICAgIm1vcnNlIiwKICAgICAgIm1vcnRzIiwKICAgICAgIm1vc2VkIiwKICAgICAgIm1vc2VzIiwKICAgICAgIm1vc2V5IiwKICAgICAgIm1vc2tzIiwKICAgICAgIm1vc3NvIiwKICAgICAgIm1vc3RlIiwKICAgICAgIm1vc3RzIiwKICAgICAgIm1vdGVkIiwKICAgICAgIm1vdGVuIiwKICAgICAgIm1vdGVzIiwKICAgICAgIm1vdGV0IiwKICAgICAgIm1vdGV5IiwKICAgICAgIm1vdGhzIiwKICAgICAgIm1vdGh5IiwKICAgICAgIm1vdGlzIiwKICAgICAgIm1vdHRlIiwKICAgICAgIm1vdHRzIiwKICAgICAgIm1vdHR5IiwKICAgICAgIm1vdHVzIiwKICAgICAgIm1vdHphIiwKICAgICAgIm1vdWNoIiwKICAgICAgIm1vdWVzIiwKICAgICAgIm1vdWxkIiwKICAgICAgIm1vdWxzIiwKICAgICAgIm1vdXBzIiwKICAgICAgIm1vdXN0IiwKICAgICAgIm1vdXN5IiwKICAgICAgIm1vdmVkIiwKICAgICAgIm1vdmVzIiwKICAgICAgIm1vd2FzIiwKICAgICAgIm1vd2VkIiwKICAgICAgIm1vd3JhIiwKICAgICAgIm1veGFzIiwKICAgICAgIm1veGllIiwKICAgICAgIm1veWFzIiwKICAgICAgIm1veWxlIiwKICAgICAgIm1veWxzIiwKICAgICAgIm1vemVkIiwKICAgICAgIm1vemVzIiwKICAgICAgIm1vem9zIiwKICAgICAgIm1wcmV0IiwKICAgICAgIm11Y2hvIiwKICAgICAgIm11Y2ljIiwKICAgICAgIm11Y2lkIiwKICAgICAgIm11Y2luIiwKICAgICAgIm11Y2tzIiwKICAgICAgIm11Y29yIiwKICAgICAgIm11Y3JvIiwKICAgICAgIm11ZGdlIiwKICAgICAgIm11ZGlyIiwKICAgICAgIm11ZHJhIiwKICAgICAgIm11ZmZzIiwKICAgICAgIm11ZnRpIiwKICAgICAgIm11Z2dhIiwKICAgICAgIm11Z2dzIiwKICAgICAgIm11Z2d5IiwKICAgICAgIm11aGx5IiwKICAgICAgIm11aWRzIiwKICAgICAgIm11aWxzIiwKICAgICAgIm11aXJzIiwKICAgICAgIm11aXN0IiwKICAgICAgIm11amlrIiwKICAgICAgIm11bGN0IiwKICAgICAgIm11bGVkIiwKICAgICAgIm11bGVzIiwKICAgICAgIm11bGV5IiwKICAgICAgIm11bGdhIiwKICAgICAgIm11bGllIiwKICAgICAgIm11bGxhIiwKICAgICAgIm11bGxzIiwKICAgICAgIm11bHNlIiwKICAgICAgIm11bHNoIiwKICAgICAgIm11bW1zIiwKICAgICAgIm11bXBzIiwKICAgICAgIm11bXN5IiwKICAgICAgIm11bXVzIiwKICAgICAgIm11bmdhIiwKICAgICAgIm11bmdlIiwKICAgICAgIm11bmdvIiwKICAgICAgIm11bmdzIiwKICAgICAgIm11bmlzIiwKICAgICAgIm11bnRzIiwKICAgICAgIm11bnR1IiwKICAgICAgIm11b25zIiwKICAgICAgIm11cmFzIiwKICAgICAgIm11cmVkIiwKICAgICAgIm11cmVzIiwKICAgICAgIm11cmV4IiwKICAgICAgIm11cmlkIiwKICAgICAgIm11cmtzIiwKICAgICAgIm11cmxzIiwKICAgICAgIm11cmx5IiwKICAgICAgIm11cnJhIiwKICAgICAgIm11cnJlIiwKICAgICAgIm11cnJpIiwKICAgICAgIm11cnJzIiwKICAgICAgIm11cnJ5IiwKICAgICAgIm11cnRpIiwKICAgICAgIm11cnZhIiwKICAgICAgIm11c2FyIiwKICAgICAgIm11c2NhIiwKICAgICAgIm11c2VkIiwKICAgICAgIm11c2VyIiwKICAgICAgIm11c2VzIiwKICAgICAgIm11c2V0IiwKICAgICAgIm11c2hhIiwKICAgICAgIm11c2l0IiwKICAgICAgIm11c2tzIiwKICAgICAgIm11c29zIiwKICAgICAgIm11c3NlIiwKICAgICAgIm11c3N5IiwKICAgICAgIm11c3RoIiwKICAgICAgIm11c3RzIiwKICAgICAgIm11dGNoIiwKICAgICAgIm11dGVkIiwKICAgICAgIm11dGVyIiwKICAgICAgIm11dGVzIiwKICAgICAgIm11dGhhIiwKICAgICAgIm11dGlzIiwKICAgICAgIm11dG9uIiwKICAgICAgIm11dHRzIiwKICAgICAgIm11eGVkIiwKICAgICAgIm11eGVzIiwKICAgICAgIm11emFrIiwKICAgICAgIm11enp5IiwKICAgICAgIm12dWxlIiwKICAgICAgIm15YWxsIiwKICAgICAgIm15bGFyIiwKICAgICAgIm15bmFoIiwKICAgICAgIm15bmFzIiwKICAgICAgIm15b2lkIiwKICAgICAgIm15b21hIiwKICAgICAgIm15b3BlIiwKICAgICAgIm15b3BzIiwKICAgICAgIm15b3B5IiwKICAgICAgIm15c2lkIiwKICAgICAgIm15dGhpIiwKICAgICAgIm15dGhzIiwKICAgICAgIm15dGh5IiwKICAgICAgIm15eG9zIiwKICAgICAgIm16ZWVzIiwKICAgICAgIm5hYW1zIiwKICAgICAgIm5hYW5zIiwKICAgICAgIm5hYmVzIiwKICAgICAgIm5hYmlzIiwKICAgICAgIm5hYmtzIiwKICAgICAgIm5hYmxhIiwKICAgICAgIm5hYm9iIiwKICAgICAgIm5hY2hlIiwKICAgICAgIm5hY2hvIiwKICAgICAgIm5hY3JlIiwKICAgICAgIm5hZGFzIiwKICAgICAgIm5hZXZlIiwKICAgICAgIm5hZXZpIiwKICAgICAgIm5hZmZzIiwKICAgICAgIm5hZ2FzIiwKICAgICAgIm5hZ2d5IiwKICAgICAgIm5hZ29yIiwKICAgICAgIm5haGFsIiwKICAgICAgIm5haWFkIiwKICAgICAgIm5haWZzIiwKICAgICAgIm5haWtzIiwKICAgICAgIm5haWxzIiwKICAgICAgIm5haXJhIiwKICAgICAgIm5haXJ1IiwKICAgICAgIm5ha2VkIiwKICAgICAgIm5ha2VyIiwKICAgICAgIm5ha2ZhIiwKICAgICAgIm5hbGFzIiwKICAgICAgIm5hbGVkIiwKICAgICAgIm5hbGxhIiwKICAgICAgIm5hbWVkIiwKICAgICAgIm5hbWVyIiwKICAgICAgIm5hbWVzIiwKICAgICAgIm5hbW1hIiwKICAgICAgIm5hbXVzIiwKICAgICAgIm5hbmFzIiwKICAgICAgIm5hbmNlIiwKICAgICAgIm5hbmN5IiwKICAgICAgIm5hbmR1IiwKICAgICAgIm5hbm5hIiwKICAgICAgIm5hbm9zIiwKICAgICAgIm5hbnVhIiwKICAgICAgIm5hcGFzIiwKICAgICAgIm5hcGVkIiwKICAgICAgIm5hcGVzIiwKICAgICAgIm5hcG9vIiwKICAgICAgIm5hcHBhIiwKICAgICAgIm5hcHBlIiwKICAgICAgIm5hcHB5IiwKICAgICAgIm5hcmFzIiwKICAgICAgIm5hcmNvIiwKICAgICAgIm5hcmNzIiwKICAgICAgIm5hcmRzIiwKICAgICAgIm5hcmVzIiwKICAgICAgIm5hcmljIiwKICAgICAgIm5hcmlzIiwKICAgICAgIm5hcmtzIiwKICAgICAgIm5hcmt5IiwKICAgICAgIm5hcnJlIiwKICAgICAgIm5hc2hpIiwKICAgICAgIm5hdGNoIiwKICAgICAgIm5hdGVzIiwKICAgICAgIm5hdGlzIiwKICAgICAgIm5hdHR5IiwKICAgICAgIm5hdWNoIiwKICAgICAgIm5hdW50IiwKICAgICAgIm5hdmFyIiwKICAgICAgIm5hdmVzIiwKICAgICAgIm5hdmV3IiwKICAgICAgIm5hdnZ5IiwKICAgICAgIm5hd2FiIiwKICAgICAgIm5hemVzIiwKICAgICAgIm5hemlyIiwKICAgICAgIm5hemlzIiwKICAgICAgIm5kdWphIiwKICAgICAgIm5lYWZlIiwKICAgICAgIm5lYWxzIiwKICAgICAgIm5lYXBzIiwKICAgICAgIm5lYXJzIiwKICAgICAgIm5lYXRoIiwKICAgICAgIm5lYXRzIiwKICAgICAgIm5lYmVrIiwKICAgICAgIm5lYmVsIiwKICAgICAgIm5lY2tzIiwKICAgICAgIm5lZGR5IiwKICAgICAgIm5lZWRzIiwKICAgICAgIm5lZWxkIiwKICAgICAgIm5lZWxlIiwKICAgICAgIm5lZW1iIiwKICAgICAgIm5lZW1zIiwKICAgICAgIm5lZXBzIiwKICAgICAgIm5lZXNlIiwKICAgICAgIm5lZXplIiwKICAgICAgIm5lZ3JvIiwKICAgICAgIm5lZ3VzIiwKICAgICAgIm5laWZzIiwKICAgICAgIm5laXN0IiwKICAgICAgIm5laXZlIiwKICAgICAgIm5lbGlzIiwKICAgICAgIm5lbGx5IiwKICAgICAgIm5lbWFzIiwKICAgICAgIm5lbW5zIiwKICAgICAgIm5lbXB0IiwKICAgICAgIm5lbmVzIiwKICAgICAgIm5lb25zIiwKICAgICAgIm5lcGVyIiwKICAgICAgIm5lcGl0IiwKICAgICAgIm5lcmFsIiwKICAgICAgIm5lcmRzIiwKICAgICAgIm5lcmthIiwKICAgICAgIm5lcmtzIiwKICAgICAgIm5lcm9sIiwKICAgICAgIm5lcnRzIiwKICAgICAgIm5lcnR6IiwKICAgICAgIm5lcnZ5IiwKICAgICAgIm5lc3RzIiwKICAgICAgIm5ldGVzIiwKICAgICAgIm5ldG9wIiwKICAgICAgIm5ldHRzIiwKICAgICAgIm5ldHR5IiwKICAgICAgIm5ldWtzIiwKICAgICAgIm5ldW1lIiwKICAgICAgIm5ldW1zIiwKICAgICAgIm5ldmVsIiwKICAgICAgIm5ldmVzIiwKICAgICAgIm5ldnVzIiwKICAgICAgIm5ld2JzIiwKICAgICAgIm5ld2VkIiwKICAgICAgIm5ld2VsIiwKICAgICAgIm5ld2llIiwKICAgICAgIm5ld3N5IiwKICAgICAgIm5ld3RzIiwKICAgICAgIm5leHRzIiwKICAgICAgIm5leHVzIiwKICAgICAgIm5nYWlvIiwKICAgICAgIm5nYW5hIiwKICAgICAgIm5nYXRpIiwKICAgICAgIm5nb21hIiwKICAgICAgIm5nd2VlIiwKICAgICAgIm5pY2FkIiwKICAgICAgIm5pY2h0IiwKICAgICAgIm5pY2tzIiwKICAgICAgIm5pY29sIiwKICAgICAgIm5pZGFsIiwKICAgICAgIm5pZGVkIiwKICAgICAgIm5pZGVzIiwKICAgICAgIm5pZG9yIiwKICAgICAgIm5pZHVzIiwKICAgICAgIm5pZWZzIiwKICAgICAgIm5pZXZlIiwKICAgICAgIm5pZmVzIiwKICAgICAgIm5pZmZzIiwKICAgICAgIm5pZmZ5IiwKICAgICAgIm5pZnR5IiwKICAgICAgIm5pZ2VyIiwKICAgICAgIm5pZ2hzIiwKICAgICAgIm5paGlsIiwKICAgICAgIm5pa2FiIiwKICAgICAgIm5pa2FoIiwKICAgICAgIm5pa2F1IiwKICAgICAgIm5pbGxzIiwKICAgICAgIm5pbWJpIiwKICAgICAgIm5pbWJzIiwKICAgICAgIm5pbXBzIiwKICAgICAgIm5pbmVyIiwKICAgICAgIm5pbmVzIiwKICAgICAgIm5pbm9uIiwKICAgICAgIm5pcGFzIiwKICAgICAgIm5pcHB5IiwKICAgICAgIm5pcWFiIiwKICAgICAgIm5pcmxzIiwKICAgICAgIm5pcmx5IiwKICAgICAgIm5pc2VpIiwKICAgICAgIm5pc3NlIiwKICAgICAgIm5pc3VzIiwKICAgICAgIm5pdGVyIiwKICAgICAgIm5pdGVzIiwKICAgICAgIm5pdGlkIiwKICAgICAgIm5pdG9uIiwKICAgICAgIm5pdHJlIiwKICAgICAgIm5pdHJvIiwKICAgICAgIm5pdHJ5IiwKICAgICAgIm5pdHR5IiwKICAgICAgIm5pdmFsIiwKICAgICAgIm5peGVkIiwKICAgICAgIm5peGVyIiwKICAgICAgIm5peGVzIiwKICAgICAgIm5peGllIiwKICAgICAgIm5pemFtIiwKICAgICAgIm5rb3NpIiwKICAgICAgIm5vYWhzIiwKICAgICAgIm5vYmJ5IiwKICAgICAgIm5vY2tzIiwKICAgICAgIm5vZGFsIiwKICAgICAgIm5vZGR5IiwKICAgICAgIm5vZGVzIiwKICAgICAgIm5vZHVzIiwKICAgICAgIm5vZWxzIiwKICAgICAgIm5vZ2dzIiwKICAgICAgIm5vaG93IiwKICAgICAgIm5vaWxzIiwKICAgICAgIm5vaWx5IiwKICAgICAgIm5vaW50IiwKICAgICAgIm5vaXJzIiwKICAgICAgIm5vbGVzIiwKICAgICAgIm5vbGxzIiwKICAgICAgIm5vbG9zIiwKICAgICAgIm5vbWFzIiwKICAgICAgIm5vbWVuIiwKICAgICAgIm5vbWVzIiwKICAgICAgIm5vbWljIiwKICAgICAgIm5vbW9pIiwKICAgICAgIm5vbW9zIiwKICAgICAgIm5vbmFzIiwKICAgICAgIm5vbmNlIiwKICAgICAgIm5vbmVzIiwKICAgICAgIm5vbmV0IiwKICAgICAgIm5vbmdzIiwKICAgICAgIm5vbmlzIiwKICAgICAgIm5vbm55IiwKICAgICAgIm5vbnlsIiwKICAgICAgIm5vb2JzIiwKICAgICAgIm5vb2l0IiwKICAgICAgIm5vb2tzIiwKICAgICAgIm5vb2t5IiwKICAgICAgIm5vb25zIiwKICAgICAgIm5vb3BzIiwKICAgICAgIm5vcGFsIiwKICAgICAgIm5vcmlhIiwKICAgICAgIm5vcmlzIiwKICAgICAgIm5vcmtzIiwKICAgICAgIm5vcm1hIiwKICAgICAgIm5vcm1zIiwKICAgICAgIm5vc2VkIiwKICAgICAgIm5vc2VyIiwKICAgICAgIm5vc2VzIiwKICAgICAgIm5vdGFsIiwKICAgICAgIm5vdGVkIiwKICAgICAgIm5vdGVyIiwKICAgICAgIm5vdGVzIiwKICAgICAgIm5vdHVtIiwKICAgICAgIm5vdWxkIiwKICAgICAgIm5vdWxlIiwKICAgICAgIm5vdWxzIiwKICAgICAgIm5vdW5zIiwKICAgICAgIm5vdW55IiwKICAgICAgIm5vdXBzIiwKICAgICAgIm5vdmFlIiwKICAgICAgIm5vdmFzIiwKICAgICAgIm5vdnVtIiwKICAgICAgIm5vd2F5IiwKICAgICAgIm5vd2VkIiwKICAgICAgIm5vd2xzIiwKICAgICAgIm5vd3RzIiwKICAgICAgIm5vd3R5IiwKICAgICAgIm5veGFsIiwKICAgICAgIm5veGVzIiwKICAgICAgIm5veWF1IiwKICAgICAgIm5veWVkIiwKICAgICAgIm5veWVzIiwKICAgICAgIm51YmJ5IiwKICAgICAgIm51YmlhIiwKICAgICAgIm51Y2hhIiwKICAgICAgIm51ZGR5IiwKICAgICAgIm51ZGVyIiwKICAgICAgIm51ZGVzIiwKICAgICAgIm51ZGllIiwKICAgICAgIm51ZHpoIiwKICAgICAgIm51ZmZzIiwKICAgICAgIm51Z2FlIiwKICAgICAgIm51a2VkIiwKICAgICAgIm51a2VzIiwKICAgICAgIm51bGxhIiwKICAgICAgIm51bGxzIiwKICAgICAgIm51bWJzIiwKICAgICAgIm51bWVuIiwKICAgICAgIm51bW15IiwKICAgICAgIm51bm55IiwKICAgICAgIm51cmRzIiwKICAgICAgIm51cmR5IiwKICAgICAgIm51cmxzIiwKICAgICAgIm51cnJzIiwKICAgICAgIm51dHNvIiwKICAgICAgIm51dHN5IiwKICAgICAgIm55YWZmIiwKICAgICAgIm55YWxhIiwKICAgICAgIm55aW5nIiwKICAgICAgIm55c3NhIiwKICAgICAgIm9ha2VkIiwKICAgICAgIm9ha2VyIiwKICAgICAgIm9ha3VtIiwKICAgICAgIm9hcmVkIiwKICAgICAgIm9hc2VzIiwKICAgICAgIm9hc2lzIiwKICAgICAgIm9hc3RzIiwKICAgICAgIm9hdGVuIiwKICAgICAgIm9hdGVyIiwKICAgICAgIm9hdGhzIiwKICAgICAgIm9hdmVzIiwKICAgICAgIm9iYW5nIiwKICAgICAgIm9iZWFoIiwKICAgICAgIm9iZWxpIiwKICAgICAgIm9iZXlzIiwKICAgICAgIm9iaWFzIiwKICAgICAgIm9iaWVkIiwKICAgICAgIm9iaWl0IiwKICAgICAgIm9iaXRzIiwKICAgICAgIm9iamV0IiwKICAgICAgIm9ib2VzIiwKICAgICAgIm9ib2xlIiwKICAgICAgIm9ib2xpIiwKICAgICAgIm9ib2xzIiwKICAgICAgIm9jY2FtIiwKICAgICAgIm9jaGVyIiwKICAgICAgIm9jaGVzIiwKICAgICAgIm9jaHJlIiwKICAgICAgIm9jaHJ5IiwKICAgICAgIm9ja2VyIiwKICAgICAgIm9jcmVhIiwKICAgICAgIm9jdGFkIiwKICAgICAgIm9jdGFuIiwKICAgICAgIm9jdGFzIiwKICAgICAgIm9jdHlsIiwKICAgICAgIm9jdWxpIiwKICAgICAgIm9kYWhzIiwKICAgICAgIm9kYWxzIiwKICAgICAgIm9kZW9uIiwKICAgICAgIm9kZXVtIiwKICAgICAgIm9kaXNtIiwKICAgICAgIm9kaXN0IiwKICAgICAgIm9kaXVtIiwKICAgICAgIm9kb3JzIiwKICAgICAgIm9kb3VyIiwKICAgICAgIm9keWxlIiwKICAgICAgIm9keWxzIiwKICAgICAgIm9mYXlzIiwKICAgICAgIm9mZmVkIiwKICAgICAgIm9mZmllIiwKICAgICAgIm9mbGFnIiwKICAgICAgIm9mdGVyIiwKICAgICAgIm9nYW1zIiwKICAgICAgIm9nZWVkIiwKICAgICAgIm9nZWVzIiwKICAgICAgIm9nZ2luIiwKICAgICAgIm9naGFtIiwKICAgICAgIm9naXZlIiwKICAgICAgIm9nbGVkIiwKICAgICAgIm9nbGVyIiwKICAgICAgIm9nbGVzIiwKICAgICAgIm9nbWljIiwKICAgICAgIm9ncmVzIiwKICAgICAgIm9oaWFzIiwKICAgICAgIm9oaW5nIiwKICAgICAgIm9obWljIiwKICAgICAgIm9ob25lIiwKICAgICAgIm9pZGlhIiwKICAgICAgIm9pbGVkIiwKICAgICAgIm9pbGVyIiwKICAgICAgIm9pbmtzIiwKICAgICAgIm9pbnRzIiwKICAgICAgIm9qaW1lIiwKICAgICAgIm9rYXBpIiwKICAgICAgIm9rYXlzIiwKICAgICAgIm9rZWhzIiwKICAgICAgIm9rcmFzIiwKICAgICAgIm9rdGFzIiwKICAgICAgIm9sZGllIiwKICAgICAgIm9sZWljIiwKICAgICAgIm9sZWluIiwKICAgICAgIm9sZW50IiwKICAgICAgIm9sZW9zIiwKICAgICAgIm9sZXVtIiwKICAgICAgIm9saW9zIiwKICAgICAgIm9sbGFzIiwKICAgICAgIm9sbGF2IiwKICAgICAgIm9sbGVyIiwKICAgICAgIm9sbGllIiwKICAgICAgIm9sb2d5IiwKICAgICAgIm9scGFlIiwKICAgICAgIm9scGVzIiwKICAgICAgIm9tYXNhIiwKICAgICAgIm9tYmVyIiwKICAgICAgIm9tYnVzIiwKICAgICAgIm9tZW5zIiwKICAgICAgIm9tZXJzIiwKICAgICAgIm9taXRzIiwKICAgICAgIm9tbGFoIiwKICAgICAgIm9tb3ZzIiwKICAgICAgIm9tcmFoIiwKICAgICAgIm9uY2VyIiwKICAgICAgIm9uY2VzIiwKICAgICAgIm9uY2V0IiwKICAgICAgIm9uY3VzIiwKICAgICAgIm9uZWx5IiwKICAgICAgIm9uZXJzIiwKICAgICAgIm9uZXJ5IiwKICAgICAgIm9uaXVtIiwKICAgICAgIm9ua3VzIiwKICAgICAgIm9ubGF5IiwKICAgICAgIm9ubmVkIiwKICAgICAgIm9udGljIiwKICAgICAgIm9vYml0IiwKICAgICAgIm9vaGVkIiwKICAgICAgIm9vbXBoIiwKICAgICAgIm9vbnRzIiwKICAgICAgIm9vcGVkIiwKICAgICAgIm9vcmllIiwKICAgICAgIm9vc2VzIiwKICAgICAgIm9vdGlkIiwKICAgICAgIm9vemVkIiwKICAgICAgIm9vemVzIiwKICAgICAgIm9wYWhzIiwKICAgICAgIm9wYWxzIiwKICAgICAgIm9wZW5zIiwKICAgICAgIm9wZXBlIiwKICAgICAgIm9waW5nIiwKICAgICAgIm9wcG9zIiwKICAgICAgIm9wc2luIiwKICAgICAgIm9wdGVkIiwKICAgICAgIm9wdGVyIiwKICAgICAgIm9yYWNoIiwKICAgICAgIm9yYWN5IiwKICAgICAgIm9yYWxzIiwKICAgICAgIm9yYW5nIiwKICAgICAgIm9yYW50IiwKICAgICAgIm9yYXRlIiwKICAgICAgIm9yYmVkIiwKICAgICAgIm9yY2FzIiwKICAgICAgIm9yY2luIiwKICAgICAgIm9yZG9zIiwKICAgICAgIm9yZWFkIiwKICAgICAgIm9yZmVzIiwKICAgICAgIm9yZ2lhIiwKICAgICAgIm9yZ2ljIiwKICAgICAgIm9yZ3VlIiwKICAgICAgIm9yaWJpIiwKICAgICAgIm9yaWVsIiwKICAgICAgIm9yaXhhIiwKICAgICAgIm9ybGVzIiwKICAgICAgIm9ybG9uIiwKICAgICAgIm9ybG9wIiwKICAgICAgIm9ybWVyIiwKICAgICAgIm9ybmlzIiwKICAgICAgIm9ycGluIiwKICAgICAgIm9ycmlzIiwKICAgICAgIm9ydGhvIiwKICAgICAgIm9ydmFsIiwKICAgICAgIm9yem9zIiwKICAgICAgIm9zY2FyIiwKICAgICAgIm9zaGFjIiwKICAgICAgIm9zaWVyIiwKICAgICAgIm9zbWljIiwKICAgICAgIm9zbW9sIiwKICAgICAgIm9zc2lhIiwKICAgICAgIm9zdGlhIiwKICAgICAgIm90YWt1IiwKICAgICAgIm90YXJ5IiwKICAgICAgIm90dGFyIiwKICAgICAgIm90dG9zIiwKICAgICAgIm91Yml0IiwKICAgICAgIm91Y2h0IiwKICAgICAgIm91ZW5zIiwKICAgICAgIm91aWphIiwKICAgICAgIm91bGtzIiwKICAgICAgIm91bWFzIiwKICAgICAgIm91bmR5IiwKICAgICAgIm91cGFzIiwKICAgICAgIm91cGVkIiwKICAgICAgIm91cGhlIiwKICAgICAgIm91cGhzIiwKICAgICAgIm91cmllIiwKICAgICAgIm91c2VsIiwKICAgICAgIm91c3RzIiwKICAgICAgIm91dGJ5IiwKICAgICAgIm91dGVkIiwKICAgICAgIm91dHJlIiwKICAgICAgIm91dHJvIiwKICAgICAgIm91dHRhIiwKICAgICAgIm91emVsIiwKICAgICAgIm91em9zIiwKICAgICAgIm92YWxzIiwKICAgICAgIm92ZWxzIiwKICAgICAgIm92ZW5zIiwKICAgICAgIm92ZXJzIiwKICAgICAgIm92aXN0IiwKICAgICAgIm92b2xpIiwKICAgICAgIm92b2xvIiwKICAgICAgIm92dWxlIiwKICAgICAgIm93Y2hlIiwKICAgICAgIm93aWVzIiwKICAgICAgIm93bGVkIiwKICAgICAgIm93bGVyIiwKICAgICAgIm93bGV0IiwKICAgICAgIm93bmVkIiwKICAgICAgIm93cmVzIiwKICAgICAgIm93cmllIiwKICAgICAgIm93c2VuIiwKICAgICAgIm94Ym93IiwKICAgICAgIm94ZXJzIiwKICAgICAgIm94ZXllIiwKICAgICAgIm94aWRzIiwKICAgICAgIm94aWVzIiwKICAgICAgIm94aW1lIiwKICAgICAgIm94aW1zIiwKICAgICAgIm94bGlwIiwKICAgICAgIm94dGVyIiwKICAgICAgIm95ZXJzIiwKICAgICAgIm96ZWtpIiwKICAgICAgIm96emllIiwKICAgICAgInBhYWxzIiwKICAgICAgInBhYW5zIiwKICAgICAgInBhY2FzIiwKICAgICAgInBhY2VkIiwKICAgICAgInBhY2VyIiwKICAgICAgInBhY2VzIiwKICAgICAgInBhY2V5IiwKICAgICAgInBhY2hhIiwKICAgICAgInBhY2tzIiwKICAgICAgInBhY29zIiwKICAgICAgInBhY3RhIiwKICAgICAgInBhY3RzIiwKICAgICAgInBhZGlzIiwKICAgICAgInBhZGxlIiwKICAgICAgInBhZG1hIiwKICAgICAgInBhZHJlIiwKICAgICAgInBhZHJpIiwKICAgICAgInBhZWFuIiwKICAgICAgInBhZWRvIiwKICAgICAgInBhZW9uIiwKICAgICAgInBhZ2VkIiwKICAgICAgInBhZ2VyIiwKICAgICAgInBhZ2VzIiwKICAgICAgInBhZ2xlIiwKICAgICAgInBhZ29kIiwKICAgICAgInBhZ3JpIiwKICAgICAgInBhaWtzIiwKICAgICAgInBhaWxzIiwKICAgICAgInBhaW5zIiwKICAgICAgInBhaXJlIiwKICAgICAgInBhaXJzIiwKICAgICAgInBhaXNhIiwKICAgICAgInBhaXNlIiwKICAgICAgInBha2thIiwKICAgICAgInBhbGFzIiwKICAgICAgInBhbGF5IiwKICAgICAgInBhbGVhIiwKICAgICAgInBhbGVkIiwKICAgICAgInBhbGVzIiwKICAgICAgInBhbGV0IiwKICAgICAgInBhbGlzIiwKICAgICAgInBhbGtpIiwKICAgICAgInBhbGxhIiwKICAgICAgInBhbGxzIiwKICAgICAgInBhbGx5IiwKICAgICAgInBhbG1zIiwKICAgICAgInBhbG15IiwKICAgICAgInBhbHBpIiwKICAgICAgInBhbHBzIiwKICAgICAgInBhbHNhIiwKICAgICAgInBhbXBhIiwKICAgICAgInBhbmF4IiwKICAgICAgInBhbmNlIiwKICAgICAgInBhbmRhIiwKICAgICAgInBhbmRzIiwKICAgICAgInBhbmR5IiwKICAgICAgInBhbmVkIiwKICAgICAgInBhbmVzIiwKICAgICAgInBhbmdhIiwKICAgICAgInBhbmdzIiwKICAgICAgInBhbmltIiwKICAgICAgInBhbmtvIiwKICAgICAgInBhbm5lIiwKICAgICAgInBhbm5pIiwKICAgICAgInBhbnRvIiwKICAgICAgInBhbnRzIiwKICAgICAgInBhbnR5IiwKICAgICAgInBhb2xpIiwKICAgICAgInBhb2xvIiwKICAgICAgInBhcGFzIiwKICAgICAgInBhcGF3IiwKICAgICAgInBhcGVzIiwKICAgICAgInBhcHBpIiwKICAgICAgInBhcHB5IiwKICAgICAgInBhcmFlIiwKICAgICAgInBhcmFzIiwKICAgICAgInBhcmNoIiwKICAgICAgInBhcmRpIiwKICAgICAgInBhcmRzIiwKICAgICAgInBhcmR5IiwKICAgICAgInBhcmVkIiwKICAgICAgInBhcmVuIiwKICAgICAgInBhcmVvIiwKICAgICAgInBhcmVzIiwKICAgICAgInBhcmV1IiwKICAgICAgInBhcmV2IiwKICAgICAgInBhcmdlIiwKICAgICAgInBhcmdvIiwKICAgICAgInBhcmlzIiwKICAgICAgInBhcmtpIiwKICAgICAgInBhcmtzIiwKICAgICAgInBhcmt5IiwKICAgICAgInBhcmxlIiwKICAgICAgInBhcmx5IiwKICAgICAgInBhcm1hIiwKICAgICAgInBhcm9sIiwKICAgICAgInBhcnBzIiwKICAgICAgInBhcnJhIiwKICAgICAgInBhcnJzIiwKICAgICAgInBhcnRpIiwKICAgICAgInBhcnRzIiwKICAgICAgInBhcnZlIiwKICAgICAgInBhcnZvIiwKICAgICAgInBhc2VvIiwKICAgICAgInBhc2VzIiwKICAgICAgInBhc2hhIiwKICAgICAgInBhc2htIiwKICAgICAgInBhc2thIiwKICAgICAgInBhc3B5IiwKICAgICAgInBhc3NlIiwKICAgICAgInBhc3RzIiwKICAgICAgInBhdGVkIiwKICAgICAgInBhdGVuIiwKICAgICAgInBhdGVyIiwKICAgICAgInBhdGVzIiwKICAgICAgInBhdGhzIiwKICAgICAgInBhdGluIiwKICAgICAgInBhdGthIiwKICAgICAgInBhdGx5IiwKICAgICAgInBhdHRlIiwKICAgICAgInBhdHVzIiwKICAgICAgInBhdWFzIiwKICAgICAgInBhdWxzIiwKICAgICAgInBhdmFuIiwKICAgICAgInBhdmVkIiwKICAgICAgInBhdmVuIiwKICAgICAgInBhdmVyIiwKICAgICAgInBhdmVzIiwKICAgICAgInBhdmlkIiwKICAgICAgInBhdmluIiwKICAgICAgInBhdmlzIiwKICAgICAgInBhd2FzIiwKICAgICAgInBhd2F3IiwKICAgICAgInBhd2VkIiwKICAgICAgInBhd2VyIiwKICAgICAgInBhd2tzIiwKICAgICAgInBhd2t5IiwKICAgICAgInBhd2xzIiwKICAgICAgInBhd25zIiwKICAgICAgInBheGVzIiwKICAgICAgInBheWVkIiwKICAgICAgInBheW9yIiwKICAgICAgInBheXNkIiwKICAgICAgInBlYWdlIiwKICAgICAgInBlYWdzIiwKICAgICAgInBlYWtzIiwKICAgICAgInBlYWt5IiwKICAgICAgInBlYWxzIiwKICAgICAgInBlYW5zIiwKICAgICAgInBlYXJlIiwKICAgICAgInBlYXJzIiwKICAgICAgInBlYXJ0IiwKICAgICAgInBlYXNlIiwKICAgICAgInBlYXRzIiwKICAgICAgInBlYXR5IiwKICAgICAgInBlYXZ5IiwKICAgICAgInBlYXplIiwKICAgICAgInBlYmFzIiwKICAgICAgInBlY2hzIiwKICAgICAgInBlY2tlIiwKICAgICAgInBlY2tzIiwKICAgICAgInBlY2t5IiwKICAgICAgInBlZGVzIiwKICAgICAgInBlZGlzIiwKICAgICAgInBlZHJvIiwKICAgICAgInBlZWNlIiwKICAgICAgInBlZWtzIiwKICAgICAgInBlZWxzIiwKICAgICAgInBlZW5zIiwKICAgICAgInBlZW95IiwKICAgICAgInBlZXBlIiwKICAgICAgInBlZXBzIiwKICAgICAgInBlZXJzIiwKICAgICAgInBlZXJ5IiwKICAgICAgInBlZXZlIiwKICAgICAgInBlZ2d5IiwKICAgICAgInBlZ2hzIiwKICAgICAgInBlaW5zIiwKICAgICAgInBlaXNlIiwKICAgICAgInBlaXplIiwKICAgICAgInBla2FuIiwKICAgICAgInBla2VzIiwKICAgICAgInBla2luIiwKICAgICAgInBla29lIiwKICAgICAgInBlbGFzIiwKICAgICAgInBlbGF1IiwKICAgICAgInBlbGVzIiwKICAgICAgInBlbGZzIiwKICAgICAgInBlbGxzIiwKICAgICAgInBlbG1hIiwKICAgICAgInBlbG9uIiwKICAgICAgInBlbHRhIiwKICAgICAgInBlbHRzIiwKICAgICAgInBlbmRzIiwKICAgICAgInBlbmR1IiwKICAgICAgInBlbmVkIiwKICAgICAgInBlbmVzIiwKICAgICAgInBlbmdvIiwKICAgICAgInBlbmllIiwKICAgICAgInBlbmlzIiwKICAgICAgInBlbmtzIiwKICAgICAgInBlbm5hIiwKICAgICAgInBlbm5pIiwKICAgICAgInBlbnRzIiwKICAgICAgInBlb25zIiwKICAgICAgInBlb255IiwKICAgICAgInBlcGxhIiwKICAgICAgInBlcG9zIiwKICAgICAgInBlcHB5IiwKICAgICAgInBlcHNpIiwKICAgICAgInBlcmFpIiwKICAgICAgInBlcmNlIiwKICAgICAgInBlcmNzIiwKICAgICAgInBlcmR1IiwKICAgICAgInBlcmR5IiwKICAgICAgInBlcmVhIiwKICAgICAgInBlcmVzIiwKICAgICAgInBlcmlzIiwKICAgICAgInBlcmtzIiwKICAgICAgInBlcm1zIiwKICAgICAgInBlcm5zIiwKICAgICAgInBlcm9nIiwKICAgICAgInBlcnBzIiwKICAgICAgInBlcnJ5IiwKICAgICAgInBlcnNlIiwKICAgICAgInBlcnN0IiwKICAgICAgInBlcnRzIiwKICAgICAgInBlcnZlIiwKICAgICAgInBlcnZvIiwKICAgICAgInBlcnZzIiwKICAgICAgInBlcnZ5IiwKICAgICAgInBlc29zIiwKICAgICAgInBlc3RzIiwKICAgICAgInBlc3R5IiwKICAgICAgInBldGFyIiwKICAgICAgInBldGVyIiwKICAgICAgInBldGl0IiwKICAgICAgInBldHJlIiwKICAgICAgInBldHJpIiwKICAgICAgInBldHRpIiwKICAgICAgInBldHRvIiwKICAgICAgInBld2VlIiwKICAgICAgInBld2l0IiwKICAgICAgInBleXNlIiwKICAgICAgInBoYWdlIiwKICAgICAgInBoYW5nIiwKICAgICAgInBoYXJlIiwKICAgICAgInBoYXJtIiwKICAgICAgInBoZWVyIiwKICAgICAgInBoZW5lIiwKICAgICAgInBoZW9uIiwKICAgICAgInBoZXNlIiwKICAgICAgInBoaWFsIiwKICAgICAgInBoaXNoIiwKICAgICAgInBoaXp6IiwKICAgICAgInBobG94IiwKICAgICAgInBob2NhIiwKICAgICAgInBob25vIiwKICAgICAgInBob25zIiwKICAgICAgInBob3RzIiwKICAgICAgInBocGh0IiwKICAgICAgInBodXRzIiwKICAgICAgInBoeWxhIiwKICAgICAgInBoeWxlIiwKICAgICAgInBpYW5pIiwKICAgICAgInBpYW5zIiwKICAgICAgInBpYmFsIiwKICAgICAgInBpY2FsIiwKICAgICAgInBpY2FzIiwKICAgICAgInBpY2N5IiwKICAgICAgInBpY2tzIiwKICAgICAgInBpY290IiwKICAgICAgInBpY3JhIiwKICAgICAgInBpY3VsIiwKICAgICAgInBpZW5kIiwKICAgICAgInBpZXJzIiwKICAgICAgInBpZXJ0IiwKICAgICAgInBpZXRhIiwKICAgICAgInBpZXRzIiwKICAgICAgInBpZXpvIiwKICAgICAgInBpZ2h0IiwKICAgICAgInBpZ215IiwKICAgICAgInBpaW5nIiwKICAgICAgInBpa2FzIiwKICAgICAgInBpa2F1IiwKICAgICAgInBpa2VkIiwKICAgICAgInBpa2VyIiwKICAgICAgInBpa2VzIiwKICAgICAgInBpa2V5IiwKICAgICAgInBpa2lzIiwKICAgICAgInBpa3VsIiwKICAgICAgInBpbGFlIiwKICAgICAgInBpbGFmIiwKICAgICAgInBpbGFvIiwKICAgICAgInBpbGFyIiwKICAgICAgInBpbGF1IiwKICAgICAgInBpbGF3IiwKICAgICAgInBpbGNoIiwKICAgICAgInBpbGVhIiwKICAgICAgInBpbGVkIiwKICAgICAgInBpbGVpIiwKICAgICAgInBpbGVyIiwKICAgICAgInBpbGVzIiwKICAgICAgInBpbGlzIiwKICAgICAgInBpbGxzIiwKICAgICAgInBpbG93IiwKICAgICAgInBpbHVtIiwKICAgICAgInBpbHVzIiwKICAgICAgInBpbWFzIiwKICAgICAgInBpbXBzIiwKICAgICAgInBpbmFzIiwKICAgICAgInBpbmVkIiwKICAgICAgInBpbmVzIiwKICAgICAgInBpbmdvIiwKICAgICAgInBpbmdzIiwKICAgICAgInBpbmtvIiwKICAgICAgInBpbmtzIiwKICAgICAgInBpbm5hIiwKICAgICAgInBpbm55IiwKICAgICAgInBpbm9uIiwKICAgICAgInBpbm90IiwKICAgICAgInBpbnRhIiwKICAgICAgInBpbnRzIiwKICAgICAgInBpbnVwIiwKICAgICAgInBpb25zIiwKICAgICAgInBpb255IiwKICAgICAgInBpb3VzIiwKICAgICAgInBpb3llIiwKICAgICAgInBpb3lzIiwKICAgICAgInBpcGFsIiwKICAgICAgInBpcGFzIiwKICAgICAgInBpcGVkIiwKICAgICAgInBpcGVzIiwKICAgICAgInBpcGV0IiwKICAgICAgInBpcGlzIiwKICAgICAgInBpcGl0IiwKICAgICAgInBpcHB5IiwKICAgICAgInBpcHVsIiwKICAgICAgInBpcmFpIiwKICAgICAgInBpcmxzIiwKICAgICAgInBpcm5zIiwKICAgICAgInBpcm9nIiwKICAgICAgInBpc2NvIiwKICAgICAgInBpc2VzIiwKICAgICAgInBpc2t5IiwKICAgICAgInBpc29zIiwKICAgICAgInBpc3N5IiwKICAgICAgInBpc3RlIiwKICAgICAgInBpdGFzIiwKICAgICAgInBpdGhzIiwKICAgICAgInBpdG9uIiwKICAgICAgInBpdG90IiwKICAgICAgInBpdHRhIiwKICAgICAgInBpdW1zIiwKICAgICAgInBpeGVzIiwKICAgICAgInBpemVkIiwKICAgICAgInBpemVzIiwKICAgICAgInBsYWFzIiwKICAgICAgInBsYWNrIiwKICAgICAgInBsYWdlIiwKICAgICAgInBsYW5zIiwKICAgICAgInBsYXBzIiwKICAgICAgInBsYXNoIiwKICAgICAgInBsYXNtIiwKICAgICAgInBsYXN0IiwKICAgICAgInBsYXRzIiwKICAgICAgInBsYXR0IiwKICAgICAgInBsYXR5IiwKICAgICAgInBsYXlhIiwKICAgICAgInBsYXlzIiwKICAgICAgInBsZWFzIiwKICAgICAgInBsZWJlIiwKICAgICAgInBsZWJzIiwKICAgICAgInBsZW5hIiwKICAgICAgInBsZW9uIiwKICAgICAgInBsZXNoIiwKICAgICAgInBsZXdzIiwKICAgICAgInBsaWNhIiwKICAgICAgInBsaWVzIiwKICAgICAgInBsaW1zIiwKICAgICAgInBsaW5nIiwKICAgICAgInBsaW5rIiwKICAgICAgInBsb2F0IiwKICAgICAgInBsb2RzIiwKICAgICAgInBsb25nIiwKICAgICAgInBsb25rIiwKICAgICAgInBsb29rIiwKICAgICAgInBsb3BzIiwKICAgICAgInBsb3RzIiwKICAgICAgInBsb3R6IiwKICAgICAgInBsb3VrIiwKICAgICAgInBsb3dzIiwKICAgICAgInBsb3llIiwKICAgICAgInBsb3lzIiwKICAgICAgInBsdWVzIiwKICAgICAgInBsdWZmIiwKICAgICAgInBsdWdzIiwKICAgICAgInBsdW1zIiwKICAgICAgInBsdW15IiwKICAgICAgInBsdW90IiwKICAgICAgInBsdXRvIiwKICAgICAgInBseWVyIiwKICAgICAgInBvYWNoIiwKICAgICAgInBvYWthIiwKICAgICAgInBvYWtlIiwKICAgICAgInBvYm95IiwKICAgICAgInBvY2tzIiwKICAgICAgInBvY2t5IiwKICAgICAgInBvZGFsIiwKICAgICAgInBvZGR5IiwKICAgICAgInBvZGV4IiwKICAgICAgInBvZGdlIiwKICAgICAgInBvZGd5IiwKICAgICAgInBvZGlhIiwKICAgICAgInBvZW1zIiwKICAgICAgInBvZXBzIiwKICAgICAgInBvZXRzIiwKICAgICAgInBvZ2V5IiwKICAgICAgInBvZ2dlIiwKICAgICAgInBvZ29zIiwKICAgICAgInBvaGVkIiwKICAgICAgInBvaWx1IiwKICAgICAgInBvaW5kIiwKICAgICAgInBva2FsIiwKICAgICAgInBva2VkIiwKICAgICAgInBva2VzIiwKICAgICAgInBva2V5IiwKICAgICAgInBva2llIiwKICAgICAgInBvbGVkIiwKICAgICAgInBvbGVyIiwKICAgICAgInBvbGVzIiwKICAgICAgInBvbGV5IiwKICAgICAgInBvbGlvIiwKICAgICAgInBvbGlzIiwKICAgICAgInBvbGplIiwKICAgICAgInBvbGtzIiwKICAgICAgInBvbGxzIiwKICAgICAgInBvbGx5IiwKICAgICAgInBvbG9zIiwKICAgICAgInBvbHRzIiwKICAgICAgInBvbHlzIiwKICAgICAgInBvbWJlIiwKICAgICAgInBvbWVzIiwKICAgICAgInBvbW15IiwKICAgICAgInBvbW9zIiwKICAgICAgInBvbXBzIiwKICAgICAgInBvbmNlIiwKICAgICAgInBvbmN5IiwKICAgICAgInBvbmRzIiwKICAgICAgInBvbmVzIiwKICAgICAgInBvbmV5IiwKICAgICAgInBvbmdhIiwKICAgICAgInBvbmdvIiwKICAgICAgInBvbmdzIiwKICAgICAgInBvbmd5IiwKICAgICAgInBvbmtzIiwKICAgICAgInBvbnRzIiwKICAgICAgInBvbnR5IiwKICAgICAgInBvbnp1IiwKICAgICAgInBvb2RzIiwKICAgICAgInBvb2VkIiwKICAgICAgInBvb2ZzIiwKICAgICAgInBvb2Z5IiwKICAgICAgInBvb2hzIiwKICAgICAgInBvb2phIiwKICAgICAgInBvb2thIiwKICAgICAgInBvb2tzIiwKICAgICAgInBvb2xzIiwKICAgICAgInBvb25zIiwKICAgICAgInBvb3BzIiwKICAgICAgInBvb3B5IiwKICAgICAgInBvb3JpIiwKICAgICAgInBvb3J0IiwKICAgICAgInBvb3RzIiwKICAgICAgInBvb3ZlIiwKICAgICAgInBvb3Z5IiwKICAgICAgInBvcGVzIiwKICAgICAgInBvcHBhIiwKICAgICAgInBvcHN5IiwKICAgICAgInBvcmFlIiwKICAgICAgInBvcmFsIiwKICAgICAgInBvcmVkIiwKICAgICAgInBvcmVyIiwKICAgICAgInBvcmVzIiwKICAgICAgInBvcmdlIiwKICAgICAgInBvcmd5IiwKICAgICAgInBvcmluIiwKICAgICAgInBvcmtzIiwKICAgICAgInBvcmt5IiwKICAgICAgInBvcm5vIiwKICAgICAgInBvcm5zIiwKICAgICAgInBvcm55IiwKICAgICAgInBvcnRhIiwKICAgICAgInBvcnRzIiwKICAgICAgInBvcnR5IiwKICAgICAgInBvc2VkIiwKICAgICAgInBvc2VzIiwKICAgICAgInBvc2V5IiwKICAgICAgInBvc2hvIiwKICAgICAgInBvc3RzIiwKICAgICAgInBvdGFlIiwKICAgICAgInBvdGNoIiwKICAgICAgInBvdGVkIiwKICAgICAgInBvdGVzIiwKICAgICAgInBvdGluIiwKICAgICAgInBvdG9vIiwKICAgICAgInBvdHN5IiwKICAgICAgInBvdHRvIiwKICAgICAgInBvdHRzIiwKICAgICAgInBvdHR5IiwKICAgICAgInBvdWZmIiwKICAgICAgInBvdWZzIiwKICAgICAgInBvdWtlIiwKICAgICAgInBvdWtzIiwKICAgICAgInBvdWxlIiwKICAgICAgInBvdWxwIiwKICAgICAgInBvdWx0IiwKICAgICAgInBvdXBlIiwKICAgICAgInBvdXB0IiwKICAgICAgInBvdXJzIiwKICAgICAgInBvdXRzIiwKICAgICAgInBvd2FuIiwKICAgICAgInBvd2luIiwKICAgICAgInBvd25kIiwKICAgICAgInBvd25zIiwKICAgICAgInBvd255IiwKICAgICAgInBvd3JlIiwKICAgICAgInBveGVkIiwKICAgICAgInBveGVzIiwKICAgICAgInBveW50IiwKICAgICAgInBveW91IiwKICAgICAgInBveXNlIiwKICAgICAgInBvenp5IiwKICAgICAgInByYWFtIiwKICAgICAgInByYWRzIiwKICAgICAgInByYWh1IiwKICAgICAgInByYW1zIiwKICAgICAgInByYW5hIiwKICAgICAgInByYW5nIiwKICAgICAgInByYW9zIiwKICAgICAgInByYXNlIiwKICAgICAgInByYXRlIiwKICAgICAgInByYXRzIiwKICAgICAgInByYXR0IiwKICAgICAgInByYXR5IiwKICAgICAgInByYXVzIiwKICAgICAgInByYXlzIiwKICAgICAgInByZWR5IiwKICAgICAgInByZWVkIiwKICAgICAgInByZWVzIiwKICAgICAgInByZWlmIiwKICAgICAgInByZW1zIiwKICAgICAgInByZW15IiwKICAgICAgInByZW50IiwKICAgICAgInByZW9uIiwKICAgICAgInByZW9wIiwKICAgICAgInByZXBzIiwKICAgICAgInByZXNhIiwKICAgICAgInByZXNlIiwKICAgICAgInByZXN0IiwKICAgICAgInByZXZlIiwKICAgICAgInByZXh5IiwKICAgICAgInByZXlzIiwKICAgICAgInByaWFsIiwKICAgICAgInByaWN5IiwKICAgICAgInByaWVmIiwKICAgICAgInByaWVyIiwKICAgICAgInByaWVzIiwKICAgICAgInByaWdzIiwKICAgICAgInByaWxsIiwKICAgICAgInByaW1hIiwKICAgICAgInByaW1pIiwKICAgICAgInByaW1wIiwKICAgICAgInByaW1zIiwKICAgICAgInByaW15IiwKICAgICAgInByaW5rIiwKICAgICAgInByaW9uIiwKICAgICAgInByaXNlIiwKICAgICAgInByaXNzIiwKICAgICAgInByb2FzIiwKICAgICAgInByb2JzIiwKICAgICAgInByb2RzIiwKICAgICAgInByb2VtIiwKICAgICAgInByb2ZzIiwKICAgICAgInByb2dzIiwKICAgICAgInByb2luIiwKICAgICAgInByb2tlIiwKICAgICAgInByb2xlIiwKICAgICAgInByb2xsIiwKICAgICAgInByb21vIiwKICAgICAgInByb21zIiwKICAgICAgInByb25rIiwKICAgICAgInByb3BzIiwKICAgICAgInByb3JlIiwKICAgICAgInByb3NvIiwKICAgICAgInByb3NzIiwKICAgICAgInByb3N0IiwKICAgICAgInByb3N5IiwKICAgICAgInByb3RvIiwKICAgICAgInByb3VsIiwKICAgICAgInByb3dzIiwKICAgICAgInByb3luIiwKICAgICAgInBydW50IiwKICAgICAgInBydXRhIiwKICAgICAgInByeWVyIiwKICAgICAgInByeXNlIiwKICAgICAgInBzZXVkIiwKICAgICAgInBzaGF3IiwKICAgICAgInBzaW9uIiwKICAgICAgInBzb2FlIiwKICAgICAgInBzb2FpIiwKICAgICAgInBzb2FzIiwKICAgICAgInBzb3JhIiwKICAgICAgInBzeWNoIiwKICAgICAgInBzeW9wIiwKICAgICAgInB1YmNvIiwKICAgICAgInB1YmVzIiwKICAgICAgInB1YmlzIiwKICAgICAgInB1Y2FuIiwKICAgICAgInB1Y2VyIiwKICAgICAgInB1Y2VzIiwKICAgICAgInB1Y2thIiwKICAgICAgInB1Y2tzIiwKICAgICAgInB1ZGR5IiwKICAgICAgInB1ZGdlIiwKICAgICAgInB1ZGljIiwKICAgICAgInB1ZG9yIiwKICAgICAgInB1ZHN5IiwKICAgICAgInB1ZHVzIiwKICAgICAgInB1ZXJzIiwKICAgICAgInB1ZmZhIiwKICAgICAgInB1ZmZzIiwKICAgICAgInB1Z2d5IiwKICAgICAgInB1Z2lsIiwKICAgICAgInB1aGFzIiwKICAgICAgInB1amFoIiwKICAgICAgInB1amFzIiwKICAgICAgInB1a2FzIiwKICAgICAgInB1a2VkIiwKICAgICAgInB1a2VyIiwKICAgICAgInB1a2VzIiwKICAgICAgInB1a2V5IiwKICAgICAgInB1a2thIiwKICAgICAgInB1a3VzIiwKICAgICAgInB1bGFvIiwKICAgICAgInB1bGFzIiwKICAgICAgInB1bGVkIiwKICAgICAgInB1bGVyIiwKICAgICAgInB1bGVzIiwKICAgICAgInB1bGlrIiwKICAgICAgInB1bGlzIiwKICAgICAgInB1bGthIiwKICAgICAgInB1bGtzIiwKICAgICAgInB1bGxpIiwKICAgICAgInB1bGxzIiwKICAgICAgInB1bGx5IiwKICAgICAgInB1bG1vIiwKICAgICAgInB1bHBzIiwKICAgICAgInB1bHVzIiwKICAgICAgInB1bWFzIiwKICAgICAgInB1bWllIiwKICAgICAgInB1bXBzIiwKICAgICAgInB1bmFzIiwKICAgICAgInB1bmNlIiwKICAgICAgInB1bmdhIiwKICAgICAgInB1bmdzIiwKICAgICAgInB1bmppIiwKICAgICAgInB1bmthIiwKICAgICAgInB1bmtzIiwKICAgICAgInB1bmt5IiwKICAgICAgInB1bm55IiwKICAgICAgInB1bnRvIiwKICAgICAgInB1bnRzIiwKICAgICAgInB1bnR5IiwKICAgICAgInB1cGFlIiwKICAgICAgInB1cGFsIiwKICAgICAgInB1cGFzIiwKICAgICAgInB1cHVzIiwKICAgICAgInB1cmRhIiwKICAgICAgInB1cmVkIiwKICAgICAgInB1cmVzIiwKICAgICAgInB1cmluIiwKICAgICAgInB1cmlzIiwKICAgICAgInB1cmxzIiwKICAgICAgInB1cnB5IiwKICAgICAgInB1cnJzIiwKICAgICAgInB1cnN5IiwKICAgICAgInB1cnR5IiwKICAgICAgInB1c2VzIiwKICAgICAgInB1c2xlIiwKICAgICAgInB1c3N5IiwKICAgICAgInB1dGlkIiwKICAgICAgInB1dG9uIiwKICAgICAgInB1dHRpIiwKICAgICAgInB1dHRvIiwKICAgICAgInB1dHRzIiwKICAgICAgInB1emVsIiwKICAgICAgInB3bmVkIiwKICAgICAgInB5YXRzIiwKICAgICAgInB5ZXRzIiwKICAgICAgInB5Z2FsIiwKICAgICAgInB5aW5zIiwKICAgICAgInB5bG9uIiwKICAgICAgInB5bmVkIiwKICAgICAgInB5bmVzIiwKICAgICAgInB5b2lkIiwKICAgICAgInB5b3RzIiwKICAgICAgInB5cmFsIiwKICAgICAgInB5cmFuIiwKICAgICAgInB5cmVzIiwKICAgICAgInB5cmV4IiwKICAgICAgInB5cmljIiwKICAgICAgInB5cm9zIiwKICAgICAgInB5eGVkIiwKICAgICAgInB5eGVzIiwKICAgICAgInB5eGllIiwKICAgICAgInB5eGlzIiwKICAgICAgInB6YXp6IiwKICAgICAgInFhZGlzIiwKICAgICAgInFhaWRzIiwKICAgICAgInFhamFxIiwKICAgICAgInFhbmF0IiwKICAgICAgInFhcGlrIiwKICAgICAgInFpYmxhIiwKICAgICAgInFvcGhzIiwKICAgICAgInFvcm1hIiwKICAgICAgInF1YWRzIiwKICAgICAgInF1YWZmIiwKICAgICAgInF1YWdzIiwKICAgICAgInF1YWlyIiwKICAgICAgInF1YWlzIiwKICAgICAgInF1YWt5IiwKICAgICAgInF1YWxlIiwKICAgICAgInF1YW50IiwKICAgICAgInF1YXJlIiwKICAgICAgInF1YXNzIiwKICAgICAgInF1YXRlIiwKICAgICAgInF1YXRzIiwKICAgICAgInF1YXlkIiwKICAgICAgInF1YXlzIiwKICAgICAgInF1Yml0IiwKICAgICAgInF1ZWFuIiwKICAgICAgInF1ZW1lIiwKICAgICAgInF1ZW5hIiwKICAgICAgInF1ZXJuIiwKICAgICAgInF1ZXluIiwKICAgICAgInF1ZXlzIiwKICAgICAgInF1aWNoIiwKICAgICAgInF1aWRzIiwKICAgICAgInF1aWZmIiwKICAgICAgInF1aW1zIiwKICAgICAgInF1aW5hIiwKICAgICAgInF1aW5lIiwKICAgICAgInF1aW5vIiwKICAgICAgInF1aW5zIiwKICAgICAgInF1aW50IiwKICAgICAgInF1aXBvIiwKICAgICAgInF1aXBzIiwKICAgICAgInF1aXB1IiwKICAgICAgInF1aXJlIiwKICAgICAgInF1aXJ0IiwKICAgICAgInF1aXN0IiwKICAgICAgInF1aXRzIiwKICAgICAgInF1b2FkIiwKICAgICAgInF1b2RzIiwKICAgICAgInF1b2lmIiwKICAgICAgInF1b2luIiwKICAgICAgInF1b2l0IiwKICAgICAgInF1b2xsIiwKICAgICAgInF1b25rIiwKICAgICAgInF1b3BzIiwKICAgICAgInF1cmFuIiwKICAgICAgInF1cnNoIiwKICAgICAgInF1eXRlIiwKICAgICAgInJhYmF0IiwKICAgICAgInJhYmljIiwKICAgICAgInJhYmlzIiwKICAgICAgInJhY2VkIiwKICAgICAgInJhY2VzIiwKICAgICAgInJhY2hlIiwKICAgICAgInJhY2tzIiwKICAgICAgInJhY29uIiwKICAgICAgInJhZGdlIiwKICAgICAgInJhZGl4IiwKICAgICAgInJhZG9uIiwKICAgICAgInJhZmZzIiwKICAgICAgInJhZnRzIiwKICAgICAgInJhZ2FzIiwKICAgICAgInJhZ2RlIiwKICAgICAgInJhZ2VkIiwKICAgICAgInJhZ2VlIiwKICAgICAgInJhZ2VyIiwKICAgICAgInJhZ2VzIiwKICAgICAgInJhZ2dhIiwKICAgICAgInJhZ2dzIiwKICAgICAgInJhZ2d5IiwKICAgICAgInJhZ2lzIiwKICAgICAgInJhZ3VzIiwKICAgICAgInJhaGVkIiwKICAgICAgInJhaHVpIiwKICAgICAgInJhaWFzIiwKICAgICAgInJhaWRzIiwKICAgICAgInJhaWtzIiwKICAgICAgInJhaWxlIiwKICAgICAgInJhaWxzIiwKICAgICAgInJhaW5lIiwKICAgICAgInJhaW5zIiwKICAgICAgInJhaXJkIiwKICAgICAgInJhaXRhIiwKICAgICAgInJhaXRzIiwKICAgICAgInJhamFzIiwKICAgICAgInJhamVzIiwKICAgICAgInJha2VkIiwKICAgICAgInJha2VlIiwKICAgICAgInJha2VyIiwKICAgICAgInJha2VzIiwKICAgICAgInJha2lhIiwKICAgICAgInJha2lzIiwKICAgICAgInJha3VzIiwKICAgICAgInJhbGVzIiwKICAgICAgInJhbWFsIiwKICAgICAgInJhbWVlIiwKICAgICAgInJhbWV0IiwKICAgICAgInJhbWllIiwKICAgICAgInJhbWluIiwKICAgICAgInJhbWlzIiwKICAgICAgInJhbW15IiwKICAgICAgInJhbXBzIiwKICAgICAgInJhbXVzIiwKICAgICAgInJhbmFzIiwKICAgICAgInJhbmNlIiwKICAgICAgInJhbmRzIiwKICAgICAgInJhbmVlIiwKICAgICAgInJhbmdhIiwKICAgICAgInJhbmdpIiwKICAgICAgInJhbmdzIiwKICAgICAgInJhbmd5IiwKICAgICAgInJhbmlkIiwKICAgICAgInJhbmlzIiwKICAgICAgInJhbmtlIiwKICAgICAgInJhbmtzIiwKICAgICAgInJhbnRzIiwKICAgICAgInJhcGVkIiwKICAgICAgInJhcGVyIiwKICAgICAgInJhcGVzIiwKICAgICAgInJhcGhlIiwKICAgICAgInJhcHBlIiwKICAgICAgInJhcmVkIiwKICAgICAgInJhcmVlIiwKICAgICAgInJhcmVzIiwKICAgICAgInJhcmtzIiwKICAgICAgInJhc2VkIiwKICAgICAgInJhc2VyIiwKICAgICAgInJhc2VzIiwKICAgICAgInJhc3BzIiwKICAgICAgInJhc3NlIiwKICAgICAgInJhc3RhIiwKICAgICAgInJhdGFsIiwKICAgICAgInJhdGFuIiwKICAgICAgInJhdGFzIiwKICAgICAgInJhdGNoIiwKICAgICAgInJhdGVkIiwKICAgICAgInJhdGVsIiwKICAgICAgInJhdGVyIiwKICAgICAgInJhdGVzIiwKICAgICAgInJhdGhhIiwKICAgICAgInJhdGhlIiwKICAgICAgInJhdGhzIiwKICAgICAgInJhdG9vIiwKICAgICAgInJhdG9zIiwKICAgICAgInJhdHVzIiwKICAgICAgInJhdW5zIiwKICAgICAgInJhdXBvIiwKICAgICAgInJhdmVkIiwKICAgICAgInJhdmVsIiwKICAgICAgInJhdmVyIiwKICAgICAgInJhdmVzIiwKICAgICAgInJhdmV5IiwKICAgICAgInJhdmluIiwKICAgICAgInJhd2VyIiwKICAgICAgInJhd2luIiwKICAgICAgInJhd2x5IiwKICAgICAgInJhd25zIiwKICAgICAgInJheGVkIiwKICAgICAgInJheGVzIiwKICAgICAgInJheWFoIiwKICAgICAgInJheWFzIiwKICAgICAgInJheWVkIiwKICAgICAgInJheWxlIiwKICAgICAgInJheW5lIiwKICAgICAgInJhemVkIiwKICAgICAgInJhemVlIiwKICAgICAgInJhemVyIiwKICAgICAgInJhemVzIiwKICAgICAgInJhem9vIiwKICAgICAgInJlYWRkIiwKICAgICAgInJlYWRzIiwKICAgICAgInJlYWlzIiwKICAgICAgInJlYWtzIiwKICAgICAgInJlYWxvIiwKICAgICAgInJlYWxzIiwKICAgICAgInJlYW1lIiwKICAgICAgInJlYW1zIiwKICAgICAgInJlYW15IiwKICAgICAgInJlYW5zIiwKICAgICAgInJlYXBzIiwKICAgICAgInJlYXJzIiwKICAgICAgInJlYXN0IiwKICAgICAgInJlYXRhIiwKICAgICAgInJlYXRlIiwKICAgICAgInJlYXZlIiwKICAgICAgInJlYmJlIiwKICAgICAgInJlYmVjIiwKICAgICAgInJlYmlkIiwKICAgICAgInJlYml0IiwKICAgICAgInJlYm9wIiwKICAgICAgInJlYnV5IiwKICAgICAgInJlY2FsIiwKICAgICAgInJlY2NlIiwKICAgICAgInJlY2NvIiwKICAgICAgInJlY2N5IiwKICAgICAgInJlY2l0IiwKICAgICAgInJlY2tzIiwKICAgICAgInJlY29uIiwKICAgICAgInJlY3RhIiwKICAgICAgInJlY3RpIiwKICAgICAgInJlY3RvIiwKICAgICAgInJlZGFuIiwKICAgICAgInJlZGRzIiwKICAgICAgInJlZGR5IiwKICAgICAgInJlZGVkIiwKICAgICAgInJlZGVzIiwKICAgICAgInJlZGlhIiwKICAgICAgInJlZGlkIiwKICAgICAgInJlZGlwIiwKICAgICAgInJlZGx5IiwKICAgICAgInJlZG9uIiwKICAgICAgInJlZG9zIiwKICAgICAgInJlZG94IiwKICAgICAgInJlZHJ5IiwKICAgICAgInJlZHViIiwKICAgICAgInJlZHV4IiwKICAgICAgInJlZHllIiwKICAgICAgInJlZWNoIiwKICAgICAgInJlZWRlIiwKICAgICAgInJlZWRzIiwKICAgICAgInJlZWZzIiwKICAgICAgInJlZWZ5IiwKICAgICAgInJlZWtzIiwKICAgICAgInJlZWt5IiwKICAgICAgInJlZWxzIiwKICAgICAgInJlZW5zIiwKICAgICAgInJlZXN0IiwKICAgICAgInJlZXZlIiwKICAgICAgInJlZmVkIiwKICAgICAgInJlZmVsIiwKICAgICAgInJlZmZvIiwKICAgICAgInJlZmlzIiwKICAgICAgInJlZml4IiwKICAgICAgInJlZmx5IiwKICAgICAgInJlZnJ5IiwKICAgICAgInJlZ2FyIiwKICAgICAgInJlZ2VzIiwKICAgICAgInJlZ2dvIiwKICAgICAgInJlZ2llIiwKICAgICAgInJlZ21hIiwKICAgICAgInJlZ25hIiwKICAgICAgInJlZ29zIiwKICAgICAgInJlZ3VyIiwKICAgICAgInJlaGVtIiwKICAgICAgInJlaWZzIiwKICAgICAgInJlaWZ5IiwKICAgICAgInJlaWtpIiwKICAgICAgInJlaWtzIiwKICAgICAgInJlaW5rIiwKICAgICAgInJlaW5zIiwKICAgICAgInJlaXJkIiwKICAgICAgInJlaXN0IiwKICAgICAgInJlaXZlIiwKICAgICAgInJlamlnIiwKICAgICAgInJlam9uIiwKICAgICAgInJla2VkIiwKICAgICAgInJla2VzIiwKICAgICAgInJla2V5IiwKICAgICAgInJlbGV0IiwKICAgICAgInJlbGllIiwKICAgICAgInJlbGl0IiwKICAgICAgInJlbGxvIiwKICAgICAgInJlbWFuIiwKICAgICAgInJlbWFwIiwKICAgICAgInJlbWVuIiwKICAgICAgInJlbWV0IiwKICAgICAgInJlbWV4IiwKICAgICAgInJlbWl4IiwKICAgICAgInJlbmF5IiwKICAgICAgInJlbmRzIiwKICAgICAgInJlbmV5IiwKICAgICAgInJlbmdhIiwKICAgICAgInJlbmlnIiwKICAgICAgInJlbmluIiwKICAgICAgInJlbm5lIiwKICAgICAgInJlbm9zIiwKICAgICAgInJlbnRlIiwKICAgICAgInJlbnRzIiwKICAgICAgInJlb2lsIiwKICAgICAgInJlb3JnIiwKICAgICAgInJlcGVnIiwKICAgICAgInJlcGluIiwKICAgICAgInJlcGxhIiwKICAgICAgInJlcG9zIiwKICAgICAgInJlcG90IiwKICAgICAgInJlcHBzIiwKICAgICAgInJlcHJvIiwKICAgICAgInJlcmFuIiwKICAgICAgInJlcmlnIiwKICAgICAgInJlc2F0IiwKICAgICAgInJlc2F3IiwKICAgICAgInJlc2F5IiwKICAgICAgInJlc2VlIiwKICAgICAgInJlc2VzIiwKICAgICAgInJlc2V3IiwKICAgICAgInJlc2lkIiwKICAgICAgInJlc2l0IiwKICAgICAgInJlc29kIiwKICAgICAgInJlc293IiwKICAgICAgInJlc3RvIiwKICAgICAgInJlc3RzIiwKICAgICAgInJlc3R5IiwKICAgICAgInJlc3VzIiwKICAgICAgInJldGFnIiwKICAgICAgInJldGF4IiwKICAgICAgInJldGVtIiwKICAgICAgInJldGlhIiwKICAgICAgInJldGllIiwKICAgICAgInJldG94IiwKICAgICAgInJldmV0IiwKICAgICAgInJldmllIiwKICAgICAgInJld2FuIiwKICAgICAgInJld2F4IiwKICAgICAgInJld2VkIiwKICAgICAgInJld2V0IiwKICAgICAgInJld2luIiwKICAgICAgInJld29uIiwKICAgICAgInJld3RoIiwKICAgICAgInJleGVzIiwKICAgICAgInJlemVzIiwKICAgICAgInJoZWFzIiwKICAgICAgInJoZW1lIiwKICAgICAgInJoZXVtIiwKICAgICAgInJoaWVzIiwKICAgICAgInJoaW1lIiwKICAgICAgInJoaW5lIiwKICAgICAgInJob2R5IiwKICAgICAgInJob21iIiwKICAgICAgInJob25lIiwKICAgICAgInJodW1iIiwKICAgICAgInJoeW5lIiwKICAgICAgInJoeXRhIiwKICAgICAgInJpYWRzIiwKICAgICAgInJpYWxzIiwKICAgICAgInJpYW50IiwKICAgICAgInJpYXRhIiwKICAgICAgInJpYmFzIiwKICAgICAgInJpYmJ5IiwKICAgICAgInJpYmVzIiwKICAgICAgInJpY2VkIiwKICAgICAgInJpY2VyIiwKICAgICAgInJpY2VzIiwKICAgICAgInJpY2V5IiwKICAgICAgInJpY2h0IiwKICAgICAgInJpY2luIiwKICAgICAgInJpY2tzIiwKICAgICAgInJpZGVzIiwKICAgICAgInJpZGd5IiwKICAgICAgInJpZGljIiwKICAgICAgInJpZWxzIiwKICAgICAgInJpZW1zIiwKICAgICAgInJpZXZlIiwKICAgICAgInJpZmVyIiwKICAgICAgInJpZmZzIiwKICAgICAgInJpZnRlIiwKICAgICAgInJpZnRzIiwKICAgICAgInJpZnR5IiwKICAgICAgInJpZ2dzIiwKICAgICAgInJpZ29sIiwKICAgICAgInJpbGVkIiwKICAgICAgInJpbGVzIiwKICAgICAgInJpbGV5IiwKICAgICAgInJpbGxlIiwKICAgICAgInJpbGxzIiwKICAgICAgInJpbWFlIiwKICAgICAgInJpbWVkIiwKICAgICAgInJpbWVyIiwKICAgICAgInJpbWVzIiwKICAgICAgInJpbXVzIiwKICAgICAgInJpbmRzIiwKICAgICAgInJpbmR5IiwKICAgICAgInJpbmVzIiwKICAgICAgInJpbmdzIiwKICAgICAgInJpbmtzIiwKICAgICAgInJpb2phIiwKICAgICAgInJpb3RzIiwKICAgICAgInJpcGVkIiwKICAgICAgInJpcGVzIiwKICAgICAgInJpcHBzIiwKICAgICAgInJpc2VzIiwKICAgICAgInJpc2hpIiwKICAgICAgInJpc2tzIiwKICAgICAgInJpc3BzIiwKICAgICAgInJpc3VzIiwKICAgICAgInJpdGVzIiwKICAgICAgInJpdHRzIiwKICAgICAgInJpdHp5IiwKICAgICAgInJpdmFzIiwKICAgICAgInJpdmVkIiwKICAgICAgInJpdmVsIiwKICAgICAgInJpdmVuIiwKICAgICAgInJpdmVzIiwKICAgICAgInJpeWFsIiwKICAgICAgInJpemFzIiwKICAgICAgInJvYWRzIiwKICAgICAgInJvYW1zIiwKICAgICAgInJvYW5zIiwKICAgICAgInJvYXJzIiwKICAgICAgInJvYXJ5IiwKICAgICAgInJvYXRlIiwKICAgICAgInJvYmVkIiwKICAgICAgInJvYmVzIiwKICAgICAgInJvYmxlIiwKICAgICAgInJvY2tzIiwKICAgICAgInJvZGVkIiwKICAgICAgInJvZGVzIiwKICAgICAgInJvZ3V5IiwKICAgICAgInJvaGVzIiwKICAgICAgInJvaWRzIiwKICAgICAgInJvaWxzIiwKICAgICAgInJvaWx5IiwKICAgICAgInJvaW5zIiwKICAgICAgInJvaXN0IiwKICAgICAgInJvamFrIiwKICAgICAgInJvamlzIiwKICAgICAgInJva2VkIiwKICAgICAgInJva2VyIiwKICAgICAgInJva2VzIiwKICAgICAgInJvbGFnIiwKICAgICAgInJvbGVzIiwKICAgICAgInJvbGZzIiwKICAgICAgInJvbGxzIiwKICAgICAgInJvbWFsIiwKICAgICAgInJvbWFuIiwKICAgICAgInJvbWVvIiwKICAgICAgInJvbXBzIiwKICAgICAgInJvbmRlIiwKICAgICAgInJvbmRvIiwKICAgICAgInJvbmVvIiwKICAgICAgInJvbmVzIiwKICAgICAgInJvbmluIiwKICAgICAgInJvbm5lIiwKICAgICAgInJvbnRlIiwKICAgICAgInJvbnRzIiwKICAgICAgInJvb2RzIiwKICAgICAgInJvb2ZzIiwKICAgICAgInJvb2Z5IiwKICAgICAgInJvb2tzIiwKICAgICAgInJvb2t5IiwKICAgICAgInJvb21zIiwKICAgICAgInJvb25zIiwKICAgICAgInJvb3BzIiwKICAgICAgInJvb3B5IiwKICAgICAgInJvb3NhIiwKICAgICAgInJvb3NlIiwKICAgICAgInJvb3RzIiwKICAgICAgInJvb3R5IiwKICAgICAgInJvcGVkIiwKICAgICAgInJvcGVyIiwKICAgICAgInJvcGVzIiwKICAgICAgInJvcGV5IiwKICAgICAgInJvcXVlIiwKICAgICAgInJvcmFsIiwKICAgICAgInJvcmVzIiwKICAgICAgInJvcmljIiwKICAgICAgInJvcmlkIiwKICAgICAgInJvcmllIiwKICAgICAgInJvcnRzIiwKICAgICAgInJvcnR5IiwKICAgICAgInJvc2VkIiwKICAgICAgInJvc2VzIiwKICAgICAgInJvc2V0IiwKICAgICAgInJvc2hpIiwKICAgICAgInJvc2luIiwKICAgICAgInJvc2l0IiwKICAgICAgInJvc3RpIiwKICAgICAgInJvc3RzIiwKICAgICAgInJvdGFsIiwKICAgICAgInJvdGFuIiwKICAgICAgInJvdGFzIiwKICAgICAgInJvdGNoIiwKICAgICAgInJvdGVkIiwKICAgICAgInJvdGVzIiwKICAgICAgInJvdGlzIiwKICAgICAgInJvdGxzIiwKICAgICAgInJvdG9uIiwKICAgICAgInJvdG9zIiwKICAgICAgInJvdHRlIiwKICAgICAgInJvdWVuIiwKICAgICAgInJvdWVzIiwKICAgICAgInJvdWxlIiwKICAgICAgInJvdWxzIiwKICAgICAgInJvdW1zIiwKICAgICAgInJvdXBzIiwKICAgICAgInJvdXB5IiwKICAgICAgInJvdXN0IiwKICAgICAgInJvdXRoIiwKICAgICAgInJvdXRzIiwKICAgICAgInJvdmVkIiwKICAgICAgInJvdmVuIiwKICAgICAgInJvdmVzIiwKICAgICAgInJvd2FuIiwKICAgICAgInJvd2VkIiwKICAgICAgInJvd2VsIiwKICAgICAgInJvd2VuIiwKICAgICAgInJvd2llIiwKICAgICAgInJvd21lIiwKICAgICAgInJvd25kIiwKICAgICAgInJvd3RoIiwKICAgICAgInJvd3RzIiwKICAgICAgInJveW5lIiwKICAgICAgInJveXN0IiwKICAgICAgInJvemV0IiwKICAgICAgInJveml0IiwKICAgICAgInJ1YW5hIiwKICAgICAgInJ1YmFpIiwKICAgICAgInJ1YmJ5IiwKICAgICAgInJ1YmVsIiwKICAgICAgInJ1YmVzIiwKICAgICAgInJ1YmluIiwKICAgICAgInJ1YmxlIiwKICAgICAgInJ1YmxpIiwKICAgICAgInJ1YnVzIiwKICAgICAgInJ1Y2hlIiwKICAgICAgInJ1Y2tzIiwKICAgICAgInJ1ZGFzIiwKICAgICAgInJ1ZGRzIiwKICAgICAgInJ1ZGVzIiwKICAgICAgInJ1ZGllIiwKICAgICAgInJ1ZGlzIiwKICAgICAgInJ1ZWRhIiwKICAgICAgInJ1ZXJzIiwKICAgICAgInJ1ZmZlIiwKICAgICAgInJ1ZmZzIiwKICAgICAgInJ1Z2FlIiwKICAgICAgInJ1Z2FsIiwKICAgICAgInJ1Z2d5IiwKICAgICAgInJ1aW5nIiwKICAgICAgInJ1aW5zIiwKICAgICAgInJ1a2hzIiwKICAgICAgInJ1bGVkIiwKICAgICAgInJ1bGVzIiwKICAgICAgInJ1bWFsIiwKICAgICAgInJ1bWJvIiwKICAgICAgInJ1bWVuIiwKICAgICAgInJ1bWVzIiwKICAgICAgInJ1bWx5IiwKICAgICAgInJ1bW15IiwKICAgICAgInJ1bXBvIiwKICAgICAgInJ1bXBzIiwKICAgICAgInJ1bXB5IiwKICAgICAgInJ1bmNoIiwKICAgICAgInJ1bmRzIiwKICAgICAgInJ1bmVkIiwKICAgICAgInJ1bmVzIiwKICAgICAgInJ1bmdzIiwKICAgICAgInJ1bmljIiwKICAgICAgInJ1bm55IiwKICAgICAgInJ1bnRzIiwKICAgICAgInJ1bnR5IiwKICAgICAgInJ1cGlhIiwKICAgICAgInJ1cnBzIiwKICAgICAgInJ1cnVzIiwKICAgICAgInJ1c2FzIiwKICAgICAgInJ1c2VzIiwKICAgICAgInJ1c2h5IiwKICAgICAgInJ1c2tzIiwKICAgICAgInJ1c21hIiwKICAgICAgInJ1c3NlIiwKICAgICAgInJ1c3RzIiwKICAgICAgInJ1dGhzIiwKICAgICAgInJ1dGluIiwKICAgICAgInJ1dHR5IiwKICAgICAgInJ5YWxzIiwKICAgICAgInJ5YmF0IiwKICAgICAgInJ5a2VkIiwKICAgICAgInJ5a2VzIiwKICAgICAgInJ5bW1lIiwKICAgICAgInJ5bmRzIiwKICAgICAgInJ5b3RzIiwKICAgICAgInJ5cGVyIiwKICAgICAgInNhYWdzIiwKICAgICAgInNhYmFsIiwKICAgICAgInNhYmVkIiwKICAgICAgInNhYmVyIiwKICAgICAgInNhYmVzIiwKICAgICAgInNhYmhhIiwKICAgICAgInNhYmluIiwKICAgICAgInNhYmlyIiwKICAgICAgInNhYmxlIiwKICAgICAgInNhYm90IiwKICAgICAgInNhYnJhIiwKICAgICAgInNhYnJlIiwKICAgICAgInNhY2tzIiwKICAgICAgInNhY3JhIiwKICAgICAgInNhZGRvIiwKICAgICAgInNhZGVzIiwKICAgICAgInNhZGhlIiwKICAgICAgInNhZGh1IiwKICAgICAgInNhZGlzIiwKICAgICAgInNhZG9zIiwKICAgICAgInNhZHphIiwKICAgICAgInNhZmVkIiwKICAgICAgInNhZmVzIiwKICAgICAgInNhZ2FzIiwKICAgICAgInNhZ2VyIiwKICAgICAgInNhZ2VzIiwKICAgICAgInNhZ2d5IiwKICAgICAgInNhZ29zIiwKICAgICAgInNhZ3VtIiwKICAgICAgInNhaGViIiwKICAgICAgInNhaGliIiwKICAgICAgInNhaWNlIiwKICAgICAgInNhaWNrIiwKICAgICAgInNhaWNzIiwKICAgICAgInNhaWRzIiwKICAgICAgInNhaWdhIiwKICAgICAgInNhaWxzIiwKICAgICAgInNhaW1zIiwKICAgICAgInNhaW5lIiwKICAgICAgInNhaW5zIiwKICAgICAgInNhaXJzIiwKICAgICAgInNhaXN0IiwKICAgICAgInNhaXRoIiwKICAgICAgInNham91IiwKICAgICAgInNha2FpIiwKICAgICAgInNha2VyIiwKICAgICAgInNha2VzIiwKICAgICAgInNha2lhIiwKICAgICAgInNha2lzIiwKICAgICAgInNha3RpIiwKICAgICAgInNhbGFsIiwKICAgICAgInNhbGF0IiwKICAgICAgInNhbGVwIiwKICAgICAgInNhbGVzIiwKICAgICAgInNhbGV0IiwKICAgICAgInNhbGljIiwKICAgICAgInNhbGl4IiwKICAgICAgInNhbGxlIiwKICAgICAgInNhbG1pIiwKICAgICAgInNhbG9sIiwKICAgICAgInNhbG9wIiwKICAgICAgInNhbHBhIiwKICAgICAgInNhbHBzIiwKICAgICAgInNhbHNlIiwKICAgICAgInNhbHRvIiwKICAgICAgInNhbHRzIiwKICAgICAgInNhbHVlIiwKICAgICAgInNhbHV0IiwKICAgICAgInNhbWFuIiwKICAgICAgInNhbWFzIiwKICAgICAgInNhbWJhIiwKICAgICAgInNhbWJvIiwKICAgICAgInNhbWVrIiwKICAgICAgInNhbWVsIiwKICAgICAgInNhbWVuIiwKICAgICAgInNhbWVzIiwKICAgICAgInNhbWV5IiwKICAgICAgInNhbWZ1IiwKICAgICAgInNhbW15IiwKICAgICAgInNhbXBpIiwKICAgICAgInNhbXBzIiwKICAgICAgInNhbmRzIiwKICAgICAgInNhbmVkIiwKICAgICAgInNhbmVzIiwKICAgICAgInNhbmdhIiwKICAgICAgInNhbmdoIiwKICAgICAgInNhbmdvIiwKICAgICAgInNhbmdzIiwKICAgICAgInNhbmtvIiwKICAgICAgInNhbnNhIiwKICAgICAgInNhbnRvIiwKICAgICAgInNhbnRzIiwKICAgICAgInNhb2xhIiwKICAgICAgInNhcGFuIiwKICAgICAgInNhcGlkIiwKICAgICAgInNhcG9yIiwKICAgICAgInNhcmFuIiwKICAgICAgInNhcmRzIiwKICAgICAgInNhcmVkIiwKICAgICAgInNhcmVlIiwKICAgICAgInNhcmdlIiwKICAgICAgInNhcmdvIiwKICAgICAgInNhcmluIiwKICAgICAgInNhcmlzIiwKICAgICAgInNhcmtzIiwKICAgICAgInNhcmt5IiwKICAgICAgInNhcm9kIiwKICAgICAgInNhcm9zIiwKICAgICAgInNhcnVzIiwKICAgICAgInNhc2VyIiwKICAgICAgInNhc2luIiwKICAgICAgInNhc3NlIiwKICAgICAgInNhdGFpIiwKICAgICAgInNhdGF5IiwKICAgICAgInNhdGVkIiwKICAgICAgInNhdGVtIiwKICAgICAgInNhdGVzIiwKICAgICAgInNhdGlzIiwKICAgICAgInNhdWJhIiwKICAgICAgInNhdWNoIiwKICAgICAgInNhdWdoIiwKICAgICAgInNhdWxzIiwKICAgICAgInNhdWx0IiwKICAgICAgInNhdW50IiwKICAgICAgInNhdXJ5IiwKICAgICAgInNhdXRzIiwKICAgICAgInNhdmVkIiwKICAgICAgInNhdmVyIiwKICAgICAgInNhdmVzIiwKICAgICAgInNhdmV5IiwKICAgICAgInNhdmluIiwKICAgICAgInNhd2FoIiwKICAgICAgInNhd2VkIiwKICAgICAgInNhd2VyIiwKICAgICAgInNheGVzIiwKICAgICAgInNheWVkIiwKICAgICAgInNheWVyIiwKICAgICAgInNheWlkIiwKICAgICAgInNheW5lIiwKICAgICAgInNheW9uIiwKICAgICAgInNheXN0IiwKICAgICAgInNhemVzIiwKICAgICAgInNjYWJzIiwKICAgICAgInNjYWRzIiwKICAgICAgInNjYWZmIiwKICAgICAgInNjYWdzIiwKICAgICAgInNjYWlsIiwKICAgICAgInNjYWxhIiwKICAgICAgInNjYWxsIiwKICAgICAgInNjYW1zIiwKICAgICAgInNjYW5kIiwKICAgICAgInNjYW5zIiwKICAgICAgInNjYXBhIiwKICAgICAgInNjYXBlIiwKICAgICAgInNjYXBpIiwKICAgICAgInNjYXJwIiwKICAgICAgInNjYXJzIiwKICAgICAgInNjYXJ0IiwKICAgICAgInNjYXRoIiwKICAgICAgInNjYXRzIiwKICAgICAgInNjYXR0IiwKICAgICAgInNjYXVkIiwKICAgICAgInNjYXVwIiwKICAgICAgInNjYXVyIiwKICAgICAgInNjYXdzIiwKICAgICAgInNjZWF0IiwKICAgICAgInNjZW5hIiwKICAgICAgInNjZW5kIiwKICAgICAgInNjaGF2IiwKICAgICAgInNjaG1vIiwKICAgICAgInNjaHVsIiwKICAgICAgInNjaHdhIiwKICAgICAgInNjbGltIiwKICAgICAgInNjb2R5IiwKICAgICAgInNjb2dzIiwKICAgICAgInNjb29nIiwKICAgICAgInNjb290IiwKICAgICAgInNjb3BhIiwKICAgICAgInNjb3BzIiwKICAgICAgInNjb3RzIiwKICAgICAgInNjb3VnIiwKICAgICAgInNjb3VwIiwKICAgICAgInNjb3dwIiwKICAgICAgInNjb3dzIiwKICAgICAgInNjcmFiIiwKICAgICAgInNjcmFlIiwKICAgICAgInNjcmFnIiwKICAgICAgInNjcmFuIiwKICAgICAgInNjcmF0IiwKICAgICAgInNjcmF3IiwKICAgICAgInNjcmF5IiwKICAgICAgInNjcmltIiwKICAgICAgInNjcmlwIiwKICAgICAgInNjcm9iIiwKICAgICAgInNjcm9kIiwKICAgICAgInNjcm9nIiwKICAgICAgInNjcm93IiwKICAgICAgInNjdWRpIiwKICAgICAgInNjdWRvIiwKICAgICAgInNjdWRzIiwKICAgICAgInNjdWZmIiwKICAgICAgInNjdWZ0IiwKICAgICAgInNjdWdzIiwKICAgICAgInNjdWxrIiwKICAgICAgInNjdWxsIiwKICAgICAgInNjdWxwIiwKICAgICAgInNjdWxzIiwKICAgICAgInNjdW1zIiwKICAgICAgInNjdXBzIiwKICAgICAgInNjdXJmIiwKICAgICAgInNjdXJzIiwKICAgICAgInNjdXNlIiwKICAgICAgInNjdXRhIiwKICAgICAgInNjdXRlIiwKICAgICAgInNjdXRzIiwKICAgICAgInNjdXp6IiwKICAgICAgInNjeWVzIiwKICAgICAgInNkYXluIiwKICAgICAgInNkZWluIiwKICAgICAgInNlYWxzIiwKICAgICAgInNlYW1lIiwKICAgICAgInNlYW1zIiwKICAgICAgInNlYW15IiwKICAgICAgInNlYW5zIiwKICAgICAgInNlYXJlIiwKICAgICAgInNlYXJzIiwKICAgICAgInNlYXNlIiwKICAgICAgInNlYXRzIiwKICAgICAgInNlYXplIiwKICAgICAgInNlYnVtIiwKICAgICAgInNlY2NvIiwKICAgICAgInNlY2hzIiwKICAgICAgInNlY3RzIiwKICAgICAgInNlZGVyIiwKICAgICAgInNlZGVzIiwKICAgICAgInNlZGdlIiwKICAgICAgInNlZGd5IiwKICAgICAgInNlZHVtIiwKICAgICAgInNlZWRzIiwKICAgICAgInNlZWtzIiwKICAgICAgInNlZWxkIiwKICAgICAgInNlZWxzIiwKICAgICAgInNlZWx5IiwKICAgICAgInNlZW1zIiwKICAgICAgInNlZXBzIiwKICAgICAgInNlZXB5IiwKICAgICAgInNlZXJzIiwKICAgICAgInNlZmVyIiwKICAgICAgInNlZ2FyIiwKICAgICAgInNlZ25pIiwKICAgICAgInNlZ25vIiwKICAgICAgInNlZ29sIiwKICAgICAgInNlZ29zIiwKICAgICAgInNlaHJpIiwKICAgICAgInNlaWZzIiwKICAgICAgInNlaWxzIiwKICAgICAgInNlaW5lIiwKICAgICAgInNlaXJzIiwKICAgICAgInNlaXNlIiwKICAgICAgInNlaXNtIiwKICAgICAgInNlaXR5IiwKICAgICAgInNlaXphIiwKICAgICAgInNla29zIiwKICAgICAgInNla3RzIiwKICAgICAgInNlbGFoIiwKICAgICAgInNlbGVzIiwKICAgICAgInNlbGZzIiwKICAgICAgInNlbGxhIiwKICAgICAgInNlbGxlIiwKICAgICAgInNlbGxzIiwKICAgICAgInNlbHZhIiwKICAgICAgInNlbWVlIiwKICAgICAgInNlbWVzIiwKICAgICAgInNlbWllIiwKICAgICAgInNlbWlzIiwKICAgICAgInNlbmFzIiwKICAgICAgInNlbmRzIiwKICAgICAgInNlbmVzIiwKICAgICAgInNlbmdpIiwKICAgICAgInNlbm5hIiwKICAgICAgInNlbm9yIiwKICAgICAgInNlbnNhIiwKICAgICAgInNlbnNpIiwKICAgICAgInNlbnRlIiwKICAgICAgInNlbnRpIiwKICAgICAgInNlbnRzIiwKICAgICAgInNlbnZ5IiwKICAgICAgInNlbnphIiwKICAgICAgInNlcGFkIiwKICAgICAgInNlcGFsIiwKICAgICAgInNlcGljIiwKICAgICAgInNlcG95IiwKICAgICAgInNlcHRhIiwKICAgICAgInNlcHRzIiwKICAgICAgInNlcmFjIiwKICAgICAgInNlcmFpIiwKICAgICAgInNlcmFsIiwKICAgICAgInNlcmVkIiwKICAgICAgInNlcmVyIiwKICAgICAgInNlcmVzIiwKICAgICAgInNlcmZzIiwKICAgICAgInNlcmdlIiwKICAgICAgInNlcmljIiwKICAgICAgInNlcmluIiwKICAgICAgInNlcmtzIiwKICAgICAgInNlcm9uIiwKICAgICAgInNlcm93IiwKICAgICAgInNlcnJhIiwKICAgICAgInNlcnJlIiwKICAgICAgInNlcnJzIiwKICAgICAgInNlcnJ5IiwKICAgICAgInNlcnZvIiwKICAgICAgInNlc2V5IiwKICAgICAgInNlc3NhIiwKICAgICAgInNldGFlIiwKICAgICAgInNldGFsIiwKICAgICAgInNldG9uIiwKICAgICAgInNldHRzIiwKICAgICAgInNld2FuIiwKICAgICAgInNld2FyIiwKICAgICAgInNld2VkIiwKICAgICAgInNld2VsIiwKICAgICAgInNld2VuIiwKICAgICAgInNld2luIiwKICAgICAgInNleGVkIiwKICAgICAgInNleGVyIiwKICAgICAgInNleGVzIiwKICAgICAgInNleHRvIiwKICAgICAgInNleHRzIiwKICAgICAgInNleWVuIiwKICAgICAgInNoYWRzIiwKICAgICAgInNoYWdzIiwKICAgICAgInNoYWhzIiwKICAgICAgInNoYWtvIiwKICAgICAgInNoYWt0IiwKICAgICAgInNoYWxtIiwKICAgICAgInNoYWx5IiwKICAgICAgInNoYW1hIiwKICAgICAgInNoYW1zIiwKICAgICAgInNoYW5kIiwKICAgICAgInNoYW5zIiwKICAgICAgInNoYXBzIiwKICAgICAgInNoYXJuIiwKICAgICAgInNoYXNoIiwKICAgICAgInNoYXVsIiwKICAgICAgInNoYXdtIiwKICAgICAgInNoYXduIiwKICAgICAgInNoYXdzIiwKICAgICAgInNoYXlhIiwKICAgICAgInNoYXlzIiwKICAgICAgInNoY2hpIiwKICAgICAgInNoZWFmIiwKICAgICAgInNoZWFsIiwKICAgICAgInNoZWFzIiwKICAgICAgInNoZWRzIiwKICAgICAgInNoZWVsIiwKICAgICAgInNoZW5kIiwKICAgICAgInNoZW50IiwKICAgICAgInNoZW9sIiwKICAgICAgInNoZXJkIiwKICAgICAgInNoZXJlIiwKICAgICAgInNoZXJvIiwKICAgICAgInNoZXRzIiwKICAgICAgInNoZXZhIiwKICAgICAgInNoZXduIiwKICAgICAgInNoZXdzIiwKICAgICAgInNoaWFpIiwKICAgICAgInNoaWVsIiwKICAgICAgInNoaWVyIiwKICAgICAgInNoaWVzIiwKICAgICAgInNoaWxsIiwKICAgICAgInNoaWx5IiwKICAgICAgInNoaW1zIiwKICAgICAgInNoaW5zIiwKICAgICAgInNoaXBzIiwKICAgICAgInNoaXJyIiwKICAgICAgInNoaXJzIiwKICAgICAgInNoaXNoIiwKICAgICAgInNoaXNvIiwKICAgICAgInNoaXN0IiwKICAgICAgInNoaXRlIiwKICAgICAgInNoaXRzIiwKICAgICAgInNoaXVyIiwKICAgICAgInNoaXZhIiwKICAgICAgInNoaXZlIiwKICAgICAgInNoaXZzIiwKICAgICAgInNobGVwIiwKICAgICAgInNobHViIiwKICAgICAgInNobWVrIiwKICAgICAgInNobW9lIiwKICAgICAgInNob2F0IiwKICAgICAgInNob2VkIiwKICAgICAgInNob2VyIiwKICAgICAgInNob2VzIiwKICAgICAgInNob2dpIiwKICAgICAgInNob2dzIiwKICAgICAgInNob2ppIiwKICAgICAgInNob2pvIiwKICAgICAgInNob2xhIiwKICAgICAgInNob29sIiwKICAgICAgInNob29uIiwKICAgICAgInNob29zIiwKICAgICAgInNob3BlIiwKICAgICAgInNob3BzIiwKICAgICAgInNob3JsIiwKICAgICAgInNob3RlIiwKICAgICAgInNob3RzIiwKICAgICAgInNob3R0IiwKICAgICAgInNob3dkIiwKICAgICAgInNob3dzIiwKICAgICAgInNob3l1IiwKICAgICAgInNocmVkIiwKICAgICAgInNocmlzIiwKICAgICAgInNocm93IiwKICAgICAgInNodGlrIiwKICAgICAgInNodHVtIiwKICAgICAgInNodHVwIiwKICAgICAgInNodWxlIiwKICAgICAgInNodWxuIiwKICAgICAgInNodWxzIiwKICAgICAgInNodW5zIiwKICAgICAgInNodXJhIiwKICAgICAgInNodXRlIiwKICAgICAgInNodXRzIiwKICAgICAgInNod2FzIiwKICAgICAgInNoeWVyIiwKICAgICAgInNpYWxzIiwKICAgICAgInNpYmJzIiwKICAgICAgInNpYnlsIiwKICAgICAgInNpY2VzIiwKICAgICAgInNpY2h0IiwKICAgICAgInNpY2tvIiwKICAgICAgInNpY2tzIiwKICAgICAgInNpY2t5IiwKICAgICAgInNpZGFzIiwKICAgICAgInNpZGVkIiwKICAgICAgInNpZGVyIiwKICAgICAgInNpZGVzIiwKICAgICAgInNpZGhhIiwKICAgICAgInNpZGhlIiwKICAgICAgInNpZGxlIiwKICAgICAgInNpZWxkIiwKICAgICAgInNpZW5zIiwKICAgICAgInNpZW50IiwKICAgICAgInNpZXRoIiwKICAgICAgInNpZXVyIiwKICAgICAgInNpZnRzIiwKICAgICAgInNpZ2hzIiwKICAgICAgInNpZ2lsIiwKICAgICAgInNpZ2xhIiwKICAgICAgInNpZ25hIiwKICAgICAgInNpZ25zIiwKICAgICAgInNpam9zIiwKICAgICAgInNpa2FzIiwKICAgICAgInNpa2VyIiwKICAgICAgInNpa2VzIiwKICAgICAgInNpbGRzIiwKICAgICAgInNpbGVkIiwKICAgICAgInNpbGVuIiwKICAgICAgInNpbGVyIiwKICAgICAgInNpbGVzIiwKICAgICAgInNpbGV4IiwKICAgICAgInNpbGtzIiwKICAgICAgInNpbGxzIiwKICAgICAgInNpbG9zIiwKICAgICAgInNpbHRzIiwKICAgICAgInNpbHR5IiwKICAgICAgInNpbHZhIiwKICAgICAgInNpbWFyIiwKICAgICAgInNpbWFzIiwKICAgICAgInNpbWJhIiwKICAgICAgInNpbWlzIiwKICAgICAgInNpbXBzIiwKICAgICAgInNpbXVsIiwKICAgICAgInNpbmRzIiwKICAgICAgInNpbmVkIiwKICAgICAgInNpbmVzIiwKICAgICAgInNpbmdzIiwKICAgICAgInNpbmhzIiwKICAgICAgInNpbmtzIiwKICAgICAgInNpbmt5IiwKICAgICAgInNpbnVzIiwKICAgICAgInNpcGVkIiwKICAgICAgInNpcGVzIiwKICAgICAgInNpcHB5IiwKICAgICAgInNpcmVkIiwKICAgICAgInNpcmVlIiwKICAgICAgInNpcmVzIiwKICAgICAgInNpcmloIiwKICAgICAgInNpcmlzIiwKICAgICAgInNpcm9jIiwKICAgICAgInNpcnJhIiwKICAgICAgInNpcnVwIiwKICAgICAgInNpc2FsIiwKICAgICAgInNpc2VzIiwKICAgICAgInNpc3RhIiwKICAgICAgInNpc3RzIiwKICAgICAgInNpdGFyIiwKICAgICAgInNpdGVkIiwKICAgICAgInNpdGVzIiwKICAgICAgInNpdGhlIiwKICAgICAgInNpdGthIiwKICAgICAgInNpdHVwIiwKICAgICAgInNpdHVzIiwKICAgICAgInNpdmVyIiwKICAgICAgInNpeGVyIiwKICAgICAgInNpeGVzIiwKICAgICAgInNpeG1vIiwKICAgICAgInNpeHRlIiwKICAgICAgInNpemFyIiwKICAgICAgInNpemVkIiwKICAgICAgInNpemVsIiwKICAgICAgInNpemVyIiwKICAgICAgInNpemVzIiwKICAgICAgInNrYWdzIiwKICAgICAgInNrYWlsIiwKICAgICAgInNrYWxkIiwKICAgICAgInNrYW5rIiwKICAgICAgInNrYXJ0IiwKICAgICAgInNrYXRzIiwKICAgICAgInNrYXR0IiwKICAgICAgInNrYXdzIiwKICAgICAgInNrZWFuIiwKICAgICAgInNrZWFyIiwKICAgICAgInNrZWRzIiwKICAgICAgInNrZWVkIiwKICAgICAgInNrZWVmIiwKICAgICAgInNrZWVuIiwKICAgICAgInNrZWVyIiwKICAgICAgInNrZWVzIiwKICAgICAgInNrZWV0IiwKICAgICAgInNrZWdnIiwKICAgICAgInNrZWdzIiwKICAgICAgInNrZWluIiwKICAgICAgInNrZWxmIiwKICAgICAgInNrZWxsIiwKICAgICAgInNrZWxtIiwKICAgICAgInNrZWxwIiwKICAgICAgInNrZW5lIiwKICAgICAgInNrZW5zIiwKICAgICAgInNrZW9zIiwKICAgICAgInNrZXBzIiwKICAgICAgInNrZXJzIiwKICAgICAgInNrZXRzIiwKICAgICAgInNrZXdzIiwKICAgICAgInNraWRzIiwKICAgICAgInNraWVkIiwKICAgICAgInNraWVzIiwKICAgICAgInNraWV5IiwKICAgICAgInNraW1vIiwKICAgICAgInNraW1zIiwKICAgICAgInNraW5rIiwKICAgICAgInNraW5zIiwKICAgICAgInNraW50IiwKICAgICAgInNraW9zIiwKICAgICAgInNraXBzIiwKICAgICAgInNraXJsIiwKICAgICAgInNraXJyIiwKICAgICAgInNraXRlIiwKICAgICAgInNraXRzIiwKICAgICAgInNraXZlIiwKICAgICAgInNraXZ5IiwKICAgICAgInNrbGltIiwKICAgICAgInNrb2FsIiwKICAgICAgInNrb2R5IiwKICAgICAgInNrb2ZmIiwKICAgICAgInNrb2dzIiwKICAgICAgInNrb2xzIiwKICAgICAgInNrb29sIiwKICAgICAgInNrb3J0IiwKICAgICAgInNrb3NoIiwKICAgICAgInNrcmFuIiwKICAgICAgInNrcmlrIiwKICAgICAgInNrdWFzIiwKICAgICAgInNrdWdzIiwKICAgICAgInNreWVkIiwKICAgICAgInNreWVyIiwKICAgICAgInNreWV5IiwKICAgICAgInNreWZzIiwKICAgICAgInNreXJlIiwKICAgICAgInNreXJzIiwKICAgICAgInNreXRlIiwKICAgICAgInNsYWJzIiwKICAgICAgInNsYWRlIiwKICAgICAgInNsYWVzIiwKICAgICAgInNsYWdzIiwKICAgICAgInNsYWlkIiwKICAgICAgInNsYWtlIiwKICAgICAgInNsYW1zIiwKICAgICAgInNsYW5lIiwKICAgICAgInNsYW5rIiwKICAgICAgInNsYXBzIiwKICAgICAgInNsYXJ0IiwKICAgICAgInNsYXRzIiwKICAgICAgInNsYXR5IiwKICAgICAgInNsYXZlIiwKICAgICAgInNsYXdzIiwKICAgICAgInNsYXlzIiwKICAgICAgInNsZWJzIiwKICAgICAgInNsZWRzIiwKICAgICAgInNsZWVyIiwKICAgICAgInNsZXdzIiwKICAgICAgInNsZXlzIiwKICAgICAgInNsaWVyIiwKICAgICAgInNsaWx5IiwKICAgICAgInNsaW1zIiwKICAgICAgInNsaXBlIiwKICAgICAgInNsaXBzIiwKICAgICAgInNsaXB0IiwKICAgICAgInNsaXNoIiwKICAgICAgInNsaXRzIiwKICAgICAgInNsaXZlIiwKICAgICAgInNsb2FuIiwKICAgICAgInNsb2JzIiwKICAgICAgInNsb2VzIiwKICAgICAgInNsb2dzIiwKICAgICAgInNsb2lkIiwKICAgICAgInNsb2pkIiwKICAgICAgInNsb21vIiwKICAgICAgInNsb29tIiwKICAgICAgInNsb290IiwKICAgICAgInNsb3BzIiwKICAgICAgInNsb3B5IiwKICAgICAgInNsb3JtIiwKICAgICAgInNsb3RzIiwKICAgICAgInNsb3ZlIiwKICAgICAgInNsb3dzIiwKICAgICAgInNsb3lkIiwKICAgICAgInNsdWJiIiwKICAgICAgInNsdWJzIiwKICAgICAgInNsdWVkIiwKICAgICAgInNsdWVzIiwKICAgICAgInNsdWZmIiwKICAgICAgInNsdWdzIiwKICAgICAgInNsdWl0IiwKICAgICAgInNsdW1zIiwKICAgICAgInNsdXJiIiwKICAgICAgInNsdXJzIiwKICAgICAgInNsdXNlIiwKICAgICAgInNsdXRzIiwKICAgICAgInNseWVyIiwKICAgICAgInNseXBlIiwKICAgICAgInNtYWFrIiwKICAgICAgInNtYWlrIiwKICAgICAgInNtYWxtIiwKICAgICAgInNtYWx0IiwKICAgICAgInNtYXJtIiwKICAgICAgInNtYXplIiwKICAgICAgInNtZWVrIiwKICAgICAgInNtZWVzIiwKICAgICAgInNtZWlrIiwKICAgICAgInNtZWtlIiwKICAgICAgInNtZXJrIiwKICAgICAgInNtZXdzIiwKICAgICAgInNtaXJyIiwKICAgICAgInNtaXJzIiwKICAgICAgInNtaXRzIiwKICAgICAgInNtb2dzIiwKICAgICAgInNtb2tvIiwKICAgICAgInNtb2x0IiwKICAgICAgInNtb29yIiwKICAgICAgInNtb290IiwKICAgICAgInNtb3JlIiwKICAgICAgInNtb3JnIiwKICAgICAgInNtb3V0IiwKICAgICAgInNtb3d0IiwKICAgICAgInNtdWdzIiwKICAgICAgInNtdXJzIiwKICAgICAgInNtdXNoIiwKICAgICAgInNtdXRzIiwKICAgICAgInNuYWJzIiwKICAgICAgInNuYWZ1IiwKICAgICAgInNuYWdzIiwKICAgICAgInNuYXBzIiwKICAgICAgInNuYXJmIiwKICAgICAgInNuYXJrIiwKICAgICAgInNuYXJzIiwKICAgICAgInNuYXJ5IiwKICAgICAgInNuYXNoIiwKICAgICAgInNuYXRoIiwKICAgICAgInNuYXdzIiwKICAgICAgInNuZWFkIiwKICAgICAgInNuZWFwIiwKICAgICAgInNuZWJzIiwKICAgICAgInNuZWNrIiwKICAgICAgInNuZWRzIiwKICAgICAgInNuZWVkIiwKICAgICAgInNuZWVzIiwKICAgICAgInNuZWxsIiwKICAgICAgInNuaWJzIiwKICAgICAgInNuaWNrIiwKICAgICAgInNuaWVzIiwKICAgICAgInNuaWZ0IiwKICAgICAgInNuaWdzIiwKICAgICAgInNuaXBzIiwKICAgICAgInNuaXB5IiwKICAgICAgInNuaXJ0IiwKICAgICAgInNuaXRzIiwKICAgICAgInNub2JzIiwKICAgICAgInNub2RzIiwKICAgICAgInNub2VrIiwKICAgICAgInNub2VwIiwKICAgICAgInNub2dzIiwKICAgICAgInNub2tlIiwKICAgICAgInNub29kIiwKICAgICAgInNub29rIiwKICAgICAgInNub29sIiwKICAgICAgInNub290IiwKICAgICAgInNub3RzIiwKICAgICAgInNub3drIiwKICAgICAgInNub3dzIiwKICAgICAgInNudWJzIiwKICAgICAgInNudWdzIiwKICAgICAgInNudXNoIiwKICAgICAgInNueWVzIiwKICAgICAgInNvYWtzIiwKICAgICAgInNvYXBzIiwKICAgICAgInNvYXJlIiwKICAgICAgInNvYXJzIiwKICAgICAgInNvYXZlIiwKICAgICAgInNvYmFzIiwKICAgICAgInNvY2FzIiwKICAgICAgInNvY2VzIiwKICAgICAgInNvY2tvIiwKICAgICAgInNvY2tzIiwKICAgICAgInNvY2xlIiwKICAgICAgInNvZGFzIiwKICAgICAgInNvZGR5IiwKICAgICAgInNvZGljIiwKICAgICAgInNvZG9tIiwKICAgICAgInNvZmFyIiwKICAgICAgInNvZmFzIiwKICAgICAgInNvZnRhIiwKICAgICAgInNvZnRzIiwKICAgICAgInNvZnR5IiwKICAgICAgInNvZ2VyIiwKICAgICAgInNvaHVyIiwKICAgICAgInNvaWxzIiwKICAgICAgInNvaWx5IiwKICAgICAgInNvamFzIiwKICAgICAgInNvanVzIiwKICAgICAgInNva2FoIiwKICAgICAgInNva2VuIiwKICAgICAgInNva2VzIiwKICAgICAgInNva29sIiwKICAgICAgInNvbGFoIiwKICAgICAgInNvbGFuIiwKICAgICAgInNvbGFzIiwKICAgICAgInNvbGRlIiwKICAgICAgInNvbGRpIiwKICAgICAgInNvbGRvIiwKICAgICAgInNvbGRzIiwKICAgICAgInNvbGVkIiwKICAgICAgInNvbGVpIiwKICAgICAgInNvbGVyIiwKICAgICAgInNvbGVzIiwKICAgICAgInNvbG9uIiwKICAgICAgInNvbG9zIiwKICAgICAgInNvbHVtIiwKICAgICAgInNvbHVzIiwKICAgICAgInNvbWFuIiwKICAgICAgInNvbWFzIiwKICAgICAgInNvbmNlIiwKICAgICAgInNvbmRlIiwKICAgICAgInNvbmVzIiwKICAgICAgInNvbmdzIiwKICAgICAgInNvbmx5IiwKICAgICAgInNvbm5lIiwKICAgICAgInNvbm55IiwKICAgICAgInNvbnNlIiwKICAgICAgInNvbnN5IiwKICAgICAgInNvb2V5IiwKICAgICAgInNvb2tzIiwKICAgICAgInNvb2t5IiwKICAgICAgInNvb2xlIiwKICAgICAgInNvb2xzIiwKICAgICAgInNvb21zIiwKICAgICAgInNvb3BzIiwKICAgICAgInNvb3RlIiwKICAgICAgInNvb3RzIiwKICAgICAgInNvcGhzIiwKICAgICAgInNvcGh5IiwKICAgICAgInNvcG9yIiwKICAgICAgInNvcHB5IiwKICAgICAgInNvcHJhIiwKICAgICAgInNvcmFsIiwKICAgICAgInNvcmFzIiwKICAgICAgInNvcmJvIiwKICAgICAgInNvcmJzIiwKICAgICAgInNvcmRhIiwKICAgICAgInNvcmRvIiwKICAgICAgInNvcmRzIiwKICAgICAgInNvcmVkIiwKICAgICAgInNvcmVlIiwKICAgICAgInNvcmVsIiwKICAgICAgInNvcmVyIiwKICAgICAgInNvcmVzIiwKICAgICAgInNvcmV4IiwKICAgICAgInNvcmdvIiwKICAgICAgInNvcm5zIiwKICAgICAgInNvcnJhIiwKICAgICAgInNvcnRhIiwKICAgICAgInNvcnRzIiwKICAgICAgInNvcnVzIiwKICAgICAgInNvdGhzIiwKICAgICAgInNvdG9sIiwKICAgICAgInNvdWNlIiwKICAgICAgInNvdWN0IiwKICAgICAgInNvdWdoIiwKICAgICAgInNvdWtzIiwKICAgICAgInNvdWxzIiwKICAgICAgInNvdW1zIiwKICAgICAgInNvdXBzIiwKICAgICAgInNvdXB5IiwKICAgICAgInNvdXJzIiwKICAgICAgInNvdXNlIiwKICAgICAgInNvdXRzIiwKICAgICAgInNvd2FyIiwKICAgICAgInNvd2NlIiwKICAgICAgInNvd2VkIiwKICAgICAgInNvd2ZmIiwKICAgICAgInNvd2ZzIiwKICAgICAgInNvd2xlIiwKICAgICAgInNvd2xzIiwKICAgICAgInNvd21zIiwKICAgICAgInNvd25kIiwKICAgICAgInNvd25lIiwKICAgICAgInNvd3BzIiwKICAgICAgInNvd3NlIiwKICAgICAgInNvd3RoIiwKICAgICAgInNveWFzIiwKICAgICAgInNveWxlIiwKICAgICAgInNveXV6IiwKICAgICAgInNvemluIiwKICAgICAgInNwYWN5IiwKICAgICAgInNwYWRvIiwKICAgICAgInNwYWVkIiwKICAgICAgInNwYWVyIiwKICAgICAgInNwYWVzIiwKICAgICAgInNwYWdzIiwKICAgICAgInNwYWhpIiwKICAgICAgInNwYWlsIiwKICAgICAgInNwYWluIiwKICAgICAgInNwYWl0IiwKICAgICAgInNwYWtlIiwKICAgICAgInNwYWxkIiwKICAgICAgInNwYWxlIiwKICAgICAgInNwYWxsIiwKICAgICAgInNwYWx0IiwKICAgICAgInNwYW1zIiwKICAgICAgInNwYW5lIiwKICAgICAgInNwYW5nIiwKICAgICAgInNwYW5zIiwKICAgICAgInNwYXJkIiwKICAgICAgInNwYXJzIiwKICAgICAgInNwYXJ0IiwKICAgICAgInNwYXRlIiwKICAgICAgInNwYXRzIiwKICAgICAgInNwYXVsIiwKICAgICAgInNwYXdsIiwKICAgICAgInNwYXdzIiwKICAgICAgInNwYXlkIiwKICAgICAgInNwYXlzIiwKICAgICAgInNwYXphIiwKICAgICAgInNwYXp6IiwKICAgICAgInNwZWFsIiwKICAgICAgInNwZWFuIiwKICAgICAgInNwZWF0IiwKICAgICAgInNwZWNzIiwKICAgICAgInNwZWN0IiwKICAgICAgInNwZWVsIiwKICAgICAgInNwZWVyIiwKICAgICAgInNwZWlsIiwKICAgICAgInNwZWlyIiwKICAgICAgInNwZWtzIiwKICAgICAgInNwZWxkIiwKICAgICAgInNwZWxrIiwKICAgICAgInNwZW9zIiwKICAgICAgInNwZXRzIiwKICAgICAgInNwZXVnIiwKICAgICAgInNwZXdzIiwKICAgICAgInNwZXd5IiwKICAgICAgInNwaWFsIiwKICAgICAgInNwaWNhIiwKICAgICAgInNwaWNrIiwKICAgICAgInNwaWNzIiwKICAgICAgInNwaWRlIiwKICAgICAgInNwaWVyIiwKICAgICAgInNwaWVzIiwKICAgICAgInNwaWZmIiwKICAgICAgInNwaWZzIiwKICAgICAgInNwaWtzIiwKICAgICAgInNwaWxlIiwKICAgICAgInNwaW1zIiwKICAgICAgInNwaW5hIiwKICAgICAgInNwaW5rIiwKICAgICAgInNwaW5zIiwKICAgICAgInNwaXJ0IiwKICAgICAgInNwaXJ5IiwKICAgICAgInNwaXRzIiwKICAgICAgInNwaXR6IiwKICAgICAgInNwaXZzIiwKICAgICAgInNwbGF5IiwKICAgICAgInNwbG9nIiwKICAgICAgInNwb2RlIiwKICAgICAgInNwb2RzIiwKICAgICAgInNwb29tIiwKICAgICAgInNwb29yIiwKICAgICAgInNwb290IiwKICAgICAgInNwb3JrIiwKICAgICAgInNwb3NoIiwKICAgICAgInNwb3RzIiwKICAgICAgInNwcmFkIiwKICAgICAgInNwcmFnIiwKICAgICAgInNwcmF0IiwKICAgICAgInNwcmVkIiwKICAgICAgInNwcmV3IiwKICAgICAgInNwcml0IiwKICAgICAgInNwcm9kIiwKICAgICAgInNwcm9nIiwKICAgICAgInNwcnVlIiwKICAgICAgInNwcnVnIiwKICAgICAgInNwdWRzIiwKICAgICAgInNwdWVkIiwKICAgICAgInNwdWVyIiwKICAgICAgInNwdWVzIiwKICAgICAgInNwdWdzIiwKICAgICAgInNwdWxlIiwKICAgICAgInNwdW1lIiwKICAgICAgInNwdW15IiwKICAgICAgInNwdXJzIiwKICAgICAgInNwdXRhIiwKICAgICAgInNweWFsIiwKICAgICAgInNweXJlIiwKICAgICAgInNxdWFiIiwKICAgICAgInNxdWF3IiwKICAgICAgInNxdWVnIiwKICAgICAgInNxdWlkIiwKICAgICAgInNxdWl0IiwKICAgICAgInNxdWl6IiwKICAgICAgInN0YWJzIiwKICAgICAgInN0YWRlIiwKICAgICAgInN0YWdzIiwKICAgICAgInN0YWd5IiwKICAgICAgInN0YWlnIiwKICAgICAgInN0YW5lIiwKICAgICAgInN0YW5nIiwKICAgICAgInN0YXBoIiwKICAgICAgInN0YXBzIiwKICAgICAgInN0YXJuIiwKICAgICAgInN0YXJyIiwKICAgICAgInN0YXJzIiwKICAgICAgInN0YXRzIiwKICAgICAgInN0YXVuIiwKICAgICAgInN0YXdzIiwKICAgICAgInN0YXlzIiwKICAgICAgInN0ZWFuIiwKICAgICAgInN0ZWFyIiwKICAgICAgInN0ZWRkIiwKICAgICAgInN0ZWRlIiwKICAgICAgInN0ZWRzIiwKICAgICAgInN0ZWVrIiwKICAgICAgInN0ZWVtIiwKICAgICAgInN0ZWVuIiwKICAgICAgInN0ZWlsIiwKICAgICAgInN0ZWxhIiwKICAgICAgInN0ZWxlIiwKICAgICAgInN0ZWxsIiwKICAgICAgInN0ZW1lIiwKICAgICAgInN0ZW1zIiwKICAgICAgInN0ZW5kIiwKICAgICAgInN0ZW5vIiwKICAgICAgInN0ZW5zIiwKICAgICAgInN0ZW50IiwKICAgICAgInN0ZXBzIiwKICAgICAgInN0ZXB0IiwKICAgICAgInN0ZXJlIiwKICAgICAgInN0ZXRzIiwKICAgICAgInN0ZXdzIiwKICAgICAgInN0ZXd5IiwKICAgICAgInN0ZXlzIiwKICAgICAgInN0aWNoIiwKICAgICAgInN0aWVkIiwKICAgICAgInN0aWVzIiwKICAgICAgInN0aWxiIiwKICAgICAgInN0aWxlIiwKICAgICAgInN0aW1lIiwKICAgICAgInN0aW1zIiwKICAgICAgInN0aW15IiwKICAgICAgInN0aXBhIiwKICAgICAgInN0aXBlIiwKICAgICAgInN0aXJlIiwKICAgICAgInN0aXJrIiwKICAgICAgInN0aXJwIiwKICAgICAgInN0aXJzIiwKICAgICAgInN0aXZlIiwKICAgICAgInN0aXZ5IiwKICAgICAgInN0b2FlIiwKICAgICAgInN0b2FpIiwKICAgICAgInN0b2FzIiwKICAgICAgInN0b2F0IiwKICAgICAgInN0b2JzIiwKICAgICAgInN0b2VwIiwKICAgICAgInN0b2d5IiwKICAgICAgInN0b2l0IiwKICAgICAgInN0b2xuIiwKICAgICAgInN0b21hIiwKICAgICAgInN0b25kIiwKICAgICAgInN0b25nIiwKICAgICAgInN0b25rIiwKICAgICAgInN0b25uIiwKICAgICAgInN0b29rIiwKICAgICAgInN0b29yIiwKICAgICAgInN0b3BlIiwKICAgICAgInN0b3BzIiwKICAgICAgInN0b3B0IiwKICAgICAgInN0b3NzIiwKICAgICAgInN0b3RzIiwKICAgICAgInN0b3R0IiwKICAgICAgInN0b3VuIiwKICAgICAgInN0b3VwIiwKICAgICAgInN0b3VyIiwKICAgICAgInN0b3duIiwKICAgICAgInN0b3dwIiwKICAgICAgInN0b3dzIiwKICAgICAgInN0cmFkIiwKICAgICAgInN0cmFlIiwKICAgICAgInN0cmFnIiwKICAgICAgInN0cmFrIiwKICAgICAgInN0cmVwIiwKICAgICAgInN0cmV3IiwKICAgICAgInN0cmlhIiwKICAgICAgInN0cmlnIiwKICAgICAgInN0cmltIiwKICAgICAgInN0cm9wIiwKICAgICAgInN0cm93IiwKICAgICAgInN0cm95IiwKICAgICAgInN0cnVtIiwKICAgICAgInN0dWJzIiwKICAgICAgInN0dWRlIiwKICAgICAgInN0dWRzIiwKICAgICAgInN0dWxsIiwKICAgICAgInN0dWxtIiwKICAgICAgInN0dW1tIiwKICAgICAgInN0dW1zIiwKICAgICAgInN0dW5zIiwKICAgICAgInN0dXBhIiwKICAgICAgInN0dXBlIiwKICAgICAgInN0dXJlIiwKICAgICAgInN0dXJ0IiwKICAgICAgInN0eWVkIiwKICAgICAgInN0eWVzIiwKICAgICAgInN0eWxpIiwKICAgICAgInN0eWxvIiwKICAgICAgInN0eW1lIiwKICAgICAgInN0eW15IiwKICAgICAgInN0eXJlIiwKICAgICAgInN0eXRlIiwKICAgICAgInN1YmFoIiwKICAgICAgInN1YmFzIiwKICAgICAgInN1YmJ5IiwKICAgICAgInN1YmVyIiwKICAgICAgInN1YmhhIiwKICAgICAgInN1Y2NpIiwKICAgICAgInN1Y2tzIiwKICAgICAgInN1Y2t5IiwKICAgICAgInN1Y3JlIiwKICAgICAgInN1ZGRzIiwKICAgICAgInN1ZG9yIiwKICAgICAgInN1ZHN5IiwKICAgICAgInN1ZWRlIiwKICAgICAgInN1ZW50IiwKICAgICAgInN1ZXJzIiwKICAgICAgInN1ZXRlIiwKICAgICAgInN1ZXRzIiwKICAgICAgInN1ZXR5IiwKICAgICAgInN1Z2FuIiwKICAgICAgInN1Z2hzIiwKICAgICAgInN1Z29zIiwKICAgICAgInN1aHVyIiwKICAgICAgInN1aWRzIiwKICAgICAgInN1aW50IiwKICAgICAgInN1aXRzIiwKICAgICAgInN1amVlIiwKICAgICAgInN1a2hzIiwKICAgICAgInN1a3VrIiwKICAgICAgInN1bGNpIiwKICAgICAgInN1bGZhIiwKICAgICAgInN1bGZvIiwKICAgICAgInN1bGtzIiwKICAgICAgInN1bHBoIiwKICAgICAgInN1bHVzIiwKICAgICAgInN1bWlzIiwKICAgICAgInN1bW1hIiwKICAgICAgInN1bW9zIiwKICAgICAgInN1bXBoIiwKICAgICAgInN1bXBzIiwKICAgICAgInN1bmlzIiwKICAgICAgInN1bmtzIiwKICAgICAgInN1bm5hIiwKICAgICAgInN1bm5zIiwKICAgICAgInN1bnVwIiwKICAgICAgInN1cGVzIiwKICAgICAgInN1cHJhIiwKICAgICAgInN1cmFoIiwKICAgICAgInN1cmFsIiwKICAgICAgInN1cmFzIiwKICAgICAgInN1cmF0IiwKICAgICAgInN1cmRzIiwKICAgICAgInN1cmVkIiwKICAgICAgInN1cmVzIiwKICAgICAgInN1cmZzIiwKICAgICAgInN1cmZ5IiwKICAgICAgInN1cmd5IiwKICAgICAgInN1cnJhIiwKICAgICAgInN1c2VkIiwKICAgICAgInN1c2VzIiwKICAgICAgInN1c3VzIiwKICAgICAgInN1dG9yIiwKICAgICAgInN1dHJhIiwKICAgICAgInN1dHRhIiwKICAgICAgInN3YWJzIiwKICAgICAgInN3YWNrIiwKICAgICAgInN3YWRzIiwKICAgICAgInN3YWdlIiwKICAgICAgInN3YWdzIiwKICAgICAgInN3YWlsIiwKICAgICAgInN3YWluIiwKICAgICAgInN3YWxlIiwKICAgICAgInN3YWx5IiwKICAgICAgInN3YW15IiwKICAgICAgInN3YW5nIiwKICAgICAgInN3YW5rIiwKICAgICAgInN3YW5zIiwKICAgICAgInN3YXBzIiwKICAgICAgInN3YXB0IiwKICAgICAgInN3YXJkIiwKICAgICAgInN3YXJlIiwKICAgICAgInN3YXJmIiwKICAgICAgInN3YXJ0IiwKICAgICAgInN3YXRzIiwKICAgICAgInN3YXlsIiwKICAgICAgInN3YXlzIiwKICAgICAgInN3ZWFsIiwKICAgICAgInN3ZWRlIiwKICAgICAgInN3ZWVkIiwKICAgICAgInN3ZWVsIiwKICAgICAgInN3ZWVyIiwKICAgICAgInN3ZWVzIiwKICAgICAgInN3ZWlyIiwKICAgICAgInN3ZWx0IiwKICAgICAgInN3ZXJmIiwKICAgICAgInN3ZXlzIiwKICAgICAgInN3aWVzIiwKICAgICAgInN3aWdzIiwKICAgICAgInN3aWxlIiwKICAgICAgInN3aW1zIiwKICAgICAgInN3aW5rIiwKICAgICAgInN3aXBlIiwKICAgICAgInN3aXJlIiwKICAgICAgInN3aXNzIiwKICAgICAgInN3aXRoIiwKICAgICAgInN3aXRzIiwKICAgICAgInN3aXZlIiwKICAgICAgInN3aXp6IiwKICAgICAgInN3b2JzIiwKICAgICAgInN3b2xlIiwKICAgICAgInN3b2xuIiwKICAgICAgInN3b3BzIiwKICAgICAgInN3b3B0IiwKICAgICAgInN3b3RzIiwKICAgICAgInN3b3VuIiwKICAgICAgInN5YmJlIiwKICAgICAgInN5YmlsIiwKICAgICAgInN5Ym9lIiwKICAgICAgInN5Ym93IiwKICAgICAgInN5Y2VlIiwKICAgICAgInN5Y2VzIiwKICAgICAgInN5Y29uIiwKICAgICAgInN5ZW5zIiwKICAgICAgInN5a2VyIiwKICAgICAgInN5a2VzIiwKICAgICAgInN5bGlzIiwKICAgICAgInN5bHBoIiwKICAgICAgInN5bHZhIiwKICAgICAgInN5bWFyIiwKICAgICAgInN5bmNoIiwKICAgICAgInN5bmNzIiwKICAgICAgInN5bmRzIiwKICAgICAgInN5bmVkIiwKICAgICAgInN5bmVzIiwKICAgICAgInN5bnRoIiwKICAgICAgInN5cGVkIiwKICAgICAgInN5cGVzIiwKICAgICAgInN5cGhzIiwKICAgICAgInN5cmFoIiwKICAgICAgInN5cmVuIiwKICAgICAgInN5c29wIiwKICAgICAgInN5dGhlIiwKICAgICAgInN5dmVyIiwKICAgICAgInRhYWxzIiwKICAgICAgInRhYXRhIiwKICAgICAgInRhYmVyIiwKICAgICAgInRhYmVzIiwKICAgICAgInRhYmlkIiwKICAgICAgInRhYmlzIiwKICAgICAgInRhYmxhIiwKICAgICAgInRhYm9yIiwKICAgICAgInRhYnVuIiwKICAgICAgInRhYnVzIiwKICAgICAgInRhY2FuIiwKICAgICAgInRhY2VzIiwKICAgICAgInRhY2V0IiwKICAgICAgInRhY2hlIiwKICAgICAgInRhY2hvIiwKICAgICAgInRhY2hzIiwKICAgICAgInRhY2tzIiwKICAgICAgInRhY29zIiwKICAgICAgInRhY3RzIiwKICAgICAgInRhZWxzIiwKICAgICAgInRhZmlhIiwKICAgICAgInRhZ2d5IiwKICAgICAgInRhZ21hIiwKICAgICAgInRhaGFzIiwKICAgICAgInRhaHJzIiwKICAgICAgInRhaWdhIiwKICAgICAgInRhaWdzIiwKICAgICAgInRhaWtvIiwKICAgICAgInRhaWxzIiwKICAgICAgInRhaW5zIiwKICAgICAgInRhaXJhIiwKICAgICAgInRhaXNoIiwKICAgICAgInRhaXRzIiwKICAgICAgInRhamVzIiwKICAgICAgInRha2FzIiwKICAgICAgInRha2VzIiwKICAgICAgInRha2hpIiwKICAgICAgInRha2luIiwKICAgICAgInRha2lzIiwKICAgICAgInRha2t5IiwKICAgICAgInRhbGFrIiwKICAgICAgInRhbGFxIiwKICAgICAgInRhbGFyIiwKICAgICAgInRhbGFzIiwKICAgICAgInRhbGNzIiwKICAgICAgInRhbGN5IiwKICAgICAgInRhbGVhIiwKICAgICAgInRhbGVyIiwKICAgICAgInRhbGVzIiwKICAgICAgInRhbGtzIiwKICAgICAgInRhbGt5IiwKICAgICAgInRhbGxzIiwKICAgICAgInRhbG1hIiwKICAgICAgInRhbHBhIiwKICAgICAgInRhbHVrIiwKICAgICAgInRhbHVzIiwKICAgICAgInRhbWFsIiwKICAgICAgInRhbWVkIiwKICAgICAgInRhbWVzIiwKICAgICAgInRhbWluIiwKICAgICAgInRhbWlzIiwKICAgICAgInRhbW15IiwKICAgICAgInRhbXBzIiwKICAgICAgInRhbmFzIiwKICAgICAgInRhbmdhIiwKICAgICAgInRhbmdpIiwKICAgICAgInRhbmdzIiwKICAgICAgInRhbmhzIiwKICAgICAgInRhbmthIiwKICAgICAgInRhbmtzIiwKICAgICAgInRhbmt5IiwKICAgICAgInRhbm5hIiwKICAgICAgInRhbnN5IiwKICAgICAgInRhbnRpIiwKICAgICAgInRhbnRvIiwKICAgICAgInRhbnR5IiwKICAgICAgInRhcGFzIiwKICAgICAgInRhcGVkIiwKICAgICAgInRhcGVuIiwKICAgICAgInRhcGVzIiwKICAgICAgInRhcGV0IiwKICAgICAgInRhcGlzIiwKICAgICAgInRhcHBhIiwKICAgICAgInRhcHVzIiwKICAgICAgInRhcmFzIiwKICAgICAgInRhcmRvIiwKICAgICAgInRhcmVkIiwKICAgICAgInRhcmVzIiwKICAgICAgInRhcmdhIiwKICAgICAgInRhcmdlIiwKICAgICAgInRhcm5zIiwKICAgICAgInRhcm9jIiwKICAgICAgInRhcm9rIiwKICAgICAgInRhcm9zIiwKICAgICAgInRhcnBzIiwKICAgICAgInRhcnJlIiwKICAgICAgInRhcnJ5IiwKICAgICAgInRhcnNpIiwKICAgICAgInRhcnRzIiwKICAgICAgInRhcnR5IiwKICAgICAgInRhc2FyIiwKICAgICAgInRhc2VkIiwKICAgICAgInRhc2VyIiwKICAgICAgInRhc2VzIiwKICAgICAgInRhc2tzIiwKICAgICAgInRhc3NhIiwKICAgICAgInRhc3NlIiwKICAgICAgInRhc3NvIiwKICAgICAgInRhdGFyIiwKICAgICAgInRhdGVyIiwKICAgICAgInRhdGVzIiwKICAgICAgInRhdGhzIiwKICAgICAgInRhdGllIiwKICAgICAgInRhdG91IiwKICAgICAgInRhdHRzIiwKICAgICAgInRhdHVzIiwKICAgICAgInRhdWJlIiwKICAgICAgInRhdWxkIiwKICAgICAgInRhdW9uIiwKICAgICAgInRhdXBlIiwKICAgICAgInRhdXRzIiwKICAgICAgInRhdmFoIiwKICAgICAgInRhdmFzIiwKICAgICAgInRhdmVyIiwKICAgICAgInRhd2FpIiwKICAgICAgInRhd2FzIiwKICAgICAgInRhd2VkIiwKICAgICAgInRhd2VyIiwKICAgICAgInRhd2llIiwKICAgICAgInRhd3NlIiwKICAgICAgInRhd3RzIiwKICAgICAgInRheGVkIiwKICAgICAgInRheGVyIiwKICAgICAgInRheGVzIiwKICAgICAgInRheGlzIiwKICAgICAgInRheG9sIiwKICAgICAgInRheG9uIiwKICAgICAgInRheG9yIiwKICAgICAgInRheHVzIiwKICAgICAgInRheXJhIiwKICAgICAgInRhenphIiwKICAgICAgInRhenplIiwKICAgICAgInRlYWRlIiwKICAgICAgInRlYWRzIiwKICAgICAgInRlYWVkIiwKICAgICAgInRlYWtzIiwKICAgICAgInRlYWxzIiwKICAgICAgInRlYW1zIiwKICAgICAgInRlYXJzIiwKICAgICAgInRlYXRzIiwKICAgICAgInRlYXplIiwKICAgICAgInRlY2hzIiwKICAgICAgInRlY2h5IiwKICAgICAgInRlY3RhIiwKICAgICAgInRlZWxzIiwKICAgICAgInRlZW1zIiwKICAgICAgInRlZW5kIiwKICAgICAgInRlZW5lIiwKICAgICAgInRlZW5zIiwKICAgICAgInRlZW55IiwKICAgICAgInRlZXJzIiwKICAgICAgInRlZmZzIiwKICAgICAgInRlZ2dzIiwKICAgICAgInRlZ3VhIiwKICAgICAgInRlZ3VzIiwKICAgICAgInRlaHJzIiwKICAgICAgInRlaWlkIiwKICAgICAgInRlaWxzIiwKICAgICAgInRlaW5kIiwKICAgICAgInRlaW5zIiwKICAgICAgInRlbGFlIiwKICAgICAgInRlbGNvIiwKICAgICAgInRlbGVzIiwKICAgICAgInRlbGV4IiwKICAgICAgInRlbGlhIiwKICAgICAgInRlbGljIiwKICAgICAgInRlbGxzIiwKICAgICAgInRlbGx5IiwKICAgICAgInRlbG9pIiwKICAgICAgInRlbG9zIiwKICAgICAgInRlbWVkIiwKICAgICAgInRlbWVzIiwKICAgICAgInRlbXBpIiwKICAgICAgInRlbXBzIiwKICAgICAgInRlbXB0IiwKICAgICAgInRlbXNlIiwKICAgICAgInRlbmNoIiwKICAgICAgInRlbmRzIiwKICAgICAgInRlbmR1IiwKICAgICAgInRlbmVzIiwKICAgICAgInRlbmdlIiwKICAgICAgInRlbmlhIiwKICAgICAgInRlbm5lIiwKICAgICAgInRlbm5vIiwKICAgICAgInRlbm55IiwKICAgICAgInRlbm9uIiwKICAgICAgInRlbnRzIiwKICAgICAgInRlbnR5IiwKICAgICAgInRlbnVlIiwKICAgICAgInRlcGFsIiwKICAgICAgInRlcGFzIiwKICAgICAgInRlcG95IiwKICAgICAgInRlcmFpIiwKICAgICAgInRlcmFzIiwKICAgICAgInRlcmNlIiwKICAgICAgInRlcmVrIiwKICAgICAgInRlcmVzIiwKICAgICAgInRlcmZlIiwKICAgICAgInRlcmZzIiwKICAgICAgInRlcmdhIiwKICAgICAgInRlcm1zIiwKICAgICAgInRlcm5lIiwKICAgICAgInRlcm5zIiwKICAgICAgInRlcnJ5IiwKICAgICAgInRlcnRzIiwKICAgICAgInRlc2xhIiwKICAgICAgInRlc3RhIiwKICAgICAgInRlc3RlIiwKICAgICAgInRlc3RzIiwKICAgICAgInRldGVzIiwKICAgICAgInRldGhzIiwKICAgICAgInRldHJhIiwKICAgICAgInRldHJpIiwKICAgICAgInRldWNoIiwKICAgICAgInRldWdoIiwKICAgICAgInRld2VkIiwKICAgICAgInRld2VsIiwKICAgICAgInRld2l0IiwKICAgICAgInRleGFzIiwKICAgICAgInRleGVzIiwKICAgICAgInRleHRzIiwKICAgICAgInRoYWNrIiwKICAgICAgInRoYWdpIiwKICAgICAgInRoYWltIiwKICAgICAgInRoYWxlIiwKICAgICAgInRoYWxpIiwKICAgICAgInRoYW5hIiwKICAgICAgInRoYW5lIiwKICAgICAgInRoYW5nIiwKICAgICAgInRoYW5zIiwKICAgICAgInRoYW54IiwKICAgICAgInRoYXJtIiwKICAgICAgInRoYXJzIiwKICAgICAgInRoYXdzIiwKICAgICAgInRoYXd5IiwKICAgICAgInRoZWJlIiwKICAgICAgInRoZWNhIiwKICAgICAgInRoZWVkIiwKICAgICAgInRoZWVrIiwKICAgICAgInRoZWVzIiwKICAgICAgInRoZWduIiwKICAgICAgInRoZWljIiwKICAgICAgInRoZWluIiwKICAgICAgInRoZWxmIiwKICAgICAgInRoZW1hIiwKICAgICAgInRoZW5zIiwKICAgICAgInRoZW93IiwKICAgICAgInRoZXJtIiwKICAgICAgInRoZXNwIiwKICAgICAgInRoZXRlIiwKICAgICAgInRoZXdzIiwKICAgICAgInRoZXd5IiwKICAgICAgInRoaWdzIiwKICAgICAgInRoaWxrIiwKICAgICAgInRoaWxsIiwKICAgICAgInRoaW5lIiwKICAgICAgInRoaW5zIiwKICAgICAgInRoaW9sIiwKICAgICAgInRoaXJsIiwKICAgICAgInRob2Z0IiwKICAgICAgInRob2xlIiwKICAgICAgInRob2xpIiwKICAgICAgInRob3JvIiwKICAgICAgInRob3JwIiwKICAgICAgInRob3VzIiwKICAgICAgInRob3dsIiwKICAgICAgInRocmFlIiwKICAgICAgInRocmF3IiwKICAgICAgInRocmlkIiwKICAgICAgInRocmlwIiwKICAgICAgInRocm9lIiwKICAgICAgInRodWRzIiwKICAgICAgInRodWdzIiwKICAgICAgInRodWphIiwKICAgICAgInRodW5rIiwKICAgICAgInRodXJsIiwKICAgICAgInRodXlhIiwKICAgICAgInRoeW1pIiwKICAgICAgInRoeW15IiwKICAgICAgInRpYW5zIiwKICAgICAgInRpYXJzIiwKICAgICAgInRpY2FsIiwKICAgICAgInRpY2NhIiwKICAgICAgInRpY2VkIiwKICAgICAgInRpY2VzIiwKICAgICAgInRpY2h5IiwKICAgICAgInRpY2tzIiwKICAgICAgInRpY2t5IiwKICAgICAgInRpZGR5IiwKICAgICAgInRpZGVkIiwKICAgICAgInRpZGVzIiwKICAgICAgInRpZXJzIiwKICAgICAgInRpZmZzIiwKICAgICAgInRpZm9zIiwKICAgICAgInRpZnRzIiwKICAgICAgInRpZ2VzIiwKICAgICAgInRpZ29uIiwKICAgICAgInRpa2FzIiwKICAgICAgInRpa2VzIiwKICAgICAgInRpa2lzIiwKICAgICAgInRpa2thIiwKICAgICAgInRpbGFrIiwKICAgICAgInRpbGVkIiwKICAgICAgInRpbGVyIiwKICAgICAgInRpbGVzIiwKICAgICAgInRpbGxzIiwKICAgICAgInRpbGx5IiwKICAgICAgInRpbHRoIiwKICAgICAgInRpbHRzIiwKICAgICAgInRpbWJvIiwKICAgICAgInRpbWVkIiwKICAgICAgInRpbWVzIiwKICAgICAgInRpbW9uIiwKICAgICAgInRpbXBzIiwKICAgICAgInRpbmFzIiwKICAgICAgInRpbmN0IiwKICAgICAgInRpbmRzIiwKICAgICAgInRpbmVhIiwKICAgICAgInRpbmVkIiwKICAgICAgInRpbmVzIiwKICAgICAgInRpbmdlIiwKICAgICAgInRpbmdzIiwKICAgICAgInRpbmtzIiwKICAgICAgInRpbm55IiwKICAgICAgInRpbnRzIiwKICAgICAgInRpbnR5IiwKICAgICAgInRpcGlzIiwKICAgICAgInRpcHB5IiwKICAgICAgInRpcmVkIiwKICAgICAgInRpcmVzIiwKICAgICAgInRpcmxzIiwKICAgICAgInRpcm9zIiwKICAgICAgInRpcnJzIiwKICAgICAgInRpdGNoIiwKICAgICAgInRpdGVyIiwKICAgICAgInRpdGlzIiwKICAgICAgInRpdHJlIiwKICAgICAgInRpdHR5IiwKICAgICAgInRpdHVwIiwKICAgICAgInRpeWluIiwKICAgICAgInRpeW5zIiwKICAgICAgInRpemVzIiwKICAgICAgInRpenp5IiwKICAgICAgInRvYWRzIiwKICAgICAgInRvYWR5IiwKICAgICAgInRvYXplIiwKICAgICAgInRvY2tzIiwKICAgICAgInRvY2t5IiwKICAgICAgInRvY29zIiwKICAgICAgInRvZGRlIiwKICAgICAgInRvZWFzIiwKICAgICAgInRvZmZzIiwKICAgICAgInRvZmZ5IiwKICAgICAgInRvZnRzIiwKICAgICAgInRvZnVzIiwKICAgICAgInRvZ2FlIiwKICAgICAgInRvZ2FzIiwKICAgICAgInRvZ2VkIiwKICAgICAgInRvZ2VzIiwKICAgICAgInRvZ3VlIiwKICAgICAgInRvaG9zIiwKICAgICAgInRvaWxlIiwKICAgICAgInRvaWxzIiwKICAgICAgInRvaW5nIiwKICAgICAgInRvaXNlIiwKICAgICAgInRvaXRzIiwKICAgICAgInRva2F5IiwKICAgICAgInRva2VkIiwKICAgICAgInRva2VyIiwKICAgICAgInRva2VzIiwKICAgICAgInRva29zIiwKICAgICAgInRvbGFuIiwKICAgICAgInRvbGFyIiwKICAgICAgInRvbGFzIiwKICAgICAgInRvbGVkIiwKICAgICAgInRvbGVzIiwKICAgICAgInRvbGxzIiwKICAgICAgInRvbGx5IiwKICAgICAgInRvbHRzIiwKICAgICAgInRvbHVzIiwKICAgICAgInRvbHlsIiwKICAgICAgInRvbWFuIiwKICAgICAgInRvbWJzIiwKICAgICAgInRvbWVzIiwKICAgICAgInRvbWlhIiwKICAgICAgInRvbW15IiwKICAgICAgInRvbW9zIiwKICAgICAgInRvbmRpIiwKICAgICAgInRvbmRvIiwKICAgICAgInRvbmVkIiwKICAgICAgInRvbmVyIiwKICAgICAgInRvbmVzIiwKICAgICAgInRvbmV5IiwKICAgICAgInRvbmdzIiwKICAgICAgInRvbmthIiwKICAgICAgInRvbmtzIiwKICAgICAgInRvbm5lIiwKICAgICAgInRvbnVzIiwKICAgICAgInRvb2xzIiwKICAgICAgInRvb21zIiwKICAgICAgInRvb25zIiwKICAgICAgInRvb3RzIiwKICAgICAgInRvcGVkIiwKICAgICAgInRvcGVlIiwKICAgICAgInRvcGVrIiwKICAgICAgInRvcGVyIiwKICAgICAgInRvcGVzIiwKICAgICAgInRvcGhlIiwKICAgICAgInRvcGhpIiwKICAgICAgInRvcGhzIiwKICAgICAgInRvcGlzIiwKICAgICAgInRvcG9pIiwKICAgICAgInRvcG9zIiwKICAgICAgInRvcHB5IiwKICAgICAgInRvcXVlIiwKICAgICAgInRvcmFoIiwKICAgICAgInRvcmFuIiwKICAgICAgInRvcmFzIiwKICAgICAgInRvcmNzIiwKICAgICAgInRvcmVzIiwKICAgICAgInRvcmljIiwKICAgICAgInRvcmlpIiwKICAgICAgInRvcm9zIiwKICAgICAgInRvcm90IiwKICAgICAgInRvcnJzIiwKICAgICAgInRvcnNlIiwKICAgICAgInRvcnNpIiwKICAgICAgInRvcnNrIiwKICAgICAgInRvcnRhIiwKICAgICAgInRvcnRlIiwKICAgICAgInRvcnRzIiwKICAgICAgInRvc2FzIiwKICAgICAgInRvc2VkIiwKICAgICAgInRvc2VzIiwKICAgICAgInRvc2h5IiwKICAgICAgInRvc3N5IiwKICAgICAgInRvdGVkIiwKICAgICAgInRvdGVyIiwKICAgICAgInRvdGVzIiwKICAgICAgInRvdHR5IiwKICAgICAgInRvdWtzIiwKICAgICAgInRvdW5zIiwKICAgICAgInRvdXJzIiwKICAgICAgInRvdXNlIiwKICAgICAgInRvdXN5IiwKICAgICAgInRvdXRzIiwKICAgICAgInRvdXplIiwKICAgICAgInRvdXp5IiwKICAgICAgInRvd2VkIiwKICAgICAgInRvd2llIiwKICAgICAgInRvd25zIiwKICAgICAgInRvd255IiwKICAgICAgInRvd3NlIiwKICAgICAgInRvd3N5IiwKICAgICAgInRvd3RzIiwKICAgICAgInRvd3plIiwKICAgICAgInRvd3p5IiwKICAgICAgInRveWVkIiwKICAgICAgInRveWVyIiwKICAgICAgInRveW9uIiwKICAgICAgInRveW9zIiwKICAgICAgInRvemVkIiwKICAgICAgInRvemVzIiwKICAgICAgInRvemllIiwKICAgICAgInRyYWJzIiwKICAgICAgInRyYWRzIiwKICAgICAgInRyYWdpIiwKICAgICAgInRyYWlrIiwKICAgICAgInRyYW1zIiwKICAgICAgInRyYW5rIiwKICAgICAgInRyYW5xIiwKICAgICAgInRyYW5zIiwKICAgICAgInRyYW50IiwKICAgICAgInRyYXBlIiwKICAgICAgInRyYXBzIiwKICAgICAgInRyYXB0IiwKICAgICAgInRyYXNzIiwKICAgICAgInRyYXRzIiwKICAgICAgInRyYXR0IiwKICAgICAgInRyYXZlIiwKICAgICAgInRyYXlmIiwKICAgICAgInRyYXlzIiwKICAgICAgInRyZWNrIiwKICAgICAgInRyZWVkIiwKICAgICAgInRyZWVuIiwKICAgICAgInRyZWVzIiwKICAgICAgInRyZWZhIiwKICAgICAgInRyZWlmIiwKICAgICAgInRyZWtzIiwKICAgICAgInRyZW1hIiwKICAgICAgInRyZW1zIiwKICAgICAgInRyZXNzIiwKICAgICAgInRyZXN0IiwKICAgICAgInRyZXRzIiwKICAgICAgInRyZXdzIiwKICAgICAgInRyZXlmIiwKICAgICAgInRyZXlzIiwKICAgICAgInRyaWFjIiwKICAgICAgInRyaWRlIiwKICAgICAgInRyaWVyIiwKICAgICAgInRyaWVzIiwKICAgICAgInRyaWZmIiwKICAgICAgInRyaWdvIiwKICAgICAgInRyaWdzIiwKICAgICAgInRyaWtlIiwKICAgICAgInRyaWxkIiwKICAgICAgInRyaWxsIiwKICAgICAgInRyaW1zIiwKICAgICAgInRyaW5lIiwKICAgICAgInRyaW5zIiwKICAgICAgInRyaW9sIiwKICAgICAgInRyaW9yIiwKICAgICAgInRyaW9zIiwKICAgICAgInRyaXBzIiwKICAgICAgInRyaXB5IiwKICAgICAgInRyaXN0IiwKICAgICAgInRyb2FkIiwKICAgICAgInRyb2FrIiwKICAgICAgInRyb2F0IiwKICAgICAgInRyb2NrIiwKICAgICAgInRyb2RlIiwKICAgICAgInRyb2RzIiwKICAgICAgInRyb2dzIiwKICAgICAgInRyb2lzIiwKICAgICAgInRyb2tlIiwKICAgICAgInRyb21wIiwKICAgICAgInRyb25hIiwKICAgICAgInRyb25jIiwKICAgICAgInRyb25lIiwKICAgICAgInRyb25rIiwKICAgICAgInRyb25zIiwKICAgICAgInRyb296IiwKICAgICAgInRyb3RoIiwKICAgICAgInRyb3RzIiwKICAgICAgInRyb3dzIiwKICAgICAgInRyb3lzIiwKICAgICAgInRydWVkIiwKICAgICAgInRydWVzIiwKICAgICAgInRydWdvIiwKICAgICAgInRydWdzIiwKICAgICAgInRydWxsIiwKICAgICAgInRyeWVyIiwKICAgICAgInRyeWtlIiwKICAgICAgInRyeW1hIiwKICAgICAgInRyeXBzIiwKICAgICAgInRzYWRlIiwKICAgICAgInRzYWRpIiwKICAgICAgInRzYXJzIiwKICAgICAgInRza2VkIiwKICAgICAgInRzdWJhIiwKICAgICAgInRzdWJvIiwKICAgICAgInR1YW5zIiwKICAgICAgInR1YXJ0IiwKICAgICAgInR1YXRoIiwKICAgICAgInR1YmFlIiwKICAgICAgInR1YmFyIiwKICAgICAgInR1YmFzIiwKICAgICAgInR1YmJ5IiwKICAgICAgInR1YmVkIiwKICAgICAgInR1YmVzIiwKICAgICAgInR1Y2tzIiwKICAgICAgInR1ZmFzIiwKICAgICAgInR1ZmZlIiwKICAgICAgInR1ZmZzIiwKICAgICAgInR1ZnRzIiwKICAgICAgInR1ZnR5IiwKICAgICAgInR1Z3JhIiwKICAgICAgInR1aWxlIiwKICAgICAgInR1aW5hIiwKICAgICAgInR1aXNtIiwKICAgICAgInR1a3R1IiwKICAgICAgInR1bGVzIiwKICAgICAgInR1bHBhIiwKICAgICAgInR1bHNpIiwKICAgICAgInR1bWlkIiwKICAgICAgInR1bW15IiwKICAgICAgInR1bXBzIiwKICAgICAgInR1bXB5IiwKICAgICAgInR1bmFzIiwKICAgICAgInR1bmRzIiwKICAgICAgInR1bmVkIiwKICAgICAgInR1bmVyIiwKICAgICAgInR1bmVzIiwKICAgICAgInR1bmdzIiwKICAgICAgInR1bm55IiwKICAgICAgInR1cGVrIiwKICAgICAgInR1cGlrIiwKICAgICAgInR1cGxlIiwKICAgICAgInR1cXVlIiwKICAgICAgInR1cmRzIiwKICAgICAgInR1cmZzIiwKICAgICAgInR1cmZ5IiwKICAgICAgInR1cmtzIiwKICAgICAgInR1cm1lIiwKICAgICAgInR1cm1zIiwKICAgICAgInR1cm5zIiwKICAgICAgInR1cm50IiwKICAgICAgInR1cnBzIiwKICAgICAgInR1cnJzIiwKICAgICAgInR1c2h5IiwKICAgICAgInR1c2tzIiwKICAgICAgInR1c2t5IiwKICAgICAgInR1dGVlIiwKICAgICAgInR1dHRpIiwKICAgICAgInR1dHR5IiwKICAgICAgInR1dHVzIiwKICAgICAgInR1eGVzIiwKICAgICAgInR1eWVyIiwKICAgICAgInR3YWVzIiwKICAgICAgInR3YWluIiwKICAgICAgInR3YWxzIiwKICAgICAgInR3YW5rIiwKICAgICAgInR3YXRzIiwKICAgICAgInR3YXlzIiwKICAgICAgInR3ZWVsIiwKICAgICAgInR3ZWVuIiwKICAgICAgInR3ZWVwIiwKICAgICAgInR3ZWVyIiwKICAgICAgInR3ZXJrIiwKICAgICAgInR3ZXJwIiwKICAgICAgInR3aWVyIiwKICAgICAgInR3aWdzIiwKICAgICAgInR3aWxsIiwKICAgICAgInR3aWx0IiwKICAgICAgInR3aW5rIiwKICAgICAgInR3aW5zIiwKICAgICAgInR3aW55IiwKICAgICAgInR3aXJlIiwKICAgICAgInR3aXJwIiwKICAgICAgInR3aXRlIiwKICAgICAgInR3aXRzIiwKICAgICAgInR3b2VyIiwKICAgICAgInR3eWVyIiwKICAgICAgInR5ZWVzIiwKICAgICAgInR5ZXJzIiwKICAgICAgInR5aXluIiwKICAgICAgInR5a2VzIiwKICAgICAgInR5bGVyIiwKICAgICAgInR5bXBzIiwKICAgICAgInR5bmRlIiwKICAgICAgInR5bmVkIiwKICAgICAgInR5bmVzIiwKICAgICAgInR5cGFsIiwKICAgICAgInR5cGVkIiwKICAgICAgInR5cGVzIiwKICAgICAgInR5cGV5IiwKICAgICAgInR5cGljIiwKICAgICAgInR5cG9zIiwKICAgICAgInR5cHBzIiwKICAgICAgInR5cHRvIiwKICAgICAgInR5cmFuIiwKICAgICAgInR5cmVkIiwKICAgICAgInR5cmVzIiwKICAgICAgInR5cm9zIiwKICAgICAgInR5dGhlIiwKICAgICAgInR6YXJzIiwKICAgICAgInVkYWxzIiwKICAgICAgInVkb25zIiwKICAgICAgInVnYWxpIiwKICAgICAgInVnZ2VkIiwKICAgICAgInVobGFuIiwKICAgICAgInVodXJ1IiwKICAgICAgInVrYXNlIiwKICAgICAgInVsYW1hIiwKICAgICAgInVsYW5zIiwKICAgICAgInVsZW1hIiwKICAgICAgInVsbWluIiwKICAgICAgInVsbmFkIiwKICAgICAgInVsbmFlIiwKICAgICAgInVsbmFyIiwKICAgICAgInVsbmFzIiwKICAgICAgInVscGFuIiwKICAgICAgInVsdmFzIiwKICAgICAgInVseWllIiwKICAgICAgInVsemllIiwKICAgICAgInVtYW1pIiwKICAgICAgInVtYmVsIiwKICAgICAgInVtYmVyIiwKICAgICAgInVtYmxlIiwKICAgICAgInVtYm9zIiwKICAgICAgInVtYnJlIiwKICAgICAgInVtaWFjIiwKICAgICAgInVtaWFrIiwKICAgICAgInVtaWFxIiwKICAgICAgInVtbWFoIiwKICAgICAgInVtbWFzIiwKICAgICAgInVtbWVkIiwKICAgICAgInVtcGVkIiwKICAgICAgInVtcGhzIiwKICAgICAgInVtcGllIiwKICAgICAgInVtcHR5IiwKICAgICAgInVtcmFoIiwKICAgICAgInVtcmFzIiwKICAgICAgInVuYWlzIiwKICAgICAgInVuYXB0IiwKICAgICAgInVuYXJtIiwKICAgICAgInVuYXJ5IiwKICAgICAgInVuYXVzIiwKICAgICAgInVuYmFnIiwKICAgICAgInVuYmFuIiwKICAgICAgInVuYmFyIiwKICAgICAgInVuYmVkIiwKICAgICAgInVuYmlkIiwKICAgICAgInVuYm94IiwKICAgICAgInVuY2FwIiwKICAgICAgInVuY2VzIiwKICAgICAgInVuY2lhIiwKICAgICAgInVuY29zIiwKICAgICAgInVuY295IiwKICAgICAgInVuY3VzIiwKICAgICAgInVuZGFtIiwKICAgICAgInVuZGVlIiwKICAgICAgInVuZG9zIiwKICAgICAgInVuZHVnIiwKICAgICAgInVuZXRoIiwKICAgICAgInVuZml4IiwKICAgICAgInVuZ2FnIiwKICAgICAgInVuZ2V0IiwKICAgICAgInVuZ29kIiwKICAgICAgInVuZ290IiwKICAgICAgInVuZ3VtIiwKICAgICAgInVuaGF0IiwKICAgICAgInVuaGlwIiwKICAgICAgInVuaWNhIiwKICAgICAgInVuaXRzIiwKICAgICAgInVuamFtIiwKICAgICAgInVua2VkIiwKICAgICAgInVua2V0IiwKICAgICAgInVua2lkIiwKICAgICAgInVubGF3IiwKICAgICAgInVubGF5IiwKICAgICAgInVubGVkIiwKICAgICAgInVubGV0IiwKICAgICAgInVubGlkIiwKICAgICAgInVubWFuIiwKICAgICAgInVubWV3IiwKICAgICAgInVubWl4IiwKICAgICAgInVucGF5IiwKICAgICAgInVucGVnIiwKICAgICAgInVucGVuIiwKICAgICAgInVucGluIiwKICAgICAgInVucmVkIiwKICAgICAgInVucmlkIiwKICAgICAgInVucmlnIiwKICAgICAgInVucmlwIiwKICAgICAgInVuc2F3IiwKICAgICAgInVuc2F5IiwKICAgICAgInVuc2VlIiwKICAgICAgInVuc2V3IiwKICAgICAgInVuc2V4IiwKICAgICAgInVuc29kIiwKICAgICAgInVudGF4IiwKICAgICAgInVudGluIiwKICAgICAgInVud2V0IiwKICAgICAgInVud2l0IiwKICAgICAgInVud29uIiwKICAgICAgInVwYm93IiwKICAgICAgInVwYnllIiwKICAgICAgInVwZG9zIiwKICAgICAgInVwZHJ5IiwKICAgICAgInVwZW5kIiwKICAgICAgInVwamV0IiwKICAgICAgInVwbGF5IiwKICAgICAgInVwbGVkIiwKICAgICAgInVwbGl0IiwKICAgICAgInVwcGVkIiwKICAgICAgInVwcmFuIiwKICAgICAgInVwcnVuIiwKICAgICAgInVwc2VlIiwKICAgICAgInVwc2V5IiwKICAgICAgInVwdGFrIiwKICAgICAgInVwdGVyIiwKICAgICAgInVwdGllIiwKICAgICAgInVyYWVpIiwKICAgICAgInVyYWxpIiwKICAgICAgInVyYW9zIiwKICAgICAgInVyYXJlIiwKICAgICAgInVyYXJpIiwKICAgICAgInVyYXNlIiwKICAgICAgInVyYXRlIiwKICAgICAgInVyYmV4IiwKICAgICAgInVyYmlhIiwKICAgICAgInVyZGVlIiwKICAgICAgInVyZWFsIiwKICAgICAgInVyZWFzIiwKICAgICAgInVyZWRvIiwKICAgICAgInVyZWljIiwKICAgICAgInVyZW5hIiwKICAgICAgInVyZW50IiwKICAgICAgInVyZ2VkIiwKICAgICAgInVyZ2VyIiwKICAgICAgInVyZ2VzIiwKICAgICAgInVyaWFsIiwKICAgICAgInVyaXRlIiwKICAgICAgInVybWFuIiwKICAgICAgInVybmFsIiwKICAgICAgInVybmVkIiwKICAgICAgInVycGVkIiwKICAgICAgInVyc2FlIiwKICAgICAgInVyc2lkIiwKICAgICAgInVyc29uIiwKICAgICAgInVydWJ1IiwKICAgICAgInVydmFzIiwKICAgICAgInVzZXJzIiwKICAgICAgInVzbmVhIiwKICAgICAgInVzcXVlIiwKICAgICAgInVzdXJlIiwKICAgICAgInVzdXJ5IiwKICAgICAgInV0ZXJpIiwKICAgICAgInV2ZWFsIiwKICAgICAgInV2ZWFzIiwKICAgICAgInV2dWxhIiwKICAgICAgInZhY3VhIiwKICAgICAgInZhZGVkIiwKICAgICAgInZhZGVzIiwKICAgICAgInZhZ2FsIiwKICAgICAgInZhZ3VzIiwKICAgICAgInZhaWxzIiwKICAgICAgInZhaXJlIiwKICAgICAgInZhaXJzIiwKICAgICAgInZhaXJ5IiwKICAgICAgInZha2FzIiwKICAgICAgInZha2lsIiwKICAgICAgInZhbGVzIiwKICAgICAgInZhbGlzIiwKICAgICAgInZhbHNlIiwKICAgICAgInZhbXBzIiwKICAgICAgInZhbXB5IiwKICAgICAgInZhbmRhIiwKICAgICAgInZhbmVkIiwKICAgICAgInZhbmVzIiwKICAgICAgInZhbmdzIiwKICAgICAgInZhbnRzIiwKICAgICAgInZhcGVkIiwKICAgICAgInZhcGVyIiwKICAgICAgInZhcGVzIiwKICAgICAgInZhcmFuIiwKICAgICAgInZhcmFzIiwKICAgICAgInZhcmR5IiwKICAgICAgInZhcmVjIiwKICAgICAgInZhcmVzIiwKICAgICAgInZhcmlhIiwKICAgICAgInZhcml4IiwKICAgICAgInZhcm5hIiwKICAgICAgInZhcnVzIiwKICAgICAgInZhcnZlIiwKICAgICAgInZhc2FsIiwKICAgICAgInZhc2VzIiwKICAgICAgInZhc3RzIiwKICAgICAgInZhc3R5IiwKICAgICAgInZhdGljIiwKICAgICAgInZhdHVzIiwKICAgICAgInZhdWNoIiwKICAgICAgInZhdXRlIiwKICAgICAgInZhdXRzIiwKICAgICAgInZhd3RlIiwKICAgICAgInZheGVzIiwKICAgICAgInZlYWxlIiwKICAgICAgInZlYWxzIiwKICAgICAgInZlYWx5IiwKICAgICAgInZlZW5hIiwKICAgICAgInZlZXBzIiwKICAgICAgInZlZXJzIiwKICAgICAgInZlZXJ5IiwKICAgICAgInZlZ2FzIiwKICAgICAgInZlZ2VzIiwKICAgICAgInZlZ2llIiwKICAgICAgInZlZ29zIiwKICAgICAgInZlaG1lIiwKICAgICAgInZlaWxzIiwKICAgICAgInZlaWx5IiwKICAgICAgInZlaW5zIiwKICAgICAgInZlaW55IiwKICAgICAgInZlbGFyIiwKICAgICAgInZlbGRzIiwKICAgICAgInZlbGR0IiwKICAgICAgInZlbGVzIiwKICAgICAgInZlbGxzIiwKICAgICAgInZlbHVtIiwKICAgICAgInZlbmFlIiwKICAgICAgInZlbmFsIiwKICAgICAgInZlbmRzIiwKICAgICAgInZlbmR1IiwKICAgICAgInZlbmV5IiwKICAgICAgInZlbmdlIiwKICAgICAgInZlbmluIiwKICAgICAgInZlbnRzIiwKICAgICAgInZlbnVzIiwKICAgICAgInZlcmJzIiwKICAgICAgInZlcnJhIiwKICAgICAgInZlcnJ5IiwKICAgICAgInZlcnN0IiwKICAgICAgInZlcnRzIiwKICAgICAgInZlcnR1IiwKICAgICAgInZlc3BhIiwKICAgICAgInZlc3RhIiwKICAgICAgInZlc3RzIiwKICAgICAgInZldGNoIiwKICAgICAgInZleGVkIiwKICAgICAgInZleGVyIiwKICAgICAgInZleGVzIiwKICAgICAgInZleGlsIiwKICAgICAgInZlemlyIiwKICAgICAgInZpYWxzIiwKICAgICAgInZpYW5kIiwKICAgICAgInZpYmVzIiwKICAgICAgInZpYmV4IiwKICAgICAgInZpYmV5IiwKICAgICAgInZpY2VkIiwKICAgICAgInZpY2VzIiwKICAgICAgInZpY2h5IiwKICAgICAgInZpZXJzIiwKICAgICAgInZpZXdzIiwKICAgICAgInZpZXd5IiwKICAgICAgInZpZmRhIiwKICAgICAgInZpZmZzIiwKICAgICAgInZpZ2FzIiwKICAgICAgInZpZ2lhIiwKICAgICAgInZpbGRlIiwKICAgICAgInZpbGVyIiwKICAgICAgInZpbGxpIiwKICAgICAgInZpbGxzIiwKICAgICAgInZpbWVuIiwKICAgICAgInZpbmFsIiwKICAgICAgInZpbmFzIiwKICAgICAgInZpbmNhIiwKICAgICAgInZpbmVkIiwKICAgICAgInZpbmVyIiwKICAgICAgInZpbmVzIiwKICAgICAgInZpbmV3IiwKICAgICAgInZpbmljIiwKICAgICAgInZpbm9zIiwKICAgICAgInZpbnRzIiwKICAgICAgInZpb2xkIiwKICAgICAgInZpb2xzIiwKICAgICAgInZpcmVkIiwKICAgICAgInZpcmVvIiwKICAgICAgInZpcmVzIiwKICAgICAgInZpcmdhIiwKICAgICAgInZpcmdlIiwKICAgICAgInZpcmlkIiwKICAgICAgInZpcmxzIiwKICAgICAgInZpcnR1IiwKICAgICAgInZpc2FzIiwKICAgICAgInZpc2VkIiwKICAgICAgInZpc2VzIiwKICAgICAgInZpc2llIiwKICAgICAgInZpc25lIiwKICAgICAgInZpc29uIiwKICAgICAgInZpc3RvIiwKICAgICAgInZpdGFlIiwKICAgICAgInZpdGFzIiwKICAgICAgInZpdGV4IiwKICAgICAgInZpdHJvIiwKICAgICAgInZpdHRhIiwKICAgICAgInZpdmFzIiwKICAgICAgInZpdmF0IiwKICAgICAgInZpdmRhIiwKICAgICAgInZpdmVyIiwKICAgICAgInZpdmVzIiwKICAgICAgInZpemlyIiwKICAgICAgInZpem9yIiwKICAgICAgInZsZWlzIiwKICAgICAgInZsaWVzIiwKICAgICAgInZsb2dzIiwKICAgICAgInZvYXJzIiwKICAgICAgInZvY2FiIiwKICAgICAgInZvY2VzIiwKICAgICAgInZvZGR5IiwKICAgICAgInZvZG91IiwKICAgICAgInZvZHVuIiwKICAgICAgInZvZW1hIiwKICAgICAgInZvZ2llIiwKICAgICAgInZvaWRzIiwKICAgICAgInZvaWxlIiwKICAgICAgInZvaXBzIiwKICAgICAgInZvbGFlIiwKICAgICAgInZvbGFyIiwKICAgICAgInZvbGVkIiwKICAgICAgInZvbGVzIiwKICAgICAgInZvbGV0IiwKICAgICAgInZvbGtzIiwKICAgICAgInZvbHRhIiwKICAgICAgInZvbHRlIiwKICAgICAgInZvbHRpIiwKICAgICAgInZvbHRzIiwKICAgICAgInZvbHZhIiwKICAgICAgInZvbHZlIiwKICAgICAgInZvbWVyIiwKICAgICAgInZvdGVkIiwKICAgICAgInZvdGVzIiwKICAgICAgInZvdWdlIiwKICAgICAgInZvdWx1IiwKICAgICAgInZvd2VkIiwKICAgICAgInZvd2VyIiwKICAgICAgInZveGVsIiwKICAgICAgInZvemhkIiwKICAgICAgInZyYWljIiwKICAgICAgInZyaWxzIiwKICAgICAgInZyb29tIiwKICAgICAgInZyb3VzIiwKICAgICAgInZyb3V3IiwKICAgICAgInZyb3dzIiwKICAgICAgInZ1Z2dzIiwKICAgICAgInZ1Z2d5IiwKICAgICAgInZ1Z2hzIiwKICAgICAgInZ1Z2h5IiwKICAgICAgInZ1bGdvIiwKICAgICAgInZ1bG5zIiwKICAgICAgInZ1bHZhIiwKICAgICAgInZ1dHR5IiwKICAgICAgIndhYWNzIiwKICAgICAgIndhY2tlIiwKICAgICAgIndhY2tvIiwKICAgICAgIndhY2tzIiwKICAgICAgIndhZGRzIiwKICAgICAgIndhZGR5IiwKICAgICAgIndhZGVkIiwKICAgICAgIndhZGVyIiwKICAgICAgIndhZGVzIiwKICAgICAgIndhZGdlIiwKICAgICAgIndhZGlzIiwKICAgICAgIndhZHRzIiwKICAgICAgIndhZmZzIiwKICAgICAgIndhZnRzIiwKICAgICAgIndhZ2VkIiwKICAgICAgIndhZ2VzIiwKICAgICAgIndhZ2dhIiwKICAgICAgIndhZ3l1IiwKICAgICAgIndhaG9vIiwKICAgICAgIndhaWRlIiwKICAgICAgIndhaWZzIiwKICAgICAgIndhaWZ0IiwKICAgICAgIndhaWxzIiwKICAgICAgIndhaW5zIiwKICAgICAgIndhaXJzIiwKICAgICAgIndhaXRlIiwKICAgICAgIndhaXRzIiwKICAgICAgIndha2FzIiwKICAgICAgIndha2VkIiwKICAgICAgIndha2VuIiwKICAgICAgIndha2VyIiwKICAgICAgIndha2VzIiwKICAgICAgIndha2ZzIiwKICAgICAgIndhbGRvIiwKICAgICAgIndhbGRzIiwKICAgICAgIndhbGVkIiwKICAgICAgIndhbGVyIiwKICAgICAgIndhbGVzIiwKICAgICAgIndhbGllIiwKICAgICAgIndhbGlzIiwKICAgICAgIndhbGtzIiwKICAgICAgIndhbGxhIiwKICAgICAgIndhbGxzIiwKICAgICAgIndhbGx5IiwKICAgICAgIndhbHR5IiwKICAgICAgIndhbWVkIiwKICAgICAgIndhbWVzIiwKICAgICAgIndhbXVzIiwKICAgICAgIndhbmRzIiwKICAgICAgIndhbmVkIiwKICAgICAgIndhbmVzIiwKICAgICAgIndhbmV5IiwKICAgICAgIndhbmdzIiwKICAgICAgIndhbmtzIiwKICAgICAgIndhbmt5IiwKICAgICAgIndhbmxlIiwKICAgICAgIndhbmx5IiwKICAgICAgIndhbm5hIiwKICAgICAgIndhbnRzIiwKICAgICAgIndhbnR5IiwKICAgICAgIndhbnplIiwKICAgICAgIndhcWZzIiwKICAgICAgIndhcmJzIiwKICAgICAgIndhcmJ5IiwKICAgICAgIndhcmRzIiwKICAgICAgIndhcmVkIiwKICAgICAgIndhcmVzIiwKICAgICAgIndhcmV6IiwKICAgICAgIndhcmtzIiwKICAgICAgIndhcm1zIiwKICAgICAgIndhcm5zIiwKICAgICAgIndhcnBzIiwKICAgICAgIndhcnJlIiwKICAgICAgIndhcnN0IiwKICAgICAgIndhcnRzIiwKICAgICAgIndhc2VzIiwKICAgICAgIndhc2h5IiwKICAgICAgIndhc21zIiwKICAgICAgIndhc3BzIiwKICAgICAgIndhc3B5IiwKICAgICAgIndhc3RzIiwKICAgICAgIndhdGFwIiwKICAgICAgIndhdHRzIiwKICAgICAgIndhdWZmIiwKICAgICAgIndhdWdoIiwKICAgICAgIndhdWtzIiwKICAgICAgIndhdWxrIiwKICAgICAgIndhdWxzIiwKICAgICAgIndhdXJzIiwKICAgICAgIndhdmVkIiwKICAgICAgIndhdmVzIiwKICAgICAgIndhdmV5IiwKICAgICAgIndhd2FzIiwKICAgICAgIndhd2VzIiwKICAgICAgIndhd2xzIiwKICAgICAgIndheGVkIiwKICAgICAgIndheGVyIiwKICAgICAgIndheGVzIiwKICAgICAgIndheWVkIiwKICAgICAgIndhemlyIiwKICAgICAgIndhem9vIiwKICAgICAgIndlYWxkIiwKICAgICAgIndlYWxzIiwKICAgICAgIndlYW1iIiwKICAgICAgIndlYW5zIiwKICAgICAgIndlYXJzIiwKICAgICAgIndlYmJ5IiwKICAgICAgIndlYmVyIiwKICAgICAgIndlY2h0IiwKICAgICAgIndlZGVsIiwKICAgICAgIndlZGd5IiwKICAgICAgIndlZWRzIiwKICAgICAgIndlZWtlIiwKICAgICAgIndlZWtzIiwKICAgICAgIndlZWxzIiwKICAgICAgIndlZW1zIiwKICAgICAgIndlZW5zIiwKICAgICAgIndlZW55IiwKICAgICAgIndlZXBzIiwKICAgICAgIndlZXB5IiwKICAgICAgIndlZXN0IiwKICAgICAgIndlZXRlIiwKICAgICAgIndlZXRzIiwKICAgICAgIndlZnRlIiwKICAgICAgIndlZnRzIiwKICAgICAgIndlaWRzIiwKICAgICAgIndlaWxzIiwKICAgICAgIndlaXJzIiwKICAgICAgIndlaXNlIiwKICAgICAgIndlaXplIiwKICAgICAgIndla2FzIiwKICAgICAgIndlbGRzIiwKICAgICAgIndlbGtlIiwKICAgICAgIndlbGtzIiwKICAgICAgIndlbGt0IiwKICAgICAgIndlbGxzIiwKICAgICAgIndlbGx5IiwKICAgICAgIndlbHRzIiwKICAgICAgIndlbWJzIiwKICAgICAgIndlbmNoIiwKICAgICAgIndlbmRzIiwKICAgICAgIndlbmdlIiwKICAgICAgIndlbm55IiwKICAgICAgIndlbnRzIiwKICAgICAgIndlcm9zIiwKICAgICAgIndlcnNoIiwKICAgICAgIndlc3RzIiwKICAgICAgIndldGFzIiwKICAgICAgIndldGx5IiwKICAgICAgIndleGVkIiwKICAgICAgIndleGVzIiwKICAgICAgIndoYW1vIiwKICAgICAgIndoYW1zIiwKICAgICAgIndoYW5nIiwKICAgICAgIndoYXBzIiwKICAgICAgIndoYXJlIiwKICAgICAgIndoYXRhIiwKICAgICAgIndoYXRzIiwKICAgICAgIndoYXVwIiwKICAgICAgIndoYXVyIiwKICAgICAgIndoZWFsIiwKICAgICAgIndoZWFyIiwKICAgICAgIndoZWVuIiwKICAgICAgIndoZWVwIiwKICAgICAgIndoZWZ0IiwKICAgICAgIndoZWxrIiwKICAgICAgIndoZWxtIiwKICAgICAgIndoZW5zIiwKICAgICAgIndoZXRzIiwKICAgICAgIndoZXdzIiwKICAgICAgIndoZXlzIiwKICAgICAgIndoaWRzIiwKICAgICAgIndoaWZ0IiwKICAgICAgIndoaWdzIiwKICAgICAgIndoaWxrIiwKICAgICAgIndoaW1zIiwKICAgICAgIndoaW5zIiwKICAgICAgIndoaW9zIiwKICAgICAgIndoaXBzIiwKICAgICAgIndoaXB0IiwKICAgICAgIndoaXJyIiwKICAgICAgIndoaXJzIiwKICAgICAgIndoaXNoIiwKICAgICAgIndoaXNzIiwKICAgICAgIndoaXN0IiwKICAgICAgIndoaXRzIiwKICAgICAgIndoaXR5IiwKICAgICAgIndoaXp6IiwKICAgICAgIndob21wIiwKICAgICAgIndob29mIiwKICAgICAgIndob290IiwKICAgICAgIndob3BzIiwKICAgICAgIndob3JlIiwKICAgICAgIndob3JsIiwKICAgICAgIndob3J0IiwKICAgICAgIndob3NvIiwKICAgICAgIndob3dzIiwKICAgICAgIndodW1wIiwKICAgICAgIndodXBzIiwKICAgICAgIndoeWRhIiwKICAgICAgIndpY2NhIiwKICAgICAgIndpY2tzIiwKICAgICAgIndpY2t5IiwKICAgICAgIndpZGR5IiwKICAgICAgIndpZGVzIiwKICAgICAgIndpZWxzIiwKICAgICAgIndpZmVkIiwKICAgICAgIndpZmVzIiwKICAgICAgIndpZmV5IiwKICAgICAgIndpZmllIiwKICAgICAgIndpZnR5IiwKICAgICAgIndpZ2FuIiwKICAgICAgIndpZ2dhIiwKICAgICAgIndpZ2d5IiwKICAgICAgIndpa2lzIiwKICAgICAgIndpbGNvIiwKICAgICAgIndpbGRzIiwKICAgICAgIndpbGVkIiwKICAgICAgIndpbGVzIiwKICAgICAgIndpbGdhIiwKICAgICAgIndpbGlzIiwKICAgICAgIndpbGphIiwKICAgICAgIndpbGxzIiwKICAgICAgIndpbHRzIiwKICAgICAgIndpbXBzIiwKICAgICAgIndpbmRzIiwKICAgICAgIndpbmVkIiwKICAgICAgIndpbmVzIiwKICAgICAgIndpbmV5IiwKICAgICAgIndpbmdlIiwKICAgICAgIndpbmdzIiwKICAgICAgIndpbmd5IiwKICAgICAgIndpbmtzIiwKICAgICAgIndpbm5hIiwKICAgICAgIndpbm5zIiwKICAgICAgIndpbm9zIiwKICAgICAgIndpbnplIiwKICAgICAgIndpcGVkIiwKICAgICAgIndpcGVyIiwKICAgICAgIndpcGVzIiwKICAgICAgIndpcmVkIiwKICAgICAgIndpcmVyIiwKICAgICAgIndpcmVzIiwKICAgICAgIndpcnJhIiwKICAgICAgIndpc2VkIiwKICAgICAgIndpc2VzIiwKICAgICAgIndpc2hhIiwKICAgICAgIndpc2h0IiwKICAgICAgIndpc3BzIiwKICAgICAgIndpc3RzIiwKICAgICAgIndpdGFuIiwKICAgICAgIndpdGVkIiwKICAgICAgIndpdGVzIiwKICAgICAgIndpdGhlIiwKICAgICAgIndpdGhzIiwKICAgICAgIndpdGh5IiwKICAgICAgIndpdmVkIiwKICAgICAgIndpdmVyIiwKICAgICAgIndpdmVzIiwKICAgICAgIndpemVuIiwKICAgICAgIndpemVzIiwKICAgICAgIndvYWRzIiwKICAgICAgIndvYWxkIiwKICAgICAgIndvY2tzIiwKICAgICAgIndvZGdlIiwKICAgICAgIndvZnVsIiwKICAgICAgIndvanVzIiwKICAgICAgIndva2VyIiwKICAgICAgIndva2thIiwKICAgICAgIndvbGRzIiwKICAgICAgIndvbGZzIiwKICAgICAgIndvbGx5IiwKICAgICAgIndvbHZlIiwKICAgICAgIndvbWJzIiwKICAgICAgIndvbWJ5IiwKICAgICAgIndvbXluIiwKICAgICAgIndvbmdhIiwKICAgICAgIndvbmdpIiwKICAgICAgIndvbmtzIiwKICAgICAgIndvbmt5IiwKICAgICAgIndvbnRzIiwKICAgICAgIndvb2RzIiwKICAgICAgIndvb2VkIiwKICAgICAgIndvb2ZzIiwKICAgICAgIndvb2Z5IiwKICAgICAgIndvb2xkIiwKICAgICAgIndvb2xzIiwKICAgICAgIndvb25zIiwKICAgICAgIndvb3BzIiwKICAgICAgIndvb3B5IiwKICAgICAgIndvb3NlIiwKICAgICAgIndvb3NoIiwKICAgICAgIndvb3R6IiwKICAgICAgIndvcmRzIiwKICAgICAgIndvcmtzIiwKICAgICAgIndvcm1zIiwKICAgICAgIndvcm15IiwKICAgICAgIndvcnRzIiwKICAgICAgIndvd2VkIiwKICAgICAgIndvd2VlIiwKICAgICAgIndveGVuIiwKICAgICAgIndyYW5nIiwKICAgICAgIndyYXBzIiwKICAgICAgIndyYXB0IiwKICAgICAgIndyYXN0IiwKICAgICAgIndyYXRlIiwKICAgICAgIndyYXdsIiwKICAgICAgIndyZW5zIiwKICAgICAgIndyaWNrIiwKICAgICAgIndyaWVkIiwKICAgICAgIndyaWVyIiwKICAgICAgIndyaWVzIiwKICAgICAgIndyaXRzIiwKICAgICAgIndyb2tlIiwKICAgICAgIndyb290IiwKICAgICAgIndyb3RoIiwKICAgICAgIndyeWVyIiwKICAgICAgInd1ZGR5IiwKICAgICAgInd1ZHVzIiwKICAgICAgInd1bGxzIiwKICAgICAgInd1cnN0IiwKICAgICAgInd1c2VzIiwKICAgICAgInd1c2h1IiwKICAgICAgInd1c3N5IiwKICAgICAgInd1eGlhIiwKICAgICAgInd5bGVkIiwKICAgICAgInd5bGVzIiwKICAgICAgInd5bmRzIiwKICAgICAgInd5bm5zIiwKICAgICAgInd5dGVkIiwKICAgICAgInd5dGVzIiwKICAgICAgInhlYmVjIiwKICAgICAgInhlbmlhIiwKICAgICAgInhlbmljIiwKICAgICAgInhlbm9uIiwKICAgICAgInhlcmljIiwKICAgICAgInhlcm94IiwKICAgICAgInhlcnVzIiwKICAgICAgInhvYW5hIiwKICAgICAgInhyYXlzIiwKICAgICAgInh5bGFuIiwKICAgICAgInh5bGVtIiwKICAgICAgInh5bGljIiwKICAgICAgInh5bG9sIiwKICAgICAgInh5bHlsIiwKICAgICAgInh5c3RpIiwKICAgICAgInh5c3RzIiwKICAgICAgInlhYXJzIiwKICAgICAgInlhYmFzIiwKICAgICAgInlhYmJhIiwKICAgICAgInlhYmJ5IiwKICAgICAgInlhY2NhIiwKICAgICAgInlhY2thIiwKICAgICAgInlhY2tzIiwKICAgICAgInlhZmZzIiwKICAgICAgInlhZ2VyIiwKICAgICAgInlhZ2VzIiwKICAgICAgInlhZ2lzIiwKICAgICAgInlhaG9vIiwKICAgICAgInlhaXJkIiwKICAgICAgInlha2thIiwKICAgICAgInlha293IiwKICAgICAgInlhbGVzIiwKICAgICAgInlhbWVuIiwKICAgICAgInlhbXB5IiwKICAgICAgInlhbXVuIiwKICAgICAgInlhbmdzIiwKICAgICAgInlhbmtzIiwKICAgICAgInlhcG9rIiwKICAgICAgInlhcG9uIiwKICAgICAgInlhcHBzIiwKICAgICAgInlhcHB5IiwKICAgICAgInlhcmFrIiwKICAgICAgInlhcmNvIiwKICAgICAgInlhcmRzIiwKICAgICAgInlhcmVyIiwKICAgICAgInlhcmZhIiwKICAgICAgInlhcmtzIiwKICAgICAgInlhcm5zIiwKICAgICAgInlhcnJzIiwKICAgICAgInlhcnRhIiwKICAgICAgInlhcnRvIiwKICAgICAgInlhdGVzIiwKICAgICAgInlhdWRzIiwKICAgICAgInlhdWxkIiwKICAgICAgInlhdXBzIiwKICAgICAgInlhd2VkIiwKICAgICAgInlhd2V5IiwKICAgICAgInlhd2xzIiwKICAgICAgInlhd25zIiwKICAgICAgInlhd255IiwKICAgICAgInlhd3BzIiwKICAgICAgInlib3JlIiwKICAgICAgInljbGFkIiwKICAgICAgInljbGVkIiwKICAgICAgInljb25kIiwKICAgICAgInlkcmFkIiwKICAgICAgInlkcmVkIiwKICAgICAgInllYWRzIiwKICAgICAgInllYWhzIiwKICAgICAgInllYWxtIiwKICAgICAgInllYW5zIiwKICAgICAgInllYXJkIiwKICAgICAgInllYXJzIiwKICAgICAgInllY2NoIiwKICAgICAgInllY2hzIiwKICAgICAgInllY2h5IiwKICAgICAgInllZGVzIiwKICAgICAgInllZWRzIiwKICAgICAgInllZXNoIiwKICAgICAgInllZ2dzIiwKICAgICAgInllbGtzIiwKICAgICAgInllbGxzIiwKICAgICAgInllbG1zIiwKICAgICAgInllbHBzIiwKICAgICAgInllbHRzIiwKICAgICAgInllbnRhIiwKICAgICAgInllbnRlIiwKICAgICAgInllcmJhIiwKICAgICAgInllcmRzIiwKICAgICAgInllcmtzIiwKICAgICAgInllc2VzIiwKICAgICAgInllc2tzIiwKICAgICAgInllc3RzIiwKICAgICAgInllc3R5IiwKICAgICAgInlldGlzIiwKICAgICAgInlldHRzIiwKICAgICAgInlldWtzIiwKICAgICAgInlldWt5IiwKICAgICAgInlldmVuIiwKICAgICAgInlldmVzIiwKICAgICAgInlld2VuIiwKICAgICAgInlleGVkIiwKICAgICAgInlleGVzIiwKICAgICAgInlmZXJlIiwKICAgICAgInlpa2VkIiwKICAgICAgInlpa2VzIiwKICAgICAgInlpbGxzIiwKICAgICAgInlpbmNlIiwKICAgICAgInlpcGVzIiwKICAgICAgInlpcHB5IiwKICAgICAgInlpcmRzIiwKICAgICAgInlpcmtzIiwKICAgICAgInlpcnJzIiwKICAgICAgInlpcnRoIiwKICAgICAgInlpdGVzIiwKICAgICAgInlpdGllIiwKICAgICAgInlsZW1zIiwKICAgICAgInlsaWtlIiwKICAgICAgInlsa2VzIiwKICAgICAgInltb2x0IiwKICAgICAgInltcGVzIiwKICAgICAgInlvYmJvIiwKICAgICAgInlvYmJ5IiwKICAgICAgInlvY2tzIiwKICAgICAgInlvZGVsIiwKICAgICAgInlvZGhzIiwKICAgICAgInlvZGxlIiwKICAgICAgInlvZ2FzIiwKICAgICAgInlvZ2VlIiwKICAgICAgInlvZ2hzIiwKICAgICAgInlvZ2ljIiwKICAgICAgInlvZ2luIiwKICAgICAgInlvZ2lzIiwKICAgICAgInlvaWNrIiwKICAgICAgInlvamFuIiwKICAgICAgInlva2VkIiwKICAgICAgInlva2VsIiwKICAgICAgInlva2VyIiwKICAgICAgInlva2VzIiwKICAgICAgInlva3VsIiwKICAgICAgInlvbGtzIiwKICAgICAgInlvbGt5IiwKICAgICAgInlvbWltIiwKICAgICAgInlvbXBzIiwKICAgICAgInlvbmljIiwKICAgICAgInlvbmlzIiwKICAgICAgInlvbmtzIiwKICAgICAgInlvb2ZzIiwKICAgICAgInlvb3BzIiwKICAgICAgInlvcmVzIiwKICAgICAgInlvcmtzIiwKICAgICAgInlvcnBzIiwKICAgICAgInlvdWtzIiwKICAgICAgInlvdXJuIiwKICAgICAgInlvdXJzIiwKICAgICAgInlvdXJ0IiwKICAgICAgInlvdXNlIiwKICAgICAgInlvd2VkIiwKICAgICAgInlvd2VzIiwKICAgICAgInlvd2llIiwKICAgICAgInlvd2xzIiwKICAgICAgInlvd3phIiwKICAgICAgInlyYXB0IiwKICAgICAgInlyZW50IiwKICAgICAgInlyaXZkIiwKICAgICAgInlybmVoIiwKICAgICAgInlzYW1lIiwKICAgICAgInl0b3N0IiwKICAgICAgInl1YW5zIiwKICAgICAgInl1Y2FzIiwKICAgICAgInl1Y2NhIiwKICAgICAgInl1Y2NoIiwKICAgICAgInl1Y2tvIiwKICAgICAgInl1Y2tzIiwKICAgICAgInl1Y2t5IiwKICAgICAgInl1ZnRzIiwKICAgICAgInl1Z2FzIiwKICAgICAgInl1a2VkIiwKICAgICAgInl1a2VzIiwKICAgICAgInl1a2t5IiwKICAgICAgInl1a29zIiwKICAgICAgInl1bGFuIiwKICAgICAgInl1bGVzIiwKICAgICAgInl1bW1vIiwKICAgICAgInl1bW15IiwKICAgICAgInl1bXBzIiwKICAgICAgInl1cG9uIiwKICAgICAgInl1cHB5IiwKICAgICAgInl1cnRhIiwKICAgICAgInl1cnRzIiwKICAgICAgInl1enVzIiwKICAgICAgInphYnJhIiwKICAgICAgInphY2tzIiwKICAgICAgInphaWRhIiwKICAgICAgInphaWR5IiwKICAgICAgInphaXJlIiwKICAgICAgInpha2F0IiwKICAgICAgInphbWFuIiwKICAgICAgInphbWJvIiwKICAgICAgInphbWlhIiwKICAgICAgInphbmphIiwKICAgICAgInphbnRlIiwKICAgICAgInphbnphIiwKICAgICAgInphbnplIiwKICAgICAgInphcHB5IiwKICAgICAgInphcmZzIiwKICAgICAgInphcmlzIiwKICAgICAgInphdGlzIiwKICAgICAgInpheGVzIiwKICAgICAgInpheWluIiwKICAgICAgInphemVuIiwKICAgICAgInplYWxzIiwKICAgICAgInplYmVjIiwKICAgICAgInplYnViIiwKICAgICAgInplYnVzIiwKICAgICAgInplZGFzIiwKICAgICAgInplaW5zIiwKICAgICAgInplbmRvIiwKICAgICAgInplcmRhIiwKICAgICAgInplcmtzIiwKICAgICAgInplcm9zIiwKICAgICAgInplc3RzIiwKICAgICAgInpldGFzIiwKICAgICAgInpleGVzIiwKICAgICAgInplemVzIiwKICAgICAgInpob21vIiwKICAgICAgInppYmV0IiwKICAgICAgInppZmZzIiwKICAgICAgInppZ2FuIiwKICAgICAgInppbGFzIiwKICAgICAgInppbGNoIiwKICAgICAgInppbGxhIiwKICAgICAgInppbGxzIiwKICAgICAgInppbWJpIiwKICAgICAgInppbWJzIiwKICAgICAgInppbmNvIiwKICAgICAgInppbmNzIiwKICAgICAgInppbmN5IiwKICAgICAgInppbmViIiwKICAgICAgInppbmVzIiwKICAgICAgInppbmdzIiwKICAgICAgInppbmd5IiwKICAgICAgInppbmtlIiwKICAgICAgInppbmt5IiwKICAgICAgInppcHBvIiwKICAgICAgInppcHB5IiwKICAgICAgInppcmFtIiwKICAgICAgInppdGlzIiwKICAgICAgInppemVsIiwKICAgICAgInppeml0IiwKICAgICAgInpsb3RlIiwKICAgICAgInpsb3R5IiwKICAgICAgInpvYWVhIiwKICAgICAgInpvYm9zIiwKICAgICAgInpvYnVzIiwKICAgICAgInpvY2NvIiwKICAgICAgInpvZWFlIiwKICAgICAgInpvZWFsIiwKICAgICAgInpvZWFzIiwKICAgICAgInpvaXNtIiwKICAgICAgInpvaXN0IiwKICAgICAgInpvbWJpIiwKICAgICAgInpvbmFlIiwKICAgICAgInpvbmRhIiwKICAgICAgInpvbmVkIiwKICAgICAgInpvbmVyIiwKICAgICAgInpvbmVzIiwKICAgICAgInpvbmtzIiwKICAgICAgInpvb2VhIiwKICAgICAgInpvb2V5IiwKICAgICAgInpvb2lkIiwKICAgICAgInpvb2tzIiwKICAgICAgInpvb21zIiwKICAgICAgInpvb25zIiwKICAgICAgInpvb3R5IiwKICAgICAgInpvcHBhIiwKICAgICAgInpvcHBvIiwKICAgICAgInpvcmlsIiwKICAgICAgInpvcmlzIiwKICAgICAgInpvcnJvIiwKICAgICAgInpvdWtzIiwKICAgICAgInpvd2VlIiwKICAgICAgInpvd2llIiwKICAgICAgInp1bHVzIiwKICAgICAgInp1cGFuIiwKICAgICAgInp1cGFzIiwKICAgICAgInp1cHBhIiwKICAgICAgInp1cmZzIiwKICAgICAgInp1emltIiwKICAgICAgInp5Z2FsIiwKICAgICAgInp5Z29uIiwKICAgICAgInp5bWVzIiwKICAgICAgInp5bWljIiwKICAgIF07CiAgdmFyIHdlID0geyB1bmtub3duOiAwLCBhYnNlbnQ6IDEsIHByZXNlbnQ6IDIsIGNvcnJlY3Q6IDMgfTsKICB2YXIga2UgPSBuZXcgRGF0ZSgyMDIxLCA1LCAxOSwgMCwgMCwgMCwgMCk7CgogIGZ1bmN0aW9uIF9lKGUsIHQpIHsKICAgIChlID0gbmV3IERhdGUoZSkpLAogICAgICAoZSA9IG5ldyBEYXRlKHQpLnNldEhvdXJzKDAsIDAsIDAsIDApIC0gZS5zZXRIb3VycygwLCAwLCAwLCAwKSk7CiAgICByZXR1cm4gTWF0aC5yb3VuZChlIC8gODY0ZTUpOwogIH0KCiAgZnVuY3Rpb24gdmUoZSkgewogICAgcmV0dXJuIF9lKGtlLCBlKTsKICB9CgogIGZ1bmN0aW9uIHhlKGUpIHsKICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gIiI7CiAgICBlICU9IGhlLmxlbmd0aDsKICAgIHJldHVybiBoZVtlXTsKICB9CgogIHZhciBTZSA9ICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIsCiAgICBjZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmFwaTsKICAgIH0sCiAgICB1ZSA9IG4uY3JlYXRlU2VsZWN0b3IoY2UsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLm1vb2dsZUdldDsKICAgIH0pLAogICAgRWUgPSBuLmNyZWF0ZVNlbGVjdG9yKHVlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5vcHRlZEluOwogICAgfSksCiAgICBqZSA9IG4uY3JlYXRlU2VsZWN0b3IoY2UsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLm1vb2dsZUdldC5lcnJvcjsKICAgIH0pLAogICAgemUgPSBuLmNyZWF0ZVNlbGVjdG9yKGNlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5hcHBMb2FkZWQ7CiAgICB9KSwKICAgIEEgPSBuLmNyZWF0ZVNlbGVjdG9yKGNlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5tb29nbGVHZXQuaXNMb2FkaW5nOwogICAgfSksCiAgICB1ZSA9IG4uY3JlYXRlU2VsZWN0b3IoY2UsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLm1vb2dsZUdldC5kYXRhOwogICAgfSksCiAgICBOZSA9IG4uY3JlYXRlU2VsZWN0b3IodWUsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBudWxsID09IGUgPyB2b2lkIDAgOiBlLmdhbWVfZGF0YTsKICAgIH0pLAogICAgQ2UgPSBuLmNyZWF0ZVNlbGVjdG9yKHVlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gbnVsbCA9PSBlID8gdm9pZCAwIDogZS50aW1lc3RhbXA7CiAgICB9KSwKICAgIEFlID0gbi5jcmVhdGVTZWxlY3Rvcih1ZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUudXNlcl9pZDsKICAgIH0pLAogICAgT2UgPSBuLmNyZWF0ZVNlbGVjdG9yKFtFZSwgQWUsIENlXSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgcmV0dXJuIGUgJiYgISF0ICYmICFuOwogICAgfSksCiAgICBJZSA9CiAgICAgIChuLmNyZWF0ZVNlbGVjdG9yKGNlLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLm1vb2dsZVBvc3QuaXNMb2FkaW5nOwogICAgICB9KSwKICAgICAgbi5jcmVhdGVTZWxlY3RvcihjZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5tb29nbGVQb3N0LmVycm9yOwogICAgICB9KSksCiAgICBMZSA9IG4uY3JlYXRlU2VsZWN0b3IoY2UsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLm1vb2dsZVBvc3QubGFzdEZhaWxlZFNhdmVEYXRhOwogICAgfSksCiAgICBUZSA9IG4uY3JlYXRlU2VsZWN0b3IoY2UsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLnByb2ZpbGVJbmZvLmRhdGE7CiAgICB9KSwKICAgIFBlID0gbi5jcmVhdGVTZWxlY3RvcihjZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUucHJvZmlsZUluZm8uaXNMb2FkaW5nOwogICAgfSksCiAgICB1ZSA9CiAgICAgIChuLmNyZWF0ZVNlbGVjdG9yKGNlLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLnByb2ZpbGVJbmZvLmVycm9yOwogICAgICB9KSwKICAgICAgbi5jcmVhdGVTZWxlY3RvcihjZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gbnVsbCA9PSBlID8gdm9pZCAwIDogZS5zb2x1dGlvbjsKICAgICAgfSkpLAogICAgY2UgPSBuLmNyZWF0ZVNlbGVjdG9yKHVlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gbnVsbCA9PSBlID8gdm9pZCAwIDogZS5pc0xvYWRpbmc7CiAgICB9KSwKICAgIHVlID0gbi5jcmVhdGVTZWxlY3Rvcih1ZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZGF0YTsKICAgIH0pLAogICAgTWUgPSBuLmNyZWF0ZVNlbGVjdG9yKHVlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuaWQpIHx8IDA7CiAgICB9KSwKICAgIEJlID0gbi5jcmVhdGVTZWxlY3Rvcih1ZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIChudWxsID09IGUgPyB2b2lkIDAgOiBlLnNvbHV0aW9uKSB8fCAiIjsKICAgIH0pLAogICAgUmUgPSBuLmNyZWF0ZVNlbGVjdG9yKHVlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZGF5T2Zmc2V0KSB8fCAwOwogICAgfSksCiAgICBXZSA9CiAgICAgIChuLmNyZWF0ZVNlbGVjdG9yKFtjZSwgQSwgUGVdLCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgIHJldHVybiBlIHx8IHQgfHwgbjsKICAgICAgfSksCiAgICAgIDYpLAogICAgSGUgPSA1LAogICAgRGUgPSBbIkdlbml1cyIsICJNYWduaWZpY2VudCIsICJJbXByZXNzaXZlIiwgIlNwbGVuZGlkIiwgIkdyZWF0IiwgIlBoZXciXSwKICAgIHVlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUucGVyc2lzdC5nYW1lOwogICAgfSwKICAgIHFlID0gbi5jcmVhdGVTZWxlY3Rvcih1ZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUuYm9hcmRTdGF0ZTsKICAgIH0pLAogICAgR2UgPSBuLmNyZWF0ZVNlbGVjdG9yKHVlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5zdGF0dXM7CiAgICB9KSwKICAgIEZlID0gbi5jcmVhdGVTZWxlY3Rvcih1ZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUuY3VycmVudFJvd0luZGV4OwogICAgfSksCiAgICBWZSA9IG4uY3JlYXRlU2VsZWN0b3IoW3FlLCBGZV0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiBlW3RdOwogICAgfSksCiAgICBZZSA9IG4uY3JlYXRlU2VsZWN0b3IodWUsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmRheU9mZnNldCB8fCBudWxsOwogICAgfSksCiAgICBVZSA9CiAgICAgIChuLmNyZWF0ZVNlbGVjdG9yKHVlLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmlkOwogICAgICB9KSwKICAgICAgbi5jcmVhdGVTZWxlY3Rvcih1ZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS50aW1lc3RhbXBzLmxhc3RQbGF5ZWQ7CiAgICAgIH0pKSwKICAgIFplID0gbi5jcmVhdGVTZWxlY3Rvcih1ZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUudGltZXN0YW1wcy5sYXN0Q29tcGxldGVkOwogICAgfSksCiAgICBYZSA9IG4uY3JlYXRlU2VsZWN0b3IoW3FlLCBGZSwgQmVdLCBmdW5jdGlvbiAoZSwgbiwgYSkgewogICAgICByZXR1cm4gZS5tYXAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICByZXR1cm4gbiA8PSB0CiAgICAgICAgICA/IG51bGwKICAgICAgICAgIDogKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgIHZhciBuID0gQXJyYXkodC5sZW5ndGgpLmZpbGwoImFic2VudCIpLAogICAgICAgICAgICAgICAgICBhID0gQXJyYXkodC5sZW5ndGgpLmZpbGwoITApLAogICAgICAgICAgICAgICAgICBvID0gQXJyYXkodC5sZW5ndGgpLmZpbGwoITApLAogICAgICAgICAgICAgICAgICByID0gMDsKICAgICAgICAgICAgICAgIHIgPCBlLmxlbmd0aDsKICAgICAgICAgICAgICAgIHIgKz0gMQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVbcl0gPT09IHRbcl0gJiYKICAgICAgICAgICAgICAgICAgb1tyXSAmJgogICAgICAgICAgICAgICAgICAoKG5bcl0gPSAiY29ycmVjdCIpLCAoYVtyXSA9ICExKSwgKG9bcl0gPSAhMSkpOwogICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgZS5sZW5ndGg7IHMgKz0gMSkgewogICAgICAgICAgICAgICAgdmFyIGkgPSBlW3NdOwogICAgICAgICAgICAgICAgaWYgKGFbc10pCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdC5sZW5ndGg7IGwgKz0gMSkgewogICAgICAgICAgICAgICAgICAgIHZhciBjID0gdFtsXTsKICAgICAgICAgICAgICAgICAgICBpZiAob1tsXSAmJiBpID09PSBjKSB7CiAgICAgICAgICAgICAgICAgICAgICAobltzXSA9ICJwcmVzZW50IiksIChvW2xdID0gITEpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgICB9KShlLCBhKTsKICAgICAgfSk7CiAgICB9KSwKICAgIEtlID0gIm55dC13b3JkbGUtc3RhdGlzdGljcyIsCiAgICBKZSA9IHsKICAgICAgY3VycmVudFN0cmVhazogMCwKICAgICAgbWF4U3RyZWFrOiAwLAogICAgICBndWVzc2VzOiB7IDE6IDAsIDI6IDAsIDM6IDAsIDQ6IDAsIDU6IDAsIDY6IDAsIGZhaWw6IDAgfSwKICAgICAgd2luUGVyY2VudGFnZTogMCwKICAgICAgZ2FtZXNQbGF5ZWQ6IDAsCiAgICAgIGdhbWVzV29uOiAwLAogICAgICBhdmVyYWdlR3Vlc3NlczogMCwKICAgIH07CgogIGZ1bmN0aW9uIFFlKGUsIHQpIHsKICAgIHJldHVybiBlID09PSB0IHx8IChlICE9IGUgJiYgdCAhPSB0KTsKICB9CgogIGZ1bmN0aW9uICRlKGUsIHQpIHsKICAgIGZvciAodmFyIG4gPSBlLmxlbmd0aDsgbi0tOyApIGlmIChRZShlW25dWzBdLCB0KSkgcmV0dXJuIG47CiAgICByZXR1cm4gLTE7CiAgfQoKICB2YXIgZXQgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlOwoKICBmdW5jdGlvbiB0dChlKSB7CiAgICB2YXIgdCA9IC0xLAogICAgICBuID0gbnVsbCA9PSBlID8gMCA6IGUubGVuZ3RoOwogICAgZm9yICh0aGlzLmNsZWFyKCk7ICsrdCA8IG47ICkgewogICAgICB2YXIgYSA9IGVbdF07CiAgICAgIHRoaXMuc2V0KGFbMF0sIGFbMV0pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbnQoZSkgewogICAgcmV0dXJuIChudCA9CiAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yCiAgICAgICAgPyBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZW9mIGU7CiAgICAgICAgICB9CiAgICAgICAgOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJgogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJgogICAgICAgICAgICAgIGUuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJgogICAgICAgICAgICAgIGUgIT09IFN5bWJvbC5wcm90b3R5cGUKICAgICAgICAgICAgICA/ICJzeW1ib2wiCiAgICAgICAgICAgICAgOiB0eXBlb2YgZTsKICAgICAgICAgIH0pKGUpOwogIH0KCiAgKHR0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICh0aGlzLl9fZGF0YV9fID0gW10pLCAodGhpcy5zaXplID0gMCk7CiAgfSksCiAgICAodHQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gdGhpcy5fX2RhdGFfXzsKICAgICAgcmV0dXJuICgKICAgICAgICAhKChlID0gJGUodCwgZSkpIDwgMCkgJiYKICAgICAgICAoZSA9PSB0Lmxlbmd0aCAtIDEgPyB0LnBvcCgpIDogZXQuY2FsbCh0LCBlLCAxKSwgLS10aGlzLnNpemUsICEwKQogICAgICApOwogICAgfSksCiAgICAodHQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gdGhpcy5fX2RhdGFfXzsKICAgICAgcmV0dXJuIChlID0gJGUodCwgZSkpIDwgMCA/IHZvaWQgMCA6IHRbZV1bMV07CiAgICB9KSwKICAgICh0dC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIC0xIDwgJGUodGhpcy5fX2RhdGFfXywgZSk7CiAgICB9KSwKICAgICh0dC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4gPSB0aGlzLl9fZGF0YV9fLAogICAgICAgIGEgPSAkZShuLCBlKTsKICAgICAgcmV0dXJuIGEgPCAwID8gKCsrdGhpcy5zaXplLCBuLnB1c2goW2UsIHRdKSkgOiAoblthXVsxXSA9IHQpLCB0aGlzOwogICAgfSk7CiAgY2UgPQogICAgIm9iamVjdCIgPT0gKCJ1bmRlZmluZWQiID09IHR5cGVvZiBnbG9iYWwgPyAidW5kZWZpbmVkIiA6IG50KGdsb2JhbCkpICYmCiAgICBnbG9iYWwgJiYKICAgIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJgogICAgZ2xvYmFsOwoKICBmdW5jdGlvbiBhdChlKSB7CiAgICByZXR1cm4gKGF0ID0KICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IKICAgICAgICA/IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZTsKICAgICAgICAgIH0KICAgICAgICA6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlICYmCiAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICAgICAgZS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmCiAgICAgICAgICAgICAgZSAhPT0gU3ltYm9sLnByb3RvdHlwZQogICAgICAgICAgICAgID8gInN5bWJvbCIKICAgICAgICAgICAgICA6IHR5cGVvZiBlOwogICAgICAgICAgfSkoZSk7CiAgfQoKICB2YXIgQSA9CiAgICAgICJvYmplY3QiID09ICgidW5kZWZpbmVkIiA9PSB0eXBlb2Ygc2VsZiA/ICJ1bmRlZmluZWQiIDogYXQoc2VsZikpICYmCiAgICAgIHNlbGYgJiYKICAgICAgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJgogICAgICBzZWxmLAogICAgb3QgPSBjZSB8fCBBIHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCksCiAgICB1ZSA9IG90LlN5bWJvbCwKICAgIEEgPSBPYmplY3QucHJvdG90eXBlLAogICAgcnQgPSBBLmhhc093blByb3BlcnR5LAogICAgc3QgPSBBLnRvU3RyaW5nLAogICAgaXQgPSB1ZSA/IHVlLnRvU3RyaW5nVGFnIDogdm9pZCAwOwogIHZhciBsdCA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CiAgdmFyIGN0ID0gIltvYmplY3QgTnVsbF0iLAogICAgdXQgPSAiW29iamVjdCBVbmRlZmluZWRdIiwKICAgIGR0ID0gdWUgPyB1ZS50b1N0cmluZ1RhZyA6IHZvaWQgMDsKCiAgZnVuY3Rpb24gbXQoZSkgewogICAgcmV0dXJuIG51bGwgPT0gZQogICAgICA/IHZvaWQgMCA9PT0gZQogICAgICAgID8gdXQKICAgICAgICA6IGN0CiAgICAgIDogZHQgJiYgZHQgaW4gT2JqZWN0KGUpCiAgICAgID8gKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCA9IHJ0LmNhbGwoZSwgaXQpLAogICAgICAgICAgICBuID0gZVtpdF07CiAgICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgYSA9ICEoZVtpdF0gPSB2b2lkIDApOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIHZhciBvID0gc3QuY2FsbChlKTsKICAgICAgICAgIHJldHVybiBhICYmICh0ID8gKGVbaXRdID0gbikgOiBkZWxldGUgZVtpdF0pLCBvOwogICAgICAgIH0pKGUpCiAgICAgIDogbHQuY2FsbChlKTsKICB9CgogIGZ1bmN0aW9uIHB0KGUpIHsKICAgIHJldHVybiAocHQgPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIGZ1bmN0aW9uIHl0KGUpIHsKICAgIHZhciB0ID0gcHQoZSk7CiAgICByZXR1cm4gbnVsbCAhPSBlICYmICgib2JqZWN0IiA9PSB0IHx8ICJmdW5jdGlvbiIgPT0gdCk7CiAgfQoKICB2YXIgZ3QgPSAiW29iamVjdCBBc3luY0Z1bmN0aW9uXSIsCiAgICBmdCA9ICJbb2JqZWN0IEZ1bmN0aW9uXSIsCiAgICBodCA9ICJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSIsCiAgICBidCA9ICJbb2JqZWN0IFByb3h5XSI7CgogIGZ1bmN0aW9uIHd0KGUpIHsKICAgIGlmICh5dChlKSkgewogICAgICBlID0gbXQoZSk7CiAgICAgIHJldHVybiBlID09IGZ0IHx8IGUgPT0gaHQgfHwgZSA9PSBndCB8fCBlID09IGJ0OwogICAgfQogIH0KCiAgdmFyIEEgPSBvdFsiX19jb3JlLWpzX3NoYXJlZF9fIl0sCiAgICBrdCA9ICh1ZSA9IC9bXi5dKyQvLmV4ZWMoKEEgJiYgQS5rZXlzICYmIEEua2V5cy5JRV9QUk9UTykgfHwgIiIpKQogICAgICA/ICJTeW1ib2woc3JjKV8xLiIgKyB1ZQogICAgICA6ICIiOwogIHZhciBfdCA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZzsKICB2YXIgdnQgPSAvXlxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXF0kLywKICAgIEEgPSBGdW5jdGlvbi5wcm90b3R5cGUsCiAgICB1ZSA9IE9iamVjdC5wcm90b3R5cGUsCiAgICBBID0gQS50b1N0cmluZywKICAgIHVlID0gdWUuaGFzT3duUHJvcGVydHksCiAgICB4dCA9IFJlZ0V4cCgKICAgICAgIl4iICsKICAgICAgICBBLmNhbGwodWUpCiAgICAgICAgICAucmVwbGFjZSgvW1xcXiQuKis/KClbXF17fXxdL2csICJcXCQmIikKICAgICAgICAgIC5yZXBsYWNlKAogICAgICAgICAgICAvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywKICAgICAgICAgICAgIiQxLio/IgogICAgICAgICAgKSArCiAgICAgICAgIiQiCiAgICApOwoKICBmdW5jdGlvbiBTdChlKSB7CiAgICB2YXIgdDsKICAgIHJldHVybiAoCiAgICAgIHl0KGUpICYmCiAgICAgICgodCA9IGUpLCAhKGt0ICYmIGt0IGluIHQpKSAmJgogICAgICAod3QoZSkgPyB4dCA6IHZ0KS50ZXN0KAogICAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKG51bGwgIT0gZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJldHVybiBfdC5jYWxsKGUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJldHVybiBlICsgIiI7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfSkoZSkKICAgICAgKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIEV0KGUsIHQpIHsKICAgICh0ID0gdCksICh0ID0gbnVsbCA9PSAoZSA9IGUpID8gdm9pZCAwIDogZVt0XSk7CiAgICByZXR1cm4gU3QodCkgPyB0IDogdm9pZCAwOwogIH0KCiAgdmFyIGp0ID0gRXQob3QsICJNYXAiKSwKICAgIHp0ID0gRXQoT2JqZWN0LCAiY3JlYXRlIik7CiAgdmFyIE50ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKICB2YXIgQ3QgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiBBdChlKSB7CiAgICB2YXIgdCA9IC0xLAogICAgICBuID0gbnVsbCA9PSBlID8gMCA6IGUubGVuZ3RoOwogICAgZm9yICh0aGlzLmNsZWFyKCk7ICsrdCA8IG47ICkgewogICAgICB2YXIgYSA9IGVbdF07CiAgICAgIHRoaXMuc2V0KGFbMF0sIGFbMV0pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gT3QoZSkgewogICAgcmV0dXJuIChPdCA9CiAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yCiAgICAgICAgPyBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZW9mIGU7CiAgICAgICAgICB9CiAgICAgICAgOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJgogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJgogICAgICAgICAgICAgIGUuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJgogICAgICAgICAgICAgIGUgIT09IFN5bWJvbC5wcm90b3R5cGUKICAgICAgICAgICAgICA/ICJzeW1ib2wiCiAgICAgICAgICAgICAgOiB0eXBlb2YgZTsKICAgICAgICAgIH0pKGUpOwogIH0KCiAgZnVuY3Rpb24gSXQoZSwgdCkgewogICAgdmFyIG4sCiAgICAgIGEgPSBlLl9fZGF0YV9fOwogICAgcmV0dXJuICgKICAgICAgInN0cmluZyIgPT0gKGUgPSBPdCgobiA9IHQpKSkgfHwKICAgICAgIm51bWJlciIgPT0gZSB8fAogICAgICAic3ltYm9sIiA9PSBlIHx8CiAgICAgICJib29sZWFuIiA9PSBlCiAgICAgICAgPyAiX19wcm90b19fIiAhPT0gbgogICAgICAgIDogbnVsbCA9PT0gbgogICAgKQogICAgICA/IGFbInN0cmluZyIgPT0gdHlwZW9mIHQgPyAic3RyaW5nIiA6ICJoYXNoIl0KICAgICAgOiBhLm1hcDsKICB9CgogIGZ1bmN0aW9uIEx0KGUpIHsKICAgIHZhciB0ID0gLTEsCiAgICAgIG4gPSBudWxsID09IGUgPyAwIDogZS5sZW5ndGg7CiAgICBmb3IgKHRoaXMuY2xlYXIoKTsgKyt0IDwgbjsgKSB7CiAgICAgIHZhciBhID0gZVt0XTsKICAgICAgdGhpcy5zZXQoYVswXSwgYVsxXSk7CiAgICB9CiAgfQoKICAoQXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgKHRoaXMuX19kYXRhX18gPSB6dCA/IHp0KG51bGwpIDoge30pLCAodGhpcy5zaXplID0gMCk7CiAgfSksCiAgICAoQXQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgKGUgPSB0aGlzLmhhcyhlKSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1tlXSksCiAgICAgICAgKHRoaXMuc2l6ZSAtPSBlID8gMSA6IDApLAogICAgICAgIGUKICAgICAgKTsKICAgIH0pLAogICAgKEF0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IHRoaXMuX19kYXRhX187CiAgICAgIGlmICh6dCkgewogICAgICAgIHZhciBuID0gdFtlXTsKICAgICAgICByZXR1cm4gIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iID09PSBuID8gdm9pZCAwIDogbjsKICAgICAgfQogICAgICByZXR1cm4gTnQuY2FsbCh0LCBlKSA/IHRbZV0gOiB2b2lkIDA7CiAgICB9KSwKICAgIChBdC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSB0aGlzLl9fZGF0YV9fOwogICAgICByZXR1cm4genQgPyB2b2lkIDAgIT09IHRbZV0gOiBDdC5jYWxsKHQsIGUpOwogICAgfSksCiAgICAoQXQucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHZhciBuID0gdGhpcy5fX2RhdGFfXzsKICAgICAgcmV0dXJuICgKICAgICAgICAodGhpcy5zaXplICs9IHRoaXMuaGFzKGUpID8gMCA6IDEpLAogICAgICAgIChuW2VdID0genQgJiYgdm9pZCAwID09PSB0ID8gIl9fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18iIDogdCksCiAgICAgICAgdGhpcwogICAgICApOwogICAgfSksCiAgICAoTHQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgICAodGhpcy5zaXplID0gMCksCiAgICAgICAgKHRoaXMuX19kYXRhX18gPSB7CiAgICAgICAgICBoYXNoOiBuZXcgQXQoKSwKICAgICAgICAgIG1hcDogbmV3IChqdCB8fCB0dCkoKSwKICAgICAgICAgIHN0cmluZzogbmV3IEF0KCksCiAgICAgICAgfSk7CiAgICB9KSwKICAgIChMdC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIChlID0gSXQodGhpcywgZSkuZGVsZXRlKGUpKSwgKHRoaXMuc2l6ZSAtPSBlID8gMSA6IDApLCBlOwogICAgfSksCiAgICAoTHQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBJdCh0aGlzLCBlKS5nZXQoZSk7CiAgICB9KSwKICAgIChMdC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIEl0KHRoaXMsIGUpLmhhcyhlKTsKICAgIH0pLAogICAgKEx0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiA9IEl0KHRoaXMsIGUpLAogICAgICAgIGEgPSBuLnNpemU7CiAgICAgIHJldHVybiBuLnNldChlLCB0KSwgKHRoaXMuc2l6ZSArPSBuLnNpemUgPT0gYSA/IDAgOiAxKSwgdGhpczsKICAgIH0pOwoKICBmdW5jdGlvbiBUdChlKSB7CiAgICBlID0gdGhpcy5fX2RhdGFfXyA9IG5ldyB0dChlKTsKICAgIHRoaXMuc2l6ZSA9IGUuc2l6ZTsKICB9CgogIChUdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7CiAgICAodGhpcy5fX2RhdGFfXyA9IG5ldyB0dCgpKSwgKHRoaXMuc2l6ZSA9IDApOwogIH0pLAogICAgKFR0LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IHRoaXMuX19kYXRhX18sCiAgICAgICAgZSA9IHQuZGVsZXRlKGUpOwogICAgICByZXR1cm4gKHRoaXMuc2l6ZSA9IHQuc2l6ZSksIGU7CiAgICB9KSwKICAgIChUdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGUpOwogICAgfSksCiAgICAoVHQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhlKTsKICAgIH0pLAogICAgKFR0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiA9IHRoaXMuX19kYXRhX187CiAgICAgIGlmIChuIGluc3RhbmNlb2YgdHQpIHsKICAgICAgICB2YXIgYSA9IG4uX19kYXRhX187CiAgICAgICAgaWYgKCFqdCB8fCBhLmxlbmd0aCA8IDE5OSkKICAgICAgICAgIHJldHVybiBhLnB1c2goW2UsIHRdKSwgKHRoaXMuc2l6ZSA9ICsrbi5zaXplKSwgdGhpczsKICAgICAgICBuID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBMdChhKTsKICAgICAgfQogICAgICByZXR1cm4gbi5zZXQoZSwgdCksICh0aGlzLnNpemUgPSBuLnNpemUpLCB0aGlzOwogICAgfSk7CiAgdmFyIFB0ID0gKGZ1bmN0aW9uICgpIHsKICAgIHRyeSB7CiAgICAgIHZhciBlID0gRXQoT2JqZWN0LCAiZGVmaW5lUHJvcGVydHkiKTsKICAgICAgcmV0dXJuIGUoe30sICIiLCB7fSksIGU7CiAgICB9IGNhdGNoIChlKSB7fQogIH0pKCk7CgogIGZ1bmN0aW9uIE10KGUsIHQsIG4pIHsKICAgICJfX3Byb3RvX18iID09IHQgJiYgUHQKICAgICAgPyBQdChlLCB0LCB7IGNvbmZpZ3VyYWJsZTogITAsIGVudW1lcmFibGU6ICEwLCB2YWx1ZTogbiwgd3JpdGFibGU6ICEwIH0pCiAgICAgIDogKGVbdF0gPSBuKTsKICB9CgogIGZ1bmN0aW9uIEJ0KGUsIHQsIG4pIHsKICAgICgodm9pZCAwID09PSBuIHx8IFFlKGVbdF0sIG4pKSAmJiAodm9pZCAwICE9PSBuIHx8IHQgaW4gZSkpIHx8IE10KGUsIHQsIG4pOwogIH0KCiAgdmFyIFJ0LAogICAgV3QgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICBmb3IgKHZhciBhID0gLTEsIG8gPSBPYmplY3QoZSksIHIgPSBuKGUpLCBzID0gci5sZW5ndGg7IHMtLTsgKSB7CiAgICAgICAgdmFyIGkgPSByW1J0ID8gcyA6ICsrYV07CiAgICAgICAgaWYgKCExID09PSB0KG9baV0sIGksIG8pKSBicmVhazsKICAgICAgfQogICAgICByZXR1cm4gZTsKICAgIH07CgogIGZ1bmN0aW9uIEh0KGUpIHsKICAgIHJldHVybiAoSHQgPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIHZhciBBID0KICAgICAgIm9iamVjdCIgPT0gKCJ1bmRlZmluZWQiID09IHR5cGVvZiBleHBvcnRzID8gInVuZGVmaW5lZCIgOiBIdChleHBvcnRzKSkgJiYKICAgICAgZXhwb3J0cyAmJgogICAgICAhZXhwb3J0cy5ub2RlVHlwZSAmJgogICAgICBleHBvcnRzLAogICAgdWUgPQogICAgICBBICYmCiAgICAgICJvYmplY3QiID09ICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgbW9kdWxlID8gInVuZGVmaW5lZCIgOiBIdChtb2R1bGUpKSAmJgogICAgICBtb2R1bGUgJiYKICAgICAgIW1vZHVsZS5ub2RlVHlwZSAmJgogICAgICBtb2R1bGUsCiAgICB1ZSA9IHVlICYmIHVlLmV4cG9ydHMgPT09IEEgPyBvdC5CdWZmZXIgOiB2b2lkIDAsCiAgICBEdCA9IHVlID8gdWUuYWxsb2NVbnNhZmUgOiB2b2lkIDA7CiAgdmFyIHF0ID0gb3QuVWludDhBcnJheTsKCiAgZnVuY3Rpb24gR3QoZSwgdCkgewogICAgdmFyIG4sCiAgICAgIG4gPSB0CiAgICAgICAgPyAoKHQgPSBlLmJ1ZmZlciksCiAgICAgICAgICAobiA9IG5ldyB0LmNvbnN0cnVjdG9yKHQuYnl0ZUxlbmd0aCkpLAogICAgICAgICAgbmV3IHF0KG4pLnNldChuZXcgcXQodCkpLAogICAgICAgICAgbikKICAgICAgICA6IGUuYnVmZmVyOwogICAgcmV0dXJuIG5ldyBlLmNvbnN0cnVjdG9yKG4sIGUuYnl0ZU9mZnNldCwgZS5sZW5ndGgpOwogIH0KCiAgdmFyIEZ0ID0gT2JqZWN0LmNyZWF0ZSwKICAgIFZ0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKCF5dChlKSkgcmV0dXJuIHt9OwogICAgICBpZiAoRnQpIHJldHVybiBGdChlKTsKICAgICAgWXQucHJvdG90eXBlID0gZTsKICAgICAgZSA9IG5ldyBZdCgpOwogICAgICByZXR1cm4gKFl0LnByb3RvdHlwZSA9IHZvaWQgMCksIGU7CiAgICB9OwoKICBmdW5jdGlvbiBZdCgpIHt9CgogIHZhciBVdCwKICAgIFp0LAogICAgWHQgPQogICAgICAoKFV0ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKSwKICAgICAgKFp0ID0gT2JqZWN0KSwKICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gVXQoWnQoZSkpOwogICAgICB9KSwKICAgIEt0ID0gT2JqZWN0LnByb3RvdHlwZTsKCiAgZnVuY3Rpb24gSnQoZSkgewogICAgdmFyIHQgPSBlICYmIGUuY29uc3RydWN0b3I7CiAgICByZXR1cm4gZSA9PT0gKCgiZnVuY3Rpb24iID09IHR5cGVvZiB0ICYmIHQucHJvdG90eXBlKSB8fCBLdCk7CiAgfQoKICBmdW5jdGlvbiBRdChlKSB7CiAgICByZXR1cm4gKFF0ID0KICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IKICAgICAgICA/IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZTsKICAgICAgICAgIH0KICAgICAgICA6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlICYmCiAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICAgICAgZS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmCiAgICAgICAgICAgICAgZSAhPT0gU3ltYm9sLnByb3RvdHlwZQogICAgICAgICAgICAgID8gInN5bWJvbCIKICAgICAgICAgICAgICA6IHR5cGVvZiBlOwogICAgICAgICAgfSkoZSk7CiAgfQoKICBmdW5jdGlvbiAkdChlKSB7CiAgICByZXR1cm4gbnVsbCAhPSBlICYmICJvYmplY3QiID09IFF0KGUpOwogIH0KCiAgZnVuY3Rpb24gZW4oZSkgewogICAgcmV0dXJuICR0KGUpICYmICJbb2JqZWN0IEFyZ3VtZW50c10iID09IG10KGUpOwogIH0KCiAgdmFyIEEgPSBPYmplY3QucHJvdG90eXBlLAogICAgdG4gPSBBLmhhc093blByb3BlcnR5LAogICAgbm4gPSBBLnByb3BlcnR5SXNFbnVtZXJhYmxlLAogICAgYW4gPSBlbigKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzOwogICAgICB9KSgpCiAgICApCiAgICAgID8gZW4KICAgICAgOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICR0KGUpICYmIHRuLmNhbGwoZSwgImNhbGxlZSIpICYmICFubi5jYWxsKGUsICJjYWxsZWUiKTsKICAgICAgICB9LAogICAgb24gPSBBcnJheS5pc0FycmF5LAogICAgcm4gPSA5MDA3MTk5MjU0NzQwOTkxOwoKICBmdW5jdGlvbiBzbihlKSB7CiAgICByZXR1cm4gIm51bWJlciIgPT0gdHlwZW9mIGUgJiYgLTEgPCBlICYmIGUgJSAxID09IDAgJiYgZSA8PSBybjsKICB9CgogIGZ1bmN0aW9uIGxuKGUpIHsKICAgIHJldHVybiBudWxsICE9IGUgJiYgc24oZS5sZW5ndGgpICYmICF3dChlKTsKICB9CgogIGZ1bmN0aW9uIGNuKGUpIHsKICAgIHJldHVybiAoY24gPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIHZhciB1ZSA9CiAgICAgICJvYmplY3QiID09ICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgZXhwb3J0cyA/ICJ1bmRlZmluZWQiIDogY24oZXhwb3J0cykpICYmCiAgICAgIGV4cG9ydHMgJiYKICAgICAgIWV4cG9ydHMubm9kZVR5cGUgJiYKICAgICAgZXhwb3J0cywKICAgIEEgPQogICAgICB1ZSAmJgogICAgICAib2JqZWN0IiA9PSAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIG1vZHVsZSA/ICJ1bmRlZmluZWQiIDogY24obW9kdWxlKSkgJiYKICAgICAgbW9kdWxlICYmCiAgICAgICFtb2R1bGUubm9kZVR5cGUgJiYKICAgICAgbW9kdWxlLAogICAgQSA9IEEgJiYgQS5leHBvcnRzID09PSB1ZSA/IG90LkJ1ZmZlciA6IHZvaWQgMCwKICAgIHVuID0KICAgICAgKEEgPyBBLmlzQnVmZmVyIDogdm9pZCAwKSB8fAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9LAogICAgZG4gPSAiW29iamVjdCBPYmplY3RdIiwKICAgIHVlID0gRnVuY3Rpb24ucHJvdG90eXBlLAogICAgQSA9IE9iamVjdC5wcm90b3R5cGUsCiAgICBtbiA9IHVlLnRvU3RyaW5nLAogICAgcG4gPSBBLmhhc093blByb3BlcnR5LAogICAgeW4gPSBtbi5jYWxsKE9iamVjdCk7CiAgdmFyIGduID0ge307CgogIGZ1bmN0aW9uIGZuKGUpIHsKICAgIHJldHVybiAoZm4gPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIChnblsiW29iamVjdCBGbG9hdDMyQXJyYXldIl0gPQogICAgZ25bIltvYmplY3QgRmxvYXQ2NEFycmF5XSJdID0KICAgIGduWyJbb2JqZWN0IEludDhBcnJheV0iXSA9CiAgICBnblsiW29iamVjdCBJbnQxNkFycmF5XSJdID0KICAgIGduWyJbb2JqZWN0IEludDMyQXJyYXldIl0gPQogICAgZ25bIltvYmplY3QgVWludDhBcnJheV0iXSA9CiAgICBnblsiW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0iXSA9CiAgICBnblsiW29iamVjdCBVaW50MTZBcnJheV0iXSA9CiAgICBnblsiW29iamVjdCBVaW50MzJBcnJheV0iXSA9CiAgICAgICEwKSwKICAgIChnblsiW29iamVjdCBBcmd1bWVudHNdIl0gPQogICAgICBnblsiW29iamVjdCBBcnJheV0iXSA9CiAgICAgIGduWyJbb2JqZWN0IEFycmF5QnVmZmVyXSJdID0KICAgICAgZ25bIltvYmplY3QgQm9vbGVhbl0iXSA9CiAgICAgIGduWyJbb2JqZWN0IERhdGFWaWV3XSJdID0KICAgICAgZ25bIltvYmplY3QgRGF0ZV0iXSA9CiAgICAgIGduWyJbb2JqZWN0IEVycm9yXSJdID0KICAgICAgZ25bIltvYmplY3QgRnVuY3Rpb25dIl0gPQogICAgICBnblsiW29iamVjdCBNYXBdIl0gPQogICAgICBnblsiW29iamVjdCBOdW1iZXJdIl0gPQogICAgICBnblsiW29iamVjdCBPYmplY3RdIl0gPQogICAgICBnblsiW29iamVjdCBSZWdFeHBdIl0gPQogICAgICBnblsiW29iamVjdCBTZXRdIl0gPQogICAgICBnblsiW29iamVjdCBTdHJpbmddIl0gPQogICAgICBnblsiW29iamVjdCBXZWFrTWFwXSJdID0KICAgICAgICAhMSk7CiAgdmFyIGhuLAogICAgdWUgPQogICAgICAib2JqZWN0IiA9PSAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGV4cG9ydHMgPyAidW5kZWZpbmVkIiA6IGZuKGV4cG9ydHMpKSAmJgogICAgICBleHBvcnRzICYmCiAgICAgICFleHBvcnRzLm5vZGVUeXBlICYmCiAgICAgIGV4cG9ydHMsCiAgICBibiA9CiAgICAgIHVlICYmCiAgICAgICJvYmplY3QiID09ICgidW5kZWZpbmVkIiA9PSB0eXBlb2YgbW9kdWxlID8gInVuZGVmaW5lZCIgOiBmbihtb2R1bGUpKSAmJgogICAgICBtb2R1bGUgJiYKICAgICAgIW1vZHVsZS5ub2RlVHlwZSAmJgogICAgICBtb2R1bGUsCiAgICB3biA9IGJuICYmIGJuLmV4cG9ydHMgPT09IHVlICYmIGNlLnByb2Nlc3MsCiAgICBBID0gKGZ1bmN0aW9uICgpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgZSA9IGJuICYmIGJuLnJlcXVpcmUgJiYgYm4ucmVxdWlyZSgidXRpbCIpLnR5cGVzOwogICAgICAgIHJldHVybiBlID8gZSA6IHduICYmIHduLmJpbmRpbmcgJiYgd24uYmluZGluZygidXRpbCIpOwogICAgICB9IGNhdGNoIChlKSB7fQogICAgfSkoKSwKICAgIHVlID0gQSAmJiBBLmlzVHlwZWRBcnJheSwKICAgIGtuID0gdWUKICAgICAgPyAoKGhuID0gdWUpLAogICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gaG4oZSk7CiAgICAgICAgfSkKICAgICAgOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICR0KGUpICYmIHNuKGUubGVuZ3RoKSAmJiAhIWduW210KGUpXTsKICAgICAgICB9OwoKICBmdW5jdGlvbiBfbihlLCB0KSB7CiAgICBpZiAoKCJjb25zdHJ1Y3RvciIgIT09IHQgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgZVt0XSkgJiYgIl9fcHJvdG9fXyIgIT0gdCkKICAgICAgcmV0dXJuIGVbdF07CiAgfQoKICB2YXIgdm4gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiB4bihlLCB0LCBuLCBhKSB7CiAgICB2YXIgbyA9ICFuOwogICAgbiA9IG4gfHwge307CiAgICBmb3IgKHZhciByLCBzLCBpID0gLTEsIGwgPSB0Lmxlbmd0aDsgKytpIDwgbDsgKSB7CiAgICAgIHZhciBjID0gdFtpXSwKICAgICAgICB1ID0gYSA/IGEobltjXSwgZVtjXSwgYywgbiwgZSkgOiB2b2lkIDA7CiAgICAgIHZvaWQgMCA9PT0gdSAmJiAodSA9IGVbY10pLAogICAgICAgIG8KICAgICAgICAgID8gTXQobiwgYywgdSkKICAgICAgICAgIDogKChyID0gdSksCiAgICAgICAgICAgIChzID0gdm9pZCAwKSwKICAgICAgICAgICAgKHMgPSAodSA9IG4pWyhjID0gYyldKSwKICAgICAgICAgICAgKHZuLmNhbGwodSwgYykgJiYgUWUocywgcikgJiYgKHZvaWQgMCAhPT0gciB8fCBjIGluIHUpKSB8fAogICAgICAgICAgICAgIE10KHUsIGMsIHIpKTsKICAgIH0KICAgIHJldHVybiBuOwogIH0KCiAgZnVuY3Rpb24gU24oZSkgewogICAgcmV0dXJuIChTbiA9CiAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yCiAgICAgICAgPyBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gdHlwZW9mIGU7CiAgICAgICAgICB9CiAgICAgICAgOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJgogICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJgogICAgICAgICAgICAgIGUuY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJgogICAgICAgICAgICAgIGUgIT09IFN5bWJvbC5wcm90b3R5cGUKICAgICAgICAgICAgICA/ICJzeW1ib2wiCiAgICAgICAgICAgICAgOiB0eXBlb2YgZTsKICAgICAgICAgIH0pKGUpOwogIH0KCiAgdmFyIEVuID0gOTAwNzE5OTI1NDc0MDk5MSwKICAgIGpuID0gL14oPzowfFsxLTldXGQqKSQvOwoKICBmdW5jdGlvbiB6bihlLCB0KSB7CiAgICB2YXIgbiA9IFNuKGUpOwogICAgcmV0dXJuICgKICAgICAgKHQgPSBudWxsID09IHQgPyBFbiA6IHQpICYmCiAgICAgICgibnVtYmVyIiA9PSBuIHx8ICgic3ltYm9sIiAhPSBuICYmIGpuLnRlc3QoZSkpKSAmJgogICAgICAtMSA8IGUgJiYKICAgICAgZSAlIDEgPT0gMCAmJgogICAgICBlIDwgdAogICAgKTsKICB9CgogIHZhciBObiA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7CgogIGZ1bmN0aW9uIENuKGUsIHQpIHsKICAgIHZhciBuLAogICAgICBhID0gb24oZSksCiAgICAgIG8gPSAhYSAmJiBhbihlKSwKICAgICAgciA9ICFhICYmICFvICYmIHVuKGUpLAogICAgICBzID0gIWEgJiYgIW8gJiYgIXIgJiYga24oZSksCiAgICAgIGkgPSBhIHx8IG8gfHwgciB8fCBzLAogICAgICBsID0gaQogICAgICAgID8gKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSAtMSwgYSA9IEFycmF5KGUpOyArK24gPCBlOyApIGFbbl0gPSB0KG4pOwogICAgICAgICAgICByZXR1cm4gYTsKICAgICAgICAgIH0pKGUubGVuZ3RoLCBTdHJpbmcpCiAgICAgICAgOiBbXSwKICAgICAgYyA9IGwubGVuZ3RoOwogICAgZm9yIChuIGluIGUpCiAgICAgICghdCAmJiAhTm4uY2FsbChlLCBuKSkgfHwKICAgICAgICAoaSAmJgogICAgICAgICAgKCJsZW5ndGgiID09IG4gfHwKICAgICAgICAgICAgKHIgJiYgKCJvZmZzZXQiID09IG4gfHwgInBhcmVudCIgPT0gbikpIHx8CiAgICAgICAgICAgIChzICYmICgiYnVmZmVyIiA9PSBuIHx8ICJieXRlTGVuZ3RoIiA9PSBuIHx8ICJieXRlT2Zmc2V0IiA9PSBuKSkgfHwKICAgICAgICAgICAgem4obiwgYykpKSB8fAogICAgICAgIGwucHVzaChuKTsKICAgIHJldHVybiBsOwogIH0KCiAgdmFyIEFuID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTsKCiAgZnVuY3Rpb24gT24oZSkgewogICAgaWYgKCF5dChlKSkKICAgICAgcmV0dXJuIChmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gW107CiAgICAgICAgaWYgKG51bGwgIT0gZSkgZm9yICh2YXIgbiBpbiBPYmplY3QoZSkpIHQucHVzaChuKTsKICAgICAgICByZXR1cm4gdDsKICAgICAgfSkoZSk7CiAgICB2YXIgdCwKICAgICAgbiA9IEp0KGUpLAogICAgICBhID0gW107CiAgICBmb3IgKHQgaW4gZSkgKCJjb25zdHJ1Y3RvciIgIT0gdCB8fCAoIW4gJiYgQW4uY2FsbChlLCB0KSkpICYmIGEucHVzaCh0KTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gSW4oZSkgewogICAgcmV0dXJuIGxuKGUpID8gQ24oZSwgITApIDogT24oZSk7CiAgfQoKICBmdW5jdGlvbiBMbihlLCB0LCBuLCBhLCBvLCByLCBzKSB7CiAgICB2YXIgaSwKICAgICAgbCwKICAgICAgYywKICAgICAgdSA9IF9uKGUsIG4pLAogICAgICBkID0gX24odCwgbiksCiAgICAgIG0gPSBzLmdldChkKTsKICAgIG0KICAgICAgPyBCdChlLCBuLCBtKQogICAgICA6ICgoaSA9IHZvaWQgMCA9PT0gKGwgPSByID8gcih1LCBkLCBuICsgIiIsIGUsIHQsIHMpIDogdm9pZCAwKSkgJiYKICAgICAgICAgICgobSA9ICEoYyA9IG9uKGQpKSAmJiB1bihkKSksCiAgICAgICAgICAodCA9ICFjICYmICFtICYmIGtuKGQpKSwKICAgICAgICAgIChsID0gZCksCiAgICAgICAgICBjIHx8IG0gfHwgdAogICAgICAgICAgICA/IChsID0gb24odSkKICAgICAgICAgICAgICAgID8gdQogICAgICAgICAgICAgICAgOiAkdCgoYyA9IHUpKSAmJiBsbihjKQogICAgICAgICAgICAgICAgPyAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IC0xLAogICAgICAgICAgICAgICAgICAgICAgYSA9IGUubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGZvciAodCA9IHQgfHwgQXJyYXkoYSk7ICsrbiA8IGE7ICkgdFtuXSA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICAgICAgICAgIH0pKHUpCiAgICAgICAgICAgICAgICA6IG0KICAgICAgICAgICAgICAgID8gKChjID0gZCksCiAgICAgICAgICAgICAgICAgIChtID0gIShpID0gITEpKQogICAgICAgICAgICAgICAgICAgID8gYy5zbGljZSgpCiAgICAgICAgICAgICAgICAgICAgOiAoKG0gPSBjLmxlbmd0aCksCiAgICAgICAgICAgICAgICAgICAgICAobSA9IER0ID8gRHQobSkgOiBuZXcgYy5jb25zdHJ1Y3RvcihtKSksCiAgICAgICAgICAgICAgICAgICAgICBjLmNvcHkobSksCiAgICAgICAgICAgICAgICAgICAgICBtKSkKICAgICAgICAgICAgICAgIDogdAogICAgICAgICAgICAgICAgPyBHdChkLCAhKGkgPSAhMSkpCiAgICAgICAgICAgICAgICA6IFtdKQogICAgICAgICAgICA6IChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaWYgKCR0KGUpICYmIG10KGUpID09IGRuKSB7CiAgICAgICAgICAgICAgICAgIGUgPSBYdChlKTsKICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiAxOwogICAgICAgICAgICAgICAgICBlID0gcG4uY2FsbChlLCAiY29uc3RydWN0b3IiKSAmJiBlLmNvbnN0cnVjdG9yOwogICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgZSBpbnN0YW5jZW9mIGUgJiYgbW4uY2FsbChlKSA9PSB5bgogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pKGQpIHx8IGFuKGQpCiAgICAgICAgICAgID8gYW4oKGwgPSB1KSkKICAgICAgICAgICAgICA/IChsID0geG4odSwgSW4odSkpKQogICAgICAgICAgICAgIDogKHl0KHUpICYmICF3dCh1KSkgfHwKICAgICAgICAgICAgICAgIChsID0KICAgICAgICAgICAgICAgICAgImZ1bmN0aW9uIiAhPSB0eXBlb2YgKHUgPSBkKS5jb25zdHJ1Y3RvciB8fCBKdCh1KQogICAgICAgICAgICAgICAgICAgID8ge30KICAgICAgICAgICAgICAgICAgICA6IFZ0KFh0KHUpKSkKICAgICAgICAgICAgOiAoaSA9ICExKSksCiAgICAgICAgaSAmJiAocy5zZXQoZCwgbCksIG8obCwgZCwgYSwgciwgcyksIHMuZGVsZXRlKGQpKSwKICAgICAgICBCdChlLCBuLCBsKSk7CiAgfQoKICBmdW5jdGlvbiBUbihhLCBvLCByLCBzLCBpKSB7CiAgICBhICE9PSBvICYmCiAgICAgIFd0KAogICAgICAgIG8sCiAgICAgICAgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuOwogICAgICAgICAgKGkgPSBpIHx8IG5ldyBUdCgpKSwKICAgICAgICAgICAgeXQoZSkKICAgICAgICAgICAgICA/IExuKGEsIG8sIHQsIHIsIFRuLCBzLCBpKQogICAgICAgICAgICAgIDogKChuID0gcyA/IHMoX24oYSwgdCksIGUsIHQgKyAiIiwgYSwgbywgaSkgOiB2b2lkIDApLAogICAgICAgICAgICAgICAgQnQoYSwgdCwgKG4gPSB2b2lkIDAgPT09IG4gPyBlIDogbikpKTsKICAgICAgICB9LAogICAgICAgIEluCiAgICAgICk7CiAgfQoKICBmdW5jdGlvbiBQbihlKSB7CiAgICByZXR1cm4gZTsKICB9CgogIHZhciBNbiA9IE1hdGgubWF4OwoKICBmdW5jdGlvbiBCbihyLCBzLCBpKSB7CiAgICByZXR1cm4gKAogICAgICAocyA9IE1uKHZvaWQgMCA9PT0gcyA/IHIubGVuZ3RoIC0gMSA6IHMsIDApKSwKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgIGZvciAoCiAgICAgICAgICB2YXIgZSA9IGFyZ3VtZW50cywgdCA9IC0xLCBuID0gTW4oZS5sZW5ndGggLSBzLCAwKSwgYSA9IEFycmF5KG4pOwogICAgICAgICAgKyt0IDwgbjsKCiAgICAgICAgKQogICAgICAgICAgYVt0XSA9IGVbcyArIHRdOwogICAgICAgIGZvciAodmFyIHQgPSAtMSwgbyA9IEFycmF5KHMgKyAxKTsgKyt0IDwgczsgKSBvW3RdID0gZVt0XTsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgKG9bc10gPSBpKGEpKSwKICAgICAgICAgIChmdW5jdGlvbiAoZSwgdCwgbikgewogICAgICAgICAgICBzd2l0Y2ggKG4ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIGUuY2FsbCh0KTsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICByZXR1cm4gZS5jYWxsKHQsIG5bMF0pOwogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJldHVybiBlLmNhbGwodCwgblswXSwgblsxXSk7CiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmV0dXJuIGUuY2FsbCh0LCBuWzBdLCBuWzFdLCBuWzJdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZS5hcHBseSh0LCBuKTsKICAgICAgICAgIH0pKHIsIHRoaXMsIG8pCiAgICAgICAgKTsKICAgICAgfQogICAgKTsKICB9CgogIHZhciBSbiA9IERhdGUubm93OwogIHZhciBXbiwKICAgIEhuLAogICAgRG4sCiAgICBxbiA9CiAgICAgICgoV24gPSBQdAogICAgICAgID8gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIFB0KGUsICJ0b1N0cmluZyIsIHsKICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgIGVudW1lcmFibGU6ICExLAogICAgICAgICAgICAgIHZhbHVlOgogICAgICAgICAgICAgICAgKChuID0gdCksCiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICB9CiAgICAgICAgOiBQbiksCiAgICAgIChEbiA9IEhuID0gMCksCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZSA9IFJuKCksCiAgICAgICAgICB0ID0gMTYgLSAoZSAtIERuKTsKICAgICAgICBpZiAoKChEbiA9IGUpLCAwIDwgdCkpIHsKICAgICAgICAgIGlmICg4MDAgPD0gKytIbikgcmV0dXJuIGFyZ3VtZW50c1swXTsKICAgICAgICB9IGVsc2UgSG4gPSAwOwogICAgICAgIHJldHVybiBXbi5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7CiAgICAgIH0pOwoKICBmdW5jdGlvbiBHbihlKSB7CiAgICByZXR1cm4gKEduID0KICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IKICAgICAgICA/IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZTsKICAgICAgICAgIH0KICAgICAgICA6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlICYmCiAgICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICAgICAgZS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmCiAgICAgICAgICAgICAgZSAhPT0gU3ltYm9sLnByb3RvdHlwZQogICAgICAgICAgICAgID8gInN5bWJvbCIKICAgICAgICAgICAgICA6IHR5cGVvZiBlOwogICAgICAgICAgfSkoZSk7CiAgfQoKICB2YXIgRm4sCiAgICBWbiwKICAgIFluLAogICAgVW4gPQogICAgICAoKEZuID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICBUbihlLCB0LCBuKTsKICAgICAgfSksCiAgICAgIHFuKAogICAgICAgIEJuKAogICAgICAgICAgKFZuID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgdmFyIG4gPSAtMSwKICAgICAgICAgICAgICBhID0gdC5sZW5ndGgsCiAgICAgICAgICAgICAgbyA9IDEgPCBhID8gdFthIC0gMV0gOiB2b2lkIDAsCiAgICAgICAgICAgICAgciA9IDIgPCBhID8gdFsyXSA6IHZvaWQgMCwKICAgICAgICAgICAgICBvID0gMyA8IEZuLmxlbmd0aCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBvID8gKGEtLSwgbykgOiB2b2lkIDA7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgciAmJgogICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgICAgICAgIGlmICh5dChuKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gR24odCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICgibnVtYmVyIiA9PSBhCiAgICAgICAgICAgICAgICAgICAgICAgID8gbG4obikgJiYgem4odCwgbi5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgIDogInN0cmluZyIgPT0gYSAmJiAodCBpbiBuKSkgJiYgUWUoblt0XSwgZSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSh0WzBdLCB0WzFdLCByKSAmJgogICAgICAgICAgICAgICAgKChvID0gYSA8IDMgPyB2b2lkIDAgOiBvKSwgKGEgPSAxKSksCiAgICAgICAgICAgICAgICBlID0gT2JqZWN0KGUpOwogICAgICAgICAgICAgICsrbiA8IGE7CgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB2YXIgcyA9IHRbbl07CiAgICAgICAgICAgICAgcyAmJiBGbihlLCBzLCBuLCBvKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgIH0pLAogICAgICAgICAgWW4sCiAgICAgICAgICBQbgogICAgICAgICksCiAgICAgICAgVm4gKyAiIgogICAgICApKSwKICAgIFpuID0gIm55dC13b3JkbGUtc3RhdGUiLAogICAgWG4gPSB7CiAgICAgIGJvYXJkU3RhdGU6IG51bGwsCiAgICAgIGV2YWx1YXRpb25zOiBudWxsLAogICAgICByb3dJbmRleDogbnVsbCwKICAgICAgc29sdXRpb246IG51bGwsCiAgICAgIGdhbWVTdGF0dXM6IG51bGwsCiAgICAgIGxhc3RQbGF5ZWRUczogbnVsbCwKICAgICAgbGFzdENvbXBsZXRlZFRzOiBudWxsLAogICAgICByZXN0b3JpbmdGcm9tTG9jYWxTdG9yYWdlOiBudWxsLAogICAgICBoYXJkTW9kZTogITEsCiAgICB9OwoKICBmdW5jdGlvbiBLbihlKSB7CiAgICB2YXIgdCwKICAgICAgdCA9CiAgICAgICAgKCh0ID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFpuKSB8fCBKU09OLnN0cmluZ2lmeShYbikpLAogICAgICAgIEpTT04ucGFyc2UodCkpOwogICAgIShmdW5jdGlvbiAoZSkgewogICAgICB0cnkgewogICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShabiwgSlNPTi5zdHJpbmdpZnkoZSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgfQogICAgfSkoVW4odCwgZSkpOwogIH0KCiAgZnVuY3Rpb24gSm4oZSkgewogICAgdmFyIHQgPQogICAgICAxIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6IG51bGw7CiAgICB0cnkgewogICAgICB2YXIgbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKTsKICAgICAgcmV0dXJuIG4gPyBKU09OLnBhcnNlKG4pIDogdDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZSksIHYuY2FwdHVyZVNlbnRyeUVycm9yKGUpLCB0OwogICAgfQogIH0KCiAgZnVuY3Rpb24gUW4oZSwgdCkgewogICAgdHJ5IHsKICAgICAgdmFyIG4gPSByYShlLCB0KTsKICAgICAgcmV0dXJuIEpuKG4pOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CgogIGZ1bmN0aW9uICRuKCkgewogICAgdmFyIGUgPSBKbihabiwgWG4pLAogICAgICB0ID0gKGZ1bmN0aW9uICgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIGUgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oS2UpIHx8IEpTT04uc3RyaW5naWZ5KEplKTsKICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImVycm9yIHJldHJpZXZpbmcgc3RhdHMiLCBlKSwKICAgICAgICAgICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShKZSkpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfSkoKSwKICAgICAgbiA9CiAgICAgICAgISF3aW5kb3cubWF0Y2hNZWRpYSAmJgogICAgICAgIHdpbmRvdy5tYXRjaE1lZGlhKCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIikubWF0Y2hlcywKICAgICAgYSA9IEpuKGFhLCBuKSwKICAgICAgbyA9IEpuKG9hLCAhMSk7CiAgICByZXR1cm4gewogICAgICBnYW1lOiB7CiAgICAgICAgaWQ6IChuID0gbnVsbCAhPSBlICYmIGUuc29sdXRpb24gPyBoZS5pbmRleE9mKGUuc29sdXRpb24pIDogbnVsbCksCiAgICAgICAgZGF5T2Zmc2V0OiBuLAogICAgICAgIGJvYXJkU3RhdGU6IChudWxsID09IGUgPyB2b2lkIDAgOiBlLmJvYXJkU3RhdGUpIHx8IEFycmF5KFdlKS5maWxsKCIiKSwKICAgICAgICBjdXJyZW50Um93SW5kZXg6IChudWxsID09IGUgPyB2b2lkIDAgOiBlLnJvd0luZGV4KSB8fCAwLAogICAgICAgIHN0YXR1czogKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZ2FtZVN0YXR1cykgfHwgIklOX1BST0dSRVNTIiwKICAgICAgICB0aW1lc3RhbXBzOiB7CiAgICAgICAgICBsYXN0UGxheWVkOiAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5sYXN0UGxheWVkVHMpIHx8IG51bGwsCiAgICAgICAgICBsYXN0Q29tcGxldGVkOiAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5sYXN0Q29tcGxldGVkVHMpIHx8IG51bGwsCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgc2V0dGluZ3M6IHsKICAgICAgICBoYXJkTW9kZTogKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuaGFyZE1vZGUpIHx8ICExLAogICAgICAgIGRhcmtNb2RlOiBhIHx8ICExLAogICAgICAgIGNvbG9yYmxpbmRNb2RlOiBvIHx8ICExLAogICAgICB9LAogICAgICBzdGF0czogdCwKICAgIH07CiAgfQoKICBmdW5jdGlvbiBlYShlLCB0KSB7CiAgICB0cnkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZSkgfHwgdDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIHQ7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0YShlKSB7CiAgICB2YXIgdCA9ICJueXQtd29yZGxlLW1vb2dsZS8iLmNvbmNhdChlKSwKICAgICAgbiA9IGVhKCJueXQtd29yZGxlLW1vb2dsZS9BTk9OIiwgIltOT05FXSIpLAogICAgICBlID0gZWEoIm55dC13b3JkbGUtc3RhdGlzdGljcyIsICJbTk9ORV0iKTsKICAgIHJldHVybiB7IGFub246IG4sIHJlZ2k6IGVhKHQsICJbTk9ORV0iKSwgc3RhdHM6IGUgfTsKICB9CgogIGZ1bmN0aW9uIG5hKGUpIHsKICAgIHJldHVybiB7IHR5cGU6IGxhLCBwYXlsb2FkOiBlIH07CiAgfQoKICB2YXIgYWEgPSAibnl0LXdvcmRsZS1kYXJrbW9kZSIsCiAgICBvYSA9ICJueXQtd29yZGxlLWNibW9kZSIsCiAgICByYSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHQgPSBlICYmIHQgPyB0IDogIkFOT04iOwogICAgICByZXR1cm4gIiIuY29uY2F0KCJueXQtd29yZGxlLW1vb2dsZSIsICIvIikuY29uY2F0KHQpOwogICAgfSwKICAgIHNhID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdHJ5IHsKICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsIEpTT04uc3RyaW5naWZ5KHQpKSwgITA7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlKSwgdi5jYXB0dXJlU2VudHJ5RXJyb3IoZSksICExOwogICAgICB9CiAgICB9LAogICAgaWEgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gewogICAgICAgIGJvYXJkU3RhdGU6IGUucGVyc2lzdC5nYW1lLmJvYXJkU3RhdGUsCiAgICAgICAgZXZhbHVhdGlvbnM6IFhlKGUpLAogICAgICAgIHJvd0luZGV4OiBlLnBlcnNpc3QuZ2FtZS5jdXJyZW50Um93SW5kZXgsCiAgICAgICAgc29sdXRpb246IHhlKGUucGVyc2lzdC5nYW1lLmRheU9mZnNldCksCiAgICAgICAgZ2FtZVN0YXR1czogZS5wZXJzaXN0LmdhbWUuc3RhdHVzLAogICAgICAgIGxhc3RQbGF5ZWRUczogZS5wZXJzaXN0LmdhbWUudGltZXN0YW1wcy5sYXN0UGxheWVkLAogICAgICAgIGxhc3RDb21wbGV0ZWRUczogZS5wZXJzaXN0LmdhbWUudGltZXN0YW1wcy5sYXN0Q29tcGxldGVkLAogICAgICB9OwogICAgfSwKICAgIGxhID0gIndvcmRsZS9tb29nbGUvU0VUX0lOSVRJQUxfU1RBVEUiLAogICAgY2EgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0gdCgpLAogICAgICAgICAgdCA9IE9lKG4pLAogICAgICAgICAgbiA9IEFlKG4pOwogICAgICAgIHQgJiYgKCh0ID0gUW4oITApIHx8ICRuKCkpLCAobiA9IHJhKCEwLCBuKSksIHNhKG4sIHQpKTsKICAgICAgfTsKICAgIH0sCiAgICB1YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0KCksCiAgICAgICAgICBhID0gTmUobiksCiAgICAgICAgICBvID0gQWUobiksCiAgICAgICAgICB0ID0gQ2UobikgfHwgMCwKICAgICAgICAgIG4gPSBFZShuKSwKICAgICAgICAgIG4gPSBRbihuLCBvKSwKICAgICAgICAgIG8gPSAobnVsbCA9PSBuID8gdm9pZCAwIDogbi50aW1lc3RhbXApIHx8IDA7CiAgICAgICAgcmV0dXJuIGUobmEodCAmJiBvIDw9IHQgPyBhIDogbiB8fCAkbigpKSk7CiAgICAgIH07CiAgICB9LAogICAgY2UgPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS50cmFuc2llbnQ7CiAgICB9LAogICAgQSA9IG4uY3JlYXRlU2VsZWN0b3IoY2UsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmlzQW5pbWF0aW5nUm93OwogICAgfSksCiAgICBkYSA9IG4uY3JlYXRlU2VsZWN0b3IoY2UsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmlzUmVzdG9yaW5nU2Vzc2lvbjsKICAgIH0pLAogICAgbWEgPSBuLmNyZWF0ZVNlbGVjdG9yKGNlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5sYXN0Um93SW52YWxpZDsKICAgIH0pLAogICAgcGEgPSBuLmNyZWF0ZVNlbGVjdG9yKGNlLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5sYXN0Um93V2luOwogICAgfSksCiAgICB5YSA9IG4uY3JlYXRlU2VsZWN0b3IoW0dlLCBBLCBGZV0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIHJldHVybiAiSU5fUFJPR1JFU1MiICE9PSBlIHx8IHQgfHwgV2UgPD0gbjsKICAgIH0pLAogICAgZ2EgPSBuLmNyZWF0ZVNlbGVjdG9yKFtxZSwgWGUsIEZlLCBBLCBkYV0sIGZ1bmN0aW9uIChlLCB0LCBuLCBhLCBvKSB7CiAgICAgIGlmIChvKSByZXR1cm4ge307CiAgICAgIHZhciBpLAogICAgICAgIGwsCiAgICAgICAgbiA9IHQuc2xpY2UoMCwgYSA/IG4gLSAxIDogbik7CiAgICAgIHJldHVybiAoCiAgICAgICAgKGkgPSBuKSwKICAgICAgICAobCA9IHt9KSwKICAgICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuID0gaVt0XTsKICAgICAgICAgIGlmIChuKQogICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGUubGVuZ3RoOyBhICs9IDEpIHsKICAgICAgICAgICAgICB2YXIgbyA9IGVbYV0sCiAgICAgICAgICAgICAgICByID0gblthXSwKICAgICAgICAgICAgICAgIHMgPSBsW29dIHx8ICJ1bmtub3duIjsKICAgICAgICAgICAgICB3ZVtzXSA8IHdlW3JdICYmIChsW29dID0gcik7CiAgICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICBsCiAgICAgICk7CiAgICB9KSwKICAgIGZhID0gIndvcmRsZS9nYW1lL1NUQVJUX0dBTUUiLAogICAgaGEgPSAid29yZGxlL2dhbWUvQ09OVElOVUVfR0FNRSIsCiAgICBiYSA9ICJ3b3JkbGUvZ2FtZS9BRERfTEVUVEVSIiwKICAgIHdhID0gIndvcmRsZS9nYW1lL0JBQ0tTUEFDRSIsCiAgICBrYSA9ICJ3b3JkbGUvZ2FtZS9FVkFMVUFURV9ST1ciLAogICAgX2EgPSBmdW5jdGlvbiAoZSkgewogICAgICBlLnRvZGF5OwogICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgIGEgPSBGZSh0KCkpLAogICAgICAgICAgbyA9IFllKHQoKSksCiAgICAgICAgICByID0gUmUodCgpKTsKICAgICAgICBpZiAoCiAgICAgICAgICAhKAogICAgICAgICAgICAicHJvZCIgIT09CiAgICAgICAgICAgICAgKG51bGwgPT09IChuID0gd2luZG93LmVudikgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5uYW1lKSAmJgogICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoInJlc2V0IikKICAgICAgICAgICkgJiYKICAgICAgICAgIG8gJiYKICAgICAgICAgIG8gPT09IHIKICAgICAgICApCiAgICAgICAgICByZXR1cm4gZSh7CiAgICAgICAgICAgIHR5cGU6IGhhLAogICAgICAgICAgICBwYXlsb2FkOiB7IGN1cnJlbnRSb3dJbmRleDogYSB9LAogICAgICAgICAgfSk7CiAgICAgICAgZSh7IHR5cGU6IGZhLCBwYXlsb2FkOiB7IGlkOiBNZSh0KCkpLCBudW1Sb3dzOiBXZSwgZGF5T2Zmc2V0OiByIH0gfSk7CiAgICAgIH07CiAgICB9LAogICAgdmEgPSBmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IHlhKHQoKSksCiAgICAgICAgICB0ID0gVmUodCgpKTsKICAgICAgICBuIHx8IHQubGVuZ3RoID49IEhlIHx8IGUoeyB0eXBlOiBiYSwgcGF5bG9hZDogeyBsZXR0ZXI6IGEgfSB9KTsKICAgICAgfTsKICAgIH0sCiAgICB4YSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgeWEodCgpKSB8fCBlKHsgdHlwZTogd2EgfSk7CiAgICAgIH07CiAgICB9LAogICAgU2EgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0gdCgpLAogICAgICAgICAgYSA9IHlhKG4pLAogICAgICAgICAgbyA9IFZlKG4pLAogICAgICAgICAgciA9IEJlKG4pLAogICAgICAgICAgcyA9IHFlKG4pLAogICAgICAgICAgaSA9IFhlKG4pLAogICAgICAgICAgbCA9IEZlKG4pLAogICAgICAgICAgdCA9IE8obiksCiAgICAgICAgICBuID0gWmUobik7CiAgICAgICAgaWYgKCFhKSB7CiAgICAgICAgICBpZiAoby5sZW5ndGggIT09IEhlKQogICAgICAgICAgICByZXR1cm4gZShzZSh7IHRleHQ6ICJOb3QgZW5vdWdoIGxldHRlcnMiLCBpbnZhbGlkYXRlOiAhMCB9KSk7CiAgICAgICAgICBpZiAoKGEgPSBvKSAhPT0gciAmJiAhYmUuaW5jbHVkZXMoYSkgJiYgIWhlLmluY2x1ZGVzKGEpKQogICAgICAgICAgICByZXR1cm4gZSgKICAgICAgICAgICAgICBzZSh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiTm90IGluIHdvcmQgbGlzdCIsCiAgICAgICAgICAgICAgICBpbnZhbGlkYXRlOiAhMCwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICApOwogICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgdmFyIGMgPSAoZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgIGlmICghZSB8fCAhdCB8fCAhbikgcmV0dXJuIHsgdmFsaWRHdWVzczogITAgfTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGEsIG8sIHIsIHMgPSAwOyBzIDwgbi5sZW5ndGg7IHMgKz0gMSkKICAgICAgICAgICAgICAgICAgaWYgKCJjb3JyZWN0IiA9PT0gbltzXSAmJiBlW3NdICE9PSB0W3NdKQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICB2YWxpZEd1ZXNzOiAhMSwKICAgICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogIiIKICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAoKHIgPSBvID0gdm9pZCAwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9IHMgKyAxKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKG8gPSBbInRoIiwgInN0IiwgIm5kIiwgInJkIl0pWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHIgPSBhICUgMTAwKSAtIDIwKSAlIDEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bcl0gfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1swXSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICIgbGV0dGVyIG11c3QgYmUgIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQodFtzXS50b1VwcGVyQ2FzZSgpKSwKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHt9LCBsID0gMDsgbCA8IG4ubGVuZ3RoOyBsICs9IDEpCiAgICAgICAgICAgICAgICAgIFsiY29ycmVjdCIsICJwcmVzZW50Il0uaW5jbHVkZXMobltsXSkgJiYKICAgICAgICAgICAgICAgICAgICAoaVt0W2xdXSA/IChpW3RbbF1dICs9IDEpIDogKGlbdFtsXV0gPSAxKSk7CiAgICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgICB2YXIgYyA9IGUuc3BsaXQoIiIpLnJlZHVjZShmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVbdF0gPyAoZVt0XSArPSAxKSA6IChlW3RdID0gMSksIGU7CiAgICAgICAgICAgICAgICAgICAgfSwge30pLAogICAgICAgICAgICAgICAgICAgIHUgPSBPYmplY3Qua2V5cyhpKSwKICAgICAgICAgICAgICAgICAgICBkID0gMDsKICAgICAgICAgICAgICAgICAgZCA8IHUubGVuZ3RoOwogICAgICAgICAgICAgICAgICBkICs9IDEKICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICB2YXIgbSA9IHVbZF07CiAgICAgICAgICAgICAgICAgIGlmICgoY1ttXSB8fCAwKSA8IGlbbV0pCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIHZhbGlkR3Vlc3M6ICExLAogICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAiR3Vlc3MgbXVzdCBjb250YWluICIuY29uY2F0KAogICAgICAgICAgICAgICAgICAgICAgICBtLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkR3Vlc3M6ICEwIH07CiAgICAgICAgICAgICAgfSkobywgc1tsIC0gMV0sIGlbbCAtIDFdKSwKICAgICAgICAgICAgICB1ID0gYy52YWxpZEd1ZXNzLAogICAgICAgICAgICAgIGMgPSBjLmVycm9yTWVzc2FnZTsKICAgICAgICAgICAgaWYgKCF1KQogICAgICAgICAgICAgIHJldHVybiBlKAogICAgICAgICAgICAgICAgc2UoeyB0ZXh0OiBjIHx8ICJOb3QgdmFsaWQgaW4gaGFyZCBtb2RlIiwgaW52YWxpZGF0ZTogITAgfSkKICAgICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgKHUgPSBsICsgMSksCiAgICAgICAgICAgIChjID0gbyA9PT0gciksCiAgICAgICAgICAgIChsID0gIWMgJiYgV2UgPD0gdSksCiAgICAgICAgICAgIChyID0gYyAmJiAhIW4gJiYgMSA9PT0gX2UobmV3IERhdGUobiksIG5ldyBEYXRlKCkpKSwKICAgICAgICAgICAgKG4gPSAiSU5fUFJPR1JFU1MiKTsKICAgICAgICAgIGMgPyAobiA9ICJXSU4iKSA6IGwgJiYgKG4gPSAiRkFJTCIpLAogICAgICAgICAgICAiSU5fUFJPR1JFU1MiICE9PSBuICYmCiAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGguc2V0SXRlbShmLCAhMCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkoKSwKICAgICAgICAgICAgZSh7CiAgICAgICAgICAgICAgdHlwZToga2EsCiAgICAgICAgICAgICAgcGF5bG9hZDogewogICAgICAgICAgICAgICAgbm93OiBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgc3RhdHVzOiBuLAogICAgICAgICAgICAgICAgaXNTdHJlYWs6IHIsCiAgICAgICAgICAgICAgICBudW1HdWVzc2VzOiB1LAogICAgICAgICAgICAgICAgZ3Vlc3M6IG8sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIEVhID0gWyJ0aW1lc3RhbXAiXTsKCiAgZnVuY3Rpb24gamEoZSwgdCkgewogICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIHt9OwogICAgdmFyIG4sCiAgICAgIGEgPSAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4ge307CiAgICAgICAgdmFyIG4sCiAgICAgICAgICBhLAogICAgICAgICAgbyA9IHt9LAogICAgICAgICAgciA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgIGZvciAoYSA9IDA7IGEgPCByLmxlbmd0aDsgYSsrKQogICAgICAgICAgKG4gPSByW2FdKSwgMCA8PSB0LmluZGV4T2YobikgfHwgKG9bbl0gPSBlW25dKTsKICAgICAgICByZXR1cm4gbzsKICAgICAgfSkoZSwgdCk7CiAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykKICAgICAgZm9yICh2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSksIHIgPSAwOyByIDwgby5sZW5ndGg7IHIrKykKICAgICAgICAobiA9IG9bcl0pLAogICAgICAgICAgMCA8PSB0LmluZGV4T2YobikgfHwKICAgICAgICAgICAgKE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLCBuKSAmJiAoYVtuXSA9IGVbbl0pKTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gemEodCkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUobmUoKSksCiAgICAgICAgZShhZSgpKSwKICAgICAgICBlKHJlKCkpLAogICAgICAgICJtYWxmb3JtZWQgTW9vZ2xlIHJlc3BvbnNlIGRhdGEiID09PSB0Lm1lc3NhZ2UgJiYKICAgICAgICAgIHYuY2FwdHVyZVNlbnRyeUVycm9yKHQsIHsKICAgICAgICAgICAgYXBpOiAibW9vZ2xlIiwKICAgICAgICAgICAgY2F0ZWdvcnk6ICJnYW1lX3N0YXRlIiwKICAgICAgICAgIH0pLAogICAgICAgIHQubWVzc2FnZSAmJiAiTm8gaW50ZXJuZXQiID09PSB0Lm1lc3NhZ2UKICAgICAgICAgID8gZShSKCJvZmZsaW5lIikpCiAgICAgICAgICA6IHQubWVzc2FnZSAmJiAicHJvZmlsZSIgPT09IHQubWVzc2FnZQogICAgICAgICAgPyBlKFIoInByb2ZpbGUiKSkKICAgICAgICAgIDogZShSKCJkZWZhdWx0IikpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIE5hKCkgewogICAgcmV0dXJuIGcudXNlQ29udGV4dChpKTsKICB9CgogIHZhciBDYSA9ICIiLAogICAgQWEgPSAid29yZGxlL2FwaS9NT09HTEVfT1BUX0lOIiwKICAgIE9hID0gIndvcmRsZS9hcGkvTE9BRF9NT09HTEVfR0VUIiwKICAgIElhID0gIndvcmRsZS9hcGkvTU9PR0xFX0dFVF9TVUNDRVNTIiwKICAgIExhID0gIndvcmRsZS9hcGkvTU9PR0xFX0dFVF9FUlJPUiIsCiAgICBUYSA9ICJ3b3JkbGUvYXBpL0xPQURfTU9PR0xFX1BPU1QiLAogICAgUGEgPSAid29yZGxlL2FwaS9NT09HTEVfUE9TVF9TVUNDRVNTIiwKICAgIE1hID0gIndvcmRsZS9hcGkvTU9PR0xFX1BPU1RfRVJST1IiLAogICAgQmEgPSAid29yZGxlL2FwaS9NT09HTEVfUE9TVF9SRVNFVCIsCiAgICBSYSA9ICJ3b3JkbGUvYXBpL0xPQURfU09MVVRJT04iLAogICAgV2EgPSAid29yZGxlL2FwaS9TT0xVVElPTl9TVUNDRVNTIiwKICAgIEhhID0gIndvcmRsZS9hcGkvU09MVVRJT05fRVJST1IiLAogICAgRGEgPSAid29yZGxlL2FwaS9MT0FEX1BST0ZJTEVfSU5GTyIsCiAgICBxYSA9ICJ3b3JkbGUvYXBpL1BST0ZJTEVfSU5GT19TVUNDRVNTIiwKICAgIEdhID0gIndvcmRsZS9hcGkvUFJPRklMRV9JTkZPX0VSUk9SIiwKICAgIEZhID0gIndvcmRsZS9hcGkvU1RBUlRfU1lOQyIsCiAgICBWYSA9ICJ3b3JkbGUvYXBpL0FQUF9MT0FERUQiLAogICAgWWEgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgcyA9IGUuZW5hYmxlU2VydmVyU29sdXRpb24sCiAgICAgICAgaSA9IGUudG9kYXk7CiAgICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICAgIHQoeyB0eXBlOiBSYSB9KTsKICAgICAgICB2YXIgbiA9IHZlKGkpLAogICAgICAgICAgYSA9IHhlKG4pLAogICAgICAgICAgbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGUoeyBzb2x1dGlvbjogYSwgZGF5c19zaW5jZV9sYXVuY2g6IG4sIGlkOiBuIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgICAgdCh7CiAgICAgICAgICAgIHR5cGU6IFdhLAogICAgICAgICAgICBwYXlsb2FkOiB7CiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgc29sdXRpb246IGUuc29sdXRpb24sCiAgICAgICAgICAgICAgICBkYXlPZmZzZXQ6IGUuZGF5c19zaW5jZV9sYXVuY2gsCiAgICAgICAgICAgICAgICBpZDogZS5pZCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgcwogICAgICAgICAgICA/IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2LnhocgogICAgICAgICAgICAgICAgICAuZ2V0KAogICAgICAgICAgICAgICAgICAgICgoZSA9IGkpLAogICAgICAgICAgICAgICAgICAgICIiCiAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHYuZW52LmVkZ2UsICIvc3ZjL3dvcmRsZS92MS8iKQogICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChlLnRvTG9jYWxlRGF0ZVN0cmluZygiZW4tQ0EiKSwgIi5qc29uIikpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuY2FwdHVyZVNlbnRyeUVycm9yKGUpLCBvKCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICA6IG8KICAgICAgICApKCkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHIoZSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHMKICAgICAgICAgICAgICA/IG8oKS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHIoZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIDogKHQoeyB0eXBlOiBIYSB9KSwKICAgICAgICAgICAgICAgIGUubWVzc2FnZSAmJiAiTm8gaW50ZXJuZXQiID09PSBlLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgPyB0KFIoIm9mZmxpbmUiKSkKICAgICAgICAgICAgICAgICAgOiB0KFIoImRlZmF1bHQiKSkpOwogICAgICAgICAgfSk7CiAgICAgIH07CiAgICB9LAogICAgVWEgPSAidXNlciBub3QgYXV0aGVudGljYXRlZCBmb3IgR0VUIC9zdGF0ZSIsCiAgICBaYSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBuID0gZS5mZXRjaEZyb21Nb29nbGUsCiAgICAgICAgZSA9IGUub3B0SW4sCiAgICAgICAgYSA9IHZvaWQgMCAhPT0gZSAmJiBlOwogICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gbiAmJgogICAgICAgICAgKChlID0gZG9jdW1lbnQuY29va2llLnRvTG93ZXJDYXNlKCkpLmluY2x1ZGVzKCJueXQtcyIpIHx8CiAgICAgICAgICAgIGUuaW5jbHVkZXMoInNpZG55IikpCiAgICAgICAgICA/ICh0KHsgdHlwZTogT2EgfSksCiAgICAgICAgICAgIHYueGhyCiAgICAgICAgICAgICAgLmdldCgiIi5jb25jYXQoQ2EsICIvc3ZjL2dhbWVzL3N0YXRlL3dvcmRsZS9sYXRlc3QiKSwgewogICAgICAgICAgICAgICAgd2l0aENvb2tpZTogITEsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaWYgKCJmb3JiaWRkZW4iID09PSBlLmVycm9yKSB0aHJvdyBuZXcgRXJyb3IoVWEpOwogICAgICAgICAgICAgICAgaWYgKCFlLnRpbWVzdGFtcCAmJiAhZS51c2VyX2lkKQogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIm1hbGZvcm1lZCBNb29nbGUgcmVzcG9uc2UgZGF0YSIpOwogICAgICAgICAgICAgICAgdCh7IHR5cGU6IElhLCBwYXlsb2FkOiB7IGRhdGE6IGUsIG9wdEluOiBhIH0gfSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGUubWVzc2FnZSAhPT0gVWEgJiYKICAgICAgICAgICAgICAgICAgdCh7IHR5cGU6IExhLCBwYXlsb2FkOiB7IG1lc3NhZ2U6IGUubWVzc2FnZSB9IH0pOwogICAgICAgICAgICAgIH0pKQogICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoKTsKICAgICAgICB2YXIgZTsKICAgICAgfTsKICAgIH0sCiAgICBYYSA9IGZ1bmN0aW9uIChvLCByKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAodCwgZSkgewogICAgICAgIHZhciBuID0gQWUoZSgpKSwKICAgICAgICAgIGEgPSBvLnRpbWVzdGFtcCwKICAgICAgICAgIGUgPSBqYShvLCBFYSk7CiAgICAgICAgcmV0dXJuIG4KICAgICAgICAgID8gKHQoeyB0eXBlOiBUYSB9KSwKICAgICAgICAgICAgdi54aHIKICAgICAgICAgICAgICAucG9zdCgKICAgICAgICAgICAgICAgICIiLmNvbmNhdChDYSwgIi9zdmMvZ2FtZXMvc3RhdGUiKSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgZ2FtZTogIndvcmRsZSIsCiAgICAgICAgICAgICAgICAgIGdhbWVfZGF0YTogZSwKICAgICAgICAgICAgICAgICAgcHV6emxlX2lkOiAiMSIsCiAgICAgICAgICAgICAgICAgIHNjaGVtYV92ZXJzaW9uOiAiMC4wLjAiLAogICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGEsCiAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IG4sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgeyB3aXRoQ29va2llOiAhMSB9CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBpZiAoIWUudmVyc2lvbikKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJtYWxmb3JtZWQgTW9vZ2xlIHJlc3BvbnNlIGRhdGEiKTsKICAgICAgICAgICAgICAgIHQoeyB0eXBlOiBQYSwgcGF5bG9hZDogeyBkYXRhOiBlLCBlbmFibGVBdXRoOiAhIXIgfSB9KTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdCh7CiAgICAgICAgICAgICAgICAgIHR5cGU6IE1hLAogICAgICAgICAgICAgICAgICBwYXlsb2FkOiB7IHNhdmVEYXRhOiBvIH0sCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgdCgKICAgICAgICAgICAgICAgICAgICBzZSh7CiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHNhdmluZy4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UgYW5kIHRyeSBhZ2FpbiIsCiAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogM2UzLAogICAgICAgICAgICAgICAgICAgICAgaXNTeXN0ZW06ICEwLAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICJtYWxmb3JtZWQgTW9vZ2xlIHJlc3BvbnNlIGRhdGEiID09PSBlLm1lc3NhZ2UgJiYKICAgICAgICAgICAgICAgICAgICB2LmNhcHR1cmVTZW50cnlFcnJvcihlLCB7CiAgICAgICAgICAgICAgICAgICAgICBhcGk6ICJtb29nbGUiLAogICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICJnYW1lX3N0YXRlIiwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSkKICAgICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIH07CiAgICB9OwoKICBmdW5jdGlvbiBLYShlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0KICAgICAgICAgIG51bGwgPT0gZQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICAgICAgZVsiQEBpdGVyYXRvciJdOwogICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgIHZhciBhLAogICAgICAgICAgICBvLAogICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgIHMgPSAhMCwKICAgICAgICAgICAgaSA9ICExOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBuID0gbi5jYWxsKGUpOwogICAgICAgICAgICAgICEocyA9IChhID0gbi5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKHIucHVzaChhLnZhbHVlKSwgIXQgfHwgci5sZW5ndGggIT09IHQpOwogICAgICAgICAgICAgIHMgPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAoaSA9ICEwKSwgKG8gPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcyB8fCBudWxsID09IG4ucmV0dXJuIHx8IG4ucmV0dXJuKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKGkpIHRocm93IG87CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIEphKGUsIHQpOwogICAgICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwgLTEpOwogICAgICAgICAgcmV0dXJuICJNYXAiID09PQogICAgICAgICAgICAobiA9ICJPYmplY3QiID09PSBuICYmIGUuY29uc3RydWN0b3IgPyBlLmNvbnN0cnVjdG9yLm5hbWUgOiBuKSB8fAogICAgICAgICAgICAiU2V0IiA9PT0gbgogICAgICAgICAgICA/IEFycmF5LmZyb20oZSkKICAgICAgICAgICAgOiAiQXJndW1lbnRzIiA9PT0gbiB8fAogICAgICAgICAgICAgIC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pCiAgICAgICAgICAgID8gSmEoZSwgdCkKICAgICAgICAgICAgOiB2b2lkIDA7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iCiAgICAgICAgKTsKICAgICAgfSkoKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIEphKGUsIHQpIHsKICAgIChudWxsID09IHQgfHwgdCA+IGUubGVuZ3RoKSAmJiAodCA9IGUubGVuZ3RoKTsKICAgIGZvciAodmFyIG4gPSAwLCBhID0gbmV3IEFycmF5KHQpOyBuIDwgdDsgbisrKSBhW25dID0gZVtuXTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gUWEobykgewogICAgcmV0dXJuICRhLnJlZHVjZShmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiwgYTsKICAgICAgcmV0dXJuICgKICAgICAgICBvCiAgICAgICAgICA/ICgobiA9IChhID0gZW9bdF0pLnRlc3ROYW1lKSwKICAgICAgICAgICAgKGEgPSBhLmFjdGl2ZVZhcmlhbnQpLAogICAgICAgICAgICAoZVt0XSA9IG8obikgPT09IGEpKQogICAgICAgICAgOiAoZVt0XSA9ICExKSwKICAgICAgICBlCiAgICAgICk7CiAgICB9LCB7fSk7CiAgfQoKICB2YXIgJGEgPSBbImF1dGgiLCAibW9vZ2xlR2V0IiwgInNlcnZlclNvbHV0aW9uIiwgIndlbGNvbWVNb21lbnQiXSwKICAgIGVvID0gewogICAgICBhdXRoOiB7CiAgICAgICAgdGVzdE5hbWU6ICJHQU1FU193b3JkbGVBdXRoXzA0MjciLAogICAgICAgIGFjdGl2ZVZhcmlhbnQ6ICIxX0VuYWJsZUF1dGgiLAogICAgICB9LAogICAgICBtb29nbGVHZXQ6IHsKICAgICAgICB0ZXN0TmFtZTogIkdBTUVTX3dvcmRsZU1vb2dsZV8wNDIyIiwKICAgICAgICBhY3RpdmVWYXJpYW50OiAiMV9FbmFibGVNb29nbGUiLAogICAgICB9LAogICAgICBzZXJ2ZXJTb2x1dGlvbjogewogICAgICAgIHRlc3ROYW1lOiAiR0FNRVNfd29yZGxlU29sdXRpb25CRV8wNTEwIiwKICAgICAgICBhY3RpdmVWYXJpYW50OiAiMV9FbmFibGVTZXJ2ZXJTb2x1dGlvbiIsCiAgICAgIH0sCiAgICAgIHdlbGNvbWVNb21lbnQ6IHsKICAgICAgICB0ZXN0TmFtZTogIkdBTUVTX3dvcmRsZVdlbGNvbWVNb21lbnRfMDYyMSIsCiAgICAgICAgYWN0aXZlVmFyaWFudDogIjFfRW5hYmxlV29yZGxlV2VsY29tZU1vbWVudCIsCiAgICAgIH0sCiAgICB9LAogICAgdG8gPSBfLmNyZWF0ZUNvbnRleHQoUWEoKSksCiAgICB1ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gZS5jaGlsZHJlbiwKICAgICAgICBlID0gTmEoKS5nZXRWYXJpYW50LAogICAgICAgIGEgPSBRYShlKSwKICAgICAgICBlID0gS2EoXy51c2VTdGF0ZShhKSwgMiksCiAgICAgICAgbyA9IGVbMF0sCiAgICAgICAgciA9IGVbMV07CiAgICAgIHJldHVybiAoCiAgICAgICAgXy51c2VFZmZlY3QoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0LCBuOwogICAgICAgICAgICAodCA9IGEpLAogICAgICAgICAgICAgIChuID0gbyksCiAgICAgICAgICAgICAgJGEuc29tZShmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRbZV0gIT09IG5bZV07CiAgICAgICAgICAgICAgfSkgJiYgcihhKTsKICAgICAgICAgIH0sCiAgICAgICAgICBbYV0KICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCh0by5Qcm92aWRlciwgeyB2YWx1ZTogbyB9LCB0KQogICAgICApOwogICAgfSwKICAgIG5vID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIF8udXNlQ29udGV4dCh0bylbZV07CiAgICB9LAogICAgYW8gPSB7CiAgICAgIGJhY2tCdXR0b246ICJCYWNrQnV0dG9uLW1vZHVsZV9iYWNrQnV0dG9uX181YXE4UyIsCiAgICAgIGJhY2tCdXR0b25UZXh0OiAiQmFja0J1dHRvbi1tb2R1bGVfYmFja0J1dHRvblRleHRfXy03eUJMIiwKICAgIH07CiAgaygKICAgICcuQmFja0J1dHRvbi1tb2R1bGVfYmFja0J1dHRvbl9fNWFxOFMge1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuLkJhY2tCdXR0b24tbW9kdWxlX2JhY2tCdXR0b25fXzVhcThTOmJlZm9yZSB7XG4gIGNvbnRlbnQ6ICIiO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1oeWJyaWQtYmFjaykgY2VudGVyIG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbi14OiAwcHg7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBoZWlnaHQ6IDQ1cHg7XG4gIHBhZGRpbmc6IDBweCAxNXB4O1xuICBvcGFjaXR5OiAxO1xufVxuLkJhY2tCdXR0b24tbW9kdWxlX2JhY2tCdXR0b25fXzVhcThTOmFjdGl2ZTpiZWZvcmUge1xuICBvcGFjaXR5OiAwLjU7XG59XG5cbi5kYXJrIC5CYWNrQnV0dG9uLW1vZHVsZV9iYWNrQnV0dG9uX181YXE4UzpiZWZvcmUge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1oeWJyaWQtYmFjay1kYXJrLW1vZGUpIGNlbnRlciBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtcG9zaXRpb24teDogMHB4O1xufVxuXG4uQmFja0J1dHRvbi1tb2R1bGVfYmFja0J1dHRvblRleHRfXy03eUJMIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMXB4O1xuICBoZWlnaHQ6IDFweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgY2xpcDogcmVjdCgwIDAgMCAwKTtcbn0nCiAgKTsKICB2YXIgb28gPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IGUuYnV0dG9uU3R5bGUsCiAgICAgICAgbiA9IGUudGV4dFN0eWxlLAogICAgICAgIGEgPSBlLmhhbmRsZXIsCiAgICAgICAgbyA9IGUudHJhY2tEYXRhOwogICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJidXR0b24iLAogICAgICAgIHsKICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgY2xhc3NOYW1lOiBwKGFvLmJhY2tCdXR0b24sIHQpLAogICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgZSA9IG8uZWxlbWVudE5hbWUsCiAgICAgICAgICAgICAgdCA9IG8uY29udGV4dCwKICAgICAgICAgICAgICBuID0gby5tb2R1bGVMYWJlbDsKICAgICAgICAgICAgdi50cmFja01vZHVsZUludGVyYWN0aW9uKCJjbGljayIsIHQsIGUsICJiYWNrIiwgbiksCiAgICAgICAgICAgICAgYSAmJiBhKCksCiAgICAgICAgICAgICAgbnVsbCAhPT0gKG4gPSB3aW5kb3cuTmF0aXZlQnJpZGdlKSAmJgogICAgICAgICAgICAgICAgdm9pZCAwICE9PSBuICYmCiAgICAgICAgICAgICAgICBuLmdhbWVzQmFja1RvSHViKCk7CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6IHAoYW8uYmFja0J1dHRvblRleHQsIG4pIH0sICJCYWNrIikKICAgICAgKTsKICAgIH0sCiAgICBybyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGUgPSBlLmNoaWxkcmVuOwogICAgICByZXR1cm4gd2luZG93LmlzSHlicmlkV2ViVmlldyA/IG51bGwgOiBlOwogICAgfSwKICAgIHNvID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZSA9IGUuY2hpbGRyZW47CiAgICAgIHJldHVybiB3aW5kb3cuaXNIeWJyaWRXZWJWaWV3ICYmIHdpbmRvdy5OYXRpdmVCcmlkZ2UgPyBlIDogbnVsbDsKICAgIH0sCiAgICBpbyA9IHsKICAgICAgY29udGFpbmVyOiAiTm90ZS1tb2R1bGVfY29udGFpbmVyX19wVTljUCIsCiAgICAgIG5vdGU6ICJOb3RlLW1vZHVsZV9ub3RlX19jZmFYOCIsCiAgICAgIHN0YXRzSWNvbjogIk5vdGUtbW9kdWxlX3N0YXRzSWNvbl9fMDZzWm0iLAogICAgICBtb3JlTGluazogIk5vdGUtbW9kdWxlX21vcmVMaW5rX196RVl0NCIsCiAgICAgIG5vdGVIZWFkZXI6ICJOb3RlLW1vZHVsZV9ub3RlSGVhZGVyX19iV2tnQSIsCiAgICAgIG5vdGVEZXNjcmlwdGlvbjogIk5vdGUtbW9kdWxlX25vdGVEZXNjcmlwdGlvbl9fNWtpTjQiLAogICAgICBub3RlU3VtbWFyeTogIk5vdGUtbW9kdWxlX25vdGVTdW1tYXJ5X19MUUlHZyIsCiAgICB9OwoKICBmdW5jdGlvbiBsbyhlKSB7CiAgICB2YXIgdCA9IGUuY2xvc2VNb21lbnQsCiAgICAgIG4gPSBlLnRyYWNrTGluaywKICAgICAgYSA9IFQoKTsKICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICJkaXYiLAogICAgICB7IGNsYXNzTmFtZTogaW8uY29udGFpbmVyIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7IGNsYXNzTmFtZTogaW8ubm90ZSB9LAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBjbGFzc05hbWU6IGlvLnN0YXRzSWNvbiB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJpbWciLCB7CiAgICAgICAgICAgIGFsdDogIldvcmRsZSIsCiAgICAgICAgICAgIHN0eWxlOiB7IGNvbnRlbnQ6ICJ2YXIoLS13b3JkbGUtc3RhdHMtbWluaSkiIH0sCiAgICAgICAgICB9KQogICAgICAgICksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImRpdiIsCiAgICAgICAgICB7IGNsYXNzTmFtZTogaW8ubm90ZUluZm8gfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGlvLm5vdGVIZWFkZXIgfSwgIk5PVEUiKSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBpby5ub3RlRGVzY3JpcHRpb24gfSwKICAgICAgICAgICAgIlNlZSB5b3VyIHN0YXRzIHdoZXJldmVyIHlvdSBwbGF5LiIKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IGNsYXNzTmFtZTogaW8ubm90ZVN1bW1hcnkgfSwKICAgICAgICAgICAgIlRvIHNlZSB5b3VyIHN0YXRzIGluIHRoZSBhcHAsIGdvIHRvIHdoZXJlIHlvdSBub3JtYWxseSBwbGF5IGFuZCBsaW5rIHRoZW0gdG8gYSBmcmVlIGFjY291bnQuIgogICAgICAgICAgKSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImJ1dHRvbiIsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6IGlvLm1vcmVMaW5rLAogICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHQoKSwgYSh0ZSgibGlua0luZm8iKSksIG4oKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAiVGVsbCBtZSBtb3JlIgogICAgICAgICAgKQogICAgICAgICkKICAgICAgKQogICAgKTsKICB9CgogIGsoCiAgICAiLk5vdGUtbW9kdWxlX2NvbnRhaW5lcl9fcFU5Y1Age1xuICBwYWRkaW5nOiAwIDIwcHg7XG59XG5cbi5Ob3RlLW1vZHVsZV9ub3RlX19jZmFYOCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gIHBhZGRpbmc6IDIwcHggMDtcbn1cbi5Ob3RlLW1vZHVsZV9ub3RlX19jZmFYOCAuTm90ZS1tb2R1bGVfc3RhdHNJY29uX18wNnNabSB7XG4gIG1hcmdpbi1yaWdodDogMTZweDtcbn1cbi5Ob3RlLW1vZHVsZV9ub3RlX19jZmFYOCAuTm90ZS1tb2R1bGVfbW9yZUxpbmtfX3pFWXQ0IHtcbiAgYWxsOiB1bnNldDtcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gIGNvbG9yOiB2YXIoLS1ibGFjay0zKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuLk5vdGUtbW9kdWxlX25vdGVfX2NmYVg4IC5Ob3RlLW1vZHVsZV9ub3RlSGVhZGVyX19iV2tnQSB7XG4gIGNvbG9yOiAjMjY3MWRjO1xuICBmb250LXNpemU6IDExcHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG59XG4uTm90ZS1tb2R1bGVfbm90ZV9fY2ZhWDggLk5vdGUtbW9kdWxlX25vdGVEZXNjcmlwdGlvbl9fNWtpTjQge1xuICBjb2xvcjogdmFyKC0tYmxhY2stMik7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XG59XG4uTm90ZS1tb2R1bGVfbm90ZV9fY2ZhWDggLk5vdGUtbW9kdWxlX25vdGVTdW1tYXJ5X19MUUlHZyB7XG4gIGNvbG9yOiB2YXIoLS1ibGFjay0zKTtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBsaW5lLWhlaWdodDogMTZweDtcbn0iCiAgKTsKICB2YXIgY28gPSB7CiAgICBjb250ZW50V2VsY29tZTogIldlbGNvbWUtbW9kdWxlX2NvbnRlbnRXZWxjb21lX18zQ3pqbSIsCiAgICBjb250ZW50V2VsY29tZUNvbnRhaW5lcjogIldlbGNvbWUtbW9kdWxlX2NvbnRlbnRXZWxjb21lQ29udGFpbmVyX180dkVrTiIsCiAgICBzcGlubmVyOiAiV2VsY29tZS1tb2R1bGVfc3Bpbm5lcl9fbHJaTFQiLAogICAgc21hbGxJY29uQW5kVGl0bGU6ICJXZWxjb21lLW1vZHVsZV9zbWFsbEljb25BbmRUaXRsZV9fYndBRjIiLAogICAgdGl0bGU6ICJXZWxjb21lLW1vZHVsZV90aXRsZV9fQlZJV1EiLAogICAgc21hbGw6ICJXZWxjb21lLW1vZHVsZV9zbWFsbF9fSHJNZU0iLAogICAgc3VidGl0bGU6ICJXZWxjb21lLW1vZHVsZV9zdWJ0aXRsZV9fUEhzNmQiLAogICAgYm9sZDogIldlbGNvbWUtbW9kdWxlX2JvbGRfXy1tZUlnIiwKICAgIGljb246ICJXZWxjb21lLW1vZHVsZV9pY29uX190WU1veSIsCiAgICBkYXRlQ29udGFpbmVyOiAiV2VsY29tZS1tb2R1bGVfZGF0ZUNvbnRhaW5lcl9fcWJZWmUiLAogICAgbm9XcmFwOiAiV2VsY29tZS1tb2R1bGVfbm9XcmFwX195eHlaZiIsCiAgICBkYXRlOiAiV2VsY29tZS1tb2R1bGVfZGF0ZV9fdTRrdmgiLAogICAgd29yZGxlTnVtYmVyOiAiV2VsY29tZS1tb2R1bGVfd29yZGxlTnVtYmVyX19DYUJNWSIsCiAgICBidXR0b25Db250YWluZXI6ICJXZWxjb21lLW1vZHVsZV9idXR0b25Db250YWluZXJfXzJ5dDV0IiwKICAgIGJ1dHRvbjogIldlbGNvbWUtbW9kdWxlX2J1dHRvbl9fdEVKbDkiLAogICAgc2Vjb25kYXJ5OiAiV2VsY29tZS1tb2R1bGVfc2Vjb25kYXJ5X19Ld2ZjcyIsCiAgICBiYWNrOiAiV2VsY29tZS1tb2R1bGVfYmFja19fTktzTnQiLAogIH07CgogIGZ1bmN0aW9uIHVvKGUpIHsKICAgIHZhciB0ID0gZS5jaGlsZHJlbiwKICAgICAgYSA9IGUub3B0SW4sCiAgICAgIG4gPSBlLnN0eWxlcywKICAgICAgbyA9IHZvaWQgMCA9PT0gbiA/ICIiIDogbiwKICAgICAgciA9IGUudHJhY2tFdmVudCwKICAgICAgbiA9IGUuYXJpYUxhYmVsLAogICAgICBlID0gdm9pZCAwID09PSBuID8gIiIgOiBuLAogICAgICBzID0gVCgpLAogICAgICBpID0gd2luZG93LmlzSHlicmlkV2ViVmlldywKICAgICAgbiA9IGEgPyB5ZSA6IGdlOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgImEiLAogICAgICB7CiAgICAgICAgY2xhc3NOYW1lOiBvLAogICAgICAgICJhcmlhLWxhYmVsIjogZSwKICAgICAgICB0YWJJbmRleDogLTEsCiAgICAgICAgaHJlZjogaSA/IHZvaWQgMCA6IG4sCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGUsIHQsIG47CiAgICAgICAgICBpICYmCiAgICAgICAgICAgIG51bGwgIT09IChuID0gd2luZG93Lk5hdGl2ZUJyaWRnZSkgJiYKICAgICAgICAgICAgdm9pZCAwICE9PSBuICYmCiAgICAgICAgICAgIG4KICAgICAgICAgICAgICAuZ2FtZXNBdXRoZW50aWNhdGVVc2VyKCJsb2dpbiIpCiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIG51bGwgIT09IChlID0gZS52YWx1ZXMpICYmCiAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gZSAmJgogICAgICAgICAgICAgICAgICBlLmdhbWVzQXV0aGVudGljYXRlVXNlci5yZWdpSUQgJiYKICAgICAgICAgICAgICAgICAgYSAmJgogICAgICAgICAgICAgICAgICBzKHsgdHlwZTogQWEgfSk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBzKHsgdHlwZTogVmEsIHBheWxvYWQ6IHsgYXBwTG9hZGVkOiAhMSB9IH0pOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICByICYmCiAgICAgICAgICAgICAgKChlID0gci5ldmVudE5hbWUpLAogICAgICAgICAgICAgICh0ID0gci5zZW5kQ29udGV4dCksCiAgICAgICAgICAgICAgKG4gPSByLmVsZW1lbnQpLAogICAgICAgICAgICAgIHMoaWUoZSwgdCwgbikpKTsKICAgICAgICB9LAogICAgICB9LAogICAgICB0CiAgICApOwogIH0KCiAgaygKICAgICcuV2VsY29tZS1tb2R1bGVfY29udGVudFdlbGNvbWVfXzNDemptIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBjb2xvcjogYmxhY2s7XG4gIG1heC13aWR0aDogMTAwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIGhlaWdodDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2UzZTNlMTtcbn1cblxuLldlbGNvbWUtbW9kdWxlX2NvbnRlbnRXZWxjb21lQ29udGFpbmVyX180dkVrTiB7XG4gIGhlaWdodDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDAgNDJweDtcbn1cblxuLldlbGNvbWUtbW9kdWxlX3NwaW5uZXJfX2xyWkxUIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLldlbGNvbWUtbW9kdWxlX3NtYWxsSWNvbkFuZFRpdGxlX19id0FGMiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA0NHB4O1xufVxuXG4uV2VsY29tZS1tb2R1bGVfdGl0bGVfX0JWSVdRIHtcbiAgZm9udC1zaXplOiAzNnB4O1xuICBsaW5lLWhlaWdodDogMzhweDtcbiAgZm9udC1mYW1pbHk6ICJueXQta2FybmFrY29uZGVuc2VkIjtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIG1hcmdpbi1ib3R0b206IDEycHg7XG59XG5AbWVkaWEgKG1pbi13aWR0aDogNzYwcHgpIHtcbiAgLldlbGNvbWUtbW9kdWxlX3RpdGxlX19CVklXUSB7XG4gICAgZm9udC1zaXplOiA0NHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjA0NWVtO1xuICB9XG59XG5AbWVkaWEgKG1pbi13aWR0aDogOTkycHgpIHtcbiAgLldlbGNvbWUtbW9kdWxlX3RpdGxlX19CVklXUSB7XG4gICAgZm9udC1zaXplOiA1MHB4O1xuICAgIGxpbmUtaGVpZ2h0OiA1MnB4O1xuICB9XG59XG4uV2VsY29tZS1tb2R1bGVfdGl0bGVfX0JWSVdRLldlbGNvbWUtbW9kdWxlX3NtYWxsX19Ick1lTSB7XG4gIGZvbnQtc2l6ZTogMS4xMjVlbTtcbiAgbGluZS1oZWlnaHQ6IDEuMTExO1xufVxuXG4uV2VsY29tZS1tb2R1bGVfc3VidGl0bGVfX1BIczZkIHtcbiAgZm9udC1zaXplOiAyOHB4O1xuICBsaW5lLWhlaWdodDogMjhweDtcbiAgbWFyZ2luLWJvdHRvbTogMjhweDtcbiAgZm9udC1mYW1pbHk6ICJueXQta2FybmFrIjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXdlaWdodDogNDAwO1xuICBmb250LXNpemU6IDI0LjhweDtcbn1cbkBtZWRpYSAobWluLXdpZHRoOiA3NjBweCkge1xuICAuV2VsY29tZS1tb2R1bGVfc3VidGl0bGVfX1BIczZkIHtcbiAgICBtYXgtd2lkdGg6IDMwMHB4O1xuICAgIGZvbnQtc2l6ZTogMzJweDtcbiAgICBsaW5lLWhlaWdodDogMzZweDtcbiAgfVxufVxuQG1lZGlhIChtaW4td2lkdGg6IDk5MnB4KSB7XG4gIC5XZWxjb21lLW1vZHVsZV9zdWJ0aXRsZV9fUEhzNmQge1xuICAgIG1heC13aWR0aDogMzc1cHg7XG4gICAgZm9udC1zaXplOiAzOHB4O1xuICAgIGxpbmUtaGVpZ2h0OiA0NHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDM2cHg7XG4gIH1cbn1cbi5XZWxjb21lLW1vZHVsZV9zdWJ0aXRsZV9fUEhzNmQgLldlbGNvbWUtbW9kdWxlX2JvbGRfXy1tZUlnIHtcbiAgZm9udC1mYW1pbHk6ICJueXQta2FybmFrY29uZGVuc2VkIjtcbn1cblxuLyogSUNPTiAqL1xuLldlbGNvbWUtbW9kdWxlX2ljb25fX3RZTW95IHtcbiAgaGVpZ2h0OiA2NHB4O1xuICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICBkaXNwbGF5OiBibG9jaztcbiAgd2lkdGg6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluO1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLXdvcmRsZS1pY29uKTtcbn1cbkBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkge1xuICAuV2VsY29tZS1tb2R1bGVfaWNvbl9fdFlNb3kge1xuICAgIGhlaWdodDogODBweDtcbiAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICB9XG59XG4uV2VsY29tZS1tb2R1bGVfaWNvbl9fdFlNb3kuV2VsY29tZS1tb2R1bGVfc21hbGxfX0hyTWVNIHtcbiAgaGVpZ2h0OiA0MHB4O1xuICBtYXJnaW4tYm90dG9tOiA4cHg7XG59XG5AbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHtcbiAgLldlbGNvbWUtbW9kdWxlX2ljb25fX3RZTW95LldlbGNvbWUtbW9kdWxlX3NtYWxsX19Ick1lTSB7XG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgfVxufVxuXG4uV2VsY29tZS1tb2R1bGVfZGF0ZUNvbnRhaW5lcl9fcWJZWmUge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5XZWxjb21lLW1vZHVsZV9ub1dyYXBfX3l4eVpmIHtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbn1cblxuLldlbGNvbWUtbW9kdWxlX2RhdGVfX3U0a3ZoIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGZvbnQtc2l6ZTogMWVtO1xuICBsaW5lLWhlaWdodDogMS4yNTtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMDA1ZW07XG4gIGZvbnQtZmFtaWx5OiAibnl0LWZyYW5rbGluIjtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cbkBtZWRpYSAobWF4LXdpZHRoOiA5OTJweCkge1xuICAuV2VsY29tZS1tb2R1bGVfZGF0ZV9fdTRrdmgge1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgfVxufVxuXG4uV2VsY29tZS1tb2R1bGVfd29yZGxlTnVtYmVyX19DYUJNWSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBmb250LXNpemU6IDFlbTtcbiAgbGluZS1oZWlnaHQ6IDEuMjU7XG4gIGxldHRlci1zcGFjaW5nOiAwLjAwNWVtO1xufVxuQG1lZGlhIChtYXgtd2lkdGg6IDk5MnB4KSB7XG4gIC5XZWxjb21lLW1vZHVsZV93b3JkbGVOdW1iZXJfX0NhQk1ZIHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbGluZS1oZWlnaHQ6IDE4cHg7XG4gIH1cbn1cblxuLldlbGNvbWUtbW9kdWxlX2J1dHRvbkNvbnRhaW5lcl9fMnl0NXQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbi1yZXZlcnNlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luLWJvdHRvbTogMjRweDtcbn1cbkBtZWRpYSAobWluLXdpZHRoOiA3NjBweCkge1xuICAuV2VsY29tZS1tb2R1bGVfYnV0dG9uQ29udGFpbmVyX18yeXQ1dCB7XG4gICAgbWFyZ2luLWJvdHRvbTogMjhweDtcbiAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICB9XG59XG4uV2VsY29tZS1tb2R1bGVfYnV0dG9uQ29udGFpbmVyX18yeXQ1dCAuV2VsY29tZS1tb2R1bGVfYnV0dG9uX190RUpsOSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgYm9yZGVyOiBub25lO1xuICBoZWlnaHQ6IDNlbTtcbiAgYm9yZGVyLXJhZGl1czogMS41ZW07XG4gIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMDVlbTtcbiAgbWFyZ2luOiAwIDEwcHggOHB4O1xuICBiYWNrZ3JvdW5kOiBibGFjaztcbiAgY29sb3I6IHdoaXRlO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGZvbnQtZmFtaWx5OiAibnl0LWZyYW5rbGluLTQwMCI7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIGxpbmUtaGVpZ2h0OiAyOHB4O1xuICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICBwYWRkaW5nOiAwIDJlbTtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbn1cbkBtZWRpYSAobWF4LXdpZHRoOiA3NjBweCkge1xuICAuV2VsY29tZS1tb2R1bGVfYnV0dG9uQ29udGFpbmVyX18yeXQ1dCAuV2VsY29tZS1tb2R1bGVfYnV0dG9uX190RUpsOSB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgd2lkdGg6IDE1NXB4O1xuICB9XG59XG5AbWVkaWEgKG1pbi13aWR0aDogNzYwcHgpIHtcbiAgLldlbGNvbWUtbW9kdWxlX2J1dHRvbkNvbnRhaW5lcl9fMnl0NXQgLldlbGNvbWUtbW9kdWxlX2J1dHRvbl9fdEVKbDkge1xuICAgIHdpZHRoOiAxODBweDtcbiAgfVxufVxuLldlbGNvbWUtbW9kdWxlX2J1dHRvbkNvbnRhaW5lcl9fMnl0NXQgLldlbGNvbWUtbW9kdWxlX2J1dHRvbl9fdEVKbDkuV2VsY29tZS1tb2R1bGVfc2Vjb25kYXJ5X19Ld2ZjcyB7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGNvbG9yOiBibGFjaztcbiAgYm9yZGVyOiAxcHggc29saWQ7XG4gIGxldHRlci1zcGFjaW5nOiAwLjAxZW07XG59XG4uV2VsY29tZS1tb2R1bGVfYnV0dG9uQ29udGFpbmVyX18yeXQ1dCBhIHtcbiAgYWxsOiB1bnNldDtcbn1cblxuLldlbGNvbWUtbW9kdWxlX2JhY2tfX05Lc050IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBoZWlnaHQ6IHZhcigtLWhlYWRlci1oZWlnaHQpO1xuICB0b3A6IDA7XG4gIGxlZnQ6IHZhcigtLWhlYWRlci1wYWRkaW5nLXgpO1xufVxuLldlbGNvbWUtbW9kdWxlX2JhY2tfX05Lc050IGJ1dHRvbjo6YmVmb3JlIHtcbiAgYmFja2dyb3VuZDogdmFyKC0taHlicmlkLWJhY2spIGNlbnRlciBuby1yZXBlYXQgIWltcG9ydGFudDtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbi14OiAwcHggIWltcG9ydGFudDtcbn0nCiAgKTsKCiAgZnVuY3Rpb24gbW8oZSkgewogICAgcmV0dXJuIGUucGVyc2lzdC5zdGF0czsKICB9CgogIHZhciBwbyA9IG4uY3JlYXRlU2VsZWN0b3IobW8sIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmdhbWVzUGxheWVkOwogICAgfSksCiAgICB5byA9IG4uY3JlYXRlU2VsZWN0b3IobW8sIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmdhbWVzV29uOwogICAgfSksCiAgICBnbyA9IG4uY3JlYXRlU2VsZWN0b3IobW8sIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLm1heFN0cmVhazsKICAgIH0pLAogICAgZm8gPSBuLmNyZWF0ZVNlbGVjdG9yKG1vLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5jdXJyZW50U3RyZWFrOwogICAgfSksCiAgICBobyA9IG4uY3JlYXRlU2VsZWN0b3IobW8sIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmd1ZXNzZXM7CiAgICB9KSwKICAgIGJvID0gbi5jcmVhdGVTZWxlY3RvcigKICAgICAgW1hlLCBZZSwgRmUsIE8sIEdlLCBJLCBMXSwKICAgICAgZnVuY3Rpb24gKGUsIHQsIG4sIGEsIG8sIHIsIHMpIHsKICAgICAgICB0ID0gIldvcmRsZSAiLmNvbmNhdCh0KTsKICAgICAgICAodCArPSAiICIuY29uY2F0KCJXSU4iID09PSBvID8gbiA6ICJYIiwgIi8iKS5jb25jYXQoV2UpKSwKICAgICAgICAgIGEgJiYgKHQgKz0gIioiKTsKICAgICAgICB2YXIgaSA9ICIiOwogICAgICAgIHJldHVybiAoCiAgICAgICAgICBlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgIChlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0ID0gIiI7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgImNvcnJlY3QiOgogICAgICAgICAgICAgICAgICAgICAgdCA9IHMgPyAi8J+fpyIgOiAi8J+fqSI7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICJwcmVzZW50IjoKICAgICAgICAgICAgICAgICAgICAgIHQgPSBzID8gIvCfn6YiIDogIvCfn6giOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiYWJzZW50IjoKICAgICAgICAgICAgICAgICAgICAgIHQgPSByID8gIuKsmyIgOiAi4qycIjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpICs9IHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgKGkgKz0gIlxuIikpOwogICAgICAgICAgfSksCiAgICAgICAgICB7IHRleHQ6ICIiLmNvbmNhdCh0LCAiXG5cbiIpLmNvbmNhdChpLnRyaW0oKSkgfQogICAgICAgICk7CiAgICAgIH0KICAgICk7CgogIGZ1bmN0aW9uIHdvKGUsIHQsIG4pIHsKICAgIHJldHVybiAoCiAgICAgIHQgaW4gZQogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHsKICAgICAgICAgICAgdmFsdWU6IG4sCiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICB3cml0YWJsZTogITAsCiAgICAgICAgICB9KQogICAgICAgIDogKGVbdF0gPSBuKSwKICAgICAgZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGtvKGUpIHsKICAgIHJldHVybiAoCiAgICAgIChlID0gZS5zbWFsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7IGNsYXNzTmFtZTogcCh3byh7fSwgY28uc21hbGxJY29uQW5kVGl0bGUsIGUpKSB9LAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IHAoY28uaWNvbiwgd28oe30sIGNvLnNtYWxsLCBlKSkgfSksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImRpdiIsCiAgICAgICAgICB7IGNsYXNzTmFtZTogcChjby50aXRsZSwgd28oe30sIGNvLnNtYWxsLCBlKSkgfSwKICAgICAgICAgICJXb3JkbGUiCiAgICAgICAgKQogICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gX28oZSkgewogICAgcmV0dXJuICgKICAgICAgKGUgPSBlLmNoaWxkcmVuKSwgXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogY28uc3VidGl0bGUgfSwgZSkKICAgICk7CiAgfQoKICBmdW5jdGlvbiB2byhlKSB7CiAgICB2YXIgdCA9IGUuZGF5T2Zmc2V0OwogICAgaWYgKCF0KSByZXR1cm4gbnVsbDsKICAgIHZhciBuLAogICAgICBlID0KICAgICAgICAoKG4gPSB0KSwKICAgICAgICAoZSA9IG5ldyBEYXRlKGtlLnZhbHVlT2YoKSkpLnNldERhdGUoZS5nZXREYXRlKCkgKyBuKSwKICAgICAgICBlLnRvTG9jYWxlRGF0ZVN0cmluZygiZW4tdXMiLCB7CiAgICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgICBtb250aDogImxvbmciLAogICAgICAgICAgZGF5OiAibnVtZXJpYyIsCiAgICAgICAgfSkpOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgImRpdiIsCiAgICAgIHsgY2xhc3NOYW1lOiBjby5kYXRlQ29udGFpbmVyIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNvLmRhdGUgfSwgZSksCiAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNvLndvcmRsZU51bWJlciB9LCAiTm8uICIsIHQpCiAgICApOwogIH0KCiAgZnVuY3Rpb24geG8oZSkgewogICAgcmV0dXJuICgKICAgICAgKGUgPSBlLmJ1dHRvbnMpLAogICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgImRpdiIsCiAgICAgICAgeyBjbGFzc05hbWU6IGNvLmJ1dHRvbkNvbnRhaW5lciB9LAogICAgICAgIGUKICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuICFlLmhpZGU7CiAgICAgICAgICB9KQogICAgICAgICAgLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCA9IGUub25DbGljaywKICAgICAgICAgICAgICBuID0gZS50ZXh0LAogICAgICAgICAgICAgIGEgPSBlLnNlY29uZGFyeSwKICAgICAgICAgICAgICBlID0gZS5pc0xvZ2luLAogICAgICAgICAgICAgIGEgPSBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAiYnV0dG9uIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAga2V5OiBuLAogICAgICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAgICAgb25DbGljazogdCwKICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwKGNvLmJ1dHRvbiwgd28oe30sIGNvLnNlY29uZGFyeSwgYSkpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gZSA/IF8uY3JlYXRlRWxlbWVudCh1bywgeyBrZXk6IG4sIG9wdEluOiAhMSB9LCBhKSA6IGE7CiAgICAgICAgICB9KQogICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gU28oZSwgdCkgewogICAgdmFyIG4gPSBnLnVzZVJlZihlKTsKICAgIGcudXNlTGF5b3V0RWZmZWN0KAogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgbi5jdXJyZW50ID0gZTsKICAgICAgfSwKICAgICAgW2VdCiAgICApLAogICAgICBnLnVzZUVmZmVjdCgKICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAodCB8fCAwID09PSB0KSB7CiAgICAgICAgICAgIHZhciBlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4uY3VycmVudCgpOwogICAgICAgICAgICB9LCB0KTsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgW3RdCiAgICAgICk7CiAgfQoKICB2YXIgRW8gPSB7CiAgICBzcGlubmVyOiAiU3Bpbm5lci1tb2R1bGVfc3Bpbm5lcl9fOXM4RzIiLAogICAgc3BpbjogIlNwaW5uZXItbW9kdWxlX3NwaW5fX2ItbUJMIiwKICB9OwoKICBmdW5jdGlvbiBqbyhlKSB7CiAgICB2YXIgdCA9IGUuY2lyY2xlQ29sb3IsCiAgICAgIGUgPSBlLmJhckNvbG9yOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgInN2ZyIsCiAgICAgIHsKICAgICAgICBjbGFzc05hbWU6IEVvLnNwaW5uZXIsCiAgICAgICAgd2lkdGg6ICI4MiIsCiAgICAgICAgaGVpZ2h0OiAiODIiLAogICAgICAgIHZpZXdCb3g6ICIwIDAgODIgODIiLAogICAgICAgIGZpbGw6ICJub25lIiwKICAgICAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgICAgfSwKICAgICAgXy5jcmVhdGVFbGVtZW50KCJjaXJjbGUiLCB7CiAgICAgICAgY3g6ICI0MSIsCiAgICAgICAgY3k6ICI0MSIsCiAgICAgICAgcjogIjQwLjAzOTEiLAogICAgICAgIHN0cm9rZTogdm9pZCAwID09PSB0ID8gIiNERkRGREYiIDogdCwKICAgICAgICBzdHJva2VXaWR0aDogIjEuOTIxODgiLAogICAgICB9KSwKICAgICAgXy5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICAgICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgICAgICBkOiAiTTE5LjQ3NjMgNzMuNjk4M0wxOC40NDk3IDc1LjMyMzdDMjQuODk1NiA3OS41NDUyIDMyLjYwMjggODIgNDAuODgzNCA4MkM2Mi44Mzk2IDgyIDgwLjc2NDkgNjQuNzQxMyA4MS44MzMgNDMuMDVINzkuOTA4N0M3OC44NDI1IDYzLjY3OTMgNjEuNzc4IDgwLjA3ODEgNDAuODgzNCA4MC4wNzgxQzMyLjk4MDIgODAuMDc4MSAyNS42MjUxIDc3LjczMiAxOS40NzYzIDczLjY5ODNaIiwKICAgICAgICBmaWxsOiB2b2lkIDAgPT09IGUgPyAiIzk1OTU5NSIgOiBlLAogICAgICB9KQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHpvKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPQogICAgICAgICAgbnVsbCA9PSBlCiAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICA6ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgICAgICBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgcyA9ICEwLAogICAgICAgICAgICBpID0gITE7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIG4gPSBuLmNhbGwoZSk7CiAgICAgICAgICAgICAgIShzID0gKGEgPSBuLm5leHQoKSkuZG9uZSkgJiYKICAgICAgICAgICAgICAoci5wdXNoKGEudmFsdWUpLCAhdCB8fCByLmxlbmd0aCAhPT0gdCk7CiAgICAgICAgICAgICAgcyA9ICEwCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIChpID0gITApLCAobyA9IGUpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzIHx8IG51bGwgPT0gbi5yZXR1cm4gfHwgbi5yZXR1cm4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoaSkgdGhyb3cgbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSByZXR1cm4gTm8oZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBObyhlLCB0KQogICAgICAgICAgICA6IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gTm8oZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICBrKAogICAgIi5TcGlubmVyLW1vZHVsZV9zcGlubmVyX185czhHMiB7XG4gIC13ZWJraXQtYW5pbWF0aW9uOiBTcGlubmVyLW1vZHVsZV9zcGluX19iLW1CTCAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgICAgYW5pbWF0aW9uOiBTcGlubmVyLW1vZHVsZV9zcGluX19iLW1CTCAxcyBsaW5lYXIgaW5maW5pdGU7XG59XG5cbkAtd2Via2l0LWtleWZyYW1lcyBTcGlubmVyLW1vZHVsZV9zcGluX19iLW1CTCB7XG4gIDAlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgfVxuICAxMDAlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICB9XG59XG5cbkBrZXlmcmFtZXMgU3Bpbm5lci1tb2R1bGVfc3Bpbl9fYi1tQkwge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTtcbiAgfVxufSIKICApOwoKICBmdW5jdGlvbiBDbyhyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4gPSB0KCksCiAgICAgICAgYSA9IEZlKG4pLAogICAgICAgIG8gPSBHZShuKSwKICAgICAgICB0ID0gQmUobiksCiAgICAgICAgbiA9IGRhKG4pOwogICAgICBpZiAociA9PT0gYSAtIDEgJiYgKGUoeyB0eXBlOiBBbyB9KSwgWyJXSU4iLCAiRkFJTCJdLmluY2x1ZGVzKG8pKSkgewogICAgICAgIGlmIChuKSByZXR1cm4gZShlZSgic3RhdHMiKSk7CiAgICAgICAgIldJTiIgPT09IG8gJiYKICAgICAgICAgICgoYSA9IERlW2EgLSAxXSksCiAgICAgICAgICBlKAogICAgICAgICAgICBzZSh7CiAgICAgICAgICAgICAgdGV4dDogYSwKICAgICAgICAgICAgICBkdXJhdGlvbjogMmUzLAogICAgICAgICAgICAgIHdpbjogITAsCiAgICAgICAgICAgIH0pCiAgICAgICAgICApKSwKICAgICAgICAgICJGQUlMIiA9PT0gbyAmJiBlKHNlKHsgdGV4dDogdC50b1VwcGVyQ2FzZSgpLCBkdXJhdGlvbjogMSAvIDAgfSkpLAogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGUoZWUoInN0YXRzIikpOwogICAgICAgICAgfSwgMjUwMCk7CiAgICAgIH0KICAgIH07CiAgfQoKICB2YXIgQW8gPSAid29yZGxlL3RyYW5zaWVudC9MQVNUX1RJTEVfUkVWRUFMIiwKICAgIE9vID0gIndvcmRsZS90cmFuc2llbnQvUkVNT1ZFX0lOVkFMSUQiLAogICAgSW8gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7IHR5cGU6IE9vIH07CiAgICB9LAogICAgTG8gPSB7CiAgICAgIHRpbGU6ICJUaWxlLW1vZHVsZV90aWxlX18zYXlJWiIsCiAgICAgIFBvcEluOiAiVGlsZS1tb2R1bGVfUG9wSW5fX2J1N2hiIiwKICAgICAgRmxpcEluOiAiVGlsZS1tb2R1bGVfRmxpcEluX19zY2pweiIsCiAgICAgIEZsaXBPdXQ6ICJUaWxlLW1vZHVsZV9GbGlwT3V0X19lNERSSSIsCiAgICB9OwoKICBmdW5jdGlvbiBUbyhlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0KICAgICAgICAgIG51bGwgPT0gZQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICAgICAgZVsiQEBpdGVyYXRvciJdOwogICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgIHZhciBhLAogICAgICAgICAgICBvLAogICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgIHMgPSAhMCwKICAgICAgICAgICAgaSA9ICExOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBuID0gbi5jYWxsKGUpOwogICAgICAgICAgICAgICEocyA9IChhID0gbi5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKHIucHVzaChhLnZhbHVlKSwgIXQgfHwgci5sZW5ndGggIT09IHQpOwogICAgICAgICAgICAgIHMgPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAoaSA9ICEwKSwgKG8gPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcyB8fCBudWxsID09IG4ucmV0dXJuIHx8IG4ucmV0dXJuKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKGkpIHRocm93IG87CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIFBvKGUsIHQpOwogICAgICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwgLTEpOwogICAgICAgICAgcmV0dXJuICJNYXAiID09PQogICAgICAgICAgICAobiA9ICJPYmplY3QiID09PSBuICYmIGUuY29uc3RydWN0b3IgPyBlLmNvbnN0cnVjdG9yLm5hbWUgOiBuKSB8fAogICAgICAgICAgICAiU2V0IiA9PT0gbgogICAgICAgICAgICA/IEFycmF5LmZyb20oZSkKICAgICAgICAgICAgOiAiQXJndW1lbnRzIiA9PT0gbiB8fAogICAgICAgICAgICAgIC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pCiAgICAgICAgICAgID8gUG8oZSwgdCkKICAgICAgICAgICAgOiB2b2lkIDA7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iCiAgICAgICAgKTsKICAgICAgfSkoKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIFBvKGUsIHQpIHsKICAgIChudWxsID09IHQgfHwgdCA+IGUubGVuZ3RoKSAmJiAodCA9IGUubGVuZ3RoKTsKICAgIGZvciAodmFyIG4gPSAwLCBhID0gbmV3IEFycmF5KHQpOyBuIDwgdDsgbisrKSBhW25dID0gZVtuXTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gTW8oZSkgewogICAgdmFyIHQgPSBlLnJvd0luZGV4LAogICAgICBuID0gZS5sYXN0LAogICAgICBhID0gZS5sZXR0ZXIsCiAgICAgIG8gPSBlLmV2YWx1YXRpb24sCiAgICAgIHIgPSBUKCksCiAgICAgIHMgPSBfLnVzZVJlZihudWxsKSwKICAgICAgaSA9IFRvKF8udXNlU3RhdGUoImlkbGUiKSwgMiksCiAgICAgIGwgPSBpWzBdLAogICAgICBjID0gaVsxXSwKICAgICAgZSA9IFRvKF8udXNlU3RhdGUoITEpLCAyKSwKICAgICAgaSA9IGVbMF0sCiAgICAgIHUgPSBlWzFdOwogICAgXy51c2VFZmZlY3QoCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICBjKGEgPyAicG9wIiA6ICJpZGxlIik7CiAgICAgIH0sCiAgICAgIFthXQogICAgKSwKICAgICAgXy51c2VFZmZlY3QoCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgbyAmJiBjKCJmbGlwLWluIik7CiAgICAgICAgfSwKICAgICAgICBbb10KICAgICAgKTsKICAgIGUgPSAiZW1wdHkiOwogICAgcmV0dXJuICgKICAgICAgaSAmJiBvID8gKGUgPSBvKSA6IGEgJiYgKGUgPSAidGJkIiksCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7CiAgICAgICAgICBjbGFzc05hbWU6IExvLnRpbGUsCiAgICAgICAgICByZWY6IHMsCiAgICAgICAgICBvbkFuaW1hdGlvbkVuZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5hbmltYXRpb25OYW1lID09PSBMby5Qb3BJbiAmJiAicG9wIiA9PT0gbCAmJiBjKCJpZGxlIiksCiAgICAgICAgICAgICAgZS5hbmltYXRpb25OYW1lID09PSBMby5GbGlwSW4gJiYgKGMoImZsaXAtb3V0IiksIHUoITApKSwKICAgICAgICAgICAgICBlLmFuaW1hdGlvbk5hbWUgPT09IExvLkZsaXBPdXQgJiYKICAgICAgICAgICAgICAgIChjKCJpZGxlIiksIG4gJiYgcy5jdXJyZW50ICYmIHZvaWQgMCAhPT0gdCAmJiByKENvKHQpKSk7CiAgICAgICAgICB9LAogICAgICAgICAgImRhdGEtc3RhdGUiOiBlLAogICAgICAgICAgImRhdGEtYW5pbWF0aW9uIjogbCB8fCAiaWRsZSIsCiAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAidGlsZSIsCiAgICAgICAgfSwKICAgICAgICBhCiAgICAgICkKICAgICk7CiAgfQoKICBrKAogICAgJy5UaWxlLW1vZHVsZV90aWxlX18zYXlJWiB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMnJlbTtcbiAgbGluZS1oZWlnaHQ6IDJyZW07XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBjb2xvcjogdmFyKC0tdGlsZS10ZXh0LWNvbG9yKTtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuLlRpbGUtbW9kdWxlX3RpbGVfXzNheUlaOjpiZWZvcmUge1xuICBjb250ZW50OiAiIjtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBwYWRkaW5nLWJvdHRvbTogMTAwJTtcbn1cblxuLyogQWxsb3cgdGlsZXMgdG8gYmUgc21hbGxlciBvbiBzbWFsbCBzY3JlZW5zICovXG5AbWVkaWEgKG1heC1oZWlnaHQ6IDYwMHB4KSB7XG4gIC5UaWxlLW1vZHVsZV90aWxlX18zYXlJWiB7XG4gICAgZm9udC1zaXplOiAxZW07XG4gICAgbGluZS1oZWlnaHQ6IDFlbTtcbiAgfVxufVxuLlRpbGUtbW9kdWxlX3RpbGVfXzNheUlaW2RhdGEtc3RhdGU9ZW1wdHldIHtcbiAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tY29sb3ItdG9uZS00KTtcbn1cblxuLlRpbGUtbW9kdWxlX3RpbGVfXzNheUlaW2RhdGEtc3RhdGU9dGJkXSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtNyk7XG4gIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtMyk7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10b25lLTEpO1xufVxuXG4uVGlsZS1tb2R1bGVfdGlsZV9fM2F5SVpbZGF0YS1zdGF0ZT1jb3JyZWN0XSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWNvcnJlY3QpO1xufVxuXG4uVGlsZS1tb2R1bGVfdGlsZV9fM2F5SVpbZGF0YS1zdGF0ZT1wcmVzZW50XSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXByZXNlbnQpO1xufVxuXG4uVGlsZS1tb2R1bGVfdGlsZV9fM2F5SVpbZGF0YS1zdGF0ZT1hYnNlbnRdIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYWJzZW50KTtcbn1cblxuLlRpbGUtbW9kdWxlX3RpbGVfXzNheUlaW2RhdGEtYW5pbWF0aW9uPXBvcF0ge1xuICAtd2Via2l0LWFuaW1hdGlvbi1uYW1lOiBUaWxlLW1vZHVsZV9Qb3BJbl9fYnU3aGI7XG4gICAgICAgICAgYW5pbWF0aW9uLW5hbWU6IFRpbGUtbW9kdWxlX1BvcEluX19idTdoYjtcbiAgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IDEwMG1zO1xuICAgICAgICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMTAwbXM7XG59XG5cbkAtd2Via2l0LWtleWZyYW1lcyBUaWxlLW1vZHVsZV9Qb3BJbl9fYnU3aGIge1xuICBmcm9tIHtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDAuOCk7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICA0MCUge1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG59XG5cbkBrZXlmcmFtZXMgVGlsZS1tb2R1bGVfUG9wSW5fX2J1N2hiIHtcbiAgZnJvbSB7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwLjgpO1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgNDAlIHtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuLlRpbGUtbW9kdWxlX3RpbGVfXzNheUlaW2RhdGEtYW5pbWF0aW9uPWZsaXAtaW5dIHtcbiAgLXdlYmtpdC1hbmltYXRpb24tbmFtZTogVGlsZS1tb2R1bGVfRmxpcEluX19zY2pwejtcbiAgICAgICAgICBhbmltYXRpb24tbmFtZTogVGlsZS1tb2R1bGVfRmxpcEluX19zY2pwejtcbiAgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IDI1MG1zO1xuICAgICAgICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMjUwbXM7XG4gIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbjtcbiAgICAgICAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluO1xufVxuXG5ALXdlYmtpdC1rZXlmcmFtZXMgVGlsZS1tb2R1bGVfRmxpcEluX19zY2pweiB7XG4gIDAlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZVgoMCk7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGVYKC05MGRlZyk7XG4gIH1cbn1cblxuQGtleWZyYW1lcyBUaWxlLW1vZHVsZV9GbGlwSW5fX3NjanB6IHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogcm90YXRlWCgwKTtcbiAgfVxuICAxMDAlIHtcbiAgICB0cmFuc2Zvcm06IHJvdGF0ZVgoLTkwZGVnKTtcbiAgfVxufVxuLlRpbGUtbW9kdWxlX3RpbGVfXzNheUlaW2RhdGEtYW5pbWF0aW9uPWZsaXAtb3V0XSB7XG4gIC13ZWJraXQtYW5pbWF0aW9uLW5hbWU6IFRpbGUtbW9kdWxlX0ZsaXBPdXRfX2U0RFJJO1xuICAgICAgICAgIGFuaW1hdGlvbi1uYW1lOiBUaWxlLW1vZHVsZV9GbGlwT3V0X19lNERSSTtcbiAgLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246IDI1MG1zO1xuICAgICAgICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMjUwbXM7XG4gIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZS1pbjtcbiAgICAgICAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluO1xufVxuXG5ALXdlYmtpdC1rZXlmcmFtZXMgVGlsZS1tb2R1bGVfRmxpcE91dF9fZTREUkkge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGVYKC05MGRlZyk7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGVYKDApO1xuICB9XG59XG5cbkBrZXlmcmFtZXMgVGlsZS1tb2R1bGVfRmxpcE91dF9fZTREUkkge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGVYKC05MGRlZyk7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiByb3RhdGVYKDApO1xuICB9XG59JwogICk7CiAgdmFyIEJvID0gewogICAgcm93OiAiUm93LW1vZHVsZV9yb3dfX2RFSGZOIiwKICAgIGludmFsaWQ6ICJSb3ctbW9kdWxlX2ludmFsaWRfXzE2a1IxIiwKICAgIFNoYWtlOiAiUm93LW1vZHVsZV9TaGFrZV9fNGkwVDMiLAogICAgd2luOiAiUm93LW1vZHVsZV93aW5fX05GN3V5IiwKICAgIEJvdW5jZTogIlJvdy1tb2R1bGVfQm91bmNlX183Tk8ydCIsCiAgfTsKCiAgZnVuY3Rpb24gUm8oZSwgdCkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9CiAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgIDogKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgICAgIGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICBpZiAobnVsbCAhPSBuKSB7CiAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbywKICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICBzID0gITAsCiAgICAgICAgICAgIGkgPSAhMTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbiA9IG4uY2FsbChlKTsKICAgICAgICAgICAgICAhKHMgPSAoYSA9IG4ubmV4dCgpKS5kb25lKSAmJgogICAgICAgICAgICAgIChyLnB1c2goYS52YWx1ZSksICF0IHx8IHIubGVuZ3RoICE9PSB0KTsKICAgICAgICAgICAgICBzID0gITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKGkgPSAhMCksIChvID0gZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHMgfHwgbnVsbCA9PSBuLnJldHVybiB8fCBuLnJldHVybigpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChpKSB0aHJvdyBvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBXbyhlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IFdvKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBXbyhlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgYSA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgYVtuXSA9IGVbbl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIEhvKGUpIHsKICAgIHZhciBuID0gZS5pbmRleCwKICAgICAgYSA9IGUubGV0dGVycywKICAgICAgdCA9IGUuZXZhbHVhdGlvbiwKICAgICAgbyA9IGUubGVuZ3RoLAogICAgICByID0gZS5pbnZhbGlkLAogICAgICBzID0gZS53aW4sCiAgICAgIGkgPSBlLnJlbW92ZUludmFsaWQsCiAgICAgIGwgPSBSbyhfLnVzZVN0YXRlKDApLCAyKSwKICAgICAgYyA9IGxbMF0sCiAgICAgIHUgPSBsWzFdLAogICAgICBlID0gXy51c2VSZWYobnVsbCksCiAgICAgIGQgPSBfLnVzZVJlZighMSksCiAgICAgIG0gPSBudWxsID09IHQgPyB2b2lkIDAgOiB0LnNsaWNlKDAsIGMpOwogICAgcmV0dXJuICgKICAgICAgXy51c2VFZmZlY3QoCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgdCAmJgogICAgICAgICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IG87IHQgKz0gMSkKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB1KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgKyAxOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sIGUgKiB0KTsKICAgICAgICAgICAgfSkoZC5jdXJyZW50ID8gMzAwIDogMTAwKSwKICAgICAgICAgICAgKGQuY3VycmVudCA9ICEwKTsKICAgICAgICB9LAogICAgICAgIFt0XQogICAgICApLAogICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgImRpdiIsCiAgICAgICAgewogICAgICAgICAgY2xhc3NOYW1lOiBwKAogICAgICAgICAgICBCby5yb3csCiAgICAgICAgICAgICgobCA9IHt9KSwKICAgICAgICAgICAgKGMgPSBCby5pbnZhbGlkKSwKICAgICAgICAgICAgKHIgPSByKSwKICAgICAgICAgICAgYyBpbiBsCiAgICAgICAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkobCwgYywgewogICAgICAgICAgICAgICAgICB2YWx1ZTogciwKICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgOiAobFtjXSA9IHIpLAogICAgICAgICAgICBsKQogICAgICAgICAgKSwKICAgICAgICAgIHJlZjogZSwKICAgICAgICAgIG9uQW5pbWF0aW9uRW5kOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLmFuaW1hdGlvbk5hbWUgPT09IEJvLlNoYWtlICYmIGkoKTsKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBBcnJheShvKQogICAgICAgICAgLmZpbGwoITApCiAgICAgICAgICAubWFwKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAga2V5OiB0LAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBzID8gQm8ud2luIDogIiIsCiAgICAgICAgICAgICAgICBzdHlsZTogeyBhbmltYXRpb25EZWxheTogIiIuY29uY2F0KDEwMCAqIHQsICJtcyIpIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoTW8sIHsKICAgICAgICAgICAgICAgIHJvd0luZGV4OiBuLAogICAgICAgICAgICAgICAgbGV0dGVyOiBhW3RdIHx8ICIiLAogICAgICAgICAgICAgICAgZXZhbHVhdGlvbjogbSAmJiBtW3RdLAogICAgICAgICAgICAgICAgbGFzdDogdCA9PT0gbyAtIDEsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pCiAgICAgICkKICAgICk7CiAgfQoKICBrKAogICAgIi5Sb3ctbW9kdWxlX3Jvd19fZEVIZk4ge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg1LCAxZnIpO1xuICBncmlkLWdhcDogNXB4O1xufVxuLlJvdy1tb2R1bGVfcm93X19kRUhmTi5Sb3ctbW9kdWxlX2ludmFsaWRfXzE2a1IxIHtcbiAgLXdlYmtpdC1hbmltYXRpb24tbmFtZTogUm93LW1vZHVsZV9TaGFrZV9fNGkwVDM7XG4gICAgICAgICAgYW5pbWF0aW9uLW5hbWU6IFJvdy1tb2R1bGVfU2hha2VfXzRpMFQzO1xuICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogNjAwbXM7XG4gICAgICAgICAgYW5pbWF0aW9uLWR1cmF0aW9uOiA2MDBtcztcbn1cblxuLlJvdy1tb2R1bGVfd2luX19ORjd1eSB7XG4gIC13ZWJraXQtYW5pbWF0aW9uLW5hbWU6IFJvdy1tb2R1bGVfQm91bmNlX183Tk8ydDtcbiAgICAgICAgICBhbmltYXRpb24tbmFtZTogUm93LW1vZHVsZV9Cb3VuY2VfXzdOTzJ0O1xuICAtd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjogMTAwMG1zO1xuICAgICAgICAgIGFuaW1hdGlvbi1kdXJhdGlvbjogMTAwMG1zO1xufVxuXG5ALXdlYmtpdC1rZXlmcmFtZXMgUm93LW1vZHVsZV9Cb3VuY2VfXzdOTzJ0IHtcbiAgMCUsIDIwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xuICB9XG4gIDQwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0zMHB4KTtcbiAgfVxuICA1MCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSg1cHgpO1xuICB9XG4gIDYwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xNXB4KTtcbiAgfVxuICA4MCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgycHgpO1xuICB9XG4gIDEwMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgfVxufVxuXG5Aa2V5ZnJhbWVzIFJvdy1tb2R1bGVfQm91bmNlX183Tk8ydCB7XG4gIDAlLCAyMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTtcbiAgfVxuICA0MCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMzBweCk7XG4gIH1cbiAgNTAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNXB4KTtcbiAgfVxuICA2MCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMTVweCk7XG4gIH1cbiAgODAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMnB4KTtcbiAgfVxuICAxMDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7XG4gIH1cbn1cbkAtd2Via2l0LWtleWZyYW1lcyBSb3ctbW9kdWxlX1NoYWtlX180aTBUMyB7XG4gIDEwJSwgOTAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTFweCk7XG4gIH1cbiAgMjAlLCA4MCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgycHgpO1xuICB9XG4gIDMwJSwgNTAlLCA3MCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNHB4KTtcbiAgfVxuICA0MCUsIDYwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDRweCk7XG4gIH1cbn1cbkBrZXlmcmFtZXMgUm93LW1vZHVsZV9TaGFrZV9fNGkwVDMge1xuICAxMCUsIDkwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xcHgpO1xuICB9XG4gIDIwJSwgODAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMnB4KTtcbiAgfVxuICAzMCUsIDUwJSwgNzAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTRweCk7XG4gIH1cbiAgNDAlLCA2MCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCg0cHgpO1xuICB9XG59IgogICk7CiAgdmFyIERvID0gewogICAgYm9hcmRDb250YWluZXI6ICJCb2FyZC1tb2R1bGVfYm9hcmRDb250YWluZXJfX2NLYi1DIiwKICAgIGJvYXJkOiAiQm9hcmQtbW9kdWxlX2JvYXJkX19sYnpsZiIsCiAgfTsKICBrKAogICAgIi5Cb2FyZC1tb2R1bGVfYm9hcmRDb250YWluZXJfX2NLYi1DIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGZsZXgtZ3JvdzogMTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cblxuLkJvYXJkLW1vZHVsZV9ib2FyZF9fbGJ6bGYge1xuICBkaXNwbGF5OiBncmlkO1xuICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCg2LCAxZnIpO1xuICBncmlkLWdhcDogNXB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xufSIKICApOwogIHZhciBxbyA9IDM1MDsKCiAgZnVuY3Rpb24gR28oKSB7CiAgICB2YXIgbiA9IFAocWUpLAogICAgICBhID0gUChYZSksCiAgICAgIG8gPSBQKEZlKSwKICAgICAgciA9IFAobWEpLAogICAgICBzID0gUChwYSksCiAgICAgIGkgPSBUKCksCiAgICAgIGwgPSBfLnVzZVJlZihudWxsKSwKICAgICAgYyA9IF8udXNlUmVmKG51bGwpOwogICAgcmV0dXJuICgKICAgICAgXy51c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGUoKSB7CiAgICAgICAgICB2YXIgZSwKICAgICAgICAgICAgdCA9IGwuY3VycmVudCwKICAgICAgICAgICAgbiA9IGMuY3VycmVudDsKICAgICAgICAgIHQgJiYKICAgICAgICAgICAgbiAmJgogICAgICAgICAgICAoKGUgPSBNYXRoLm1pbihNYXRoLmZsb29yKHQuY2xpZW50SGVpZ2h0ICogKEhlIC8gV2UpKSwgcW8pKSwKICAgICAgICAgICAgKHQgPSBNYXRoLmZsb29yKGUgLyBIZSkgKiBXZSksCiAgICAgICAgICAgIChuLnN0eWxlLndpZHRoID0gIiIuY29uY2F0KGUsICJweCIpKSwKICAgICAgICAgICAgKG4uc3R5bGUuaGVpZ2h0ID0gIiIuY29uY2F0KHQsICJweCIpKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgZSgpLAogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGUpLAogICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGUpOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0sIFtdKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsKICAgICAgICAgIGNsYXNzTmFtZTogRG8uYm9hcmRDb250YWluZXIsCiAgICAgICAgICByZWY6IGwsCiAgICAgICAgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiZGl2IiwKICAgICAgICAgIHsgY2xhc3NOYW1lOiBEby5ib2FyZCwgcmVmOiBjIH0sCiAgICAgICAgICBBcnJheShXZSkKICAgICAgICAgICAgLmZpbGwoITApCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KEhvLCB7CiAgICAgICAgICAgICAgICBrZXk6IHQsCiAgICAgICAgICAgICAgICBpbmRleDogdCwKICAgICAgICAgICAgICAgIGxldHRlcnM6IG5bdF0gfHwgIiIsCiAgICAgICAgICAgICAgICBsZW5ndGg6IEhlLAogICAgICAgICAgICAgICAgZXZhbHVhdGlvbjogYVt0XSwKICAgICAgICAgICAgICAgIGludmFsaWQ6IHQgPT09IG8gJiYgciwKICAgICAgICAgICAgICAgIHdpbjogdCA9PT0gbyAtIDEgJiYgcywKICAgICAgICAgICAgICAgIHJlbW92ZUludmFsaWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGkoSW8oKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgICkKICAgICAgKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIEZvKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPQogICAgICAgICAgbnVsbCA9PSBlCiAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICA6ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgICAgICBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgcyA9ICEwLAogICAgICAgICAgICBpID0gITE7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIG4gPSBuLmNhbGwoZSk7CiAgICAgICAgICAgICAgIShzID0gKGEgPSBuLm5leHQoKSkuZG9uZSkgJiYKICAgICAgICAgICAgICAoci5wdXNoKGEudmFsdWUpLCAhdCB8fCByLmxlbmd0aCAhPT0gdCk7CiAgICAgICAgICAgICAgcyA9ICEwCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIChpID0gITApLCAobyA9IGUpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzIHx8IG51bGwgPT0gbi5yZXR1cm4gfHwgbi5yZXR1cm4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoaSkgdGhyb3cgbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSByZXR1cm4gVm8oZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBWbyhlLCB0KQogICAgICAgICAgICA6IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gVm8oZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICB2YXIgWW8gPSB7IHdpZHRoOiAiMjQiLCBoZWlnaHQ6ICIyNCIsIHZpZXdCb3g6ICIwIDAgMjQgMjQiIH0sCiAgICBVbyA9IHsgd2lkdGg6ICIyNCIsIGhlaWdodDogIjI0Iiwgdmlld0JveDogIjQgNCAyNCAyNCIgfSwKICAgIFpvID0geyB3aWR0aDogIjI4IiwgaGVpZ2h0OiAiMjgiLCB2aWV3Qm94OiAiNCA0IDI0IDI0IiB9LAogICAgWG8gPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IEZvKGcudXNlU3RhdGUoVW8pLCAyKSwKICAgICAgICBuID0gdFswXSwKICAgICAgICBhID0gdFsxXSwKICAgICAgICBvID0KICAgICAgICAgICJoZWxwIiA9PT0gZSB8fAogICAgICAgICAgInN0YXRpc3RpY3MiID09PSBlIHx8CiAgICAgICAgICAic2V0dGluZ3MiID09PSBlIHx8CiAgICAgICAgICAic2F2ZSIgPT09IGU7CiAgICAgIHJldHVybiAoCiAgICAgICAgZy51c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgICAgICAgZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgdmFyIGUgPSBVbzsKICAgICAgICAgICAgd2luZG93Lm1hdGNoTWVkaWEoIihtaW4td2lkdGg6IDc2OHB4KSIpLm1hdGNoZXMgJiYgKGUgPSBabyksIGEoZSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgbyA/IChlKCksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBlKSkgOiBhKFlvKSwKICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIG8gJiYgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICApOwogICAgICAgIH0sIFtdKSwKICAgICAgICBuCiAgICAgICk7CiAgICB9LAogICAgS28gPSB7CiAgICAgIGhlbHA6ICJNMTQuODMzMyAyM0gxNy4xNjY2VjIwLjY2NjdIMTQuODMzM1YyM1pNMTUuOTk5OSA0LjMzMzM0QzkuNTU5OTIgNC4zMzMzNCA0LjMzMzI1IDkuNTYwMDEgNC4zMzMyNSAxNkM0LjMzMzI1IDIyLjQ0IDkuNTU5OTIgMjcuNjY2NyAxNS45OTk5IDI3LjY2NjdDMjIuNDM5OSAyNy42NjY3IDI3LjY2NjYgMjIuNDQgMjcuNjY2NiAxNkMyNy42NjY2IDkuNTYwMDEgMjIuNDM5OSA0LjMzMzM0IDE1Ljk5OTkgNC4zMzMzNFpNMTUuOTk5OSAyNS4zMzMzQzEwLjg1NDkgMjUuMzMzMyA2LjY2NjU5IDIxLjE0NSA2LjY2NjU5IDE2QzYuNjY2NTkgMTAuODU1IDEwLjg1NDkgNi42NjY2OCAxNS45OTk5IDYuNjY2NjhDMjEuMTQ0OSA2LjY2NjY4IDI1LjMzMzMgMTAuODU1IDI1LjMzMzMgMTZDMjUuMzMzMyAyMS4xNDUgMjEuMTQ0OSAyNS4zMzMzIDE1Ljk5OTkgMjUuMzMzM1pNMTUuOTk5OSA5LjAwMDAxQzEzLjQyMTYgOS4wMDAwMSAxMS4zMzMzIDExLjA4ODMgMTEuMzMzMyAxMy42NjY3SDEzLjY2NjZDMTMuNjY2NiAxMi4zODMzIDE0LjcxNjYgMTEuMzMzMyAxNS45OTk5IDExLjMzMzNDMTcuMjgzMyAxMS4zMzMzIDE4LjMzMzMgMTIuMzgzMyAxOC4zMzMzIDEzLjY2NjdDMTguMzMzMyAxNiAxNC44MzMzIDE1LjcwODMgMTQuODMzMyAxOS41SDE3LjE2NjZDMTcuMTY2NiAxNi44NzUgMjAuNjY2NiAxNi41ODMzIDIwLjY2NjYgMTMuNjY2N0MyMC42NjY2IDExLjA4ODMgMTguNTc4MyA5LjAwMDAxIDE1Ljk5OTkgOS4wMDAwMVoiLAogICAgICBzZXR0aW5nczoKICAgICAgICAiTTI1LjUyIDE3LjI1MzRDMjUuNTczMyAxNi44NTM0IDI1LjYgMTYuNDQgMjUuNiAxNkMyNS42IDE1LjU3MzQgMjUuNTczMyAxNS4xNDY3IDI1LjUwNjcgMTQuNzQ2N0wyOC4yMTMzIDEyLjY0QzI4LjQ1MzMgMTIuNDUzNCAyOC41MiAxMi4wOTM0IDI4LjM3MzMgMTEuODI2N0wyNS44MTMzIDcuNDAwMDRDMjUuNjUzMyA3LjEwNjcxIDI1LjMyIDcuMDEzMzggMjUuMDI2NyA3LjEwNjcxTDIxLjg0IDguMzg2NzFDMjEuMTczMyA3Ljg4MDA0IDIwLjQ2NjcgNy40NTMzOCAxOS42OCA3LjEzMzM4TDE5LjIgMy43NDY3MUMxOS4xNDY3IDMuNDI2NzEgMTguODggMy4yMDAwNCAxOC41NiAzLjIwMDA0SDEzLjQ0QzEzLjEyIDMuMjAwMDQgMTIuODY2NiAzLjQyNjcxIDEyLjgxMzMgMy43NDY3MUwxMi4zMzMzIDcuMTMzMzhDMTEuNTQ2NyA3LjQ1MzM4IDEwLjgyNjcgNy44OTMzOCAxMC4xNzMzIDguMzg2NzFMNi45ODY2NSA3LjEwNjcxQzYuNjkzMzIgNy4wMDAwNCA2LjM1OTk4IDcuMTA2NzEgNi4xOTk5OCA3LjQwMDA0TDMuNjUzMzIgMTEuODI2N0MzLjQ5MzMyIDEyLjEwNjcgMy41NDY2NSAxMi40NTM0IDMuODEzMzIgMTIuNjRMNi41MTk5OCAxNC43NDY3QzYuNDUzMzIgMTUuMTQ2NyA2LjM5OTk4IDE1LjU4NjcgNi4zOTk5OCAxNkM2LjM5OTk4IDE2LjQxMzQgNi40MjY2NSAxNi44NTM0IDYuNDkzMzIgMTcuMjUzNEwzLjc4NjY1IDE5LjM2QzMuNTQ2NjUgMTkuNTQ2NyAzLjQ3OTk4IDE5LjkwNjcgMy42MjY2NSAyMC4xNzM0TDYuMTg2NjUgMjQuNkM2LjM0NjY1IDI0Ljg5MzQgNi42Nzk5OCAyNC45ODY3IDYuOTczMzIgMjQuODkzNEwxMC4xNiAyMy42MTM0QzEwLjgyNjcgMjQuMTIgMTEuNTMzMyAyNC41NDY3IDEyLjMyIDI0Ljg2NjdMMTIuOCAyOC4yNTM0QzEyLjg2NjcgMjguNTczNCAxMy4xMiAyOC44IDEzLjQ0IDI4LjhIMTguNTZDMTguODggMjguOCAxOS4xNDY3IDI4LjU3MzQgMTkuMTg2NyAyOC4yNTM0TDE5LjY2NjcgMjQuODY2N0MyMC40NTMzIDI0LjU0NjcgMjEuMTczMyAyNC4xMiAyMS44MjY3IDIzLjYxMzRMMjUuMDEzMyAyNC44OTM0QzI1LjMwNjcgMjUgMjUuNjQgMjQuODkzNCAyNS44IDI0LjZMMjguMzYgMjAuMTczNEMyOC41MiAxOS44OCAyOC40NTMzIDE5LjU0NjcgMjguMiAxOS4zNkwyNS41MiAxNy4yNTM0Wk0xNiAyMC44QzEzLjM2IDIwLjggMTEuMiAxOC42NCAxMS4yIDE2QzExLjIgMTMuMzYgMTMuMzYgMTEuMiAxNiAxMS4yQzE4LjY0IDExLjIgMjAuOCAxMy4zNiAyMC44IDE2QzIwLjggMTguNjQgMTguNjQgMjAuOCAxNiAyMC44WiIsCiAgICAgIGJhY2tzcGFjZToKICAgICAgICAiTTIyIDNIN2MtLjY5IDAtMS4yMy4zNS0xLjU5Ljg4TDAgMTJsNS40MSA4LjExYy4zNi41My45Ljg5IDEuNTkuODloMTVjMS4xIDAgMi0uOSAyLTJWNWMwLTEuMS0uOS0yLTItMnptMCAxNkg3LjA3TDIuNCAxMmw0LjY2LTdIMjJ2MTR6bS0xMS41OS0yTDE0IDEzLjQxIDE3LjU5IDE3IDE5IDE1LjU5IDE1LjQxIDEyIDE5IDguNDEgMTcuNTkgNyAxNCAxMC41OSAxMC40MSA3IDkgOC40MSAxMi41OSAxMiA5IDE1LjU5eiIsCiAgICAgIGNsb3NlOgogICAgICAgICJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIsCiAgICAgIHNoYXJlOgogICAgICAgICJNMTggMTYuMDhjLS43NiAwLTEuNDQuMy0xLjk2Ljc3TDguOTEgMTIuN2MuMDUtLjIzLjA5LS40Ni4wOS0uN3MtLjA0LS40Ny0uMDktLjdsNy4wNS00LjExYy41NC41IDEuMjUuODEgMi4wNC44MSAxLjY2IDAgMy0xLjM0IDMtM3MtMS4zNC0zLTMtMy0zIDEuMzQtMyAzYzAgLjI0LjA0LjQ3LjA5LjdMOC4wNCA5LjgxQzcuNSA5LjMxIDYuNzkgOSA2IDljLTEuNjYgMC0zIDEuMzQtMyAzczEuMzQgMyAzIDNjLjc5IDAgMS41LS4zMSAyLjA0LS44MWw3LjEyIDQuMTZjLS4wNS4yMS0uMDguNDMtLjA4LjY1IDAgMS42MSAxLjMxIDIuOTIgMi45MiAyLjkyczIuOTItMS4zMSAyLjkyLTIuOTJjMC0xLjYxLTEuMzEtMi45Mi0yLjkyLTIuOTJ6TTE4IDRjLjU1IDAgMSAuNDUgMSAxcy0uNDUgMS0xIDEtMS0uNDUtMS0xIC40NS0xIDEtMXpNNiAxM2MtLjU1IDAtMS0uNDUtMS0xcy40NS0xIDEtMSAxIC40NSAxIDEtLjQ1IDEtMSAxem0xMiA3LjAyYy0uNTUgMC0xLS40NS0xLTFzLjQ1LTEgMS0xIDEgLjQ1IDEgMS0uNDUgMS0xIDF6IiwKICAgICAgc3RhdGlzdGljczoKICAgICAgICAiTTIwLjY2NjYgMTQuODMzM1Y1LjVIMTEuMzMzM1YxMi41SDQuMzMzMjVWMjYuNUgyNy42NjY2VjE0LjgzMzNIMjAuNjY2NlpNMTMuNjY2NiA3LjgzMzMzSDE4LjMzMzNWMjQuMTY2N0gxMy42NjY2VjcuODMzMzNaTTYuNjY2NTkgMTQuODMzM0gxMS4zMzMzVjI0LjE2NjdINi42NjY1OVYxNC44MzMzWk0yNS4zMzMzIDI0LjE2NjdIMjAuNjY2NlYxNy4xNjY3SDI1LjMzMzNWMjQuMTY2N1oiLAogICAgICBzYXZlOiAiTTMsMjAuMDVWMy43MkgxNy40OEwyMSw3LjU4VjIwLjA1Wk02Ljg1LDkuNjRtMC01LjkyVjkuNjRoOC4yM1YzLjcybS0yLjc2LDB2NE02Ljg1LDEzLjExaDguMjNNNi44NSwxNi40NkgxNy4xMyIsCiAgICB9OwoKICBmdW5jdGlvbiBKbyhlKSB7CiAgICB2YXIgdCA9IGUuaWNvbiwKICAgICAgbiA9IGUub25DbGljaywKICAgICAgYSA9IGUuZGlzYWJsZWQsCiAgICAgIG8gPSB2b2lkIDAgIT09IGEgJiYgYSwKICAgICAgYSA9IGUuaWQsCiAgICAgIHIgPSBlLmZpbGxDb2xvciwKICAgICAgZSA9IFhvKHQpOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgInN2ZyIsCiAgICAgIHsKICAgICAgICBpZDogYSwKICAgICAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgICAgICBoZWlnaHQ6IGUuaGVpZ2h0LAogICAgICAgIHZpZXdCb3g6IGUudmlld0JveCwKICAgICAgICB3aWR0aDogZS53aWR0aCwKICAgICAgICBjbGFzc05hbWU6ICJnYW1lLWljb24iLAogICAgICAgIG9uQ2xpY2s6IG4sCiAgICAgICAgImRhdGEtdGVzdGlkIjogImljb24tIi5jb25jYXQodCksCiAgICAgIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICBmaWxsOgogICAgICAgICAgciB8fAogICAgICAgICAgKG8KICAgICAgICAgICAgPyAidmFyKC0taWNvbi1kaXNhYmxlZCkiCiAgICAgICAgICAgIDogInNoYXJlIiA9PT0gdAogICAgICAgICAgICA/ICJ2YXIoLS13aGl0ZSkiCiAgICAgICAgICAgIDogInZhcigtLWNvbG9yLXRvbmUtMSkiKSwKICAgICAgICBkOiBLb1t0XSwKICAgICAgfSkKICAgICk7CiAgfQoKICB2YXIgUW8gPSB7CiAgICBjb250YWluZXI6ICJMb2FkaW5nLW1vZHVsZV9jb250YWluZXJfX2xuUEtCIiwKICAgIGxvYWRpbmdDb250YWluZXI6ICJMb2FkaW5nLW1vZHVsZV9sb2FkaW5nQ29udGFpbmVyX190UGdGayIsCiAgICBoaWRlOiAiTG9hZGluZy1tb2R1bGVfaGlkZV9fQTluc04iLAogIH07CgogIGZ1bmN0aW9uICRvKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPQogICAgICAgICAgbnVsbCA9PSBlCiAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICA6ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgICAgICBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgcyA9ICEwLAogICAgICAgICAgICBpID0gITE7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIG4gPSBuLmNhbGwoZSk7CiAgICAgICAgICAgICAgIShzID0gKGEgPSBuLm5leHQoKSkuZG9uZSkgJiYKICAgICAgICAgICAgICAoci5wdXNoKGEudmFsdWUpLCAhdCB8fCByLmxlbmd0aCAhPT0gdCk7CiAgICAgICAgICAgICAgcyA9ICEwCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIChpID0gITApLCAobyA9IGUpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzIHx8IG51bGwgPT0gbi5yZXR1cm4gfHwgbi5yZXR1cm4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoaSkgdGhyb3cgbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSByZXR1cm4gZXIoZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBlcihlLCB0KQogICAgICAgICAgICA6IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gZXIoZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICBrKAogICAgIi5Mb2FkaW5nLW1vZHVsZV9jb250YWluZXJfX2xuUEtCIHtcbiAgZGlzcGxheTogZmxleDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBtYXgtaGVpZ2h0OiBjYWxjKDEwMCUgLSB2YXIoLS1oZWFkZXItaGVpZ2h0KSAtIDFweCk7XG4gIGxlZnQ6IDA7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1iYWNrZ3JvdW5kKTtcbiAgei1pbmRleDogdmFyKC0tZXJyb3Itei1pbmRleCk7XG59XG5cbi5Mb2FkaW5nLW1vZHVsZV9sb2FkaW5nQ29udGFpbmVyX190UGdGayB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHdpZHRoOiA4MnB4O1xuICBoZWlnaHQ6IDEwMCU7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycztcbiAgb3BhY2l0eTogMTtcbn1cblxuLkxvYWRpbmctbW9kdWxlX2hpZGVfX0E5bnNOIHtcbiAgb3BhY2l0eTogMDtcbn0iCiAgKTsKICB2YXIgdHIgPSAzMDA7CgogIGZ1bmN0aW9uIG5yKGUpIHsKICAgIHZhciB0ID0gZS53YWl0Rm9yLAogICAgICBuID0gdm9pZCAwID09PSB0ID8gdHIgOiB0LAogICAgICBhID0gZS5zZXRCYWNrZ3JvdW5kLAogICAgICB0ID0gdm9pZCAwID09PSBhID8gImRhcmsiIDogYSwKICAgICAgZSA9ICRvKF8udXNlU3RhdGUoITEpLCAyKSwKICAgICAgYSA9IGVbMF0sCiAgICAgIG8gPSBlWzFdLAogICAgICBlID0gUChJKSwKICAgICAgdCA9ICJsaWdodCIgIT09IHQgJiYgZSwKICAgICAgZSA9IHQgPyAiIzEyMTIxMyIgOiAiI0ZGRiI7CiAgICByZXR1cm4gKAogICAgICBTbyhmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG8oITApOwogICAgICB9LCBuKSwKICAgICAgYQogICAgICAgID8gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogUW8uY29udGFpbmVyLAogICAgICAgICAgICAgIHN0eWxlOiBlID8geyBiYWNrZ3JvdW5kQ29sb3I6IGUgfSA6IHt9LAogICAgICAgICAgICB9LAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IFFvLmxvYWRpbmdDb250YWluZXIgfSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoam8sIHsKICAgICAgICAgICAgICAgIGNpcmNsZUNvbG9yOiB0ID8gIiM2NjY2NjYiIDogIiNERkRGREYiLAogICAgICAgICAgICAgICAgYmFyQ29sb3I6IHQgPyAiI0RGREZERiIgOiAiIzk1OTU5NSIsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKQogICAgICAgICAgKQogICAgICAgIDogbnVsbAogICAgKTsKICB9CgogIHZhciBhciA9IHsKICAgIGluc3RydWN0aW9uczogIkhlbHAtbW9kdWxlX2luc3RydWN0aW9uc19fNTRJRHIiLAogICAgZXhhbXBsZXM6ICJIZWxwLW1vZHVsZV9leGFtcGxlc19fZWVpTVYiLAogICAgZXhhbXBsZTogIkhlbHAtbW9kdWxlX2V4YW1wbGVfXzNVTnJzIiwKICAgIHRpbGVDb250YWluZXI6ICJIZWxwLW1vZHVsZV90aWxlQ29udGFpbmVyX19XbU1RdyIsCiAgICBwYWdlOiAiSGVscC1tb2R1bGVfcGFnZV9fdVE3WGkiLAogICAgcmVtaW5kZXJTaWduVXA6ICJIZWxwLW1vZHVsZV9yZW1pbmRlclNpZ25VcF9fYjUyNkciLAogICAgc3RhdHNMb2dpbjogIkhlbHAtbW9kdWxlX3N0YXRzTG9naW5fX2owazcyIiwKICAgIGxvZ2luQXJyb3c6ICJIZWxwLW1vZHVsZV9sb2dpbkFycm93X19ILTNtRCIsCiAgICBsb2dpblRleHQ6ICJIZWxwLW1vZHVsZV9sb2dpblRleHRfX09zcXluIiwKICAgIHN0YXRzSWNvbjogIkhlbHAtbW9kdWxlX3N0YXRzSWNvbl9fcFFTeVIiLAogICAgcnVsZTogIkhlbHAtbW9kdWxlX3J1bGVfX3dsT3gtIiwKICB9OwogIGsoCiAgICAiLkhlbHAtbW9kdWxlX2luc3RydWN0aW9uc19fNTRJRHIge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10b25lLTEpO1xufVxuXG4uSGVscC1tb2R1bGVfZXhhbXBsZXNfX2VlaU1WIHtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtNCk7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1jb2xvci10b25lLTQpO1xufVxuXG4uSGVscC1tb2R1bGVfZXhhbXBsZV9fM1VOcnMge1xuICBtYXJnaW4tdG9wOiAyNHB4O1xuICBtYXJnaW4tYm90dG9tOiAyNHB4O1xufVxuXG4uSGVscC1tb2R1bGVfdGlsZUNvbnRhaW5lcl9fV21NUXcge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA0MHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIG1hcmdpbi1yaWdodDogNHB4O1xufVxuXG4uSGVscC1tb2R1bGVfcGFnZV9fdVE3WGkge1xuICBwYWRkaW5nOiAxNnB4O1xuICBwYWRkaW5nLXRvcDogMHB4O1xufVxuXG4uSGVscC1tb2R1bGVfcmVtaW5kZXJTaWduVXBfX2I1MjZHIGEge1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbn1cblxuLyotLS1hdXRoLS0tKi9cbi5IZWxwLW1vZHVsZV9zdGF0c0xvZ2luX19qMGs3MiB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZGlzcGxheTogZmxleDtcbiAgd2lkdGg6IDEwMCU7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBwYWRkaW5nLXRvcDogMjRweDtcbn1cbi5IZWxwLW1vZHVsZV9zdGF0c0xvZ2luX19qMGs3MiBhIHtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG59XG4uSGVscC1tb2R1bGVfc3RhdHNMb2dpbl9fajBrNzIgLkhlbHAtbW9kdWxlX2xvZ2luQXJyb3dfX0gtM21EIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBqdXN0aWZ5LXNlbGY6IGZsZXgtZW5kO1xufVxuLkhlbHAtbW9kdWxlX3N0YXRzTG9naW5fX2owazcyIC5IZWxwLW1vZHVsZV9sb2dpblRleHRfX09zcXluIHtcbiAgZmxleC1ncm93OiAyO1xufVxuLkhlbHAtbW9kdWxlX3N0YXRzTG9naW5fX2owazcyIC5IZWxwLW1vZHVsZV9zdGF0c0ljb25fX3BRU3lSIHtcbiAgbWFyZ2luLXJpZ2h0OiAxNnB4O1xufVxuLkhlbHAtbW9kdWxlX3N0YXRzTG9naW5fX2owazcyIC5IZWxwLW1vZHVsZV9ydWxlX193bE94LSB7XG4gIG1hcmdpbi1sZWZ0OiAtMTZweDtcbiAgdG9wOiA2cHg7XG4gIGhlaWdodDogMXB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiBjYWxjKDEwMCUgKyAzMnB4KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgYm94LXNoYWRvdzogMHB4IDBweCAycHggcmdiYSg1MCwgNTAsIDUwLCAwLjc1KTtcbn0iCiAgKTsKCiAgZnVuY3Rpb24gb3IoZSkgewogICAgdmFyIGEgPSBlLmhlbHBXb3JkLAogICAgICBlID0gZS5sZXR0ZXJzOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgXy5GcmFnbWVudCwKICAgICAgbnVsbCwKICAgICAgZS5tYXAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9IGUubGV0dGVyLAogICAgICAgICAgZSA9IGUuZXZhbHVhdGlvbjsKICAgICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImRpdiIsCiAgICAgICAgICB7CiAgICAgICAgICAgICJkYXRhLXRlc3RpZCI6ICIiLmNvbmNhdChhLCAiLWxldHRlciIpLAogICAgICAgICAgICBjbGFzc05hbWU6IGFyLnRpbGVDb250YWluZXIsCiAgICAgICAgICAgIGtleTogIiIuY29uY2F0KGEsICItIikuY29uY2F0KG4sICItIikuY29uY2F0KHQpLAogICAgICAgICAgfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChNbywgeyBsZXR0ZXI6IG4sIGV2YWx1YXRpb246IGUgfSkKICAgICAgICApOwogICAgICB9KQogICAgKTsKICB9CgogIHZhciByciA9IFsKICAgIHsKICAgICAgaGVscFdvcmQ6ICJ3ZWFyeSIsCiAgICAgIGxldHRlcnM6IFsKICAgICAgICB7CiAgICAgICAgICBsZXR0ZXI6ICJ3IiwKICAgICAgICAgIGV2YWx1YXRpb246ICJjb3JyZWN0IiwKICAgICAgICB9LAogICAgICAgIHsgbGV0dGVyOiAiZSIgfSwKICAgICAgICB7IGxldHRlcjogImEiIH0sCiAgICAgICAgeyBsZXR0ZXI6ICJyIiB9LAogICAgICAgIHsgbGV0dGVyOiAieSIgfSwKICAgICAgXSwKICAgIH0sCiAgICB7CiAgICAgIGhlbHBXb3JkOiAicGlsbHMiLAogICAgICBsZXR0ZXJzOiBbCiAgICAgICAgeyBsZXR0ZXI6ICJwIiB9LAogICAgICAgIHsKICAgICAgICAgIGxldHRlcjogImkiLAogICAgICAgICAgZXZhbHVhdGlvbjogInByZXNlbnQiLAogICAgICAgIH0sCiAgICAgICAgeyBsZXR0ZXI6ICJsIiB9LAogICAgICAgIHsgbGV0dGVyOiAibCIgfSwKICAgICAgICB7IGxldHRlcjogInMiIH0sCiAgICAgIF0sCiAgICB9LAogICAgewogICAgICBoZWxwV29yZDogInZhZ3VlIiwKICAgICAgbGV0dGVyczogWwogICAgICAgIHsgbGV0dGVyOiAidiIgfSwKICAgICAgICB7IGxldHRlcjogImEiIH0sCiAgICAgICAgeyBsZXR0ZXI6ICJnIiB9LAogICAgICAgIHsgbGV0dGVyOiAidSIsIGV2YWx1YXRpb246ICJhYnNlbnQiIH0sCiAgICAgICAgeyBsZXR0ZXI6ICJlIiB9LAogICAgICBdLAogICAgfSwKICBdOwoKICBmdW5jdGlvbiBzcihlKSB7CiAgICB2YXIgdCA9IGUuaXNQYWdlLAogICAgICBuID0gZS5lbmFibGVBdXRoLAogICAgICBhID0gZS5pc0xvZ2dlZEluLAogICAgICBlID0gbiAmJiAhKHZvaWQgMCAhPT0gYSAmJiBhKSwKICAgICAgbyA9ICIiLmNvbmNhdChQKFllKSk7CiAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAic2VjdGlvbiIsCiAgICAgIHsKICAgICAgICBjbGFzc05hbWU6IHAoCiAgICAgICAgICAoKG4gPSB7fSksCiAgICAgICAgICAoYSA9IGFyLnBhZ2UpLAogICAgICAgICAgKHQgPSB0KSwKICAgICAgICAgIGEgaW4gbgogICAgICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCBhLCB7CiAgICAgICAgICAgICAgICB2YWx1ZTogdCwKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICA6IChuW2FdID0gdCksCiAgICAgICAgICBuKQogICAgICAgICksCiAgICAgIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7IGNsYXNzTmFtZTogYXIuaW5zdHJ1Y3Rpb25zIH0sCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgInAiLAogICAgICAgICAgbnVsbCwKICAgICAgICAgICJHdWVzcyB0aGUgIiwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIldPUkRMRSIpLAogICAgICAgICAgIiBpbiA2IHRyaWVzLiIKICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJwIiwKICAgICAgICAgIG51bGwsCiAgICAgICAgICAiRWFjaCBndWVzcyBtdXN0IGJlIGEgdmFsaWQgNS1sZXR0ZXIgd29yZC4gSGl0IHRoZSBlbnRlciBidXR0b24gdG8gc3VibWl0LiIKICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJwIiwKICAgICAgICAgIG51bGwsCiAgICAgICAgICAiQWZ0ZXIgZWFjaCBndWVzcywgdGhlIGNvbG9yIG9mIHRoZSB0aWxlcyB3aWxsIGNoYW5nZSB0byBzaG93IGhvdyBjbG9zZSB5b3VyIGd1ZXNzIHdhcyB0byB0aGUgd29yZC4iCiAgICAgICAgKSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiZGl2IiwKICAgICAgICAgIHsgY2xhc3NOYW1lOiBhci5leGFtcGxlcyB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAicCIsCiAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIkV4YW1wbGVzIikKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiByclswXS5oZWxwV29yZCwKICAgICAgICAgICAgICBjbGFzc05hbWU6IGFyLmV4YW1wbGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9yKHJyWzBdKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJwIiwKICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICJUaGUgbGV0dGVyICIsCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiVyIpLAogICAgICAgICAgICAgICIgaXMgaW4gdGhlIHdvcmQgYW5kIGluIHRoZSBjb3JyZWN0IHNwb3QuIgogICAgICAgICAgICApCiAgICAgICAgICApLAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgewogICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogcnJbMV0uaGVscFdvcmQsCiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBhci5leGFtcGxlLAogICAgICAgICAgICB9LAogICAgICAgICAgICBvcihyclsxXSksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAicCIsCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAiVGhlIGxldHRlciAiLAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgic3Ryb25nIiwgbnVsbCwgIkkiKSwKICAgICAgICAgICAgICAiIGlzIGluIHRoZSB3b3JkIGJ1dCBpbiB0aGUgd3Jvbmcgc3BvdC4iCiAgICAgICAgICAgICkKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiByclsyXS5oZWxwV29yZCwKICAgICAgICAgICAgICBjbGFzc05hbWU6IGFyLmV4YW1wbGUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9yKHJyWzJdKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJwIiwKICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICJUaGUgbGV0dGVyICIsCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJzdHJvbmciLCBudWxsLCAiVSIpLAogICAgICAgICAgICAgICIgaXMgbm90IGluIHRoZSB3b3JkIGluIGFueSBzcG90LiIKICAgICAgICAgICAgKQogICAgICAgICAgKQogICAgICAgICksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgInAiLAogICAgICAgICAgbnVsbCwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgInN0cm9uZyIsCiAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICJBIG5ldyBXT1JETEUgd2lsbCBiZSBhdmFpbGFibGUgZWFjaCBkYXkhIgogICAgICAgICAgKQogICAgICAgICkKICAgICAgKSwKICAgICAgZSAmJgogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBjbGFzc05hbWU6IGFyLnN0YXRzTG9naW4gfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGFyLnJ1bGUgfSksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IGNsYXNzTmFtZTogYXIuc3RhdHNJY29uIH0sCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgiaW1nIiwgewogICAgICAgICAgICAgIGFsdDogIkdyZWVuIEJhciBHcmFwaCIsCiAgICAgICAgICAgICAgc3R5bGU6IHsgY29udGVudDogInZhcigtLXdvcmRsZS1zdGF0cy1taW5pKSIgfSwKICAgICAgICAgICAgfSkKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IGNsYXNzTmFtZTogYXIubG9naW5UZXh0IH0sCiAgICAgICAgICAgICJMb29raW5nIHRvIGxvYWQgeW91ciBzYXZlZCBzdGF0cz8iLAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICB1bywKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBhcmlhTGFiZWw6ICJMaW5rIGZvciBsb2dnaW5nIGluIG9yIGNyZWF0aW5nIGEgZnJlZSBhY2NvdW50IiwKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQ6IHsKICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAiaGVscCIsCiAgICAgICAgICAgICAgICAgIHNlbmRDb250ZXh0OiAhMCwKICAgICAgICAgICAgICAgICAgZWxlbWVudDogeyBuYW1lOiAid29yZGxlIiwgbGFiZWw6ICJsb2ctaW4td2VsY29tZSIgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvcHRJbjogITEsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAiTG9nIGluIGhlcmUiCiAgICAgICAgICAgICkKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgIHVvLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHJhY2tFdmVudDogewogICAgICAgICAgICAgICAgZXZlbnROYW1lOiAibG9nLWluLXdlbGNvbWUiLAogICAgICAgICAgICAgICAgc2VuZENvbnRleHQ6ICEwLAogICAgICAgICAgICAgICAgZWxlbWVudDogeyBuYW1lOiAid29yZGxlIiwgbGFiZWw6ICJsb2ctaW4td2VsY29tZSIgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHN0eWxlczogYXIubG9naW5BcnJvdywKICAgICAgICAgICAgICBvcHRJbjogITEsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAic3ZnIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3aWR0aDogIjI0IiwKICAgICAgICAgICAgICAgIGhlaWdodDogIjI0IiwKICAgICAgICAgICAgICAgIHZpZXdCb3g6ICIwIDAgMjQgMjQiLAogICAgICAgICAgICAgICAgZmlsbDogIm5vbmUiLAogICAgICAgICAgICAgICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImNpcmNsZSIsIHsKICAgICAgICAgICAgICAgIGN4OiAiMTIiLAogICAgICAgICAgICAgICAgY3k6ICIxMiIsCiAgICAgICAgICAgICAgICByOiAiMTIiLAogICAgICAgICAgICAgICAgZmlsbDogInZhcigtLXN2Zy1hcnJvdy1maWxsKSIsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgZDogIk0xMC40MDM4IDZMMTUuODA3NiAxMS40MDM4TDEwLjQwMzggMTYuODA3NiIsCiAgICAgICAgICAgICAgICBzdHJva2U6ICJ2YXIoLS1zdmctYXJyb3ctc3Ryb2tlKSIsCiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogIjEuNSIsCiAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwOiAicm91bmQiLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICkKICAgICAgICAgICkKICAgICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gaXIoZSkgewogICAgcmV0dXJuIHsgdHlwZTogY3IsIHBheWxvYWQ6IHsgaXNHYW1lQ29tcGxldGU6IGUgfSB9OwogIH0KCiAgZnVuY3Rpb24gbHIoKSB7CiAgICByZXR1cm4geyB0eXBlOiB1ciB9OwogIH0KCiAgdmFyIGNyID0gIndvcmRsZS9zdGF0cy9UUkFDS19TVEFUU19JTVBSRVNTSU9OIiwKICAgIHVyID0gIndvcmRsZS9zdGF0cy9TSEFSRV9TVEFUUyIsCiAgICBkciA9IHsKICAgICAgZ2FtZVN0YXRzOiAiU3RhdHMtbW9kdWxlX2dhbWVTdGF0c19fWlAxYVciLAogICAgICBzdGF0aXN0aWNzSGVhZGluZzogIlN0YXRzLW1vZHVsZV9zdGF0aXN0aWNzSGVhZGluZ19fOUIwSUciLAogICAgICBzdGF0aXN0aWNzOiAiU3RhdHMtbW9kdWxlX3N0YXRpc3RpY3NfX0hrZTdaIiwKICAgICAgc3RhdGlzdGljQ29udGFpbmVyOiAiU3RhdHMtbW9kdWxlX3N0YXRpc3RpY0NvbnRhaW5lcl9fWE9SVFciLAogICAgICBzdGF0aXN0aWM6ICJTdGF0cy1tb2R1bGVfc3RhdGlzdGljX19mcjhKWiIsCiAgICAgIHRpbWVyOiAiU3RhdHMtbW9kdWxlX3RpbWVyX194bjJtdSIsCiAgICAgIGxhYmVsOiAiU3RhdHMtbW9kdWxlX2xhYmVsX19wTEF1aSIsCiAgICAgIGd1ZXNzRGlzdHJpYnV0aW9uOiAiU3RhdHMtbW9kdWxlX2d1ZXNzRGlzdHJpYnV0aW9uX19KOEludCIsCiAgICAgIGdyYXBoQ29udGFpbmVyOiAiU3RhdHMtbW9kdWxlX2dyYXBoQ29udGFpbmVyX19CbFZGVSIsCiAgICAgIGdyYXBoOiAiU3RhdHMtbW9kdWxlX2dyYXBoX19sMkxHbiIsCiAgICAgIGdyYXBoQmFyOiAiU3RhdHMtbW9kdWxlX2dyYXBoQmFyX19UdnNJUCIsCiAgICAgIGhpZ2hsaWdodDogIlN0YXRzLW1vZHVsZV9oaWdobGlnaHRfX2ZCQmlMIiwKICAgICAgYWxpZ25SaWdodDogIlN0YXRzLW1vZHVsZV9hbGlnblJpZ2h0X18yOVhobCIsCiAgICAgIG51bUd1ZXNzZXM6ICJTdGF0cy1tb2R1bGVfbnVtR3Vlc3Nlc19fYUI3VUYiLAogICAgICBmb290ZXI6ICJTdGF0cy1tb2R1bGVfZm9vdGVyX19JWS1CdCIsCiAgICAgIGNvdW50ZG93bjogIlN0YXRzLW1vZHVsZV9jb3VudGRvd25fX2EtY1d1IiwKICAgICAgc2hhcmU6ICJTdGF0cy1tb2R1bGVfc2hhcmVfX2tmSi1tIiwKICAgICAgbm9EYXRhOiAiU3RhdHMtbW9kdWxlX25vRGF0YV9fRDN3a3YiLAogICAgICBzaGFyZUJ1dHRvbjogIlN0YXRzLW1vZHVsZV9zaGFyZUJ1dHRvbl9fZU5GRkQiLAogICAgICBzaGFyZUljb25Db250YWluZXI6ICJTdGF0cy1tb2R1bGVfc2hhcmVJY29uQ29udGFpbmVyX19qMm82SyIsCiAgICAgIHN0YXRzQnRuTGVmdDogIlN0YXRzLW1vZHVsZV9zdGF0c0J0bkxlZnRfX3ExUFE4IiwKICAgICAgc3RhdHNCdG5DZW50ZXI6ICJTdGF0cy1tb2R1bGVfc3RhdHNCdG5DZW50ZXJfX0tnaTV4IiwKICAgICAgc3RhdHNJbmZvQnRuOiAiU3RhdHMtbW9kdWxlX3N0YXRzSW5mb0J0bl9fV1VQbHMiLAogICAgICBwcm9tb0J1dHRvbjogIlN0YXRzLW1vZHVsZV9wcm9tb0J1dHRvbl9fOGRjWTMiLAogICAgICBwcm9tb0ljb246ICJTdGF0cy1tb2R1bGVfcHJvbW9JY29uX18xYzlxciIsCiAgICAgIHByb21vQnV0dG9uQ29udGFpbmVyOiAiU3RhdHMtbW9kdWxlX3Byb21vQnV0dG9uQ29udGFpbmVyX194VUZ0eCIsCiAgICAgIGN0YUNvbnRhaW5lcjogIlN0YXRzLW1vZHVsZV9jdGFDb250YWluZXJfX1dTeFVHIiwKICAgICAgZ3Vlc3M6ICJTdGF0cy1tb2R1bGVfZ3Vlc3NfXzNNZVlNIiwKICAgIH07CiAgaygKICAgICIuU3RhdHMtbW9kdWxlX2dhbWVTdGF0c19fWlAxYVcge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgcGFkZGluZy10b3A6IDE2cHg7XG59XG4uU3RhdHMtbW9kdWxlX2dhbWVTdGF0c19fWlAxYVcgaDEge1xuICBmb250LXdlaWdodDogNzAwO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICBsaW5lLWhlaWdodDogMThweDtcbiAgbWFyZ2luLXRvcDogMTJweDtcbn1cbi5TdGF0cy1tb2R1bGVfZ2FtZVN0YXRzX19aUDFhVyAuU3RhdHMtbW9kdWxlX3N0YXRpc3RpY3NIZWFkaW5nX185QjBJRyB7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICBtYXJnaW4tdG9wOiAwO1xuICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gIGxldHRlci1zcGFjaW5nOiAwLjA1ZW07XG59XG5cbi5TdGF0cy1tb2R1bGVfc3RhdGlzdGljc19fSGtlN1oge1xuICBkaXNwbGF5OiBmbGV4O1xufVxuXG4uU3RhdHMtbW9kdWxlX3N0YXRpc3RpY0NvbnRhaW5lcl9fWE9SVFcge1xuICBmbGV4OiAxO1xuICBtYXJnaW4tbGVmdDogMTJweDtcbn1cbi5TdGF0cy1tb2R1bGVfc3RhdGlzdGljQ29udGFpbmVyX19YT1JUVzpsYXN0LWNoaWxkIHtcbiAgbWFyZ2luLXJpZ2h0OiAxMnB4O1xufVxuXG4uU3RhdHMtbW9kdWxlX3N0YXRpc3RpY0NvbnRhaW5lcl9fWE9SVFcgLlN0YXRzLW1vZHVsZV9zdGF0aXN0aWNfX2ZyOEpaIHtcbiAgZm9udC1zaXplOiAzNHB4O1xuICBmb250LXdlaWdodDogNDAwO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xuICBmb250LXZhcmlhbnQtbnVtZXJpYzogcHJvcG9ydGlvbmFsLW51bXM7XG4gIGxpbmUtaGVpZ2h0OiAzNnB4O1xufVxuXG4uU3RhdHMtbW9kdWxlX3N0YXRpc3RpY19fZnI4SlouU3RhdHMtbW9kdWxlX3RpbWVyX194bjJtdSB7XG4gIGZvbnQtdmFyaWFudC1udW1lcmljOiBpbml0aWFsO1xuICBmb250LXNpemU6IDMycHg7XG4gIGxpbmUtaGVpZ2h0OiAzNHB4O1xuICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcbn1cblxuLlN0YXRzLW1vZHVsZV9zdGF0aXN0aWNDb250YWluZXJfX1hPUlRXIC5TdGF0cy1tb2R1bGVfbGFiZWxfX3BMQXVpIHtcbiAgZm9udC1zaXplOiAxMHB4O1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBsaW5lLWhlaWdodDogMTRweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMWVtO1xufVxuXG4uU3RhdHMtbW9kdWxlX2d1ZXNzRGlzdHJpYnV0aW9uX19KOEludCB7XG4gIHdpZHRoOiA4MCU7XG59XG5cbi5TdGF0cy1tb2R1bGVfZ3JhcGhDb250YWluZXJfX0JsVkZVIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMThweDtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZy1ib3R0b206IDRweDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBsaW5lLWhlaWdodDogMjBweDtcbn1cblxuLlN0YXRzLW1vZHVsZV9ncmFwaENvbnRhaW5lcl9fQmxWRlUgLlN0YXRzLW1vZHVsZV9ncmFwaF9fbDJMR24ge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwYWRkaW5nLWxlZnQ6IDRweDtcbn1cblxuLlN0YXRzLW1vZHVsZV9ncmFwaENvbnRhaW5lcl9fQmxWRlUgLlN0YXRzLW1vZHVsZV9ncmFwaF9fbDJMR24gLlN0YXRzLW1vZHVsZV9ncmFwaEJhcl9fVHZzSVAge1xuICBoZWlnaHQ6IDEwMCU7XG4gIC8qIEFzc3VtZSBubyB3aW5zICovXG4gIHdpZHRoOiAwJTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1hYnNlbnQpO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLlN0YXRzLW1vZHVsZV9ncmFwaENvbnRhaW5lcl9fQmxWRlUgLlN0YXRzLW1vZHVsZV9ncmFwaF9fbDJMR24gLlN0YXRzLW1vZHVsZV9ncmFwaEJhcl9fVHZzSVAuU3RhdHMtbW9kdWxlX2hpZ2hsaWdodF9fZkJCaUwge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1jb3JyZWN0KTtcbn1cblxuLlN0YXRzLW1vZHVsZV9ncmFwaENvbnRhaW5lcl9fQmxWRlUgLlN0YXRzLW1vZHVsZV9ncmFwaF9fbDJMR24gLlN0YXRzLW1vZHVsZV9ncmFwaEJhcl9fVHZzSVAuU3RhdHMtbW9kdWxlX2FsaWduUmlnaHRfXzI5WGhsIHtcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgcGFkZGluZy1yaWdodDogOHB4O1xufVxuXG4uU3RhdHMtbW9kdWxlX2dyYXBoQ29udGFpbmVyX19CbFZGVSAuU3RhdHMtbW9kdWxlX2dyYXBoX19sMkxHbiAuU3RhdHMtbW9kdWxlX251bUd1ZXNzZXNfX2FCN1VGIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiB2YXIoLS10aWxlLXRleHQtY29sb3IpO1xuICBmb250LXNpemU6IDEycHg7XG4gIGxpbmUtaGVpZ2h0OiAxOHB4O1xufVxuXG4uU3RhdHMtbW9kdWxlX2Zvb3Rlcl9fSVktQnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbn1cblxuLlN0YXRzLW1vZHVsZV9jb3VudGRvd25fX2EtY1d1IHtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgcGFkZGluZy1yaWdodDogMTJweDtcbiAgd2lkdGg6IDUwJTtcbn1cblxuLlN0YXRzLW1vZHVsZV9zaGFyZV9fa2ZKLW0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgcGFkZGluZy1sZWZ0OiAxMnB4O1xuICB3aWR0aDogNTAlO1xufVxuXG4uU3RhdHMtbW9kdWxlX25vRGF0YV9fRDN3a3Yge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5TdGF0cy1tb2R1bGVfc2hhcmVCdXR0b25fX2VORkZEIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0ta2V5LWJnLWNvcnJlY3QpO1xuICBjb2xvcjogdmFyKC0ta2V5LWV2YWx1YXRlZC10ZXh0LWNvbG9yKTtcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYm9yZGVyOiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gIHdpZHRoOiA4MCU7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgaGVpZ2h0OiA1MnB4O1xuICBmaWx0ZXI6IGJyaWdodG5lc3MoMTAwJSk7XG59XG5cbkBtZWRpYSAobWF4LXdpZHRoOiA0NDRweCkge1xuICAuU3RhdHMtbW9kdWxlX3NoYXJlQnV0dG9uX19lTkZGRCB7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICB9XG59XG4uU3RhdHMtbW9kdWxlX3NoYXJlQnV0dG9uX19lTkZGRDpob3ZlciB7XG4gIG9wYWNpdHk6IDAuOTtcbn1cblxuLlN0YXRzLW1vZHVsZV9zaGFyZUljb25Db250YWluZXJfX2oybzZLIHtcbiAgd2lkdGg6IDI0cHg7XG4gIGhlaWdodDogMjRweDtcbiAgcGFkZGluZy1sZWZ0OiA4cHg7XG59XG5cbi5TdGF0cy1tb2R1bGVfc3RhdHNCdG5MZWZ0X19xMVBROCB7XG4gIGp1c3RpZnktY29udGVudDogdW5zZXQ7XG4gIHdpZHRoOiA4MCU7XG4gIG1hcmdpbjogMTJweCAwcHggMjBweCAxNXB4O1xufVxuXG4uU3RhdHMtbW9kdWxlX3N0YXRzQnRuQ2VudGVyX19LZ2k1eCB7XG4gIG1hcmdpbjogMTBweDtcbn1cblxuLlN0YXRzLW1vZHVsZV9zdGF0c0luZm9CdG5fX1dVUGxzIHtcbiAgYWxsOiB1bnNldDtcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10b25lLTEwKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uU3RhdHMtbW9kdWxlX3Byb21vQnV0dG9uX184ZGNZMyB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDEwNXB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci10b25lLTcpO1xuICBmb250LXdlaWdodDogNzAwO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICBjb2xvcjogaW5oZXJpdDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICB3aWR0aDogMTUwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiA2NiU7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uU3RhdHMtbW9kdWxlX3Byb21vSWNvbl9fMWM5cXIge1xuICB3aWR0aDogMjVweDtcbiAgaGVpZ2h0OiAyNXB4O1xuICBiYWNrZ3JvdW5kLWltYWdlOiB2YXIoLS1zcGVsbGluZy1iZWUtcHJvbW8pO1xuICBiYWNrZ3JvdW5kLXNpemU6IDI1cHg7XG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbiAgbWFyZ2luLWxlZnQ6IDVweDtcbn1cblxuLlN0YXRzLW1vZHVsZV9wcm9tb0J1dHRvbkNvbnRhaW5lcl9feFVGdHgge1xuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tY29sb3ItdG9uZS05KTtcbiAgd2lkdGg6IDEwMCU7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBwYWRkaW5nLXRvcDogMjBweDtcbn1cblxuLlN0YXRzLW1vZHVsZV9jdGFDb250YWluZXJfX1dTeFVHIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5TdGF0cy1tb2R1bGVfZ3Vlc3NfXzNNZVlNIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgbGluZS1oZWlnaHQ6IDE4cHg7XG4gIGxldHRlci1zcGFjaW5nOiAwLjFlbTtcbn0iCiAgKTsKICB2YXIgbXIgPSB7CiAgICAgIGN1cnJlbnRTdHJlYWs6ICJDdXJyZW50IFN0cmVhayIsCiAgICAgIG1heFN0cmVhazogIk1heCBTdHJlYWsiLAogICAgICB3aW5QZXJjZW50YWdlOiAiV2luICUiLAogICAgICBnYW1lc1BsYXllZDogIlBsYXllZCIsCiAgICAgIGdhbWVzV29uOiAiV29uIiwKICAgICAgYXZlcmFnZUd1ZXNzZXM6ICJBdi4gR3Vlc3NlcyIsCiAgICB9LAogICAgcHIgPSBbImdhbWVzUGxheWVkIiwgIndpblBlcmNlbnRhZ2UiLCAiY3VycmVudFN0cmVhayIsICJtYXhTdHJlYWsiXTsKCiAgZnVuY3Rpb24geXIoZSkgewogICAgdmFyIG4gPSBlLnN0YXRzOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgImRpdiIsCiAgICAgIHsgY2xhc3NOYW1lOiBkci5zdGF0aXN0aWNzIH0sCiAgICAgIHByLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gbltlXTsKICAgICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImRpdiIsCiAgICAgICAgICB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogZHIuc3RhdGlzdGljQ29udGFpbmVyLAogICAgICAgICAgICBrZXk6IGUsCiAgICAgICAgICB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogZHIuc3RhdGlzdGljIH0sIHQpLAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogZHIubGFiZWwgfSwgbXJbZV0pCiAgICAgICAgKTsKICAgICAgfSkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBncihlKSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGZyKGUpOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBudWxsICE9IGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgIG51bGwgIT0gZVsiQEBpdGVyYXRvciJdCiAgICAgICAgKQogICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZSk7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBmcihlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IGZyKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gZnIoZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBocihlLCB0LCBuKSB7CiAgICByZXR1cm4gKAogICAgICB0IGluIGUKICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7CiAgICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgfSkKICAgICAgICA6IChlW3RdID0gbiksCiAgICAgIGUKICAgICk7CiAgfQoKICBmdW5jdGlvbiBicihlKSB7CiAgICB2YXIgdCA9IGUuZ3Vlc3NlcywKICAgICAgbiA9IGUucm93SW5kZXgsCiAgICAgIGEgPSBlLmdhbWVTdGF0dXMsCiAgICAgIG8gPSBbXSwKICAgICAgciA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGdyKE9iamVjdC52YWx1ZXModCkpKTsKICAgIGlmICgKICAgICAgT2JqZWN0LnZhbHVlcyh0KS5ldmVyeShmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAwID09PSBlOwogICAgICB9KQogICAgKQogICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgIF8uRnJhZ21lbnQsCiAgICAgICAgbnVsbCwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImgxIiwgbnVsbCwgIkd1ZXNzIERpc3RyaWJ1dGlvbiIpLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGRyLm5vRGF0YSB9LCAiTm8gRGF0YSIpCiAgICAgICk7CiAgICBmb3IgKHZhciBzLCBpLCBsID0gMTsgbCA8IE9iamVjdC5rZXlzKHQpLmxlbmd0aDsgbCArPSAxKSB7CiAgICAgIHZhciBjID0gbCwKICAgICAgICB1ID0gdFtsXSwKICAgICAgICBkID0gewogICAgICAgICAgcm93R3Vlc3M6IGMsCiAgICAgICAgICBwZXJjZW50R3Vlc3NlczogTWF0aC5tYXgoNywgTWF0aC5yb3VuZCgodSAvIHIpICogMTAwKSksCiAgICAgICAgICBudW1HdWVzc2VzOiB1LAogICAgICAgICAgYWRkSGlnaGxpZ2h0OiAiV0lOIiA9PT0gYSAmJiBsID09PSBuLAogICAgICAgICAgaW5kZXg6IGwsCiAgICAgICAgfSwKICAgICAgICBtID0KICAgICAgICAgICgoYyA9IG0gPSBpID0gcyA9IHZvaWQgMCksCiAgICAgICAgICAocyA9ICh1ID0gZCkucm93R3Vlc3MpLAogICAgICAgICAgKGkgPSBkLnBlcmNlbnRHdWVzc2VzKSwKICAgICAgICAgIChtID0gZC5udW1HdWVzc2VzKSwKICAgICAgICAgIChjID0gZC5hZGRIaWdobGlnaHQpLAogICAgICAgICAgKHUgPSBkLmluZGV4KSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjbGFzc05hbWU6IGRyLmdyYXBoQ29udGFpbmVyLAogICAgICAgICAgICAgIGtleTogdSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogZHIuZ3Vlc3MgfSwgcyksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogZHIuZ3JhcGggfSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgd2lkdGg6ICIiLmNvbmNhdChpLCAiJSIpIH0sCiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcCgKICAgICAgICAgICAgICAgICAgICBkci5ncmFwaEJhciwKICAgICAgICAgICAgICAgICAgICAoaHIoKGkgPSB7fSksIGRyLmFsaWduUmlnaHQsIDAgPCBtKSwKICAgICAgICAgICAgICAgICAgICBocihpLCBkci5oaWdobGlnaHQsIGMpLAogICAgICAgICAgICAgICAgICAgIGkpCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogZHIubnVtR3Vlc3NlcyB9LCBtKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICAgKSk7CiAgICAgIG8ucHVzaChtKTsKICAgIH0KICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgIF8uRnJhZ21lbnQsCiAgICAgIG51bGwsCiAgICAgIF8uY3JlYXRlRWxlbWVudCgiaDEiLCBudWxsLCAiR3Vlc3MgRGlzdHJpYnV0aW9uIiksCiAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGRyLmd1ZXNzRGlzdHJpYnV0aW9uIH0sIG8pCiAgICApOwogIH0KCiAgZnVuY3Rpb24gd3IoZSwgdCkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9CiAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgIDogKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgICAgIGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICBpZiAobnVsbCAhPSBuKSB7CiAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbywKICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICBzID0gITAsCiAgICAgICAgICAgIGkgPSAhMTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbiA9IG4uY2FsbChlKTsKICAgICAgICAgICAgICAhKHMgPSAoYSA9IG4ubmV4dCgpKS5kb25lKSAmJgogICAgICAgICAgICAgIChyLnB1c2goYS52YWx1ZSksICF0IHx8IHIubGVuZ3RoICE9PSB0KTsKICAgICAgICAgICAgICBzID0gITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKGkgPSAhMCksIChvID0gZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHMgfHwgbnVsbCA9PSBuLnJldHVybiB8fCBuLnJldHVybigpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChpKSB0aHJvdyBvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBrcihlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IGtyKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBrcihlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgYSA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgYVtuXSA9IGVbbl07CiAgICByZXR1cm4gYTsKICB9CgogIHZhciBfciA9IDFlMywKICAgIHZyID0gNjAgKiBfciwKICAgIHhyID0gNjAgKiB2ciwKICAgIFNyID0gMjQgKiB4ciwKICAgIEVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAiMCIpOwogICAgfTsKCiAgZnVuY3Rpb24ganIoKSB7CiAgICB2YXIgZSA9IHdyKGcudXNlU3RhdGUoIiIpLCAyKSwKICAgICAgdCA9IGVbMF0sCiAgICAgIGEgPSBlWzFdOwogICAgcmV0dXJuICgKICAgICAgZy51c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlID0gbmV3IERhdGUoKTsKICAgICAgICBlLnNldERhdGUoZS5nZXREYXRlKCkgKyAxKSwgZS5zZXRIb3VycygwLCAwLCAwLCAwKTsKICAgICAgICB2YXIgdCA9IGUuZ2V0VGltZSgpLAogICAgICAgICAgZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGEoCiAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgICAgICAgICBuID0gTWF0aC5mbG9vcihlIC0gdCk7CiAgICAgICAgICAgICAgICBpZiAobiA8PSAwKSByZXR1cm4gIjAwOjAwOjAwIjsKICAgICAgICAgICAgICAgIChlID0gTWF0aC5mbG9vcigobiAlIFNyKSAvIHhyKSksCiAgICAgICAgICAgICAgICAgICh0ID0gTWF0aC5mbG9vcigobiAlIHhyKSAvIHZyKSksCiAgICAgICAgICAgICAgICAgIChuID0gTWF0aC5mbG9vcigobiAlIHZyKSAvIF9yKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KEVyKGUpLCAiOiIpLmNvbmNhdChFcih0KSwgIjoiKS5jb25jYXQoRXIobikpOwogICAgICAgICAgICAgIH0pKHQpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9LAogICAgICAgICAgbiA9IHNldEludGVydmFsKGUsIDIwMCk7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIGUoKSwKICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwobik7CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfSwgW10pLAogICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgImRpdiIsCiAgICAgICAgeyBjbGFzc05hbWU6IGRyLnN0YXRpc3RpY0NvbnRhaW5lciB9LAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBjbGFzc05hbWU6IHAoZHIuc3RhdGlzdGljLCBkci50aW1lcikgfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpZDogInRpbWVyIiwKICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAidGltZXIiLAogICAgICAgICAgICB9LAogICAgICAgICAgICB0CiAgICAgICAgICApCiAgICAgICAgKQogICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gQ3IoZSwgcywgaSwgbCkgewogICAgcmV0dXJuIG5ldyAoaSA9IGkgfHwgUHJvbWlzZSkoZnVuY3Rpb24gKG4sIHQpIHsKICAgICAgZnVuY3Rpb24gYShlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHIobC5uZXh0KGUpKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICB0KGUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHIobC50aHJvdyhlKSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgdChlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgIHZhciB0OwogICAgICAgIGUuZG9uZQogICAgICAgICAgPyBuKGUudmFsdWUpCiAgICAgICAgICA6ICgodCA9IGUudmFsdWUpIGluc3RhbmNlb2YgaQogICAgICAgICAgICAgID8gdAogICAgICAgICAgICAgIDogbmV3IGkoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgZSh0KTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICkudGhlbihhLCBvKTsKICAgICAgfQoKICAgICAgcigobCA9IGwuYXBwbHkoZSwgcyB8fCBbXSkpLm5leHQoKSk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIEFyKG4sIGEpIHsKICAgIHZhciBvLAogICAgICByLAogICAgICBzLAogICAgICBpID0gewogICAgICAgIGxhYmVsOiAwLAogICAgICAgIHNlbnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmICgxICYgc1swXSkgdGhyb3cgc1sxXTsKICAgICAgICAgIHJldHVybiBzWzFdOwogICAgICAgIH0sCiAgICAgICAgdHJ5czogW10sCiAgICAgICAgb3BzOiBbXSwKICAgICAgfSwKICAgICAgZSA9IHsgbmV4dDogdCgwKSwgdGhyb3c6IHQoMSksIHJldHVybjogdCgyKSB9OwogICAgcmV0dXJuICgKICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgKGVbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0pLAogICAgICBlCiAgICApOwoKICAgIGZ1bmN0aW9uIHQodCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICBpZiAobykgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOwogICAgICAgICAgZm9yICg7IGk7ICkKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoKG8gPSAxKSwKICAgICAgICAgICAgICAgIHIgJiYKICAgICAgICAgICAgICAgICAgKHMgPQogICAgICAgICAgICAgICAgICAgIDIgJiB0WzBdCiAgICAgICAgICAgICAgICAgICAgICA/IHIucmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICA6IHRbMF0KICAgICAgICAgICAgICAgICAgICAgID8gci50aHJvdyB8fCAoKHMgPSByLnJldHVybikgJiYgcy5jYWxsKHIpLCAwKQogICAgICAgICAgICAgICAgICAgICAgOiByLm5leHQpICYmCiAgICAgICAgICAgICAgICAgICEocyA9IHMuY2FsbChyLCB0WzFdKSkuZG9uZSkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICByZXR1cm4gczsKICAgICAgICAgICAgICBzd2l0Y2ggKCgociA9IDApLCAodCA9IHMgPyBbMiAmIHRbMF0sIHMudmFsdWVdIDogdClbMF0pKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIHMgPSB0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGkubGFiZWwrKywgeyB2YWx1ZTogdFsxXSwgZG9uZTogITEgfTsKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgaS5sYWJlbCsrLCAociA9IHRbMV0pLCAodCA9IFswXSk7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAodCA9IGkub3BzLnBvcCgpKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAhKAogICAgICAgICAgICAgICAgICAgICAgKHMgPSAwIDwgKHMgPSBpLnRyeXMpLmxlbmd0aCAmJiBzW3MubGVuZ3RoIC0gMV0pIHx8CiAgICAgICAgICAgICAgICAgICAgICAoNiAhPT0gdFswXSAmJiAyICE9PSB0WzBdKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKDMgPT09IHRbMF0gJiYgKCFzIHx8ICh0WzFdID4gc1swXSAmJiB0WzFdIDwgc1szXSkpKSB7CiAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCA9IHRbMV07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKDYgPT09IHRbMF0gJiYgaS5sYWJlbCA8IHNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAoaS5sYWJlbCA9IHNbMV0pLCAocyA9IHQpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChzICYmIGkubGFiZWwgPCBzWzJdKSB7CiAgICAgICAgICAgICAgICAgICAgKGkubGFiZWwgPSBzWzJdKSwgaS5vcHMucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBzWzJdICYmIGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0ID0gYS5jYWxsKG4sIGkpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgKHQgPSBbNiwgZV0pLCAociA9IDApOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIG8gPSBzID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgaWYgKDUgJiB0WzBdKSB0aHJvdyB0WzFdOwogICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHRbMF0gPyB0WzFdIDogdm9pZCAwLCBkb25lOiAhMCB9OwogICAgICAgIH0pKFt0LCBlXSk7CiAgICAgIH07CiAgICB9CiAgfQoKICBrKAogICAgJy5Qcm9tby1tb2R1bGVfcHJvbW9fX09qU1M2IHtcbiAgbWFyZ2luLXRvcDogMTJweDtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5Qcm9tby1tb2R1bGVfcHJvbW9MaW5rX185UnNhcyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHdpZHRoOiAxMDAlO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgcGFkZGluZy10b3A6IDE2cHg7XG59XG4uUHJvbW8tbW9kdWxlX3Byb21vTGlua19fOVJzYXM6aG92ZXIge1xuICAtLXN2Zy1hcnJvdy1maWxsOiB2YXIoLS1zdmctYXJyb3ctZmlsbC1ob3Zlcik7XG4gIC0tc3ZnLWFycm93LXN0cm9rZTogdmFyKC0tc3ZnLWFycm93LXN0cm9rZS1ob3Zlcik7XG59XG4uUHJvbW8tbW9kdWxlX3Byb21vTGlua19fOVJzYXM6aG92ZXIgLlByb21vLW1vZHVsZV9wcm9tb0N0YV9fSjcwSUsge1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbn1cblxuLlByb21vLW1vZHVsZV9wcm9tb1RleHRfX3dnNlZ1IHtcbiAgZm9udC1mYW1pbHk6ICJueXQtZnJhbmtsaW4tNTAwIjtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgZmxleC1ncm93OiAyO1xuICBsaW5lLWhlaWdodDogMTZweDtcbn1cblxuLlByb21vLW1vZHVsZV9wcm9tb1RpdGxlX19UZ0JvMiB7XG4gIGZvbnQtZmFtaWx5OiAibnl0LWZyYW5rbGluIjtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbn1cblxuLlByb21vLW1vZHVsZV9wcm9tb0N0YV9fSjcwSUsge1xuICBkaXNwbGF5OiBibG9jaztcbiAgZm9udC1mYW1pbHk6ICJueXQtZnJhbmtsaW4iO1xuICBmb250LXdlaWdodDogNzAwO1xuICBtYXJnaW4tdG9wOiA0cHg7XG59XG5cbi8qIFRleHQgYmFsYW5jaW5nICovXG4uUHJvbW8tbW9kdWxlX3Byb21vVGV4dFByaW1hcnlfX2NobnljIHtcbiAgZGlzcGxheTogaW5saW5lO1xufVxuXG4vKiBUZXh0IGJhbGFuY2luZyAqL1xuLlByb21vLW1vZHVsZV9wcm9tb1RleHRTZWNvbmRhcnlfX21qSTVCIHtcbiAgZGlzcGxheTogaW5saW5lO1xufVxuXG4vKiBUZXh0IGJhbGFuY2luZyAqL1xuQG1lZGlhIChtYXgtd2lkdGg6IDUwMHB4KSB7XG4gIC5Qcm9tby1tb2R1bGVfcHJvbW9UZXh0UHJpbWFyeV9fY2hueWMge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG5cbiAgLlByb21vLW1vZHVsZV9wcm9tb1RleHRTZWNvbmRhcnlfX21qSTVCIHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxufVxuLlByb21vLW1vZHVsZV9wcm9tb0ljb25fX0dJcVVtIHtcbiAgd2lkdGg6IHZhcigtLXByb21vLWljb24td2lkdGgpO1xuICBoZWlnaHQ6IHZhcigtLXByb21vLWljb24taGVpZ2h0KTtcbiAgbWFyZ2luLXJpZ2h0OiAxNnB4O1xuICBwYWRkaW5nOiB2YXIoLS1wcm9tby1pY29uLXBhZGRpbmcpO1xufVxuXG4uUHJvbW8tbW9kdWxlX3Byb21vQXJyb3dfX2lxdzZOIHtcbiAganVzdGlmeS1zZWxmOiBmbGV4LWVuZDtcbn1cblxuLlByb21vLW1vZHVsZV9ydWxlX19ZbjRQayB7XG4gIG1hcmdpbi1sZWZ0OiAtMTZweDtcbiAgaGVpZ2h0OiAxcHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtNCk7XG59JwogICksCiAgICBmdW5jdGlvbiAoKSB7CiAgICAgIChjb25zb2xlLndhcm4gfHwgY29uc29sZS5sb2cpLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7CiAgICB9LmJpbmQoIltjbGlwYm9hcmQtcG9seWZpbGxdIik7CiAgdmFyIGNlID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIG5hdmlnYXRvciA/IHZvaWQgMCA6IG5hdmlnYXRvciwKICAgIEEgPSBudWxsID09IGNlID8gdm9pZCAwIDogY2UuY2xpcGJvYXJkLAogICAgT3IgPQogICAgICAobnVsbCA9PT0gKGNlID0gbnVsbCA9PSBBID8gdm9pZCAwIDogQS5yZWFkKSB8fAogICAgICAgIHZvaWQgMCA9PT0gY2UgfHwKICAgICAgICBjZS5iaW5kKEEpLAogICAgICBudWxsID09PSAoY2UgPSBudWxsID09IEEgPyB2b2lkIDAgOiBBLnJlYWRUZXh0KSB8fAogICAgICAgIHZvaWQgMCA9PT0gY2UgfHwKICAgICAgICBjZS5iaW5kKEEpLAogICAgICBudWxsID09PSAoY2UgPSBudWxsID09IEEgPyB2b2lkIDAgOiBBLndyaXRlKSB8fAogICAgICAgIHZvaWQgMCA9PT0gY2UgfHwKICAgICAgICBjZS5iaW5kKEEpLAogICAgICBudWxsID09PSAoY2UgPSBudWxsID09IEEgPyB2b2lkIDAgOiBBLndyaXRlVGV4dCkgfHwgdm9pZCAwID09PSBjZQogICAgICAgID8gdm9pZCAwCiAgICAgICAgOiBjZS5iaW5kKEEpKSwKICAgIEEgPSAidW5kZWZpbmVkIiA9PSB0eXBlb2Ygd2luZG93ID8gdm9pZCAwIDogd2luZG93LAogICAgSXIgPSAobnVsbCA9PSBBIHx8IEEuQ2xpcGJvYXJkSXRlbSwgQSk7CgogIGZ1bmN0aW9uIExyKCkgewogICAgdGhpcy5zdWNjZXNzID0gITE7CiAgfQoKICBmdW5jdGlvbiBUcihlKSB7CiAgICB2YXIgdCA9IG5ldyBMcigpLAogICAgICBlID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICBmb3IgKHZhciBhIGluICgoZS5zdWNjZXNzID0gITApLCB0KSkgewogICAgICAgICAgdmFyIG8gPSB0W2FdLAogICAgICAgICAgICByID0gbi5jbGlwYm9hcmREYXRhOwogICAgICAgICAgci5zZXREYXRhKGEsIG8pLAogICAgICAgICAgICAidGV4dC9wbGFpbiIgPT09IGEgJiYgci5nZXREYXRhKGEpICE9PSBvICYmIChlLnN1Y2Nlc3MgPSAhMSk7CiAgICAgICAgfQogICAgICAgIG4ucHJldmVudERlZmF1bHQoKTsKICAgICAgfS5iaW5kKHRoaXMsIHQsIGUpOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY29weSIsIGUpOwogICAgdHJ5IHsKICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKICAgIH0gZmluYWxseSB7CiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNvcHkiLCBlKTsKICAgIH0KICAgIHJldHVybiB0LnN1Y2Nlc3M7CiAgfQoKICBmdW5jdGlvbiBQcihlLCB0KSB7CiAgICBNcihlKTsKICAgIHQgPSBUcih0KTsKICAgIHJldHVybiBCcigpLCB0OwogIH0KCiAgZnVuY3Rpb24gTXIoZSkgewogICAgdmFyIHQsCiAgICAgIG4gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTsKICAgIG4gJiYKICAgICAgKCh0ID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSkuc2VsZWN0Tm9kZUNvbnRlbnRzKGUpLAogICAgICBuLnJlbW92ZUFsbFJhbmdlcygpLAogICAgICBuLmFkZFJhbmdlKHQpKTsKICB9CgogIGZ1bmN0aW9uIEJyKCkgewogICAgdmFyIGUgPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTsKICAgIGUgJiYgZS5yZW1vdmVBbGxSYW5nZXMoKTsKICB9CgogIGZ1bmN0aW9uIFJyKGEpIHsKICAgIHJldHVybiBDcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkgewogICAgICB2YXIgbjsKICAgICAgcmV0dXJuIEFyKHRoaXMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgKChuID0gInRleHQvcGxhaW4iIGluIGEpLAogICAgICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIENsaXBib2FyZEV2ZW50IHx8CiAgICAgICAgICAgIHZvaWQgMCA9PT0gSXIuY2xpcGJvYXJkRGF0YSB8fAogICAgICAgICAgICB2b2lkIDAgPT09IElyLmNsaXBib2FyZERhdGEuc2V0RGF0YSkKICAgICAgICApCiAgICAgICAgICByZXR1cm4gVHIoYSkgfHwKICAgICAgICAgICAgLTEgPCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkVkZ2UiKSB8fAogICAgICAgICAgICBQcihkb2N1bWVudC5ib2R5LCBhKSB8fAogICAgICAgICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgICAgIHQuc2V0QXR0cmlidXRlKCJzdHlsZSIsICItd2Via2l0LXVzZXItc2VsZWN0OiB0ZXh0ICFpbXBvcnRhbnQiKSwKICAgICAgICAgICAgICAgICh0LnRleHRDb250ZW50ID0gInRlbXBvcmFyeSBlbGVtZW50IiksCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQpOwogICAgICAgICAgICAgIGUgPSBQcih0LCBlKTsKICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KSwgZTsKICAgICAgICAgICAgfSkoYSkgfHwKICAgICAgICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICAgICAgICB0LnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiLXdlYmtpdC11c2VyLXNlbGVjdDogdGV4dCAhaW1wb3J0YW50Iik7CiAgICAgICAgICAgICAgdmFyIG4gPSB0OwogICAgICAgICAgICAgIHQuYXR0YWNoU2hhZG93ICYmIChuID0gdC5hdHRhY2hTaGFkb3coeyBtb2RlOiAib3BlbiIgfSkpOwogICAgICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgICAgICAgICAgIChhLmlubmVyVGV4dCA9IGUpLAogICAgICAgICAgICAgICAgbi5hcHBlbmRDaGlsZChhKSwKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodCksCiAgICAgICAgICAgICAgICBNcihhKTsKICAgICAgICAgICAgICBhID0gZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKICAgICAgICAgICAgICByZXR1cm4gQnIoKSwgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0KSwgYTsKICAgICAgICAgICAgfSkoYVsidGV4dC9wbGFpbiJdKQogICAgICAgICAgICA/IFsyLCAhMF0KICAgICAgICAgICAgOiBbMiwgITFdOwogICAgICAgIHZhciB0OwogICAgICAgIGlmICghbikgdGhyb3cgbmV3IEVycm9yKCJObyBgdGV4dC9wbGFpbmAgdmFsdWUgd2FzIHNwZWNpZmllZC4iKTsKICAgICAgICBpZiAoKCh0ID0gYVsidGV4dC9wbGFpbiJdKSwgSXIuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCJUZXh0IiwgdCkpKQogICAgICAgICAgcmV0dXJuIFsyLCAhMF07CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgIkNvcHlpbmcgZmFpbGVkLCBwb3NzaWJseSBiZWNhdXNlIHRoZSB1c2VyIHJlamVjdGVkIGl0LiIKICAgICAgICApOwogICAgICB9KTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gV3IobikgewogICAgcmV0dXJuIENyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBBcih0aGlzLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChPcikgcmV0dXJuIFsyLCBPcihuKV07CiAgICAgICAgaWYgKCFScigoKCh0ID0ge30pWyJ0ZXh0L3BsYWluIl0gPSBuKSwgdCkpKQogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJ3cml0ZVRleHQoKSBmYWlsZWQiKTsKICAgICAgICB2YXIgdDsKICAgICAgICByZXR1cm4gWzJdOwogICAgICB9KTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gSHIoKSB7CiAgICB2YXIgZSA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmE7CiAgICByZXR1cm4gKAogICAgICAvKGFuZHJvaWR8YmJcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyBjZXx4ZGF8eGlpbm8vaS50ZXN0KAogICAgICAgIGUKICAgICAgKSB8fAogICAgICAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1wtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XC0obnx1KXxjNTVcL3xjYXBpfGNjd2F8Y2RtXC18Y2VsbHxjaHRtfGNsZGN8Y21kXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcLTV8Z1wtbW98Z28oXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXC0obXxwfHQpfGhlaVwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcLWN8aHQoYyhcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcLXxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcLyl8a2xvbnxrcHQgfGt3Y1wtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcLyhrfGx8dSl8NTB8NTR8XC1bYS13XSl8bGlid3xseW54fG0xXC13fG0zZ2F8bTUwXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcLWd8cWFcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XC1bMi03XXxpXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcLXxvb3xwXC0pfHNka1wvfHNlKGMoXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXC18c2hhcnxzaWUoXC18bSl8c2tcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFwtfHZcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFwtfHRkZ1wtfHRlbChpfG0pfHRpbVwtfHRcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXC18bTN8bTUpfHR4XC05fHVwKFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1wtfHlvdXJ8emV0b3x6dGVcLS9pLnRlc3QoCiAgICAgICAgZS5zdWJzdHIoMCwgNCkKICAgICAgKQogICAgKTsKICB9CgogIHZhciBEciA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJhbmRyb2lkIiA9PT0gd2luZG93Lm5ld3NyZWFkZXJBcHBQbGF0Zm9ybTsKICAgIH0sCiAgICBxciA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJhbmRyb2lkIiA9PT0gd2luZG93LmdhbWVzQXBwUGxhdGZvcm07CiAgICB9OwoKICBmdW5jdGlvbiBHcihlLCB0LCBuKSB7CiAgICB0cnkgewogICAgICBIcigpICYmCiAgICAgICEoLTEgPCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiZmlyZWZveCIpKSAmJgogICAgICB2b2lkIDAgIT09IG5hdmlnYXRvci5zaGFyZSAmJgogICAgICBuYXZpZ2F0b3IuY2FuU2hhcmUgJiYKICAgICAgbmF2aWdhdG9yLmNhblNoYXJlKGUpCiAgICAgICAgPyBuYXZpZ2F0b3Iuc2hhcmUoZSkuY2F0Y2goZnVuY3Rpb24gKCkge30pCiAgICAgICAgOiBXcihlLnRleHQpLnRoZW4odCwgbik7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIG4oKSwgY29uc29sZS53YXJuKCJTaGFyZSBmYWlsZWQiLCBlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIEZyKGUsIHQsIG4pIHsKICAgIHZhciBhLCBvOwogICAgKHFyKCkgfHwgRHIoKSkgJiYgd2luZG93LmlzSHlicmlkV2ViVmlldwogICAgICA/ICgoYSA9IG51bGwgPT0gZSA/IHZvaWQgMCA6IGUudGV4dCksCiAgICAgICAgbnVsbCAhPT0gKG8gPSB3aW5kb3cuTmF0aXZlQnJpZGdlKSAmJgogICAgICAgICAgdm9pZCAwICE9PSBvICYmCiAgICAgICAgICBvLnNoYXJlKGEsICIiLCAiIikpCiAgICAgIDogR3IoZSwgdCwgbik7CiAgfQoKICB2YXIgVnIgPSAiQXV0aENUQS1tb2R1bGVfY29udGFpbmVyX19tRmctbSIsCiAgICBZciA9ICJBdXRoQ1RBLW1vZHVsZV9pY29uX19mWlQ4OCIsCiAgICBVciA9ICJBdXRoQ1RBLW1vZHVsZV9wcm9tb0ljb25fXzItU1J6IiwKICAgIFpyID0gIkF1dGhDVEEtbW9kdWxlX3RleHRDb250YWluZXJfX2tJakRYIiwKICAgIFhyID0gIkF1dGhDVEEtbW9kdWxlX2JvbGRfX1RobWtQIiwKICAgIEtyID0gIkF1dGhDVEEtbW9kdWxlX3N1YlRleHRfXzJRc3c1IiwKICAgIEpyID0gIkF1dGhDVEEtbW9kdWxlX3RpdGxlX19pQll0cSIsCiAgICBRciA9ICJBdXRoQ1RBLW1vZHVsZV9saW5lMV9fZWhvYmIiLAogICAgJHIgPSAiQXV0aENUQS1tb2R1bGVfYnV0dG9uc0NvbnRhaW5lcl9feTBiMUoiLAogICAgZXMgPSAiQXV0aENUQS1tb2R1bGVfbW9yZUxpbmtfX3BBSkhvIiwKICAgIHRzID0gIkF1dGhDVEEtbW9kdWxlX2xvZ2luQnV0dG9uX18wRmNFciIsCiAgICBucyA9ICJBdXRoQ1RBLW1vZHVsZV9mb290ZXJfXzktaEdHIiwKICAgIGFzID0gIkF1dGhDVEEtbW9kdWxlX2Zvb3RlckNvbnRhaW5lcl9fajl3M3giLAogICAgb3MgPSAiQXV0aENUQS1tb2R1bGVfcHJvbW9CdXR0b25fX2kzaU5LIiwKICAgIHJzID0gIkF1dGhDVEEtbW9kdWxlX3NoYXJlQnV0dG9uX19Tc05BNiIsCiAgICBzcyA9ICJBdXRoQ1RBLW1vZHVsZV9zaGFyZUljb25fX3g1V3RQIiwKICAgIGlzID0gIkF1dGhDVEEtbW9kdWxlX3NoYXJlVGV4dF9fbzdXTC0iOwoKICBmdW5jdGlvbiBscyhlKSB7CiAgICB2YXIgdCA9IGUubG9nZ2VkSW4sCiAgICAgIG4gPSBlLm1vb2dsZU9wdGVkSW4sCiAgICAgIGEgPSBUKCksCiAgICAgIGUgPSB0ICYmICFuLAogICAgICBvID0gIklOX1BST0dSRVNTIiAhPT0gUChHZSk7CiAgICByZXR1cm4gbgogICAgICA/IG51bGwKICAgICAgOiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICBfLkZyYWdtZW50LAogICAgICAgICAgbnVsbCwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBWciB9LAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImltZyIsIHsKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogWXIsCiAgICAgICAgICAgICAgICBhbHQ6ICJTdGF0aXN0aWNzIEdyYXBoIEJhciBpbiBHcmVlbiB3aXRoIENoZWNrIE1hcmsiLAogICAgICAgICAgICAgICAgc3R5bGU6IHsgY29udGVudDogInZhcigtLXN0YXRzLWF1dGgpIiB9LAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogWnIgfSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoInAiLCB7IGNsYXNzTmFtZTogSnIgfSwgIk5ldyIpLAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJwIiwKICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwKFhyLCBRcikgfSwKICAgICAgICAgICAgICAgICJMaW5rIHlvdXIgc3RhdHMgdG8gIiwKICAgICAgICAgICAgICAgIHQgPyAidGhpcyIgOiAiYSBmcmVlIiwKICAgICAgICAgICAgICAgICIgTmV3IFlvcmsgVGltZXMgYWNjb3VudC4iCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAicCIsCiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogS3IgfSwKICAgICAgICAgICAgICAgICJZb3VyIHN0YXRzICIsCiAgICAgICAgICAgICAgICAhdCAmJiAiYW5kIHN0cmVhayIsCiAgICAgICAgICAgICAgICAiIHdpbGwgc2F2ZSB3aGVyZXZlciB5b3UgcGxheS4iCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICApLAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgeyBjbGFzc05hbWU6ICRyIH0sCiAgICAgICAgICAgICF0ICYmCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogdHMgfSwKICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICAgdW8sCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBhcmlhTGFiZWw6ICJMaW5rIGZvciBsb2dnaW5nIGluIG9yIGNyZWF0aW5nIGEgZnJlZSBhY2NvdW50IiwKICAgICAgICAgICAgICAgICAgICBvcHRJbjogITAsCiAgICAgICAgICAgICAgICAgICAgdHJhY2tFdmVudDogewogICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAibG9nLWluLWNvbmdyYXRzIiwKICAgICAgICAgICAgICAgICAgICAgIHNlbmRDb250ZXh0OiAhMCwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAiTG9nIGluIG9yIGNyZWF0ZSBhIGZyZWUgYWNjb3VudCIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICApLAogICAgICAgICAgICBlICYmCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgImJ1dHRvbiIsCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRzLAogICAgICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6ICJMaW5rIHN0YXRzIHRvIG15IGFjY291bnQiLAogICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgbyAmJiBhKGllKCJzdGF0cy1saW5rLWNvbmdyYXRzIiwgITApKSwgYSh0ZSgic3RhdHNMaW5rIikpOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJMaW5rIHN0YXRzIHRvIG15IGFjY291bnQiCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJiciIsIG51bGwpLAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImJ1dHRvbiIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBlcywKICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBhKHRlKCJsaW5rSW5mbyIpKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAiVGVsbCBtZSBtb3JlID4iCiAgICAgICAgICAgICkKICAgICAgICAgICkKICAgICAgICApOwogIH0KCiAgZnVuY3Rpb24gY3MoZSkgewogICAgdmFyIHQgPSBlLmhhbmRsZVNoYXJlLAogICAgICBuID0gZS5oYW5kbGVUcmFjazsKICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICJkaXYiLAogICAgICB7IGNsYXNzTmFtZTogbnMgfSwKICAgICAgXy5jcmVhdGVFbGVtZW50KCJwIiwgbnVsbCwgIk5FWFQgV09SRExFIiksCiAgICAgIF8uY3JlYXRlRWxlbWVudChqciwgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7IGNsYXNzTmFtZTogYXMgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiYnV0dG9uIiwKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGlkOiAic2hhcmUtYnV0dG9uIiwKICAgICAgICAgICAgY2xhc3NOYW1lOiBycywKICAgICAgICAgICAgb25DbGljazogdCwKICAgICAgICAgIH0sCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7IGNsYXNzTmFtZTogaXMgfSwgIlNoYXJlIiksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoSm8sIHsgaWQ6IHNzLCBpY29uOiAic2hhcmUiIH0pCiAgICAgICAgKQogICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gdXMoKSB7CiAgICB2YXIgdCA9IFQoKSwKICAgICAgbiA9ICIiLmNvbmNhdChQKFllKSksCiAgICAgIGUgPSBQKG1vKSwKICAgICAgYSA9IFAoR2UpLAogICAgICBvID0gUChGZSksCiAgICAgIHIgPSBQKGJvKSwKICAgICAgcyA9ICJJTl9QUk9HUkVTUyIgIT09IGEsCiAgICAgIGkgPSBQKEVlKSwKICAgICAgbCA9ICEhUChBZSksCiAgICAgIGMgPSBubygiYXV0aCIpIHx8IGk7CiAgICBnLnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICAgIHQoaXIocykpOwogICAgfSwgW10pOwoKICAgIGZ1bmN0aW9uIHUoKSB7CiAgICAgIHYudHJhY2tDbGljayh7CiAgICAgICAgbmFtZTogIndvcmRsZSIsCiAgICAgICAgbGFiZWw6ICJuZXh0LWdhbWUiLAogICAgICAgIGNvbnRleHQ6ICJzcGVsbGluZy1iZWUiLAogICAgICAgIHVzZUJlYWNvbjogITAsCiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGQoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCksCiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKSwKICAgICAgICB2LnRyYWNrQ2xpY2soewogICAgICAgICAgbmFtZTogIndvcmRsZSIsCiAgICAgICAgICBsYWJlbDogInNoYXJlIiwKICAgICAgICAgIGNvbnRleHQ6IG4sCiAgICAgICAgfSksCiAgICAgICAgRnIoCiAgICAgICAgICByLAogICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0KGxyKCkpLAogICAgICAgICAgICAgIHQoCiAgICAgICAgICAgICAgICBzZSh7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICJDb3BpZWQgcmVzdWx0cyB0byBjbGlwYm9hcmQiLAogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMmUzLAogICAgICAgICAgICAgICAgICBpc1N5c3RlbTogITAsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICk7CiAgICAgICAgICB9LAogICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0KHNlKHsgdGV4dDogIlNoYXJlIGZhaWxlZCIsIGR1cmF0aW9uOiAyZTMsIGlzU3lzdGVtOiAhMCB9KSk7CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH0KCiAgICBpZiAoYykgewogICAgICBjID0gMCA9PT0gZS5nYW1lc1BsYXllZCA/IGRyLnN0YXRzQnRuQ2VudGVyIDogZHIuc3RhdHNCdG5MZWZ0OwogICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsKICAgICAgICAgICJkYXRhLXRlc3RpZCI6ICJhdXRoQ29udGFpbmVyIiwKICAgICAgICAgIGNsYXNzTmFtZTogZHIuZ2FtZVN0YXRzLAogICAgICAgIH0sCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImgxIiwKICAgICAgICAgIHsgY2xhc3NOYW1lOiBkci5zdGF0aXN0aWNzSGVhZGluZyB9LAogICAgICAgICAgIlN0YXRpc3RpY3MiCiAgICAgICAgKSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoeXIsIHsgc3RhdHM6IGUgfSksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KGJyLCB7CiAgICAgICAgICBndWVzc2VzOiBlLmd1ZXNzZXMsCiAgICAgICAgICByb3dJbmRleDogbywKICAgICAgICAgIGdhbWVTdGF0dXM6IGEsCiAgICAgICAgfSksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImRpdiIsCiAgICAgICAgICB7IGNsYXNzTmFtZTogYyB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiYnV0dG9uIiwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgIGNsYXNzTmFtZTogZHIuc3RhdHNJbmZvQnRuLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KHRlKCJzdGF0c1Byb2JsZW0iKSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgIk15IHN0YXRzIGRvbid0IGxvb2sgcmlnaHQgPiIKICAgICAgICAgICkKICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBjbGFzc05hbWU6IGRyLmN0YUNvbnRhaW5lciB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KGxzLCB7CiAgICAgICAgICAgIGxvZ2dlZEluOiBsLAogICAgICAgICAgICBtb29nbGVPcHRlZEluOiBpLAogICAgICAgICAgfSksCiAgICAgICAgICBzCiAgICAgICAgICAgID8gXy5jcmVhdGVFbGVtZW50KGNzLCB7CiAgICAgICAgICAgICAgICBoYW5kbGVUcmFjazogdSwKICAgICAgICAgICAgICAgIGhhbmRsZVNoYXJlOiBkLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIDogXy5jcmVhdGVFbGVtZW50KCJkaXYiKQogICAgICAgICkKICAgICAgKTsKICAgIH0KICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICJkaXYiLAogICAgICB7IGNsYXNzTmFtZTogZHIuZ2FtZVN0YXRzIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgiaDEiLCBudWxsLCAiU3RhdGlzdGljcyIpLAogICAgICBfLmNyZWF0ZUVsZW1lbnQoeXIsIHsgc3RhdHM6IGUgfSksCiAgICAgIF8uY3JlYXRlRWxlbWVudChiciwgewogICAgICAgIGd1ZXNzZXM6IGUuZ3Vlc3NlcywKICAgICAgICByb3dJbmRleDogbywKICAgICAgICBnYW1lU3RhdHVzOiBhLAogICAgICB9KSwKICAgICAgcyAmJgogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBjbGFzc05hbWU6IGRyLmZvb3RlciB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgeyBjbGFzc05hbWU6IGRyLmNvdW50ZG93biB9LAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImgxIiwgbnVsbCwgIk5leHQgV09SRExFIiksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChqciwgbnVsbCkKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IGNsYXNzTmFtZTogZHIuc2hhcmUgfSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJidXR0b24iLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgaWQ6ICJzaGFyZS1idXR0b24iLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBkci5zaGFyZUJ1dHRvbiwKICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGQsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAiU2hhcmUiLAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJzcGFuIiwKICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBkci5zaGFyZUljb25Db250YWluZXIgfSwKICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChKbywgeyBpY29uOiAic2hhcmUiIH0pCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICApCiAgICAgICAgKQogICAgKTsKICB9CgogIGsoCiAgICAiLkF1dGhDVEEtbW9kdWxlX2NvbnRhaW5lcl9fbUZnLW0ge1xuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tY29sb3ItdG9uZS05KTtcbiAgdGV4dC1hbGlnbjogbGVmdDtcbiAgZGlzcGxheTogZmxleDtcbiAgcGFkZGluZzogMTBweDtcbiAgcGFkZGluZy1ib3R0b206IDdweDtcbiAgcGFkZGluZy1sZWZ0OiAxNHB4O1xufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogNTAwcHgpIHtcbiAgLkF1dGhDVEEtbW9kdWxlX2NvbnRhaW5lcl9fbUZnLW0ge1xuICAgIHBhZGRpbmc6IDE1cHggNTBweCAxMHB4IDUwcHg7XG4gIH1cbn1cbi5BdXRoQ1RBLW1vZHVsZV9pY29uX19mWlQ4OCB7XG4gIHBhZGRpbmctdG9wOiAxMHB4O1xufVxuXG4uQXV0aENUQS1tb2R1bGVfcHJvbW9JY29uX18yLVNSeiB7XG4gIHdpZHRoOiAyNXB4O1xuICBoZWlnaHQ6IDI1cHg7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHZhcigtLXNwZWxsaW5nLWJlZS1wcm9tbyk7XG4gIGJhY2tncm91bmQtc2l6ZTogMjVweDtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICBtYXJnaW4tbGVmdDogNXB4O1xufVxuXG4uQXV0aENUQS1tb2R1bGVfdGV4dENvbnRhaW5lcl9fa0lqRFggPiBwIHtcbiAgbWFyZ2luOiA1cHg7XG59XG4uQXV0aENUQS1tb2R1bGVfdGV4dENvbnRhaW5lcl9fa0lqRFggLkF1dGhDVEEtbW9kdWxlX2JvbGRfX1RobWtQIHtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XG59XG4uQXV0aENUQS1tb2R1bGVfdGV4dENvbnRhaW5lcl9fa0lqRFggLkF1dGhDVEEtbW9kdWxlX3N1YlRleHRfXzJRc3c1IHtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMTEpO1xuICBmb250LXdlaWdodDogNDAwO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxNnB4O1xuICBtYXJnaW4tYm90dG9tOiAxMnB4O1xufVxuLkF1dGhDVEEtbW9kdWxlX3RleHRDb250YWluZXJfX2tJakRYIC5BdXRoQ1RBLW1vZHVsZV90aXRsZV9faUJZdHEge1xuICBjb2xvcjogIzI2NzFkYztcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgZm9udC1zaXplOiAxMXB4O1xuICBsaW5lLWhlaWdodDogMTJweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMWVtO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBtYXJnaW4tYm90dG9tOiAycHg7XG59XG4uQXV0aENUQS1tb2R1bGVfdGV4dENvbnRhaW5lcl9fa0lqRFggLkF1dGhDVEEtbW9kdWxlX2xpbmUxX19laG9iYiB7XG4gIG1hcmdpbi1ib3R0b206IDA7XG59XG4uQXV0aENUQS1tb2R1bGVfdGV4dENvbnRhaW5lcl9fa0lqRFggLkF1dGhDVEEtbW9kdWxlX2xpbmUyX18zLWNWRSB7XG4gIG1hcmdpbi10b3A6IDA7XG4gIG1hcmdpbi1ib3R0b206IDRweDtcbn1cblxuLkF1dGhDVEEtbW9kdWxlX2J1dHRvbnNDb250YWluZXJfX3kwYjFKIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tdG9wOiAxMHB4O1xufVxuLkF1dGhDVEEtbW9kdWxlX2J1dHRvbnNDb250YWluZXJfX3kwYjFKIC5BdXRoQ1RBLW1vZHVsZV9tb3JlTGlua19fcEFKSG8ge1xuICBhbGw6IHVuc2V0O1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBmb250LXdlaWdodDogNDAwO1xuICBsaW5lLWhlaWdodDogMTZweDtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMTEpO1xuICBtYXJnaW46IDEwcHggMjBweCAyMHB4IDIwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cbi5BdXRoQ1RBLW1vZHVsZV9idXR0b25zQ29udGFpbmVyX195MGIxSiAuQXV0aENUQS1tb2R1bGVfbG9naW5CdXR0b25fXzBGY0VyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItdG9uZS03KTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbGluZS1oZWlnaHQ6IDE0cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGJvcmRlci1yYWRpdXM6IDU1cHg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMDRlbTtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBwYWRkaW5nOiAxNHB4IDVweDtcbn1cbi5BdXRoQ1RBLW1vZHVsZV9idXR0b25zQ29udGFpbmVyX195MGIxSiAuQXV0aENUQS1tb2R1bGVfbG9naW5CdXR0b25fXzBGY0VyID4gYSB7XG4gIGNvbG9yOiBpbmhlcml0O1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA1MDBweCkge1xuICAuQXV0aENUQS1tb2R1bGVfYnV0dG9uc0NvbnRhaW5lcl9feTBiMUoge1xuICAgIHdpZHRoOiA4MCU7XG4gICAgbWFyZ2luOiAwIGF1dG87XG4gIH1cblxuICAuQXV0aENUQS1tb2R1bGVfbG9naW5CdXR0b25fXzBGY0VyIHtcbiAgICB3aWR0aDogOTAlO1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICB9XG59XG5AbWVkaWEgKG1heC13aWR0aDogNDk5cHgpIHtcbiAgLkF1dGhDVEEtbW9kdWxlX2J1dHRvbnNDb250YWluZXJfX3kwYjFKIHtcbiAgICB3aWR0aDogNzAlO1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICB9XG5cbiAgLkF1dGhDVEEtbW9kdWxlX2xvZ2luQnV0dG9uX18wRmNFciB7XG4gICAgd2lkdGg6IDEwMCU7XG4gIH1cbn1cbi5BdXRoQ1RBLW1vZHVsZV9mb290ZXJfXzktaEdHIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB3aWR0aDogMTAwJTtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtOSk7XG59XG4uQXV0aENUQS1tb2R1bGVfZm9vdGVyX185LWhHRyBwIHtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBsaW5lLWhlaWdodDogMjBweDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMDdlbTtcbiAgbWFyZ2luLXRvcDogMTJweDtcbiAgbWFyZ2luLWJvdHRvbTogMTJweDtcbn1cblxuLkF1dGhDVEEtbW9kdWxlX2Zvb3RlckNvbnRhaW5lcl9fajl3M3gge1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6IDEycHg7XG59XG4uQXV0aENUQS1tb2R1bGVfZm9vdGVyQ29udGFpbmVyX19qOXczeCA+IGEuQXV0aENUQS1tb2R1bGVfcHJvbW9CdXR0b25fX2kzaU5LLFxuLkF1dGhDVEEtbW9kdWxlX2Zvb3RlckNvbnRhaW5lcl9fajl3M3ggYnV0dG9uLkF1dGhDVEEtbW9kdWxlX3NoYXJlQnV0dG9uX19Tc05BNiB7XG4gIHdpZHRoOiA1MCU7XG59XG5cbi5BdXRoQ1RBLW1vZHVsZV9wcm9tb0J1dHRvbl9faTNpTksge1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci10b25lLTEpO1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiAxMDVweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItdG9uZS03KTtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBsaW5lLWhlaWdodDogMTZweDtcbiAgY29sb3I6IGluaGVyaXQ7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luLXJpZ2h0OiAxMnB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cblxuLkF1dGhDVEEtbW9kdWxlX3NoYXJlQnV0dG9uX19Tc05BNiB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWtleS1iZy1jb3JyZWN0KTtcbiAgY29sb3I6IHZhcigtLWtleS1ldmFsdWF0ZWQtdGV4dC1jb2xvcik7XG4gIGJvcmRlci1yYWRpdXM6IDEwNHB4O1xuICBib3JkZXI6IG5vbmU7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gIHdpZHRoOiA4MCU7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuI0F1dGhDVEEtbW9kdWxlX3NoYXJlSWNvbl9feDVXdFAge1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBtYXJnaW4tbGVmdDogMTBweDtcbn1cblxuLkF1dGhDVEEtbW9kdWxlX3NoYXJlVGV4dF9fbzdXTC0ge1xuICBjb2xvcjogdmFyKC0td2hpdGUpO1xufSIKICApOwoKICBmdW5jdGlvbiBkcyhlKSB7CiAgICB2YXIgdCwKICAgICAgbiwKICAgICAgYSwKICAgICAgbyA9CiAgICAgICAgMSA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0KICAgICAgICAgID8gYXJndW1lbnRzWzFdCiAgICAgICAgICA6ICJXb3JkbGUgRmVlZGJhY2siLAogICAgICByID0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpLAogICAgICBzID0gdGEoZSksCiAgICAgIHMgPSAiXHJcblxyXG5cbi0tXG5EZXZpY2Ugc3VtbWFyeTpcblBhZ2U6IC9nYW1lcy93b3JkbGVcblBsYXRmb3JtOiAiCiAgICAgICAgLmNvbmNhdChIcigpID8gIldlYiAoTW9iaWxlKSIgOiAiV2ViIChEZXNrdG9wKSIsICIgXG5Ccm93c2VyOiAiKQogICAgICAgIC5jb25jYXQoCiAgICAgICAgICAodCA9IHQgPQogICAgICAgICAgICAodCA9IG5hdmlnYXRvci51c2VyQWdlbnQpLm1hdGNoKC9jaHJvbWV8Y2hyb21pdW18Y3Jpb3MvaSkKICAgICAgICAgICAgICA/ICJjaHJvbWUiCiAgICAgICAgICAgICAgOiB0Lm1hdGNoKC9maXJlZm94fGZ4aW9zL2kpCiAgICAgICAgICAgICAgPyAiZmlyZWZveCIKICAgICAgICAgICAgICA6IHQubWF0Y2goL3NhZmFyaS9pKQogICAgICAgICAgICAgID8gInNhZmFyaSIKICAgICAgICAgICAgICA6IHQubWF0Y2goL29wclwvL2kpCiAgICAgICAgICAgICAgPyAib3BlcmEiCiAgICAgICAgICAgICAgOiB0Lm1hdGNoKC9lZGcvaSkKICAgICAgICAgICAgICA/ICJlZGdlIgogICAgICAgICAgICAgIDogIk5vIGJyb3dzZXIgZGV0ZWN0aW9uIikKICAgICAgICAgICAgLmNoYXJBdCgwKQogICAgICAgICAgICAudG9VcHBlckNhc2UoKSArIHQuc2xpY2UoMSksCiAgICAgICAgICAiXG5TY3JlZW4gUmVzb2x1dGlvbjogIgogICAgICAgICkKICAgICAgICAuY29uY2F0KHdpbmRvdy5zY3JlZW4ud2lkdGgsICIgeCAiKQogICAgICAgIC5jb25jYXQod2luZG93LnNjcmVlbi5oZWlnaHQsICJcblZpZXdwb3J0IFNpemU6ICIpCiAgICAgICAgLmNvbmNhdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsICIgeCAiKQogICAgICAgIC5jb25jYXQoCiAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LAogICAgICAgICAgIlxuVGltZXpvbmU6ICIsCiAgICAgICAgICAiVVRDIi5jb25jYXQoMCA8IHIgPyAiIiA6ICIrIikuY29uY2F0KHIgLyAtNjApLAogICAgICAgICAgIlxuQnVpbGQ6ICIKICAgICAgICApCiAgICAgICAgLmNvbmNhdCgKICAgICAgICAgIG51bGwgPT09IChyID0gd2luZG93LnNlbnRyeUNvbmZpZykgfHwgdm9pZCAwID09PSByCiAgICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICAgIDogci5yZWxlYXNlLAogICAgICAgICAgIlxuXG5Bbm9uIExvY2FsIFN0b3JhZ2U6XG4iCiAgICAgICAgKQogICAgICAgIC5jb25jYXQocy5hbm9uLCAiXG5cbkxvY2FsIFN0b3JhZ2UgU3RhdGlzdGljczpcbiIpCiAgICAgICAgLmNvbmNhdChzLnN0YXRzLCAiXG5cbkxvY2FsIFN0b3JhZ2UgZm9yIHJlZ2k6ICIpCiAgICAgICAgLmNvbmNhdChlIHx8ICJbTk9ORV0iLCAiOlxuIikKICAgICAgICAuY29uY2F0KHMucmVnaSwgIlxuICAiKTsKICAgIHJldHVybiAoCiAgICAgICJtYWlsdG86IiArCiAgICAgICgobiA9IHsgc3ViamVjdDogbywgYm9keTogcyB9KSwKICAgICAgKGEgPSBbXSksCiAgICAgIE9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBhLnB1c2goCiAgICAgICAgICAiIi5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KGUpLCAiPSIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQobltlXSkpCiAgICAgICAgKTsKICAgICAgfSksCiAgICAgICI/Ii5jb25jYXQoYS5qb2luKCImIikpKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIG1zKGUsIHQpIHsKICAgIHJldHVybiB7IHR5cGU6IHBzLCBwYXlsb2FkOiB7IG5hbWU6IGUsIHZhbHVlOiB0IH0gfTsKICB9CgogIHZhciBwcyA9ICJ3b3JkbGUvc2V0dGluZ3MvQ0hBTkdFX1NFVFRJTkciLAogICAgeXMgPSAiU3dpdGNoLW1vZHVsZV9jb250YWluZXJfX0RpQnNlIiwKICAgIGdzID0gIlN3aXRjaC1tb2R1bGVfc3dpdGNoX19MTGNNaiIsCiAgICBmcyA9ICJTd2l0Y2gtbW9kdWxlX2tub2JfX29SVHBQIiwKICAgIGhzID0gIlN3aXRjaC1tb2R1bGVfY2hlY2tlZF9fODFmQTMiLAogICAgYnMgPSAiU3dpdGNoLW1vZHVsZV9kaXNhYmxlZF9fNm9mdVoiOwoKICBmdW5jdGlvbiB3cyhlLCB0LCBuKSB7CiAgICByZXR1cm4gKAogICAgICB0IGluIGUKICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7CiAgICAgICAgICAgIHZhbHVlOiBuLAogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgfSkKICAgICAgICA6IChlW3RdID0gbiksCiAgICAgIGUKICAgICk7CiAgfQoKICBrKAogICAgIi5Td2l0Y2gtbW9kdWxlX2NvbnRhaW5lcl9fRGlCc2Uge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG5cbi5Td2l0Y2gtbW9kdWxlX3N3aXRjaF9fTExjTWoge1xuICBoZWlnaHQ6IDIwcHg7XG4gIHdpZHRoOiAzMnB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci10b25lLTMpO1xuICBib3JkZXI6IG5vbmU7XG4gIGJvcmRlci1yYWRpdXM6IDk5OXB4O1xuICBkaXNwbGF5OiBibG9jaztcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uU3dpdGNoLW1vZHVsZV9rbm9iX19vUlRwUCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDJweDtcbiAgdG9wOiAycHg7XG4gIGhlaWdodDogY2FsYygxMDAlIC0gNHB4KTtcbiAgd2lkdGg6IDUwJTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBiYWNrZ3JvdW5kOiB2YXIoLS13aGl0ZSk7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwKTtcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3M7XG59XG5cbi5Td2l0Y2gtbW9kdWxlX2NoZWNrZWRfXzgxZkEzIC5Td2l0Y2gtbW9kdWxlX3N3aXRjaF9fTExjTWoge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvci1jb3JyZWN0KTtcbn1cbi5Td2l0Y2gtbW9kdWxlX2NoZWNrZWRfXzgxZkEzIC5Td2l0Y2gtbW9kdWxlX2tub2JfX29SVHBQIHtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKGNhbGMoMTAwJSAtIDRweCkpO1xufVxuXG4uU3dpdGNoLW1vZHVsZV9jb250YWluZXJfX0RpQnNlLlN3aXRjaC1tb2R1bGVfZGlzYWJsZWRfXzZvZnVaIC5Td2l0Y2gtbW9kdWxlX3N3aXRjaF9fTExjTWoge1xuICBvcGFjaXR5OiAwLjU7XG59IgogICk7CgogIGZ1bmN0aW9uIGtzKGUpIHsKICAgIHZhciB0ID0gZS5kaXNhYmxlZCwKICAgICAgbiA9IGUubmFtZSwKICAgICAgYSA9IGUub25DbGljaywKICAgICAgbyA9IGUuc2VsZWN0ZWQ7CiAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAiZGl2IiwKICAgICAgewogICAgICAgIGlkOiBuLAogICAgICAgIGNsYXNzTmFtZTogcCh5cywgKHdzKChlID0ge30pLCBocywgbyksIHdzKGUsIGJzLCB0KSwgZSkpLAogICAgICB9LAogICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgImJ1dHRvbiIsCiAgICAgICAgewogICAgICAgICAgImFyaWEtY2hlY2tlZCI6IG8sCiAgICAgICAgICAiYXJpYS1sYWJlbCI6IG4sCiAgICAgICAgICBjbGFzc05hbWU6IGdzLAogICAgICAgICAgb25DbGljazogYSwKICAgICAgICAgIHJvbGU6ICJzd2l0Y2giLAogICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoInNwYW4iLCB7IGNsYXNzTmFtZTogZnMgfSkKICAgICAgKQogICAgKTsKICB9CgogIHZhciBfcyA9ICJTZXR0aW5ncy1tb2R1bGVfc2V0dGluZ19fSWROLVQiLAogICAgdnMgPSAiU2V0dGluZ3MtbW9kdWxlX3RpdGxlX19mLWNGeSIsCiAgICB4cyA9ICJTZXR0aW5ncy1tb2R1bGVfdGV4dF9fbzN3b3kiLAogICAgRXMgPSAiU2V0dGluZ3MtbW9kdWxlX2Rlc2NyaXB0aW9uX19yVG85dSIsCiAgICBqcyA9ICJTZXR0aW5ncy1tb2R1bGVfZm9vdG5vdGVfX1V0TXRIIiwKICAgIHpzID0gIlNldHRpbmdzLW1vZHVsZV9lbmFibGVBdXRoX19UT3hHZyI7CiAgaygKICAgICIuU2V0dGluZ3MtbW9kdWxlX3NldHRpbmdfX0lkTi1UIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29sb3ItdG9uZS00KTtcbiAgcGFkZGluZzogMTZweCAwO1xufVxuLlNldHRpbmdzLW1vZHVsZV9zZXR0aW5nX19JZE4tVCBhLFxuLlNldHRpbmdzLW1vZHVsZV9zZXR0aW5nX19JZE4tVCBhOnZpc2l0ZWQge1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0yKTtcbn1cblxuLlNldHRpbmdzLW1vZHVsZV90aXRsZV9fZi1jRnkge1xuICBmb250LXNpemU6IDE4cHg7XG59XG5cbi5TZXR0aW5ncy1tb2R1bGVfdGV4dF9fbzN3b3kge1xuICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG59XG5cbi5TZXR0aW5ncy1tb2R1bGVfZmVlZGJhY2tMaW5rX19lTDI4TCB7XG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xufVxuXG4uU2V0dGluZ3MtbW9kdWxlX2Rlc2NyaXB0aW9uX19yVG85dSB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMik7XG59XG5cbi5TZXR0aW5ncy1tb2R1bGVfZm9vdG5vdGVfX1V0TXRIIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBwYWRkaW5nOiAxNnB4O1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0yKTtcbiAgZm9udC1zaXplOiAxMnB4O1xuICB0ZXh0LWFsaWduOiByaWdodDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogZmxleC1lbmQ7XG59XG5cbkBtZWRpYSAobWluLXdpZHRoOiA1MDFweCkge1xuICAuU2V0dGluZ3MtbW9kdWxlX2Zvb3Rub3RlX19VdE10SC5TZXR0aW5ncy1tb2R1bGVfZW5hYmxlQXV0aF9fVE94R2cge1xuICAgIHBvc2l0aW9uOiBpbml0aWFsO1xuICAgIHBhZGRpbmctbGVmdDogMDtcbiAgICBwYWRkaW5nLXJpZ2h0OiAwO1xuICB9XG59XG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXdpZHRoOiAzMjBweCkgYW5kIChtYXgtZGV2aWNlLXdpZHRoOiA0ODBweCkge1xuICAuU2V0dGluZ3MtbW9kdWxlX3NldHRpbmdfX0lkTi1UIHtcbiAgICBwYWRkaW5nOiAxNnB4O1xuICB9XG59IgogICk7CiAgdmFyIE5zID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IFQoKSwKICAgICAgICB0ID0gUChZZSksCiAgICAgICAgbiA9IFAoR2UpLAogICAgICAgIGEgPSBQKEZlKSwKICAgICAgICBvID0gUChMKSwKICAgICAgICByID0gUChJKSwKICAgICAgICBzID0gUChPKSwKICAgICAgICBpID0gUChFZSksCiAgICAgICAgbCA9IFAoQWUpLAogICAgICAgIGMgPSBubygiYXV0aCIpLAogICAgICAgIHUgPSAhcyAmJiAiSU5fUFJPR1JFU1MiID09PSBuICYmIDAgIT09IGEsCiAgICAgICAgYSA9IGMgfHwgaSwKICAgICAgICBjID0gd2luZG93LmlzSHlicmlkV2ViVmlldyA/IHZvaWQgMCA6IGRzKGwpOwogICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgIF8uRnJhZ21lbnQsCiAgICAgICAgbnVsbCwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiZGl2IiwKICAgICAgICAgIG51bGwsCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJzZWN0aW9uIiwKICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBfcyB9LAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHhzIH0sCiAgICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiB2cyB9LCAiSGFyZCBNb2RlIiksCiAgICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogRXMgfSwKICAgICAgICAgICAgICAgICAgIkFueSByZXZlYWxlZCBoaW50cyBtdXN0IGJlIHVzZWQgaW4gc3Vic2VxdWVudCBndWVzc2VzIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KGtzLCB7CiAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiB1LAogICAgICAgICAgICAgICAgICBuYW1lOiAiaGFyZE1vZGUiLAogICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZSgKICAgICAgICAgICAgICAgICAgICAgIHUKICAgICAgICAgICAgICAgICAgICAgICAgPyBzZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiSGFyZCBtb2RlIGNhbiBvbmx5IGJlIGVuYWJsZWQgYXQgdGhlIHN0YXJ0IG9mIGEgcm91bmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDE1MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N5c3RlbTogITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgOiBtcygiaGFyZE1vZGUiLCAhcykKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzZWxlY3RlZDogcywKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApLAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IF9zIH0sCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogeHMgfSwKICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IHZzIH0sICJEYXJrIFRoZW1lIikKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChrcywgewogICAgICAgICAgICAgICAgICBuYW1lOiAiZGFya01vZGUiLAogICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUobXMoImRhcmtNb2RlIiwgIXIpKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHIsCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBfcyB9LAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHhzIH0sCiAgICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiB2cyB9LCAiSGlnaCBDb250cmFzdCBNb2RlIiksCiAgICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogRXMgfSwKICAgICAgICAgICAgICAgICAgIkZvciBpbXByb3ZlZCBjb2xvciB2aXNpb24iCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoa3MsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogImNvbG9yYmxpbmRNb2RlIiwKICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlKG1zKCJjb2xvcmJsaW5kTW9kZSIsICFvKSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBvLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgICkKICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgewogICAgICAgICAgICBjbGFzc05hbWU6IHAoCiAgICAgICAgICAgICAganMsCiAgICAgICAgICAgICAgKChpID0gYSksCiAgICAgICAgICAgICAgKGMgPSB6cykgaW4gKGEgPSB7fSkKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGMsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKGFbY10gPSBpKSwKICAgICAgICAgICAgICBhKQogICAgICAgICAgICApLAogICAgICAgICAgfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsgaWQ6ICJjb3B5cmlnaHQiIH0sCiAgICAgICAgICAgICLCqcKgIiwKICAgICAgICAgICAgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLAogICAgICAgICAgICAiwqBUaGUgTmV3IFlvcmsgVGltZXMgQ29tcGFueSIKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgbnVsbCwgIiMiLCB0KSkKICAgICAgICApCiAgICAgICk7CiAgICB9LAogICAgQSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLm92ZXJsYXlzOwogICAgfSwKICAgIENzID0gbi5jcmVhdGVTZWxlY3RvcihBLCBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5tb2RhbDsKICAgIH0pLAogICAgQXMgPSBuLmNyZWF0ZVNlbGVjdG9yKEEsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmVycm9yOwogICAgfSksCiAgICBPcyA9IG4uY3JlYXRlU2VsZWN0b3IoQSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUucGFnZTsKICAgIH0pLAogICAgSXMgPSBuLmNyZWF0ZVNlbGVjdG9yKEEsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLmlzTmF2TW9kYWxPcGVuOwogICAgfSksCiAgICBMcyA9IG4uY3JlYXRlU2VsZWN0b3IoQSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUudG9hc3RzOwogICAgfSksCiAgICBUcyA9IG4uY3JlYXRlU2VsZWN0b3IoQSwgZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUuaXNQYWdlQ2xvc2luZzsKICAgIH0pLAogICAgUHMgPSB7CiAgICAgIG1vZGFsT3ZlcmxheTogIk1vZGFsLW1vZHVsZV9tb2RhbE92ZXJsYXlfXzgxWkNpIiwKICAgICAgY29udGVudDogIk1vZGFsLW1vZHVsZV9jb250ZW50X19zOHFVWiIsCiAgICAgIFNsaWRlSW46ICJNb2RhbC1tb2R1bGVfU2xpZGVJbl9fZzc3SWsiLAogICAgICBjbG9zaW5nOiAiTW9kYWwtbW9kdWxlX2Nsb3NpbmdfX3BnQTJzIiwKICAgICAgU2xpZGVPdXQ6ICJNb2RhbC1tb2R1bGVfU2xpZGVPdXRfX0V2M3pqIiwKICAgICAgY2xvc2VJY29uOiAiTW9kYWwtbW9kdWxlX2Nsb3NlSWNvbl9fYjR6NzQiLAogICAgICBoZWFkaW5nOiAiTW9kYWwtbW9kdWxlX2hlYWRpbmdfX29EMVBzIiwKICAgICAgZW5hYmxlQXV0aDogIk1vZGFsLW1vZHVsZV9lbmFibGVBdXRoX19TUjY4MiIsCiAgICAgIHNob3J0U3RhdHNNb2RhbDogIk1vZGFsLW1vZHVsZV9zaG9ydFN0YXRzTW9kYWxfX1FYSkJzIiwKICAgIH07CgogIHZhciBzYXZlTW9kYWwgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgZSA9IFQoKSwKICAgICAgdCA9IFAoWWUpLAogICAgICBuID0gUChHZSksCiAgICAgIGEgPSBQKEZlKSwKICAgICAgbyA9IFAoTCksCiAgICAgIHIgPSBQKEkpLAogICAgICBzID0gUChPKSwKICAgICAgaSA9IFAoRWUpLAogICAgICBsID0gUChBZSksCiAgICAgIGMgPSBubygiYXV0aCIpLAogICAgICB1ID0gIXMgJiYgIklOX1BST0dSRVNTIiA9PT0gbiAmJiAwICE9PSBhLAogICAgICBhID0gYyB8fCBpLAogICAgICBjID0gd2luZG93LmlzSHlicmlkV2ViVmlldyA/IHZvaWQgMCA6IGRzKGwpOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgXy5GcmFnbWVudCwKICAgICAgbnVsbCwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIG51bGwsCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgInNlY3Rpb24iLAogICAgICAgICAgbnVsbCwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBfcyB9LAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHhzIH0sCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogdnMgfSwgIlNhdmUgU3RhdHMiKSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBFcyB9LAogICAgICAgICAgICAgICAgIlNhdmUgc3RhdHMgdG8gYSBsb2NhbCAuanNvbiBmaWxlIgogICAgICAgICAgICAgICkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KEpvLCB7CiAgICAgICAgICAgICAgaWNvbjogInNhdmUiLAogICAgICAgICAgICAgIG5hbWU6ICJzYXZlU3RhdHMiLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGxldCBzdGF0cyA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibnl0LXdvcmRsZS1tb29nbGUvQU5PTiIpCiAgICAgICAgICAgICAgICApWyJzdGF0cyJdOwoKICAgICAgICAgICAgICAgIGxldCBmaWxlID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHN0YXRzKV0sIHsKICAgICAgICAgICAgICAgICAgdHlwZTogInRleHQvanNvbiIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCBmaWxlbmFtZSA9IGB3b3JkbGVfc3RhdHNfJHtuZXcgRGF0ZSgpCiAgICAgICAgICAgICAgICAgIC50b0lTT1N0cmluZygpCiAgICAgICAgICAgICAgICAgIC5zdWJzdHJpbmcoMCwgMTApfS5qc29uYDsKICAgICAgICAgICAgICAgIGxldCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLAogICAgICAgICAgICAgICAgICB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOwogICAgICAgICAgICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzZWxlY3RlZDogcywKICAgICAgICAgICAgfSkKICAgICAgICAgICksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IGNsYXNzTmFtZTogX3MgfSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiB4cyB9LAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IHZzIH0sICJMb2FkIFN0YXRzIiksCiAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogRXMgfSwKICAgICAgICAgICAgICAgICJBbHNvIGZyb20gYSBsb2NhbCAuanNvbiBmaWxlIgogICAgICAgICAgICAgICkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJpbnB1dCIsIHsKICAgICAgICAgICAgICBpZDogImlucHV0bG9hZCIsCiAgICAgICAgICAgICAgdHlwZTogImZpbGUiLAogICAgICAgICAgICAgIGFjY2VwdDogIi5qc29uIiwKICAgICAgICAgICAgICBuYW1lOiAibG9hZFN0YXRzIiwKICAgICAgICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIG5ldyBSZXNwb25zZShlLnRhcmdldC5maWxlc1swXSkuanNvbigpLnRoZW4oCiAgICAgICAgICAgICAgICAgIChqc29uKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXRzID0gSlNPTi5wYXJzZSgKICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibnl0LXdvcmRsZS1tb29nbGUvQU5PTiIpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBzdGF0c1sic3RhdHMiXSA9IGpzb247CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKAogICAgICAgICAgICAgICAgICAgICAgIm55dC13b3JkbGUtbW9vZ2xlL0FOT04iLAogICAgICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoc3RhdHMpCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oCiAgICAgICAgICAgICAgICAgICAgICAibnl0LXdvcmRsZS1zdGF0aXN0aWNzIiwKICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGpzb24pCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKCJsb2FkZWQgc3RhdHMhIHJlZnJlc2hpbmciLCBqc29uKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIChlcnIpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiY291bGQgbm90IGxvYWQgZGF0YSEiLCBlcnIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICApCiAgICAgICAgKQogICAgICApCiAgICApOwogIH07CgogIGZ1bmN0aW9uIE1zKCkgewogICAgcmV0dXJuIChNcyA9CiAgICAgIE9iamVjdC5hc3NpZ24gfHwKICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgewogICAgICAgICAgdmFyIG4sCiAgICAgICAgICAgIGEgPSBhcmd1bWVudHNbdF07CiAgICAgICAgICBmb3IgKG4gaW4gYSkKICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsIG4pICYmIChlW25dID0gYVtuXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBlOwogICAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgZnVuY3Rpb24gQnMoZSwgdCwgbikgewogICAgcmV0dXJuICgKICAgICAgdCBpbiBlCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgewogICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgIH0pCiAgICAgICAgOiAoZVt0XSA9IG4pLAogICAgICBlCiAgICApOwogIH0KCiAgZnVuY3Rpb24gUnMoZSwgdCkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9CiAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgIDogKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgICAgIGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICBpZiAobnVsbCAhPSBuKSB7CiAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbywKICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICBzID0gITAsCiAgICAgICAgICAgIGkgPSAhMTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbiA9IG4uY2FsbChlKTsKICAgICAgICAgICAgICAhKHMgPSAoYSA9IG4ubmV4dCgpKS5kb25lKSAmJgogICAgICAgICAgICAgIChyLnB1c2goYS52YWx1ZSksICF0IHx8IHIubGVuZ3RoICE9PSB0KTsKICAgICAgICAgICAgICBzID0gITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKGkgPSAhMCksIChvID0gZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHMgfHwgbnVsbCA9PSBuLnJldHVybiB8fCBuLnJldHVybigpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChpKSB0aHJvdyBvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBXcyhlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IFdzKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBXcyhlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgYSA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgYVtuXSA9IGVbbl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIEhzKCkgewogICAgdmFyIHQgPSBUKCksCiAgICAgIGUgPSBQKENzKSwKICAgICAgbiA9IFJzKGcudXNlU3RhdGUoITEpLCAyKSwKICAgICAgYSA9IG5bMF0sCiAgICAgIG8gPSBuWzFdLAogICAgICByID0gUChFZSksCiAgICAgIHMgPSBubygiYXV0aCIpIHx8IHIsCiAgICAgIGkgPSAhIVAoQWUpLAogICAgICBsID0gcyAmJiAic3RhdHMiID09PSBlICYmIHI7CiAgICBpZiAoIWUpIHJldHVybiBudWxsOwoKICAgIGZ1bmN0aW9uIGMoKSB7CiAgICAgIG8oITApOwogICAgfQoKICAgIHZhciBuID0gcwogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0ID09PSBlLnRhcmdldCAmJiBvKCEwKTsKICAgICAgICAgIH0KICAgICAgICA6IGMsCiAgICAgIHIgPSB7CiAgICAgICAgaGVscDogXy5jcmVhdGVFbGVtZW50KHNyLCB7IGlzUGFnZTogITEsIGVuYWJsZUF1dGg6IHMsIGlzTG9nZ2VkSW46IGkgfSksCiAgICAgICAgc2F2ZTogXy5jcmVhdGVFbGVtZW50KHNhdmVNb2RhbCwgbnVsbCksCiAgICAgICAgc3RhdHM6IF8uY3JlYXRlRWxlbWVudCh1cywgbnVsbCksCiAgICAgICAgc2V0dGluZ3M6IF8uY3JlYXRlRWxlbWVudChOcywgbnVsbCksCiAgICAgIH1bZV0sCiAgICAgIGkgPSB7IGhlbHA6ICJob3cgdG8gcGxheSIsIHN0YXRzOiAhMSwgc2V0dGluZ3M6ICJzZXR0aW5ncyIgfVtlXSwKICAgICAgZSA9IHMgJiYgaTsKICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICJkaXYiLAogICAgICB7CiAgICAgICAgY2xhc3NOYW1lOiBwKFBzLm1vZGFsT3ZlcmxheSwgQnMoe30sIFBzLmVuYWJsZUF1dGgsIHMpKSwKICAgICAgICBvbkNsaWNrOiBuLAogICAgICAgIG9uQW5pbWF0aW9uRW5kOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgZS5hbmltYXRpb25OYW1lID09PSBQcy5TbGlkZU91dCAmJiAobyghMSksIHQobmUoKSkpOwogICAgICAgIH0sCiAgICAgICAgcm9sZTogImJ1dHRvbiIsCiAgICAgIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7CiAgICAgICAgICBjbGFzc05hbWU6IHAoCiAgICAgICAgICAgIFBzLmNvbnRlbnQsCiAgICAgICAgICAgIChCcygobiA9IHt9KSwgUHMuY2xvc2luZywgYSksCiAgICAgICAgICAgIEJzKG4sIFBzLmVuYWJsZUF1dGgsIHMpLAogICAgICAgICAgICBCcyhuLCBQcy5zaG9ydFN0YXRzTW9kYWwsIGwpLAogICAgICAgICAgICBuKQogICAgICAgICAgKSwKICAgICAgICB9LAogICAgICAgIGUKICAgICAgICAgID8gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJoMSIsCiAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHAoUHMuaGVhZGluZywgQnMoe30sIFBzLmVuYWJsZUF1dGgsIHMpKSB9LAogICAgICAgICAgICAgIGkKICAgICAgICAgICAgKQogICAgICAgICAgOiBudWxsLAogICAgICAgIHIsCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImRpdiIsCiAgICAgICAgICB7IGNsYXNzTmFtZTogUHMuY2xvc2VJY29uIH0sCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoSm8sIE1zKHsgaWNvbjogImNsb3NlIiB9LCBzICYmIHsgb25DbGljazogYyB9KSkKICAgICAgICApCiAgICAgICkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBEcygpIHsKICAgIHZhciBlID0gVCgpOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgImEiLAogICAgICB7CiAgICAgICAgaHJlZjogIiIsCiAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGUoVygid29yZGxlIiwgImdhbWVzLWxvZ28tbmF2IiwgITAsIG51bGwpKTsKICAgICAgICB9LAogICAgICB9LAogICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgInN2ZyIsCiAgICAgICAgewogICAgICAgICAgY2xhc3NOYW1lOiAicHotbmF2X19sb2dvIiwKICAgICAgICAgIHdpZHRoOiAiOTUiLAogICAgICAgICAgaGVpZ2h0OiAiMTgiLAogICAgICAgICAgdmlld0JveDogIjAgMCAxMzggMjUiLAogICAgICAgICAgZmlsbDogIm5vbmUiLAogICAgICAgICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICAgICAgICAiYXJpYS1sYWJlbCI6ICJOZXcgWW9yayBUaW1lcyBHYW1lcyBMb2dvLiBDbGljayBmb3IgbW9yZSBwdXp6bGVzIiwKICAgICAgICB9LAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgicmVjdCIsIHsKICAgICAgICAgIHdpZHRoOiAiMTM4IiwKICAgICAgICAgIGhlaWdodDogIjI1IiwKICAgICAgICAgIGZpbGw6ICJub25lIiwKICAgICAgICB9KSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICBkOiAiTTQyLjQ1OTkgMS4wMzUxOUM0NC4yMTkgMS4wMDU1OCA0NS45NTc3IDEuNDE2MzQgNDcuNTE3NiAyLjIzMDA4VjEuNDUyNDVINTMuNDE2MlY4LjgwNTE1SDQ3LjUyMzlDNDcuMTA2NyA3LjAzNDk0IDQ2LjM2MDcgNi4yMjU3IDQ0LjU5MDQgNi4yMjU3QzQyLjM2NSA2LjIzODM0IDQxLjAwNTggNy44Njk0NyA0MS4wMDU4IDEyLjQxNTFDNDEuMDA1OCAxNy4zMTQ4IDQyLjIzODYgMTguODgyNyA0NS4wMDc3IDE4Ljg4MjdDNDUuNzE4NyAxOC44OTc1IDQ2LjQyMDMgMTguNzE4MyA0Ny4wMzcxIDE4LjM2NDNWMTYuMjIxMUg0NS4yMDM3VjExLjkyODNINTMuNDIyNVYyNC4wNTQzSDQ4LjM2NDhWMjIuOTI4OUM0Ni45MDIgMjQuMDAxMiA0NS4xMTk1IDI0LjU0NzEgNDMuMzA3IDI0LjQ3NzhDMzYuOTIxNiAyNC40Nzc4IDMyLjQzOTIgMjAuMjU0NiAzMi40MzkyIDEyLjQyMTRDMzIuNDcwOCA1LjI1ODQgMzYuOTg0OSAxLjAzNTE5IDQyLjQ1OTkgMS4wMzUxOVoiLAogICAgICAgICAgZmlsbDogInZhcigtLWNvbG9yLXRvbmUtMSkiLAogICAgICAgIH0pLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgICAgICAgIGQ6ICJNNTkuODY0NSAyNC4zNDcxQzU2LjM0OTQgMjQuMzQ3MSA1NC4yODgzIDIyLjQ1MDUgNTQuMjg4MyAxOS4yMTk4QzU0LjI4ODMgMTUuOTg5MiA1Ni43MDk3IDEzLjkzNDUgNjAuNTQxIDEzLjkzNDVDNjEuOTkyMyAxMy45MjIyIDYzLjQyMzIgMTQuMjc2NyA2NC43MDEgMTQuOTY1QzY0LjYzNzcgMTMuMjI2NCA2My4zMTY0IDEyLjA5NDcgNjAuODYzNCAxMi4wOTQ3QzU5LjA5MjUgMTIuMTAxNSA1Ny4zNDc3IDEyLjUyMTUgNTUuNzY3NyAxMy4zMjEyVjkuMjU2MDhDNTguMTQ5IDguNTgwODQgNjAuNjEzNiA4LjI0NDU3IDYzLjA4ODggOC4yNTcxOEM2OS43OTY2IDguMjU3MTggNzIuMDg1MyAxMS4xOTA3IDcyLjA4NTMgMTMuNzcwMVYxOS44NjQ3SDczLjQzODJWMjQuMDU2M0g2NC43NzA1VjIyLjUwNzRDNjMuNTQ0IDIzLjg2MDMgNjEuNzM1OSAyNC4zNDcxIDU5Ljg2NDUgMjQuMzQ3MVpNNjQuODU5IDE4Ljg2NThDNjQuODg4IDE4LjY0MzEgNjQuODY1NSAxOC40MTY2IDY0Ljc5MzEgMTguMjA0QzY0LjcyMDcgMTcuOTkxNCA2NC42MDA1IDE3Ljc5ODIgNjQuNDQxNyAxNy42Mzk0QzY0LjI4MjkgMTcuNDgwNSA2NC4wODk3IDE3LjM2MDMgNjMuODc3IDE3LjI4OEM2My42NjQ0IDE3LjIxNTYgNjMuNDM4IDE3LjE5MyA2My4yMTUzIDE3LjIyMkM2Mi4xMjE1IDE3LjIyMiA2MS4zNzU1IDE3Ljc3MjEgNjEuMzc1NSAxOC44OTc0QzYxLjM3NTUgMjAuMDIyOCA2Mi4wMDc3IDIwLjQ3OCA2My4xODM2IDIwLjQ3OEM2NC4zNTk2IDIwLjQ3OCA2NC44NjUzIDE5Ljk5MTEgNjQuODY1MyAxOC44ODQ4TDY0Ljg1OSAxOC44NjU4WiIsCiAgICAgICAgICBmaWxsOiAidmFyKC0tY29sb3ItdG9uZS0xKSIsCiAgICAgICAgfSksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgZDogIk03NS44MzcxIDE5Ljg2NDRWMTIuNzcwOUg3NC41NzI2VjguNTc5MjdIODMuMTQ1NVYxMC4yNTQ2Qzg1LjE0MzMgOC43MzczMiA4Ni4yMDU1IDguMjU2ODQgODcuNzg2IDguMjU2ODRDODkuNzIwNiA4LjI1Njg0IDkwLjg4MzkgOC44MDY4NyA5Mi4zOTQ5IDEwLjM4NzRDOTQuMzYxMSA4LjgzODQ4IDk1Ljc0NTYgOC4yNTY4NCA5Ny40NTI2IDguMjU2ODRDMTAwLjYxNCA4LjI1Njg0IDEwMi44MDEgMTAuNDE5IDEwMi44MDEgMTMuMjE5N1YxOS44NThIMTA0LjA2NlYyNC4wNDk2SDk1LjUwNTRWMTQuNjczOUM5NS41MDU0IDEzLjQ0NzMgOTUuMDI0OSAxMi43NzcyIDk0LjE4NDEgMTIuNzc3MkM5My4zNDMyIDEyLjc3NzIgOTIuOTU3NiAxMy40MDk0IDkyLjk1NzYgMTQuNjczOVYxOS44NjQ0SDk0LjA1MTNWMjQuMDU2SDg1LjY2ODFWMTQuNjEwNkM4NS42NjgxIDEzLjUxNjkgODUuMTQ5NyAxMi43NzA5IDg0LjQwMzYgMTIuNzcwOUM4My42NTc2IDEyLjc3MDkgODMuMTM5MiAxMy40NzkgODMuMTM5MiAxNC42MTA2VjE5Ljg2NDRIODQuMjY0NlYyNC4wNTZINzQuNTQ3NFYxOS44NjQ0SDc1LjgzNzFaIiwKICAgICAgICAgIGZpbGw6ICJ2YXIoLS1jb2xvci10b25lLTEpIiwKICAgICAgICB9KSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICBkOiAiTTExMy43ODEgMjQuMzc4NEMxMTEuNDYgMjQuMzc4NCAxMDguODgxIDIzLjg5NzkgMTA3LjA3MyAyMi4yODU4QzEwNi4yMTYgMjEuNTM0NCAxMDUuNTM0IDIwLjYwNTggMTA1LjA3MiAxOS41NjQzQzEwNC42MSAxOC41MjI5IDEwNC4zOCAxNy4zOTM1IDEwNC4zOTggMTYuMjU0NEMxMDQuMzk4IDExLjE5NjcgMTA4LjQzMiA4LjI1Njg0IDExMy4yNSA4LjI1Njg0QzExOC40NTMgOC4yNTY4NCAxMjEuOTI0IDExLjkzIDEyMS45MjQgMTYuMzU1NUMxMjEuOTI0IDE2Ljg3NCAxMjEuODkyIDE3LjM1NDUgMTIxLjg2IDE3Ljg3MjlIMTExLjc0NUMxMTEuOTQxIDE5LjY4MSAxMTIuOTA4IDIwLjQ4MzkgMTE0LjM4NyAyMC40ODM5QzExNC44NzEgMjAuNDgwMyAxMTUuMzQ3IDIwLjM1NDQgMTE1Ljc2OSAyMC4xMTc4QzExNi4xOTEgMTkuODgxMyAxMTYuNTQ3IDE5LjU0MTggMTE2LjgwMyAxOS4xMzFIMTIxLjg2QzEyMC43NzMgMjIuNjc3NyAxMTcuNDk4IDI0LjM3ODQgMTEzLjc4MSAyNC4zNzg0Wk0xMTEuNjg4IDE1LjUyNzNIMTE1LjQ4MVYxNS4xNDE3QzExNS40ODEgMTMuODIwNCAxMTUuMTU5IDEyLjQ2NzQgMTEzLjU4NSAxMi40Njc0QzExMy4yMDEgMTIuNDU1OCAxMTIuODI0IDEyLjU2OTEgMTEyLjUxIDEyLjc5MDNDMTEyLjE5NyAxMy4wMTE1IDExMS45NjQgMTMuMzI4NiAxMTEuODQ2IDEzLjY5MzlDMTExLjY4IDE0LjI4NTYgMTExLjYyNCAxNC45MDI4IDExMS42ODIgMTUuNTE0N0wxMTEuNjg4IDE1LjUyNzNaIiwKICAgICAgICAgIGZpbGw6ICJ2YXIoLS1jb2xvci10b25lLTEpIiwKICAgICAgICB9KSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICBkOiAiTTEyNi4xOTUgMjQuMDU5SDEyMi43MTJWMTguODg3NUgxMjYuMTY0QzEyNi41ODEgMjAuMjQwNCAxMjcuMTMxIDIwLjk0ODUgMTI4LjQ1MiAyMC45NDg1QzEyOS40NTEgMjAuOTQ4NSAxMzAuMDY0IDIwLjUzMTMgMTMwLjA2NCAxOS43NTM2QzEzMC4wNjQgMTkuMjAzNiAxMjkuNzEgMTguNzg2MyAxMjkuMDM0IDE4LjQ4OTJMMTI1LjY4MyAxNy4wNzNDMTI0LjkwOSAxNi43NjMxIDEyNC4yNDYgMTYuMjI4MSAxMjMuNzc5IDE1LjUzNzFDMTIzLjMxMyAxNC44NDYyIDEyMy4wNjQgMTQuMDMxMiAxMjMuMDY2IDEzLjE5NzVDMTIzLjA2NiAxMC41NTQ5IDEyNS42NzcgOC4yMzQ2MiAxMjguOTY0IDguMjM0NjJDMTMwLjM1MiA4LjI1MDg0IDEzMS43MTggOC41ODE1NiAxMzIuOTYgOS4yMDE5MVY4LjU2OTdIMTM2LjQ2OVYxMy40MDYySDEzMy4yNDRDMTMyLjk1NCAxMS45NTg0IDEzMi4zNzIgMTEuMjQ0IDEzMS4yMTUgMTEuMjQ0QzEzMC4zNzQgMTEuMjQ0IDEyOS43MjkgMTEuNjYxMiAxMjkuNzI5IDEyLjMzNzdDMTI5LjcyOSAxMi45MTk0IDEzMC4xMTUgMTMuMzk5OCAxMzAuOTI0IDEzLjcyMjNMMTM0LjIxMiAxNC45ODY3QzEzNi4zNzQgMTUuODI3NiAxMzcuMzczIDE3LjIxMjEgMTM3LjM3MyAxOS4wODM1QzEzNy4zNzMgMjIuMDQ4NiAxMzQuODQ0IDI0LjMzNzIgMTMxLjIxNSAyNC4zMzcyQzEyOS42MDMgMjQuMzM3MiAxMjguNDc3IDI0LjA3OCAxMjYuMTU3IDIzLjI0MzVMMTI2LjE5NSAyNC4wNTlaIiwKICAgICAgICAgIGZpbGw6ICJ2YXIoLS1jb2xvci10b25lLTEpIiwKICAgICAgICB9KSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICAgICAgICBkOiAiTTI1Ljk1NDQgMS40NjcwNEgyNS4zNjAxVjI0LjAzNzJIMjUuOTU0NFYxLjQ2NzA0WiIsCiAgICAgICAgICBmaWxsOiAidmFyKC0tY29sb3ItdG9uZS0xKSIsCiAgICAgICAgfSksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgZDogIk0xOS4yNTc0IDE1LjQ1MzVDMTguODg4OSAxNi40OTcgMTguMzA0MiAxNy40NTA5IDE3LjU0MTYgMTguMjUyN0MxNi43Nzg5IDE5LjA1NDYgMTUuODU1NSAxOS42ODYzIDE0LjgzMTggMjAuMTA2NlYxNS40NTM1TDE3LjM2MDcgMTMuMTU4NkwxNC44MzE4IDEwLjg5NTJWNy42OTYxOUMxNS44NzYzIDcuNjc0ODkgMTYuODcxNSA3LjI0NzkyIDE3LjYwNjcgNi41MDU2N0MxOC4zNDE5IDUuNzYzNDIgMTguNzU5MyA0Ljc2NDE4IDE4Ljc3MDYgMy43MTk1M0MxOC43NzA2IDAuOTc1NzA4IDE2LjE1MzIgMC4wMDIwOTE2OCAxNC42Njc1IDAuMDAyMDkxNjhDMTQuMjY1MyAtMC4wMTAyNzgzIDEzLjg2MzMgMC4wMzIyNjE3IDEzLjQ3MjYgMC4xMjg1MzVWMC4yNjEzMDFDMTMuNjY4NiAwLjI2MTMwMSAxMy45NTk0IDAuMjI5NjkgMTQuMDU0MiAwLjIyOTY5QzE1LjA4NDcgMC4yMjk2OSAxNS44NjI0IDAuNzE2NDk4IDE1Ljg2MjQgMS42NTIxOEMxNS44NTYyIDEuODU0MTEgMTUuODA5IDIuMDUyNjYgMTUuNzIzNSAyLjIzNTcxQzE1LjYzOCAyLjQxODc1IDE1LjUxNjEgMi41ODI0NCAxNS4zNjUyIDIuNzE2NzdDMTUuMjE0MyAyLjg1MTA5IDE1LjAzNzYgMi45NTMyMyAxNC44NDU5IDMuMDE2OTVDMTQuNjU0MiAzLjA4MDY2IDE0LjQ1MTUgMy4xMDQ2IDE0LjI1MDIgMy4wODczMkMxMS43MjEzIDMuMDg3MzIgOC42OTMgMS4wMTk5NiA1LjQzMDc1IDEuMDE5OTZDMi41MjI1NSAxLjAwNzMyIDAuNTM3Mzg1IDMuMTc1ODMgMC41MzczODUgNS4zNjk2MkMwLjUzNzM4NSA3LjU2MzQyIDEuODAxODIgOC4yNDYyMiAzLjEyMzE2IDguNzI2N0wzLjE1NDc3IDguNjAwMjZDMi45MTc0MyA4LjQ1MDI4IDIuNzI1MTEgOC4yMzg4NiAyLjU5ODIyIDcuOTg4NDJDMi40NzEzMyA3LjczNzk3IDIuNDE0NTkgNy40NTc4NSAyLjQzNDA0IDcuMTc3NzdDMi40NDkzIDYuOTI3OTYgMi41MTM4NiA2LjY4MzYzIDIuNjIzOTggNi40NTg4OEMyLjczNDExIDYuMjM0MTQgMi44ODc2MyA2LjAzMzQxIDMuMDc1NjkgNS44NjgyNkMzLjI2Mzc1IDUuNzAzMTIgMy40ODI2NCA1LjU3NjgzIDMuNzE5NzMgNS40OTY2OEMzLjk1NjgzIDUuNDE2NTIgNC4yMDc0NSA1LjM4NDA4IDQuNDU3MTQgNS40MDEyNEM3LjIwMDk2IDUuNDAxMjQgMTEuNjI2NSA3LjY5NjE5IDE0LjM3NjYgNy42OTYxOUgxNC42MzU5VjEwLjkyNjhMMTIuMTA3IDEzLjE1ODZMMTQuNjM1OSAxNS40NTM1VjIwLjE1NzJDMTMuNTc4OCAyMC41MzMgMTIuNDYzOCAyMC43MTkyIDExLjM0MiAyMC43MDcyQzcuMDc0NTIgMjAuNzA3MiA0LjM4NzU5IDE4LjEyMTUgNC4zODc1OSAxMy44Mjg3QzQuMzc4OTcgMTIuODEyNyA0LjUxOTU1IDExLjgwMDkgNC44MDQ4NiAxMC44MjU3TDYuOTM1NDMgOS44ODk5OVYxOS4zNzMzTDExLjI2NjEgMTcuNDc2NlY3Ljc1OTQxTDQuODgwNzIgMTAuNjA0NEM1LjE3ODYxIDkuNzM0NTggNS42NDYgOC45MzI0NyA2LjI1NTg4IDguMjQ0NDZDNi44NjU3NSA3LjU1NjQ1IDcuNjA2IDYuOTk2MjEgOC40MzM3OSA2LjU5NjEzTDguNDAyMTggNi41MDEzQzQuMTM0NzEgNy40MzY5OCAwIDEwLjY3MzkgMCAxNS41MTY3QzAgMjEuMTA1NSA0LjcxNjM1IDI1IDEwLjIxMDMgMjVDMTYuMDI2NyAyNSAxOS4zMjA2IDIxLjEyNDUgMTkuMzUyMiAxNS40NzI1TDE5LjI1NzQgMTUuNDUzNVoiLAogICAgICAgICAgZmlsbDogInZhcigtLWNvbG9yLXRvbmUtMSkiLAogICAgICAgIH0pCiAgICAgICkKICAgICk7CiAgfQoKICBrKAogICAgIi5Nb2RhbC1tb2R1bGVfbW9kYWxPdmVybGF5X184MVpDaSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tb3BhY2l0eS01MCk7XG4gIHotaW5kZXg6IHZhcigtLW1vZGFsLXotaW5kZXgpO1xufVxuXG4uTW9kYWwtbW9kdWxlX2NvbnRlbnRfX3M4cVVaIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtNik7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1vZGFsLWNvbnRlbnQtYmcpO1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgYm94LXNoYWRvdzogMCA0cHggMjNweCAwIHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgd2lkdGg6IDkwJTtcbiAgbWF4LWhlaWdodDogMTAwJTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgLXdlYmtpdC1hbmltYXRpb246IE1vZGFsLW1vZHVsZV9TbGlkZUluX19nNzdJayAyMDBtcztcbiAgICAgICAgICBhbmltYXRpb246IE1vZGFsLW1vZHVsZV9TbGlkZUluX19nNzdJayAyMDBtcztcbiAgbWF4LXdpZHRoOiB2YXIoLS1nYW1lLW1heC13aWR0aCk7XG4gIHBhZGRpbmc6IDE2cHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbi5Nb2RhbC1tb2R1bGVfY29udGVudF9fczhxVVouTW9kYWwtbW9kdWxlX2Nsb3NpbmdfX3BnQTJzIHtcbiAgLXdlYmtpdC1hbmltYXRpb246IE1vZGFsLW1vZHVsZV9TbGlkZU91dF9fRXYzemogMjAwbXM7XG4gICAgICAgICAgYW5pbWF0aW9uOiBNb2RhbC1tb2R1bGVfU2xpZGVPdXRfX0V2M3pqIDIwMG1zO1xufVxuXG4uTW9kYWwtbW9kdWxlX2Nsb3NlSWNvbl9fYjR6NzQge1xuICB3aWR0aDogMjRweDtcbiAgaGVpZ2h0OiAyNHB4O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTZweDtcbiAgcmlnaHQ6IDE2cHg7XG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLk1vZGFsLW1vZHVsZV9oZWFkaW5nX19vRDFQcy5Nb2RhbC1tb2R1bGVfZW5hYmxlQXV0aF9fU1I2ODIge1xuICBmb250LXdlaWdodDogNzAwO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxldHRlci1zcGFjaW5nOiAwLjVweDtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICBtYXJnaW4tdG9wOiAwcHg7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG5AbWVkaWEgKG1heC13aWR0aDogNTAwcHgpIHtcbiAgLk1vZGFsLW1vZHVsZV9tb2RhbE92ZXJsYXlfXzgxWkNpLk1vZGFsLW1vZHVsZV9lbmFibGVBdXRoX19TUjY4MiB7XG4gICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuICB9XG5cbiAgLk1vZGFsLW1vZHVsZV9jb250ZW50X19zOHFVWi5Nb2RhbC1tb2R1bGVfZW5hYmxlQXV0aF9fU1I2ODIge1xuICAgIG1pbi1oZWlnaHQ6IDcwJTtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuXG4gIC5Nb2RhbC1tb2R1bGVfY29udGVudF9fczhxVVouTW9kYWwtbW9kdWxlX3Nob3J0U3RhdHNNb2RhbF9fUVhKQnMge1xuICAgIG1pbi1oZWlnaHQ6IHVuc2V0O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHBhZGRpbmctYm90dG9tOiAyMHB4O1xuICB9XG59XG5ALXdlYmtpdC1rZXlmcmFtZXMgTW9kYWwtbW9kdWxlX1NsaWRlSW5fX2c3N0lrIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMHB4KTtcbiAgICBvcGFjaXR5OiAwO1xuICB9XG4gIDEwMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwcHgpO1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbn1cbkBrZXlmcmFtZXMgTW9kYWwtbW9kdWxlX1NsaWRlSW5fX2c3N0lrIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMHB4KTtcbiAgICBvcGFjaXR5OiAwO1xuICB9XG4gIDEwMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwcHgpO1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbn1cbkAtd2Via2l0LWtleWZyYW1lcyBNb2RhbC1tb2R1bGVfU2xpZGVPdXRfX0V2M3pqIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwcHgpO1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbiAgOTAlIHtcbiAgICBvcGFjaXR5OiAwO1xuICB9XG4gIDEwMCUge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDYwcHgpO1xuICB9XG59XG5Aa2V5ZnJhbWVzIE1vZGFsLW1vZHVsZV9TbGlkZU91dF9fRXYzemoge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDBweCk7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxuICA5MCUge1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgMTAwJSB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNjBweCk7XG4gIH1cbn0iCiAgKTsKICB2YXIgcXMgPSB7CiAgICBjb250YWluZXI6ICJOYXYtbW9kdWxlX2NvbnRhaW5lcl9fcHpiaFciLAogICAgbmF2TGluazogIk5hdi1tb2R1bGVfbmF2TGlua19fN2pYTXAiLAogICAgZ2FtZUxpc3Q6ICJOYXYtbW9kdWxlX2dhbWVMaXN0X19pelpjdiIsCiAgICBueXRMaXN0OiAiTmF2LW1vZHVsZV9ueXRMaXN0X19OcnpjYyIsCiAgICBuYXZJdGVtOiAiTmF2LW1vZHVsZV9uYXZJdGVtX19LZmVoMyIsCiAgICBuYXZJY29uOiAiTmF2LW1vZHVsZV9uYXZJY29uX19tZ1hwaiIsCiAgICBuYXZIZWFkZXI6ICJOYXYtbW9kdWxlX25hdkhlYWRlcl9fS0o0UmQiLAogICAgbW9yZVRleHQ6ICJOYXYtbW9kdWxlX21vcmVUZXh0X18taGNEWiIsCiAgICBwcml2YWN5OiAiTmF2LW1vZHVsZV9wcml2YWN5X19INkp0byIsCiAgICBwcml2YWN5U3RhdGljOiAiTmF2LW1vZHVsZV9wcml2YWN5U3RhdGljX19mMmhGTSIsCiAgICBwcml2YWN5SXRlbTogIk5hdi1tb2R1bGVfcHJpdmFjeUl0ZW1fX0YxbWFnIiwKICB9OwogIGsoCiAgICAnLk5hdi1tb2R1bGVfY29udGFpbmVyX19wemJoVyB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBsZWZ0O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn1cbi5OYXYtbW9kdWxlX2NvbnRhaW5lcl9fcHpiaFcgYS5OYXYtbW9kdWxlX25hdkxpbmtfXzdqWE1wIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBjb2xvcjogaW5oZXJpdDtcbn1cblxuLk5hdi1tb2R1bGVfZ2FtZUxpc3RfX2l6WmN2LFxuLk5hdi1tb2R1bGVfbnl0TGlzdF9fTnJ6Y2Mge1xuICBsaXN0LXN0eWxlOiBub25lO1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgcGFkZGluZzogdW5zZXQ7XG4gIG1hcmdpbjogdW5zZXQ7XG59XG5cbi5OYXYtbW9kdWxlX255dExpc3RfX05yemNjIHtcbiAgbWFyZ2luLXRvcDogNXB4O1xuICBwYWRkaW5nOiAxMnB4IDBweDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkY2RjZGM7XG59XG5cbi5OYXYtbW9kdWxlX25hdkl0ZW1fX0tmZWgzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBsZWZ0O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBoZWlnaHQ6IDQwcHg7XG4gIGZvbnQtZmFtaWx5OiAibnl0LWZyYW5rbGluLTUwMCI7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XG4gIHBhZGRpbmctbGVmdDogMThweDtcbiAgLS1ob3Zlci1jb2xvcjogdmFyKC0tY29sb3ItbmF2LWhvdmVyKTtcbn1cblxuLk5hdi1tb2R1bGVfbmF2SXRlbV9fS2ZlaDM6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1ob3Zlci1jb2xvcik7XG59XG5cbi5OYXYtbW9kdWxlX25hdkljb25fX21nWHBqIHtcbiAgcGFkZGluZy1ib3R0b206IDJweDtcbiAgY29udGVudDogIiI7XG4gIGhlaWdodDogMjBweDtcbiAgd2lkdGg6IDI4cHg7XG4gIHBhZGRpbmctcmlnaHQ6IDhweDtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXNpemU6ICIyMHB4Ijtcbn1cblxuLk5hdi1tb2R1bGVfbmF2SGVhZGVyX19LSjRSZCB7XG4gIHBhZGRpbmctdG9wOiAxOHB4O1xuICBwYWRkaW5nLWxlZnQ6IDE4cHg7XG59XG5cbi5OYXYtbW9kdWxlX21vcmVUZXh0X18taGNEWiB7XG4gIGZvbnQtZmFtaWx5OiAibnl0LWZyYW5rbGluIjtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBsaW5lLWhlaWdodDogMTJweDtcbiAgbWFyZ2luOiAzMnB4IDBweCAyNHB4IDBweDtcbiAgcGFkZGluZy1sZWZ0OiAxOHB4O1xufVxuXG4uTmF2LW1vZHVsZV9wcml2YWN5X19INkp0bywgLk5hdi1tb2R1bGVfcHJpdmFjeVN0YXRpY19fZjJoRk0ge1xuICBsZXR0ZXItc3BhY2luZzogMC41cHg7XG4gIGZvbnQtZmFtaWx5OiAibnl0LWZyYW5rbGluLTUwMCI7XG4gIG1hcmdpbjogMHB4IDI1cHggMHB4IDE3cHg7XG4gIHBhZGRpbmc6IDEycHggMHB4O1xuICBib3JkZXItdG9wOiAxcHggc29saWQgI2RjZGNkYztcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBsZWZ0O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxMnB4O1xufVxuXG4uTmF2LW1vZHVsZV9wcml2YWN5SXRlbV9fRjFtYWcge1xuICBoZWlnaHQ6IDQwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogbGVmdDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG59XG5cbi5OYXYtbW9kdWxlX3ByaXZhY3lTdGF0aWNfX2YyaEZNIHtcbiAgcG9zaXRpb246IHN0YXRpYztcbn0nCiAgKTsKICB2YXIgR3MgPSAiTmF2QWNjb3VudC1tb2R1bGVfbmF2TG9nZ2VkSW5fX1FOUUdmIiwKICAgIEZzID0gIk5hdkFjY291bnQtbW9kdWxlX25hdkxvZ2dlZE91dF9feVZoQ0EiLAogICAgVnMgPSAiTmF2QWNjb3VudC1tb2R1bGVfbmF2RHJhd2VySGVhZGluZ19fS1JBcW0iLAogICAgWXMgPSAiTmF2QWNjb3VudC1tb2R1bGVfbmF2RHJhd2VyQWNjb3VudF9fV3FZV0giLAogICAgVXMgPSAiTmF2QWNjb3VudC1tb2R1bGVfbmF2UHJvZmlsZUFjY291bnRfX3NxSXhHIiwKICAgIFpzID0gIk5hdkFjY291bnQtbW9kdWxlX2xvZ291dEJ1dHRvbl9fckhTcnoiLAogICAgWHMgPSAiTmF2QWNjb3VudC1tb2R1bGVfc3Vic2NyaWJlQnV0dG9uX185b0hOYSIsCiAgICBLcyA9ICJOYXZBY2NvdW50LW1vZHVsZV9sb2dpbkJ1dHRvbl9fQU5BUTAiLAogICAgSnMgPSAiTmF2QWNjb3VudC1tb2R1bGVfbmF2RHJhd2VyTGlua19fWXFKSVIiOwoKICBmdW5jdGlvbiBRcyhlKSB7CiAgICB2YXIgdCA9IGUubG9nZ2VkSW4sCiAgICAgIG4gPSBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgImEiLAogICAgICAgIHsgaHJlZjogZGUsIHJvbGU6ICJidXR0b24iLCB0YWJJbmRleDogLTEsIGNsYXNzTmFtZTogWHMgfSwKICAgICAgICAiU3Vic2NyaWJlIgogICAgICApLAogICAgICBhID0gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJhIiwKICAgICAgICB7IGhyZWY6IGdlLCByb2xlOiAiYnV0dG9uIiwgdGFiSW5kZXg6IC0xLCBjbGFzc05hbWU6IEtzIH0sCiAgICAgICAgIkxvZyBJbiIKICAgICAgKSwKICAgICAgZSA9IF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiYSIsCiAgICAgICAgeyBocmVmOiBmZSwgcm9sZTogImJ1dHRvbiIsIHRhYkluZGV4OiAtMSwgY2xhc3NOYW1lOiBacyB9LAogICAgICAgICJMb2cgT3V0IgogICAgICApOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgImRpdiIsCiAgICAgIHsgY2xhc3NOYW1lOiBZcyB9LAogICAgICB0CiAgICAgICAgPyBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IGNsYXNzTmFtZTogVXMgfSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJoNCIsIHsgY2xhc3NOYW1lOiBWcyB9LCAiUHJvZmlsZSIpLAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImEiLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGhyZWY6IHdpbmRvdy5uYXZpZ2F0aW9uTGlua3MuYWNjb3VudCwKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogSnMsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAiQWNjb3VudCBkZXRhaWxzIgogICAgICAgICAgICApLAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBHcyB9LCBlKQogICAgICAgICAgKQogICAgICAgIDogXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogRnMgfSwgbiwgYSkKICAgICk7CiAgfQoKICBmdW5jdGlvbiAkcygpIHsKICAgIGcudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgdi5jY3BhKCk7CiAgICB9LCBbXSk7CgogICAgZnVuY3Rpb24gdCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6CiAgICAgICAgICAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6ICIiLAogICAgICAgIGJhY2tncm91bmRTaXplOiAiMjBweCIsCiAgICAgIH07CiAgICB9CgogICAgdmFyIGUgPSB2LnBhcnNlUHVyckNvb2tpZVZhbHVlKCksCiAgICAgIG4gPSBubygiYXV0aCIpLAogICAgICBhID0gUChFZSksCiAgICAgIG4gPSBuIHx8IGEsCiAgICAgIGEgPSAhIW4gJiYgISFQKEFlKSwKICAgICAgbyA9IFQoKTsKICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICJkaXYiLAogICAgICB7IGNsYXNzTmFtZTogcXMuY29udGFpbmVyIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAic3BhbiIsCiAgICAgICAgeyBjbGFzc05hbWU6IHFzLm5hdkhlYWRlciB9LAogICAgICAgIF8uY3JlYXRlRWxlbWVudChEcywgbnVsbCkKICAgICAgKSwKICAgICAgbiAmJiBfLmNyZWF0ZUVsZW1lbnQoUXMsIHsgbG9nZ2VkSW46IGEgfSkKICAgICk7CiAgfQoKICBrKAogICAgJy5OYXZBY2NvdW50LW1vZHVsZV9uYXZMb2dnZWRJbl9fUU5RR2YsIC5OYXZBY2NvdW50LW1vZHVsZV9uYXZMb2dnZWRPdXRfX3lWaENBIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XG4gIGZsZXgtd3JhcDogbm93cmFwO1xuICBwYWRkaW5nOiA4cHg7XG59XG5cbi5OYXZBY2NvdW50LW1vZHVsZV9uYXZMb2dnZWRPdXRfX3lWaENBIHtcbiAgcGFkZGluZzogMTZweDtcbn1cblxuLk5hdkFjY291bnQtbW9kdWxlX25hdkRyYXdlckhlYWRpbmdfX0tSQXFtIHtcbiAgZm9udC1mYW1pbHk6ICJueXQtZnJhbmtsaW4iO1xuICBmb250LXNpemU6IDEycHg7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gIGxldHRlci1zcGFjaW5nOiAwLjc1cHg7XG4gIGxpbmUtaGVpZ2h0OiAxNHB4O1xuICBkaXNwbGF5OiBibG9jaztcbiAgcGFkZGluZzogMHB4IDEwcHg7XG59XG5cbi5OYXZBY2NvdW50LW1vZHVsZV9uYXZEcmF3ZXJBY2NvdW50X19XcVlXSCB7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjMDAwO1xuICBib3gtc2hhZG93OiAwcHggMHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjI1KTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBib3R0b206IDA7XG4gIHdpZHRoOiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci10b25lLTcpO1xuICBtYXJnaW4tdG9wOiAzcHg7XG59XG5cbi5OYXZBY2NvdW50LW1vZHVsZV9uYXZQcm9maWxlQWNjb3VudF9fc3FJeEcge1xuICBwYWRkaW5nOiA1cHg7XG59XG5cbi5OYXZBY2NvdW50LW1vZHVsZV9uYXZCdXR0b25fX0tUUDBmLCAuTmF2QWNjb3VudC1tb2R1bGVfbG9nb3V0QnV0dG9uX19ySFNyeiwgLk5hdkFjY291bnQtbW9kdWxlX3N1YnNjcmliZUJ1dHRvbl9fOW9ITmEsIC5OYXZBY2NvdW50LW1vZHVsZV9sb2dpbkJ1dHRvbl9fQU5BUTAge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBmbGV4OiAxO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZmxleC13cmFwOiBub3dyYXA7XG4gIGZvbnQtZmFtaWx5OiAibnl0LWZyYW5rbGluIjtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBmb250LXdlaWdodDogNzAwO1xuICBsZXR0ZXItc3BhY2luZzogMC4wNDdlbTtcbiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcbiAgaGVpZ2h0OiAzNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjZjRmNGY0O1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIGNvbG9yOiAjZmZmO1xuICBib3JkZXItY29sb3I6ICMwMDA7XG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG4gIHBhZGRpbmc6IDFweCAzM3B4IDA7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xufVxuXG4uTmF2QWNjb3VudC1tb2R1bGVfbmF2RHJhd2VyTGlua19fWXFKSVIge1xuICBkaXNwbGF5OiBibG9jaztcbiAgaGVpZ2h0OiA0MHB4O1xuICBsaW5lLWhlaWdodDogNDBweDtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBsZXR0ZXItc3BhY2luZzogMC41cHg7XG4gIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7XG4gIHBhZGRpbmc6IDAgMTZweCAwIDhweDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBjb2xvcjogaW5oZXJpdDtcbn1cblxuLk5hdkFjY291bnQtbW9kdWxlX25hdkRyYXdlckxpbmtfX1lxSklSOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItbmF2LWhvdmVyKTtcbn1cblxuLk5hdkFjY291bnQtbW9kdWxlX2xvZ2luQnV0dG9uX19BTkFRMCB7XG4gIGNvbG9yOiAjMDAwO1xuICBib3JkZXItY29sb3I6ICMwMDA7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gIG1hcmdpbi1sZWZ0OiA4cHg7XG59XG5cbi5OYXZBY2NvdW50LW1vZHVsZV9sb2dpbkJ1dHRvbl9fQU5BUTA6aG92ZXIge1xuICBjb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbn1cblxuLk5hdkFjY291bnQtbW9kdWxlX3N1YnNjcmliZUJ1dHRvbl9fOW9ITmEge1xuICBjb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDtcbn1cblxuLk5hdkFjY291bnQtbW9kdWxlX3N1YnNjcmliZUJ1dHRvbl9fOW9ITmE6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzk3OTg3O1xuICBib3JkZXI6IG5vbmU7XG59XG5cbi5OYXZBY2NvdW50LW1vZHVsZV9sb2dvdXRCdXR0b25fX3JIU3J6IHtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtNyk7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbn1cblxuLk5hdkFjY291bnQtbW9kdWxlX2xvZ291dEJ1dHRvbl9fckhTcno6aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWJlYmViO1xufVxuXG5AbWVkaWEgKG1heC1oZWlnaHQ6IDgwMHB4KSB7XG4gIC5OYXZBY2NvdW50LW1vZHVsZV9uYXZEcmF3ZXJBY2NvdW50X19XcVlXSCB7XG4gICAgcG9zaXRpb246IHVuc2V0O1xuICB9XG59JwogICk7CiAgdmFyIGVpID0gewogICAgb3ZlcmxheU5hdjogIk5hdk1vZGFsLW1vZHVsZV9vdmVybGF5TmF2X18zeThwMyIsCiAgICBjb250ZW50TmF2OiAiTmF2TW9kYWwtbW9kdWxlX2NvbnRlbnROYXZfX3dNU0FMIiwKICAgIFNsaWRlUmlnaHQ6ICJOYXZNb2RhbC1tb2R1bGVfU2xpZGVSaWdodF9fRE5MeC0iLAogICAgY2xvc2luZ05hdjogIk5hdk1vZGFsLW1vZHVsZV9jbG9zaW5nTmF2X19PSUlSWSIsCiAgICBTbGlkZUxlZnQ6ICJOYXZNb2RhbC1tb2R1bGVfU2xpZGVMZWZ0X183VmVvMiIsCiAgICBjbG9zZUljb25OYXY6ICJOYXZNb2RhbC1tb2R1bGVfY2xvc2VJY29uTmF2X18yZ3FVaSIsCiAgfTsKCiAgZnVuY3Rpb24gdGkoZSwgdCkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9CiAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgIDogKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgICAgIGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICBpZiAobnVsbCAhPSBuKSB7CiAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbywKICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICBzID0gITAsCiAgICAgICAgICAgIGkgPSAhMTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbiA9IG4uY2FsbChlKTsKICAgICAgICAgICAgICAhKHMgPSAoYSA9IG4ubmV4dCgpKS5kb25lKSAmJgogICAgICAgICAgICAgIChyLnB1c2goYS52YWx1ZSksICF0IHx8IHIubGVuZ3RoICE9PSB0KTsKICAgICAgICAgICAgICBzID0gITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKGkgPSAhMCksIChvID0gZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHMgfHwgbnVsbCA9PSBuLnJldHVybiB8fCBuLnJldHVybigpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChpKSB0aHJvdyBvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBuaShlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IG5pKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBuaShlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgYSA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgYVtuXSA9IGVbbl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIGFpKCkgewogICAgdmFyIHQgPSBUKCksCiAgICAgIGUgPSBQKElzKSwKICAgICAgbiA9IHRpKGcudXNlU3RhdGUoITEpLCAyKSwKICAgICAgYSA9IG5bMF0sCiAgICAgIG8gPSBuWzFdOwogICAgaWYgKCFlKSByZXR1cm4gbnVsbDsKICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICJkaXYiLAogICAgICB7CiAgICAgICAgY2xhc3NOYW1lOiBlaS5vdmVybGF5TmF2LAogICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG8oITApOwogICAgICAgIH0sCiAgICAgICAgb25BbmltYXRpb25FbmQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBlLmFuaW1hdGlvbk5hbWUgPT09IGVpLlNsaWRlTGVmdCAmJiAobyghMSksIHQocmUoKSkpOwogICAgICAgIH0sCiAgICAgICAgcm9sZTogImJ1dHRvbiIsCiAgICAgIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7CiAgICAgICAgICBjbGFzc05hbWU6IHAoCiAgICAgICAgICAgIGVpLmNvbnRlbnROYXYsCiAgICAgICAgICAgICgobiA9IHt9KSwKICAgICAgICAgICAgKGUgPSBlaS5jbG9zaW5nTmF2KSwKICAgICAgICAgICAgKGEgPSBhKSwKICAgICAgICAgICAgZSBpbiBuCiAgICAgICAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkobiwgZSwgewogICAgICAgICAgICAgICAgICB2YWx1ZTogYSwKICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgOiAobltlXSA9IGEpLAogICAgICAgICAgICBuKQogICAgICAgICAgKSwKICAgICAgICAgIGlkOiAiY29udGVudC1uYXYiLAogICAgICAgIH0sCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KCRzLCBudWxsKSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiZGl2IiwKICAgICAgICAgIHsgY2xhc3NOYW1lOiBlaS5jbG9zZUljb25OYXYgfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChKbywgeyBpY29uOiAiY2xvc2UiIH0pCiAgICAgICAgKQogICAgICApCiAgICApOwogIH0KCiAgaygKICAgICIuTmF2TW9kYWwtbW9kdWxlX292ZXJsYXlOYXZfXzN5OHAzIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBsZWZ0O1xuICBhbGlnbi1pdGVtczogdW5zZXQ7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICB6LWluZGV4OiB2YXIoLS1tb2RhbC16LWluZGV4KTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5OYXZNb2RhbC1tb2R1bGVfY29udGVudE5hdl9fd01TQUwge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLXRvbmUtNik7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1vZGFsLWNvbnRlbnQtYmcpO1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgLXdlYmtpdC1hbmltYXRpb246IE5hdk1vZGFsLW1vZHVsZV9TbGlkZVJpZ2h0X19ETkx4LSAyMDBtcztcbiAgICAgICAgICBhbmltYXRpb246IE5hdk1vZGFsLW1vZHVsZV9TbGlkZVJpZ2h0X19ETkx4LSAyMDBtcztcbiAgbWF4LXdpZHRoOiB2YXIoLS1nYW1lLW1heC13aWR0aCk7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItcmFkaXVzOiAwcHg7XG4gIGJveC1zaGFkb3c6IDNweCA1cHggNXB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gIG1heC1oZWlnaHQ6IGNhbGMoMTAwJSAtIHZhcigtLWhlYWRlci1oZWlnaHQpIC0gMXB4KTtcbiAgbWFyZ2luLXRvcDogY2FsYyh2YXIoLS1oZWFkZXItaGVpZ2h0KSArIDFweCk7XG4gIHBhZGRpbmc6IDBweDtcbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDQxNXB4KSB7XG4gIC5OYXZNb2RhbC1tb2R1bGVfY29udGVudE5hdl9fd01TQUwge1xuICAgIHdpZHRoOiAzNzVweDtcbiAgfVxufVxuLk5hdk1vZGFsLW1vZHVsZV9jb250ZW50TmF2X193TVNBTC5OYXZNb2RhbC1tb2R1bGVfY2xvc2luZ05hdl9fT0lJUlkge1xuICAtd2Via2l0LWFuaW1hdGlvbjogTmF2TW9kYWwtbW9kdWxlX1NsaWRlTGVmdF9fN1ZlbzIgMjAwbXM7XG4gICAgICAgICAgYW5pbWF0aW9uOiBOYXZNb2RhbC1tb2R1bGVfU2xpZGVMZWZ0X183VmVvMiAyMDBtcztcbn1cblxuLk5hdk1vZGFsLW1vZHVsZV9jbG9zZUljb25OYXZfXzJncVVpIHtcbiAgd2lkdGg6IDI0cHg7XG4gIGhlaWdodDogMjRweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDE2cHg7XG4gIHJpZ2h0OiAxNnB4O1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbkAtd2Via2l0LWtleWZyYW1lcyBOYXZNb2RhbC1tb2R1bGVfU2xpZGVSaWdodF9fRE5MeC0ge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0xMDBweCk7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICAxMDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMHB4KTtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG59XG5cbkBrZXlmcmFtZXMgTmF2TW9kYWwtbW9kdWxlX1NsaWRlUmlnaHRfX0ROTHgtIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtMTAwcHgpO1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDBweCk7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuQC13ZWJraXQta2V5ZnJhbWVzIE5hdk1vZGFsLW1vZHVsZV9TbGlkZUxlZnRfXzdWZW8yIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwcHgpO1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbiAgOTAlIHtcbiAgICBvcGFjaXR5OiAwO1xuICB9XG4gIDEwMCUge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC0yMDBweCk7XG4gIH1cbn1cbkBrZXlmcmFtZXMgTmF2TW9kYWwtbW9kdWxlX1NsaWRlTGVmdF9fN1ZlbzIge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDBweCk7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxuICA5MCUge1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgMTAwJSB7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTIwMHB4KTtcbiAgfVxufSIKICApOwogIHZhciBvaSA9IHsKICAgICAgbGlua0luZm86IHsKICAgICAgICB0aXRsZToKICAgICAgICAgICJZb3UgY2FuIG5vdyBsaW5rIHlvdXIgV29yZGxlIHN0YXRzIHRvIGEgZnJlZSBOZXcgWW9yayBUaW1lcyBhY2NvdW50LiIsCiAgICAgICAgdGV4dDogWwogICAgICAgICAgIldvcmRsZSBzdGF0cyBhcmUgY3VycmVudGx5IHNhdmVkIGxvY2FsbHkgaW4gdGhlIGJyb3dzZXIgd2hlcmUgeW91IHBsYXksIHdoaWNoIG1lYW5zIGRpZmZlcmVudCBkZXZpY2VzIG1heSBzYXZlIGRpZmZlcmVudCBzdGF0cy4iLAogICAgICAgICAgIklmIHRoZSBicm93c2VyIG1lbW9yeSBpcyBjbGVhcmVkLCB5b3VyIHN0YXRzIHdpbGwgYmUgbG9zdC4iLAogICAgICAgICAgIkxpbmtpbmcgeW91ciBzdGF0cyB0byBhIGZyZWUgYWNjb3VudCBtZWFucyBrZWVwaW5nIHlvdXIgc3RyZWFrIGFuZCBzdGF0cyBhbnl3aGVyZSB5b3UncmUgbG9nZ2VkIGluLiIsCiAgICAgICAgXSwKICAgICAgICB0ZXh0MjoKICAgICAgICAgICI8Yj5Zb3UgY2FuIGNvbnRpbnVlIHRvIHBsYXkgV29yZGxlIHdpdGhvdXQgYW4gYWNjb3VudCw8L2I+IGJ1dCB5b3VyIHN0YXRzIHdpbGwgbm90IGFwcGVhciBhY3Jvc3MgZGV2aWNlcyBhbmQgbWF5IHJlc2V0IGlmIHRoZSBicm93c2VyIGRhdGEgaXMgY2xlYXJlZC4iLAogICAgICAgIGljb246ICJ2YXIoLS1saW5rLWluZm8pIiwKICAgICAgICBhbHQ6ICJXb3JkbGUgSWNvbiB3aXRoIE5ZVCBMb2dvIiwKICAgICAgfSwKICAgICAgc3RhdHNQcm9ibGVtOiB7CiAgICAgICAgdGl0bGU6ICJUaGVzZSBzdGF0cyBkb24ndCBsb29rIHJpZ2h0LiIsCiAgICAgICAgdGV4dDogWwogICAgICAgICAgIldvcmRsZSBjdXJyZW50bHkgc2F2ZXMgeW91ciBzdGF0cyB0byB0aGUgZGV2aWNlIG9yIGJyb3dzZXIgeW91IHBsYXkgb24uIDxiPklmIHRoaXMgaXMgbm90IHdoZXJlIHlvdSByZWd1bGFybHkgcGxheSwgZ28gdG8gdGhhdCBkZXZpY2Ugb3IgYnJvd3NlciBhbmQgY2hlY2sgaWYgeW91ciBzdGF0cyBhcmUgY29ycmVjdC4gWW91IGNhbiBzYXZlIHRvIGFuIGFjY291bnQgZnJvbSB0aGVyZS48L2I+IiwKICAgICAgICAgICdJZiB0aGlzIGlzIHRoZSBkZXZpY2Ugb3IgYnJvd3NlciB3aGVyZSB5b3UgcmVndWxhcmx5IHBsYXkgYW5kIHlvdXIgc3RhdHMgYXJlIG5vdCB1cGRhdGluZywgdmlzaXQgPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHBzOi8vaGVscC5ueXRpbWVzLmNvbS9oYy9lbi11cy9hcnRpY2xlcy8zNjAwMjkwNTA4NzItV29yZC1HYW1lcy1hbmQtTG9naWMtUHV6emxlcyNoXzAxRlZHQ0IyWjAwWlFNRE1DWVdCUFdKTlhCIj5vdXIgRkFRPC9hPiBmb3IgbW9yZSB0cm91Ymxlc2hvb3RpbmcgdGlwcy4nLAogICAgICAgICAgIklmIHlvdXIgc3RhdHMgYXJlIGNvbXBsZXRlbHkgbWlzc2luZywgeW91ciBwcm9ncmVzcyBtYXkgaGF2ZSBiZWVuIHJlc2V0IGlmIHlvdXIgYnJvd3NlciBkYXRhIHdhcyBjbGVhcmVkLiBXZSByZWNvbW1lbmQgbG9nZ2luZyBpbiBvciBjcmVhdGluZyBhIGZyZWUgYWNjb3VudCB0byBzYXZlIHlvdXIgc3RhdHMgZnJvbSBhbnl3aGVyZS4iLAogICAgICAgIF0sCiAgICAgICAgaWNvbjogInZhcigtLXN0YXRzLXByb2JsZW0pIiwKICAgICAgICBhbHQ6ICJXb3JkbGUgSWNvbiB3aXRoIFF1ZXN0aW9uIE1hcmsiLAogICAgICB9LAogICAgfSwKICAgIHJpID0gewogICAgICB0aXRsZTogIkV4cGxhaW5lci1tb2R1bGVfdGl0bGVfXy1ES0Z1IiwKICAgICAgY29udGFpbmVyTGluazogIkV4cGxhaW5lci1tb2R1bGVfY29udGFpbmVyTGlua19fQ0ZkM2UiLAogICAgICBjb250YWluZXJQcm9ibGVtczogIkV4cGxhaW5lci1tb2R1bGVfY29udGFpbmVyUHJvYmxlbXNfXzhmQ1JIIiwKICAgICAgZXhwbGFpbmVyRm9vdGVyVGV4dDogIkV4cGxhaW5lci1tb2R1bGVfZXhwbGFpbmVyRm9vdGVyVGV4dF9fWmVlQlgiLAogICAgICB0ZXh0OiAiRXhwbGFpbmVyLW1vZHVsZV90ZXh0X19rZVZhVyIsCiAgICAgIHN0YXRzTGlua0NvbnRhaW5lcjogIkV4cGxhaW5lci1tb2R1bGVfc3RhdHNMaW5rQ29udGFpbmVyX18xUEFMWCIsCiAgICAgIGxvZ2luQnV0dG9uOiAiRXhwbGFpbmVyLW1vZHVsZV9sb2dpbkJ1dHRvbl9fWHVwdlYiLAogICAgICBnYW1lc0ljb246ICJFeHBsYWluZXItbW9kdWxlX2dhbWVzSWNvbl9fc3BLZkkiLAogICAgICBoZWFkZXJOZXc6ICJFeHBsYWluZXItbW9kdWxlX2hlYWRlck5ld19fU2FxaVIiLAogICAgICBjbG9zZTogIkV4cGxhaW5lci1tb2R1bGVfY2xvc2VfX0Yzekx1IiwKICAgIH07CgogIGZ1bmN0aW9uIHNpKGUpIHsKICAgIHZhciB0ID0gZS50eXBlLAogICAgICBuID0gZS5sb2dnZWRJbiwKICAgICAgYSA9IHZvaWQgMCAhPT0gbiAmJiBuLAogICAgICBvID0gZS5vcHRlZEluLAogICAgICByID0gdm9pZCAwICE9PSBvICYmIG8sCiAgICAgIHMgPSBlLm9uQ2xvc2UsCiAgICAgIGkgPSBlLnRyYWNrQ2xpY2ssCiAgICAgIGwgPSBUKCksCiAgICAgIGMgPSBhICYmICFyLAogICAgICB1ID0gImxpbmtJbmZvIiA9PT0gdCA/ICJtb3JlLWluZm8iIDogImJyb2tlbi1zdGF0cyIsCiAgICAgIGQgPSBvaVt0XSwKICAgICAgbSA9IGQudGV4dCwKICAgICAgbiA9IGQudGl0bGUsCiAgICAgIG8gPSBkLmljb24sCiAgICAgIGUgPSBkLmFsdCwKICAgICAgZCA9IGQudGV4dDIsCiAgICAgIGQgPSB2b2lkIDAgPT09IGQgPyAiIiA6IGQsCiAgICAgIHIgPSAhIWQgJiYgIXIsCiAgICAgIHQgPSAibGlua0luZm8iID09PSB0ID8gcmkuY29udGFpbmVyTGluayA6IHJpLmNvbnRhaW5lclByb2JsZW1zOwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgXy5GcmFnbWVudCwKICAgICAgbnVsbCwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsgY2xhc3NOYW1lOiByaS5oZWFkZXJOZXcgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAicCIsCiAgICAgICAgICBudWxsLAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJpbWciLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogcmkuZ2FtZXNJY29uLAogICAgICAgICAgICBhbHQ6ICJOWVQgR2FtZXMgTG9nbyIsCiAgICAgICAgICAgIHN0eWxlOiB7IGNvbnRlbnQ6ICJ2YXIoLS1nYW1lc2xvZ28pIiB9LAogICAgICAgICAgfSkKICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJidXR0b24iLAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgY2xhc3NOYW1lOiByaS5jbG9zZSwKICAgICAgICAgICAgImRhdGEtdGVzdGlkIjogImNsb3NlIiwKICAgICAgICAgICAgb25DbGljazogcywKICAgICAgICAgIH0sCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoSm8sIHsgaWNvbjogImNsb3NlIiB9KQogICAgICAgICkKICAgICAgKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsgY2xhc3NOYW1lOiB0IH0sCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJpbWciLCB7CiAgICAgICAgICBhbHQ6IGUsCiAgICAgICAgICBzdHlsZTogeyBjb250ZW50OiBvIH0sCiAgICAgICAgfSksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJoMSIsIHsgY2xhc3NOYW1lOiByaS50aXRsZSB9LCBuKSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiZGl2IiwKICAgICAgICAgIG51bGwsCiAgICAgICAgICBtLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KCJwIiwgewogICAgICAgICAgICAgIGtleTogZSwKICAgICAgICAgICAgICBjbGFzc05hbWU6IHJpLnRleHQsCiAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHsgX19odG1sOiBlIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkKICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJkaXYiLAogICAgICAgICAgeyBjbGFzc05hbWU6IHJpLnN0YXRzTGlua0NvbnRhaW5lciB9LAogICAgICAgICAgIWEgJiYKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgIHVvLAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG9wdEluOiAhMCwKICAgICAgICAgICAgICAgIGFyaWFMYWJlbDogIkxpbmsgZm9yIGxvZ2dpbmcgaW4gb3IgY3JlYXRpbmcgYSBmcmVlIGFjY291bnQiLAogICAgICAgICAgICAgICAgc3R5bGVzOiByaS5sb2dpbkJ1dHRvbiwKICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQ6IHsgZXZlbnROYW1lOiAibG9nLWluLSIuY29uY2F0KHUpLCBzZW5kQ29udGV4dDogITEgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICJMb2cgaW4gb3IgY3JlYXRlIGEgZnJlZSBhY2NvdW50IgogICAgICAgICAgICApLAogICAgICAgICAgYyAmJgogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImJ1dHRvbiIsCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICB0YWJJbmRleDogLTEsCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHJpLmxvZ2luQnV0dG9uLAogICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiAiQnV0dG9uIHRvIGxpbmsgc3RhdHMgdG8gbXkgYWNjb3VudCIsCiAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGwodGUoInN0YXRzTGluayIpKSwgaSgibGluay0iLmNvbmNhdCh1KSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIkxpbmsgc3RhdHMgdG8gbXkgYWNjb3VudCIKICAgICAgICAgICAgKQogICAgICAgICkKICAgICAgKSwKICAgICAgciAmJgogICAgICAgIF8uY3JlYXRlRWxlbWVudCgicCIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogcmkuZXhwbGFpbmVyRm9vdGVyVGV4dCwKICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7IF9faHRtbDogZCB9LAogICAgICAgIH0pCiAgICApOwogIH0KCiAgaygKICAgICcuRXhwbGFpbmVyLW1vZHVsZV90aXRsZV9fLURLRnUge1xuICBmb250LWZhbWlseTogIm55dC1mcmFua2xpbiI7XG4gIGZvbnQtc2l6ZTogMjRweDtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgbGluZS1oZWlnaHQ6IDI4cHg7XG4gIGxldHRlci1zcGFjaW5nOiAwZW07XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS0xKTtcbn1cblxuLkV4cGxhaW5lci1tb2R1bGVfY29udGFpbmVyTGlua19fQ0ZkM2Uge1xuICBwYWRkaW5nOiAzMHB4O1xufVxuLkV4cGxhaW5lci1tb2R1bGVfY29udGFpbmVyTGlua19fQ0ZkM2UgcDpsYXN0LWNoaWxkIHtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbn1cblxuLkV4cGxhaW5lci1tb2R1bGVfY29udGFpbmVyUHJvYmxlbXNfXzhmQ1JIIHtcbiAgcGFkZGluZzogMzBweDtcbn1cblxuLkV4cGxhaW5lci1tb2R1bGVfY29udGFpbmVyTGlua19fQ0ZkM2UsXG4uRXhwbGFpbmVyLW1vZHVsZV9jb250YWluZXJQcm9ibGVtc19fOGZDUkgge1xuICBwYWRkaW5nLXRvcDogMTRweDtcbn1cblxuLkV4cGxhaW5lci1tb2R1bGVfZXhwbGFpbmVyRm9vdGVyVGV4dF9fWmVlQlgge1xuICBtYXJnaW46IDMwcHg7XG4gIHBhZGRpbmctdG9wOiAzMHB4O1xuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZ3JheS0yKTtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBsaW5lLWhlaWdodDogMTMwJTtcbn1cblxuLkV4cGxhaW5lci1tb2R1bGVfdGV4dF9fa2VWYVcge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxMzAlO1xuICBsZXR0ZXItc3BhY2luZzogMC4wMWVtO1xuICB0ZXh0LWFsaWduOiBsZWZ0O1xuICBtYXJnaW4tbGVmdDogMTBweDtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG59XG4uRXhwbGFpbmVyLW1vZHVsZV90ZXh0X19rZVZhVyA+IGEge1xuICBjb2xvcjogaW5oZXJpdDtcbn1cblxuLkV4cGxhaW5lci1tb2R1bGVfc3RhdHNMaW5rQ29udGFpbmVyX18xUEFMWCB7XG4gIG1hcmdpbi10b3A6IDQwcHg7XG59XG5cbi5FeHBsYWluZXItbW9kdWxlX2xvZ2luQnV0dG9uX19YdXB2ViB7XG4gIGhlaWdodDogNDRweDtcbiAgYmFja2dyb3VuZDogdmFyKC0tY29sb3ItdG9uZS0xKTtcbiAgYm9yZGVyLXJhZGl1czogMTA0cHg7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtNyk7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGxpbmUtaGVpZ2h0OiAxNHB4O1xuICBmb250LXNpemU6IDE0cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcGFkZGluZzogMCAzMHB4O1xuICBib3JkZXI6IG5vbmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBsZXR0ZXItc3BhY2luZzogMC4wNWVtO1xufVxuXG4uRXhwbGFpbmVyLW1vZHVsZV9nYW1lc0ljb25fX3NwS2ZJIHtcbiAgd2lkdGg6IDk1cHg7XG4gIGhlaWdodDogMThweDtcbn1cblxuLkV4cGxhaW5lci1tb2R1bGVfaGVhZGVyTmV3X19TYXFpUiB7XG4gIHBhZGRpbmc6IDE1cHggMHB4O1xufVxuLkV4cGxhaW5lci1tb2R1bGVfaGVhZGVyTmV3X19TYXFpUiA+IHAge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbjogMTBweCAwcHg7XG59XG5cbi5FeHBsYWluZXItbW9kdWxlX2Nsb3NlX19GM3pMdSB7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGNvbG9yOiBpbmhlcml0O1xuICBib3JkZXI6IG5vbmU7XG4gIHBhZGRpbmc6IDA7XG4gIGZvbnQ6IGluaGVyaXQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgb3V0bGluZTogaW5oZXJpdDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICByaWdodDogMDtcbiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBtYXJnaW46IDA7XG4gIG1hcmdpbi1yaWdodDogMzBweDtcbn0nCiAgKTsKICB2YXIgaWkgPSAiU3RhdHNMaW5rLW1vZHVsZV9jb250YWluZXJfX0c0b1lNIiwKICAgIGxpID0gIlN0YXRzTGluay1tb2R1bGVfaGVhZGVyX184Q1BSQSIsCiAgICBjaSA9ICJTdGF0c0xpbmstbW9kdWxlX2xvZ29fX0t4MnMtIiwKICAgIHVpID0gIlN0YXRzTGluay1tb2R1bGVfY29udGVudF9fN3o5SzMiLAogICAgZGkgPSAiU3RhdHNMaW5rLW1vZHVsZV9zdGF0c0ljb25XcmFwcGVyX19semY2UiIsCiAgICBtaSA9ICJTdGF0c0xpbmstbW9kdWxlX3N0YXRzRmFpbHVyZUJhZGdlX19xUW12RSIsCiAgICBwaSA9ICJTdGF0c0xpbmstbW9kdWxlX3N0YXRzSWNvbl9fLW5VLS0iLAogICAgeWkgPSAiU3RhdHNMaW5rLW1vZHVsZV9oZWFkaW5nV3JhcHBlcl9fRFY0VjgiLAogICAgZ2kgPSAiU3RhdHNMaW5rLW1vZHVsZV9oZWFkaW5nX184RzNKayIsCiAgICBmaSA9ICJTdGF0c0xpbmstbW9kdWxlX3BhcmFncmFwaFdyYXBwZXJfXzVzeGVPIiwKICAgIGhpID0gIlN0YXRzTGluay1tb2R1bGVfcGFyYWdyYXBoX19RLWJhTCIsCiAgICBiaSA9ICJTdGF0c0xpbmstbW9kdWxlX2VtYWlsX194enpDeiIsCiAgICB3aSA9ICJTdGF0c0xpbmstbW9kdWxlX2J1dHRvbl9fRjdrMEoiLAogICAga2kgPSAiU3RhdHNMaW5rLW1vZHVsZV9mb290ZXJfX1F4cm1pIiwKICAgIF9pID0gIlN0YXRzTGluay1tb2R1bGVfbGlua19fWUJIWTciLAogICAgdmkgPSAiU3RhdHNMaW5rLW1vZHVsZV9saW5rUHJvbXB0X19WeklGSCI7CgogIGZ1bmN0aW9uIHhpKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPQogICAgICAgICAgbnVsbCA9PSBlCiAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICA6ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgICAgICBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgcyA9ICEwLAogICAgICAgICAgICBpID0gITE7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIG4gPSBuLmNhbGwoZSk7CiAgICAgICAgICAgICAgIShzID0gKGEgPSBuLm5leHQoKSkuZG9uZSkgJiYKICAgICAgICAgICAgICAoci5wdXNoKGEudmFsdWUpLCAhdCB8fCByLmxlbmd0aCAhPT0gdCk7CiAgICAgICAgICAgICAgcyA9ICEwCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIChpID0gITApLCAobyA9IGUpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzIHx8IG51bGwgPT0gbi5yZXR1cm4gfHwgbi5yZXR1cm4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoaSkgdGhyb3cgbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSByZXR1cm4gU2koZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBTaShlLCB0KQogICAgICAgICAgICA6IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gU2koZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICBrKAogICAgIi5TdGF0c0xpbmstbW9kdWxlX2NvbnRhaW5lcl9fRzRvWU0ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5TdGF0c0xpbmstbW9kdWxlX2hlYWRlcl9fOENQUkEge1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZ3JheS0yKTtcbiAgZGlzcGxheTogZmxleDtcbiAgaGVpZ2h0OiAzZW07XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xufVxuXG4uU3RhdHNMaW5rLW1vZHVsZV9sb2dvX19LeDJzLSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdG9wOiA1cHg7XG59XG5cbi5TdGF0c0xpbmstbW9kdWxlX2NvbnRlbnRfXzd6OUszIHtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleDogMTtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgcGFkZGluZy1sZWZ0OiAxLjI1ZW07XG4gIHBhZGRpbmctcmlnaHQ6IDEuMjVlbTtcbiAgcGFkZGluZy10b3A6IDZlbTtcbn1cblxuLlN0YXRzTGluay1tb2R1bGVfc3RhdHNJY29uV3JhcHBlcl9fbHpmNlIge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGhlaWdodDogMTJlbTtcbiAgd2lkdGg6IDEyZW07XG4gIG1hcmdpbi1ib3R0b206IDJlbTtcbn1cblxuLlN0YXRzTGluay1tb2R1bGVfc3RhdHNGYWlsdXJlQmFkZ2VfX3FRbXZFIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBoZWlnaHQ6IDIuNzVlbTtcbiAgd2lkdGg6IDIuNzVlbTtcbiAgdG9wOiAtMC43NWVtO1xuICByaWdodDogLTAuNzVlbTtcbn1cblxuLlN0YXRzTGluay1tb2R1bGVfc3RhdHNJY29uX18tblUtLSB7XG4gIGhlaWdodDogMTJlbTtcbiAgd2lkdGg6IDEyZW07XG59XG5cbi5TdGF0c0xpbmstbW9kdWxlX2hlYWRpbmdXcmFwcGVyX19EVjRWOCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMWVtO1xufVxuXG4uU3RhdHNMaW5rLW1vZHVsZV9oZWFkaW5nX184RzNKayB7XG4gIGZvbnQtZmFtaWx5OiBueXQtY2hlbHRlbmhhbTtcbiAgZm9udC1zaXplOiAyNHB4O1xuICBmb250LXN0eWxlOiBub3JtYWw7XG4gIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIG1hcmdpbjogMDtcbiAgbGluZS1oZWlnaHQ6IDMwcHg7XG59XG5cbi5TdGF0c0xpbmstbW9kdWxlX3BhcmFncmFwaFdyYXBwZXJfXzVzeGVPIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAxLjI1ZW07XG59XG5cbi5TdGF0c0xpbmstbW9kdWxlX3BhcmFncmFwaF9fUS1iYUwge1xuICBmb250LWZhbWlseTogbnl0LWZyYW5rbGluO1xuICBmb250LXNpemU6IDFlbTtcbiAgbWFyZ2luOiAwO1xufVxuXG4uU3RhdHNMaW5rLW1vZHVsZV9lbWFpbF9feHp6Q3oge1xuICBmb250LXdlaWdodDogNzAwO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xufVxuXG4uU3RhdHNMaW5rLW1vZHVsZV9idXR0b25fX0Y3azBKIHtcbiAgYmFja2dyb3VuZDogdmFyKC0tYmxhY2stMik7XG4gIGJvcmRlcjogbm9uZTtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xuICBjb2xvcjogdmFyKC0td2hpdGUpO1xuICBmb250LWZhbWlseTogbnl0LWZyYW5rbGluO1xuICBmb250LXdlaWdodDogNjAwO1xuICBmb250LXNpemU6IDFlbTtcbiAgaGVpZ2h0OiAzZW07XG4gIHdpZHRoOiAxMDAlO1xufVxuXG4uU3RhdHNMaW5rLW1vZHVsZV9mb290ZXJfX1F4cm1pIHtcbiAgcGFkZGluZy10b3A6IDIuNWVtO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5TdGF0c0xpbmstbW9kdWxlX2J1dHRvbkFzTGlua19fa0VyVGgge1xuICBhbGw6IHVuc2V0O1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBjb2xvcjogdmFyKC0tYmxhY2stMyk7XG4gIGZvbnQtZmFtaWx5OiBueXQtZnJhbmtsaW47XG59XG5cbi5TdGF0c0xpbmstbW9kdWxlX2xpbmtfX1lCSFk3IHtcbiAgZm9udC1mYW1pbHk6IG55dC1mcmFua2xpbjtcbiAgZm9udC1zaXplOiAxZW07XG4gIGNvbG9yOiB2YXIoLS1ibGFjay0zKTtcbn1cblxuLlN0YXRzTGluay1tb2R1bGVfbGlua1Byb21wdF9fVnpJRkgge1xuICBjb2xvcjogdmFyKC0tYmxhY2stMyk7XG59IgogICk7CiAgdmFyIEVpID0gewogICAgICBsaW5lMTogIllvdXIgc3RhdHMgd2lsbCBiZSBsaW5rZWQgdG8gdGhpcyIsCiAgICAgIGxpbmUyOiAiTmV3IFlvcmsgVGltZXMgYWNjb3VudCIsCiAgICB9LAogICAgamkgPSB7CiAgICAgIGxpbmUxOiAiV2UncmUgc29ycnksIGJ1dCB3ZSdyZSBoYXZpbmcgYSB0ZWNobmljYWwgaXNzdWUuIiwKICAgICAgbGluZTI6ICJXZSdyZSB1bmFibGUgdG8gbGluayB5b3VyIHN0YXRzIHRvIHRoaXMgYWNjb3VudCByaWdodCBub3cuIiwKICAgIH0sCiAgICB6aSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gZS5vbkNsb3NlLAogICAgICAgIG4gPSB4aShnLnVzZVN0YXRlKCEwKSwgMiksCiAgICAgICAgYSA9IG5bMF0sCiAgICAgICAgbyA9IG5bMV0sCiAgICAgICAgciA9IFQoKSwKICAgICAgICBzID0gUChQZSksCiAgICAgICAgZSA9IFAoVGUpLAogICAgICAgIGkgPSBQKEllKTsKICAgICAgZy51c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgICAgIHIoeyB0eXBlOiBCYSB9KSwKICAgICAgICAgIHIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICBuKHsgdHlwZTogRGEgfSksCiAgICAgICAgICAgICAgdi54aHIKICAgICAgICAgICAgICAgIC5nZXQobWUsIHsgd2l0aENvb2tpZTogITEsIGhlYWRlcnM6IHsgY2xpZW50X2lkOiAiZ2FtZXMiIH0gfSkKICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGUuZW1haWwKICAgICAgICAgICAgICAgICAgICA/IG4oewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBxYSwKICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogeyBkYXRhOiB7IGVtYWlsOiBlLmVtYWlsIH0gfSwKICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgOiAobih7IHR5cGU6IEdhIH0pLCAoZSA9IG5ldyBFcnJvcigicHJvZmlsZSIpKSwgbih6YShlKSkpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICBuKHsgdHlwZTogR2EgfSk7CiAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IEVycm9yKCJwcm9maWxlIik7CiAgICAgICAgICAgICAgICAgIG4oemEodCkpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICB9LCBbXSksCiAgICAgICAgZy51c2VFZmZlY3QoCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG8oISFzKTsKICAgICAgICAgIH0sCiAgICAgICAgICBbc10KICAgICAgICApOwogICAgICBuID0gaSA/IGppIDogRWk7CiAgICAgIHJldHVybiBhCiAgICAgICAgPyBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICB7IGNsYXNzTmFtZTogaWkgfSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJoZWFkZXIiLAogICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBsaSB9LAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgiaW1nIiwgewogICAgICAgICAgICAgICAgYWx0OiAiTmV3IFlvcmsgVGltZXMgbG9nbyIsCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNpLAogICAgICAgICAgICAgICAgc3R5bGU6IHsgY29udGVudDogInZhcigtLW55dC1sb2dvKSIgfSwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICApLAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQobnIsIHsKICAgICAgICAgICAgICAgIHdhaXRGb3I6IDE1MCwKICAgICAgICAgICAgICAgIHNldEJhY2tncm91bmQ6ICJsaWdodCIsCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKQogICAgICAgICAgKQogICAgICAgIDogXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgeyBjbGFzc05hbWU6IGlpIH0sCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAiaGVhZGVyIiwKICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogbGkgfSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImltZyIsIHsKICAgICAgICAgICAgICAgIGFsdDogIk5ldyBZb3JrIFRpbWVzIGxvZ28iLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjaSwKICAgICAgICAgICAgICAgIHN0eWxlOiB7IGNvbnRlbnQ6ICJ2YXIoLS1ueXQtbG9nbykiIH0sCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiB1aSB9LAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGRpIH0sCiAgICAgICAgICAgICAgICBpICYmCiAgICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICAgICAic3ZnIiwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG1pLAogICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICI0NCIsCiAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICI0NCIsCiAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94OiAiMCAwIDQ0IDQ0IiwKICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICJub25lIiwKICAgICAgICAgICAgICAgICAgICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgICAgICAgICAgICAgICAgICAgZDogIk0xMy43MTQ1IDQxLjM5NzdDMTYuMjc4OCA0Mi40NjkxIDE5LjA0NDMgNDMgMjIgNDNDMjQuOTI0MSA0MyAyNy42NzI2IDQyLjQ2ODUgMzAuMjM1NSA0MS4zOTc3QzMyLjc4NDcgNDAuMzMyNiAzNS4wMTE3IDM4Ljg1MjYgMzYuOTA3MSAzNi45NTcxQzM4LjgwMTMgMzUuMDYyOSA0MC4yODg5IDMyLjgzNzcgNDEuMzcwNCAzMC4yOTA5QzQyLjQ2IDI3LjcyNTIgNDMgMjQuOTU3OSA0MyAyMkM0MyAxOS4wNzM4IDQyLjQ1OTMgMTYuMzIzMyA0MS4zNzA0IDEzLjc1OTFDNDAuMjg4OSAxMS4yMTIzIDM4LjgwMTMgOC45ODcxMyAzNi45MDcxIDcuMDkyODlDMzUuMDEyOSA1LjE5ODY1IDMyLjc4NzcgMy43MTEwOCAzMC4yNDA5IDIuNjI5NTZDMjcuNjc2NyAxLjU0MDY2IDI0LjkyNjIgMSAyMiAxQzE5LjA0MjEgMSAxNi4yNzQ4IDEuNTQwMDQgMTMuNzA5MSAyLjYyOTU2QzExLjE2MjMgMy43MTEwOCA4LjkzNzEzIDUuMTk4NjUgNy4wNDI4OSA3LjA5Mjg5QzUuMTQ3NDQgOC45ODgzNCAzLjY2NzM1IDExLjIxNTMgMi42MDIzIDEzLjc2NDVDMS41MzE1MSAxNi4zMjc0IDEgMTkuMDc1OSAxIDIyQzEgMjQuOTU1NyAxLjUzMDkxIDI3LjcyMTIgMi42MDIzIDMwLjI4NTVDMy42NjczNSAzMi44MzQ3IDUuMTQ3NDQgMzUuMDYxNyA3LjA0Mjg5IDM2Ljk1NzFDOC45MzgzNCAzOC44NTI2IDExLjE2NTMgNDAuMzMyNiAxMy43MTQ1IDQxLjM5NzdaTTIyLjY1IDEyLjdWMjMuMzVIMjEuNjVWMTIuN0gyMi42NVpNMjIuNDY3OSAzMC44MTc5QzIyLjM0NzQgMzAuOTM4NCAyMi4yMTM5IDMxIDIyIDMxQzIxLjc4NjEgMzEgMjEuNjUyNiAzMC45Mzg0IDIxLjUzMjEgMzAuODE3OUMyMS40MTE2IDMwLjY5NzQgMjEuMzUgMzAuNTYzOSAyMS4zNSAzMC4zNUMyMS4zNSAzMC4xMzYxIDIxLjQxMTYgMzAuMDAyNiAyMS41MzIxIDI5Ljg4MjFDMjEuNjUyNiAyOS43NjE2IDIxLjc4NjEgMjkuNyAyMiAyOS43QzIyLjIxMzkgMjkuNyAyMi4zNDc0IDI5Ljc2MTYgMjIuNDY3OSAyOS44ODIxQzIyLjU4ODQgMzAuMDAyNiAyMi42NSAzMC4xMzYxIDIyLjY1IDMwLjM1QzIyLjY1IDMwLjU2MzkgMjIuNTg4NCAzMC42OTc0IDIyLjQ2NzkgMzAuODE3OVoiLAogICAgICAgICAgICAgICAgICAgICAgZmlsbDogIiNFMzNEMjYiLAogICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiAid2hpdGUiLAogICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6ICIyIiwKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJpbWciLCB7CiAgICAgICAgICAgICAgICAgIGFsdDogIkxhcmdlIHNpemVkIHdvcmRsZSBzdGF0cyBpY29uIiwKICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwaSwKICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgY29udGVudDogInZhcigtLWxhcmdlLXN0YXRzKSIgfSwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiB5aSB9LAogICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJoMSIsIHsgY2xhc3NOYW1lOiBnaSB9LCBuLmxpbmUxKSwKICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgiaDEiLCB7IGNsYXNzTmFtZTogZ2kgfSwgbi5saW5lMikKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGZpIH0sCiAgICAgICAgICAgICAgICBpICYmCiAgICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICAgICAicCIsCiAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGhpIH0sCiAgICAgICAgICAgICAgICAgICAgIllvdSBhcmUgbG9nZ2VkIGluIGFzIgogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJwIiwgeyBjbGFzc05hbWU6IHAoaGksIGJpKSB9LCBlICYmIGUuZW1haWwpCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAiYnV0dG9uIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB3aSwKICAgICAgICAgICAgICAgICAgb25DbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGkKICAgICAgICAgICAgICAgICAgICAgID8gdCgpCiAgICAgICAgICAgICAgICAgICAgICA6IChyKHsgdHlwZTogQWEgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHIoewogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IEZhLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IHsgZW5hYmxlQXV0aDogITAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgcigKICAgICAgICAgICAgICAgICAgICAgICAgaWUoIiIsICExLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGkgPyAic3RhdHMtbGluay1lcnJvciIgOiAic3RhdHMtbGluay1jb25maXJtIiwKICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAid29yZGxlIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGkgPyAiR28gYmFjayB0byBzdGF0cyIgOiAiQ29uZmlybSBhbmQgc2F2ZSIKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICJmb290ZXIiLAogICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGtpIH0sCiAgICAgICAgICAgICAgICAhaSAmJgogICAgICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAgICAgXy5GcmFnbWVudCwKICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICAgICAgICJwIiwKICAgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwKGhpLCB2aSkgfSwKICAgICAgICAgICAgICAgICAgICAgICJOb3QgdGhlIHJpZ2h0IGFjY291bnQ/IgogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgICAgICAgdW8sCiAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wdEluOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiBfaSwKICAgICAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsOgogICAgICAgICAgICAgICAgICAgICAgICAgICJMaW5rIGZvciBsb2dnaW5nIGluIG9yIGNyZWF0aW5nIGEgZnJlZSBhY2NvdW50IiwKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAiTG9nIGluIHRvIG9yIGNyZWF0ZSBhbm90aGVyIGZyZWUgYWNjb3VudCDigLoiCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICApOwogICAgfSwKICAgIE5pID0gewogICAgICBwYWdlOiAiUGFnZS1tb2R1bGVfcGFnZV9fWXFyV3kiLAogICAgICBTbGlkZUluOiAiUGFnZS1tb2R1bGVfU2xpZGVJbl9fVC1MdTMiLAogICAgICBjbG9zaW5nOiAiUGFnZS1tb2R1bGVfY2xvc2luZ19fdVZnNGYiLAogICAgICBTbGlkZU91dDogIlBhZ2UtbW9kdWxlX1NsaWRlT3V0X19VMncyZyIsCiAgICAgIHBhZ2VOZXc6ICJQYWdlLW1vZHVsZV9wYWdlTmV3X19ZZVRZeSIsCiAgICAgIGdhbWVzSWNvbjogIlBhZ2UtbW9kdWxlX2dhbWVzSWNvbl9fVkZGUDkiLAogICAgICBjbG9zZTogIlBhZ2UtbW9kdWxlX2Nsb3NlX19EM2dhYSIsCiAgICAgIG5vRGFya01vZGU6ICJQYWdlLW1vZHVsZV9ub0RhcmtNb2RlX18wRzBxNSIsCiAgICAgIGNvbnRlbnQ6ICJQYWdlLW1vZHVsZV9jb250ZW50X19od040bCIsCiAgICAgIGhlYWRlck5ldzogIlBhZ2UtbW9kdWxlX2hlYWRlck5ld19fN0RJcFkiLAogICAgICBjb250ZW50Q29udGFpbmVyOiAiUGFnZS1tb2R1bGVfY29udGVudENvbnRhaW5lcl9fS1pKUGgiLAogICAgfTsKCiAgZnVuY3Rpb24gQ2koZSwgdCwgbikgewogICAgcmV0dXJuICgKICAgICAgdCBpbiBlCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgewogICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgIH0pCiAgICAgICAgOiAoZVt0XSA9IG4pLAogICAgICBlCiAgICApOwogIH0KCiAgZnVuY3Rpb24gQWkoZSwgdCkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9CiAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgIDogKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgICAgIGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICBpZiAobnVsbCAhPSBuKSB7CiAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbywKICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICBzID0gITAsCiAgICAgICAgICAgIGkgPSAhMTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbiA9IG4uY2FsbChlKTsKICAgICAgICAgICAgICAhKHMgPSAoYSA9IG4ubmV4dCgpKS5kb25lKSAmJgogICAgICAgICAgICAgIChyLnB1c2goYS52YWx1ZSksICF0IHx8IHIubGVuZ3RoICE9PSB0KTsKICAgICAgICAgICAgICBzID0gITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKGkgPSAhMCksIChvID0gZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHMgfHwgbnVsbCA9PSBuLnJldHVybiB8fCBuLnJldHVybigpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChpKSB0aHJvdyBvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBPaShlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IE9pKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBPaShlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgYSA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgYVtuXSA9IGVbbl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIElpKCkgewogICAgdmFyIHQgPSBUKCksCiAgICAgIGUgPSBQKE9zKSwKICAgICAgbiA9IEFpKGcudXNlU3RhdGUoITEpLCAyKSwKICAgICAgYSA9IG5bMF0sCiAgICAgIG8gPSBuWzFdLAogICAgICByID0gISFQKEFlKSwKICAgICAgcyA9IFAoRWUpLAogICAgICBpID0gbm8oImF1dGgiKSB8fCBzLAogICAgICBsID0gUChUcyk7CiAgICBpZiAoCiAgICAgIChnLnVzZUVmZmVjdCgKICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBsICYmIG8oITApOwogICAgICAgIH0sCiAgICAgICAgW2xdCiAgICAgICksCiAgICAgICFlKQogICAgKQogICAgICByZXR1cm4gbnVsbDsKICAgIChuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZS5hbmltYXRpb25OYW1lID09PSBOaS5TbGlkZU91dCAmJiAobyghMSksIHQoYWUoKSkpOwogICAgfSksCiAgICAgIChyID0gewogICAgICAgIHNhdmU6IHsgY29udGVudDogXy5jcmVhdGVFbGVtZW50KHNhdmVNb2RhbCwgbnVsbCksIHRpdGxlOiAiU2F2ZSIgfSwKICAgICAgICBzZXR0aW5nczogeyBjb250ZW50OiBfLmNyZWF0ZUVsZW1lbnQoTnMsIG51bGwpLCB0aXRsZTogIlNldHRpbmdzIiB9LAogICAgICAgIGhlbHA6IHsKICAgICAgICAgIGNvbnRlbnQ6IF8uY3JlYXRlRWxlbWVudChzciwgeyBpc1BhZ2U6ICEwIH0pLAogICAgICAgICAgdGl0bGU6ICJIb3cgdG8gcGxheSIsCiAgICAgICAgfSwKICAgICAgICBsaW5rSW5mbzogewogICAgICAgICAgY29udGVudDogXy5jcmVhdGVFbGVtZW50KHNpLCB7CiAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbyghMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHR5cGU6ICJsaW5rSW5mbyIsCiAgICAgICAgICAgIGxvZ2dlZEluOiByLAogICAgICAgICAgICBvcHRlZEluOiBzLAogICAgICAgICAgICB0cmFja0NsaWNrOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHJldHVybiB0KGllKGUsICExKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KSwKICAgICAgICAgIHRpdGxlOiAiIiwKICAgICAgICB9LAogICAgICAgIHN0YXRzUHJvYmxlbTogewogICAgICAgICAgY29udGVudDogXy5jcmVhdGVFbGVtZW50KHNpLCB7CiAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbyghMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxvZ2dlZEluOiByLAogICAgICAgICAgICBvcHRlZEluOiBzLAogICAgICAgICAgICB0eXBlOiAic3RhdHNQcm9ibGVtIiwKICAgICAgICAgICAgdHJhY2tDbGljazogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdChpZShlLCAhMSkpOwogICAgICAgICAgICB9LAogICAgICAgICAgfSksCiAgICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgfSwKICAgICAgICBzdGF0c0xpbms6IHsKICAgICAgICAgIGNvbnRlbnQ6IF8uY3JlYXRlRWxlbWVudCh6aSwgewogICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8oITApOwogICAgICAgICAgICB9LAogICAgICAgICAgfSksCiAgICAgICAgICB0aXRsZTogIiIsCiAgICAgICAgfSwKICAgICAgfVtlXSksCiAgICAgIChzID0gci5jb250ZW50KSwKICAgICAgKHIgPSByLnRpdGxlKTsKICAgIGlmIChpKSB7CiAgICAgIGkgPSBbInN0YXRzTGluayJdLmluY2x1ZGVzKGUpOwogICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsKICAgICAgICAgICJkYXRhLXRlc3RpZCI6ICJwYWdlTmV3IiwKICAgICAgICAgIGNsYXNzTmFtZTogcCgKICAgICAgICAgICAgTmkucGFnZU5ldywKICAgICAgICAgICAgKENpKChlID0ge30pLCBOaS5jbG9zaW5nLCBhKSwgQ2koZSwgTmkubm9EYXJrTW9kZSwgaSksIGUpCiAgICAgICAgICApLAogICAgICAgICAgb25BbmltYXRpb25FbmQ6IG4sCiAgICAgICAgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBOaS5jb250ZW50IH0sIHMpCiAgICAgICk7CiAgICB9CiAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAiZGl2IiwKICAgICAgewogICAgICAgIHJvbGU6ICJkaWFsb2ciLAogICAgICAgIGNsYXNzTmFtZTogcChOaS5wYWdlLCBDaSh7fSwgTmkuY2xvc2luZywgYSkpLAogICAgICAgIG9uQW5pbWF0aW9uRW5kOiBuLAogICAgICB9LAogICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgImRpdiIsCiAgICAgICAgeyBjbGFzc05hbWU6IE5pLmNvbnRlbnQgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiaGVhZGVyIiwKICAgICAgICAgIG51bGwsCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImgxIiwgbnVsbCwgciksCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJidXR0b24iLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBOaS5jbG9zZSwKICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAiY2xvc2UiLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIG8oITApOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChKbywgeyBpY29uOiAiY2xvc2UiIH0pCiAgICAgICAgICApCiAgICAgICAgKSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImRpdiIsIHsgY2xhc3NOYW1lOiBOaS5jb250ZW50Q29udGFpbmVyIH0sIHMpCiAgICAgICkKICAgICk7CiAgfQoKICBrKAogICAgIi5QYWdlLW1vZHVsZV9wYWdlX19ZcXJXeSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYmFja2dyb3VuZCk7XG4gIC13ZWJraXQtYW5pbWF0aW9uOiBQYWdlLW1vZHVsZV9TbGlkZUluX19ULUx1MyAxMDBtcyBsaW5lYXI7XG4gICAgICAgICAgYW5pbWF0aW9uOiBQYWdlLW1vZHVsZV9TbGlkZUluX19ULUx1MyAxMDBtcyBsaW5lYXI7XG4gIHotaW5kZXg6IHZhcigtLXBhZ2Utei1pbmRleCk7XG59XG4uUGFnZS1tb2R1bGVfcGFnZV9fWXFyV3kuUGFnZS1tb2R1bGVfY2xvc2luZ19fdVZnNGYge1xuICAtd2Via2l0LWFuaW1hdGlvbjogUGFnZS1tb2R1bGVfU2xpZGVPdXRfX1UydzJnIDE1MG1zIGxpbmVhcjtcbiAgICAgICAgICBhbmltYXRpb246IFBhZ2UtbW9kdWxlX1NsaWRlT3V0X19VMncyZyAxNTBtcyBsaW5lYXI7XG59XG4uUGFnZS1tb2R1bGVfcGFnZV9fWXFyV3kgaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi5QYWdlLW1vZHVsZV9wYWdlX19ZcXJXeSBoMSB7XG4gIGZvbnQtd2VpZ2h0OiA3MDA7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuNXB4O1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG59XG5cbi5QYWdlLW1vZHVsZV9wYWdlTmV3X19ZZVRZeSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItYmFja2dyb3VuZCk7XG4gIC13ZWJraXQtYW5pbWF0aW9uOiBQYWdlLW1vZHVsZV9TbGlkZUluX19ULUx1MyAxMDBtcyBsaW5lYXI7XG4gICAgICAgICAgYW5pbWF0aW9uOiBQYWdlLW1vZHVsZV9TbGlkZUluX19ULUx1MyAxMDBtcyBsaW5lYXI7XG4gIHotaW5kZXg6IHZhcigtLXBhZ2Utei1pbmRleCk7XG4gIG92ZXJmbG93LXk6IHNjcm9sbDtcbiAgZGlzcGxheTogZmxleDtcbn1cbi5QYWdlLW1vZHVsZV9wYWdlTmV3X19ZZVRZeSAuUGFnZS1tb2R1bGVfZ2FtZXNJY29uX19WRkZQOSB7XG4gIHdpZHRoOiA5NXB4O1xuICBoZWlnaHQ6IDE4cHg7XG59XG4uUGFnZS1tb2R1bGVfcGFnZU5ld19fWWVUWXkgLlBhZ2UtbW9kdWxlX2Nsb3NlX19EM2dhYSB7XG4gIG1hcmdpbi1yaWdodDogMzBweDtcbn1cbi5QYWdlLW1vZHVsZV9wYWdlTmV3X19ZZVRZeS5QYWdlLW1vZHVsZV9jbG9zaW5nX191Vmc0ZiB7XG4gIC13ZWJraXQtYW5pbWF0aW9uOiBQYWdlLW1vZHVsZV9TbGlkZU91dF9fVTJ3MmcgMTUwbXMgbGluZWFyO1xuICAgICAgICAgIGFuaW1hdGlvbjogUGFnZS1tb2R1bGVfU2xpZGVPdXRfX1UydzJnIDE1MG1zIGxpbmVhcjtcbn1cbi5QYWdlLW1vZHVsZV9wYWdlTmV3X19ZZVRZeS5QYWdlLW1vZHVsZV9ub0RhcmtNb2RlX18wRzBxNSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdoaXRlKTtcbiAgY29sb3I6IGJsYWNrO1xufVxuLlBhZ2UtbW9kdWxlX3BhZ2VOZXdfX1llVFl5LlBhZ2UtbW9kdWxlX25vRGFya01vZGVfXzBHMHE1ID4gLlBhZ2UtbW9kdWxlX2NvbnRlbnRfX2h3TjRsIHtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG4uUGFnZS1tb2R1bGVfaGVhZGVyTmV3X183RElwWSB7XG4gIHBhZGRpbmc6IDE1cHggMHB4O1xufVxuLlBhZ2UtbW9kdWxlX2hlYWRlck5ld19fN0RJcFkgPiBwIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW46IDEwcHggMHB4O1xufVxuXG4uUGFnZS1tb2R1bGVfY29udGVudF9faHdONGwge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10b25lLTEpO1xuICBwYWRkaW5nOiAwIDMycHg7XG4gIG1heC13aWR0aDogdmFyKC0tZ2FtZS1tYXgtd2lkdGgpO1xuICB3aWR0aDogMTAwJTtcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4uUGFnZS1tb2R1bGVfY29udGVudENvbnRhaW5lcl9fS1pKUGgge1xuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5QYWdlLW1vZHVsZV9jbG9zZV9fRDNnYWEge1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBjb2xvcjogaW5oZXJpdDtcbiAgYm9yZGVyOiBub25lO1xuICBwYWRkaW5nOiAwO1xuICBmb250OiBpbmhlcml0O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG91dGxpbmU6IGluaGVyaXQ7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDA7XG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgbWFyZ2luOiAwO1xufVxuXG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtaW4tZGV2aWNlLXdpZHRoOiAzMjBweCkgYW5kIChtYXgtZGV2aWNlLXdpZHRoOiA0ODBweCkge1xuICAuUGFnZS1tb2R1bGVfY29udGVudF9faHdONGwge1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiAwO1xuICB9XG5cbiAgLlBhZ2UtbW9kdWxlX2Nsb3NlX19EM2dhYSB7XG4gICAgcGFkZGluZzogMCAxNnB4O1xuICB9XG59XG5ALXdlYmtpdC1rZXlmcmFtZXMgUGFnZS1tb2R1bGVfU2xpZGVJbl9fVC1MdTMge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDMwcHgpO1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDBweCk7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuQGtleWZyYW1lcyBQYWdlLW1vZHVsZV9TbGlkZUluX19ULUx1MyB7XG4gIDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzBweCk7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICAxMDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMHB4KTtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG59XG5ALXdlYmtpdC1rZXlmcmFtZXMgUGFnZS1tb2R1bGVfU2xpZGVPdXRfX1UydzJnIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwcHgpO1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbiAgOTAlIHtcbiAgICBvcGFjaXR5OiAwO1xuICB9XG4gIDEwMCUge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDYwcHgpO1xuICB9XG59XG5Aa2V5ZnJhbWVzIFBhZ2UtbW9kdWxlX1NsaWRlT3V0X19VMncyZyB7XG4gIDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMHB4KTtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG4gIDkwJSB7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICAxMDAlIHtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSg2MHB4KTtcbiAgfVxufSIKICApOwogIHZhciBMaSA9IHsKICAgIHRvYXN0ZXI6ICJUb2FzdENvbnRhaW5lci1tb2R1bGVfdG9hc3Rlcl9fUURhZDMiLAogICAgZ2FtZVRvYXN0ZXI6ICJUb2FzdENvbnRhaW5lci1tb2R1bGVfZ2FtZVRvYXN0ZXJfX3lqelBuIiwKICAgIHN5c3RlbVRvYXN0ZXI6ICJUb2FzdENvbnRhaW5lci1tb2R1bGVfc3lzdGVtVG9hc3Rlcl9fZklaZGYiLAogIH07CiAgaygKICAgICIuVG9hc3RDb250YWluZXItbW9kdWxlX3RvYXN0ZXJfX1FEYWQzIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDQ1cHg7XG4gIGxlZnQ6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMCk7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB3aWR0aDogLXdlYmtpdC1maXQtY29udGVudDtcbiAgd2lkdGg6IC1tb3otZml0LWNvbnRlbnQ7XG4gIHdpZHRoOiBmaXQtY29udGVudDtcbn1cblxuI1RvYXN0Q29udGFpbmVyLW1vZHVsZV9nYW1lVG9hc3Rlcl9feWp6UG4ge1xuICB6LWluZGV4OiB2YXIoLS10b2FzdC16LWluZGV4KTtcbn1cblxuI1RvYXN0Q29udGFpbmVyLW1vZHVsZV9zeXN0ZW1Ub2FzdGVyX19mSVpkZiB7XG4gIHotaW5kZXg6IHZhcigtLXN5c3RlbS10b2FzdC16LWluZGV4KTtcbn0iCiAgKTsKICB2YXIgVGkgPSB7CiAgICB0b2FzdDogIlRvYXN0LW1vZHVsZV90b2FzdF9fV29lYi0iLAogICAgd2luOiAiVG9hc3QtbW9kdWxlX3dpbl9fNy1hWlgiLAogICAgZmFkZTogIlRvYXN0LW1vZHVsZV9mYWRlX191UGhBZyIsCiAgfTsKCiAgZnVuY3Rpb24gUGkoZSwgdCkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9CiAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgIDogKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgICAgIGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICBpZiAobnVsbCAhPSBuKSB7CiAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbywKICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICBzID0gITAsCiAgICAgICAgICAgIGkgPSAhMTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbiA9IG4uY2FsbChlKTsKICAgICAgICAgICAgICAhKHMgPSAoYSA9IG4ubmV4dCgpKS5kb25lKSAmJgogICAgICAgICAgICAgIChyLnB1c2goYS52YWx1ZSksICF0IHx8IHIubGVuZ3RoICE9PSB0KTsKICAgICAgICAgICAgICBzID0gITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKGkgPSAhMCksIChvID0gZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHMgfHwgbnVsbCA9PSBuLnJldHVybiB8fCBuLnJldHVybigpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChpKSB0aHJvdyBvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBNaShlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IE1pKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBNaShlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgYSA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgYVtuXSA9IGVbbl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIEJpKGUpIHsKICAgIHZhciB0ID0gZS50b2FzdCwKICAgICAgbiA9IHQudGV4dCwKICAgICAgYSA9IHQuZHVyYXRpb24sCiAgICAgIG8gPSB0LnRpbWVzdGFtcCwKICAgICAgciA9IFQoKSwKICAgICAgZSA9IFBpKGcudXNlU3RhdGUoITEpLCAyKSwKICAgICAgdCA9IGVbMF0sCiAgICAgIHMgPSBlWzFdOwogICAgcmV0dXJuICgKICAgICAgU28oCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHMoITApOwogICAgICAgIH0sCiAgICAgICAgYSA9PT0gMSAvIDAgPyBudWxsIDogYQogICAgICApLAogICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgImRpdiIsCiAgICAgICAgewogICAgICAgICAgY2xhc3NOYW1lOiBwKAogICAgICAgICAgICBUaS50b2FzdCwKICAgICAgICAgICAgKChlID0ge30pLAogICAgICAgICAgICAoYSA9IFRpLmZhZGUpLAogICAgICAgICAgICAodCA9IHQpLAogICAgICAgICAgICBhIGluIGUKICAgICAgICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBhLCB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LAogICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICA6IChlW2FdID0gdCksCiAgICAgICAgICAgIGUpCiAgICAgICAgICApLAogICAgICAgICAgb25UcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHIoSChuLCBvKSk7CiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgbgogICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gUmkoKSB7CiAgICB2YXIgZSA9IFAoTHMpLAogICAgICB0ID0gZS5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5pc1N5c3RlbTsKICAgICAgfSksCiAgICAgIG4gPSBlLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiAhZS5pc1N5c3RlbTsKICAgICAgfSksCiAgICAgIGUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiZGl2IiwKICAgICAgICAgIHsgY2xhc3NOYW1lOiBMaS50b2FzdGVyLCBpZDogdCB9LAogICAgICAgICAgZS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudChCaSwgewogICAgICAgICAgICAgIGtleTogIiIuY29uY2F0KGUudGV4dCwgIi0iKS5jb25jYXQoZS50aW1lc3RhbXApLAogICAgICAgICAgICAgIHRvYXN0OiBlLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgKTsKICAgICAgfTsKICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgIF8uRnJhZ21lbnQsCiAgICAgIG51bGwsCiAgICAgIGUobiwgTGkuZ2FtZVRvYXN0ZXIpLAogICAgICBlKHQsIExpLnN5c3RlbVRvYXN0ZXIpCiAgICApOwogIH0KCiAgaygKICAgICIuVG9hc3QtbW9kdWxlX3RvYXN0X19Xb2ViLSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgbWFyZ2luOiAxNnB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci10b25lLTgpO1xuICBjb2xvcjogdmFyKC0tY29sb3ItdG9uZS03KTtcbiAgcGFkZGluZzogMTNweDtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIG9wYWNpdHk6IDE7XG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMzAwbXMgY3ViaWMtYmV6aWVyKDAuNjQ1LCAwLjA0NSwgMC4zNTUsIDEpO1xuICBmb250LXdlaWdodDogNzAwO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxNnB4O1xufVxuXG4uVG9hc3QtbW9kdWxlX3dpbl9fNy1hWlgge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1jb3JyZWN0KTtcbiAgY29sb3I6IHZhcigtLXRpbGUtdGV4dC1jb2xvcik7XG59XG5cbi5Ub2FzdC1tb2R1bGVfZmFkZV9fdVBoQWcge1xuICBvcGFjaXR5OiAwO1xufSIKICApOwogIHZhciBXaSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGU7CiAgICAgIHJldHVybiAoCiAgICAgICAgd2luZG93LmlzSHlicmlkV2ViVmlldyAmJiB3aW5kb3cuTmF0aXZlQnJpZGdlCiAgICAgICAgICA/IHdpbmRvdy5OYXRpdmVCcmlkZ2UuZ2FtZXNCYWNrVG9IdWIoKQogICAgICAgICAgOiB3aW5kb3cuaXNQbGF5VGFiCiAgICAgICAgICA/ICgoKGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIikpLmhyZWYgPSAibnl0aW1lczovL3BsYXkiKSwKICAgICAgICAgICAgZS5jbGljaygpKQogICAgICAgICAgOiAod2luZG93LmxvY2F0aW9uLmhyZWYgPSAiL2Nyb3Nzd29yZHMiKSwKICAgICAgICBudWxsCiAgICAgICk7CiAgICB9LAogICAgSGkgPSB7CiAgICAgIGNvbnRhaW5lcjogIkVycm9yLW1vZHVsZV9jb250YWluZXJfX0JNY21UIiwKICAgICAgU2xpZGVJbjogIkVycm9yLW1vZHVsZV9TbGlkZUluX185dzJ3bCIsCiAgICAgIGVycm9yQ29udGFpbmVyOiAiRXJyb3ItbW9kdWxlX2Vycm9yQ29udGFpbmVyX181ZjAtTyIsCiAgICAgIGVycm9yVGV4dDogIkVycm9yLW1vZHVsZV9lcnJvclRleHRfX2FJTnM1IiwKICAgICAgZXJyb3JUaWxlc0NvbnRhaW5lcjogIkVycm9yLW1vZHVsZV9lcnJvclRpbGVzQ29udGFpbmVyX183U1pENSIsCiAgICAgIGVycm9yVGlsZXM6ICJFcnJvci1tb2R1bGVfZXJyb3JUaWxlc19fbWlDa3IiLAogICAgICBiYWNrQnV0dG9uOiAiRXJyb3ItbW9kdWxlX2JhY2tCdXR0b25fX3FoZml4IiwKICAgICAgZXJyb3JCYW5uZXJDb250YWluZXI6ICJFcnJvci1tb2R1bGVfZXJyb3JCYW5uZXJDb250YWluZXJfX2twdUFCIiwKICAgICAgZXJyb3JUaXRsZTogIkVycm9yLW1vZHVsZV9lcnJvclRpdGxlX18taU41RiIsCiAgICAgIGNsb3NlOiAiRXJyb3ItbW9kdWxlX2Nsb3NlX19NLUVkRyIsCiAgICAgIGVycm9yUm93OiAiRXJyb3ItbW9kdWxlX2Vycm9yUm93X18zNWxNRiIsCiAgICAgIGhpZGVCYW5uZXI6ICJFcnJvci1tb2R1bGVfaGlkZUJhbm5lcl9fZEkya0oiLAogICAgICBTbGlkZU91dDogIkVycm9yLW1vZHVsZV9TbGlkZU91dF9fdVZPdmMiLAogICAgfTsKICBrKAogICAgJy5FcnJvci1tb2R1bGVfY29udGFpbmVyX19CTWNtVCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgbWF4LWhlaWdodDogY2FsYygxMDAlIC0gdmFyKC0taGVhZGVyLWhlaWdodCkgLSAxcHgpO1xuICBsZWZ0OiAwO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZXJyb3ItYmFja2dyb3VuZCk7XG4gIC13ZWJraXQtYW5pbWF0aW9uOiBFcnJvci1tb2R1bGVfU2xpZGVJbl9fOXcyd2wgMTAwbXMgbGluZWFyO1xuICAgICAgICAgIGFuaW1hdGlvbjogRXJyb3ItbW9kdWxlX1NsaWRlSW5fXzl3MndsIDEwMG1zIGxpbmVhcjtcbiAgei1pbmRleDogdmFyKC0tZXJyb3Itei1pbmRleCk7XG59XG5cbi5FcnJvci1tb2R1bGVfZXJyb3JDb250YWluZXJfXzVmMC1PIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGhlaWdodDogMjAwcHg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgdG9wOiAxNjZweDtcbiAgZm9udC1mYW1pbHk6ICJueXQtZnJhbmtsaW4iO1xufVxuXG4uRXJyb3ItbW9kdWxlX2Vycm9yVGV4dF9fYUlOczUge1xuICBmb250LWZhbWlseTogIm55dC1mcmFua2xpbi00MDAiO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6IDQwcHg7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gIGNvbG9yOiB2YXIoLS1jb2xvci10b25lLTEpO1xufVxuXG4uRXJyb3ItbW9kdWxlX2Vycm9yVGlsZXNDb250YWluZXJfXzdTWkQ1IHtcbiAgd2lkdGg6IDIwOHB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4uRXJyb3ItbW9kdWxlX2Vycm9yVGlsZXNfX21pQ2tyIHtcbiAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBsaW5lLWhlaWdodDogMjBweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdoaXRlKTtcbiAgYm9yZGVyOiAxLjI3cHggc29saWQgdmFyKC0tbGlnaHRHcmF5KTtcbiAgd2lkdGg6IDQwcHg7XG4gIGhlaWdodDogNDBweDtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbn1cblxuLkVycm9yLW1vZHVsZV9iYWNrQnV0dG9uX19xaGZpeCB7XG4gIG1hcmdpbi10b3A6IDI0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gIHdpZHRoOiAxNTBweDtcbiAgaGVpZ2h0OiA0OHB4O1xuICBmb250LWZhbWlseTogIm55dC1mcmFua2xpbi02MDAiO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGJveC1zaGFkb3c6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtNyk7XG59XG5cbkAtd2Via2l0LWtleWZyYW1lcyBFcnJvci1tb2R1bGVfU2xpZGVJbl9fOXcyd2wge1xuICAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDMwcHgpO1xuICAgIG9wYWNpdHk6IDA7XG4gIH1cbiAgMTAwJSB7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDBweCk7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxufVxuXG5Aa2V5ZnJhbWVzIEVycm9yLW1vZHVsZV9TbGlkZUluX185dzJ3bCB7XG4gIDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMzBweCk7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICAxMDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMHB4KTtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG59XG5ALXdlYmtpdC1rZXlmcmFtZXMgRXJyb3ItbW9kdWxlX1NsaWRlT3V0X191Vk92YyB7XG4gIDAlIHtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMHB4KTtcbiAgICBvcGFjaXR5OiAxO1xuICB9XG4gIDkwJSB7XG4gICAgb3BhY2l0eTogMDtcbiAgfVxuICAxMDAlIHtcbiAgICBvcGFjaXR5OiAwO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSg2MHB4KTtcbiAgfVxufVxuQGtleWZyYW1lcyBFcnJvci1tb2R1bGVfU2xpZGVPdXRfX3VWT3ZjIHtcbiAgMCUge1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwcHgpO1xuICAgIG9wYWNpdHk6IDE7XG4gIH1cbiAgOTAlIHtcbiAgICBvcGFjaXR5OiAwO1xuICB9XG4gIDEwMCUge1xuICAgIG9wYWNpdHk6IDA7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDYwcHgpO1xuICB9XG59XG4uRXJyb3ItbW9kdWxlX2Vycm9yQmFubmVyQ29udGFpbmVyX19rcHVBQiB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzMjMyMzI7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBoZWlnaHQ6IGF1dG87XG4gIG9wYWNpdHk6IDE7XG4gIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2UtaW4tb3V0O1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxMDAlO1xuICBsZWZ0OiAwO1xuICBmb250LWZhbWlseTogIm55dC1mcmFua2xpbiI7XG59XG4uRXJyb3ItbW9kdWxlX2Vycm9yQmFubmVyQ29udGFpbmVyX19rcHVBQiBwIHtcbiAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgbWFyZ2luOiA1cHggNXB4IDVweCAxMHB4O1xufVxuLkVycm9yLW1vZHVsZV9lcnJvckJhbm5lckNvbnRhaW5lcl9fa3B1QUIgcC5FcnJvci1tb2R1bGVfZXJyb3JUaXRsZV9fLWlONUYge1xuICBmb250LXdlaWdodDogNzAwO1xufVxuLkVycm9yLW1vZHVsZV9lcnJvckJhbm5lckNvbnRhaW5lcl9fa3B1QUIgLkVycm9yLW1vZHVsZV9jbG9zZV9fTS1FZEcge1xuICBjb2xvcjogd2hpdGU7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbGluZS1oZWlnaHQ6IDE3cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgbWFyZ2luOiA1cHggNXB4IDBweCAwcHg7XG59XG4uRXJyb3ItbW9kdWxlX2Vycm9yQmFubmVyQ29udGFpbmVyX19rcHVBQiAuRXJyb3ItbW9kdWxlX2Vycm9yUm93X18zNWxNRiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcbn1cbi5FcnJvci1tb2R1bGVfZXJyb3JCYW5uZXJDb250YWluZXJfX2twdUFCLkVycm9yLW1vZHVsZV9oaWRlQmFubmVyX19kSTJrSiB7XG4gIG9wYWNpdHk6IDA7XG4gIGhlaWdodDogMDtcbn0nCiAgKTsKICB2YXIgRGkgPSBmdW5jdGlvbiAoZSkgewogICAgICAoZSA9IGUudGV4dCksIChlID0gdm9pZCAwID09PSBlID8gImVycm9yIiA6IGUpOwogICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsgY2xhc3NOYW1lOiBIaS5lcnJvclRpbGVzQ29udGFpbmVyIH0sCiAgICAgICAgZS5zcGxpdCgiIikubWFwKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgeyBjbGFzc05hbWU6IEhpLmVycm9yVGlsZXMsIGtleTogIiIuY29uY2F0KHQsICItIikuY29uY2F0KGUpIH0sCiAgICAgICAgICAgIGUKICAgICAgICAgICk7CiAgICAgICAgfSkKICAgICAgKTsKICAgIH0sCiAgICBxaSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7IGNsYXNzTmFtZTogSGkuZXJyb3JUZXh0IH0sCiAgICAgICAgIllvdeKAmXJlIG9mZmxpbmUuIiwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksCiAgICAgICAgIkZpbmQgYSBjb25uZWN0aW9uIGFuZCBjb21lIGJhY2suIgogICAgICApOwogICAgfSwKICAgIEdpID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsgY2xhc3NOYW1lOiBIaS5lcnJvclRleHQgfSwKICAgICAgICAiT29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmcuIiwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoImJyIiwgbnVsbCksCiAgICAgICAgIlBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuIgogICAgICApOwogICAgfTsKCiAgZnVuY3Rpb24gRmkoKSB7CiAgICB2YXIgZSA9IFAoQXMpLAogICAgICB0ID0gInByb2ZpbGUiID09PSBlLAogICAgICBuID0gZG9jdW1lbnQucmVmZXJyZXIuaW5jbHVkZXMoIm55dGltZXMiKSAmJiAhdCwKICAgICAgYSA9IFQoKTsKICAgIGlmICghZSkgcmV0dXJuIG51bGw7CiAgICB2YXIgbyA9IHsKICAgICAgICBvZmZsaW5lOiB7CiAgICAgICAgICB0aWxlczogXy5jcmVhdGVFbGVtZW50KERpLCB7IHRleHQ6ICJ5aWtlcyIgfSksCiAgICAgICAgICBjb250ZW50OiBfLmNyZWF0ZUVsZW1lbnQocWksIG51bGwpLAogICAgICAgIH0sCiAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgdGlsZXM6IF8uY3JlYXRlRWxlbWVudChEaSwgbnVsbCksCiAgICAgICAgICBjb250ZW50OiBfLmNyZWF0ZUVsZW1lbnQoR2ksIG51bGwpLAogICAgICAgIH0sCiAgICAgICAgcHJvZmlsZTogewogICAgICAgICAgdGlsZXM6IF8uY3JlYXRlRWxlbWVudChEaSwgbnVsbCksCiAgICAgICAgICBjb250ZW50OiBfLmNyZWF0ZUVsZW1lbnQoR2ksIG51bGwpLAogICAgICAgIH0sCiAgICAgIH1bZV0sCiAgICAgIHIgPSBvLnRpbGVzLAogICAgICBvID0gby5jb250ZW50OwogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgImRpdiIsCiAgICAgIHsKICAgICAgICBjbGFzc05hbWU6IEhpLmNvbnRhaW5lciwKICAgICAgICByb2xlOiAiZGlhbG9nIiwKICAgICAgfSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsgY2xhc3NOYW1lOiBIaS5lcnJvckNvbnRhaW5lciB9LAogICAgICAgIHIsCiAgICAgICAgbywKICAgICAgICBuICYmCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJidXR0b24iLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY2xhc3NOYW1lOiBIaS5iYWNrQnV0dG9uLAogICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICJkYXRhLXRlc3RpZCI6ICJiYWNrIiwKICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAib2ZmbGluZSIgPT09IGUgJiYgYShpZSgic3RhdHMtbGluay1vZmZsaW5lIiwgITEpKSwgV2koKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAiQmFjayIKICAgICAgICAgICksCiAgICAgICAgdCAmJgogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiYnV0dG9uIiwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGNsYXNzTmFtZTogSGkuYmFja0J1dHRvbiwKICAgICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAicmVsb2FkIiwKICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgIlJlbG9hZCIKICAgICAgICAgICkKICAgICAgKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIFZpKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPQogICAgICAgICAgbnVsbCA9PSBlCiAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICA6ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgICAgICBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgcyA9ICEwLAogICAgICAgICAgICBpID0gITE7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIG4gPSBuLmNhbGwoZSk7CiAgICAgICAgICAgICAgIShzID0gKGEgPSBuLm5leHQoKSkuZG9uZSkgJiYKICAgICAgICAgICAgICAoci5wdXNoKGEudmFsdWUpLCAhdCB8fCByLmxlbmd0aCAhPT0gdCk7CiAgICAgICAgICAgICAgcyA9ICEwCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIChpID0gITApLCAobyA9IGUpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzIHx8IG51bGwgPT0gbi5yZXR1cm4gfHwgbi5yZXR1cm4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoaSkgdGhyb3cgbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSByZXR1cm4gWWkoZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBZaShlLCB0KQogICAgICAgICAgICA6IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gWWkoZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBVaSgpIHsKICAgIHZhciBlLAogICAgICB0LAogICAgICBuID0gVmkoZy51c2VTdGF0ZSghMSksIDIpLAogICAgICBhID0gblswXSwKICAgICAgbyA9IG5bMV07CiAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAiZGl2IiwKICAgICAgewogICAgICAgICJhcmlhLWhpZGRlbiI6IGEsCiAgICAgICAgY2xhc3NOYW1lOiBwKAogICAgICAgICAgSGkuZXJyb3JCYW5uZXJDb250YWluZXIsCiAgICAgICAgICAoKGUgPSB7fSksCiAgICAgICAgICAodCA9IEhpLmhpZGVCYW5uZXIpLAogICAgICAgICAgKG4gPSBhKSwKICAgICAgICAgIHQgaW4gZQogICAgICAgICAgICA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCB0LCB7CiAgICAgICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICA6IChlW3RdID0gbiksCiAgICAgICAgICBlKQogICAgICAgICksCiAgICAgIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAiZGl2IiwKICAgICAgICB7CiAgICAgICAgICBjbGFzc05hbWU6IEhpLmVycm9yUm93LAogICAgICAgICAgImFyaWEtaGlkZGVuIjogYSwKICAgICAgICB9LAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgicCIsIHsgY2xhc3NOYW1lOiBIaS5lcnJvclRpdGxlIH0sICJFcnJvciIpLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJzcGFuIiwKICAgICAgICAgIHsKICAgICAgICAgICAgcm9sZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGNsYXNzTmFtZTogSGkuY2xvc2UsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbyghMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KEpvLCB7CiAgICAgICAgICAgIGljb246ICJjbG9zZSIsCiAgICAgICAgICAgIGZpbGxDb2xvcjogInZhcigtLXdoaXRlKSIsCiAgICAgICAgICB9KQogICAgICAgICkKICAgICAgKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJwIiwKICAgICAgICBudWxsLAogICAgICAgICJPb3BzLCBzb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4iCiAgICAgICkKICAgICk7CiAgfQoKICB2YXIgWmkgPSB7CiAgICBrZXk6ICJLZXktbW9kdWxlX2tleV9fUnYtVnAiLAogICAgZmFkZTogIktleS1tb2R1bGVfZmFkZV9fMzdIazgiLAogICAgaGFsZjogIktleS1tb2R1bGVfaGFsZl9fbGpzajgiLAogICAgb25lOiAiS2V5LW1vZHVsZV9vbmVfX0hCT291IiwKICAgIG9uZUFuZEFIYWxmOiAiS2V5LW1vZHVsZV9vbmVBbmRBSGFsZl9fSzZKQlkiLAogIH07CgogIGZ1bmN0aW9uIFhpKGUsIHQsIG4pIHsKICAgIHJldHVybiAoCiAgICAgIHQgaW4gZQogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHQsIHsKICAgICAgICAgICAgdmFsdWU6IG4sCiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICB3cml0YWJsZTogITAsCiAgICAgICAgICB9KQogICAgICAgIDogKGVbdF0gPSBuKSwKICAgICAgZQogICAgKTsKICB9CgogIGZ1bmN0aW9uIEtpKGUsIHQpIHsKICAgIHJldHVybiAoCiAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpKSByZXR1cm4gZTsKICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgdmFyIG4gPQogICAgICAgICAgbnVsbCA9PSBlCiAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICA6ICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgICAgICBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgdmFyIGEsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIHIgPSBbXSwKICAgICAgICAgICAgcyA9ICEwLAogICAgICAgICAgICBpID0gITE7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgIG4gPSBuLmNhbGwoZSk7CiAgICAgICAgICAgICAgIShzID0gKGEgPSBuLm5leHQoKSkuZG9uZSkgJiYKICAgICAgICAgICAgICAoci5wdXNoKGEudmFsdWUpLCAhdCB8fCByLmxlbmd0aCAhPT0gdCk7CiAgICAgICAgICAgICAgcyA9ICEwCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIChpID0gITApLCAobyA9IGUpOwogICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBzIHx8IG51bGwgPT0gbi5yZXR1cm4gfHwgbi5yZXR1cm4oKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoaSkgdGhyb3cgbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICBpZiAoZSkgewogICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSByZXR1cm4gSmkoZSwgdCk7CiAgICAgICAgICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LCAtMSk7CiAgICAgICAgICByZXR1cm4gIk1hcCIgPT09CiAgICAgICAgICAgIChuID0gIk9iamVjdCIgPT09IG4gJiYgZS5jb25zdHJ1Y3RvciA/IGUuY29uc3RydWN0b3IubmFtZSA6IG4pIHx8CiAgICAgICAgICAgICJTZXQiID09PSBuCiAgICAgICAgICAgID8gQXJyYXkuZnJvbShlKQogICAgICAgICAgICA6ICJBcmd1bWVudHMiID09PSBuIHx8CiAgICAgICAgICAgICAgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikKICAgICAgICAgICAgPyBKaShlLCB0KQogICAgICAgICAgICA6IHZvaWQgMDsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigKICAgICAgICAgICJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gSmkoZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICBrKAogICAgIi5LZXktbW9kdWxlX2tleV9fUnYtVnAge1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGJvcmRlcjogMDtcbiAgcGFkZGluZzogMDtcbiAgbWFyZ2luOiAwIDZweCAwIDA7XG4gIGhlaWdodDogNThweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWtleS1iZyk7XG4gIGNvbG9yOiB2YXIoLS1rZXktdGV4dC1jb2xvcik7XG4gIGZsZXg6IDE7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4zKTtcbn1cbi5LZXktbW9kdWxlX2tleV9fUnYtVnA6Zm9jdXMge1xuICBvdXRsaW5lOiBub25lO1xufVxuLktleS1tb2R1bGVfa2V5X19Sdi1WcDpsYXN0LW9mLXR5cGUge1xuICBtYXJnaW46IDA7XG59XG4uS2V5LW1vZHVsZV9rZXlfX1J2LVZwW2RhdGEtc3RhdGU9Y29ycmVjdF0ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1rZXktYmctY29ycmVjdCk7XG4gIGNvbG9yOiB2YXIoLS1rZXktZXZhbHVhdGVkLXRleHQtY29sb3IpO1xufVxuLktleS1tb2R1bGVfa2V5X19Sdi1WcFtkYXRhLXN0YXRlPXByZXNlbnRdIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0ta2V5LWJnLXByZXNlbnQpO1xuICBjb2xvcjogdmFyKC0ta2V5LWV2YWx1YXRlZC10ZXh0LWNvbG9yKTtcbn1cbi5LZXktbW9kdWxlX2tleV9fUnYtVnBbZGF0YS1zdGF0ZT1hYnNlbnRdIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0ta2V5LWJnLWFic2VudCk7XG4gIGNvbG9yOiB2YXIoLS1rZXktZXZhbHVhdGVkLXRleHQtY29sb3IpO1xufVxuLktleS1tb2R1bGVfa2V5X19Sdi1WcC5LZXktbW9kdWxlX2ZhZGVfXzM3SGs4IHtcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjFzIGVhc2UsIGNvbG9yIDAuMXMgZWFzZTtcbn1cblxuLktleS1tb2R1bGVfaGFsZl9fbGpzajgge1xuICBmbGV4OiAwLjU7XG59XG5cbi5LZXktbW9kdWxlX29uZV9fSEJPb3Uge1xuICBmbGV4OiAxO1xufVxuXG4uS2V5LW1vZHVsZV9vbmVBbmRBSGFsZl9fSzZKQlkge1xuICBmbGV4OiAxLjU7XG4gIGZvbnQtc2l6ZTogMTJweDtcbn0iCiAgKTsKCiAgZnVuY3Rpb24gUWkoZSkgewogICAgcmV0dXJuICLihpAiID09PSBlCiAgICAgID8gXy5jcmVhdGVFbGVtZW50KEpvLCB7IGljb246ICJiYWNrc3BhY2UiIH0pCiAgICAgIDogIuKGtSIgPT09IGUKICAgICAgPyAiZW50ZXIiCiAgICAgIDogImEiIDw9IGUgJiYgZSA8PSAieiIKICAgICAgPyBlCiAgICAgIDogdm9pZCAwOwogIH0KCiAgZnVuY3Rpb24gJGkoZSkgewogICAgdmFyIHQgPSBlLnZhbHVlLAogICAgICBuID0gZS5ldmFsdWF0aW9uLAogICAgICBhID0gS2koXy51c2VTdGF0ZSghMSksIDIpLAogICAgICBvID0gYVswXSwKICAgICAgciA9IGFbMV0sCiAgICAgIGUgPSBRaSh0KTsKICAgIHJldHVybiAoCiAgICAgIF8udXNlRWZmZWN0KAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIG4gJiYgcighMCk7CiAgICAgICAgfSwKICAgICAgICBbbl0KICAgICAgKSwKICAgICAgZQogICAgICAgID8gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAiYnV0dG9uIiwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICAgICJkYXRhLWtleSI6IHQsCiAgICAgICAgICAgICAgImRhdGEtc3RhdGUiOiBuLAogICAgICAgICAgICAgIGNsYXNzTmFtZTogcCgKICAgICAgICAgICAgICAgIFppLmtleSwKICAgICAgICAgICAgICAgIChYaSgoYSA9IHt9KSwgWmkub25lQW5kQUhhbGYsICLihpAiID09PSB0IHx8ICLihrUiID09PSB0KSwKICAgICAgICAgICAgICAgIFhpKGEsIFppLmZhZGUsIG8pLAogICAgICAgICAgICAgICAgYSkKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIG9uVHJhbnNpdGlvbkVuZDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHIoITEpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGUKICAgICAgICAgICkKICAgICAgICA6IF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgewogICAgICAgICAgICAiZGF0YS10ZXN0aWQiOiAic3BhY2VyIiwKICAgICAgICAgICAgY2xhc3NOYW1lOiAxID09PSB0Lmxlbmd0aCA/IFppLmhhbGYgOiBaaS5vbmUsCiAgICAgICAgICB9KQogICAgKTsKICB9CgogIHZhciBlbCA9IHsKICAgIGtleWJvYXJkOiAiS2V5Ym9hcmQtbW9kdWxlX2tleWJvYXJkX18xSFNubiIsCiAgICByb3c6ICJLZXlib2FyZC1tb2R1bGVfcm93X19ZV2U1dyIsCiAgfTsKICBrKAogICAgIi5LZXlib2FyZC1tb2R1bGVfa2V5Ym9hcmRfXzFIU25uIHtcbiAgaGVpZ2h0OiB2YXIoLS1rZXlib2FyZC1oZWlnaHQpO1xuICBtYXJnaW46IDAgOHB4O1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xufVxuXG4uS2V5Ym9hcmQtbW9kdWxlX3Jvd19fWVdlNXcge1xuICBkaXNwbGF5OiBmbGV4O1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luOiAwIGF1dG8gOHB4O1xuICAvKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NjE2NzYwNC9pb3MtaHRtbC1kaXNhYmxlLWRvdWJsZS10YXAtdG8tem9vbSAqL1xuICB0b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjtcbn0iCiAgKTsKICB2YXIgdGwgPSBbCiAgICBbInEiLCAidyIsICJlIiwgInIiLCAidCIsICJ5IiwgInUiLCAiaSIsICJvIiwgInAiXSwKICAgIFsiLSIsICJhIiwgInMiLCAiZCIsICJmIiwgImciLCAiaCIsICJqIiwgImsiLCAibCIsICItIl0sCiAgICBbIuKGtSIsICJ6IiwgIngiLCAiYyIsICJ2IiwgImIiLCAibiIsICJtIiwgIuKGkCJdLAogIF07CgogIGZ1bmN0aW9uIG5sKCkgewogICAgZnVuY3Rpb24gYShlKSB7CiAgICAgICLihpAiID09PSBlIHx8ICJCYWNrc3BhY2UiID09PSBlCiAgICAgICAgPyBuKHhhKCkpCiAgICAgICAgOiAi4oa1IiA9PT0gZSB8fCAiRW50ZXIiID09PSBlCiAgICAgICAgPyBuKFNhKCkpCiAgICAgICAgOiBTZS5pbmNsdWRlcyhlLnRvTG93ZXJDYXNlKCkpICYmIG4odmEoZS50b0xvd2VyQ2FzZSgpKSk7CiAgICB9CgogICAgdmFyIHQgPSBnLnVzZVJlZihudWxsKSwKICAgICAgbiA9IFQoKSwKICAgICAgbyA9IFAoZ2EpOwogICAgcmV0dXJuICgKICAgICAgZy51c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGUoZSkgewogICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAhMCAhPT0gZS5yZXBlYXQgJiYKICAgICAgICAgICAgKCh0ID0gZS5rZXkpLAogICAgICAgICAgICAobiA9IGUubWV0YUtleSksCiAgICAgICAgICAgIChlID0gZS5jdHJsS2V5KSwKICAgICAgICAgICAgbiB8fAogICAgICAgICAgICAgIGUgfHwKICAgICAgICAgICAgICAoIVNlLmluY2x1ZGVzKHQudG9Mb3dlckNhc2UoKSkgJiYKICAgICAgICAgICAgICAgICJCYWNrc3BhY2UiICE9PSB0ICYmCiAgICAgICAgICAgICAgICAiRW50ZXIiICE9PSB0KSB8fAogICAgICAgICAgICAgIGEodCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgZSksCiAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGUpOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0sIFtdKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsKICAgICAgICAgIGNsYXNzTmFtZTogZWwua2V5Ym9hcmQsCiAgICAgICAgICByZWY6IHQsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlID0gZS50YXJnZXQuY2xvc2VzdCgiYnV0dG9uIik7CiAgICAgICAgICAgIGUgJiYKICAgICAgICAgICAgICB0LmN1cnJlbnQgJiYKICAgICAgICAgICAgICB0LmN1cnJlbnQuY29udGFpbnMoZSkgJiYKICAgICAgICAgICAgICB2b2lkIDAgIT09IGUuZGF0YXNldC5rZXkgJiYKICAgICAgICAgICAgICBhKGUuZGF0YXNldC5rZXkpOwogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHRsLm1hcChmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBlbC5yb3csIGtleTogbiB9LAogICAgICAgICAgICBlLm1hcChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoJGksIHsKICAgICAgICAgICAgICAgIGtleTogIiIuY29uY2F0KGUsICItIikuY29uY2F0KG4sICItIikuY29uY2F0KHQpLAogICAgICAgICAgICAgICAgdmFsdWU6IGUsCiAgICAgICAgICAgICAgICBldmFsdWF0aW9uOiBvW2VdLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9KQogICAgICApCiAgICApOwogIH0KCiAgZnVuY3Rpb24gYWwoZSwgdCkgewogICAgcmV0dXJuICgKICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiBlOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbiA9CiAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgIDogKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdKSB8fAogICAgICAgICAgICAgIGVbIkBAaXRlcmF0b3IiXTsKICAgICAgICBpZiAobnVsbCAhPSBuKSB7CiAgICAgICAgICB2YXIgYSwKICAgICAgICAgICAgbywKICAgICAgICAgICAgciA9IFtdLAogICAgICAgICAgICBzID0gITAsCiAgICAgICAgICAgIGkgPSAhMTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgbiA9IG4uY2FsbChlKTsKICAgICAgICAgICAgICAhKHMgPSAoYSA9IG4ubmV4dCgpKS5kb25lKSAmJgogICAgICAgICAgICAgIChyLnB1c2goYS52YWx1ZSksICF0IHx8IHIubGVuZ3RoICE9PSB0KTsKICAgICAgICAgICAgICBzID0gITAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKGkgPSAhMCksIChvID0gZSk7CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHMgfHwgbnVsbCA9PSBuLnJldHVybiB8fCBuLnJldHVybigpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIGlmIChpKSB0aHJvdyBvOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgIH0pKGUsIHQpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBvbChlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IG9sKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIgogICAgICAgICk7CiAgICAgIH0pKCkKICAgICk7CiAgfQoKICBmdW5jdGlvbiBvbChlLCB0KSB7CiAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICBmb3IgKHZhciBuID0gMCwgYSA9IG5ldyBBcnJheSh0KTsgbiA8IHQ7IG4rKykgYVtuXSA9IGVbbl07CiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIHJsKGUpIHsKICAgIHZhciB0ID0gZS5kaXNtaXNzSWNvbiwKICAgICAgbiA9IChlID0gYWwoCiAgICAgICAgXy51c2VTdGF0ZSgKICAgICAgICAgIChudWxsID09PSAobiA9IHdpbmRvdy5uYXZpZ2F0b3IpIHx8IHZvaWQgMCA9PT0gbgogICAgICAgICAgICA/IHZvaWQgMAogICAgICAgICAgICA6IG4ub25MaW5lKSB8fCAhMQogICAgICAgICksCiAgICAgICAgMgogICAgICApKVswXSwKICAgICAgYSA9IGVbMV07CiAgICByZXR1cm4gKAogICAgICBfLnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gZSgpIHsKICAgICAgICAgIHJldHVybiBhKCEwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICByZXR1cm4gYSghMSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gKAogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9ubGluZSIsIGUpLAogICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9mZmxpbmUiLCB0KSwKICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm9ubGluZSIsIGUpLAogICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJvZmZsaW5lIiwgdCk7CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfSwgW10pLAogICAgICAoZSA9IHAoInB6LW9mZmxpbmUtdGlja2VyIiwgeyAiaXMtb2ZmbGluZSI6ICFuIH0pKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsKICAgICAgICAgIGNsYXNzTmFtZTogZSwKICAgICAgICAgICJhcmlhLWhpZGRlbiI6IG4sCiAgICAgICAgfSwKICAgICAgICAiWW91J3JlIG9mZmxpbmUhIFByb2dyZXNzIG1heSBub3QgYmUgc2F2ZWQuIiwKICAgICAgICB0ICYmCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICJzcGFuIiwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHJvbGU6ICJidXR0b24iLAogICAgICAgICAgICAgIGNsYXNzTmFtZTogIm9mZmxpbmUtdGlja2VyLWRpc21pc3MiLAogICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhKCEwKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB0CiAgICAgICAgICApCiAgICAgICkKICAgICk7CiAgfQoKICB2YXIgc2wgPSAiQXBwLW1vZHVsZV9nYW1lX19OU2MtSiI7CiAgaygKICAgICIuQXBwLW1vZHVsZV9nYW1lX19OU2MtSiB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXgtd2lkdGg6IHZhcigtLWdhbWUtbWF4LXdpZHRoKTtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIGhlaWdodDogY2FsYygxMDAlIC0gdmFyKC0taGVhZGVyLWhlaWdodCkpO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4ucHotb2ZmbGluZS10aWNrZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHdpZHRoOiAxMDAlO1xuICB6LWluZGV4OiAyO1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cbi5wei1vZmZsaW5lLXRpY2tlciBzdmcgcGF0aCB7XG4gIGZpbGw6IHZhcigtLXdoaXRlKTtcbn0iCiAgKTsKICB2YXIgaWwgPSB7IGJ1cmdlclN2ZzogIk5hdkljb24tbW9kdWxlX2J1cmdlclN2Z19fV0toMEEiIH07CgogIGZ1bmN0aW9uIGxsKCkgewogICAgcmV0dXJuIF8uY3JlYXRlRWxlbWVudCgKICAgICAgInN2ZyIsCiAgICAgIHsKICAgICAgICBjbGFzc05hbWU6IGlsLmJ1cmdlclN2ZywKICAgICAgICB3aWR0aDogIjIwIiwKICAgICAgICBoZWlnaHQ6ICIxNyIsCiAgICAgICAgdmlld0JveDogIjAgMCAyNCAxNyIsCiAgICAgICAgZmlsbDogIm5vbmUiLAogICAgICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgICB9LAogICAgICBfLmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICAgICAgeDogIjAuMTcyOTc0IiwKICAgICAgICB3aWR0aDogIjIwIiwKICAgICAgICBoZWlnaHQ6ICIzIiwKICAgICAgICByeDogIjEuNSIsCiAgICAgICAgZmlsbDogInZhcigtLWNvbG9yLXRvbmUtMSkiLAogICAgICB9KSwKICAgICAgXy5jcmVhdGVFbGVtZW50KCJyZWN0IiwgewogICAgICAgIHg6ICIwLjE3Mjk3NCIsCiAgICAgICAgeTogIjciLAogICAgICAgIHdpZHRoOiAiMjAiLAogICAgICAgIGhlaWdodDogIjMiLAogICAgICAgIHJ4OiAiMS41IiwKICAgICAgICBmaWxsOiAidmFyKC0tY29sb3ItdG9uZS0xKSIsCiAgICAgIH0pLAogICAgICBfLmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICAgICAgeDogIjAuMTcyOTc0IiwKICAgICAgICB5OiAiMTQiLAogICAgICAgIHdpZHRoOiAiMjAiLAogICAgICAgIGhlaWdodDogIjMiLAogICAgICAgIHJ4OiAiMS41IiwKICAgICAgICBmaWxsOiAidmFyKC0tY29sb3ItdG9uZS0xKSIsCiAgICAgIH0pCiAgICApOwogIH0KCiAgaygKICAgICIuTmF2SWNvbi1tb2R1bGVfYnVyZ2VyU3ZnX19XS2gwQSB7XG4gIHdpZHRoOiAyMHB4O1xufVxuXG5AbWVkaWEgKG1pbi13aWR0aDogMTAyNHB4KSB7XG4gIC5OYXZJY29uLW1vZHVsZV9idXJnZXJTdmdfX1dLaDBBIHtcbiAgICB3aWR0aDogMjRweDtcbiAgfVxufSIKICApOwogIHZhciBjbCA9IHsKICAgIGFwcEhlYWRlcjogIkFwcEhlYWRlci1tb2R1bGVfYXBwSGVhZGVyX18xRWh5diIsCiAgICBpY29uOiAiQXBwSGVhZGVyLW1vZHVsZV9pY29uX194N2I0NiIsCiAgICB0aXRsZTogIkFwcEhlYWRlci1tb2R1bGVfdGl0bGVfXzZzcXMtIiwKICAgIG1lbnVMZWZ0OiAiQXBwSGVhZGVyLW1vZHVsZV9tZW51TGVmdF9faUVyRE8iLAogICAgbWVudVJpZ2h0OiAiQXBwSGVhZGVyLW1vZHVsZV9tZW51UmlnaHRfX2pVZVluIiwKICAgIG5hdkJ1dHRvbjogIkFwcEhlYWRlci1tb2R1bGVfbmF2QnV0dG9uX19mQjVuZiIsCiAgfTsKCiAgZnVuY3Rpb24gdWwoZSkgewogICAgdmFyIHQgPSBlLmlzTG9hZGluZywKICAgICAgbiA9IFAoWWUpLAogICAgICBhID0gVCgpLAogICAgICBvID0gbm8oImF1dGgiKSwKICAgICAgciA9IFAoQXMpLAogICAgICBlID0gUChFZSksCiAgICAgIHMgPSBvIHx8IGUsCiAgICAgIGUgPSB7CiAgICAgICAgY29udGV4dDogbiB8fCB2b2lkIDAsCiAgICAgICAgZWxlbWVudE5hbWU6ICJ3b3JkbGUiLAogICAgICAgIG1vZHVsZUxhYmVsOiAiaW4tZ2FtZSIsCiAgICAgIH0sCiAgICAgIHQgPSAhIXIgfHwgdDsKICAgIHJldHVybiBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICJoZWFkZXIiLAogICAgICB7IGNsYXNzTmFtZTogcChjbC5hcHBIZWFkZXIsICJ3b3JkbGUtYXBwLWhlYWRlciIpIH0sCiAgICAgIF8uY3JlYXRlRWxlbWVudCgiZGl2IiwgeyBjbGFzc05hbWU6IGNsLnRpdGxlIH0sICJXb3JkbGUiKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICJkaXYiLAogICAgICAgIHsgY2xhc3NOYW1lOiBjbC5tZW51UmlnaHQgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAiYnV0dG9uIiwKICAgICAgICAgIHsKICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgIGlkOiAiaGVscC1idXR0b24iLAogICAgICAgICAgICBjbGFzc05hbWU6IGNsLmljb24sCiAgICAgICAgICAgICJhcmlhLWxhYmVsIjogIkhlbHAiLAogICAgICAgICAgICB0YWJJbmRleDogLTEsCiAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICB2LnRyYWNrQ2xpY2soewogICAgICAgICAgICAgICAgbmFtZTogIndvcmRsZSIsCiAgICAgICAgICAgICAgICBsYWJlbDogImhlbHAiLAogICAgICAgICAgICAgICAgY29udGV4dDogbiwKICAgICAgICAgICAgICAgIHVzZUJlYWNvbjogITAsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBhKChzID8gZWUgOiB0ZSkoImhlbHAiKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KEpvLCB7IGljb246ICJoZWxwIiB9KQogICAgICAgICksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImJ1dHRvbiIsCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBpZDogInNhdmUtYnV0dG9uIiwKICAgICAgICAgICAgY2xhc3NOYW1lOiBjbC5pY29uLAogICAgICAgICAgICAiYXJpYS1sYWJlbCI6ICJzYXZlIiwKICAgICAgICAgICAgdGFiSW5kZXg6IC0xLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdi50cmFja0NsaWNrKHsKICAgICAgICAgICAgICAgIG5hbWU6ICJ3b3JkbGUiLAogICAgICAgICAgICAgICAgbGFiZWw6ICJzYXZlIiwKICAgICAgICAgICAgICAgIGNvbnRleHQ6IG4sCiAgICAgICAgICAgICAgICB1c2VCZWFjb246ICEwLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgYSgocyA/IGVlIDogdGUpKCJzYXZlIikpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaXNhYmxlZDogdCwKICAgICAgICAgIH0sCiAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoSm8sIHsgaWNvbjogInNhdmUiLCBkaXNhYmxlZDogdCB9KQogICAgICAgICksCiAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImJ1dHRvbiIsCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICJidXR0b24iLAogICAgICAgICAgICBpZDogInN0YXRpc3RpY3MtYnV0dG9uIiwKICAgICAgICAgICAgY2xhc3NOYW1lOiBjbC5pY29uLAogICAgICAgICAgICAiYXJpYS1sYWJlbCI6ICJTdGF0aXN0aWNzIiwKICAgICAgICAgICAgdGFiSW5kZXg6IC0xLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEoZWUoInN0YXRzIiwgITApKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlzYWJsZWQ6IHQsCiAgICAgICAgICB9LAogICAgICAgICAgXy5jcmVhdGVFbGVtZW50KEpvLCB7IGljb246ICJzdGF0aXN0aWNzIiwgZGlzYWJsZWQ6IHQgfSkKICAgICAgICApLAogICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICJidXR0b24iLAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAiYnV0dG9uIiwKICAgICAgICAgICAgaWQ6ICJzZXR0aW5ncy1idXR0b24iLAogICAgICAgICAgICBjbGFzc05hbWU6IGNsLmljb24sCiAgICAgICAgICAgICJhcmlhLWxhYmVsIjogIlNldHRpbmdzIiwKICAgICAgICAgICAgdGFiSW5kZXg6IC0xLAogICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdi50cmFja0NsaWNrKHsKICAgICAgICAgICAgICAgIG5hbWU6ICJ3b3JkbGUiLAogICAgICAgICAgICAgICAgbGFiZWw6ICJzZXR0aW5ncyIsCiAgICAgICAgICAgICAgICBjb250ZXh0OiBuLAogICAgICAgICAgICAgICAgdXNlQmVhY29uOiAhMCwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGEoKHMgPyBlZSA6IHRlKSgic2V0dGluZ3MiKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRpc2FibGVkOiB0LAogICAgICAgICAgfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChKbywgeyBpY29uOiAic2V0dGluZ3MiLCBkaXNhYmxlZDogdCB9KQogICAgICAgICkKICAgICAgKQogICAgKTsKICB9CgogIGsoCiAgICAnLkFwcEhlYWRlci1tb2R1bGVfYXBwSGVhZGVyX18xRWh5diB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgZmxleC13cmFwOiBub3dyYXA7XG4gIHBhZGRpbmc6IDBweCB2YXIoLS1oZWFkZXItcGFkZGluZy14KTtcbiAgaGVpZ2h0OiB2YXIoLS1oZWFkZXItaGVpZ2h0KTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLXRvbmUtMSk7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1jb2xvci10b25lLTQpO1xufVxuLkFwcEhlYWRlci1tb2R1bGVfYXBwSGVhZGVyX18xRWh5diBidXR0b24uQXBwSGVhZGVyLW1vZHVsZV9pY29uX194N2I0NiB7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGJvcmRlcjogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBwYWRkaW5nOiAwIDRweDtcbn1cbi5BcHBIZWFkZXItbW9kdWxlX2FwcEhlYWRlcl9fMUVoeXYgYnV0dG9uLkFwcEhlYWRlci1tb2R1bGVfaWNvbl9feDdiNDY6bGFzdC1jaGlsZCB7XG4gIHBhZGRpbmctcmlnaHQ6IDA7XG59XG5cbi5BcHBIZWFkZXItbW9kdWxlX2FwcEhlYWRlcl9fMUVoeXYgLkFwcEhlYWRlci1tb2R1bGVfdGl0bGVfXzZzcXMtIHtcbiAgZmxleC1ncm93OiAyO1xuICBmb250LWZhbWlseTogIm55dC1rYXJuYWtjb25kZW5zZWQiO1xuICBmb250LXdlaWdodDogNzAwO1xuICBmb250LXNpemU6IDI4cHg7XG4gIGxldHRlci1zcGFjaW5nOiAwLjAxZW07XG4gIHRleHQtYWxpZ246IGxlZnQ7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uQXBwSGVhZGVyLW1vZHVsZV9tZW51TGVmdF9faUVyRE8ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbn1cblxuLkFwcEhlYWRlci1tb2R1bGVfbWVudVJpZ2h0X19qVWVZbiB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG59XG5cbiNBcHBIZWFkZXItbW9kdWxlX25hdkJ1dHRvbl9fZkI1bmYge1xuICBwYWRkaW5nLXRvcDogMnB4O1xuICBwYWRkaW5nLWxlZnQ6IDBweDtcbiAgcGFkZGluZy1yaWdodDogMTNweDtcbn1cblxuQG1lZGlhIChtaW4td2lkdGg6IDEwMjRweCkge1xuICAuQXBwSGVhZGVyLW1vZHVsZV9hcHBIZWFkZXJfXzFFaHl2IC5BcHBIZWFkZXItbW9kdWxlX3RpdGxlX182c3FzLSB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMzZweDtcbiAgfVxuICAuQXBwSGVhZGVyLW1vZHVsZV9hcHBIZWFkZXJfXzFFaHl2IGJ1dHRvbi5BcHBIZWFkZXItbW9kdWxlX2ljb25fX3g3YjQ2IHtcbiAgICBwYWRkaW5nOiAwIDZweDtcbiAgfVxufVxuQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XG4gIC5BcHBIZWFkZXItbW9kdWxlX2FwcEhlYWRlcl9fMUVoeXYgLkFwcEhlYWRlci1tb2R1bGVfdGl0bGVfXzZzcXMtIHtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZm9udC1zaXplOiAzMnB4O1xuICB9XG4gIC5BcHBIZWFkZXItbW9kdWxlX2FwcEhlYWRlcl9fMUVoeXYgLkFwcEhlYWRlci1tb2R1bGVfbWVudUxlZnRfX2lFckRPLFxuLkFwcEhlYWRlci1tb2R1bGVfYXBwSGVhZGVyX18xRWh5diAuQXBwSGVhZGVyLW1vZHVsZV9tZW51UmlnaHRfX2pVZVluIHtcbiAgICB3aWR0aDogMTIwcHg7XG4gIH1cbn1cbkBtZWRpYSAobWluLXdpZHRoOiA3NjhweCkgYW5kIChtaW4td2lkdGg6IDEwMjRweCkge1xuICAuQXBwSGVhZGVyLW1vZHVsZV9hcHBIZWFkZXJfXzFFaHl2IC5BcHBIZWFkZXItbW9kdWxlX3RpdGxlX182c3FzLSB7XG4gICAgZm9udC1zaXplOiAzNnB4O1xuICB9XG59XG5AbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHtcbiAgI0FwcEhlYWRlci1tb2R1bGVfbmF2QnV0dG9uX19mQjVuZiB7XG4gICAgcGFkZGluZy10b3A6IDJweDtcbiAgICBwYWRkaW5nLWxlZnQ6IDBweDtcbiAgfVxufScKICApOwoKICBmdW5jdGlvbiBkbChlKSB7CiAgICB2YXIgdCwKICAgICAgbiwKICAgICAgYSA9IGUuaGFzTG9hZGVkLAogICAgICBvID0gUChFZSksCiAgICAgIHIgPSBQKGplKSwKICAgICAgcyA9IChubygiYXV0aCIpIHx8IG8pICYmIHI7CiAgICAodCA9IGEpLAogICAgICAobiA9IFQoKSksCiAgICAgIChlID0gUChVZSkpLAogICAgICAociA9IFAoQXMpKSwKICAgICAgU28oCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIG4oZWUoImhlbHAiKSk7CiAgICAgICAgfSwKICAgICAgICAhZSAmJiB0ICYmICFyID8gMTAwIDogbnVsbAogICAgICApOwogICAgcyA9IF8uY3JlYXRlRWxlbWVudCgKICAgICAgImRpdiIsCiAgICAgIHsKICAgICAgICBjbGFzc05hbWU6IHNsLAogICAgICAgIGlkOiAid29yZGxlLWFwcC1nYW1lIiwKICAgICAgfSwKICAgICAgbyAmJgogICAgICAgIF8uY3JlYXRlRWxlbWVudChybCwgewogICAgICAgICAgZGlzbWlzc0ljb246IF8uY3JlYXRlRWxlbWVudChKbywgeyBpY29uOiAiY2xvc2UiIH0pLAogICAgICAgIH0pLAogICAgICBzICYmIF8uY3JlYXRlRWxlbWVudChVaSwgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudChHbywgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudChubCwgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudChhaSwgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudChIcywgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudChJaSwgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudChSaSwgbnVsbCksCiAgICAgIF8uY3JlYXRlRWxlbWVudChGaSwgbnVsbCkKICAgICk7CiAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICBfLkZyYWdtZW50LAogICAgICBudWxsLAogICAgICBfLmNyZWF0ZUVsZW1lbnQodWwsIHsgaXNMb2FkaW5nOiAhYSB9KSwKICAgICAgYSA/IHMgOiBfLmNyZWF0ZUVsZW1lbnQobnIsIG51bGwpCiAgICApOwogIH0KCiAgdmFyIG1sID0gewogICAgd2VsY29tZTogewogICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZnVuY3Rpb24gdChlKSB7CiAgICAgICAgICB2LnRyYWNrQ2xpY2soeyBuYW1lOiAid29yZGxlIiwgY29udGV4dDogIiIuY29uY2F0KHUpLCBsYWJlbDogZSB9KTsKICAgICAgICB9CgogICAgICAgIHZhciBuLAogICAgICAgICAgYSwKICAgICAgICAgIG8sCiAgICAgICAgICByLAogICAgICAgICAgcyA9IGUudHJhbnNpdGlvbiwKICAgICAgICAgIGkgPSBUKCksCiAgICAgICAgICBsID0gUChGZSksCiAgICAgICAgICBjID0gISFQKEFlKSwKICAgICAgICAgIHUgPSBQKFllKSwKICAgICAgICAgIGQgPSAhIVAoQ2UpLAogICAgICAgICAgbSA9IDAgPCBsLAogICAgICAgICAgcCA9CiAgICAgICAgICAgICgoYSA9IG0pLAogICAgICAgICAgICAobiA9IGMpLAogICAgICAgICAgICAoeSA9IFAoR2UpKSwKICAgICAgICAgICAgKG8gPSBQKGZvKSksCiAgICAgICAgICAgIChnID0gUChGZSkpLAogICAgICAgICAgICBhICYmICJJTl9QUk9HUkVTUyIgPT09IHkKICAgICAgICAgICAgICA/ICJZb3XKvHJlIG9uIGF0dGVtcHQgIi5jb25jYXQoZyArIDEsICIgb3V0IG9mIDYuIEtlZXAgaXQgdXAhIikKICAgICAgICAgICAgICA6ICJXSU4iID09PSB5CiAgICAgICAgICAgICAgPyAiR3JlYXQgam9iIG9uIHRvZGF5yrxzIHB1enpsZSEgQ2hlY2sgb3V0IHlvdXIgcHJvZ3Jlc3MuIgogICAgICAgICAgICAgIDogIkZBSUwiID09PSB5CiAgICAgICAgICAgICAgPyAiVG9tb3Jyb3figJlzIGEgbmV3IGRheSwgd2l0aCBhIG5ldyBwdXp6bGUuIFNlZSB5b3UgdGhlbi4iCiAgICAgICAgICAgICAgOiBuICYmICFhICYmIDAgPCBvCiAgICAgICAgICAgICAgPyBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAgIF8uRnJhZ21lbnQsCiAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICAgICJHbyBhaGVhZCwgYWRkIGFub3RoZXIgZGF5IHRvIHlvdXIiLAogICAgICAgICAgICAgICAgICAiICIsCiAgICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgic3BhbiIsIHsgY2xhc3NOYW1lOiBjby5ib2xkIH0sIG8sICIgZGF5IiksCiAgICAgICAgICAgICAgICAgICIgc3RyZWFrLiIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICA6IF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICAgXy5GcmFnbWVudCwKICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgIkdldCA2IGNoYW5jZXMgdG8gZ3Vlc3MgYSIsCiAgICAgICAgICAgICAgICAgICIgIiwKICAgICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KCJzcGFuIiwgeyBjbGFzc05hbWU6IGNvLm5vV3JhcCB9LCAiNS1sZXR0ZXIiKSwKICAgICAgICAgICAgICAgICAgIiB3b3JkLiIKICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgZSA9CiAgICAgICAgICAgICgoayA9IG0pLAogICAgICAgICAgICAociA9IFAoR2UpKSwKICAgICAgICAgICAgayA/ICgiSU5fUFJPR1JFU1MiICE9PSByID8gIkhpIFdvcmRsZXIiIDogIldlbGNvbWUgQmFjayIpIDogIiIpLAogICAgICAgICAgeSA9CiAgICAgICAgICAgICgobCA9IG0pLAogICAgICAgICAgICAoZyA9IFAoR2UpKSwKICAgICAgICAgICAgbCA/ICgiSU5fUFJPR1JFU1MiID09PSBnID8gIkNvbnRpbnVlIiA6ICJTZWUgU3RhdHMiKSA6ICJQbGF5IiksCiAgICAgICAgICBnID0KICAgICAgICAgICAgKChuID0gbSksCiAgICAgICAgICAgIChhID0gYyksCiAgICAgICAgICAgIChvID0gUChmbykpLAogICAgICAgICAgICAoayA9IFAoWWUpKSwKICAgICAgICAgICAgKHIgPSBQKEdlKSksCiAgICAgICAgICAgIChrID0gKGcgPSBsID0gIiIpLmNvbmNhdChrKSksCiAgICAgICAgICAgIChnID0gYSA/ICgobCA9ICIiLmNvbmNhdChvKSksICJ3ZWxjb21lLW1vZGFsIikgOiAic29mdHJlZ2l3YWxsIiksCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBsYWJlbDogbCwKICAgICAgICAgICAgICBuYW1lOiAoZyA9IG4KICAgICAgICAgICAgICAgID8gIklOX1BST0dSRVNTIiAhPT0gcgogICAgICAgICAgICAgICAgICA/ICJ3ZWxjb21lLXNlZS1zdGF0cy1tb2RhbCIKICAgICAgICAgICAgICAgICAgOiAid2VsY29tZS1iYWNrLW1vZGFsIgogICAgICAgICAgICAgICAgOiBnKSwKICAgICAgICAgICAgICByZWdpb246ICJ3b3JkbGUtd2VsY29tZSIsCiAgICAgICAgICAgICAgY29udGV4dDogaywKICAgICAgICAgICAgfSksCiAgICAgICAgICBmID0gZy5uYW1lLAogICAgICAgICAgaCA9IGcucmVnaW9uLAogICAgICAgICAgYiA9IGcubGFiZWwsCiAgICAgICAgICB3ID0gZy5jb250ZXh0LAogICAgICAgICAgayA9IHsKICAgICAgICAgICAgY29udGV4dDogdSB8fCB2b2lkIDAsCiAgICAgICAgICAgIGVsZW1lbnROYW1lOiAid29yZGxlIiwKICAgICAgICAgICAgbW9kdWxlTGFiZWw6ICJ3ZWxjb21lIiwKICAgICAgICAgIH07CiAgICAgICAgXy51c2VFZmZlY3QoZnVuY3Rpb24gKCkgewogICAgICAgICAgdi50cmFja0ltcHJlc3Npb24oZiwgaCwgYiwgdyk7CiAgICAgICAgfSwgW10pOwogICAgICAgIHZhciBnID0gd2luZG93LmlzSHlicmlkV2ViVmlldyAmJiAhZCAmJiAhbTsKICAgICAgICByZXR1cm4gXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgImRpdiIsCiAgICAgICAgICB7IGNsYXNzTmFtZTogY28uY29udGVudFdlbGNvbWUgfSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgc28sCiAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY28uYmFjayB9LAogICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChvbywgeyB0cmFja0RhdGE6IGsgfSkKICAgICAgICAgICAgKQogICAgICAgICAgKSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjby5jb250ZW50V2VsY29tZUNvbnRhaW5lciB9LAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoa28sIHsgc21hbGw6IG0gfSksCiAgICAgICAgICAgIGUgJiYgXy5jcmVhdGVFbGVtZW50KCJkaXYiLCB7IGNsYXNzTmFtZTogY28udGl0bGUgfSwgZSksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChfbywgbnVsbCwgcCksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCh4bywgewogICAgICAgICAgICAgIGJ1dHRvbnM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaGlkZTogbSB8fCBkLAogICAgICAgICAgICAgICAgICB0ZXh0OiAiSG93IHRvIHBsYXkiLAogICAgICAgICAgICAgICAgICBzZWNvbmRhcnk6ICEwLAogICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcygiZ2FtZSIpLCBpKGVlKCJoZWxwIikpLCB0KCJoZWxwLXdlbGNvbWUiKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGhpZGU6IG0gfHwgYywKICAgICAgICAgICAgICAgICAgdGV4dDogIkxvZyBpbiIsCiAgICAgICAgICAgICAgICAgIHNlY29uZGFyeTogITAsCiAgICAgICAgICAgICAgICAgIGlzTG9naW46ICEwLAogICAgICAgICAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgdCgibG9nLWluLXdlbGNvbWUiKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRleHQ6IHksCiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBzKCJnYW1lIiksIG0gJiYgdCgiY29udGludWUiKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCh2bywgeyBkYXlPZmZzZXQ6IHUgfSkKICAgICAgICAgICksCiAgICAgICAgICBnICYmCiAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudChsbywgewogICAgICAgICAgICAgIGNsb3NlTW9tZW50OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcygiZ2FtZSIpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgdHJhY2tMaW5rOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCgid2VsY29tZS1tb3JlLWluZm8iKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICk7CiAgICAgIH0sCiAgICAgIGFuaW1hdGVPdXQ6ICEwLAogICAgfSwKICAgIGxvYWRpbmc6IHsKICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gZS5oYXNMb2FkZWQsCiAgICAgICAgICBuID0gZS50cmFuc2l0aW9uLAogICAgICAgICAgYSA9IHpvKF8udXNlU3RhdGUoITEpLCAyKSwKICAgICAgICAgIGUgPSBhWzBdLAogICAgICAgICAgbyA9IGFbMV07CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIFNvKAogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8oITApOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0ID8gbnVsbCA6IDMwMAogICAgICAgICAgKSwKICAgICAgICAgIF8udXNlRWZmZWN0KAogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdCAmJiBuKCJ3ZWxjb21lIik7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFt0XQogICAgICAgICAgKSwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgImRpdiIsCiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjby5jb250ZW50V2VsY29tZSB9LAogICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgc28sCiAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjby5iYWNrIH0sCiAgICAgICAgICAgICAgICBfLmNyZWF0ZUVsZW1lbnQob28sIHsKICAgICAgICAgICAgICAgICAgdHJhY2tEYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgZWxlbWVudE5hbWU6ICJ3b3JkbGUiLAogICAgICAgICAgICAgICAgICAgIG1vZHVsZUxhYmVsOiAibG9hZGluZyIsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjby5jb250ZW50V2VsY29tZUNvbnRhaW5lciB9LAogICAgICAgICAgICAgIGUgJiYKICAgICAgICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCgKICAgICAgICAgICAgICAgICAgXy5GcmFnbWVudCwKICAgICAgICAgICAgICAgICAgbnVsbCwKICAgICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KGtvLCB7IHNtYWxsOiAhMCB9KSwKICAgICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgICAgICAgICAgICAgICJkaXYiLAogICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjby5zcGlubmVyIH0sCiAgICAgICAgICAgICAgICAgICAgXy5jcmVhdGVFbGVtZW50KGpvLCBudWxsKQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgICkKICAgICAgICApOwogICAgICB9LAogICAgfSwKICAgIGdhbWU6IHsgY29tcG9uZW50OiBkbCB9LAogIH07CgogIGZ1bmN0aW9uIHBsKCkgewogICAgdmFyIG4sCiAgICAgIGEsCiAgICAgIG8sCiAgICAgIHQsCiAgICAgIHIsCiAgICAgIGUgPSAhIVAoQWUpLAogICAgICBzID0gUChFZSksCiAgICAgIGkgPSBQKE9lKSwKICAgICAgbCA9IFAoemUpLAogICAgICBjID0gVCgpLAogICAgICB1ID0gTmEoKSwKICAgICAgZCA9IHUuaGFzQWJyYUxvYWRlZCwKICAgICAgbSA9IHUuZ2V0VmFyaWFudCwKICAgICAgcCA9ICIxX0VuYWJsZUF1dGgiID09PSBtKCJHQU1FU193b3JkbGVBdXRoXzA0MjciKSB8fCBzLAogICAgICB5ID0gIjFfRW5hYmxlU2VydmVyU29sdXRpb24iID09PSBtKCJHQU1FU193b3JkbGVTb2x1dGlvbkJFXzA1MTAiKSwKICAgICAgdSA9IG5vKCJ3ZWxjb21lTW9tZW50IikgfHwgd2luZG93LmlzSHlicmlkV2ViVmlldzsKICAgIHJldHVybiAoCiAgICAgIF8udXNlRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZSA9IHcoKTsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwoZSk7CiAgICAgICAgfTsKICAgICAgfSwgW10pLAogICAgICAobiA9IFAoQ3MpKSwKICAgICAgKGEgPSBQKE9zKSksCiAgICAgIChvID0gVCgpKSwKICAgICAgZy51c2VFZmZlY3QoCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHdpbmRvdy5pc0h5YnJpZFdlYlZpZXcgJiYgd2luZG93Lk5hdGl2ZUJyaWRnZSkgewogICAgICAgICAgICB2YXIgdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgbgogICAgICAgICAgICAgICAgPyAobyhuZSgpKSwgZS5yZXNwb25kV2l0aCh7IGdhbWVzT25OYXZpZ2F0ZUJhY2s6ICEwIH0pKQogICAgICAgICAgICAgICAgOiBhCiAgICAgICAgICAgICAgICA/IChvKGFlKCkpLCBlLnJlc3BvbmRXaXRoKHsgZ2FtZXNPbk5hdmlnYXRlQmFjazogITAgfSkpCiAgICAgICAgICAgICAgICA6IGUucmVzcG9uZFdpdGgoeyBnYW1lc09uTmF2aWdhdGVCYWNrOiAhMSB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB3aW5kb3cuTmF0aXZlQnJpZGdlLmFkZEV2ZW50TGlzdGVuZXIoImdhbWVzT25OYXZpZ2F0ZUJhY2siLCB0KSwKICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgIG51bGwgIT09IChlID0gd2luZG93Lk5hdGl2ZUJyaWRnZSkgJiYKICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBlICYmCiAgICAgICAgICAgICAgICAgIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZ2FtZXNPbk5hdmlnYXRlQmFjayIsIHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFtuLCBhLCBvXQogICAgICApLAogICAgICBfLnVzZUVmZmVjdCgKICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZSwgdCwgbiwgYTsKICAgICAgICAgICFsICYmCiAgICAgICAgICAgIGQgJiYKICAgICAgICAgICAgKChlID0KICAgICAgICAgICAgICAidHJ1ZSIgPT09CiAgICAgICAgICAgICAgKHQgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpKS5nZXQoIm1vb2dsZSIpKSwKICAgICAgICAgICAgKHQgPSAidHJ1ZSIgPT09IHQuZ2V0KCJzdWNjZXNzIikpLAogICAgICAgICAgICBjKAogICAgICAgICAgICAgICgodCA9IChlID0gewogICAgICAgICAgICAgICAgb3B0SW46ICghcCAmJiBlKSB8fCB0IHx8IHMsCiAgICAgICAgICAgICAgICBlbmFibGVTZXJ2ZXJTb2x1dGlvbjogeSwKICAgICAgICAgICAgICB9KS5vcHRJbiksCiAgICAgICAgICAgICAgKG4gPSB2b2lkIDAgIT09IHQgJiYgdCksCiAgICAgICAgICAgICAgKGUgPSBlLmVuYWJsZVNlcnZlclNvbHV0aW9uKSwKICAgICAgICAgICAgICAoYSA9IHZvaWQgMCAhPT0gZSAmJiBlKSwKICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgbiAmJiBlKHsgdHlwZTogQWEgfSk7CiAgICAgICAgICAgICAgICB2YXIgdCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWwogICAgICAgICAgICAgICAgICBlKFphKHsgZmV0Y2hGcm9tTW9vZ2xlOiAhMCwgb3B0SW46IG4gfSkpLAogICAgICAgICAgICAgICAgICBlKAogICAgICAgICAgICAgICAgICAgIFlhKHsKICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZVNlcnZlclNvbHV0aW9uOiBhLAogICAgICAgICAgICAgICAgICAgICAgdG9kYXk6IHQsCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIF0pCiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBlKGNhKCkpOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZSh1YSgpKSwKICAgICAgICAgICAgICAgICAgICAgIGUoX2EoeyB0b2RheTogdCB9KSksCiAgICAgICAgICAgICAgICAgICAgICBlKHsgdHlwZTogVmEsIHBheWxvYWQ6IHsgYXBwTG9hZGVkOiAhMCB9IH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICApKTsKICAgICAgICB9LAogICAgICAgIFtsLCBkXQogICAgICApLAogICAgICBfLnVzZUVmZmVjdCgKICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkICYmCiAgICAgICAgICAgIHAgJiYKICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAhcyAmJgogICAgICAgICAgICBjKAogICAgICAgICAgICAgIHNlKHsKICAgICAgICAgICAgICAgIHRleHQ6ICJZb3UgYXJlIG5vdyBsb2dnZWQgaW4gdG8geW91ciBUaW1lcyBBY2NvdW50LiIsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMmUzLAogICAgICAgICAgICAgICAgaXNTeXN0ZW06ICEwLAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBbcCwgZSwgcywgZF0KICAgICAgKSwKICAgICAgXy51c2VFZmZlY3QoCiAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgZCAmJgogICAgICAgICAgICBwICYmCiAgICAgICAgICAgIGUgJiYKICAgICAgICAgICAgaSAmJgogICAgICAgICAgICAoYygKICAgICAgICAgICAgICBzZSh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiWW91ciBzdGF0cyBoYXZlIGJlZW4gbGlua2VkIHRvIHlvdXIgYWNjb3VudC4iLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDJlMywKICAgICAgICAgICAgICAgIGlzU3lzdGVtOiAhMCwKICAgICAgICAgICAgICB9KQogICAgICAgICAgICApLAogICAgICAgICAgICBjKHsgdHlwZTogViB9KSwKICAgICAgICAgICAgYyh7CiAgICAgICAgICAgICAgdHlwZTogJCwKICAgICAgICAgICAgICBwYXlsb2FkOiB7CiAgICAgICAgICAgICAgICBuYW1lOiAic3RhdHMtc3VjY2Vzc2Z1bCIsCiAgICAgICAgICAgICAgICByZWdpb246ICJ3b3JkbGUtc3RhdHMtbGluayIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkpOwogICAgICAgIH0sCiAgICAgICAgW3AsIGksIGUsIGRdCiAgICAgICksCiAgICAgICh0ID0gUChJKSksCiAgICAgIChyID0gUChMKSksCiAgICAgIGcudXNlRWZmZWN0KAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpOwogICAgICAgICAgZSAmJgogICAgICAgICAgICAodCAmJiAhZS5jbGFzc0xpc3QuY29udGFpbnMoImRhcmsiKQogICAgICAgICAgICAgID8gZS5jbGFzc0xpc3QuYWRkKCJkYXJrIikKICAgICAgICAgICAgICA6IHQgfHwgZS5jbGFzc0xpc3QucmVtb3ZlKCJkYXJrIikpOwogICAgICAgIH0sCiAgICAgICAgW3RdCiAgICAgICksCiAgICAgIGcudXNlRWZmZWN0KAogICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiYm9keSIpOwogICAgICAgICAgZSAmJgogICAgICAgICAgICAociAmJiAhZS5jbGFzc0xpc3QuY29udGFpbnMoImNvbG9yYmxpbmQiKQogICAgICAgICAgICAgID8gZS5jbGFzc0xpc3QuYWRkKCJjb2xvcmJsaW5kIikKICAgICAgICAgICAgICA6IHIgfHwgZS5jbGFzc0xpc3QucmVtb3ZlKCJjb2xvcmJsaW5kIikpOwogICAgICAgIH0sCiAgICAgICAgW3JdCiAgICAgICksCiAgICAgIHUKICAgICAgICA/IF8uY3JlYXRlRWxlbWVudChDLCB7CiAgICAgICAgICAgIGhhc0xvYWRlZDogbCwKICAgICAgICAgICAgY29uZmlnOiBtbCwKICAgICAgICAgICAgaW5pdGlhbE1vbWVudDoKICAgICAgICAgICAgICAoKG0gPQogICAgICAgICAgICAgICAgZG9jdW1lbnQucmVmZXJyZXIuaW5jbHVkZXMoIm55dGltZXMuY29tIikgJiYKICAgICAgICAgICAgICAgICFkb2N1bWVudC5yZWZlcnJlci5pbmNsdWRlcygibXlhY2NvdW50IikpLAogICAgICAgICAgICAgICh1ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpKSwKICAgICAgICAgICAgICB3aW5kb3cuaXNIeWJyaWRXZWJWaWV3IHx8IG0gfHwgdS5nZXQoImZvcmNlV2VsY29tZU1vbWVudCIpCiAgICAgICAgICAgICAgICA/ICJsb2FkaW5nIgogICAgICAgICAgICAgICAgOiAiZ2FtZSIpLAogICAgICAgICAgfSkKICAgICAgICA6IF8uY3JlYXRlRWxlbWVudChkbCwgeyBoYXNMb2FkZWQ6IGwgfSkKICAgICk7CiAgfQoKICBmdW5jdGlvbiB5bCh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgYSA9IE9iamVjdC5rZXlzKHQpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICgobiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpLAogICAgICAgIGUgJiYKICAgICAgICAgIChuID0gbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgZSkuZW51bWVyYWJsZTsKICAgICAgICAgIH0pKSwKICAgICAgICBhLnB1c2guYXBwbHkoYSwgbikpLAogICAgICBhCiAgICApOwogIH0KCiAgZnVuY3Rpb24gZ2woYSkgewogICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHsKICAgICAgdmFyIG8gPSBudWxsICE9IGFyZ3VtZW50c1tlXSA/IGFyZ3VtZW50c1tlXSA6IHt9OwogICAgICBlICUgMgogICAgICAgID8geWwoT2JqZWN0KG8pLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCwgbjsKICAgICAgICAgICAgKHQgPSBhKSwKICAgICAgICAgICAgICAoZSA9IG9bKG4gPSBlKV0pLAogICAgICAgICAgICAgIG4gaW4gdAogICAgICAgICAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiAodFtuXSA9IGUpOwogICAgICAgICAgfSkKICAgICAgICA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvKSkKICAgICAgICA6IHlsKE9iamVjdChvKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhOwogIH0KCiAgdmFyIGZsID0gewogICAgaWQ6IG51bGwsCiAgICBib2FyZFN0YXRlOiBbXSwKICAgIGRheU9mZnNldDogbnVsbCwKICAgIGN1cnJlbnRSb3dJbmRleDogMCwKICAgIHRpbWVzdGFtcHM6IHsgbGFzdFBsYXllZDogbnVsbCwgbGFzdENvbXBsZXRlZDogbnVsbCB9LAogICAgc3RhdHVzOiAiSU5fUFJPR1JFU1MiLAogIH07CgogIGZ1bmN0aW9uIGhsKHQsIGUpIHsKICAgIHZhciBuLAogICAgICBhID0gT2JqZWN0LmtleXModCk7CiAgICByZXR1cm4gKAogICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICYmCiAgICAgICAgKChuID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KSksCiAgICAgICAgZSAmJgogICAgICAgICAgKG4gPSBuLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBlKS5lbnVtZXJhYmxlOwogICAgICAgICAgfSkpLAogICAgICAgIGEucHVzaC5hcHBseShhLCBuKSksCiAgICAgIGEKICAgICk7CiAgfQoKICBmdW5jdGlvbiBibCh0KSB7CiAgICBmb3IgKHZhciBlID0gMTsgZSA8IGFyZ3VtZW50cy5sZW5ndGg7IGUrKykgewogICAgICB2YXIgbiA9IG51bGwgIT0gYXJndW1lbnRzW2VdID8gYXJndW1lbnRzW2VdIDoge307CiAgICAgIGUgJSAyCiAgICAgICAgPyBobChPYmplY3QobiksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHdsKHQsIGUsIG5bZV0pOwogICAgICAgICAgfSkKICAgICAgICA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSkKICAgICAgICA6IGhsKE9iamVjdChuKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiB0OwogIH0KCiAgZnVuY3Rpb24gd2woZSwgdCwgbikgewogICAgcmV0dXJuICgKICAgICAgdCBpbiBlCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgdCwgewogICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgIH0pCiAgICAgICAgOiAoZVt0XSA9IG4pLAogICAgICBlCiAgICApOwogIH0KCiAgdmFyIGtsLAogICAgX2wsCiAgICB2bCA9IHsKICAgICAgaGFyZE1vZGU6ICExLAogICAgICBkYXJrTW9kZToKICAgICAgICAobnVsbCA9PT0gKGtsID0gZG9jdW1lbnQuYm9keSkgfHwKICAgICAgICB2b2lkIDAgPT09IGtsIHx8CiAgICAgICAgbnVsbCA9PT0gKF9sID0ga2wuY2xhc3NOYW1lKSB8fAogICAgICAgIHZvaWQgMCA9PT0gX2wKICAgICAgICAgID8gdm9pZCAwCiAgICAgICAgICA6IF9sLmluY2x1ZGVzKCJkYXJrIikpIHx8ICExLAogICAgICBjb2xvcmJsaW5kTW9kZTogITEsCiAgICB9OwoKICBmdW5jdGlvbiB4bChlLCB0KSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGU7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHZhciBuID0KICAgICAgICAgIG51bGwgPT0gZQogICAgICAgICAgICA/IG51bGwKICAgICAgICAgICAgOiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBlW1N5bWJvbC5pdGVyYXRvcl0pIHx8CiAgICAgICAgICAgICAgZVsiQEBpdGVyYXRvciJdOwogICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgIHZhciBhLAogICAgICAgICAgICBvLAogICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgIHMgPSAhMCwKICAgICAgICAgICAgaSA9ICExOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICBuID0gbi5jYWxsKGUpOwogICAgICAgICAgICAgICEocyA9IChhID0gbi5uZXh0KCkpLmRvbmUpICYmCiAgICAgICAgICAgICAgKHIucHVzaChhLnZhbHVlKSwgIXQgfHwgci5sZW5ndGggIT09IHQpOwogICAgICAgICAgICAgIHMgPSAhMAogICAgICAgICAgICApOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAoaSA9ICEwKSwgKG8gPSBlKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcyB8fCBudWxsID09IG4ucmV0dXJuIHx8IG4ucmV0dXJuKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKGkpIHRocm93IG87CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgfSkoZSwgdCkgfHwKICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgaWYgKGUpIHsKICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgcmV0dXJuIFNsKGUsIHQpOwogICAgICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwgLTEpOwogICAgICAgICAgcmV0dXJuICJNYXAiID09PQogICAgICAgICAgICAobiA9ICJPYmplY3QiID09PSBuICYmIGUuY29uc3RydWN0b3IgPyBlLmNvbnN0cnVjdG9yLm5hbWUgOiBuKSB8fAogICAgICAgICAgICAiU2V0IiA9PT0gbgogICAgICAgICAgICA/IEFycmF5LmZyb20oZSkKICAgICAgICAgICAgOiAiQXJndW1lbnRzIiA9PT0gbiB8fAogICAgICAgICAgICAgIC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pCiAgICAgICAgICAgID8gU2woZSwgdCkKICAgICAgICAgICAgOiB2b2lkIDA7CiAgICAgICAgfQogICAgICB9KShlLCB0KSB8fAogICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoCiAgICAgICAgICAiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iCiAgICAgICAgKTsKICAgICAgfSkoKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIFNsKGUsIHQpIHsKICAgIChudWxsID09IHQgfHwgdCA+IGUubGVuZ3RoKSAmJiAodCA9IGUubGVuZ3RoKTsKICAgIGZvciAodmFyIG4gPSAwLCBhID0gbmV3IEFycmF5KHQpOyBuIDwgdDsgbisrKSBhW25dID0gZVtuXTsKICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gRWwodCwgZSkgewogICAgdmFyIG4sCiAgICAgIGEgPSBPYmplY3Qua2V5cyh0KTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYKICAgICAgICAoKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSwKICAgICAgICBlICYmCiAgICAgICAgICAobiA9IG4uZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIGUpLmVudW1lcmFibGU7CiAgICAgICAgICB9KSksCiAgICAgICAgYS5wdXNoLmFwcGx5KGEsIG4pKSwKICAgICAgYQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGpsKGEpIHsKICAgIGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7CiAgICAgIHZhciBvID0gbnVsbCAhPSBhcmd1bWVudHNbZV0gPyBhcmd1bWVudHNbZV0gOiB7fTsKICAgICAgZSAlIDIKICAgICAgICA/IEVsKE9iamVjdChvKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICh0ID0gYSksCiAgICAgICAgICAgICAgKGUgPSBvWyhuID0gZSldKSwKICAgICAgICAgICAgICBuIGluIHQKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKHRbbl0gPSBlKTsKICAgICAgICAgIH0pCiAgICAgICAgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycwogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobykpCiAgICAgICAgOiBFbChPYmplY3QobykpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobywgZSkpOwogICAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gYTsKICB9CgogIHZhciB6bCA9IEplOwoKICBmdW5jdGlvbiBObChlKSB7CiAgICByZXR1cm4gKAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIENsKGUpOwogICAgICB9KShlKSB8fAogICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoCiAgICAgICAgICAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBudWxsICE9IGVbU3ltYm9sLml0ZXJhdG9yXSkgfHwKICAgICAgICAgIG51bGwgIT0gZVsiQEBpdGVyYXRvciJdCiAgICAgICAgKQogICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oZSk7CiAgICAgIH0pKGUpIHx8CiAgICAgIChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGlmIChlKSB7CiAgICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBDbChlLCB0KTsKICAgICAgICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsIC0xKTsKICAgICAgICAgIHJldHVybiAiTWFwIiA9PT0KICAgICAgICAgICAgKG4gPSAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yID8gZS5jb25zdHJ1Y3Rvci5uYW1lIDogbikgfHwKICAgICAgICAgICAgIlNldCIgPT09IG4KICAgICAgICAgICAgPyBBcnJheS5mcm9tKGUpCiAgICAgICAgICAgIDogIkFyZ3VtZW50cyIgPT09IG4gfHwKICAgICAgICAgICAgICAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKQogICAgICAgICAgICA/IENsKGUsIHQpCiAgICAgICAgICAgIDogdm9pZCAwOwogICAgICAgIH0KICAgICAgfSkoZSkgfHwKICAgICAgKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKAogICAgICAgICAgIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIKICAgICAgICApOwogICAgICB9KSgpCiAgICApOwogIH0KCiAgZnVuY3Rpb24gQ2woZSwgdCkgewogICAgKG51bGwgPT0gdCB8fCB0ID4gZS5sZW5ndGgpICYmICh0ID0gZS5sZW5ndGgpOwogICAgZm9yICh2YXIgbiA9IDAsIGEgPSBuZXcgQXJyYXkodCk7IG4gPCB0OyBuKyspIGFbbl0gPSBlW25dOwogICAgcmV0dXJuIGE7CiAgfQoKICBmdW5jdGlvbiBBbCh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgYSA9IE9iamVjdC5rZXlzKHQpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICgobiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpLAogICAgICAgIGUgJiYKICAgICAgICAgIChuID0gbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgZSkuZW51bWVyYWJsZTsKICAgICAgICAgIH0pKSwKICAgICAgICBhLnB1c2guYXBwbHkoYSwgbikpLAogICAgICBhCiAgICApOwogIH0KCiAgZnVuY3Rpb24gT2woYSkgewogICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHsKICAgICAgdmFyIG8gPSBudWxsICE9IGFyZ3VtZW50c1tlXSA/IGFyZ3VtZW50c1tlXSA6IHt9OwogICAgICBlICUgMgogICAgICAgID8gQWwoT2JqZWN0KG8pLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCwgbjsKICAgICAgICAgICAgKHQgPSBhKSwKICAgICAgICAgICAgICAoZSA9IG9bKG4gPSBlKV0pLAogICAgICAgICAgICAgIG4gaW4gdAogICAgICAgICAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiAodFtuXSA9IGUpOwogICAgICAgICAgfSkKICAgICAgICA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvKSkKICAgICAgICA6IEFsKE9iamVjdChvKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhOwogIH0KCiAgdmFyIElsID0gewogICAgbW9kYWw6IG51bGwsCiAgICBwYWdlOiBudWxsLAogICAgZXJyb3I6IG51bGwsCiAgICBpc05hdk1vZGFsT3BlbjogITEsCiAgICB0b2FzdHM6IFtdLAogICAgaXNQYWdlQ2xvc2luZzogITEsCiAgfTsKCiAgZnVuY3Rpb24gTGwodCwgZSkgewogICAgdmFyIG4sCiAgICAgIGEgPSBPYmplY3Qua2V5cyh0KTsKICAgIHJldHVybiAoCiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgJiYKICAgICAgICAoKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKSwKICAgICAgICBlICYmCiAgICAgICAgICAobiA9IG4uZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIGUpLmVudW1lcmFibGU7CiAgICAgICAgICB9KSksCiAgICAgICAgYS5wdXNoLmFwcGx5KGEsIG4pKSwKICAgICAgYQogICAgKTsKICB9CgogIGZ1bmN0aW9uIFRsKGEpIHsKICAgIGZvciAodmFyIGUgPSAxOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB7CiAgICAgIHZhciBvID0gbnVsbCAhPSBhcmd1bWVudHNbZV0gPyBhcmd1bWVudHNbZV0gOiB7fTsKICAgICAgZSAlIDIKICAgICAgICA/IExsKE9iamVjdChvKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdmFyIHQsIG47CiAgICAgICAgICAgICh0ID0gYSksCiAgICAgICAgICAgICAgKGUgPSBvWyhuID0gZSldKSwKICAgICAgICAgICAgICBuIGluIHQKICAgICAgICAgICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKHRbbl0gPSBlKTsKICAgICAgICAgIH0pCiAgICAgICAgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycwogICAgICAgID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobykpCiAgICAgICAgOiBMbChPYmplY3QobykpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobywgZSkpOwogICAgICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gYTsKICB9CgogIHZhciBQbCA9IHsKICAgIGlzQW5pbWF0aW5nUm93OiAhMSwKICAgIGxhc3RSb3dJbnZhbGlkOiAhMSwKICAgIGxhc3RSb3dXaW46ICExLAogICAgaXNSZXN0b3JpbmdTZXNzaW9uOiAhMSwKICB9OwoKICBmdW5jdGlvbiBNbCh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgYSA9IE9iamVjdC5rZXlzKHQpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICgobiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpLAogICAgICAgIGUgJiYKICAgICAgICAgIChuID0gbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgZSkuZW51bWVyYWJsZTsKICAgICAgICAgIH0pKSwKICAgICAgICBhLnB1c2guYXBwbHkoYSwgbikpLAogICAgICBhCiAgICApOwogIH0KCiAgZnVuY3Rpb24gQmwoYSkgewogICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHsKICAgICAgdmFyIG8gPSBudWxsICE9IGFyZ3VtZW50c1tlXSA/IGFyZ3VtZW50c1tlXSA6IHt9OwogICAgICBlICUgMgogICAgICAgID8gTWwoT2JqZWN0KG8pLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCwgbjsKICAgICAgICAgICAgKHQgPSBhKSwKICAgICAgICAgICAgICAoZSA9IG9bKG4gPSBlKV0pLAogICAgICAgICAgICAgIG4gaW4gdAogICAgICAgICAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiAodFtuXSA9IGUpOwogICAgICAgICAgfSkKICAgICAgICA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvKSkKICAgICAgICA6IE1sKE9iamVjdChvKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gUmwoKSB7CiAgICByZXR1cm4gb3QuRGF0ZS5ub3coKTsKICB9CgogIHZhciBXbCA9IHsKICAgICAgbW9vZ2xlR2V0OiB7CiAgICAgICAgaXNMb2FkaW5nOiAhMSwKICAgICAgICBlcnJvcjogITEsCiAgICAgICAgZXJyb3JNZXNzYWdlOiBudWxsLAogICAgICAgIGRhdGE6IG51bGwsCiAgICAgICAgb3B0ZWRJbjogITEsCiAgICAgIH0sCiAgICAgIG1vb2dsZVBvc3Q6IHsgaXNMb2FkaW5nOiAhMSwgZXJyb3I6ICExLCBsYXN0RmFpbGVkU2F2ZURhdGE6IG51bGwgfSwKICAgICAgc29sdXRpb246IHsgaXNMb2FkaW5nOiAhMSwgZXJyb3I6ICExLCBkYXRhOiBudWxsIH0sCiAgICAgIHByb2ZpbGVJbmZvOiB7IGlzTG9hZGluZzogITEsIGVycm9yOiAhMSwgZGF0YTogbnVsbCB9LAogICAgICBhcHBMb2FkZWQ6ICExLAogICAgfSwKICAgIEhsID0gYS5jb21iaW5lUmVkdWNlcnMoewogICAgICBwZXJzaXN0OiBhLmNvbWJpbmVSZWR1Y2Vycyh7CiAgICAgICAgZ2FtZTogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIG4gPQogICAgICAgICAgICAgIDAgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdCiAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXQogICAgICAgICAgICAgICAgOiBmbCwKICAgICAgICAgICAgYSA9IDEgPCBhcmd1bWVudHMubGVuZ3RoID8gYXJndW1lbnRzWzFdIDogdm9pZCAwOwogICAgICAgICAgc3dpdGNoIChhLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSBsYToKICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKG8gPSBhLnBheWxvYWQpICYmIHZvaWQgMCAhPT0gbyAmJiBvLmdhbWUKICAgICAgICAgICAgICAgID8gYS5wYXlsb2FkLmdhbWUKICAgICAgICAgICAgICAgIDogbjsKICAgICAgICAgICAgY2FzZSBmYToKICAgICAgICAgICAgICB2YXIgZSA9IGEucGF5bG9hZCwKICAgICAgICAgICAgICAgIHQgPSBlLm51bVJvd3MsCiAgICAgICAgICAgICAgICBvID0gZS5pZCwKICAgICAgICAgICAgICAgIGUgPSBlLmRheU9mZnNldDsKICAgICAgICAgICAgICByZXR1cm4gZ2woCiAgICAgICAgICAgICAgICBnbCh7fSwgbiksCiAgICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWQ6IG8sCiAgICAgICAgICAgICAgICAgIGRheU9mZnNldDogZSwKICAgICAgICAgICAgICAgICAgYm9hcmRTdGF0ZTogQXJyYXkodCkuZmlsbCgiIiksCiAgICAgICAgICAgICAgICAgIGN1cnJlbnRSb3dJbmRleDogMCwKICAgICAgICAgICAgICAgICAgc3RhdHVzOiAiSU5fUFJPR1JFU1MiLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNhc2UgYmE6CiAgICAgICAgICAgICAgcmV0dXJuIGdsKAogICAgICAgICAgICAgICAgZ2woe30sIG4pLAogICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGJvYXJkU3RhdGU6IG4uYm9hcmRTdGF0ZS5tYXAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0gbi5jdXJyZW50Um93SW5kZXgKICAgICAgICAgICAgICAgICAgICAgID8gIiIuY29uY2F0KGUpLmNvbmNhdChhLnBheWxvYWQubGV0dGVyKQogICAgICAgICAgICAgICAgICAgICAgOiBlOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICBjYXNlIHdhOgogICAgICAgICAgICAgIHJldHVybiBnbCgKICAgICAgICAgICAgICAgIGdsKHt9LCBuKSwKICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBib2FyZFN0YXRlOiBuLmJvYXJkU3RhdGUubWFwKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPT09IG4uY3VycmVudFJvd0luZGV4CiAgICAgICAgICAgICAgICAgICAgICA/IGUuc2xpY2UoMCwgZS5sZW5ndGggLSAxKQogICAgICAgICAgICAgICAgICAgICAgOiBlOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICBjYXNlIGthOgogICAgICAgICAgICAgIChlID0gYS5wYXlsb2FkKSwgKHQgPSBlLm5vdyksIChlID0gZS5zdGF0dXMpOwogICAgICAgICAgICAgIHJldHVybiBnbCgKICAgICAgICAgICAgICAgIGdsKHt9LCBuKSwKICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjdXJyZW50Um93SW5kZXg6IG4uY3VycmVudFJvd0luZGV4ICsgMSwKICAgICAgICAgICAgICAgICAgdGltZXN0YW1wczogZ2woCiAgICAgICAgICAgICAgICAgICAgZ2woe30sIG4udGltZXN0YW1wcyksCiAgICAgICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgbGFzdENvbXBsZXRlZDoKICAgICAgICAgICAgICAgICAgICAgICAgIklOX1BST0dSRVNTIiA9PT0gZSA/IG4udGltZXN0YW1wcy5sYXN0Q29tcGxldGVkIDogdCwKICAgICAgICAgICAgICAgICAgICAgIGxhc3RQbGF5ZWQ6IHQsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBzdGF0dXM6IGUsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNldHRpbmdzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZSA9CiAgICAgICAgICAgICAgMCA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0KICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdCiAgICAgICAgICAgICAgICA6IHZsLAogICAgICAgICAgICB0ID0gMSA8IGFyZ3VtZW50cy5sZW5ndGggPyBhcmd1bWVudHNbMV0gOiB2b2lkIDA7CiAgICAgICAgICBzd2l0Y2ggKHQudHlwZSkgewogICAgICAgICAgICBjYXNlIGxhOgogICAgICAgICAgICAgIHJldHVybiBudWxsICE9PSAoYSA9IHQucGF5bG9hZCkgJiYgdm9pZCAwICE9PSBhICYmIGEuc2V0dGluZ3MKICAgICAgICAgICAgICAgID8gdC5wYXlsb2FkLnNldHRpbmdzCiAgICAgICAgICAgICAgICA6IGU7CiAgICAgICAgICAgIGNhc2UgcHM6CiAgICAgICAgICAgICAgdmFyIG4gPSB0LnBheWxvYWQsCiAgICAgICAgICAgICAgICBhID0gbi5uYW1lLAogICAgICAgICAgICAgICAgbiA9IG4udmFsdWU7CiAgICAgICAgICAgICAgcmV0dXJuIGJsKGJsKHt9LCBlKSwge30sIHdsKHt9LCBhLCBuKSk7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBzdGF0czogZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGUgPQogICAgICAgICAgICAgIDAgPCBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdCiAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXQogICAgICAgICAgICAgICAgOiB6bCwKICAgICAgICAgICAgdCA9IDEgPCBhcmd1bWVudHMubGVuZ3RoID8gYXJndW1lbnRzWzFdIDogdm9pZCAwOwogICAgICAgICAgc3dpdGNoICh0LnR5cGUpIHsKICAgICAgICAgICAgY2FzZSBsYToKICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHIgPSB0LnBheWxvYWQpICYmIHZvaWQgMCAhPT0gciAmJiByLnN0YXRzCiAgICAgICAgICAgICAgICA/IHQucGF5bG9hZC5zdGF0cwogICAgICAgICAgICAgICAgOiBlOwogICAgICAgICAgICBjYXNlIGthOgogICAgICAgICAgICAgIHZhciBuID0gdC5wYXlsb2FkLAogICAgICAgICAgICAgICAgYSA9IG4uc3RhdHVzLAogICAgICAgICAgICAgICAgbyA9IG4uaXNTdHJlYWssCiAgICAgICAgICAgICAgICByID0gbi5udW1HdWVzc2VzOwogICAgICAgICAgICAgIHJldHVybiAiSU5fUFJPR1JFU1MiID09PSBhCiAgICAgICAgICAgICAgICA/IGUKICAgICAgICAgICAgICAgIDogKChuID0gZSksCiAgICAgICAgICAgICAgICAgIChvID0gKGEgPSB7CiAgICAgICAgICAgICAgICAgICAgaXNXaW46ICJXSU4iID09PSBhLAogICAgICAgICAgICAgICAgICAgIGlzU3RyZWFrOiBvLAogICAgICAgICAgICAgICAgICAgIG51bUd1ZXNzZXM6IHIsCiAgICAgICAgICAgICAgICAgIH0pLmlzV2luKSwKICAgICAgICAgICAgICAgICAgKHIgPSBhLmlzU3RyZWFrKSwKICAgICAgICAgICAgICAgICAgKGEgPSBhLm51bUd1ZXNzZXMpLAogICAgICAgICAgICAgICAgICAobiA9IGpsKGpsKHt9LCBuKSwge30sIHsgZ3Vlc3Nlczogamwoe30sIG4uZ3Vlc3NlcykgfSkpLAogICAgICAgICAgICAgICAgICBvCiAgICAgICAgICAgICAgICAgICAgPyAoKG4uZ3Vlc3Nlc1thXSArPSAxKSwKICAgICAgICAgICAgICAgICAgICAgIHIgPyAobi5jdXJyZW50U3RyZWFrICs9IDEpIDogKG4uY3VycmVudFN0cmVhayA9IDEpKQogICAgICAgICAgICAgICAgICAgIDogKChuLmN1cnJlbnRTdHJlYWsgPSAwKSwgKG4uZ3Vlc3Nlcy5mYWlsICs9IDEpKSwKICAgICAgICAgICAgICAgICAgKG4ubWF4U3RyZWFrID0gTWF0aC5tYXgobi5jdXJyZW50U3RyZWFrLCBuLm1heFN0cmVhaykpLAogICAgICAgICAgICAgICAgICAobi5nYW1lc1BsYXllZCArPSAxKSwKICAgICAgICAgICAgICAgICAgKG4uZ2FtZXNXb24gKz0gbyA/IDEgOiAwKSwKICAgICAgICAgICAgICAgICAgKG4ud2luUGVyY2VudGFnZSA9IE1hdGgucm91bmQoCiAgICAgICAgICAgICAgICAgICAgKG4uZ2FtZXNXb24gLyBuLmdhbWVzUGxheWVkKSAqIDEwMAogICAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgICAgMCA9PT0gbi5nYW1lc1dvbgogICAgICAgICAgICAgICAgICAgID8gKG4uYXZlcmFnZUd1ZXNzZXMgPSAwKQogICAgICAgICAgICAgICAgICAgIDogKG4uYXZlcmFnZUd1ZXNzZXMgPSBNYXRoLnJvdW5kKAogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuZW50cmllcyhuLmd1ZXNzZXMpLnJlZHVjZShmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0geGwodCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gblswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBuWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUgKyBwYXJzZUludCh0LCAxMCkgKiBuOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZmFpbCIgIT09IHQgPyBuIDogZTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCkgLyBuLmdhbWVzV29uCiAgICAgICAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgICAgbik7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgfSksCiAgICAgIG92ZXJsYXlzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPQogICAgICAgICAgICAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IElsLAogICAgICAgICAgdCA9IDEgPCBhcmd1bWVudHMubGVuZ3RoID8gYXJndW1lbnRzWzFdIDogdm9pZCAwOwogICAgICAgIHN3aXRjaCAodC50eXBlKSB7CiAgICAgICAgICBjYXNlIEQ6CiAgICAgICAgICAgIHJldHVybiBPbChPbCh7fSwgZSksIHt9LCB7IG1vZGFsOiB0LnBheWxvYWQubW9kYWwgfSk7CiAgICAgICAgICBjYXNlIHE6CiAgICAgICAgICAgIHJldHVybiBPbChPbCh7fSwgZSksIHt9LCB7IG1vZGFsOiBudWxsIH0pOwogICAgICAgICAgY2FzZSBHOgogICAgICAgICAgICByZXR1cm4gT2woT2woe30sIGUpLCB7fSwgeyBwYWdlOiB0LnBheWxvYWQucGFnZSB9KTsKICAgICAgICAgIGNhc2UgRjoKICAgICAgICAgICAgcmV0dXJuIE9sKE9sKHt9LCBlKSwge30sIHsgcGFnZTogbnVsbCwgaXNQYWdlQ2xvc2luZzogITEgfSk7CiAgICAgICAgICBjYXNlIFk6CiAgICAgICAgICAgIHJldHVybiBPbChPbCh7fSwgZSksIHt9LCB7IGVycm9yOiB0LnBheWxvYWQuZXJyb3IgfSk7CiAgICAgICAgICBjYXNlICJ3b3JkbGUvb3ZlcmxheXMvQ0xPU0VfRVJST1IiOgogICAgICAgICAgICByZXR1cm4gT2woT2woe30sIGUpLCB7fSwgeyBlcnJvcjogbnVsbCB9KTsKICAgICAgICAgIGNhc2UgVToKICAgICAgICAgICAgcmV0dXJuIE9sKE9sKHt9LCBlKSwge30sIHsgaXNOYXZNb2RhbE9wZW46ICEwIH0pOwogICAgICAgICAgY2FzZSBaOgogICAgICAgICAgICByZXR1cm4gT2woT2woe30sIGUpLCB7fSwgeyBpc05hdk1vZGFsT3BlbjogITEgfSk7CiAgICAgICAgICBjYXNlIEs6CiAgICAgICAgICAgIHZhciBuID0gdC5wYXlsb2FkLAogICAgICAgICAgICAgIGEgPSB7CiAgICAgICAgICAgICAgICB0ZXh0OiBuLnRleHQsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogbi5kdXJhdGlvbiB8fCAxZTMsCiAgICAgICAgICAgICAgICBpc1N5c3RlbTogbi5pc1N5c3RlbSwKICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbi50aW1lc3RhbXAsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBuID0gZS50b2FzdHM7CiAgICAgICAgICAgIHJldHVybiBPbChPbCh7fSwgZSksIHt9LCB7IHRvYXN0czogW2FdLmNvbmNhdChObChuKSkgfSk7CiAgICAgICAgICBjYXNlIEo6CiAgICAgICAgICAgIHZhciBuID0gdC5wYXlsb2FkLAogICAgICAgICAgICAgIG8gPSBuLnRleHQsCiAgICAgICAgICAgICAgciA9IG4udGltZXN0YW1wLAogICAgICAgICAgICAgIG4gPSBlLnRvYXN0cy5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLnRleHQgIT09IG8gfHwgZS50aW1lc3RhbXAgIT09IHI7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBPbChPbCh7fSwgZSksIHt9LCB7IHRvYXN0czogbiB9KTsKICAgICAgICAgIGNhc2UgVjoKICAgICAgICAgICAgcmV0dXJuIE9sKE9sKHt9LCBlKSwge30sIHsgaXNQYWdlQ2xvc2luZzogITAgfSk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRyYW5zaWVudDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlID0KICAgICAgICAgICAgMCA8IGFyZ3VtZW50cy5sZW5ndGggJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiBQbCwKICAgICAgICAgIHQgPSAxIDwgYXJndW1lbnRzLmxlbmd0aCA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMDsKICAgICAgICBzd2l0Y2ggKHQudHlwZSkgewogICAgICAgICAgY2FzZSB3YToKICAgICAgICAgICAgcmV0dXJuIFRsKFRsKHt9LCBlKSwge30sIHsgbGFzdFJvd0ludmFsaWQ6ICExIH0pOwogICAgICAgICAgY2FzZSBLOgogICAgICAgICAgICB2YXIgbiA9IHQucGF5bG9hZCwKICAgICAgICAgICAgICBhID0gbi5pbnZhbGlkYXRlLAogICAgICAgICAgICAgIG4gPSBuLndpbjsKICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICA/IFRsKFRsKHt9LCBlKSwge30sIHsgbGFzdFJvd0ludmFsaWQ6ICEwIH0pCiAgICAgICAgICAgICAgOiBuCiAgICAgICAgICAgICAgPyBUbChUbCh7fSwgZSksIHt9LCB7IGxhc3RSb3dXaW46ICEwIH0pCiAgICAgICAgICAgICAgOiBlOwogICAgICAgICAgY2FzZSBPbzoKICAgICAgICAgICAgcmV0dXJuIFRsKFRsKHt9LCBlKSwge30sIHsgbGFzdFJvd0ludmFsaWQ6ICExIH0pOwogICAgICAgICAgY2FzZSBoYToKICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQucGF5bG9hZC5jdXJyZW50Um93SW5kZXgKICAgICAgICAgICAgICA/IGUKICAgICAgICAgICAgICA6IFRsKAogICAgICAgICAgICAgICAgICBUbCh7fSwgZSksCiAgICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaXNBbmltYXRpbmdSb3c6ICEwLAogICAgICAgICAgICAgICAgICAgIGlzUmVzdG9yaW5nU2Vzc2lvbjogITAsCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIGthOgogICAgICAgICAgICByZXR1cm4gVGwoVGwoe30sIGUpLCB7fSwgeyBpc0FuaW1hdGluZ1JvdzogITAgfSk7CiAgICAgICAgICBjYXNlIEFvOgogICAgICAgICAgICByZXR1cm4gVGwoCiAgICAgICAgICAgICAgVGwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsgaXNBbmltYXRpbmdSb3c6ICExLCBpc1Jlc3RvcmluZ1Nlc3Npb246ICExIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYXBpOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPQogICAgICAgICAgICAwIDwgYXJndW1lbnRzLmxlbmd0aCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IFdsLAogICAgICAgICAgdCA9IDEgPCBhcmd1bWVudHMubGVuZ3RoID8gYXJndW1lbnRzWzFdIDogdm9pZCAwOwogICAgICAgIHN3aXRjaCAodC50eXBlKSB7CiAgICAgICAgICBjYXNlIEFhOgogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsgbW9vZ2xlR2V0OiBCbChCbCh7fSwgZS5tb29nbGVHZXQpLCB7fSwgeyBvcHRlZEluOiAhMCB9KSB9CiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIE9hOgogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsgbW9vZ2xlR2V0OiBCbChCbCh7fSwgZS5tb29nbGVHZXQpLCB7fSwgeyBpc0xvYWRpbmc6ICEwIH0pIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIGNhc2UgUmE6CiAgICAgICAgICAgIHJldHVybiBCbCgKICAgICAgICAgICAgICBCbCh7fSwgZSksCiAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgeyBzb2x1dGlvbjogQmwoQmwoe30sIGUuc29sdXRpb24pLCB7fSwgeyBpc0xvYWRpbmc6ICEwIH0pIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIGNhc2UgSWE6CiAgICAgICAgICAgIHZhciBuID0gdC5wYXlsb2FkLAogICAgICAgICAgICAgIGEgPSBuLmRhdGEsCiAgICAgICAgICAgICAgbyA9IG4ub3B0SW47CiAgICAgICAgICAgIHJldHVybiBCbCgKICAgICAgICAgICAgICBCbCh7fSwgZSksCiAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbW9vZ2xlR2V0OiBCbCgKICAgICAgICAgICAgICAgICAgQmwoe30sIGUubW9vZ2xlR2V0KSwKICAgICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBkYXRhOiBhLAogICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZzogITEsCiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICExLAogICAgICAgICAgICAgICAgICAgIG9wdGVkSW46IG8gfHwgISFhLnZlcnNpb24sCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSBXYToKICAgICAgICAgICAgKG4gPSB0LnBheWxvYWQuZGF0YSksCiAgICAgICAgICAgICAgKG8gPSBuLnNvbHV0aW9uKSwKICAgICAgICAgICAgICAoYSA9IG4uaWQpLAogICAgICAgICAgICAgIChuID0gbi5kYXlPZmZzZXQpOwogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHNvbHV0aW9uOiBCbCgKICAgICAgICAgICAgICAgICAgQmwoe30sIGUuc29sdXRpb24pLAogICAgICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgc29sdXRpb246IG8sIGlkOiBhLCBkYXlPZmZzZXQ6IG4gfSwKICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6ICExLAogICAgICAgICAgICAgICAgICAgIGVycm9yOiAhMSwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIExhOgogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1vb2dsZUdldDogQmwoCiAgICAgICAgICAgICAgICAgIEJsKHt9LCBlLm1vb2dsZUdldCksCiAgICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nOiAhMSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogITAsCiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB0LnBheWxvYWQubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIEhhOgogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHNvbHV0aW9uOiBCbCgKICAgICAgICAgICAgICAgICAgQmwoe30sIGUuc29sdXRpb24pLAogICAgICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICAgICAgeyBpc0xvYWRpbmc6ICExLCBlcnJvcjogITAgfQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIERhOgogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsgcHJvZmlsZUluZm86IHsgaXNMb2FkaW5nOiAhMCwgZGF0YTogbnVsbCwgZXJyb3I6ICExIH0gfQogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSBxYToKICAgICAgICAgICAgcmV0dXJuIEJsKAogICAgICAgICAgICAgIEJsKHt9LCBlKSwKICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwcm9maWxlSW5mbzogeyBpc0xvYWRpbmc6ICExLCBkYXRhOiB0LnBheWxvYWQuZGF0YSwgZXJyb3I6ICExIH0sCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgY2FzZSBHYToKICAgICAgICAgICAgcmV0dXJuIEJsKAogICAgICAgICAgICAgIEJsKHt9LCBlKSwKICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICB7IHByb2ZpbGVJbmZvOiB7IGlzTG9hZGluZzogITEsIGRhdGE6IG51bGwsIGVycm9yOiAhMCB9IH0KICAgICAgICAgICAgKTsKICAgICAgICAgIGNhc2UgVGE6CiAgICAgICAgICAgIHJldHVybiBCbCgKICAgICAgICAgICAgICBCbCh7fSwgZSksCiAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbW9vZ2xlUG9zdDogQmwoCiAgICAgICAgICAgICAgICAgIEJsKHt9LCBlLm1vb2dsZVBvc3QpLAogICAgICAgICAgICAgICAgICB7fSwKICAgICAgICAgICAgICAgICAgeyBpc0xvYWRpbmc6ICEwLCBlcnJvcjogITEgfQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIFBhOgogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1vb2dsZVBvc3Q6IHsKICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nOiAhMSwKICAgICAgICAgICAgICAgICAgZXJyb3I6ICExLAogICAgICAgICAgICAgICAgICBsYXN0RmFpbGVkU2F2ZURhdGE6IG51bGwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIGNhc2UgTWE6CiAgICAgICAgICAgIHJldHVybiBCbCgKICAgICAgICAgICAgICBCbCh7fSwgZSksCiAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbW9vZ2xlUG9zdDogewogICAgICAgICAgICAgICAgICBpc0xvYWRpbmc6ICExLAogICAgICAgICAgICAgICAgICBlcnJvcjogITAsCiAgICAgICAgICAgICAgICAgIGxhc3RGYWlsZWRTYXZlRGF0YTogdC5wYXlsb2FkLnNhdmVEYXRhLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICBjYXNlIFZhOgogICAgICAgICAgICByZXR1cm4gQmwoQmwoe30sIGUpLCB7fSwgeyBhcHBMb2FkZWQ6IHQucGF5bG9hZC5hcHBMb2FkZWQgfSk7CiAgICAgICAgICBjYXNlIEJhOgogICAgICAgICAgICByZXR1cm4gQmwoCiAgICAgICAgICAgICAgQmwoe30sIGUpLAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1vb2dsZVBvc3Q6IHsKICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nOiAhMSwKICAgICAgICAgICAgICAgICAgZXJyb3I6ICExLAogICAgICAgICAgICAgICAgICBsYXN0RmFpbGVkU2F2ZURhdGE6IG51bGwsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0KICAgICAgfSwKICAgIH0pLAogICAgRGwgPSAvXHMvOwogIHZhciBxbCA9IC9eXHMrLzsKCiAgZnVuY3Rpb24gR2woZSkgewogICAgcmV0dXJuICgKICAgICAgZSAmJgogICAgICBlCiAgICAgICAgLnNsaWNlKAogICAgICAgICAgMCwKICAgICAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5sZW5ndGg7IHQtLSAmJiBEbC50ZXN0KGUuY2hhckF0KHQpKTsgKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9KShlKSArIDEKICAgICAgICApCiAgICAgICAgLnJlcGxhY2UocWwsICIiKQogICAgKTsKICB9CgogIGZ1bmN0aW9uIEZsKGUpIHsKICAgIHJldHVybiAoRmwgPQogICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgID8gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlOwogICAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYKICAgICAgICAgICAgICAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYKICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYKICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlCiAgICAgICAgICAgICAgPyAic3ltYm9sIgogICAgICAgICAgICAgIDogdHlwZW9mIGU7CiAgICAgICAgICB9KShlKTsKICB9CgogIHZhciBWbCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pLAogICAgWWwgPSAvXjBiWzAxXSskL2ksCiAgICBVbCA9IC9eMG9bMC03XSskL2ksCiAgICBabCA9IHBhcnNlSW50OwoKICBmdW5jdGlvbiBYbChlKSB7CiAgICBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGUpIHJldHVybiBlOwogICAgaWYgKCJzeW1ib2wiID09IEZsKCh0ID0gZSkpIHx8ICgkdCh0KSAmJiAiW29iamVjdCBTeW1ib2xdIiA9PSBtdCh0KSkpCiAgICAgIHJldHVybiBOYU47CiAgICB2YXIgdDsKICAgIGlmICgKICAgICAgInN0cmluZyIgIT0KICAgICAgdHlwZW9mIChlID0geXQoZSkKICAgICAgICA/IHl0KChuID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZS52YWx1ZU9mID8gZS52YWx1ZU9mKCkgOiBlKSkKICAgICAgICAgID8gbiArICIiCiAgICAgICAgICA6IG4KICAgICAgICA6IGUpCiAgICApCiAgICAgIHJldHVybiAwID09PSBlID8gZSA6ICtlOwogICAgZSA9IEdsKGUpOwogICAgdmFyIG4gPSBZbC50ZXN0KGUpOwogICAgcmV0dXJuIG4gfHwgVWwudGVzdChlKSA/IFpsKGUuc2xpY2UoMiksIG4gPyAyIDogOCkgOiBWbC50ZXN0KGUpID8gTmFOIDogK2U7CiAgfQoKICB2YXIgS2wgPSAiRXhwZWN0ZWQgYSBmdW5jdGlvbiIsCiAgICBKbCA9IE1hdGgubWF4LAogICAgUWwgPSBNYXRoLm1pbjsKCiAgZnVuY3Rpb24gJGwoYSwgbiwgZSkgewogICAgdmFyIG8sCiAgICAgIHIsCiAgICAgIHMsCiAgICAgIGksCiAgICAgIGwsCiAgICAgIGMsCiAgICAgIHUgPSAwLAogICAgICBkID0gITEsCiAgICAgIG0gPSAhMSwKICAgICAgdCA9ICEwOwogICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGEpIHRocm93IG5ldyBUeXBlRXJyb3IoS2wpOwoKICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICB2YXIgdCA9IG8sCiAgICAgICAgbiA9IHI7CiAgICAgIHJldHVybiAobyA9IHIgPSB2b2lkIDApLCAodSA9IGUpLCAoaSA9IGEuYXBwbHkobiwgdCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHkoZSkgewogICAgICB2YXIgdCA9IGUgLSBjOwogICAgICByZXR1cm4gdm9pZCAwID09PSBjIHx8IG4gPD0gdCB8fCB0IDwgMCB8fCAobSAmJiBzIDw9IGUgLSB1KTsKICAgIH0KCiAgICBmdW5jdGlvbiBnKCkgewogICAgICB2YXIgZSwKICAgICAgICB0ID0gUmwoKTsKICAgICAgaWYgKHkodCkpIHJldHVybiBmKHQpOwogICAgICBsID0gc2V0VGltZW91dChnLCAoKHQgPSBuIC0gKChlID0gdCkgLSBjKSksIG0gPyBRbCh0LCBzIC0gKGUgLSB1KSkgOiB0KSk7CiAgICB9CgogICAgZnVuY3Rpb24gZihlKSB7CiAgICAgIHJldHVybiAobCA9IHZvaWQgMCksIHQgJiYgbyA/IHAoZSkgOiAoKG8gPSByID0gdm9pZCAwKSwgaSk7CiAgICB9CgogICAgZnVuY3Rpb24gaCgpIHsKICAgICAgdmFyIGUgPSBSbCgpLAogICAgICAgIHQgPSB5KGUpOwogICAgICBpZiAoKChvID0gYXJndW1lbnRzKSwgKHIgPSB0aGlzKSwgKGMgPSBlKSwgdCkpIHsKICAgICAgICBpZiAodm9pZCAwID09PSBsKQogICAgICAgICAgcmV0dXJuICh1ID0gdCA9IGMpLCAobCA9IHNldFRpbWVvdXQoZywgbikpLCBkID8gcCh0KSA6IGk7CiAgICAgICAgaWYgKG0pIHJldHVybiBjbGVhclRpbWVvdXQobCksIChsID0gc2V0VGltZW91dChnLCBuKSksIHAoYyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbCAmJiAobCA9IHNldFRpbWVvdXQoZywgbikpLCBpOwogICAgfQoKICAgIHJldHVybiAoCiAgICAgIChuID0gWGwobikgfHwgMCksCiAgICAgIHl0KGUpICYmCiAgICAgICAgKChkID0gISFlLmxlYWRpbmcpLAogICAgICAgIChtID0gIm1heFdhaXQiIGluIGUpLAogICAgICAgIChzID0gbSA/IEpsKFhsKGUubWF4V2FpdCkgfHwgMCwgbikgOiBzKSwKICAgICAgICAodCA9ICJ0cmFpbGluZyIgaW4gZSA/ICEhZS50cmFpbGluZyA6IHQpKSwKICAgICAgKGguY2FuY2VsID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZvaWQgMCAhPT0gbCAmJiBjbGVhclRpbWVvdXQobCksIChvID0gYyA9IHIgPSBsID0gdm9pZCAodSA9IDApKTsKICAgICAgfSksCiAgICAgIChoLmZsdXNoID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB2b2lkIDAgPT09IGwgPyBpIDogZihSbCgpKTsKICAgICAgfSksCiAgICAgIGgKICAgICk7CiAgfQoKICBmdW5jdGlvbiBlYyh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgYSA9IE9iamVjdC5rZXlzKHQpOwogICAgcmV0dXJuICgKICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAmJgogICAgICAgICgobiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpLAogICAgICAgIGUgJiYKICAgICAgICAgIChuID0gbi5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgZSkuZW51bWVyYWJsZTsKICAgICAgICAgIH0pKSwKICAgICAgICBhLnB1c2guYXBwbHkoYSwgbikpLAogICAgICBhCiAgICApOwogIH0KCiAgZnVuY3Rpb24gdGMoYSkgewogICAgZm9yICh2YXIgZSA9IDE7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHsKICAgICAgdmFyIG8gPSBudWxsICE9IGFyZ3VtZW50c1tlXSA/IGFyZ3VtZW50c1tlXSA6IHt9OwogICAgICBlICUgMgogICAgICAgID8gZWMoT2JqZWN0KG8pLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB2YXIgdCwgbjsKICAgICAgICAgICAgKHQgPSBhKSwKICAgICAgICAgICAgICAoZSA9IG9bKG4gPSBlKV0pLAogICAgICAgICAgICAgIG4gaW4gdAogICAgICAgICAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLAogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwLAogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgOiAodFtuXSA9IGUpOwogICAgICAgICAgfSkKICAgICAgICA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzCiAgICAgICAgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhvKSkKICAgICAgICA6IGVjKE9iamVjdChvKSkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwgZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLCBlKSk7CiAgICAgICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhOwogIH0KCiAgZnVuY3Rpb24gbmModSkgewogICAgdmFyIGQgPSAkbChmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gdS5kaXNwYXRjaChYYShlKSk7CiAgICB9LCAxMjAwKTsKICAgIHJldHVybiAoCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSBMZSh1LmdldFN0YXRlKCkpOwogICAgICAgIGUgJiYgZChlKTsKICAgICAgfSksCiAgICAgIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgdCwKICAgICAgICAgICAgbiA9IGMoZSksCiAgICAgICAgICAgIGEgPSB1LmdldFN0YXRlKCksCiAgICAgICAgICAgIG8gPSBBZShhKSwKICAgICAgICAgICAgciA9IEVlKGEpLAogICAgICAgICAgICBzID0gT2UoYSksCiAgICAgICAgICAgIGkgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxZTMpLAogICAgICAgICAgICBsID0gdGModGMoe30sIGEucGVyc2lzdCksIHt9LCB7IHRpbWVzdGFtcDogaSB9KSwKICAgICAgICAgICAgaSA9IHJhKHIsIG8pLAogICAgICAgICAgICBvID0gW3BzLCBrYSwgZmEsIEZhXTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHNjKGwpIHx8CiAgICAgICAgICAgICAgKG8uaW5jbHVkZXMoZS50eXBlKSAmJgogICAgICAgICAgICAgICAgKHNhKGksIGwpLAogICAgICAgICAgICAgICAgciAmJgogICAgICAgICAgICAgICAgICAoZS50eXBlID09PSBGYQogICAgICAgICAgICAgICAgICAgID8gKCh0ID0gZS5wYXlsb2FkLmVuYWJsZUF1dGgpLCB1LmRpc3BhdGNoKFhhKGwsIHQpKSkKICAgICAgICAgICAgICAgICAgICA6IGQobCkpKSwKICAgICAgICAgICAgICBzICYmIGUudHlwZSA9PT0gaGEgJiYgZChsKSwKICAgICAgICAgICAgICBlLnR5cGUgPT09IHBzICYmCiAgICAgICAgICAgICAgICAoKHMgPSAodCA9IGEucGVyc2lzdC5zZXR0aW5ncykuaGFyZE1vZGUpLAogICAgICAgICAgICAgICAgKGwgPSB0LmRhcmtNb2RlKSwKICAgICAgICAgICAgICAgICh0ID0gdC5jb2xvcmJsaW5kTW9kZSksCiAgICAgICAgICAgICAgICAiaGFyZE1vZGUiID09PSBlLnBheWxvYWQubmFtZSAmJiBLbih7IGhhcmRNb2RlOiBzIH0pLAogICAgICAgICAgICAgICAgImRhcmtNb2RlIiA9PT0gZS5wYXlsb2FkLm5hbWUgJiYgc2EoYWEsIGwpLAogICAgICAgICAgICAgICAgImNvbG9yYmxpbmRNb2RlIiA9PT0gZS5wYXlsb2FkLm5hbWUgJiYgc2Eob2EsIHQpKSwKICAgICAgICAgICAgICBlLnR5cGUgPT09IGthICYmCiAgICAgICAgICAgICAgICAoS24oaWEoYSkpLAogICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEtlLCBKU09OLnN0cmluZ2lmeShlKSk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KShhLnBlcnNpc3Quc3RhdHMpKSwKICAgICAgICAgICAgICBlLnR5cGUgPT09IGZhICYmIEtuKGlhKGEpKSksCiAgICAgICAgICAgIG4KICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgfQogICAgKTsKICB9CgogIGZ1bmN0aW9uIGFjKF8pIHsKICAgIHJldHVybiBmdW5jdGlvbiAoaykgewogICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IGsoZSksCiAgICAgICAgICBuID0gXy5nZXRTdGF0ZSgpLAogICAgICAgICAgYSA9IEwobiksCiAgICAgICAgICBvID0gSShuKSwKICAgICAgICAgIHIgPSAiIi5jb25jYXQoWWUobikpLAogICAgICAgICAgcyA9IE8obik7CiAgICAgICAgc3dpdGNoIChlLnR5cGUpIHsKICAgICAgICAgIGNhc2UgRDoKICAgICAgICAgICAgdmFyIGkgPSBlLnBheWxvYWQsCiAgICAgICAgICAgICAgbCA9IGkubW9kYWwsCiAgICAgICAgICAgICAgaSA9IGkuaXNDbGlja2VkOwogICAgICAgICAgICAic3RhdHMiID09PSBsICYmCiAgICAgICAgICAgICAgaSAmJgogICAgICAgICAgICAgIHYudHJhY2tNb2R1bGVJbnRlcmFjdGlvbigiY2xpY2siLCByLCAid29yZGxlIiwgbCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBHOgogICAgICAgICAgICB2YXIgYyA9IGUucGF5bG9hZC5wYWdlOwogICAgICAgICAgICBjICYmIHYudHJhY2tNb2R1bGVJbnRlcmFjdGlvbigiY2xpY2siLCByLCAid29yZGxlIiwgYyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBVOgogICAgICAgICAgICB2LnRyYWNrQ2xpY2soewogICAgICAgICAgICAgIG5hbWU6ICJ3b3JkbGUiLAogICAgICAgICAgICAgIGxhYmVsOiAiY2xpY2stbmF2IiwKICAgICAgICAgICAgICB1c2VCZWFjb246ICEwLAogICAgICAgICAgICAgIGNvbnRleHQ6IG51bGwsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgWDoKICAgICAgICAgICAgdmFyIHUgPSBlLnBheWxvYWQsCiAgICAgICAgICAgICAgbCA9IHUubmFtZSwKICAgICAgICAgICAgICBjID0gdS5sYWJlbCwKICAgICAgICAgICAgICBkID0gdS51c2VCZWFjb24sCiAgICAgICAgICAgICAgdSA9IHUuY29udGV4dDsKICAgICAgICAgICAgdi50cmFja0NsaWNrKHsgbmFtZTogbCwgbGFiZWw6IGMsIHVzZUJlYWNvbjogZCwgY29udGV4dDogdSB9KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIHBzOgogICAgICAgICAgICAoZCA9IGUucGF5bG9hZCksICh1ID0gZC5uYW1lKSwgKGQgPSBkLnZhbHVlKTsKICAgICAgICAgICAgdi50cmFja01vZHVsZUludGVyYWN0aW9uKAogICAgICAgICAgICAgICJjbGljayIsCiAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAid29yZGxlIiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBkYXJrTW9kZTogImRhcmstbW9kZSIsCiAgICAgICAgICAgICAgICBjb2xvcmJsaW5kTW9kZTogImhpZ2gtY29udHJhc3QiLAogICAgICAgICAgICAgICAgaGFyZE1vZGU6ICJoYXJkLW1vZGUiLAogICAgICAgICAgICAgIH1bdV0sCiAgICAgICAgICAgICAgZCA/ICJ0dXJuLW9uIiA6ICJ0dXJuLW9mZiIKICAgICAgICAgICAgKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIGthOgogICAgICAgICAgICB2YXIgbSA9IG8gPyAiMSIgOiAiMCIsCiAgICAgICAgICAgICAgcCA9IHMgPyAiaCIgOiAiZSIsCiAgICAgICAgICAgICAgeSA9IGUucGF5bG9hZCwKICAgICAgICAgICAgICBnID0geS5udW1HdWVzc2VzLAogICAgICAgICAgICAgIGYgPSB5LnN0YXR1cywKICAgICAgICAgICAgICB5ID0geS5ndWVzczsKICAgICAgICAgICAgMSA9PT0gZyAmJgogICAgICAgICAgICAgIHYudHJhY2tNb2R1bGVJbnRlcmFjdGlvbigKICAgICAgICAgICAgICAgICJjbGljayIsCiAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgIndvcmRsZSIsCiAgICAgICAgICAgICAgICAic3RhcnQtZ2FtZSIsCiAgICAgICAgICAgICAgICAiQ0I9Ii5jb25jYXQoYSA/ICIxIiA6ICIwIiwgIiBETT0iKS5jb25jYXQobSkKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIHYudHJhY2tNb2R1bGVJbnRlcmFjdGlvbigKICAgICAgICAgICAgICAgICJjbGljayIsCiAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgIndvcmRsZSIsCiAgICAgICAgICAgICAgICAic29sdmUtYXR0ZW1wdCIsCiAgICAgICAgICAgICAgICAiIi5jb25jYXQoZy50b1N0cmluZygpLCAiLSIpLmNvbmNhdCh5KQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgIklOX1BST0dSRVNTIiAhPT0gZiAmJgogICAgICAgICAgICAgICAgdi50cmFja01vZHVsZUludGVyYWN0aW9uKAogICAgICAgICAgICAgICAgICAiY2xpY2siLAogICAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgICAid29yZGxlIiwKICAgICAgICAgICAgICAgICAgIjEwMCUtY29tcGxldGUiLAogICAgICAgICAgICAgICAgICAiIi5jb25jYXQocCwgIi0iKS5jb25jYXQoIldJTiIgPT09IGYgPyBnIDogMCkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBjcjoKICAgICAgICAgICAgdmFyIG0gPSBlLnBheWxvYWQuaXNHYW1lQ29tcGxldGUgPyAiY29uZ3JhdHMtbW9kYWwiIDogInN0YXRzIiwKICAgICAgICAgICAgICB5ID0gcG8obiksCiAgICAgICAgICAgICAgcCA9IGdvKG4pLAogICAgICAgICAgICAgIGYgPSBmbyhuKSwKICAgICAgICAgICAgICBoID0gaG8obiksCiAgICAgICAgICAgICAgZyA9IHlvKG4pOwogICAgICAgICAgICB2LnRyYWNrSW1wcmVzc2lvbigKICAgICAgICAgICAgICAid29yZGxlIiwKICAgICAgICAgICAgICBtLAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICJwOiAiLmNvbmNhdCh5KSwKICAgICAgICAgICAgICAgICJ3OiAiLmNvbmNhdChnKSwKICAgICAgICAgICAgICAgICJjczogIi5jb25jYXQoZiksCiAgICAgICAgICAgICAgICAibXM6ICIuY29uY2F0KHApLAogICAgICAgICAgICAgICAgIjE6ICIuY29uY2F0KGhbMV0pLAogICAgICAgICAgICAgICAgIjI6ICIuY29uY2F0KGhbMl0pLAogICAgICAgICAgICAgICAgIjM6ICIuY29uY2F0KGhbM10pLAogICAgICAgICAgICAgICAgIjQ6ICIuY29uY2F0KGhbNF0pLAogICAgICAgICAgICAgICAgIjU6ICIuY29uY2F0KGhbNV0pLAogICAgICAgICAgICAgICAgIjY6ICIuY29uY2F0KGhbNl0pLAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgcgogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgdXI6CiAgICAgICAgICAgIHYudHJhY2tNb2R1bGVJbnRlcmFjdGlvbigiY2xpY2siLCByLCAid29yZGxlIiwgInNoYXJlIik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSBROgogICAgICAgICAgICB2YXIgaCA9IGUucGF5bG9hZCwKICAgICAgICAgICAgICBiID0gaC5sYWJlbCwKICAgICAgICAgICAgICB3ID0gaC5zZW5kQ29udGV4dCwKICAgICAgICAgICAgICBoID0gaC5lbGVtZW50LAogICAgICAgICAgICAgIHcgPSB3ID8gciA6IG51bGw7CiAgICAgICAgICAgIHYudHJhY2tDbGljaygKICAgICAgICAgICAgICBoCiAgICAgICAgICAgICAgICA/IHsgbmFtZTogIiIsIGxhYmVsOiBiLCBlbGVtZW50OiBoLCB1c2VCZWFjb246ICEwLCBjb250ZXh0OiB3IH0KICAgICAgICAgICAgICAgIDogewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICJ3b3JkbGUiLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBiLAogICAgICAgICAgICAgICAgICAgIHVzZUJlYWNvbjogITAsCiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogdywKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJDoKICAgICAgICAgICAgKGIgPSBlLnBheWxvYWQpLCAodyA9IGIubmFtZSksIChiID0gYi5yZWdpb24pOwogICAgICAgICAgICB2LnRyYWNrSW1wcmVzc2lvbih3LCBiKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHQ7CiAgICAgIH07CiAgICB9OwogIH0KCiAgdmFyIG9jLAogICAgcmMsCiAgICBzYyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gZS5nYW1lLmRheU9mZnNldCwKICAgICAgICBlID0gZS50aW1lc3RhbXAsCiAgICAgICAgZSA9IHZlKG5ldyBEYXRlKDFlMyAqIGUpKTsKICAgICAgcmV0dXJuIHQgJiYgdCA8IGU7CiAgICB9LAogICAgQSA9IGRvY3VtZW50LmJvZHk7CiAgZS5yZW5kZXIoCiAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgIF8uRnJhZ21lbnQsCiAgICAgIG51bGwsCiAgICAgIF8uY3JlYXRlRWxlbWVudChyLCBudWxsKSwKICAgICAgXy5jcmVhdGVFbGVtZW50KAogICAgICAgIHQuUHJvdmlkZXIsCiAgICAgICAgewogICAgICAgICAgc3RvcmU6CiAgICAgICAgICAgICgob2MgPSB2b2lkIDAgIT09IHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fKSwKICAgICAgICAgICAgKHJjID0gW2EuYXBwbHlNaWRkbGV3YXJlKG8sIG5jLCBhYyldKSwKICAgICAgICAgICAgb2MgJiYgcmMucHVzaCh3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fXygpKSwKICAgICAgICAgICAgYS5jcmVhdGVTdG9yZShIbCwgYS5jb21wb3NlLmFwcGx5KHZvaWQgMCwgcmMpKSksCiAgICAgICAgfSwKICAgICAgICBfLmNyZWF0ZUVsZW1lbnQoCiAgICAgICAgICBtLAogICAgICAgICAgbnVsbCwKICAgICAgICAgIF8uY3JlYXRlRWxlbWVudCh1ZSwgbnVsbCwgXy5jcmVhdGVFbGVtZW50KHBsLCBudWxsKSkKICAgICAgICApCiAgICAgICkKICAgICksCiAgICBBCiAgKTsKfSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdvcmRsZS5qcy5tYXAK"
    ></script>
    <script type="text/javascript">
      !(function (r) {
        var n, t;
        (r = r || self),
          (n = r.Abra),
          ((t = r.Abra =
            (function () {
              "use strict";
              var r = Array.isArray,
                n = function (r, n, t) {
                  var e = r(t, n),
                    u = e[0],
                    o = e[1];
                  if (null == u || "" === u) return n;
                  for (
                    var i = String(u).split("."), a = 0;
                    a < i.length && (n = n[i[a]]);
                    a++
                  );
                  return null == n && (n = o), null != n ? n : null;
                },
                t = function (r, n, t) {
                  return r(t, n).reduce(function (r, n) {
                    return parseFloat(r) + parseFloat(n);
                  }, 0);
                },
                e = function (r, n, t) {
                  var e = r(t, n);
                  return e[0] / e[1];
                },
                u = function (r, n, t) {
                  var e = r(t, n);
                  return e[0] % e[1];
                },
                o = function (r, n, t) {
                  return r(t, n).reduce(function (r, n) {
                    return parseFloat(r) * parseFloat(n);
                  }, 1);
                },
                i = function (r, n, t) {
                  var e = r(t, n),
                    u = e[0],
                    o = e[1];
                  return void 0 === o ? -u : u - o;
                };

              function a(n) {
                return !((r(n) && 0 === n.length) || !n);
              }

              var f = function (r, n, t) {
                  for (var e, u = 0; u < t.length; u++)
                    if (!a((e = r(t[u], n)))) return e;
                  return e;
                },
                c = function (r, n, t) {
                  var e;
                  for (e = 0; e < t.length - 1; e += 2)
                    if (a(r(t[e], n))) return r(t[e + 1], n);
                  return t.length === e + 1 ? r(t[e], n) : null;
                },
                l = function (r, n, t) {
                  return !a(r(t, n)[0]);
                },
                v = function (r, n, t) {
                  for (var e, u = 0; u < t.length; u++)
                    if (a((e = r(t[u], n)))) return e;
                  return e;
                },
                d = function (r, n, t) {
                  var e = r(t, n);
                  return e[0] === e[1];
                },
                s = function (r, n, t) {
                  var e = r(t, n);
                  return e[0] !== e[1];
                },
                h = function (r, n, t) {
                  var e = r(t, n),
                    u = e[0],
                    o = e[1];
                  return !(!o || void 0 === o.indexOf) && -1 !== o.indexOf(u);
                },
                g = function (r, n, t) {
                  var e = r(t, n);
                  return e[0] > e[1];
                },
                p = function (r, n, t) {
                  var e = r(t, n);
                  return e[0] >= e[1];
                },
                b = function (r, n, t) {
                  var e = r(t, n),
                    u = e[0],
                    o = e[1],
                    i = e[2];
                  return void 0 === i ? u < o : u < o && o < i;
                },
                w = function (r, n, t) {
                  var e = r(t, n),
                    u = e[0],
                    o = e[1],
                    i = e[2];
                  return void 0 === i ? u <= o : u <= o && o <= i;
                },
                y = function (r, n, t) {
                  var e = t[0],
                    u = t[1],
                    o = t.slice(2),
                    i = r(e, n);
                  if (!i) return null;
                  if (0 === o.length) return null;
                  if (1 === o.length) return r(o[0], n);
                  if (4294967295 === o[0]) return r(o[1], n);
                  for (
                    var a = (function (r) {
                      var n,
                        t,
                        e,
                        u,
                        o,
                        i = [],
                        a = [
                          (t = 1732584193),
                          (e = 4023233417),
                          ~t,
                          ~e,
                          3285377520,
                        ],
                        f = [],
                        c = unescape(encodeURI(r)) + "\x80",
                        l = c.length;
                      for (f[(r = (--l / 4 + 2) | 15)] = 8 * l; ~l; )
                        f[l >> 2] |= c.charCodeAt(l) << (8 * ~l--);
                      for (n = l = 0; n < r; n += 16) {
                        for (
                          t = a;
                          l < 80;
                          t = [
                            t[4] +
                              (i[l] = l < 16 ? ~~f[n + l] : (2 * c) | (c < 0)) +
                              1518500249 +
                              [
                                (e & u) | (~e & o),
                                (c = 341275144 + (e ^ u ^ o)),
                                882459459 + ((e & u) | (e & o) | (u & o)),
                                c + 1535694389,
                              ][(l++ / 5) >> 2] +
                              (((c = t[0]) << 5) | (c >>> 27)),
                            c,
                            (e << 30) | (e >>> 2),
                            u,
                            o,
                          ]
                        )
                          (c = i[l - 3] ^ i[l - 8] ^ i[l - 14] ^ i[l - 16]),
                            (e = t[1]),
                            (u = t[2]),
                            (o = t[3]);
                        for (l = 5; l; ) a[--l] += t[l];
                      }
                      return a[0] >>> 0;
                    })(i + " " + r(u, n));
                    o.length > 1;

                  ) {
                    var f = o.splice(0, 2),
                      c = f[0],
                      l = f[1];
                    if (a <= r(c, n)) return r(l, n);
                  }
                  return 0 === o.length ? null : r(o[0], n);
                },
                k = function (r, n, t) {
                  var e = t[0],
                    u = t[1],
                    o = r(e, n);
                  return null == o ? null : new RegExp(u).test(o);
                };
              return function (a, m, O, A) {
                void 0 === a && (a = {}),
                  void 0 === m && (m = {}),
                  void 0 === O && (O = {}),
                  void 0 === A && (A = !1);
                var j = (function () {
                    var r = {},
                      n = function (n) {
                        if (n)
                          for (
                            var t,
                              e = decodeURIComponent(n[1]),
                              u = /(?:^|,)([^,=]+)=([^,]*)/g;
                            (t = u.exec(e));

                          ) {
                            var o = t,
                              i = o[1],
                              a = o[2];
                            r[i] = a || null;
                          }
                      };
                    n(document.cookie.match(/(?:^|;) *abra-overrides=([^;]+)/)),
                      n(
                        window.location.search.match(
                          /(?:\?|&)abra-overrides=([^&]+)/
                        )
                      );
                    var t =
                      /(?:^|;) *abra-nuke=true(?:;|$)/.test(document.cookie) ||
                      /(?:\?|&)abra-nuke=true(?:&|$)/.test(
                        window.location.search
                      );
                    return [r, t];
                  })(),
                  x = j[0],
                  E = j[1];
                Object.keys(O).forEach(function (r) {
                  x[r] = O[r];
                });
                var F,
                  C = A || E,
                  R =
                    ((F = {
                      var: n,
                      if: c,
                      "===": d,
                      "!==": s,
                      and: f,
                      or: v,
                      "!": l,
                      ">": g,
                      ">=": p,
                      "<": b,
                      "<=": w,
                      "+": t,
                      "-": i,
                      "*": o,
                      "/": e,
                      "%": u,
                      in: h,
                      abtest_partition: y,
                      regex_match: k,
                      ref: function (r, n, t) {
                        var e = r(t, n)[0];
                        return U(e);
                      },
                    }),
                    function n(t, e) {
                      if ((e || (e = {}), r(t)))
                        return t.map(function (r) {
                          return n(r, e);
                        });
                      if (
                        !(function (n) {
                          return (
                            "object" == typeof n &&
                            null !== n &&
                            !r(n) &&
                            1 === Object.keys(n).length
                          );
                        })(t)
                      )
                        return t;
                      var u = (function (r) {
                          return Object.keys(r)[0];
                        })(t),
                        o = t[u];
                      r(o) || (o = [o]);
                      var i = F[u];
                      if (!i) throw new Error("Unrecognized operation " + u);
                      return i(n, e, o);
                    }),
                  U = function (r) {
                    if (!r) return null;
                    var n = x[r];
                    if (void 0 === n) {
                      if (!C) {
                        if (Object.prototype.hasOwnProperty.call(x, r))
                          throw new Error("circular logic");
                        (x[r] = void 0), (n = R(a[r], m));
                      }
                      void 0 === n && (n = null), (x[r] = n);
                    }
                    return n;
                  };
                return U;
              };
            })()).noConflict = function () {
            return (r.Abra = n), t;
          });
      })(this);
    </script>
  </body>
</html>
